var sI=Object.defineProperty;var oI=(r,e,t)=>e in r?sI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var zn=(r,e,t)=>oI(r,typeof e!="symbol"?e+"":e,t);function aI(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var hn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function N6(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var j6={exports:{}},K0={},R6={exports:{}},bn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ud=Symbol.for("react.element"),lI=Symbol.for("react.portal"),cI=Symbol.for("react.fragment"),uI=Symbol.for("react.strict_mode"),hI=Symbol.for("react.profiler"),fI=Symbol.for("react.provider"),dI=Symbol.for("react.context"),pI=Symbol.for("react.forward_ref"),mI=Symbol.for("react.suspense"),gI=Symbol.for("react.memo"),yI=Symbol.for("react.lazy"),jw=Symbol.iterator;function bI(r){return r===null||typeof r!="object"?null:(r=jw&&r[jw]||r["@@iterator"],typeof r=="function"?r:null)}var P6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M6=Object.assign,O6={};function Oh(r,e,t){this.props=r,this.context=e,this.refs=O6,this.updater=t||P6}Oh.prototype.isReactComponent={};Oh.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};Oh.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function L6(){}L6.prototype=Oh.prototype;function Tb(r,e,t){this.props=r,this.context=e,this.refs=O6,this.updater=t||P6}var Nb=Tb.prototype=new L6;Nb.constructor=Tb;M6(Nb,Oh.prototype);Nb.isPureReactComponent=!0;var Rw=Array.isArray,D6=Object.prototype.hasOwnProperty,jb={current:null},F6={key:!0,ref:!0,__self:!0,__source:!0};function B6(r,e,t){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)D6.call(e,n)&&!F6.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){for(var c=Array(l),a=0;a<l;a++)c[a]=arguments[a+2];i.children=c}if(r&&r.defaultProps)for(n in l=r.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Ud,type:r,key:s,ref:o,props:i,_owner:jb.current}}function vI(r,e){return{$$typeof:Ud,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function Rb(r){return typeof r=="object"&&r!==null&&r.$$typeof===Ud}function wI(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var Pw=/\/+/g;function l1(r,e){return typeof r=="object"&&r!==null&&r.key!=null?wI(""+r.key):e.toString(36)}function fm(r,e,t,n,i){var s=typeof r;(s==="undefined"||s==="boolean")&&(r=null);var o=!1;if(r===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(r.$$typeof){case Ud:case lI:o=!0}}if(o)return o=r,i=i(o),r=n===""?"."+l1(o,0):n,Rw(i)?(t="",r!=null&&(t=r.replace(Pw,"$&/")+"/"),fm(i,e,t,"",function(a){return a})):i!=null&&(Rb(i)&&(i=vI(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Pw,"$&/")+"/")+r)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Rw(r))for(var l=0;l<r.length;l++){s=r[l];var c=n+l1(s,l);o+=fm(s,e,t,c,i)}else if(c=bI(r),typeof c=="function")for(r=c.call(r),l=0;!(s=r.next()).done;)s=s.value,c=n+l1(s,l++),o+=fm(s,e,t,c,i);else if(s==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Np(r,e,t){if(r==null)return r;var n=[],i=0;return fm(r,n,"","",function(s){return e.call(t,s,i++)}),n}function _I(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var Ys={current:null},dm={transition:null},xI={ReactCurrentDispatcher:Ys,ReactCurrentBatchConfig:dm,ReactCurrentOwner:jb};function z6(){throw Error("act(...) is not supported in production builds of React.")}bn.Children={map:Np,forEach:function(r,e,t){Np(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return Np(r,function(){e++}),e},toArray:function(r){return Np(r,function(e){return e})||[]},only:function(r){if(!Rb(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};bn.Component=Oh;bn.Fragment=cI;bn.Profiler=hI;bn.PureComponent=Tb;bn.StrictMode=uI;bn.Suspense=mI;bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xI;bn.act=z6;bn.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=M6({},r.props),i=r.key,s=r.ref,o=r._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=jb.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var l=r.type.defaultProps;for(c in e)D6.call(e,c)&&!F6.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=t;else if(1<c){l=Array(c);for(var a=0;a<c;a++)l[a]=arguments[a+2];n.children=l}return{$$typeof:Ud,type:r.type,key:i,ref:s,props:n,_owner:o}};bn.createContext=function(r){return r={$$typeof:dI,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:fI,_context:r},r.Consumer=r};bn.createElement=B6;bn.createFactory=function(r){var e=B6.bind(null,r);return e.type=r,e};bn.createRef=function(){return{current:null}};bn.forwardRef=function(r){return{$$typeof:pI,render:r}};bn.isValidElement=Rb;bn.lazy=function(r){return{$$typeof:yI,_payload:{_status:-1,_result:r},_init:_I}};bn.memo=function(r,e){return{$$typeof:gI,type:r,compare:e===void 0?null:e}};bn.startTransition=function(r){var e=dm.transition;dm.transition={};try{r()}finally{dm.transition=e}};bn.unstable_act=z6;bn.useCallback=function(r,e){return Ys.current.useCallback(r,e)};bn.useContext=function(r){return Ys.current.useContext(r)};bn.useDebugValue=function(){};bn.useDeferredValue=function(r){return Ys.current.useDeferredValue(r)};bn.useEffect=function(r,e){return Ys.current.useEffect(r,e)};bn.useId=function(){return Ys.current.useId()};bn.useImperativeHandle=function(r,e,t){return Ys.current.useImperativeHandle(r,e,t)};bn.useInsertionEffect=function(r,e){return Ys.current.useInsertionEffect(r,e)};bn.useLayoutEffect=function(r,e){return Ys.current.useLayoutEffect(r,e)};bn.useMemo=function(r,e){return Ys.current.useMemo(r,e)};bn.useReducer=function(r,e,t){return Ys.current.useReducer(r,e,t)};bn.useRef=function(r){return Ys.current.useRef(r)};bn.useState=function(r){return Ys.current.useState(r)};bn.useSyncExternalStore=function(r,e,t){return Ys.current.useSyncExternalStore(r,e,t)};bn.useTransition=function(){return Ys.current.useTransition()};bn.version="18.3.1";R6.exports=bn;var me=R6.exports;const ea=N6(me),SI=aI({__proto__:null,default:ea},[me]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kI=me,EI=Symbol.for("react.element"),CI=Symbol.for("react.fragment"),II=Object.prototype.hasOwnProperty,AI=kI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TI={key:!0,ref:!0,__self:!0,__source:!0};function U6(r,e,t){var n,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)II.call(e,n)&&!TI.hasOwnProperty(n)&&(i[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:EI,type:r,key:s,ref:o,props:i,_owner:AI.current}}K0.Fragment=CI;K0.jsx=U6;K0.jsxs=U6;j6.exports=K0;var T=j6.exports,T2={},V6={exports:{}},Eo={},$6={exports:{}},W6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(w,S){var I=w.length;w.push(S);e:for(;0<I;){var z=I-1>>>1,A=w[z];if(0<i(A,S))w[z]=S,w[I]=A,I=z;else break e}}function t(w){return w.length===0?null:w[0]}function n(w){if(w.length===0)return null;var S=w[0],I=w.pop();if(I!==S){w[0]=I;e:for(var z=0,A=w.length,H=A>>>1;z<H;){var K=2*(z+1)-1,J=w[K],V=K+1,X=w[V];if(0>i(J,I))V<A&&0>i(X,J)?(w[z]=X,w[V]=I,z=V):(w[z]=J,w[K]=I,z=K);else if(V<A&&0>i(X,I))w[z]=X,w[V]=I,z=V;else break e}}return S}function i(w,S){var I=w.sortIndex-S.sortIndex;return I!==0?I:w.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();r.unstable_now=function(){return o.now()-l}}var c=[],a=[],u=1,d=null,f=3,h=!1,m=!1,g=!1,p=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(w){for(var S=t(a);S!==null;){if(S.callback===null)n(a);else if(S.startTime<=w)n(a),S.sortIndex=S.expirationTime,e(c,S);else break;S=t(a)}}function E(w){if(g=!1,v(w),!m)if(t(c)!==null)m=!0,_(M);else{var S=t(a);S!==null&&x(E,S.startTime-w)}}function M(w,S){m=!1,g&&(g=!1,y(N),N=-1),h=!0;var I=f;try{for(v(S),d=t(c);d!==null&&(!(d.expirationTime>S)||w&&!P());){var z=d.callback;if(typeof z=="function"){d.callback=null,f=d.priorityLevel;var A=z(d.expirationTime<=S);S=r.unstable_now(),typeof A=="function"?d.callback=A:d===t(c)&&n(c),v(S)}else n(c);d=t(c)}if(d!==null)var H=!0;else{var K=t(a);K!==null&&x(E,K.startTime-S),H=!1}return H}finally{d=null,f=I,h=!1}}var W=!1,$=null,N=-1,j=5,F=-1;function P(){return!(r.unstable_now()-F<j)}function L(){if($!==null){var w=r.unstable_now();F=w;var S=!0;try{S=$(!0,w)}finally{S?k():(W=!1,$=null)}}else W=!1}var k;if(typeof b=="function")k=function(){b(L)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,C=R.port2;R.port1.onmessage=L,k=function(){C.postMessage(null)}}else k=function(){p(L,0)};function _(w){$=w,W||(W=!0,k())}function x(w,S){N=p(function(){w(r.unstable_now())},S)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(w){w.callback=null},r.unstable_continueExecution=function(){m||h||(m=!0,_(M))},r.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<w?Math.floor(1e3/w):5},r.unstable_getCurrentPriorityLevel=function(){return f},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(w){switch(f){case 1:case 2:case 3:var S=3;break;default:S=f}var I=f;f=S;try{return w()}finally{f=I}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(w,S){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var I=f;f=w;try{return S()}finally{f=I}},r.unstable_scheduleCallback=function(w,S,I){var z=r.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?z+I:z):I=z,w){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=I+A,w={id:u++,callback:S,priorityLevel:w,startTime:I,expirationTime:A,sortIndex:-1},I>z?(w.sortIndex=I,e(a,w),t(c)===null&&w===t(a)&&(g?(y(N),N=-1):g=!0,x(E,I-z))):(w.sortIndex=A,e(c,w),m||h||(m=!0,_(M))),w},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(w){var S=f;return function(){var I=f;f=S;try{return w.apply(this,arguments)}finally{f=I}}}})(W6);$6.exports=W6;var NI=$6.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jI=me,ko=NI;function Xt(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var q6=new Set,nd={};function au(r,e){hh(r,e),hh(r+"Capture",e)}function hh(r,e){for(nd[r]=e,r=0;r<e.length;r++)q6.add(e[r])}var tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),N2=Object.prototype.hasOwnProperty,RI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mw={},Ow={};function PI(r){return N2.call(Ow,r)?!0:N2.call(Mw,r)?!1:RI.test(r)?Ow[r]=!0:(Mw[r]=!0,!1)}function MI(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function OI(r,e,t,n){if(e===null||typeof e>"u"||MI(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xs(r,e,t,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ws={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){ws[r]=new Xs(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];ws[e]=new Xs(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){ws[r]=new Xs(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){ws[r]=new Xs(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){ws[r]=new Xs(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){ws[r]=new Xs(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){ws[r]=new Xs(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){ws[r]=new Xs(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){ws[r]=new Xs(r,5,!1,r.toLowerCase(),null,!1,!1)});var Pb=/[\-:]([a-z])/g;function Mb(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(Pb,Mb);ws[e]=new Xs(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(Pb,Mb);ws[e]=new Xs(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(Pb,Mb);ws[e]=new Xs(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){ws[r]=new Xs(r,1,!1,r.toLowerCase(),null,!1,!1)});ws.xlinkHref=new Xs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){ws[r]=new Xs(r,1,!1,r.toLowerCase(),null,!0,!0)});function Ob(r,e,t,n){var i=ws.hasOwnProperty(e)?ws[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(OI(e,t,i,n)&&(t=null),n||i===null?PI(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var ul=jI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jp=Symbol.for("react.element"),Ru=Symbol.for("react.portal"),Pu=Symbol.for("react.fragment"),Lb=Symbol.for("react.strict_mode"),j2=Symbol.for("react.profiler"),H6=Symbol.for("react.provider"),G6=Symbol.for("react.context"),Db=Symbol.for("react.forward_ref"),R2=Symbol.for("react.suspense"),P2=Symbol.for("react.suspense_list"),Fb=Symbol.for("react.memo"),Nl=Symbol.for("react.lazy"),K6=Symbol.for("react.offscreen"),Lw=Symbol.iterator;function ff(r){return r===null||typeof r!="object"?null:(r=Lw&&r[Lw]||r["@@iterator"],typeof r=="function"?r:null)}var Si=Object.assign,c1;function If(r){if(c1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);c1=e&&e[1]||""}return`
`+c1+r}var u1=!1;function h1(r,e){if(!r||u1)return"";u1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(a){var n=a}Reflect.construct(r,[],e)}else{try{e.call()}catch(a){n=a}r.call(e.prototype)}else{try{throw Error()}catch(a){n=a}r()}}catch(a){if(a&&n&&typeof a.stack=="string"){for(var i=a.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var c=`
`+i[o].replace(" at new "," at ");return r.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",r.displayName)),c}while(1<=o&&0<=l);break}}}finally{u1=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?If(r):""}function LI(r){switch(r.tag){case 5:return If(r.type);case 16:return If("Lazy");case 13:return If("Suspense");case 19:return If("SuspenseList");case 0:case 2:case 15:return r=h1(r.type,!1),r;case 11:return r=h1(r.type.render,!1),r;case 1:return r=h1(r.type,!0),r;default:return""}}function M2(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Pu:return"Fragment";case Ru:return"Portal";case j2:return"Profiler";case Lb:return"StrictMode";case R2:return"Suspense";case P2:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case G6:return(r.displayName||"Context")+".Consumer";case H6:return(r._context.displayName||"Context")+".Provider";case Db:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Fb:return e=r.displayName||null,e!==null?e:M2(r.type)||"Memo";case Nl:e=r._payload,r=r._init;try{return M2(r(e))}catch{}}return null}function DI(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M2(e);case 8:return e===Lb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function nc(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Y6(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FI(r){var e=Y6(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function Rp(r){r._valueTracker||(r._valueTracker=FI(r))}function X6(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=Y6(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function zm(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function O2(r,e){var t=e.checked;return Si({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??r._wrapperState.initialChecked})}function Dw(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=nc(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Q6(r,e){e=e.checked,e!=null&&Ob(r,"checked",e,!1)}function L2(r,e){Q6(r,e);var t=nc(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?D2(r,e.type,t):e.hasOwnProperty("defaultValue")&&D2(r,e.type,nc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function Fw(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function D2(r,e,t){(e!=="number"||zm(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var Af=Array.isArray;function Hu(r,e,t,n){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&n&&(r[t].defaultSelected=!0)}else{for(t=""+nc(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function F2(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Xt(91));return Si({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Bw(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Xt(92));if(Af(t)){if(1<t.length)throw Error(Xt(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:nc(t)}}function J6(r,e){var t=nc(e.value),n=nc(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function zw(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function Z6(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function B2(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?Z6(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Pp,e8=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,i)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(Pp=Pp||document.createElement("div"),Pp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pp.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function id(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var Of={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BI=["Webkit","ms","Moz","O"];Object.keys(Of).forEach(function(r){BI.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),Of[e]=Of[r]})});function t8(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Of.hasOwnProperty(r)&&Of[r]?(""+e).trim():e+"px"}function r8(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=t8(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,i):r[t]=i}}var zI=Si({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function z2(r,e){if(e){if(zI[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Xt(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Xt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Xt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Xt(62))}}function U2(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var V2=null;function Bb(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var $2=null,Gu=null,Ku=null;function Uw(r){if(r=Wd(r)){if(typeof $2!="function")throw Error(Xt(280));var e=r.stateNode;e&&(e=Z0(e),$2(r.stateNode,r.type,e))}}function n8(r){Gu?Ku?Ku.push(r):Ku=[r]:Gu=r}function i8(){if(Gu){var r=Gu,e=Ku;if(Ku=Gu=null,Uw(r),e)for(r=0;r<e.length;r++)Uw(e[r])}}function s8(r,e){return r(e)}function o8(){}var f1=!1;function a8(r,e,t){if(f1)return r(e,t);f1=!0;try{return s8(r,e,t)}finally{f1=!1,(Gu!==null||Ku!==null)&&(o8(),i8())}}function sd(r,e){var t=r.stateNode;if(t===null)return null;var n=Z0(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(Xt(231,e,typeof t));return t}var W2=!1;if(tl)try{var df={};Object.defineProperty(df,"passive",{get:function(){W2=!0}}),window.addEventListener("test",df,df),window.removeEventListener("test",df,df)}catch{W2=!1}function UI(r,e,t,n,i,s,o,l,c){var a=Array.prototype.slice.call(arguments,3);try{e.apply(t,a)}catch(u){this.onError(u)}}var Lf=!1,Um=null,Vm=!1,q2=null,VI={onError:function(r){Lf=!0,Um=r}};function $I(r,e,t,n,i,s,o,l,c){Lf=!1,Um=null,UI.apply(VI,arguments)}function WI(r,e,t,n,i,s,o,l,c){if($I.apply(this,arguments),Lf){if(Lf){var a=Um;Lf=!1,Um=null}else throw Error(Xt(198));Vm||(Vm=!0,q2=a)}}function lu(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function l8(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function Vw(r){if(lu(r)!==r)throw Error(Xt(188))}function qI(r){var e=r.alternate;if(!e){if(e=lu(r),e===null)throw Error(Xt(188));return e!==r?null:r}for(var t=r,n=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Vw(i),r;if(s===n)return Vw(i),e;s=s.sibling}throw Error(Xt(188))}if(t.return!==n.return)t=i,n=s;else{for(var o=!1,l=i.child;l;){if(l===t){o=!0,t=i,n=s;break}if(l===n){o=!0,n=i,t=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===t){o=!0,t=s,n=i;break}if(l===n){o=!0,n=s,t=i;break}l=l.sibling}if(!o)throw Error(Xt(189))}}if(t.alternate!==n)throw Error(Xt(190))}if(t.tag!==3)throw Error(Xt(188));return t.stateNode.current===t?r:e}function c8(r){return r=qI(r),r!==null?u8(r):null}function u8(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=u8(r);if(e!==null)return e;r=r.sibling}return null}var h8=ko.unstable_scheduleCallback,$w=ko.unstable_cancelCallback,HI=ko.unstable_shouldYield,GI=ko.unstable_requestPaint,Fi=ko.unstable_now,KI=ko.unstable_getCurrentPriorityLevel,zb=ko.unstable_ImmediatePriority,f8=ko.unstable_UserBlockingPriority,$m=ko.unstable_NormalPriority,YI=ko.unstable_LowPriority,d8=ko.unstable_IdlePriority,Y0=null,ka=null;function XI(r){if(ka&&typeof ka.onCommitFiberRoot=="function")try{ka.onCommitFiberRoot(Y0,r,void 0,(r.current.flags&128)===128)}catch{}}var ta=Math.clz32?Math.clz32:ZI,QI=Math.log,JI=Math.LN2;function ZI(r){return r>>>=0,r===0?32:31-(QI(r)/JI|0)|0}var Mp=64,Op=4194304;function Tf(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Wm(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,i=r.suspendedLanes,s=r.pingedLanes,o=t&268435455;if(o!==0){var l=o&~i;l!==0?n=Tf(l):(s&=o,s!==0&&(n=Tf(s)))}else o=t&~i,o!==0?n=Tf(o):s!==0&&(n=Tf(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-ta(e),i=1<<t,n|=r[t],e&=~i;return n}function eA(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tA(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,s=r.pendingLanes;0<s;){var o=31-ta(s),l=1<<o,c=i[o];c===-1?(!(l&t)||l&n)&&(i[o]=eA(l,e)):c<=e&&(r.expiredLanes|=l),s&=~l}}function H2(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function p8(){var r=Mp;return Mp<<=1,!(Mp&4194240)&&(Mp=64),r}function d1(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function Vd(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-ta(e),r[e]=t}function rA(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<t;){var i=31-ta(t),s=1<<i;e[i]=0,n[i]=-1,r[i]=-1,t&=~s}}function Ub(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-ta(t),i=1<<n;i&e|r[n]&e&&(r[n]|=e),t&=~i}}var Vn=0;function m8(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var g8,Vb,y8,b8,v8,G2=!1,Lp=[],Ul=null,Vl=null,$l=null,od=new Map,ad=new Map,Rl=[],nA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ww(r,e){switch(r){case"focusin":case"focusout":Ul=null;break;case"dragenter":case"dragleave":Vl=null;break;case"mouseover":case"mouseout":$l=null;break;case"pointerover":case"pointerout":od.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ad.delete(e.pointerId)}}function pf(r,e,t,n,i,s){return r===null||r.nativeEvent!==s?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Wd(e),e!==null&&Vb(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function iA(r,e,t,n,i){switch(e){case"focusin":return Ul=pf(Ul,r,e,t,n,i),!0;case"dragenter":return Vl=pf(Vl,r,e,t,n,i),!0;case"mouseover":return $l=pf($l,r,e,t,n,i),!0;case"pointerover":var s=i.pointerId;return od.set(s,pf(od.get(s)||null,r,e,t,n,i)),!0;case"gotpointercapture":return s=i.pointerId,ad.set(s,pf(ad.get(s)||null,r,e,t,n,i)),!0}return!1}function w8(r){var e=Lc(r.target);if(e!==null){var t=lu(e);if(t!==null){if(e=t.tag,e===13){if(e=l8(t),e!==null){r.blockedOn=e,v8(r.priority,function(){y8(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function pm(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=K2(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);V2=n,t.target.dispatchEvent(n),V2=null}else return e=Wd(t),e!==null&&Vb(e),r.blockedOn=t,!1;e.shift()}return!0}function qw(r,e,t){pm(r)&&t.delete(e)}function sA(){G2=!1,Ul!==null&&pm(Ul)&&(Ul=null),Vl!==null&&pm(Vl)&&(Vl=null),$l!==null&&pm($l)&&($l=null),od.forEach(qw),ad.forEach(qw)}function mf(r,e){r.blockedOn===e&&(r.blockedOn=null,G2||(G2=!0,ko.unstable_scheduleCallback(ko.unstable_NormalPriority,sA)))}function ld(r){function e(i){return mf(i,r)}if(0<Lp.length){mf(Lp[0],r);for(var t=1;t<Lp.length;t++){var n=Lp[t];n.blockedOn===r&&(n.blockedOn=null)}}for(Ul!==null&&mf(Ul,r),Vl!==null&&mf(Vl,r),$l!==null&&mf($l,r),od.forEach(e),ad.forEach(e),t=0;t<Rl.length;t++)n=Rl[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<Rl.length&&(t=Rl[0],t.blockedOn===null);)w8(t),t.blockedOn===null&&Rl.shift()}var Yu=ul.ReactCurrentBatchConfig,qm=!0;function oA(r,e,t,n){var i=Vn,s=Yu.transition;Yu.transition=null;try{Vn=1,$b(r,e,t,n)}finally{Vn=i,Yu.transition=s}}function aA(r,e,t,n){var i=Vn,s=Yu.transition;Yu.transition=null;try{Vn=4,$b(r,e,t,n)}finally{Vn=i,Yu.transition=s}}function $b(r,e,t,n){if(qm){var i=K2(r,e,t,n);if(i===null)S1(r,e,n,Hm,t),Ww(r,n);else if(iA(i,r,e,t,n))n.stopPropagation();else if(Ww(r,n),e&4&&-1<nA.indexOf(r)){for(;i!==null;){var s=Wd(i);if(s!==null&&g8(s),s=K2(r,e,t,n),s===null&&S1(r,e,n,Hm,t),s===i)break;i=s}i!==null&&n.stopPropagation()}else S1(r,e,n,null,t)}}var Hm=null;function K2(r,e,t,n){if(Hm=null,r=Bb(n),r=Lc(r),r!==null)if(e=lu(r),e===null)r=null;else if(t=e.tag,t===13){if(r=l8(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return Hm=r,null}function _8(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KI()){case zb:return 1;case f8:return 4;case $m:case YI:return 16;case d8:return 536870912;default:return 16}default:return 16}}var Ml=null,Wb=null,mm=null;function x8(){if(mm)return mm;var r,e=Wb,t=e.length,n,i="value"in Ml?Ml.value:Ml.textContent,s=i.length;for(r=0;r<t&&e[r]===i[r];r++);var o=t-r;for(n=1;n<=o&&e[t-n]===i[s-n];n++);return mm=i.slice(r,1<n?1-n:void 0)}function gm(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function Dp(){return!0}function Hw(){return!1}function Co(r){function e(t,n,i,s,o){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in r)r.hasOwnProperty(l)&&(t=r[l],this[l]=t?t(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Dp:Hw,this.isPropagationStopped=Hw,this}return Si(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Dp)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Dp)},persist:function(){},isPersistent:Dp}),e}var Lh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qb=Co(Lh),$d=Si({},Lh,{view:0,detail:0}),lA=Co($d),p1,m1,gf,X0=Si({},$d,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hb,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==gf&&(gf&&r.type==="mousemove"?(p1=r.screenX-gf.screenX,m1=r.screenY-gf.screenY):m1=p1=0,gf=r),p1)},movementY:function(r){return"movementY"in r?r.movementY:m1}}),Gw=Co(X0),cA=Si({},X0,{dataTransfer:0}),uA=Co(cA),hA=Si({},$d,{relatedTarget:0}),g1=Co(hA),fA=Si({},Lh,{animationName:0,elapsedTime:0,pseudoElement:0}),dA=Co(fA),pA=Si({},Lh,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),mA=Co(pA),gA=Si({},Lh,{data:0}),Kw=Co(gA),yA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wA(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=vA[r])?!!e[r]:!1}function Hb(){return wA}var _A=Si({},$d,{key:function(r){if(r.key){var e=yA[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=gm(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?bA[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hb,charCode:function(r){return r.type==="keypress"?gm(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?gm(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),xA=Co(_A),SA=Si({},X0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yw=Co(SA),kA=Si({},$d,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hb}),EA=Co(kA),CA=Si({},Lh,{propertyName:0,elapsedTime:0,pseudoElement:0}),IA=Co(CA),AA=Si({},X0,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),TA=Co(AA),NA=[9,13,27,32],Gb=tl&&"CompositionEvent"in window,Df=null;tl&&"documentMode"in document&&(Df=document.documentMode);var jA=tl&&"TextEvent"in window&&!Df,S8=tl&&(!Gb||Df&&8<Df&&11>=Df),Xw=" ",Qw=!1;function k8(r,e){switch(r){case"keyup":return NA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E8(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Mu=!1;function RA(r,e){switch(r){case"compositionend":return E8(e);case"keypress":return e.which!==32?null:(Qw=!0,Xw);case"textInput":return r=e.data,r===Xw&&Qw?null:r;default:return null}}function PA(r,e){if(Mu)return r==="compositionend"||!Gb&&k8(r,e)?(r=x8(),mm=Wb=Ml=null,Mu=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return S8&&e.locale!=="ko"?null:e.data;default:return null}}var MA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jw(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!MA[r.type]:e==="textarea"}function C8(r,e,t,n){n8(n),e=Gm(e,"onChange"),0<e.length&&(t=new qb("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var Ff=null,cd=null;function OA(r){D8(r,0)}function Q0(r){var e=Du(r);if(X6(e))return r}function LA(r,e){if(r==="change")return e}var I8=!1;if(tl){var y1;if(tl){var b1="oninput"in document;if(!b1){var Zw=document.createElement("div");Zw.setAttribute("oninput","return;"),b1=typeof Zw.oninput=="function"}y1=b1}else y1=!1;I8=y1&&(!document.documentMode||9<document.documentMode)}function e4(){Ff&&(Ff.detachEvent("onpropertychange",A8),cd=Ff=null)}function A8(r){if(r.propertyName==="value"&&Q0(cd)){var e=[];C8(e,cd,r,Bb(r)),a8(OA,e)}}function DA(r,e,t){r==="focusin"?(e4(),Ff=e,cd=t,Ff.attachEvent("onpropertychange",A8)):r==="focusout"&&e4()}function FA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Q0(cd)}function BA(r,e){if(r==="click")return Q0(e)}function zA(r,e){if(r==="input"||r==="change")return Q0(e)}function UA(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var ia=typeof Object.is=="function"?Object.is:UA;function ud(r,e){if(ia(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!N2.call(e,i)||!ia(r[i],e[i]))return!1}return!0}function t4(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function r4(r,e){var t=t4(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=t4(t)}}function T8(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?T8(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function N8(){for(var r=window,e=zm();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=zm(r.document)}return e}function Kb(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function VA(r){var e=N8(),t=r.focusedElem,n=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&T8(t.ownerDocument.documentElement,t)){if(n!==null&&Kb(t)){if(e=n.start,r=n.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var i=t.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!r.extend&&s>n&&(i=n,n=s,s=i),i=r4(t,s);var o=r4(t,n);i&&o&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==o.node||r.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),r.removeAllRanges(),s>n?(r.addRange(e),r.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var $A=tl&&"documentMode"in document&&11>=document.documentMode,Ou=null,Y2=null,Bf=null,X2=!1;function n4(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;X2||Ou==null||Ou!==zm(n)||(n=Ou,"selectionStart"in n&&Kb(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Bf&&ud(Bf,n)||(Bf=n,n=Gm(Y2,"onSelect"),0<n.length&&(e=new qb("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=Ou)))}function Fp(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var Lu={animationend:Fp("Animation","AnimationEnd"),animationiteration:Fp("Animation","AnimationIteration"),animationstart:Fp("Animation","AnimationStart"),transitionend:Fp("Transition","TransitionEnd")},v1={},j8={};tl&&(j8=document.createElement("div").style,"AnimationEvent"in window||(delete Lu.animationend.animation,delete Lu.animationiteration.animation,delete Lu.animationstart.animation),"TransitionEvent"in window||delete Lu.transitionend.transition);function J0(r){if(v1[r])return v1[r];if(!Lu[r])return r;var e=Lu[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in j8)return v1[r]=e[t];return r}var R8=J0("animationend"),P8=J0("animationiteration"),M8=J0("animationstart"),O8=J0("transitionend"),L8=new Map,i4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mc(r,e){L8.set(r,e),au(e,[r])}for(var w1=0;w1<i4.length;w1++){var _1=i4[w1],WA=_1.toLowerCase(),qA=_1[0].toUpperCase()+_1.slice(1);mc(WA,"on"+qA)}mc(R8,"onAnimationEnd");mc(P8,"onAnimationIteration");mc(M8,"onAnimationStart");mc("dblclick","onDoubleClick");mc("focusin","onFocus");mc("focusout","onBlur");mc(O8,"onTransitionEnd");hh("onMouseEnter",["mouseout","mouseover"]);hh("onMouseLeave",["mouseout","mouseover"]);hh("onPointerEnter",["pointerout","pointerover"]);hh("onPointerLeave",["pointerout","pointerover"]);au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));au("onBeforeInput",["compositionend","keypress","textInput","paste"]);au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nf));function s4(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,WI(n,e,void 0,r),r.currentTarget=null}function D8(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,a=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;s4(i,l,a),s=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,a=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;s4(i,l,a),s=c}}}if(Vm)throw r=q2,Vm=!1,q2=null,r}function ui(r,e){var t=e[ty];t===void 0&&(t=e[ty]=new Set);var n=r+"__bubble";t.has(n)||(F8(e,r,2,!1),t.add(n))}function x1(r,e,t){var n=0;e&&(n|=4),F8(t,r,n,e)}var Bp="_reactListening"+Math.random().toString(36).slice(2);function hd(r){if(!r[Bp]){r[Bp]=!0,q6.forEach(function(t){t!=="selectionchange"&&(HA.has(t)||x1(t,!1,r),x1(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[Bp]||(e[Bp]=!0,x1("selectionchange",!1,e))}}function F8(r,e,t,n){switch(_8(e)){case 1:var i=oA;break;case 4:i=aA;break;default:i=$b}t=i.bind(null,e,t,r),i=void 0,!W2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function S1(r,e,t,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Lc(l),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}l=l.parentNode}}n=n.return}a8(function(){var a=s,u=Bb(t),d=[];e:{var f=L8.get(r);if(f!==void 0){var h=qb,m=r;switch(r){case"keypress":if(gm(t)===0)break e;case"keydown":case"keyup":h=xA;break;case"focusin":m="focus",h=g1;break;case"focusout":m="blur",h=g1;break;case"beforeblur":case"afterblur":h=g1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Gw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=uA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=EA;break;case R8:case P8:case M8:h=dA;break;case O8:h=IA;break;case"scroll":h=lA;break;case"wheel":h=TA;break;case"copy":case"cut":case"paste":h=mA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Yw}var g=(e&4)!==0,p=!g&&r==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var b=a,v;b!==null;){v=b;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,y!==null&&(E=sd(b,y),E!=null&&g.push(fd(b,E,v)))),p)break;b=b.return}0<g.length&&(f=new h(f,m,null,t,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=r==="mouseover"||r==="pointerover",h=r==="mouseout"||r==="pointerout",f&&t!==V2&&(m=t.relatedTarget||t.fromElement)&&(Lc(m)||m[rl]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=t.relatedTarget||t.toElement,h=a,m=m?Lc(m):null,m!==null&&(p=lu(m),m!==p||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=a),h!==m)){if(g=Gw,E="onMouseLeave",y="onMouseEnter",b="mouse",(r==="pointerout"||r==="pointerover")&&(g=Yw,E="onPointerLeave",y="onPointerEnter",b="pointer"),p=h==null?f:Du(h),v=m==null?f:Du(m),f=new g(E,b+"leave",h,t,u),f.target=p,f.relatedTarget=v,E=null,Lc(u)===a&&(g=new g(y,b+"enter",m,t,u),g.target=v,g.relatedTarget=p,E=g),p=E,h&&m)t:{for(g=h,y=m,b=0,v=g;v;v=_u(v))b++;for(v=0,E=y;E;E=_u(E))v++;for(;0<b-v;)g=_u(g),b--;for(;0<v-b;)y=_u(y),v--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=_u(g),y=_u(y)}g=null}else g=null;h!==null&&o4(d,f,h,g,!1),m!==null&&p!==null&&o4(d,p,m,g,!0)}}e:{if(f=a?Du(a):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var M=LA;else if(Jw(f))if(I8)M=zA;else{M=FA;var W=DA}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=BA);if(M&&(M=M(r,a))){C8(d,M,t,u);break e}W&&W(r,f,a),r==="focusout"&&(W=f._wrapperState)&&W.controlled&&f.type==="number"&&D2(f,"number",f.value)}switch(W=a?Du(a):window,r){case"focusin":(Jw(W)||W.contentEditable==="true")&&(Ou=W,Y2=a,Bf=null);break;case"focusout":Bf=Y2=Ou=null;break;case"mousedown":X2=!0;break;case"contextmenu":case"mouseup":case"dragend":X2=!1,n4(d,t,u);break;case"selectionchange":if($A)break;case"keydown":case"keyup":n4(d,t,u)}var $;if(Gb)e:{switch(r){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Mu?k8(r,t)&&(N="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(S8&&t.locale!=="ko"&&(Mu||N!=="onCompositionStart"?N==="onCompositionEnd"&&Mu&&($=x8()):(Ml=u,Wb="value"in Ml?Ml.value:Ml.textContent,Mu=!0)),W=Gm(a,N),0<W.length&&(N=new Kw(N,r,null,t,u),d.push({event:N,listeners:W}),$?N.data=$:($=E8(t),$!==null&&(N.data=$)))),($=jA?RA(r,t):PA(r,t))&&(a=Gm(a,"onBeforeInput"),0<a.length&&(u=new Kw("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:a}),u.data=$))}D8(d,e)})}function fd(r,e,t){return{instance:r,listener:e,currentTarget:t}}function Gm(r,e){for(var t=e+"Capture",n=[];r!==null;){var i=r,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=sd(r,t),s!=null&&n.unshift(fd(r,s,i)),s=sd(r,e),s!=null&&n.push(fd(r,s,i))),r=r.return}return n}function _u(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function o4(r,e,t,n,i){for(var s=e._reactName,o=[];t!==null&&t!==n;){var l=t,c=l.alternate,a=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&a!==null&&(l=a,i?(c=sd(t,s),c!=null&&o.unshift(fd(t,c,l))):i||(c=sd(t,s),c!=null&&o.push(fd(t,c,l)))),t=t.return}o.length!==0&&r.push({event:e,listeners:o})}var GA=/\r\n?/g,KA=/\u0000|\uFFFD/g;function a4(r){return(typeof r=="string"?r:""+r).replace(GA,`
`).replace(KA,"")}function zp(r,e,t){if(e=a4(e),a4(r)!==e&&t)throw Error(Xt(425))}function Km(){}var Q2=null,J2=null;function Z2(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ey=typeof setTimeout=="function"?setTimeout:void 0,YA=typeof clearTimeout=="function"?clearTimeout:void 0,l4=typeof Promise=="function"?Promise:void 0,XA=typeof queueMicrotask=="function"?queueMicrotask:typeof l4<"u"?function(r){return l4.resolve(null).then(r).catch(QA)}:ey;function QA(r){setTimeout(function(){throw r})}function k1(r,e){var t=e,n=0;do{var i=t.nextSibling;if(r.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0){r.removeChild(i),ld(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=i}while(t);ld(e)}function Wl(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function c4(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var Dh=Math.random().toString(36).slice(2),va="__reactFiber$"+Dh,dd="__reactProps$"+Dh,rl="__reactContainer$"+Dh,ty="__reactEvents$"+Dh,JA="__reactListeners$"+Dh,ZA="__reactHandles$"+Dh;function Lc(r){var e=r[va];if(e)return e;for(var t=r.parentNode;t;){if(e=t[rl]||t[va]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=c4(r);r!==null;){if(t=r[va])return t;r=c4(r)}return e}r=t,t=r.parentNode}return null}function Wd(r){return r=r[va]||r[rl],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Du(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(Xt(33))}function Z0(r){return r[dd]||null}var ry=[],Fu=-1;function gc(r){return{current:r}}function fi(r){0>Fu||(r.current=ry[Fu],ry[Fu]=null,Fu--)}function ii(r,e){Fu++,ry[Fu]=r.current,r.current=e}var ic={},Fs=gc(ic),no=gc(!1),Kc=ic;function fh(r,e){var t=r.type.contextTypes;if(!t)return ic;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function io(r){return r=r.childContextTypes,r!=null}function Ym(){fi(no),fi(Fs)}function u4(r,e,t){if(Fs.current!==ic)throw Error(Xt(168));ii(Fs,e),ii(no,t)}function B8(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Xt(108,DI(r)||"Unknown",i));return Si({},t,n)}function Xm(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ic,Kc=Fs.current,ii(Fs,r),ii(no,no.current),!0}function h4(r,e,t){var n=r.stateNode;if(!n)throw Error(Xt(169));t?(r=B8(r,e,Kc),n.__reactInternalMemoizedMergedChildContext=r,fi(no),fi(Fs),ii(Fs,r)):fi(no),ii(no,t)}var Ha=null,eg=!1,E1=!1;function z8(r){Ha===null?Ha=[r]:Ha.push(r)}function eT(r){eg=!0,z8(r)}function yc(){if(!E1&&Ha!==null){E1=!0;var r=0,e=Vn;try{var t=Ha;for(Vn=1;r<t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}Ha=null,eg=!1}catch(i){throw Ha!==null&&(Ha=Ha.slice(r+1)),h8(zb,yc),i}finally{Vn=e,E1=!1}}return null}var Bu=[],zu=0,Qm=null,Jm=0,Po=[],Mo=0,Yc=null,Ka=1,Ya="";function Nc(r,e){Bu[zu++]=Jm,Bu[zu++]=Qm,Qm=r,Jm=e}function U8(r,e,t){Po[Mo++]=Ka,Po[Mo++]=Ya,Po[Mo++]=Yc,Yc=r;var n=Ka;r=Ya;var i=32-ta(n)-1;n&=~(1<<i),t+=1;var s=32-ta(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Ka=1<<32-ta(e)+i|t<<i|n,Ya=s+r}else Ka=1<<s|t<<i|n,Ya=r}function Yb(r){r.return!==null&&(Nc(r,1),U8(r,1,0))}function Xb(r){for(;r===Qm;)Qm=Bu[--zu],Bu[zu]=null,Jm=Bu[--zu],Bu[zu]=null;for(;r===Yc;)Yc=Po[--Mo],Po[Mo]=null,Ya=Po[--Mo],Po[Mo]=null,Ka=Po[--Mo],Po[Mo]=null}var So=null,_o=null,yi=!1,Xo=null;function V8(r,e){var t=Oo(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function f4(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,So=r,_o=Wl(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,So=r,_o=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Yc!==null?{id:Ka,overflow:Ya}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Oo(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,So=r,_o=null,!0):!1;default:return!1}}function ny(r){return(r.mode&1)!==0&&(r.flags&128)===0}function iy(r){if(yi){var e=_o;if(e){var t=e;if(!f4(r,e)){if(ny(r))throw Error(Xt(418));e=Wl(t.nextSibling);var n=So;e&&f4(r,e)?V8(n,t):(r.flags=r.flags&-4097|2,yi=!1,So=r)}}else{if(ny(r))throw Error(Xt(418));r.flags=r.flags&-4097|2,yi=!1,So=r}}}function d4(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;So=r}function Up(r){if(r!==So)return!1;if(!yi)return d4(r),yi=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!Z2(r.type,r.memoizedProps)),e&&(e=_o)){if(ny(r))throw $8(),Error(Xt(418));for(;e;)V8(r,e),e=Wl(e.nextSibling)}if(d4(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Xt(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){_o=Wl(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}_o=null}}else _o=So?Wl(r.stateNode.nextSibling):null;return!0}function $8(){for(var r=_o;r;)r=Wl(r.nextSibling)}function dh(){_o=So=null,yi=!1}function Qb(r){Xo===null?Xo=[r]:Xo.push(r)}var tT=ul.ReactCurrentBatchConfig;function yf(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Xt(309));var n=t.stateNode}if(!n)throw Error(Xt(147,r));var i=n,s=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof r!="string")throw Error(Xt(284));if(!t._owner)throw Error(Xt(290,r))}return r}function Vp(r,e){throw r=Object.prototype.toString.call(e),Error(Xt(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function p4(r){var e=r._init;return e(r._payload)}function W8(r){function e(y,b){if(r){var v=y.deletions;v===null?(y.deletions=[b],y.flags|=16):v.push(b)}}function t(y,b){if(!r)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function n(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=Kl(y,b),y.index=0,y.sibling=null,y}function s(y,b,v){return y.index=v,r?(v=y.alternate,v!==null?(v=v.index,v<b?(y.flags|=2,b):v):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return r&&y.alternate===null&&(y.flags|=2),y}function l(y,b,v,E){return b===null||b.tag!==6?(b=R1(v,y.mode,E),b.return=y,b):(b=i(b,v),b.return=y,b)}function c(y,b,v,E){var M=v.type;return M===Pu?u(y,b,v.props.children,E,v.key):b!==null&&(b.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Nl&&p4(M)===b.type)?(E=i(b,v.props),E.ref=yf(y,b,v),E.return=y,E):(E=Sm(v.type,v.key,v.props,null,y.mode,E),E.ref=yf(y,b,v),E.return=y,E)}function a(y,b,v,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=P1(v,y.mode,E),b.return=y,b):(b=i(b,v.children||[]),b.return=y,b)}function u(y,b,v,E,M){return b===null||b.tag!==7?(b=$c(v,y.mode,E,M),b.return=y,b):(b=i(b,v),b.return=y,b)}function d(y,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=R1(""+b,y.mode,v),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case jp:return v=Sm(b.type,b.key,b.props,null,y.mode,v),v.ref=yf(y,null,b),v.return=y,v;case Ru:return b=P1(b,y.mode,v),b.return=y,b;case Nl:var E=b._init;return d(y,E(b._payload),v)}if(Af(b)||ff(b))return b=$c(b,y.mode,v,null),b.return=y,b;Vp(y,b)}return null}function f(y,b,v,E){var M=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return M!==null?null:l(y,b,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case jp:return v.key===M?c(y,b,v,E):null;case Ru:return v.key===M?a(y,b,v,E):null;case Nl:return M=v._init,f(y,b,M(v._payload),E)}if(Af(v)||ff(v))return M!==null?null:u(y,b,v,E,null);Vp(y,v)}return null}function h(y,b,v,E,M){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(v)||null,l(b,y,""+E,M);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case jp:return y=y.get(E.key===null?v:E.key)||null,c(b,y,E,M);case Ru:return y=y.get(E.key===null?v:E.key)||null,a(b,y,E,M);case Nl:var W=E._init;return h(y,b,v,W(E._payload),M)}if(Af(E)||ff(E))return y=y.get(v)||null,u(b,y,E,M,null);Vp(b,E)}return null}function m(y,b,v,E){for(var M=null,W=null,$=b,N=b=0,j=null;$!==null&&N<v.length;N++){$.index>N?(j=$,$=null):j=$.sibling;var F=f(y,$,v[N],E);if(F===null){$===null&&($=j);break}r&&$&&F.alternate===null&&e(y,$),b=s(F,b,N),W===null?M=F:W.sibling=F,W=F,$=j}if(N===v.length)return t(y,$),yi&&Nc(y,N),M;if($===null){for(;N<v.length;N++)$=d(y,v[N],E),$!==null&&(b=s($,b,N),W===null?M=$:W.sibling=$,W=$);return yi&&Nc(y,N),M}for($=n(y,$);N<v.length;N++)j=h($,y,N,v[N],E),j!==null&&(r&&j.alternate!==null&&$.delete(j.key===null?N:j.key),b=s(j,b,N),W===null?M=j:W.sibling=j,W=j);return r&&$.forEach(function(P){return e(y,P)}),yi&&Nc(y,N),M}function g(y,b,v,E){var M=ff(v);if(typeof M!="function")throw Error(Xt(150));if(v=M.call(v),v==null)throw Error(Xt(151));for(var W=M=null,$=b,N=b=0,j=null,F=v.next();$!==null&&!F.done;N++,F=v.next()){$.index>N?(j=$,$=null):j=$.sibling;var P=f(y,$,F.value,E);if(P===null){$===null&&($=j);break}r&&$&&P.alternate===null&&e(y,$),b=s(P,b,N),W===null?M=P:W.sibling=P,W=P,$=j}if(F.done)return t(y,$),yi&&Nc(y,N),M;if($===null){for(;!F.done;N++,F=v.next())F=d(y,F.value,E),F!==null&&(b=s(F,b,N),W===null?M=F:W.sibling=F,W=F);return yi&&Nc(y,N),M}for($=n(y,$);!F.done;N++,F=v.next())F=h($,y,N,F.value,E),F!==null&&(r&&F.alternate!==null&&$.delete(F.key===null?N:F.key),b=s(F,b,N),W===null?M=F:W.sibling=F,W=F);return r&&$.forEach(function(L){return e(y,L)}),yi&&Nc(y,N),M}function p(y,b,v,E){if(typeof v=="object"&&v!==null&&v.type===Pu&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case jp:e:{for(var M=v.key,W=b;W!==null;){if(W.key===M){if(M=v.type,M===Pu){if(W.tag===7){t(y,W.sibling),b=i(W,v.props.children),b.return=y,y=b;break e}}else if(W.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Nl&&p4(M)===W.type){t(y,W.sibling),b=i(W,v.props),b.ref=yf(y,W,v),b.return=y,y=b;break e}t(y,W);break}else e(y,W);W=W.sibling}v.type===Pu?(b=$c(v.props.children,y.mode,E,v.key),b.return=y,y=b):(E=Sm(v.type,v.key,v.props,null,y.mode,E),E.ref=yf(y,b,v),E.return=y,y=E)}return o(y);case Ru:e:{for(W=v.key;b!==null;){if(b.key===W)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){t(y,b.sibling),b=i(b,v.children||[]),b.return=y,y=b;break e}else{t(y,b);break}else e(y,b);b=b.sibling}b=P1(v,y.mode,E),b.return=y,y=b}return o(y);case Nl:return W=v._init,p(y,b,W(v._payload),E)}if(Af(v))return m(y,b,v,E);if(ff(v))return g(y,b,v,E);Vp(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(t(y,b.sibling),b=i(b,v),b.return=y,y=b):(t(y,b),b=R1(v,y.mode,E),b.return=y,y=b),o(y)):t(y,b)}return p}var ph=W8(!0),q8=W8(!1),Zm=gc(null),e0=null,Uu=null,Jb=null;function Zb(){Jb=Uu=e0=null}function ev(r){var e=Zm.current;fi(Zm),r._currentValue=e}function sy(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function Xu(r,e){e0=r,Jb=Uu=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(ro=!0),r.firstContext=null)}function Bo(r){var e=r._currentValue;if(Jb!==r)if(r={context:r,memoizedValue:e,next:null},Uu===null){if(e0===null)throw Error(Xt(308));Uu=r,e0.dependencies={lanes:0,firstContext:r}}else Uu=Uu.next=r;return e}var Dc=null;function tv(r){Dc===null?Dc=[r]:Dc.push(r)}function H8(r,e,t,n){var i=e.interleaved;return i===null?(t.next=t,tv(e)):(t.next=i.next,i.next=t),e.interleaved=t,nl(r,n)}function nl(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var jl=!1;function rv(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G8(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ja(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function ql(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,Rn&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,nl(r,t)}return i=n.interleaved,i===null?(e.next=e,tv(n)):(e.next=i.next,i.next=e),n.interleaved=e,nl(r,t)}function ym(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,Ub(r,t)}}function m4(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function t0(r,e,t,n){var i=r.updateQueue;jl=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,a=c.next;c.next=null,o===null?s=a:o.next=a,o=c;var u=r.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=a:l.next=a,u.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,u=a=c=null,l=s;do{var f=l.lane,h=l.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=r,g=l;switch(f=e,h=t,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(h,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(h,d,f):m,f==null)break e;d=Si({},d,f);break e;case 2:jl=!0}}l.callback!==null&&l.lane!==0&&(r.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else h={eventTime:h,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(a=u=h,c=d):u=u.next=h,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=a,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Qc|=o,r.lanes=o,r.memoizedState=d}}function g4(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(Xt(191,i));i.call(n)}}}var qd={},Ea=gc(qd),pd=gc(qd),md=gc(qd);function Fc(r){if(r===qd)throw Error(Xt(174));return r}function nv(r,e){switch(ii(md,e),ii(pd,r),ii(Ea,qd),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:B2(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=B2(e,r)}fi(Ea),ii(Ea,e)}function mh(){fi(Ea),fi(pd),fi(md)}function K8(r){Fc(md.current);var e=Fc(Ea.current),t=B2(e,r.type);e!==t&&(ii(pd,r),ii(Ea,t))}function iv(r){pd.current===r&&(fi(Ea),fi(pd))}var vi=gc(0);function r0(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var C1=[];function sv(){for(var r=0;r<C1.length;r++)C1[r]._workInProgressVersionPrimary=null;C1.length=0}var bm=ul.ReactCurrentDispatcher,I1=ul.ReactCurrentBatchConfig,Xc=0,_i=null,Zi=null,cs=null,n0=!1,zf=!1,gd=0,rT=0;function Cs(){throw Error(Xt(321))}function ov(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!ia(r[t],e[t]))return!1;return!0}function av(r,e,t,n,i,s){if(Xc=s,_i=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bm.current=r===null||r.memoizedState===null?oT:aT,r=t(n,i),zf){s=0;do{if(zf=!1,gd=0,25<=s)throw Error(Xt(301));s+=1,cs=Zi=null,e.updateQueue=null,bm.current=lT,r=t(n,i)}while(zf)}if(bm.current=i0,e=Zi!==null&&Zi.next!==null,Xc=0,cs=Zi=_i=null,n0=!1,e)throw Error(Xt(300));return r}function lv(){var r=gd!==0;return gd=0,r}function ya(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cs===null?_i.memoizedState=cs=r:cs=cs.next=r,cs}function zo(){if(Zi===null){var r=_i.alternate;r=r!==null?r.memoizedState:null}else r=Zi.next;var e=cs===null?_i.memoizedState:cs.next;if(e!==null)cs=e,Zi=r;else{if(r===null)throw Error(Xt(310));Zi=r,r={memoizedState:Zi.memoizedState,baseState:Zi.baseState,baseQueue:Zi.baseQueue,queue:Zi.queue,next:null},cs===null?_i.memoizedState=cs=r:cs=cs.next=r}return cs}function yd(r,e){return typeof e=="function"?e(r):e}function A1(r){var e=zo(),t=e.queue;if(t===null)throw Error(Xt(311));t.lastRenderedReducer=r;var n=Zi,i=n.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,n=n.baseState;var l=o=null,c=null,a=s;do{var u=a.lane;if((Xc&u)===u)c!==null&&(c=c.next={lane:0,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null}),n=a.hasEagerState?a.eagerState:r(n,a.action);else{var d={lane:u,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null};c===null?(l=c=d,o=n):c=c.next=d,_i.lanes|=u,Qc|=u}a=a.next}while(a!==null&&a!==s);c===null?o=n:c.next=l,ia(n,e.memoizedState)||(ro=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,t.lastRenderedState=n}if(r=t.interleaved,r!==null){i=r;do s=i.lane,_i.lanes|=s,Qc|=s,i=i.next;while(i!==r)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function T1(r){var e=zo(),t=e.queue;if(t===null)throw Error(Xt(311));t.lastRenderedReducer=r;var n=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=r(s,o.action),o=o.next;while(o!==i);ia(s,e.memoizedState)||(ro=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function Y8(){}function X8(r,e){var t=_i,n=zo(),i=e(),s=!ia(n.memoizedState,i);if(s&&(n.memoizedState=i,ro=!0),n=n.queue,cv(Z8.bind(null,t,n,r),[r]),n.getSnapshot!==e||s||cs!==null&&cs.memoizedState.tag&1){if(t.flags|=2048,bd(9,J8.bind(null,t,n,i,e),void 0,null),hs===null)throw Error(Xt(349));Xc&30||Q8(t,e,i)}return i}function Q8(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=_i.updateQueue,e===null?(e={lastEffect:null,stores:null},_i.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function J8(r,e,t,n){e.value=t,e.getSnapshot=n,eS(e)&&tS(r)}function Z8(r,e,t){return t(function(){eS(e)&&tS(r)})}function eS(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!ia(r,t)}catch{return!0}}function tS(r){var e=nl(r,1);e!==null&&ra(e,r,1,-1)}function y4(r){var e=ya();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yd,lastRenderedState:r},e.queue=r,r=r.dispatch=sT.bind(null,_i,r),[e.memoizedState,r]}function bd(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=_i.updateQueue,e===null?(e={lastEffect:null,stores:null},_i.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function rS(){return zo().memoizedState}function vm(r,e,t,n){var i=ya();_i.flags|=r,i.memoizedState=bd(1|e,t,void 0,n===void 0?null:n)}function tg(r,e,t,n){var i=zo();n=n===void 0?null:n;var s=void 0;if(Zi!==null){var o=Zi.memoizedState;if(s=o.destroy,n!==null&&ov(n,o.deps)){i.memoizedState=bd(e,t,s,n);return}}_i.flags|=r,i.memoizedState=bd(1|e,t,s,n)}function b4(r,e){return vm(8390656,8,r,e)}function cv(r,e){return tg(2048,8,r,e)}function nS(r,e){return tg(4,2,r,e)}function iS(r,e){return tg(4,4,r,e)}function sS(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function oS(r,e,t){return t=t!=null?t.concat([r]):null,tg(4,4,sS.bind(null,e,r),t)}function uv(){}function aS(r,e){var t=zo();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&ov(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function lS(r,e){var t=zo();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&ov(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function cS(r,e,t){return Xc&21?(ia(t,e)||(t=p8(),_i.lanes|=t,Qc|=t,r.baseState=!0),e):(r.baseState&&(r.baseState=!1,ro=!0),r.memoizedState=t)}function nT(r,e){var t=Vn;Vn=t!==0&&4>t?t:4,r(!0);var n=I1.transition;I1.transition={};try{r(!1),e()}finally{Vn=t,I1.transition=n}}function uS(){return zo().memoizedState}function iT(r,e,t){var n=Gl(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},hS(r))fS(e,t);else if(t=H8(r,e,t,n),t!==null){var i=Gs();ra(t,r,n,i),dS(t,e,n)}}function sT(r,e,t){var n=Gl(r),i={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(hS(r))fS(e,i);else{var s=r.alternate;if(r.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,t);if(i.hasEagerState=!0,i.eagerState=l,ia(l,o)){var c=e.interleaved;c===null?(i.next=i,tv(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}t=H8(r,e,i,n),t!==null&&(i=Gs(),ra(t,r,n,i),dS(t,e,n))}}function hS(r){var e=r.alternate;return r===_i||e!==null&&e===_i}function fS(r,e){zf=n0=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function dS(r,e,t){if(t&4194240){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,Ub(r,t)}}var i0={readContext:Bo,useCallback:Cs,useContext:Cs,useEffect:Cs,useImperativeHandle:Cs,useInsertionEffect:Cs,useLayoutEffect:Cs,useMemo:Cs,useReducer:Cs,useRef:Cs,useState:Cs,useDebugValue:Cs,useDeferredValue:Cs,useTransition:Cs,useMutableSource:Cs,useSyncExternalStore:Cs,useId:Cs,unstable_isNewReconciler:!1},oT={readContext:Bo,useCallback:function(r,e){return ya().memoizedState=[r,e===void 0?null:e],r},useContext:Bo,useEffect:b4,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,vm(4194308,4,sS.bind(null,e,r),t)},useLayoutEffect:function(r,e){return vm(4194308,4,r,e)},useInsertionEffect:function(r,e){return vm(4,2,r,e)},useMemo:function(r,e){var t=ya();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=ya();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=iT.bind(null,_i,r),[n.memoizedState,r]},useRef:function(r){var e=ya();return r={current:r},e.memoizedState=r},useState:y4,useDebugValue:uv,useDeferredValue:function(r){return ya().memoizedState=r},useTransition:function(){var r=y4(!1),e=r[0];return r=nT.bind(null,r[1]),ya().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=_i,i=ya();if(yi){if(t===void 0)throw Error(Xt(407));t=t()}else{if(t=e(),hs===null)throw Error(Xt(349));Xc&30||Q8(n,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,b4(Z8.bind(null,n,s,r),[r]),n.flags|=2048,bd(9,J8.bind(null,n,s,t,e),void 0,null),t},useId:function(){var r=ya(),e=hs.identifierPrefix;if(yi){var t=Ya,n=Ka;t=(n&~(1<<32-ta(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=gd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=rT++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},aT={readContext:Bo,useCallback:aS,useContext:Bo,useEffect:cv,useImperativeHandle:oS,useInsertionEffect:nS,useLayoutEffect:iS,useMemo:lS,useReducer:A1,useRef:rS,useState:function(){return A1(yd)},useDebugValue:uv,useDeferredValue:function(r){var e=zo();return cS(e,Zi.memoizedState,r)},useTransition:function(){var r=A1(yd)[0],e=zo().memoizedState;return[r,e]},useMutableSource:Y8,useSyncExternalStore:X8,useId:uS,unstable_isNewReconciler:!1},lT={readContext:Bo,useCallback:aS,useContext:Bo,useEffect:cv,useImperativeHandle:oS,useInsertionEffect:nS,useLayoutEffect:iS,useMemo:lS,useReducer:T1,useRef:rS,useState:function(){return T1(yd)},useDebugValue:uv,useDeferredValue:function(r){var e=zo();return Zi===null?e.memoizedState=r:cS(e,Zi.memoizedState,r)},useTransition:function(){var r=T1(yd)[0],e=zo().memoizedState;return[r,e]},useMutableSource:Y8,useSyncExternalStore:X8,useId:uS,unstable_isNewReconciler:!1};function Ko(r,e){if(r&&r.defaultProps){e=Si({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}function oy(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:Si({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var rg={isMounted:function(r){return(r=r._reactInternals)?lu(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=Gs(),i=Gl(r),s=Ja(n,i);s.payload=e,t!=null&&(s.callback=t),e=ql(r,s,i),e!==null&&(ra(e,r,i,n),ym(e,r,i))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=Gs(),i=Gl(r),s=Ja(n,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=ql(r,s,i),e!==null&&(ra(e,r,i,n),ym(e,r,i))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=Gs(),n=Gl(r),i=Ja(t,n);i.tag=2,e!=null&&(i.callback=e),e=ql(r,i,n),e!==null&&(ra(e,r,n,t),ym(e,r,n))}};function v4(r,e,t,n,i,s,o){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!ud(t,n)||!ud(i,s):!0}function pS(r,e,t){var n=!1,i=ic,s=e.contextType;return typeof s=="object"&&s!==null?s=Bo(s):(i=io(e)?Kc:Fs.current,n=e.contextTypes,s=(n=n!=null)?fh(r,i):ic),e=new e(t,s),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rg,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=s),e}function w4(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&rg.enqueueReplaceState(e,e.state,null)}function ay(r,e,t,n){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs={},rv(r);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Bo(s):(s=io(e)?Kc:Fs.current,i.context=fh(r,s)),i.state=r.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(oy(r,e,s,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&rg.enqueueReplaceState(i,i.state,null),t0(r,t,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function gh(r,e){try{var t="",n=e;do t+=LI(n),n=n.return;while(n);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:r,source:e,stack:i,digest:null}}function N1(r,e,t){return{value:r,source:null,stack:t??null,digest:e??null}}function ly(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var cT=typeof WeakMap=="function"?WeakMap:Map;function mS(r,e,t){t=Ja(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){o0||(o0=!0,by=n),ly(r,e)},t}function gS(r,e,t){t=Ja(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return n(i)},t.callback=function(){ly(r,e)}}var s=r.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){ly(r,e),typeof n!="function"&&(Hl===null?Hl=new Set([this]):Hl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function _4(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new cT;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(t)||(i.add(t),r=ST.bind(null,r,e,t),e.then(r,r))}function x4(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function S4(r,e,t,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ja(-1,1),e.tag=2,ql(t,e,1))),t.lanes|=1),r)}var uT=ul.ReactCurrentOwner,ro=!1;function Ws(r,e,t,n){e.child=r===null?q8(e,null,t,n):ph(e,r.child,t,n)}function k4(r,e,t,n,i){t=t.render;var s=e.ref;return Xu(e,i),n=av(r,e,t,n,s,i),t=lv(),r!==null&&!ro?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,il(r,e,i)):(yi&&t&&Yb(e),e.flags|=1,Ws(r,e,n,i),e.child)}function E4(r,e,t,n,i){if(r===null){var s=t.type;return typeof s=="function"&&!bv(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,yS(r,e,s,n,i)):(r=Sm(t.type,null,n,e,e.mode,i),r.ref=e.ref,r.return=e,e.child=r)}if(s=r.child,!(r.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:ud,t(o,n)&&r.ref===e.ref)return il(r,e,i)}return e.flags|=1,r=Kl(s,n),r.ref=e.ref,r.return=e,e.child=r}function yS(r,e,t,n,i){if(r!==null){var s=r.memoizedProps;if(ud(s,n)&&r.ref===e.ref)if(ro=!1,e.pendingProps=n=s,(r.lanes&i)!==0)r.flags&131072&&(ro=!0);else return e.lanes=r.lanes,il(r,e,i)}return cy(r,e,t,n,i)}function bS(r,e,t){var n=e.pendingProps,i=n.children,s=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ii($u,vo),vo|=t;else{if(!(t&1073741824))return r=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,ii($u,vo),vo|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,ii($u,vo),vo|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,ii($u,vo),vo|=n;return Ws(r,e,i,t),e.child}function vS(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function cy(r,e,t,n,i){var s=io(t)?Kc:Fs.current;return s=fh(e,s),Xu(e,i),t=av(r,e,t,n,s,i),n=lv(),r!==null&&!ro?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,il(r,e,i)):(yi&&n&&Yb(e),e.flags|=1,Ws(r,e,t,i),e.child)}function C4(r,e,t,n,i){if(io(t)){var s=!0;Xm(e)}else s=!1;if(Xu(e,i),e.stateNode===null)wm(r,e),pS(e,t,n),ay(e,t,n,i),n=!0;else if(r===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,a=t.contextType;typeof a=="object"&&a!==null?a=Bo(a):(a=io(t)?Kc:Fs.current,a=fh(e,a));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==a)&&w4(e,o,n,a),jl=!1;var f=e.memoizedState;o.state=f,t0(e,n,o,i),c=e.memoizedState,l!==n||f!==c||no.current||jl?(typeof u=="function"&&(oy(e,t,u,n),c=e.memoizedState),(l=jl||v4(e,t,l,n,f,c,a))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=a,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,G8(r,e),l=e.memoizedProps,a=e.type===e.elementType?l:Ko(e.type,l),o.props=a,d=e.pendingProps,f=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=Bo(c):(c=io(t)?Kc:Fs.current,c=fh(e,c));var h=t.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&w4(e,o,n,c),jl=!1,f=e.memoizedState,o.state=f,t0(e,n,o,i);var m=e.memoizedState;l!==d||f!==m||no.current||jl?(typeof h=="function"&&(oy(e,t,h,n),m=e.memoizedState),(a=jl||v4(e,t,a,n,f,m,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===r.memoizedProps&&f===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===r.memoizedProps&&f===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=c,n=a):(typeof o.componentDidUpdate!="function"||l===r.memoizedProps&&f===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===r.memoizedProps&&f===r.memoizedState||(e.flags|=1024),n=!1)}return uy(r,e,t,n,s,i)}function uy(r,e,t,n,i,s){vS(r,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&h4(e,t,!1),il(r,e,s);n=e.stateNode,uT.current=e;var l=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&o?(e.child=ph(e,r.child,null,s),e.child=ph(e,null,l,s)):Ws(r,e,l,s),e.memoizedState=n.state,i&&h4(e,t,!0),e.child}function wS(r){var e=r.stateNode;e.pendingContext?u4(r,e.pendingContext,e.pendingContext!==e.context):e.context&&u4(r,e.context,!1),nv(r,e.containerInfo)}function I4(r,e,t,n,i){return dh(),Qb(i),e.flags|=256,Ws(r,e,t,n),e.child}var hy={dehydrated:null,treeContext:null,retryLane:0};function fy(r){return{baseLanes:r,cachePool:null,transitions:null}}function _S(r,e,t){var n=e.pendingProps,i=vi.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=r!==null&&r.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),ii(vi,i&1),r===null)return iy(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(e.mode&1?r.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,r=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=sg(o,n,0,null),r=$c(r,n,t,null),s.return=e,r.return=e,s.sibling=r,e.child=s,e.child.memoizedState=fy(t),e.memoizedState=hy,r):hv(e,o));if(i=r.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return hT(r,e,o,n,l,i,t);if(s){s=n.fallback,o=e.mode,i=r.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Kl(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Kl(l,s):(s=$c(s,o,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=r.child.memoizedState,o=o===null?fy(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=r.childLanes&~t,e.memoizedState=hy,n}return s=r.child,r=s.sibling,n=Kl(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function hv(r,e){return e=sg({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function $p(r,e,t,n){return n!==null&&Qb(n),ph(e,r.child,null,t),r=hv(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function hT(r,e,t,n,i,s,o){if(t)return e.flags&256?(e.flags&=-257,n=N1(Error(Xt(422))),$p(r,e,o,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=sg({mode:"visible",children:n.children},i,0,null),s=$c(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&ph(e,r.child,null,o),e.child.memoizedState=fy(o),e.memoizedState=hy,s);if(!(e.mode&1))return $p(r,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(Xt(419)),n=N1(s,n,void 0),$p(r,e,o,n)}if(l=(o&r.childLanes)!==0,ro||l){if(n=hs,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,nl(r,i),ra(n,r,i,-1))}return yv(),n=N1(Error(Xt(421))),$p(r,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=r.child,e=kT.bind(null,r),i._reactRetry=e,null):(r=s.treeContext,_o=Wl(i.nextSibling),So=e,yi=!0,Xo=null,r!==null&&(Po[Mo++]=Ka,Po[Mo++]=Ya,Po[Mo++]=Yc,Ka=r.id,Ya=r.overflow,Yc=e),e=hv(e,n.children),e.flags|=4096,e)}function A4(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),sy(r.return,e,t)}function j1(r,e,t,n,i){var s=r.memoizedState;s===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=i)}function xS(r,e,t){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Ws(r,e,n.children,t),n=vi.current,n&2)n=n&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&A4(r,t,e);else if(r.tag===19)A4(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(ii(vi,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&r0(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),j1(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&r0(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}j1(e,!0,t,null,s);break;case"together":j1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wm(r,e){!(e.mode&1)&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function il(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),Qc|=e.lanes,!(t&e.childLanes))return null;if(r!==null&&e.child!==r.child)throw Error(Xt(153));if(e.child!==null){for(r=e.child,t=Kl(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=Kl(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function fT(r,e,t){switch(e.tag){case 3:wS(e),dh();break;case 5:K8(e);break;case 1:io(e.type)&&Xm(e);break;case 4:nv(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;ii(Zm,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ii(vi,vi.current&1),e.flags|=128,null):t&e.child.childLanes?_S(r,e,t):(ii(vi,vi.current&1),r=il(r,e,t),r!==null?r.sibling:null);ii(vi,vi.current&1);break;case 19:if(n=(t&e.childLanes)!==0,r.flags&128){if(n)return xS(r,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ii(vi,vi.current),n)break;return null;case 22:case 23:return e.lanes=0,bS(r,e,t)}return il(r,e,t)}var SS,dy,kS,ES;SS=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};dy=function(){};kS=function(r,e,t,n){var i=r.memoizedProps;if(i!==n){r=e.stateNode,Fc(Ea.current);var s=null;switch(t){case"input":i=O2(r,i),n=O2(r,n),s=[];break;case"select":i=Si({},i,{value:void 0}),n=Si({},n,{value:void 0}),s=[];break;case"textarea":i=F2(r,i),n=F2(r,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=Km)}z2(t,n);var o;t=null;for(a in i)if(!n.hasOwnProperty(a)&&i.hasOwnProperty(a)&&i[a]!=null)if(a==="style"){var l=i[a];for(o in l)l.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else a!=="dangerouslySetInnerHTML"&&a!=="children"&&a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(nd.hasOwnProperty(a)?s||(s=[]):(s=s||[]).push(a,null));for(a in n){var c=n[a];if(l=i!=null?i[a]:void 0,n.hasOwnProperty(a)&&c!==l&&(c!=null||l!=null))if(a==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(s||(s=[]),s.push(a,t)),t=c;else a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(a,c)):a==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(a,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&(nd.hasOwnProperty(a)?(c!=null&&a==="onScroll"&&ui("scroll",r),s||l===c||(s=[])):(s=s||[]).push(a,c))}t&&(s=s||[]).push("style",t);var a=s;(e.updateQueue=a)&&(e.flags|=4)}};ES=function(r,e,t,n){t!==n&&(e.flags|=4)};function bf(r,e){if(!yi)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function Is(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function dT(r,e,t){var n=e.pendingProps;switch(Xb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Is(e),null;case 1:return io(e.type)&&Ym(),Is(e),null;case 3:return n=e.stateNode,mh(),fi(no),fi(Fs),sv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(Up(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xo!==null&&(_y(Xo),Xo=null))),dy(r,e),Is(e),null;case 5:iv(e);var i=Fc(md.current);if(t=e.type,r!==null&&e.stateNode!=null)kS(r,e,t,n,i),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Xt(166));return Is(e),null}if(r=Fc(Ea.current),Up(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[va]=e,n[dd]=s,r=(e.mode&1)!==0,t){case"dialog":ui("cancel",n),ui("close",n);break;case"iframe":case"object":case"embed":ui("load",n);break;case"video":case"audio":for(i=0;i<Nf.length;i++)ui(Nf[i],n);break;case"source":ui("error",n);break;case"img":case"image":case"link":ui("error",n),ui("load",n);break;case"details":ui("toggle",n);break;case"input":Dw(n,s),ui("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},ui("invalid",n);break;case"textarea":Bw(n,s),ui("invalid",n)}z2(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&zp(n.textContent,l,r),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&zp(n.textContent,l,r),i=["children",""+l]):nd.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ui("scroll",n)}switch(t){case"input":Rp(n),Fw(n,s,!0);break;case"textarea":Rp(n),zw(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Km)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Z6(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=o.createElement(t,{is:n.is}):(r=o.createElement(t),t==="select"&&(o=r,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):r=o.createElementNS(r,t),r[va]=e,r[dd]=n,SS(r,e,!1,!1),e.stateNode=r;e:{switch(o=U2(t,n),t){case"dialog":ui("cancel",r),ui("close",r),i=n;break;case"iframe":case"object":case"embed":ui("load",r),i=n;break;case"video":case"audio":for(i=0;i<Nf.length;i++)ui(Nf[i],r);i=n;break;case"source":ui("error",r),i=n;break;case"img":case"image":case"link":ui("error",r),ui("load",r),i=n;break;case"details":ui("toggle",r),i=n;break;case"input":Dw(r,n),i=O2(r,n),ui("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=Si({},n,{value:void 0}),ui("invalid",r);break;case"textarea":Bw(r,n),i=F2(r,n),ui("invalid",r);break;default:i=n}z2(t,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?r8(r,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&e8(r,c)):s==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&id(r,c):typeof c=="number"&&id(r,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(nd.hasOwnProperty(s)?c!=null&&s==="onScroll"&&ui("scroll",r):c!=null&&Ob(r,s,c,o))}switch(t){case"input":Rp(r),Fw(r,n,!1);break;case"textarea":Rp(r),zw(r);break;case"option":n.value!=null&&r.setAttribute("value",""+nc(n.value));break;case"select":r.multiple=!!n.multiple,s=n.value,s!=null?Hu(r,!!n.multiple,s,!1):n.defaultValue!=null&&Hu(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=Km)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Is(e),null;case 6:if(r&&e.stateNode!=null)ES(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Xt(166));if(t=Fc(md.current),Fc(Ea.current),Up(e)){if(n=e.stateNode,t=e.memoizedProps,n[va]=e,(s=n.nodeValue!==t)&&(r=So,r!==null))switch(r.tag){case 3:zp(n.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&zp(n.nodeValue,t,(r.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[va]=e,e.stateNode=n}return Is(e),null;case 13:if(fi(vi),n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(yi&&_o!==null&&e.mode&1&&!(e.flags&128))$8(),dh(),e.flags|=98560,s=!1;else if(s=Up(e),n!==null&&n.dehydrated!==null){if(r===null){if(!s)throw Error(Xt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Xt(317));s[va]=e}else dh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Is(e),s=!1}else Xo!==null&&(_y(Xo),Xo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(r===null||vi.current&1?ns===0&&(ns=3):yv())),e.updateQueue!==null&&(e.flags|=4),Is(e),null);case 4:return mh(),dy(r,e),r===null&&hd(e.stateNode.containerInfo),Is(e),null;case 10:return ev(e.type._context),Is(e),null;case 17:return io(e.type)&&Ym(),Is(e),null;case 19:if(fi(vi),s=e.memoizedState,s===null)return Is(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)bf(s,!1);else{if(ns!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(o=r0(r),o!==null){for(e.flags|=128,bf(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,r=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,r=o.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return ii(vi,vi.current&1|2),e.child}r=r.sibling}s.tail!==null&&Fi()>yh&&(e.flags|=128,n=!0,bf(s,!1),e.lanes=4194304)}else{if(!n)if(r=r0(o),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),bf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!yi)return Is(e),null}else 2*Fi()-s.renderingStartTime>yh&&t!==1073741824&&(e.flags|=128,n=!0,bf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Fi(),e.sibling=null,t=vi.current,ii(vi,n?t&1|2:t&1),e):(Is(e),null);case 22:case 23:return gv(),n=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?vo&1073741824&&(Is(e),e.subtreeFlags&6&&(e.flags|=8192)):Is(e),null;case 24:return null;case 25:return null}throw Error(Xt(156,e.tag))}function pT(r,e){switch(Xb(e),e.tag){case 1:return io(e.type)&&Ym(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return mh(),fi(no),fi(Fs),sv(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 5:return iv(e),null;case 13:if(fi(vi),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(Xt(340));dh()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return fi(vi),null;case 4:return mh(),null;case 10:return ev(e.type._context),null;case 22:case 23:return gv(),null;case 24:return null;default:return null}}var Wp=!1,Os=!1,mT=typeof WeakSet=="function"?WeakSet:Set,vr=null;function Vu(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Ai(r,e,n)}else t.current=null}function py(r,e,t){try{t()}catch(n){Ai(r,e,n)}}var T4=!1;function gT(r,e){if(Q2=qm,r=N8(),Kb(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,l=-1,c=-1,a=0,u=0,d=r,f=null;t:for(;;){for(var h;d!==t||i!==0&&d.nodeType!==3||(l=o+i),d!==s||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===r)break t;if(f===t&&++a===i&&(l=o),f===s&&++u===n&&(c=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}t=l===-1||c===-1?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(J2={focusedElem:r,selectionRange:t},qm=!1,vr=e;vr!==null;)if(e=vr,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,vr=r;else for(;vr!==null;){e=vr;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,p=m.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ko(e.type,g),p);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Xt(163))}}catch(E){Ai(e,e.return,E)}if(r=e.sibling,r!==null){r.return=e.return,vr=r;break}vr=e.return}return m=T4,T4=!1,m}function Uf(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var s=i.destroy;i.destroy=void 0,s!==void 0&&py(e,t,s)}i=i.next}while(i!==n)}}function ng(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function my(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function CS(r){var e=r.alternate;e!==null&&(r.alternate=null,CS(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[va],delete e[dd],delete e[ty],delete e[JA],delete e[ZA])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function IS(r){return r.tag===5||r.tag===3||r.tag===4}function N4(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||IS(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function gy(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Km));else if(n!==4&&(r=r.child,r!==null))for(gy(r,e,t),r=r.sibling;r!==null;)gy(r,e,t),r=r.sibling}function yy(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(yy(r,e,t),r=r.sibling;r!==null;)yy(r,e,t),r=r.sibling}var gs=null,Yo=!1;function Cl(r,e,t){for(t=t.child;t!==null;)AS(r,e,t),t=t.sibling}function AS(r,e,t){if(ka&&typeof ka.onCommitFiberUnmount=="function")try{ka.onCommitFiberUnmount(Y0,t)}catch{}switch(t.tag){case 5:Os||Vu(t,e);case 6:var n=gs,i=Yo;gs=null,Cl(r,e,t),gs=n,Yo=i,gs!==null&&(Yo?(r=gs,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):gs.removeChild(t.stateNode));break;case 18:gs!==null&&(Yo?(r=gs,t=t.stateNode,r.nodeType===8?k1(r.parentNode,t):r.nodeType===1&&k1(r,t),ld(r)):k1(gs,t.stateNode));break;case 4:n=gs,i=Yo,gs=t.stateNode.containerInfo,Yo=!0,Cl(r,e,t),gs=n,Yo=i;break;case 0:case 11:case 14:case 15:if(!Os&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&py(t,e,o),i=i.next}while(i!==n)}Cl(r,e,t);break;case 1:if(!Os&&(Vu(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(l){Ai(t,e,l)}Cl(r,e,t);break;case 21:Cl(r,e,t);break;case 22:t.mode&1?(Os=(n=Os)||t.memoizedState!==null,Cl(r,e,t),Os=n):Cl(r,e,t);break;default:Cl(r,e,t)}}function j4(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new mT),e.forEach(function(n){var i=ET.bind(null,r,n);t.has(n)||(t.add(n),n.then(i,i))})}}function Ho(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];try{var s=r,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:gs=l.stateNode,Yo=!1;break e;case 3:gs=l.stateNode.containerInfo,Yo=!0;break e;case 4:gs=l.stateNode.containerInfo,Yo=!0;break e}l=l.return}if(gs===null)throw Error(Xt(160));AS(s,o,i),gs=null,Yo=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(a){Ai(i,e,a)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)TS(e,r),e=e.sibling}function TS(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Ho(e,r),fa(r),n&4){try{Uf(3,r,r.return),ng(3,r)}catch(g){Ai(r,r.return,g)}try{Uf(5,r,r.return)}catch(g){Ai(r,r.return,g)}}break;case 1:Ho(e,r),fa(r),n&512&&t!==null&&Vu(t,t.return);break;case 5:if(Ho(e,r),fa(r),n&512&&t!==null&&Vu(t,t.return),r.flags&32){var i=r.stateNode;try{id(i,"")}catch(g){Ai(r,r.return,g)}}if(n&4&&(i=r.stateNode,i!=null)){var s=r.memoizedProps,o=t!==null?t.memoizedProps:s,l=r.type,c=r.updateQueue;if(r.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Q6(i,s),U2(l,o);var a=U2(l,s);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?r8(i,d):u==="dangerouslySetInnerHTML"?e8(i,d):u==="children"?id(i,d):Ob(i,u,d,a)}switch(l){case"input":L2(i,s);break;case"textarea":J6(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Hu(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Hu(i,!!s.multiple,s.defaultValue,!0):Hu(i,!!s.multiple,s.multiple?[]:"",!1))}i[dd]=s}catch(g){Ai(r,r.return,g)}}break;case 6:if(Ho(e,r),fa(r),n&4){if(r.stateNode===null)throw Error(Xt(162));i=r.stateNode,s=r.memoizedProps;try{i.nodeValue=s}catch(g){Ai(r,r.return,g)}}break;case 3:if(Ho(e,r),fa(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{ld(e.containerInfo)}catch(g){Ai(r,r.return,g)}break;case 4:Ho(e,r),fa(r);break;case 13:Ho(e,r),fa(r),i=r.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(pv=Fi())),n&4&&j4(r);break;case 22:if(u=t!==null&&t.memoizedState!==null,r.mode&1?(Os=(a=Os)||u,Ho(e,r),Os=a):Ho(e,r),fa(r),n&8192){if(a=r.memoizedState!==null,(r.stateNode.isHidden=a)&&!u&&r.mode&1)for(vr=r,u=r.child;u!==null;){for(d=vr=u;vr!==null;){switch(f=vr,h=f.child,f.tag){case 0:case 11:case 14:case 15:Uf(4,f,f.return);break;case 1:Vu(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,t=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Ai(n,t,g)}}break;case 5:Vu(f,f.return);break;case 22:if(f.memoizedState!==null){P4(d);continue}}h!==null?(h.return=f,vr=h):P4(d)}u=u.sibling}e:for(u=null,d=r;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,a?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=t8("display",o))}catch(g){Ai(r,r.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=a?"":d.memoizedProps}catch(g){Ai(r,r.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===r)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break e;for(;d.sibling===null;){if(d.return===null||d.return===r)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ho(e,r),fa(r),n&4&&j4(r);break;case 21:break;default:Ho(e,r),fa(r)}}function fa(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(IS(t)){var n=t;break e}t=t.return}throw Error(Xt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(id(i,""),n.flags&=-33);var s=N4(r);yy(r,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=N4(r);gy(r,l,o);break;default:throw Error(Xt(161))}}catch(c){Ai(r,r.return,c)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function yT(r,e,t){vr=r,NS(r)}function NS(r,e,t){for(var n=(r.mode&1)!==0;vr!==null;){var i=vr,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Wp;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Os;l=Wp;var a=Os;if(Wp=o,(Os=c)&&!a)for(vr=i;vr!==null;)o=vr,c=o.child,o.tag===22&&o.memoizedState!==null?M4(i):c!==null?(c.return=o,vr=c):M4(i);for(;s!==null;)vr=s,NS(s),s=s.sibling;vr=i,Wp=l,Os=a}R4(r)}else i.subtreeFlags&8772&&s!==null?(s.return=i,vr=s):R4(r)}}function R4(r){for(;vr!==null;){var e=vr;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Os||ng(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Os)if(t===null)n.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ko(e.type,t.memoizedProps);n.componentDidUpdate(i,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&g4(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}g4(e,o,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var a=e.alternate;if(a!==null){var u=a.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&ld(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Xt(163))}Os||e.flags&512&&my(e)}catch(f){Ai(e,e.return,f)}}if(e===r){vr=null;break}if(t=e.sibling,t!==null){t.return=e.return,vr=t;break}vr=e.return}}function P4(r){for(;vr!==null;){var e=vr;if(e===r){vr=null;break}var t=e.sibling;if(t!==null){t.return=e.return,vr=t;break}vr=e.return}}function M4(r){for(;vr!==null;){var e=vr;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{ng(4,e)}catch(c){Ai(e,t,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){Ai(e,i,c)}}var s=e.return;try{my(e)}catch(c){Ai(e,s,c)}break;case 5:var o=e.return;try{my(e)}catch(c){Ai(e,o,c)}}}catch(c){Ai(e,e.return,c)}if(e===r){vr=null;break}var l=e.sibling;if(l!==null){l.return=e.return,vr=l;break}vr=e.return}}var bT=Math.ceil,s0=ul.ReactCurrentDispatcher,fv=ul.ReactCurrentOwner,Fo=ul.ReactCurrentBatchConfig,Rn=0,hs=null,Hi=null,vs=0,vo=0,$u=gc(0),ns=0,vd=null,Qc=0,ig=0,dv=0,Vf=null,to=null,pv=0,yh=1/0,qa=null,o0=!1,by=null,Hl=null,qp=!1,Ol=null,a0=0,$f=0,vy=null,_m=-1,xm=0;function Gs(){return Rn&6?Fi():_m!==-1?_m:_m=Fi()}function Gl(r){return r.mode&1?Rn&2&&vs!==0?vs&-vs:tT.transition!==null?(xm===0&&(xm=p8()),xm):(r=Vn,r!==0||(r=window.event,r=r===void 0?16:_8(r.type)),r):1}function ra(r,e,t,n){if(50<$f)throw $f=0,vy=null,Error(Xt(185));Vd(r,t,n),(!(Rn&2)||r!==hs)&&(r===hs&&(!(Rn&2)&&(ig|=t),ns===4&&Pl(r,vs)),so(r,n),t===1&&Rn===0&&!(e.mode&1)&&(yh=Fi()+500,eg&&yc()))}function so(r,e){var t=r.callbackNode;tA(r,e);var n=Wm(r,r===hs?vs:0);if(n===0)t!==null&&$w(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&-n,r.callbackPriority!==e){if(t!=null&&$w(t),e===1)r.tag===0?eT(O4.bind(null,r)):z8(O4.bind(null,r)),XA(function(){!(Rn&6)&&yc()}),t=null;else{switch(m8(n)){case 1:t=zb;break;case 4:t=f8;break;case 16:t=$m;break;case 536870912:t=d8;break;default:t=$m}t=FS(t,jS.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function jS(r,e){if(_m=-1,xm=0,Rn&6)throw Error(Xt(327));var t=r.callbackNode;if(Qu()&&r.callbackNode!==t)return null;var n=Wm(r,r===hs?vs:0);if(n===0)return null;if(n&30||n&r.expiredLanes||e)e=l0(r,n);else{e=n;var i=Rn;Rn|=2;var s=PS();(hs!==r||vs!==e)&&(qa=null,yh=Fi()+500,Vc(r,e));do try{_T();break}catch(l){RS(r,l)}while(!0);Zb(),s0.current=s,Rn=i,Hi!==null?e=0:(hs=null,vs=0,e=ns)}if(e!==0){if(e===2&&(i=H2(r),i!==0&&(n=i,e=wy(r,i))),e===1)throw t=vd,Vc(r,0),Pl(r,n),so(r,Fi()),t;if(e===6)Pl(r,n);else{if(i=r.current.alternate,!(n&30)&&!vT(i)&&(e=l0(r,n),e===2&&(s=H2(r),s!==0&&(n=s,e=wy(r,s))),e===1))throw t=vd,Vc(r,0),Pl(r,n),so(r,Fi()),t;switch(r.finishedWork=i,r.finishedLanes=n,e){case 0:case 1:throw Error(Xt(345));case 2:jc(r,to,qa);break;case 3:if(Pl(r,n),(n&130023424)===n&&(e=pv+500-Fi(),10<e)){if(Wm(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){Gs(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=ey(jc.bind(null,r,to,qa),e);break}jc(r,to,qa);break;case 4:if(Pl(r,n),(n&4194240)===n)break;for(e=r.eventTimes,i=-1;0<n;){var o=31-ta(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=Fi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*bT(n/1960))-n,10<n){r.timeoutHandle=ey(jc.bind(null,r,to,qa),n);break}jc(r,to,qa);break;case 5:jc(r,to,qa);break;default:throw Error(Xt(329))}}}return so(r,Fi()),r.callbackNode===t?jS.bind(null,r):null}function wy(r,e){var t=Vf;return r.current.memoizedState.isDehydrated&&(Vc(r,e).flags|=256),r=l0(r,e),r!==2&&(e=to,to=t,e!==null&&_y(e)),r}function _y(r){to===null?to=r:to.push.apply(to,r)}function vT(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var i=t[n],s=i.getSnapshot;i=i.value;try{if(!ia(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pl(r,e){for(e&=~dv,e&=~ig,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-ta(e),n=1<<t;r[t]=-1,e&=~n}}function O4(r){if(Rn&6)throw Error(Xt(327));Qu();var e=Wm(r,0);if(!(e&1))return so(r,Fi()),null;var t=l0(r,e);if(r.tag!==0&&t===2){var n=H2(r);n!==0&&(e=n,t=wy(r,n))}if(t===1)throw t=vd,Vc(r,0),Pl(r,e),so(r,Fi()),t;if(t===6)throw Error(Xt(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,jc(r,to,qa),so(r,Fi()),null}function mv(r,e){var t=Rn;Rn|=1;try{return r(e)}finally{Rn=t,Rn===0&&(yh=Fi()+500,eg&&yc())}}function Jc(r){Ol!==null&&Ol.tag===0&&!(Rn&6)&&Qu();var e=Rn;Rn|=1;var t=Fo.transition,n=Vn;try{if(Fo.transition=null,Vn=1,r)return r()}finally{Vn=n,Fo.transition=t,Rn=e,!(Rn&6)&&yc()}}function gv(){vo=$u.current,fi($u)}function Vc(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,YA(t)),Hi!==null)for(t=Hi.return;t!==null;){var n=t;switch(Xb(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ym();break;case 3:mh(),fi(no),fi(Fs),sv();break;case 5:iv(n);break;case 4:mh();break;case 13:fi(vi);break;case 19:fi(vi);break;case 10:ev(n.type._context);break;case 22:case 23:gv()}t=t.return}if(hs=r,Hi=r=Kl(r.current,null),vs=vo=e,ns=0,vd=null,dv=ig=Qc=0,to=Vf=null,Dc!==null){for(e=0;e<Dc.length;e++)if(t=Dc[e],n=t.interleaved,n!==null){t.interleaved=null;var i=n.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}t.pending=n}Dc=null}return r}function RS(r,e){do{var t=Hi;try{if(Zb(),bm.current=i0,n0){for(var n=_i.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}n0=!1}if(Xc=0,cs=Zi=_i=null,zf=!1,gd=0,fv.current=null,t===null||t.return===null){ns=1,vd=e,Hi=null;break}e:{var s=r,o=t.return,l=t,c=e;if(e=vs,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var a=c,u=l,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=x4(o);if(h!==null){h.flags&=-257,S4(h,o,l,s,e),h.mode&1&&_4(s,a,e),e=h,c=a;var m=e.updateQueue;if(m===null){var g=new Set;g.add(c),e.updateQueue=g}else m.add(c);break e}else{if(!(e&1)){_4(s,a,e),yv();break e}c=Error(Xt(426))}}else if(yi&&l.mode&1){var p=x4(o);if(p!==null){!(p.flags&65536)&&(p.flags|=256),S4(p,o,l,s,e),Qb(gh(c,l));break e}}s=c=gh(c,l),ns!==4&&(ns=2),Vf===null?Vf=[s]:Vf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=mS(s,c,e);m4(s,y);break e;case 1:l=c;var b=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Hl===null||!Hl.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=gS(s,l,e);m4(s,E);break e}}s=s.return}while(s!==null)}OS(t)}catch(M){e=M,Hi===t&&t!==null&&(Hi=t=t.return);continue}break}while(!0)}function PS(){var r=s0.current;return s0.current=i0,r===null?i0:r}function yv(){(ns===0||ns===3||ns===2)&&(ns=4),hs===null||!(Qc&268435455)&&!(ig&268435455)||Pl(hs,vs)}function l0(r,e){var t=Rn;Rn|=2;var n=PS();(hs!==r||vs!==e)&&(qa=null,Vc(r,e));do try{wT();break}catch(i){RS(r,i)}while(!0);if(Zb(),Rn=t,s0.current=n,Hi!==null)throw Error(Xt(261));return hs=null,vs=0,ns}function wT(){for(;Hi!==null;)MS(Hi)}function _T(){for(;Hi!==null&&!HI();)MS(Hi)}function MS(r){var e=DS(r.alternate,r,vo);r.memoizedProps=r.pendingProps,e===null?OS(r):Hi=e,fv.current=null}function OS(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&32768){if(t=pT(t,e),t!==null){t.flags&=32767,Hi=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{ns=6,Hi=null;return}}else if(t=dT(t,e,vo),t!==null){Hi=t;return}if(e=e.sibling,e!==null){Hi=e;return}Hi=e=r}while(e!==null);ns===0&&(ns=5)}function jc(r,e,t){var n=Vn,i=Fo.transition;try{Fo.transition=null,Vn=1,xT(r,e,t,n)}finally{Fo.transition=i,Vn=n}return null}function xT(r,e,t,n){do Qu();while(Ol!==null);if(Rn&6)throw Error(Xt(327));t=r.finishedWork;var i=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(Xt(177));r.callbackNode=null,r.callbackPriority=0;var s=t.lanes|t.childLanes;if(rA(r,s),r===hs&&(Hi=hs=null,vs=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||qp||(qp=!0,FS($m,function(){return Qu(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Fo.transition,Fo.transition=null;var o=Vn;Vn=1;var l=Rn;Rn|=4,fv.current=null,gT(r,t),TS(t,r),VA(J2),qm=!!Q2,J2=Q2=null,r.current=t,yT(t),GI(),Rn=l,Vn=o,Fo.transition=s}else r.current=t;if(qp&&(qp=!1,Ol=r,a0=i),s=r.pendingLanes,s===0&&(Hl=null),XI(t.stateNode),so(r,Fi()),e!==null)for(n=r.onRecoverableError,t=0;t<e.length;t++)i=e[t],n(i.value,{componentStack:i.stack,digest:i.digest});if(o0)throw o0=!1,r=by,by=null,r;return a0&1&&r.tag!==0&&Qu(),s=r.pendingLanes,s&1?r===vy?$f++:($f=0,vy=r):$f=0,yc(),null}function Qu(){if(Ol!==null){var r=m8(a0),e=Fo.transition,t=Vn;try{if(Fo.transition=null,Vn=16>r?16:r,Ol===null)var n=!1;else{if(r=Ol,Ol=null,a0=0,Rn&6)throw Error(Xt(331));var i=Rn;for(Rn|=4,vr=r.current;vr!==null;){var s=vr,o=s.child;if(vr.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var a=l[c];for(vr=a;vr!==null;){var u=vr;switch(u.tag){case 0:case 11:case 15:Uf(8,u,s)}var d=u.child;if(d!==null)d.return=u,vr=d;else for(;vr!==null;){u=vr;var f=u.sibling,h=u.return;if(CS(u),u===a){vr=null;break}if(f!==null){f.return=h,vr=f;break}vr=h}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var p=g.sibling;g.sibling=null,g=p}while(g!==null)}}vr=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,vr=o;else e:for(;vr!==null;){if(s=vr,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Uf(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,vr=y;break e}vr=s.return}}var b=r.current;for(vr=b;vr!==null;){o=vr;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,vr=v;else e:for(o=b;vr!==null;){if(l=vr,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ng(9,l)}}catch(M){Ai(l,l.return,M)}if(l===o){vr=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,vr=E;break e}vr=l.return}}if(Rn=i,yc(),ka&&typeof ka.onPostCommitFiberRoot=="function")try{ka.onPostCommitFiberRoot(Y0,r)}catch{}n=!0}return n}finally{Vn=t,Fo.transition=e}}return!1}function L4(r,e,t){e=gh(t,e),e=mS(r,e,1),r=ql(r,e,1),e=Gs(),r!==null&&(Vd(r,1,e),so(r,e))}function Ai(r,e,t){if(r.tag===3)L4(r,r,t);else for(;e!==null;){if(e.tag===3){L4(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Hl===null||!Hl.has(n))){r=gh(t,r),r=gS(e,r,1),e=ql(e,r,1),r=Gs(),e!==null&&(Vd(e,1,r),so(e,r));break}}e=e.return}}function ST(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=Gs(),r.pingedLanes|=r.suspendedLanes&t,hs===r&&(vs&t)===t&&(ns===4||ns===3&&(vs&130023424)===vs&&500>Fi()-pv?Vc(r,0):dv|=t),so(r,e)}function LS(r,e){e===0&&(r.mode&1?(e=Op,Op<<=1,!(Op&130023424)&&(Op=4194304)):e=1);var t=Gs();r=nl(r,e),r!==null&&(Vd(r,e,t),so(r,t))}function kT(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),LS(r,t)}function ET(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(Xt(314))}n!==null&&n.delete(e),LS(r,t)}var DS;DS=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||no.current)ro=!0;else{if(!(r.lanes&t)&&!(e.flags&128))return ro=!1,fT(r,e,t);ro=!!(r.flags&131072)}else ro=!1,yi&&e.flags&1048576&&U8(e,Jm,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;wm(r,e),r=e.pendingProps;var i=fh(e,Fs.current);Xu(e,t),i=av(null,e,n,r,i,t);var s=lv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,io(n)?(s=!0,Xm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rv(e),i.updater=rg,e.stateNode=i,i._reactInternals=e,ay(e,n,r,t),e=uy(null,e,n,!0,s,t)):(e.tag=0,yi&&s&&Yb(e),Ws(null,e,i,t),e=e.child),e;case 16:n=e.elementType;e:{switch(wm(r,e),r=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=IT(n),r=Ko(n,r),i){case 0:e=cy(null,e,n,r,t);break e;case 1:e=C4(null,e,n,r,t);break e;case 11:e=k4(null,e,n,r,t);break e;case 14:e=E4(null,e,n,Ko(n.type,r),t);break e}throw Error(Xt(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ko(n,i),cy(r,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ko(n,i),C4(r,e,n,i,t);case 3:e:{if(wS(e),r===null)throw Error(Xt(387));n=e.pendingProps,s=e.memoizedState,i=s.element,G8(r,e),t0(e,n,null,t);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=gh(Error(Xt(423)),e),e=I4(r,e,n,t,i);break e}else if(n!==i){i=gh(Error(Xt(424)),e),e=I4(r,e,n,t,i);break e}else for(_o=Wl(e.stateNode.containerInfo.firstChild),So=e,yi=!0,Xo=null,t=q8(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(dh(),n===i){e=il(r,e,t);break e}Ws(r,e,n,t)}e=e.child}return e;case 5:return K8(e),r===null&&iy(e),n=e.type,i=e.pendingProps,s=r!==null?r.memoizedProps:null,o=i.children,Z2(n,i)?o=null:s!==null&&Z2(n,s)&&(e.flags|=32),vS(r,e),Ws(r,e,o,t),e.child;case 6:return r===null&&iy(e),null;case 13:return _S(r,e,t);case 4:return nv(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=ph(e,null,n,t):Ws(r,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ko(n,i),k4(r,e,n,i,t);case 7:return Ws(r,e,e.pendingProps,t),e.child;case 8:return Ws(r,e,e.pendingProps.children,t),e.child;case 12:return Ws(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ii(Zm,n._currentValue),n._currentValue=o,s!==null)if(ia(s.value,o)){if(s.children===i.children&&!no.current){e=il(r,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Ja(-1,t&-t),c.tag=2;var a=s.updateQueue;if(a!==null){a=a.shared;var u=a.pending;u===null?c.next=c:(c.next=u.next,u.next=c),a.pending=c}}s.lanes|=t,c=s.alternate,c!==null&&(c.lanes|=t),sy(s.return,t,e),l.lanes|=t;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Xt(341));o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),sy(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ws(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Xu(e,t),i=Bo(i),n=n(i),e.flags|=1,Ws(r,e,n,t),e.child;case 14:return n=e.type,i=Ko(n,e.pendingProps),i=Ko(n.type,i),E4(r,e,n,i,t);case 15:return yS(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ko(n,i),wm(r,e),e.tag=1,io(n)?(r=!0,Xm(e)):r=!1,Xu(e,t),pS(e,n,i),ay(e,n,i,t),uy(null,e,n,!0,r,t);case 19:return xS(r,e,t);case 22:return bS(r,e,t)}throw Error(Xt(156,e.tag))};function FS(r,e){return h8(r,e)}function CT(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oo(r,e,t,n){return new CT(r,e,t,n)}function bv(r){return r=r.prototype,!(!r||!r.isReactComponent)}function IT(r){if(typeof r=="function")return bv(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Db)return 11;if(r===Fb)return 14}return 2}function Kl(r,e){var t=r.alternate;return t===null?(t=Oo(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function Sm(r,e,t,n,i,s){var o=2;if(n=r,typeof r=="function")bv(r)&&(o=1);else if(typeof r=="string")o=5;else e:switch(r){case Pu:return $c(t.children,i,s,e);case Lb:o=8,i|=8;break;case j2:return r=Oo(12,t,e,i|2),r.elementType=j2,r.lanes=s,r;case R2:return r=Oo(13,t,e,i),r.elementType=R2,r.lanes=s,r;case P2:return r=Oo(19,t,e,i),r.elementType=P2,r.lanes=s,r;case K6:return sg(t,i,s,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case H6:o=10;break e;case G6:o=9;break e;case Db:o=11;break e;case Fb:o=14;break e;case Nl:o=16,n=null;break e}throw Error(Xt(130,r==null?r:typeof r,""))}return e=Oo(o,t,e,i),e.elementType=r,e.type=n,e.lanes=s,e}function $c(r,e,t,n){return r=Oo(7,r,n,e),r.lanes=t,r}function sg(r,e,t,n){return r=Oo(22,r,n,e),r.elementType=K6,r.lanes=t,r.stateNode={isHidden:!1},r}function R1(r,e,t){return r=Oo(6,r,null,e),r.lanes=t,r}function P1(r,e,t){return e=Oo(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function AT(r,e,t,n,i){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=d1(0),this.expirationTimes=d1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=d1(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vv(r,e,t,n,i,s,o,l,c){return r=new AT(r,e,t,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Oo(3,null,null,e),r.current=s,s.stateNode=r,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},rv(s),r}function TT(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ru,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function BS(r){if(!r)return ic;r=r._reactInternals;e:{if(lu(r)!==r||r.tag!==1)throw Error(Xt(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(io(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Xt(171))}if(r.tag===1){var t=r.type;if(io(t))return B8(r,t,e)}return e}function zS(r,e,t,n,i,s,o,l,c){return r=vv(t,n,!0,r,i,s,o,l,c),r.context=BS(null),t=r.current,n=Gs(),i=Gl(t),s=Ja(n,i),s.callback=e??null,ql(t,s,i),r.current.lanes=i,Vd(r,i,n),so(r,n),r}function og(r,e,t,n){var i=e.current,s=Gs(),o=Gl(i);return t=BS(t),e.context===null?e.context=t:e.pendingContext=t,e=Ja(s,o),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),r=ql(i,e,o),r!==null&&(ra(r,i,o,s),ym(r,i,o)),o}function c0(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function D4(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function wv(r,e){D4(r,e),(r=r.alternate)&&D4(r,e)}function NT(){return null}var US=typeof reportError=="function"?reportError:function(r){console.error(r)};function _v(r){this._internalRoot=r}ag.prototype.render=_v.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(Xt(409));og(r,e,null,null)};ag.prototype.unmount=_v.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;Jc(function(){og(null,r,null,null)}),e[rl]=null}};function ag(r){this._internalRoot=r}ag.prototype.unstable_scheduleHydration=function(r){if(r){var e=b8();r={blockedOn:null,target:r,priority:e};for(var t=0;t<Rl.length&&e!==0&&e<Rl[t].priority;t++);Rl.splice(t,0,r),t===0&&w8(r)}};function xv(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function lg(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function F4(){}function jT(r,e,t,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var a=c0(o);s.call(a)}}var o=zS(e,n,r,0,null,!1,!1,"",F4);return r._reactRootContainer=o,r[rl]=o.current,hd(r.nodeType===8?r.parentNode:r),Jc(),o}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var a=c0(c);l.call(a)}}var c=vv(r,0,!1,null,null,!1,!1,"",F4);return r._reactRootContainer=c,r[rl]=c.current,hd(r.nodeType===8?r.parentNode:r),Jc(function(){og(e,c,t,n)}),c}function cg(r,e,t,n,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var c=c0(o);l.call(c)}}og(e,o,r,i)}else o=jT(t,e,r,i,n);return c0(o)}g8=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=Tf(e.pendingLanes);t!==0&&(Ub(e,t|1),so(e,Fi()),!(Rn&6)&&(yh=Fi()+500,yc()))}break;case 13:Jc(function(){var n=nl(r,1);if(n!==null){var i=Gs();ra(n,r,1,i)}}),wv(r,1)}};Vb=function(r){if(r.tag===13){var e=nl(r,134217728);if(e!==null){var t=Gs();ra(e,r,134217728,t)}wv(r,134217728)}};y8=function(r){if(r.tag===13){var e=Gl(r),t=nl(r,e);if(t!==null){var n=Gs();ra(t,r,e,n)}wv(r,e)}};b8=function(){return Vn};v8=function(r,e){var t=Vn;try{return Vn=r,e()}finally{Vn=t}};$2=function(r,e,t){switch(e){case"input":if(L2(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var i=Z0(n);if(!i)throw Error(Xt(90));X6(n),L2(n,i)}}}break;case"textarea":J6(r,t);break;case"select":e=t.value,e!=null&&Hu(r,!!t.multiple,e,!1)}};s8=mv;o8=Jc;var RT={usingClientEntryPoint:!1,Events:[Wd,Du,Z0,n8,i8,mv]},vf={findFiberByHostInstance:Lc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PT={bundleType:vf.bundleType,version:vf.version,rendererPackageName:vf.rendererPackageName,rendererConfig:vf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ul.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=c8(r),r===null?null:r.stateNode},findFiberByHostInstance:vf.findFiberByHostInstance||NT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hp.isDisabled&&Hp.supportsFiber)try{Y0=Hp.inject(PT),ka=Hp}catch{}}Eo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RT;Eo.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xv(e))throw Error(Xt(200));return TT(r,e,null,t)};Eo.createRoot=function(r,e){if(!xv(r))throw Error(Xt(299));var t=!1,n="",i=US;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=vv(r,1,!1,null,null,t,!1,n,i),r[rl]=e.current,hd(r.nodeType===8?r.parentNode:r),new _v(e)};Eo.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(Xt(188)):(r=Object.keys(r).join(","),Error(Xt(268,r)));return r=c8(e),r=r===null?null:r.stateNode,r};Eo.flushSync=function(r){return Jc(r)};Eo.hydrate=function(r,e,t){if(!lg(e))throw Error(Xt(200));return cg(null,r,e,!0,t)};Eo.hydrateRoot=function(r,e,t){if(!xv(r))throw Error(Xt(405));var n=t!=null&&t.hydratedSources||null,i=!1,s="",o=US;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=zS(e,null,r,1,t??null,i,!1,s,o),r[rl]=e.current,hd(r),n)for(r=0;r<n.length;r++)t=n[r],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new ag(e)};Eo.render=function(r,e,t){if(!lg(e))throw Error(Xt(200));return cg(null,r,e,!1,t)};Eo.unmountComponentAtNode=function(r){if(!lg(r))throw Error(Xt(40));return r._reactRootContainer?(Jc(function(){cg(null,null,r,!1,function(){r._reactRootContainer=null,r[rl]=null})}),!0):!1};Eo.unstable_batchedUpdates=mv;Eo.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!lg(t))throw Error(Xt(200));if(r==null||r._reactInternals===void 0)throw Error(Xt(38));return cg(r,e,t,!1,n)};Eo.version="18.3.1-next-f1338f8080-20240426";function VS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VS)}catch(r){console.error(r)}}VS(),V6.exports=Eo;var MT=V6.exports,B4=MT;T2.createRoot=B4.createRoot,T2.hydrateRoot=B4.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wd(){return wd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},wd.apply(this,arguments)}var Ll;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Ll||(Ll={}));const z4="popstate";function OT(r){r===void 0&&(r={});function e(n,i){let{pathname:s,search:o,hash:l}=n.location;return xy("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:u0(i)}return DT(e,t,null,r)}function Ki(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Sv(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function LT(){return Math.random().toString(36).substr(2,8)}function U4(r,e){return{usr:r.state,key:r.key,idx:e}}function xy(r,e,t,n){return t===void 0&&(t=null),wd({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?Fh(e):e,{state:t,key:e&&e.key||n||LT()})}function u0(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Fh(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function DT(r,e,t,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,l=Ll.Pop,c=null,a=u();a==null&&(a=0,o.replaceState(wd({},o.state,{idx:a}),""));function u(){return(o.state||{idx:null}).idx}function d(){l=Ll.Pop;let p=u(),y=p==null?null:p-a;a=p,c&&c({action:l,location:g.location,delta:y})}function f(p,y){l=Ll.Push;let b=xy(g.location,p,y);a=u()+1;let v=U4(b,a),E=g.createHref(b);try{o.pushState(v,"",E)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(E)}s&&c&&c({action:l,location:g.location,delta:1})}function h(p,y){l=Ll.Replace;let b=xy(g.location,p,y);a=u();let v=U4(b,a),E=g.createHref(b);o.replaceState(v,"",E),s&&c&&c({action:l,location:g.location,delta:0})}function m(p){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof p=="string"?p:u0(p);return b=b.replace(/ $/,"%20"),Ki(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return l},get location(){return r(i,o)},listen(p){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(z4,d),c=p,()=>{i.removeEventListener(z4,d),c=null}},createHref(p){return e(i,p)},createURL:m,encodeLocation(p){let y=m(p);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:h,go(p){return o.go(p)}};return g}var V4;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(V4||(V4={}));function FT(r,e,t){return t===void 0&&(t="/"),BT(r,e,t)}function BT(r,e,t,n){let i=typeof e=="string"?Fh(e):e,s=kv(i.pathname||"/",t);if(s==null)return null;let o=$S(r);zT(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let a=JT(s);l=YT(o[c],a)}return l}function $S(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Ki(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let a=Yl([n,c.relativePath]),u=t.concat(c);s.children&&s.children.length>0&&(Ki(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+a+'".')),$S(s.children,e,u,a)),!(s.path==null&&!s.index)&&e.push({path:a,score:GT(a,s.index),routesMeta:u})};return r.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of WS(s.path))i(s,o,c)}),e}function WS(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=WS(n.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>r.startsWith("/")&&c===""?"/":c)}function zT(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:KT(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const UT=/^:[\w-]+$/,VT=3,$T=2,WT=1,qT=10,HT=-2,$4=r=>r==="*";function GT(r,e){let t=r.split("/"),n=t.length;return t.some($4)&&(n+=HT),e&&(n+=$T),t.filter(i=>!$4(i)).reduce((i,s)=>i+(UT.test(s)?VT:s===""?WT:qT),n)}function KT(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function YT(r,e,t){let{routesMeta:n}=r,i={},s="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],a=l===n.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=XT({path:c.relativePath,caseSensitive:c.caseSensitive,end:a},u),f=c.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Yl([s,d.pathname]),pathnameBase:nN(Yl([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Yl([s,d.pathnameBase]))}return o}function XT(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=QT(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((a,u,d)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let g=l[d]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=l[d];return h&&!m?a[f]=void 0:a[f]=(m||"").replace(/%2F/g,"/"),a},{}),pathname:s,pathnameBase:o,pattern:r}}function QT(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Sv(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function JT(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sv(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function kv(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}const ZT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eN=r=>ZT.test(r);function tN(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?Fh(r):r,s;if(t)if(eN(t))s=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),Sv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+t))}t.startsWith("/")?s=W4(t.substring(1),"/"):s=W4(t,e)}else s=e;return{pathname:s,search:iN(n),hash:sN(i)}}function W4(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function M1(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rN(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function qS(r,e){let t=rN(r);return e?t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function HS(r,e,t,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=Fh(r):(i=wd({},r),Ki(!i.pathname||!i.pathname.includes("?"),M1("?","pathname","search",i)),Ki(!i.pathname||!i.pathname.includes("#"),M1("#","pathname","hash",i)),Ki(!i.search||!i.search.includes("#"),M1("#","search","hash",i)));let s=r===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=t;else{let d=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}l=d>=0?e[d]:"/"}let c=tN(i,l),a=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(a||u)&&(c.pathname+="/"),c}const Yl=r=>r.join("/").replace(/\/\/+/g,"/"),nN=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),iN=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,sN=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function oN(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const GS=["post","put","patch","delete"];new Set(GS);const aN=["get",...GS];new Set(aN);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _d(){return _d=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},_d.apply(this,arguments)}const Ev=me.createContext(null),lN=me.createContext(null),cu=me.createContext(null),ug=me.createContext(null),uu=me.createContext({outlet:null,matches:[],isDataRoute:!1}),KS=me.createContext(null);function cN(r,e){let{relative:t}=e===void 0?{}:e;Hd()||Ki(!1);let{basename:n,navigator:i}=me.useContext(cu),{hash:s,pathname:o,search:l}=XS(r,{relative:t}),c=o;return n!=="/"&&(c=o==="/"?n:Yl([n,o])),i.createHref({pathname:c,search:l,hash:s})}function Hd(){return me.useContext(ug)!=null}function bc(){return Hd()||Ki(!1),me.useContext(ug).location}function YS(r){me.useContext(cu).static||me.useLayoutEffect(r)}function Bs(){let{isDataRoute:r}=me.useContext(uu);return r?xN():uN()}function uN(){Hd()||Ki(!1);let r=me.useContext(Ev),{basename:e,future:t,navigator:n}=me.useContext(cu),{matches:i}=me.useContext(uu),{pathname:s}=bc(),o=JSON.stringify(qS(i,t.v7_relativeSplatPath)),l=me.useRef(!1);return YS(()=>{l.current=!0}),me.useCallback(function(a,u){if(u===void 0&&(u={}),!l.current)return;if(typeof a=="number"){n.go(a);return}let d=HS(a,JSON.parse(o),s,u.relative==="path");r==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Yl([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,o,s,r])}function XS(r,e){let{relative:t}=e===void 0?{}:e,{future:n}=me.useContext(cu),{matches:i}=me.useContext(uu),{pathname:s}=bc(),o=JSON.stringify(qS(i,n.v7_relativeSplatPath));return me.useMemo(()=>HS(r,JSON.parse(o),s,t==="path"),[r,o,s,t])}function hN(r,e){return fN(r,e)}function fN(r,e,t,n){Hd()||Ki(!1);let{navigator:i}=me.useContext(cu),{matches:s}=me.useContext(uu),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let a=bc(),u;if(e){var d;let p=typeof e=="string"?Fh(e):e;c==="/"||(d=p.pathname)!=null&&d.startsWith(c)||Ki(!1),u=p}else u=a;let f=u.pathname||"/",h=f;if(c!=="/"){let p=c.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(p.length).join("/")}let m=FT(r,{pathname:h}),g=yN(m&&m.map(p=>Object.assign({},p,{params:Object.assign({},l,p.params),pathname:Yl([c,i.encodeLocation?i.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?c:Yl([c,i.encodeLocation?i.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),s,t,n);return e&&g?me.createElement(ug.Provider,{value:{location:_d({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ll.Pop}},g):g}function dN(){let r=_N(),e=oN(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return me.createElement(me.Fragment,null,me.createElement("h2",null,"Unexpected Application Error!"),me.createElement("h3",{style:{fontStyle:"italic"}},e),t?me.createElement("pre",{style:i},t):null,null)}const pN=me.createElement(dN,null);class mN extends me.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?me.createElement(uu.Provider,{value:this.props.routeContext},me.createElement(KS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gN(r){let{routeContext:e,match:t,children:n}=r,i=me.useContext(Ev);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),me.createElement(uu.Provider,{value:e},n)}function yN(r,e,t,n){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var s;if(!t)return null;if(t.errors)r=t.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,l=(i=t)==null?void 0:i.errors;if(l!=null){let u=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);u>=0||Ki(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,a=-1;if(t&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(a=u),d.route.id){let{loaderData:f,errors:h}=t,m=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||m){c=!0,a>=0?o=o.slice(0,a+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let h,m=!1,g=null,p=null;t&&(h=l&&d.route.id?l[d.route.id]:void 0,g=d.route.errorElement||pN,c&&(a<0&&f===0?(SN("route-fallback"),m=!0,p=null):a===f&&(m=!0,p=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),b=()=>{let v;return h?v=g:m?v=p:d.route.Component?v=me.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,me.createElement(gN,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:t!=null},children:v})};return t&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?me.createElement(mN,{location:t.location,revalidation:t.revalidation,component:g,error:h,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var QS=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(QS||{}),JS=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(JS||{});function bN(r){let e=me.useContext(Ev);return e||Ki(!1),e}function vN(r){let e=me.useContext(lN);return e||Ki(!1),e}function wN(r){let e=me.useContext(uu);return e||Ki(!1),e}function ZS(r){let e=wN(),t=e.matches[e.matches.length-1];return t.route.id||Ki(!1),t.route.id}function _N(){var r;let e=me.useContext(KS),t=vN(),n=ZS();return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function xN(){let{router:r}=bN(QS.UseNavigateStable),e=ZS(JS.UseNavigateStable),t=me.useRef(!1);return YS(()=>{t.current=!0}),me.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?r.navigate(i):r.navigate(i,_d({fromRouteId:e},s)))},[r,e])}const q4={};function SN(r,e,t){q4[r]||(q4[r]=!0)}function kN(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function ms(r){Ki(!1)}function EN(r){let{basename:e="/",children:t=null,location:n,navigationType:i=Ll.Pop,navigator:s,static:o=!1,future:l}=r;Hd()&&Ki(!1);let c=e.replace(/^\/*/,"/"),a=me.useMemo(()=>({basename:c,navigator:s,static:o,future:_d({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof n=="string"&&(n=Fh(n));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:m="default"}=n,g=me.useMemo(()=>{let p=kv(u,c);return p==null?null:{location:{pathname:p,search:d,hash:f,state:h,key:m},navigationType:i}},[c,u,d,f,h,m,i]);return g==null?null:me.createElement(cu.Provider,{value:a},me.createElement(ug.Provider,{children:t,value:g}))}function CN(r){let{children:e,location:t}=r;return hN(Sy(e),t)}new Promise(()=>{});function Sy(r,e){e===void 0&&(e=[]);let t=[];return me.Children.forEach(r,(n,i)=>{if(!me.isValidElement(n))return;let s=[...e,i];if(n.type===me.Fragment){t.push.apply(t,Sy(n.props.children,s));return}n.type!==ms&&Ki(!1),!n.props.index||!n.props.children||Ki(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Sy(n.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ky(){return ky=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ky.apply(this,arguments)}function IN(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function AN(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function TN(r,e){return r.button===0&&(!e||e==="_self")&&!AN(r)}const NN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jN="6";try{window.__reactRouterVersion=jN}catch{}const RN="startTransition",H4=SI[RN];function PN(r){let{basename:e,children:t,future:n,window:i}=r,s=me.useRef();s.current==null&&(s.current=OT({window:i,v5Compat:!0}));let o=s.current,[l,c]=me.useState({action:o.action,location:o.location}),{v7_startTransition:a}=n||{},u=me.useCallback(d=>{a&&H4?H4(()=>c(d)):c(d)},[c,a]);return me.useLayoutEffect(()=>o.listen(u),[o,u]),me.useEffect(()=>kN(n),[n]),me.createElement(EN,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,future:n})}const MN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ON=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gr=me.forwardRef(function(e,t){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:l,target:c,to:a,preventScrollReset:u,viewTransition:d}=e,f=IN(e,NN),{basename:h}=me.useContext(cu),m,g=!1;if(typeof a=="string"&&ON.test(a)&&(m=a,MN))try{let v=new URL(window.location.href),E=a.startsWith("//")?new URL(v.protocol+a):new URL(a),M=kv(E.pathname,h);E.origin===v.origin&&M!=null?a=M+E.search+E.hash:g=!0}catch{}let p=cN(a,{relative:i}),y=LN(a,{replace:o,state:l,target:c,preventScrollReset:u,relative:i,viewTransition:d});function b(v){n&&n(v),v.defaultPrevented||y(v)}return me.createElement("a",ky({},f,{href:m||p,onClick:g||s?n:b,ref:t,target:c}))});var G4;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(G4||(G4={}));var K4;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(K4||(K4={}));function LN(r,e){let{target:t,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,c=Bs(),a=bc(),u=XS(r,{relative:o});return me.useCallback(d=>{if(TN(d,t)){d.preventDefault();let f=n!==void 0?n:u0(a)===u0(u);c(r,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[a,c,u,n,i,t,r,s,o,l])}function e7(r,e){return function(){return r.apply(e,arguments)}}const{toString:DN}=Object.prototype,{getPrototypeOf:Cv}=Object,{iterator:hg,toStringTag:t7}=Symbol,fg=(r=>e=>{const t=DN.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),oa=r=>(r=r.toLowerCase(),e=>fg(e)===r),dg=r=>e=>typeof e===r,{isArray:Bh}=Array,bh=dg("undefined");function Gd(r){return r!==null&&!bh(r)&&r.constructor!==null&&!bh(r.constructor)&&oo(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const r7=oa("ArrayBuffer");function FN(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&r7(r.buffer),e}const BN=dg("string"),oo=dg("function"),n7=dg("number"),Kd=r=>r!==null&&typeof r=="object",zN=r=>r===!0||r===!1,km=r=>{if(fg(r)!=="object")return!1;const e=Cv(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(t7 in r)&&!(hg in r)},UN=r=>{if(!Kd(r)||Gd(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},VN=oa("Date"),$N=oa("File"),WN=oa("Blob"),qN=oa("FileList"),HN=r=>Kd(r)&&oo(r.pipe),GN=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||oo(r.append)&&((e=fg(r))==="formdata"||e==="object"&&oo(r.toString)&&r.toString()==="[object FormData]"))},KN=oa("URLSearchParams"),[YN,XN,QN,JN]=["ReadableStream","Request","Response","Headers"].map(oa),ZN=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yd(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,i;if(typeof r!="object"&&(r=[r]),Bh(r))for(n=0,i=r.length;n<i;n++)e.call(null,r[n],n,r);else{if(Gd(r))return;const s=t?Object.getOwnPropertyNames(r):Object.keys(r),o=s.length;let l;for(n=0;n<o;n++)l=s[n],e.call(null,r[l],l,r)}}function i7(r,e){if(Gd(r))return null;e=e.toLowerCase();const t=Object.keys(r);let n=t.length,i;for(;n-- >0;)if(i=t[n],e===i.toLowerCase())return i;return null}const Bc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,s7=r=>!bh(r)&&r!==Bc;function Ey(){const{caseless:r,skipUndefined:e}=s7(this)&&this||{},t={},n=(i,s)=>{const o=r&&i7(t,s)||s;km(t[o])&&km(i)?t[o]=Ey(t[o],i):km(i)?t[o]=Ey({},i):Bh(i)?t[o]=i.slice():(!e||!bh(i))&&(t[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Yd(arguments[i],n);return t}const ej=(r,e,t,{allOwnKeys:n}={})=>(Yd(e,(i,s)=>{t&&oo(i)?r[s]=e7(i,t):r[s]=i},{allOwnKeys:n}),r),tj=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),rj=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},nj=(r,e,t,n)=>{let i,s,o;const l={};if(e=e||{},r==null)return e;do{for(i=Object.getOwnPropertyNames(r),s=i.length;s-- >0;)o=i[s],(!n||n(o,r,e))&&!l[o]&&(e[o]=r[o],l[o]=!0);r=t!==!1&&Cv(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},ij=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const n=r.indexOf(e,t);return n!==-1&&n===t},sj=r=>{if(!r)return null;if(Bh(r))return r;let e=r.length;if(!n7(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},oj=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&Cv(Uint8Array)),aj=(r,e)=>{const n=(r&&r[hg]).call(r);let i;for(;(i=n.next())&&!i.done;){const s=i.value;e.call(r,s[0],s[1])}},lj=(r,e)=>{let t;const n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},cj=oa("HTMLFormElement"),uj=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,i){return n.toUpperCase()+i}),Y4=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),hj=oa("RegExp"),o7=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),n={};Yd(t,(i,s)=>{let o;(o=e(i,s,r))!==!1&&(n[s]=o||i)}),Object.defineProperties(r,n)},fj=r=>{o7(r,(e,t)=>{if(oo(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=r[t];if(oo(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},dj=(r,e)=>{const t={},n=i=>{i.forEach(s=>{t[s]=!0})};return Bh(r)?n(r):n(String(r).split(e)),t},pj=()=>{},mj=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function gj(r){return!!(r&&oo(r.append)&&r[t7]==="FormData"&&r[hg])}const yj=r=>{const e=new Array(10),t=(n,i)=>{if(Kd(n)){if(e.indexOf(n)>=0)return;if(Gd(n))return n;if(!("toJSON"in n)){e[i]=n;const s=Bh(n)?[]:{};return Yd(n,(o,l)=>{const c=t(o,i+1);!bh(c)&&(s[l]=c)}),e[i]=void 0,s}}return n};return t(r,0)},bj=oa("AsyncFunction"),vj=r=>r&&(Kd(r)||oo(r))&&oo(r.then)&&oo(r.catch),a7=((r,e)=>r?setImmediate:e?((t,n)=>(Bc.addEventListener("message",({source:i,data:s})=>{i===Bc&&s===t&&n.length&&n.shift()()},!1),i=>{n.push(i),Bc.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",oo(Bc.postMessage)),wj=typeof queueMicrotask<"u"?queueMicrotask.bind(Bc):typeof process<"u"&&process.nextTick||a7,_j=r=>r!=null&&oo(r[hg]),xt={isArray:Bh,isArrayBuffer:r7,isBuffer:Gd,isFormData:GN,isArrayBufferView:FN,isString:BN,isNumber:n7,isBoolean:zN,isObject:Kd,isPlainObject:km,isEmptyObject:UN,isReadableStream:YN,isRequest:XN,isResponse:QN,isHeaders:JN,isUndefined:bh,isDate:VN,isFile:$N,isBlob:WN,isRegExp:hj,isFunction:oo,isStream:HN,isURLSearchParams:KN,isTypedArray:oj,isFileList:qN,forEach:Yd,merge:Ey,extend:ej,trim:ZN,stripBOM:tj,inherits:rj,toFlatObject:nj,kindOf:fg,kindOfTest:oa,endsWith:ij,toArray:sj,forEachEntry:aj,matchAll:lj,isHTMLForm:cj,hasOwnProperty:Y4,hasOwnProp:Y4,reduceDescriptors:o7,freezeMethods:fj,toObjectSet:dj,toCamelCase:uj,noop:pj,toFiniteNumber:mj,findKey:i7,global:Bc,isContextDefined:s7,isSpecCompliantForm:gj,toJSONObject:yj,isAsyncFn:bj,isThenable:vj,setImmediate:a7,asap:wj,isIterable:_j};function on(r,e,t,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}xt.inherits(on,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xt.toJSONObject(this.config),code:this.code,status:this.status}}});const l7=on.prototype,c7={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{c7[r]={value:r}});Object.defineProperties(on,c7);Object.defineProperty(l7,"isAxiosError",{value:!0});on.from=(r,e,t,n,i,s)=>{const o=Object.create(l7);xt.toFlatObject(r,o,function(u){return u!==Error.prototype},a=>a!=="isAxiosError");const l=r&&r.message?r.message:"Error",c=e==null&&r?r.code:e;return on.call(o,l,c,t,n,i),r&&o.cause==null&&Object.defineProperty(o,"cause",{value:r,configurable:!0}),o.name=r&&r.name||"Error",s&&Object.assign(o,s),o};const xj=null;function Cy(r){return xt.isPlainObject(r)||xt.isArray(r)}function u7(r){return xt.endsWith(r,"[]")?r.slice(0,-2):r}function X4(r,e,t){return r?r.concat(e).map(function(i,s){return i=u7(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function Sj(r){return xt.isArray(r)&&!r.some(Cy)}const kj=xt.toFlatObject(xt,{},null,function(e){return/^is[A-Z]/.test(e)});function pg(r,e,t){if(!xt.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=xt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,p){return!xt.isUndefined(p[g])});const n=t.metaTokens,i=t.visitor||u,s=t.dots,o=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&xt.isSpecCompliantForm(e);if(!xt.isFunction(i))throw new TypeError("visitor must be a function");function a(m){if(m===null)return"";if(xt.isDate(m))return m.toISOString();if(xt.isBoolean(m))return m.toString();if(!c&&xt.isBlob(m))throw new on("Blob is not supported. Use a Buffer instead.");return xt.isArrayBuffer(m)||xt.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,g,p){let y=m;if(m&&!p&&typeof m=="object"){if(xt.endsWith(g,"{}"))g=n?g:g.slice(0,-2),m=JSON.stringify(m);else if(xt.isArray(m)&&Sj(m)||(xt.isFileList(m)||xt.endsWith(g,"[]"))&&(y=xt.toArray(m)))return g=u7(g),y.forEach(function(v,E){!(xt.isUndefined(v)||v===null)&&e.append(o===!0?X4([g],E,s):o===null?g:g+"[]",a(v))}),!1}return Cy(m)?!0:(e.append(X4(p,g,s),a(m)),!1)}const d=[],f=Object.assign(kj,{defaultVisitor:u,convertValue:a,isVisitable:Cy});function h(m,g){if(!xt.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(m),xt.forEach(m,function(y,b){(!(xt.isUndefined(y)||y===null)&&i.call(e,y,xt.isString(b)?b.trim():b,g,f))===!0&&h(y,g?g.concat(b):[b])}),d.pop()}}if(!xt.isObject(r))throw new TypeError("data must be an object");return h(r),e}function Q4(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Iv(r,e){this._pairs=[],r&&pg(r,this,e)}const h7=Iv.prototype;h7.append=function(e,t){this._pairs.push([e,t])};h7.toString=function(e){const t=e?function(n){return e.call(this,n,Q4)}:Q4;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function Ej(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function f7(r,e,t){if(!e)return r;const n=t&&t.encode||Ej;xt.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=xt.isURLSearchParams(e)?e.toString():new Iv(e,t).toString(n),s){const o=r.indexOf("#");o!==-1&&(r=r.slice(0,o)),r+=(r.indexOf("?")===-1?"?":"&")+s}return r}class J4{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){xt.forEach(this.handlers,function(n){n!==null&&e(n)})}}const d7={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Cj=typeof URLSearchParams<"u"?URLSearchParams:Iv,Ij=typeof FormData<"u"?FormData:null,Aj=typeof Blob<"u"?Blob:null,Tj={isBrowser:!0,classes:{URLSearchParams:Cj,FormData:Ij,Blob:Aj},protocols:["http","https","file","blob","url","data"]},Av=typeof window<"u"&&typeof document<"u",Iy=typeof navigator=="object"&&navigator||void 0,Nj=Av&&(!Iy||["ReactNative","NativeScript","NS"].indexOf(Iy.product)<0),jj=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Rj=Av&&window.location.href||"http://localhost",Pj=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Av,hasStandardBrowserEnv:Nj,hasStandardBrowserWebWorkerEnv:jj,navigator:Iy,origin:Rj},Symbol.toStringTag,{value:"Module"})),Ds={...Pj,...Tj};function Mj(r,e){return pg(r,new Ds.classes.URLSearchParams,{visitor:function(t,n,i,s){return Ds.isNode&&xt.isBuffer(t)?(this.append(n,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function Oj(r){return xt.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Lj(r){const e={},t=Object.keys(r);let n;const i=t.length;let s;for(n=0;n<i;n++)s=t[n],e[s]=r[s];return e}function p7(r){function e(t,n,i,s){let o=t[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=s>=t.length;return o=!o&&xt.isArray(i)?i.length:o,c?(xt.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!l):((!i[o]||!xt.isObject(i[o]))&&(i[o]=[]),e(t,n,i[o],s)&&xt.isArray(i[o])&&(i[o]=Lj(i[o])),!l)}if(xt.isFormData(r)&&xt.isFunction(r.entries)){const t={};return xt.forEachEntry(r,(n,i)=>{e(Oj(n),i,t,0)}),t}return null}function Dj(r,e,t){if(xt.isString(r))try{return(e||JSON.parse)(r),xt.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}const Xd={transitional:d7,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,s=xt.isObject(e);if(s&&xt.isHTMLForm(e)&&(e=new FormData(e)),xt.isFormData(e))return i?JSON.stringify(p7(e)):e;if(xt.isArrayBuffer(e)||xt.isBuffer(e)||xt.isStream(e)||xt.isFile(e)||xt.isBlob(e)||xt.isReadableStream(e))return e;if(xt.isArrayBufferView(e))return e.buffer;if(xt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Mj(e,this.formSerializer).toString();if((l=xt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return pg(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),Dj(e)):e}],transformResponse:[function(e){const t=this.transitional||Xd.transitional,n=t&&t.forcedJSONParsing,i=this.responseType==="json";if(xt.isResponse(e)||xt.isReadableStream(e))return e;if(e&&xt.isString(e)&&(n&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?on.from(l,on.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ds.classes.FormData,Blob:Ds.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xt.forEach(["delete","get","head","post","put","patch"],r=>{Xd.headers[r]={}});const Fj=xt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Bj=r=>{const e={};let t,n,i;return r&&r.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!t||e[t]&&Fj[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},Z4=Symbol("internals");function wf(r){return r&&String(r).trim().toLowerCase()}function Em(r){return r===!1||r==null?r:xt.isArray(r)?r.map(Em):String(r)}function zj(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}const Uj=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function O1(r,e,t,n,i){if(xt.isFunction(n))return n.call(this,e,t);if(i&&(e=t),!!xt.isString(e)){if(xt.isString(n))return e.indexOf(n)!==-1;if(xt.isRegExp(n))return n.test(e)}}function Vj(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function $j(r,e){const t=xt.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(i,s,o){return this[n].call(this,e,i,s,o)},configurable:!0})})}let ao=class{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function s(l,c,a){const u=wf(c);if(!u)throw new Error("header name must be a non-empty string");const d=xt.findKey(i,u);(!d||i[d]===void 0||a===!0||a===void 0&&i[d]!==!1)&&(i[d||c]=Em(l))}const o=(l,c)=>xt.forEach(l,(a,u)=>s(a,u,c));if(xt.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(xt.isString(e)&&(e=e.trim())&&!Uj(e))o(Bj(e),t);else if(xt.isObject(e)&&xt.isIterable(e)){let l={},c,a;for(const u of e){if(!xt.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[a=u[0]]=(c=l[a])?xt.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,t)}else e!=null&&s(t,e,n);return this}get(e,t){if(e=wf(e),e){const n=xt.findKey(this,e);if(n){const i=this[n];if(!t)return i;if(t===!0)return zj(i);if(xt.isFunction(t))return t.call(this,i,n);if(xt.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=wf(e),e){const n=xt.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||O1(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let i=!1;function s(o){if(o=wf(o),o){const l=xt.findKey(n,o);l&&(!t||O1(n,n[l],l,t))&&(delete n[l],i=!0)}}return xt.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const s=t[n];(!e||O1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,n={};return xt.forEach(this,(i,s)=>{const o=xt.findKey(n,s);if(o){t[o]=Em(i),delete t[s];return}const l=e?Vj(s):String(s).trim();l!==s&&delete t[s],t[l]=Em(i),n[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return xt.forEach(this,(n,i)=>{n!=null&&n!==!1&&(t[i]=e&&xt.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[Z4]=this[Z4]={accessors:{}}).accessors,i=this.prototype;function s(o){const l=wf(o);n[l]||($j(i,o),n[l]=!0)}return xt.isArray(e)?e.forEach(s):s(e),this}};ao.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);xt.reduceDescriptors(ao.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}});xt.freezeMethods(ao);function L1(r,e){const t=this||Xd,n=e||t,i=ao.from(n.headers);let s=n.data;return xt.forEach(r,function(l){s=l.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function m7(r){return!!(r&&r.__CANCEL__)}function zh(r,e,t){on.call(this,r??"canceled",on.ERR_CANCELED,e,t),this.name="CanceledError"}xt.inherits(zh,on,{__CANCEL__:!0});function g7(r,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new on("Request failed with status code "+t.status,[on.ERR_BAD_REQUEST,on.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Wj(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function qj(r,e){r=r||10;const t=new Array(r),n=new Array(r);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(c){const a=Date.now(),u=n[s];o||(o=a),t[i]=c,n[i]=a;let d=s,f=0;for(;d!==i;)f+=t[d++],d=d%r;if(i=(i+1)%r,i===s&&(s=(s+1)%r),a-o<e)return;const h=u&&a-u;return h?Math.round(f*1e3/h):void 0}}function Hj(r,e){let t=0,n=1e3/e,i,s;const o=(a,u=Date.now())=>{t=u,i=null,s&&(clearTimeout(s),s=null),r(...a)};return[(...a)=>{const u=Date.now(),d=u-t;d>=n?o(a,u):(i=a,s||(s=setTimeout(()=>{s=null,o(i)},n-d)))},()=>i&&o(i)]}const h0=(r,e,t=3)=>{let n=0;const i=qj(50,250);return Hj(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,c=o-n,a=i(c),u=o<=l;n=o;const d={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:a||void 0,estimated:a&&l&&u?(l-o)/a:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};r(d)},t)},e3=(r,e)=>{const t=r!=null;return[n=>e[0]({lengthComputable:t,total:r,loaded:n}),e[1]]},t3=r=>(...e)=>xt.asap(()=>r(...e)),Gj=Ds.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,Ds.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(Ds.origin),Ds.navigator&&/(msie|trident)/i.test(Ds.navigator.userAgent)):()=>!0,Kj=Ds.hasStandardBrowserEnv?{write(r,e,t,n,i,s,o){if(typeof document>"u")return;const l=[`${r}=${encodeURIComponent(e)}`];xt.isNumber(t)&&l.push(`expires=${new Date(t).toUTCString()}`),xt.isString(n)&&l.push(`path=${n}`),xt.isString(i)&&l.push(`domain=${i}`),s===!0&&l.push("secure"),xt.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(r){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Yj(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function Xj(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function y7(r,e,t){let n=!Yj(e);return r&&(n||t==!1)?Xj(r,e):e}const r3=r=>r instanceof ao?{...r}:r;function Zc(r,e){e=e||{};const t={};function n(a,u,d,f){return xt.isPlainObject(a)&&xt.isPlainObject(u)?xt.merge.call({caseless:f},a,u):xt.isPlainObject(u)?xt.merge({},u):xt.isArray(u)?u.slice():u}function i(a,u,d,f){if(xt.isUndefined(u)){if(!xt.isUndefined(a))return n(void 0,a,d,f)}else return n(a,u,d,f)}function s(a,u){if(!xt.isUndefined(u))return n(void 0,u)}function o(a,u){if(xt.isUndefined(u)){if(!xt.isUndefined(a))return n(void 0,a)}else return n(void 0,u)}function l(a,u,d){if(d in e)return n(a,u);if(d in r)return n(void 0,a)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(a,u,d)=>i(r3(a),r3(u),d,!0)};return xt.forEach(Object.keys({...r,...e}),function(u){const d=c[u]||i,f=d(r[u],e[u],u);xt.isUndefined(f)&&d!==l||(t[u]=f)}),t}const b7=r=>{const e=Zc({},r);let{data:t,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:l}=e;if(e.headers=o=ao.from(o),e.url=f7(y7(e.baseURL,e.url,e.allowAbsoluteUrls),r.params,r.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),xt.isFormData(t)){if(Ds.hasStandardBrowserEnv||Ds.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(xt.isFunction(t.getHeaders)){const c=t.getHeaders(),a=["content-type","content-length"];Object.entries(c).forEach(([u,d])=>{a.includes(u.toLowerCase())&&o.set(u,d)})}}if(Ds.hasStandardBrowserEnv&&(n&&xt.isFunction(n)&&(n=n(e)),n||n!==!1&&Gj(e.url))){const c=i&&s&&Kj.read(s);c&&o.set(i,c)}return e},Qj=typeof XMLHttpRequest<"u",Jj=Qj&&function(r){return new Promise(function(t,n){const i=b7(r);let s=i.data;const o=ao.from(i.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:a}=i,u,d,f,h,m;function g(){h&&h(),m&&m(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let p=new XMLHttpRequest;p.open(i.method.toUpperCase(),i.url,!0),p.timeout=i.timeout;function y(){if(!p)return;const v=ao.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),M={data:!l||l==="text"||l==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:v,config:r,request:p};g7(function($){t($),g()},function($){n($),g()},M),p=null}"onloadend"in p?p.onloadend=y:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(y)},p.onabort=function(){p&&(n(new on("Request aborted",on.ECONNABORTED,r,p)),p=null)},p.onerror=function(E){const M=E&&E.message?E.message:"Network Error",W=new on(M,on.ERR_NETWORK,r,p);W.event=E||null,n(W),p=null},p.ontimeout=function(){let E=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const M=i.transitional||d7;i.timeoutErrorMessage&&(E=i.timeoutErrorMessage),n(new on(E,M.clarifyTimeoutError?on.ETIMEDOUT:on.ECONNABORTED,r,p)),p=null},s===void 0&&o.setContentType(null),"setRequestHeader"in p&&xt.forEach(o.toJSON(),function(E,M){p.setRequestHeader(M,E)}),xt.isUndefined(i.withCredentials)||(p.withCredentials=!!i.withCredentials),l&&l!=="json"&&(p.responseType=i.responseType),a&&([f,m]=h0(a,!0),p.addEventListener("progress",f)),c&&p.upload&&([d,h]=h0(c),p.upload.addEventListener("progress",d),p.upload.addEventListener("loadend",h)),(i.cancelToken||i.signal)&&(u=v=>{p&&(n(!v||v.type?new zh(null,r,p):v),p.abort(),p=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const b=Wj(i.url);if(b&&Ds.protocols.indexOf(b)===-1){n(new on("Unsupported protocol "+b+":",on.ERR_BAD_REQUEST,r));return}p.send(s||null)})},Zj=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let n=new AbortController,i;const s=function(a){if(!i){i=!0,l();const u=a instanceof Error?a:this.reason;n.abort(u instanceof on?u:new zh(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new on(`timeout ${e} of ms exceeded`,on.ETIMEDOUT))},e);const l=()=>{r&&(o&&clearTimeout(o),o=null,r.forEach(a=>{a.unsubscribe?a.unsubscribe(s):a.removeEventListener("abort",s)}),r=null)};r.forEach(a=>a.addEventListener("abort",s));const{signal:c}=n;return c.unsubscribe=()=>xt.asap(l),c}},eR=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let n=0,i;for(;n<t;)i=n+e,yield r.slice(n,i),n=i},tR=async function*(r,e){for await(const t of rR(r))yield*eR(t,e)},rR=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},n3=(r,e,t,n)=>{const i=tR(r,e);let s=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:a,value:u}=await i.next();if(a){l(),c.close();return}let d=u.byteLength;if(t){let f=s+=d;t(f)}c.enqueue(new Uint8Array(u))}catch(a){throw l(a),a}},cancel(c){return l(c),i.return()}},{highWaterMark:2})},i3=64*1024,{isFunction:Gp}=xt,nR=(({Request:r,Response:e})=>({Request:r,Response:e}))(xt.global),{ReadableStream:s3,TextEncoder:o3}=xt.global,a3=(r,...e)=>{try{return!!r(...e)}catch{return!1}},iR=r=>{r=xt.merge.call({skipUndefined:!0},nR,r);const{fetch:e,Request:t,Response:n}=r,i=e?Gp(e):typeof fetch=="function",s=Gp(t),o=Gp(n);if(!i)return!1;const l=i&&Gp(s3),c=i&&(typeof o3=="function"?(m=>g=>m.encode(g))(new o3):async m=>new Uint8Array(await new t(m).arrayBuffer())),a=s&&l&&a3(()=>{let m=!1;const g=new t(Ds.origin,{body:new s3,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!g}),u=o&&l&&a3(()=>xt.isReadableStream(new n("").body)),d={stream:u&&(m=>m.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!d[m]&&(d[m]=(g,p)=>{let y=g&&g[m];if(y)return y.call(g);throw new on(`Response type '${m}' is not supported`,on.ERR_NOT_SUPPORT,p)})});const f=async m=>{if(m==null)return 0;if(xt.isBlob(m))return m.size;if(xt.isSpecCompliantForm(m))return(await new t(Ds.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(xt.isArrayBufferView(m)||xt.isArrayBuffer(m))return m.byteLength;if(xt.isURLSearchParams(m)&&(m=m+""),xt.isString(m))return(await c(m)).byteLength},h=async(m,g)=>{const p=xt.toFiniteNumber(m.getContentLength());return p??f(g)};return async m=>{let{url:g,method:p,data:y,signal:b,cancelToken:v,timeout:E,onDownloadProgress:M,onUploadProgress:W,responseType:$,headers:N,withCredentials:j="same-origin",fetchOptions:F}=b7(m),P=e||fetch;$=$?($+"").toLowerCase():"text";let L=Zj([b,v&&v.toAbortSignal()],E),k=null;const R=L&&L.unsubscribe&&(()=>{L.unsubscribe()});let C;try{if(W&&a&&p!=="get"&&p!=="head"&&(C=await h(N,y))!==0){let z=new t(g,{method:"POST",body:y,duplex:"half"}),A;if(xt.isFormData(y)&&(A=z.headers.get("content-type"))&&N.setContentType(A),z.body){const[H,K]=e3(C,h0(t3(W)));y=n3(z.body,i3,H,K)}}xt.isString(j)||(j=j?"include":"omit");const _=s&&"credentials"in t.prototype,x={...F,signal:L,method:p.toUpperCase(),headers:N.normalize().toJSON(),body:y,duplex:"half",credentials:_?j:void 0};k=s&&new t(g,x);let w=await(s?P(k,F):P(g,x));const S=u&&($==="stream"||$==="response");if(u&&(M||S&&R)){const z={};["status","statusText","headers"].forEach(J=>{z[J]=w[J]});const A=xt.toFiniteNumber(w.headers.get("content-length")),[H,K]=M&&e3(A,h0(t3(M),!0))||[];w=new n(n3(w.body,i3,H,()=>{K&&K(),R&&R()}),z)}$=$||"text";let I=await d[xt.findKey(d,$)||"text"](w,m);return!S&&R&&R(),await new Promise((z,A)=>{g7(z,A,{data:I,headers:ao.from(w.headers),status:w.status,statusText:w.statusText,config:m,request:k})})}catch(_){throw R&&R(),_&&_.name==="TypeError"&&/Load failed|fetch/i.test(_.message)?Object.assign(new on("Network Error",on.ERR_NETWORK,m,k),{cause:_.cause||_}):on.from(_,_&&_.code,m,k)}}},sR=new Map,v7=r=>{let e=r&&r.env||{};const{fetch:t,Request:n,Response:i}=e,s=[n,i,t];let o=s.length,l=o,c,a,u=sR;for(;l--;)c=s[l],a=u.get(c),a===void 0&&u.set(c,a=l?new Map:iR(e)),u=a;return a};v7();const Tv={http:xj,xhr:Jj,fetch:{get:v7}};xt.forEach(Tv,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const l3=r=>`- ${r}`,oR=r=>xt.isFunction(r)||r===null||r===!1;function aR(r,e){r=xt.isArray(r)?r:[r];const{length:t}=r;let n,i;const s={};for(let o=0;o<t;o++){n=r[o];let l;if(i=n,!oR(n)&&(i=Tv[(l=String(n)).toLowerCase()],i===void 0))throw new on(`Unknown adapter '${l}'`);if(i&&(xt.isFunction(i)||(i=i.get(e))))break;s[l||"#"+o]=i}if(!i){const o=Object.entries(s).map(([c,a])=>`adapter ${c} `+(a===!1?"is not supported by the environment":"is not available in the build"));let l=t?o.length>1?`since :
`+o.map(l3).join(`
`):" "+l3(o[0]):"as no adapter specified";throw new on("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i}const w7={getAdapter:aR,adapters:Tv};function D1(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new zh(null,r)}function c3(r){return D1(r),r.headers=ao.from(r.headers),r.data=L1.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),w7.getAdapter(r.adapter||Xd.adapter,r)(r).then(function(n){return D1(r),n.data=L1.call(r,r.transformResponse,n),n.headers=ao.from(n.headers),n},function(n){return m7(n)||(D1(r),n&&n.response&&(n.response.data=L1.call(r,r.transformResponse,n.response),n.response.headers=ao.from(n.response.headers))),Promise.reject(n)})}const _7="1.13.2",mg={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{mg[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});const u3={};mg.transitional=function(e,t,n){function i(s,o){return"[Axios v"+_7+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,l)=>{if(e===!1)throw new on(i(o," has been removed"+(t?" in "+t:"")),on.ERR_DEPRECATED);return t&&!u3[o]&&(u3[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,l):!0}};mg.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function lR(r,e,t){if(typeof r!="object")throw new on("options must be an object",on.ERR_BAD_OPTION_VALUE);const n=Object.keys(r);let i=n.length;for(;i-- >0;){const s=n[i],o=e[s];if(o){const l=r[s],c=l===void 0||o(l,s,r);if(c!==!0)throw new on("option "+s+" must be "+c,on.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new on("Unknown option "+s,on.ERR_BAD_OPTION)}}const Cm={assertOptions:lR,validators:mg},da=Cm.validators;let Wc=class{constructor(e){this.defaults=e||{},this.interceptors={request:new J4,response:new J4}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Zc(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:s}=t;n!==void 0&&Cm.assertOptions(n,{silentJSONParsing:da.transitional(da.boolean),forcedJSONParsing:da.transitional(da.boolean),clarifyTimeoutError:da.transitional(da.boolean)},!1),i!=null&&(xt.isFunction(i)?t.paramsSerializer={serialize:i}:Cm.assertOptions(i,{encode:da.function,serialize:da.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Cm.assertOptions(t,{baseUrl:da.spelling("baseURL"),withXsrfToken:da.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&xt.merge(s.common,s[t.method]);s&&xt.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),t.headers=ao.concat(o,s);const l=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(t)===!1||(c=c&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const a=[];this.interceptors.response.forEach(function(g){a.push(g.fulfilled,g.rejected)});let u,d=0,f;if(!c){const m=[c3.bind(this),void 0];for(m.unshift(...l),m.push(...a),f=m.length,u=Promise.resolve(t);d<f;)u=u.then(m[d++],m[d++]);return u}f=l.length;let h=t;for(;d<f;){const m=l[d++],g=l[d++];try{h=m(h)}catch(p){g.call(this,p);break}}try{u=c3.call(this,h)}catch(m){return Promise.reject(m)}for(d=0,f=a.length;d<f;)u=u.then(a[d++],a[d++]);return u}getUri(e){e=Zc(this.defaults,e);const t=y7(e.baseURL,e.url,e.allowAbsoluteUrls);return f7(t,e.params,e.paramsSerializer)}};xt.forEach(["delete","get","head","options"],function(e){Wc.prototype[e]=function(t,n){return this.request(Zc(n||{},{method:e,url:t,data:(n||{}).data}))}});xt.forEach(["post","put","patch"],function(e){function t(n){return function(s,o,l){return this.request(Zc(l||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Wc.prototype[e]=t(),Wc.prototype[e+"Form"]=t(!0)});let cR=class x7{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(l=>{n.subscribe(l),s=l}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,l){n.reason||(n.reason=new zh(s,o,l),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new x7(function(i){e=i}),cancel:e}}};function uR(r){return function(t){return r.apply(null,t)}}function hR(r){return xt.isObject(r)&&r.isAxiosError===!0}const Ay={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ay).forEach(([r,e])=>{Ay[e]=r});function S7(r){const e=new Wc(r),t=e7(Wc.prototype.request,e);return xt.extend(t,Wc.prototype,e,{allOwnKeys:!0}),xt.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return S7(Zc(r,i))},t}const qe=S7(Xd);qe.Axios=Wc;qe.CanceledError=zh;qe.CancelToken=cR;qe.isCancel=m7;qe.VERSION=_7;qe.toFormData=pg;qe.AxiosError=on;qe.Cancel=qe.CanceledError;qe.all=function(e){return Promise.all(e)};qe.spread=uR;qe.isAxiosError=hR;qe.mergeConfig=Zc;qe.AxiosHeaders=ao;qe.formToJSON=r=>p7(xt.isHTMLForm(r)?new FormData(r):r);qe.getAdapter=w7.getAdapter;qe.HttpStatusCode=Ay;qe.default=qe;const{Axios:nq,AxiosError:iq,CanceledError:sq,isCancel:oq,CancelToken:aq,VERSION:lq,all:cq,Cancel:uq,isAxiosError:hq,spread:fq,toFormData:dq,AxiosHeaders:pq,HttpStatusCode:mq,formToJSON:gq,getAdapter:yq,mergeConfig:bq}=qe,fR={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BACKEND_BASE:"http://127.0.0.1:5000"};var f0={};const h3="",dR=typeof import.meta<"u"&&fR&&"http://127.0.0.1:5000",pR=typeof process<"u"&&f0&&f0.VITE_BACKEND_BASE,mR=typeof process<"u"&&f0&&f0.REACT_APP_BACKEND_BASE,gR=dR||pR||mR||h3||h3,Io=String(gR).trim().replace(/\/$/,"");function f3(){const[r,e]=me.useState(""),[t,n]=me.useState(""),i=Bs(),s=async o=>{o.preventDefault(),console.log("LOGIN CLICKED");try{const l=await qe.post(`${Io}/api/login`,{username:r,password:t});if(console.log("Backend response:",l.data),l.data.success){const c={adminId:l.data.adminId,userId:l.data.userId,name:l.data.name,profileImage:l.data.profileImage};localStorage.setItem("admin",JSON.stringify(c)),console.log("Saved admin, navigating now..."),i("/dashboard")}}catch(l){console.error("Login failed:",l)}};return T.jsx("div",{className:"auth-container",children:T.jsxs("div",{className:"auth-box",children:[T.jsx("h2",{children:"Login"}),T.jsx("input",{type:"text",placeholder:"Username",value:r,onChange:o=>e(o.target.value)}),T.jsx("input",{type:"password",placeholder:"Password",value:t,onChange:o=>n(o.target.value)}),T.jsx("form",{onSubmit:s,children:T.jsx("button",{type:"submit",children:"Login"})})]})})}var k7={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},d3=ea.createContext&&ea.createContext(k7),yR=["attr","size","title"];function bR(r,e){if(r==null)return{};var t=vR(r,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function vR(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function d0(){return d0=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},d0.apply(this,arguments)}function p3(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function p0(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?p3(Object(t),!0).forEach(function(n){wR(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):p3(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function wR(r,e,t){return e=_R(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _R(r){var e=xR(r,"string");return typeof e=="symbol"?e:e+""}function xR(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function E7(r){return r&&r.map((e,t)=>ea.createElement(e.tag,p0({key:t},e.attr),E7(e.child)))}function bi(r){return e=>ea.createElement(SR,d0({attr:p0({},r.attr)},e),E7(r.child))}function SR(r){var e=t=>{var{attr:n,size:i,title:s}=r,o=bR(r,yR),l=i||t.size||"1em",c;return t.className&&(c=t.className),r.className&&(c=(c?c+" ":"")+r.className),ea.createElement("svg",d0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,o,{className:c,style:p0(p0({color:r.color||t.color},t.style),r.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&ea.createElement("title",null,s),r.children)};return d3!==void 0?ea.createElement(d3.Consumer,null,t=>e(t)):e(k7)}function C7(r){return bi({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zM338 304c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zm513.9 437.1a8.11 8.11 0 0 1-5.2 1.9H177.2c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2l170.3-202c2.8-3.4 7.9-3.8 11.3-1 .3.3.7.6 1 1l99.4 118 158.1-187.5c2.8-3.4 7.9-3.8 11.3-1 .3.3.7.6 1 1l229.6 271.6c2.6 3.3 2.2 8.4-1.2 11.2z"},child:[]}]})(r)}function vc(r){return bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.55 8C116.52 8 8 110.34 8 248.57c0 72.3 29.71 134.78 78.07 177.94 8.35 7.51 6.63 11.86 8.05 58.23A19.92 19.92 0 0 0 122 502.31c52.91-23.3 53.59-25.14 62.56-22.7C337.85 521.8 504 423.7 504 248.57 504 110.34 396.59 8 256.55 8zm149.24 185.13l-73 115.57a37.37 37.37 0 0 1-53.91 9.93l-58.08-43.47a15 15 0 0 0-18 0l-78.37 59.44c-10.46 7.93-24.16-4.6-17.11-15.67l73-115.57a37.36 37.36 0 0 1 53.91-9.93l58.06 43.46a15 15 0 0 0 18 0l78.41-59.38c10.44-7.98 24.14 4.54 17.09 15.62z"},child:[]}]})(r)}function kR(r){return bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(r)}function wc(r){return bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(r)}function sl(r){return bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(r)}function Pn(r){return bi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96-96 42.98-96 96 42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"},child:[]}]})(r)}function ER(r){return bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(r)}function vh(r){return bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(r)}function CR(r){return bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(r)}function _c(r){return bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(r)}function Nv(r){return bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(r)}function m3(r){return bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(r)}function Ca(r){return bi({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(r)}function IR(r){return bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(r)}function xc(r){return bi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(r)}function AR(r){return bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"},child:[]}]})(r)}function gg(r){return bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(r)}function m0(r){return bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(r)}function jv(r){return bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(r)}function Sc(r){return bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(r)}function TR(r){return bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(r)}function I7(r){return bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(r)}function F1(r){return bi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(r)}function NR(r){return bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"},child:[]}]})(r)}function jR(){var re,be,ie;const r=`${Io}/api`,e=(()=>{try{return JSON.parse(localStorage.getItem("admin"))||{}}catch{return{}}})(),[t,n]=me.useState({adminId:e.adminId||"",userId:e.userId||e.userId||"",name:e.name||e.username||"Admin",username:e.username||"",profileImage:e.profileImage||"/default-profile.png",isActive:e.isActive||!1}),[i,s]=me.useState([]),[o,l]=me.useState(""),[c,a]=me.useState(null),u=me.useRef(null),[d,f]=me.useState([]),[h,m]=me.useState(!1),[g,p]=me.useState([]),[y,b]=me.useState({}),[v,E]=me.useState([]),[M,W]=me.useState(!1),[$,N]=me.useState(null),[j,F]=me.useState(!1),[P,L]=me.useState({}),k=bc();(re=k.state)==null||re.scrollToPostId;const R=(be=k.state)==null?void 0:be.postId,C=(ie=k.state)==null?void 0:ie.postId,[_,x]=me.useState([]),[w,S]=me.useState(!0),I=t.userId,[z,A]=me.useState(!1),[H,K]=me.useState([]),J=Bs();me.useEffect(()=>{if(C){const le=document.getElementById(`post-${C}`);le&&le.scrollIntoView({behavior:"smooth"})}},[C]);const V=async()=>{var ae,Se,ve;const le=localStorage.getItem("admin");if(!le){S(!1);return}try{const ke=JSON.parse(le);if(!ke.adminId){localStorage.removeItem("admin"),S(!1);return}const Ne=await qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/School_Admins/${ke.adminId}.json`);if(!Ne.data){localStorage.removeItem("admin"),S(!1);return}const ze=await qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users/${Ne.data.userId}.json`);n({adminId:ke.adminId,userId:Ne.data.userId,name:((ae=ze.data)==null?void 0:ae.name)||"Admin",username:((Se=ze.data)==null?void 0:Se.username)||"",profileImage:((ve=ze.data)==null?void 0:ve.profileImage)||"/default-profile.png"})}catch{localStorage.removeItem("admin")}S(!1)},X=async()=>{try{const le=await qe.get(`${r}/get_posts`);console.log(le.data);const ae=le.data.sort((Se,ve)=>new Date(ve.time)-new Date(Se.time));s(ae)}catch(le){console.error("Error fetching posts:",le)}},D=async()=>{if(!t.adminId)return;const le={};try{const Se=(await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json")).data||{},ve=De=>Object.values(Se).find(He=>He.userId===De),ke=async De=>{const He=`${t.userId}_${De}`,We=`${De}_${t.userId}`,[et,St]=await Promise.all([qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${He}/messages.json`),qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${We}/messages.json`)]);return[...Object.values(et.data||{}),...Object.values(St.data||{})].filter(At=>At.receiverId===t.userId&&!At.seen).length},Ne=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json");for(const De in Ne.data||{}){const He=Ne.data[De],We=await ke(He.userId);if(We>0){const et=ve(He.userId);le[He.userId]={type:"teacher",name:(et==null?void 0:et.name)||"Teacher",profileImage:(et==null?void 0:et.profileImage)||"/default-profile.png",count:We}}}const ze=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Students.json");for(const De in ze.data||{}){const He=ze.data[De],We=await ke(He.userId);if(We>0){const et=ve(He.userId);le[He.userId]={type:"student",name:(et==null?void 0:et.name)||He.name||"Student",profileImage:(et==null?void 0:et.profileImage)||He.profileImage||"/default-profile.png",count:We}}}const we=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Parents.json");for(const De in we.data||{}){const He=we.data[De],We=await ke(He.userId);if(We>0){const et=ve(He.userId);le[He.userId]={type:"parent",name:(et==null?void 0:et.name)||He.name||"Parent",profileImage:(et==null?void 0:et.profileImage)||He.profileImage||"/default-profile.png",count:We}}}L(le)}catch(ae){console.error("Unread fetch failed:",ae)}};me.useEffect(()=>{const le=ae=>{!ae.target.closest(".icon-circle")&&!ae.target.closest(".messenger-dropdown")&&W(!1)};return document.addEventListener("click",le),()=>document.removeEventListener("click",le)},[]),me.useEffect(()=>{if(!t.adminId)return;D();const le=setInterval(D,5e3);return()=>clearInterval(le)},[t.adminId]),me.useEffect(()=>{if(!t.userId)return;(async()=>{try{const Se=(await qe.get(`${r}/get_posts`)).data.filter(ve=>!ve.seenBy||!ve.seenBy[t.userId]);K(Se)}catch(ae){console.error(ae)}})()},[t.userId]),me.useEffect(()=>{(async()=>{try{const[ae,Se]=await Promise.all([qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json"),qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json")]),ve=ae.data||{},ke=Se.data||{},Ne=Object.keys(ve).map(De=>{const He=ve[De],We=ke[He.userId]||{};return{teacherId:De,userId:He.userId,name:We.name||"No Name",profileImage:We.profileImage||"/default-profile.png"}});p(Ne);const ze={},we=[];for(const De of Ne){const He=`${I}_${De.userId}`,We=await qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${He}/messages.json`),et=Object.values(We.data||{}).map(lt=>({...lt,sender:lt.senderId===I?"admin":"teacher"}));we.push(...et);const St=et.filter(lt=>lt.receiverId===I&&!lt.seen).length;St>0&&(ze[De.userId]=St)}E(we),b(ze)}catch(ae){console.error(ae)}})()},[I]);const O=async le=>{A(!1);try{await qe.post(`${r}/mark_post_seen`,{postId:le.postId,userId:t.userId}),K(ae=>ae.filter(Se=>Se.postId!==le.postId)),s(ae=>ae.map(Se=>Se.postId===le.postId?{...Se,seenBy:{...Se.seenBy||{},[t.userId]:!0}}:Se)),setTimeout(()=>{const ae=document.getElementById(`post-${le.postId}`);ae&&(ae.scrollIntoView({behavior:"smooth",block:"center"}),ae.style.backgroundColor="#fff9c4",setTimeout(()=>ae.style.backgroundColor="",1500))},200)}catch(ae){console.error("Error opening post notification:",ae)}};me.useEffect(()=>{if(R){const le=document.getElementById(`post-${R}`);le&&(le.scrollIntoView({behavior:"smooth"}),le.style.backgroundColor="#ffffe0",setTimeout(()=>le.style.backgroundColor="",2e3))}},[R]),me.useEffect(()=>{const le=ae=>{!ae.target.closest(".icon-circle")&&!ae.target.closest(".notification-dropdown")&&A(!1)};return document.addEventListener("click",le),()=>document.removeEventListener("click",le)},[]),me.useEffect(()=>{V(),X()},[]),me.useEffect(()=>{w||t.userId||(console.log("No admin found, redirecting to login"),J("/login",{replace:!0}))},[w,t.userId]);const G=async()=>{if(!o&&!c)return;if(!t.adminId||!t.userId){alert("Session expired");return}const le=new FormData;le.append("message",o),le.append("adminId",t.adminId),le.append("userId",t.userId),le.append("adminName",t.name),le.append("adminProfile",t.profileImage),c&&le.append("post_media",c),await qe.post(`${r}/create_post`,le),l(""),a(null),u.current&&(u.current.value=""),X()},Z=async le=>{try{const ae=await qe.post(`${r}/like_post`,{postId:le,adminId:t.userId});if(ae.data.success){const Se=ae.data.liked,ve=ae.data.likeCount;s(ke=>ke.map(Ne=>Ne.postId===le?{...Ne,likeCount:ve,likes:{...Ne.likes,[t.userId]:Se?!0:void 0}}:Ne))}}catch(ae){console.error("Error liking post:",ae)}},ue=async le=>{const ae=`${t.userId}_${le}`,Se=`${le}_${t.userId}`,[ve,ke]=await Promise.all([qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${ae}/messages.json`),qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Se}/messages.json`)]),Ne={},ze=(we,De)=>{Object.entries(we||{}).forEach(([He,We])=>{We.receiverId===t.userId&&!We.seen&&(Ne[`${De}/${He}/seen`]=!0)})};ze(ve.data,`Chats/${ae}/messages`),ze(ke.data,`Chats/${Se}/messages`),Object.keys(Ne).length>0&&await qe.patch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/.json",Ne)},te=Object.values(P||{}).reduce((le,ae)=>le+(ae.count||0),0),oe=((H==null?void 0:H.length)||0)+te;return T.jsxs("div",{className:"dashboard-page",children:[T.jsxs("nav",{className:"top-navbar",children:[T.jsx("h2",{children:"Gojo Dashboard"}),T.jsxs("div",{className:"nav-right",children:[T.jsxs("div",{className:"icon-circle",style:{position:"relative",cursor:"pointer"},onClick:le=>{le.stopPropagation(),A(ae=>!ae)},children:[T.jsx(wc,{}),oe>0&&T.jsx("span",{style:{position:"absolute",top:"-5px",right:"-5px",background:"red",color:"#fff",borderRadius:"50%",padding:"2px 6px",fontSize:"10px",fontWeight:"bold"},children:oe})]}),z&&T.jsx("div",{className:"notification-dropdown",onClick:le=>le.stopPropagation(),style:{position:"absolute",top:"40px",right:"0",width:"360px",maxHeight:"420px",overflowY:"auto",background:"#fff",borderRadius:10,boxShadow:"0 6px 20px rgba(0,0,0,0.12)",zIndex:1e3,padding:6},children:oe===0?T.jsx("p",{style:{padding:"12px",textAlign:"center",color:"#777"},children:"No new notifications"}):T.jsxs("div",{children:[H.length>0&&T.jsxs("div",{children:[T.jsx("div",{style:{padding:"8px 12px",borderBottom:"1px solid #eee",fontWeight:700},children:"Posts"}),H.map(le=>T.jsxs("div",{onClick:()=>O(le),style:{padding:10,display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:"1px solid #f0f0f0",transition:"background 120ms ease"},onMouseEnter:ae=>ae.currentTarget.style.background="#f6f8fa",onMouseLeave:ae=>ae.currentTarget.style.background="",children:[T.jsx("img",{src:le.adminProfile||"/default-profile.png",alt:"",style:{width:46,height:46,borderRadius:8,objectFit:"cover"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("strong",{children:le.adminName}),T.jsx("p",{style:{margin:0,fontSize:13,color:"#555",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:le.message||"New post"})]}),T.jsx("div",{style:{fontSize:12,color:"#888",marginLeft:8},children:new Date(le.time||le.createdAt||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},le.postId))]}),te>0&&T.jsxs("div",{children:[T.jsx("div",{style:{padding:"8px 10px",color:"#333",fontWeight:700,background:"#fafafa",borderRadius:6,margin:"8px 6px"},children:"Messages"}),Object.entries(P||{}).map(([le,ae])=>T.jsxs("div",{style:{padding:10,display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:"1px solid #f0f0f0",transition:"background 120ms ease"},onMouseEnter:Se=>Se.currentTarget.style.background="#f6f8fa",onMouseLeave:Se=>Se.currentTarget.style.background="",onClick:async()=>{await ue(le),L(Se=>{const ve={...Se};return delete ve[le],ve}),A(!1),J("/all-chat",{state:{user:{userId:le,name:ae.name,profileImage:ae.profileImage,type:ae.type}}})},children:[T.jsx("img",{src:ae.profileImage,alt:ae.name,style:{width:46,height:46,borderRadius:8,objectFit:"cover"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("strong",{style:{display:"block",marginBottom:4},children:ae.name}),T.jsxs("p",{style:{margin:0,fontSize:13,color:"#555",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:[ae.count," new message",ae.count>1&&"s"]})]})]},le))]})]})}),T.jsxs("div",{className:"icon-circle",style:{position:"relative",cursor:"pointer"},onClick:()=>J("/all-chat"),children:[T.jsx(vc,{}),te>0&&T.jsx("span",{style:{position:"absolute",top:"-5px",right:"-5px",background:"red",color:"#fff",borderRadius:"50%",padding:"2px 6px",fontSize:"10px",fontWeight:"bold"},children:te})]}),T.jsx(gr,{className:"icon-circle",to:"/settings",children:T.jsx(_c,{})}),T.jsx("img",{src:t.profileImage||"/default-profile.png",alt:"admin",className:"profile-img"})]})]}),T.jsxs("div",{className:"google-dashboard",style:{display:"flex"},children:[T.jsxs("div",{className:"google-sidebar",style:{width:"220px",padding:"10px"},children:[T.jsxs("div",{className:"sidebar-profile",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6,paddingBottom:6},children:[T.jsx("div",{className:"sidebar-img-circle",style:{width:48,height:48,borderRadius:"50%",overflow:"hidden",border:"2px solid #e6eefc"},children:T.jsx("img",{src:(t==null?void 0:t.profileImage)||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover"}})}),T.jsx("h3",{style:{margin:0,fontSize:14,fontWeight:700},children:(t==null?void 0:t.name)||"Admin Name"}),T.jsx("p",{style:{margin:0,fontSize:12,color:"#6b7280"},children:(t==null?void 0:t.adminId)||"username"})]}),T.jsxs("div",{className:"sidebar-menu",style:{display:"flex",flexDirection:"column",gap:6,marginTop:8},children:[T.jsxs(gr,{className:"sidebar-btn",to:"/dashboard",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13,backgroundColor:"#4b6cb7",color:"#fff",borderRadius:8},children:[T.jsx(xc,{style:{width:18,height:18}})," Home"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/my-posts",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Ca,{style:{width:18,height:18}})," My Posts"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/teachers",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Teachers"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/students",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Students"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/schedule",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(sl,{style:{width:18,height:18}})," Schedule"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/parents",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Parents"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/registration-form",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Registration Form"]}),T.jsxs("button",{className:"sidebar-btn logout-btn",onClick:()=>{localStorage.removeItem("admin"),window.location.href="/login"},style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Sc,{style:{width:18,height:18}})," Logout"]})]})]}),T.jsxs("div",{className:"main-content google-main",style:{padding:"10px 20px 20px",flex:1,minWidth:0,boxSizing:"border-box"},children:[T.jsx("div",{className:"post-box",children:T.jsxs("div",{className:"fb-post-top",style:{display:"flex",gap:12},children:[T.jsx("img",{src:t.profileImage||"/default-profile.png",alt:"me"}),T.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:8},children:[T.jsx("textarea",{placeholder:"What's on your mind?",value:o,onChange:le=>l(le.target.value)}),T.jsxs("div",{className:"fb-post-bottom",style:{display:"flex",alignItems:"center",gap:12},children:[T.jsxs("label",{className:"fb-upload",title:"Upload media",style:{display:"flex",alignItems:"center",gap:8},children:[T.jsx(C7,{className:"fb-icon"}),T.jsx("input",{ref:u,type:"file",onChange:le=>{const ae=le.target.files&&le.target.files[0];a(ae||null)},accept:"image/*,video/*"})]}),c&&T.jsxs("div",{style:{width:"20%",minWidth:140,display:"flex",alignItems:"center",gap:"8px",padding:"6px 10px",background:"#f3f4f6",borderRadius:8,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",boxSizing:"border-box"},children:[T.jsx("span",{style:{fontSize:13,color:"#111",fontWeight:600,overflow:"hidden",textOverflow:"ellipsis"},children:c.name}),T.jsx("button",{onClick:()=>{a(null),u.current&&(u.current.value="")},style:{background:"transparent",border:"none",color:"#6b7280",cursor:"pointer",fontSize:16,lineHeight:1},"aria-label":"Remove selected media",title:"Remove",children:""})]}),T.jsx("div",{style:{marginLeft:"auto"},children:T.jsx("button",{className:"telegram-send-icon",onClick:G,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",width:"35",height:"35",fill:"#0088cc",children:T.jsx("path",{d:"M2.01 21L23 12 2.01 3v7l15 2-15 2z"})})})})]})]})]})}),T.jsx("div",{className:"posts-container",children:i.map(le=>T.jsxs("div",{className:"post-card",id:`post-${le.postId}`,children:[T.jsxs("div",{className:"post-header",children:[T.jsx("div",{className:"img-circle",children:T.jsx("img",{src:le.adminProfile||"/default-profile.png",alt:"profile"})}),T.jsxs("div",{className:"post-info",children:[T.jsx("h4",{children:le.adminName}),T.jsx("span",{children:le.time})]})]}),T.jsx("p",{children:le.message}),le.postUrl&&T.jsx("img",{src:le.postUrl,alt:"post media"}),T.jsx("div",{className:"post-actions",children:T.jsx("div",{className:"like-button",children:T.jsxs("button",{onClick:()=>Z(le.postId),style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",width:"104px",padding:"4px 8px",background:"transparent",border:"none",cursor:"pointer",fontSize:"12px",fontWeight:"500",color:le.likes&&le.likes[t.userId]?"#e0245e":"#555",transition:"all 0.2s ease"},children:[T.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[le.likes&&le.likes[t.userId]?T.jsx(IR,{style:{color:"#e0245e",fontSize:"14px"}}):T.jsx(NR,{style:{fontSize:"14px"}}),le.likes&&le.likes[t.userId]?"Liked":"Like"]}),T.jsx("span",{style:{fontSize:"12px",color:"#777"},children:le.likeCount||0})]})})})]},le.postId))})]})]})]})}function RR(){const r=`${Io}/api`,[e,t]=me.useState([]),[n,i]=me.useState(null),[s,o]=me.useState(""),[l,c]=me.useState(""),[a,u]=me.useState(null),d=me.useRef(null),[f,h]=me.useState([]),[m,g]=me.useState({}),[p,y]=me.useState([]),[b,v]=me.useState(!1),[E,M]=me.useState(null),[W,$]=me.useState(!1),[N,j]=me.useState({}),[F,P]=me.useState([]),[L,k]=me.useState(!1),[R,C]=me.useState(null),[_,x]=me.useState(null),w=Bs();let S={};try{S=JSON.parse(localStorage.getItem("admin"))||{}}catch{S={}}const I=(S==null?void 0:S.userId)||null,z=(S==null?void 0:S.token)||(S==null?void 0:S.accessToken)||(S==null?void 0:S.idToken)||(S==null?void 0:S.apiKey)||null;me.useEffect(()=>{z?(qe.defaults.headers.common.Authorization=`Bearer ${z}`,qe.defaults.headers.common["x-access-token"]=z):(delete qe.defaults.headers.common.Authorization,delete qe.defaults.headers.common["x-access-token"])},[z]);const A="https://ethiostore-17d9f-default-rtdb.firebaseio.com",H=Object.values(N||{}).reduce((te,oe)=>te+(oe.count||0),0),K=((F==null?void 0:F.length)||0)+H,J=async te=>{if(S!=null&&S.userId)try{const oe=`${S.userId}_${te}`,re=`${te}_${S.userId}`,[be,ie]=await Promise.all([qe.get(`${A}/Chats/${oe}/messages.json`),qe.get(`${A}/Chats/${re}/messages.json`)]),le={},ae=(Se,ve)=>{Object.entries(Se||{}).forEach(([ke,Ne])=>{Ne.receiverId===S.userId&&!Ne.seen&&(le[`${ve}/${ke}/seen`]=!0)})};ae(be.data,`Chats/${oe}/messages`),ae(ie.data,`Chats/${re}/messages`),Object.keys(le).length>0&&await qe.patch(`${A}/.json`,le)}catch(oe){console.warn("markMessagesAsSeen failed",oe)}},V=async()=>{if(I)try{const te=await qe.get(`${r}/get_post_notifications/${I}`);let oe=Array.isArray(te.data)?te.data:Object.values(te.data||{});if(oe.length===0){P([]);return}const[re,be]=await Promise.all([qe.get(`${A}/Users.json`),qe.get(`${A}/School_Admins.json`)]),ie=re.data||{},le=be.data||{},ae=ve=>{const ke=le[ve];return ke?Object.values(ie).find(Ne=>Ne.userId===ke.userId):null},Se=oe.map(ve=>{const ke=ae(ve.adminId);return{...ve,notificationId:ve.notificationId||ve.id||`${ve.postId}_${ve.adminId}`,adminName:(ke==null?void 0:ke.name)||"Unknown Admin",adminProfile:(ke==null?void 0:ke.profileImage)||"/default-profile.png"}});P(Se)}catch(te){console.error("Post notification fetch failed",te),P([])}},X=async()=>{if(!(S!=null&&S.userId))return;const te={};try{const re=(await qe.get(`${A}/Users.json`)).data||{},be=ve=>Object.values(re).find(ke=>ke.userId===ve),ie=async ve=>{const ke=`${S.userId}_${ve}`,Ne=`${ve}_${S.userId}`,[ze,we]=await Promise.all([qe.get(`${A}/Chats/${ke}/messages.json`).catch(()=>({data:{}})),qe.get(`${A}/Chats/${Ne}/messages.json`).catch(()=>({data:{}}))]);return[...Object.values(ze.data||{}),...Object.values(we.data||{})].filter(He=>He.receiverId===S.userId&&!He.seen).length},le=await qe.get(`${A}/Teachers.json`).catch(()=>({data:{}}));for(const ve in le.data||{}){const ke=le.data[ve],Ne=await ie(ke.userId);if(Ne>0){const ze=be(ke.userId);te[ke.userId]={type:"teacher",name:(ze==null?void 0:ze.name)||"Teacher",profileImage:(ze==null?void 0:ze.profileImage)||"/default-profile.png",count:Ne}}}const ae=await qe.get(`${A}/Students.json`).catch(()=>({data:{}}));for(const ve in ae.data||{}){const ke=ae.data[ve],Ne=await ie(ke.userId);if(Ne>0){const ze=be(ke.userId);te[ke.userId]={type:"student",name:(ze==null?void 0:ze.name)||ke.name||"Student",profileImage:(ze==null?void 0:ze.profileImage)||ke.profileImage||"/default-profile.png",count:Ne}}}const Se=await qe.get(`${A}/Parents.json`).catch(()=>({data:{}}));for(const ve in Se.data||{}){const ke=Se.data[ve],Ne=await ie(ke.userId);if(Ne>0){const ze=be(ke.userId);te[ke.userId]={type:"parent",name:(ze==null?void 0:ze.name)||ke.name||"Parent",profileImage:(ze==null?void 0:ze.profileImage)||ke.profileImage||"/default-profile.png",count:Ne}}}j(te)}catch(oe){console.error("Unread fetch failed:",oe)}};me.useEffect(()=>{if(!(S!=null&&S.userId))return;X();const te=setInterval(X,5e3);return()=>clearInterval(te)},[S==null?void 0:S.userId]),me.useEffect(()=>{V();const te=setInterval(V,5e3);return()=>clearInterval(te)},[I]);const D=async()=>{var te;if(I)try{const oe=await qe.get(`${r}/get_my_posts/${I}`),be=(Array.isArray(oe.data)?oe.data:Object.entries(oe.data||{}).map(([ie,le])=>({postId:ie,...le}))).map(ie=>{const le=ie.time?new Date(ie.time):new Date;return{postId:ie.postId||ie.id||""||String((ie==null?void 0:ie.postId)||(ie==null?void 0:ie.id)||""),message:ie.message||ie.postText||"",postUrl:ie.postUrl||ie.mediaUrl||ie.postUrl||null,time:le.toLocaleString(),parsedTime:le,edited:ie.edited||!1,likeCount:Number(ie.likeCount)||0,likes:ie.likes||{},adminId:ie.adminId||I}}).sort((ie,le)=>le.parsedTime-ie.parsedTime);t(be)}catch(oe){console.error("Error fetching posts:",((te=oe.response)==null?void 0:te.data)||oe)}};me.useEffect(()=>{if(!I)return;D();const te=setInterval(D,1e4);return()=>clearInterval(te)},[I]);const O=async()=>{var te,oe,re;if(!(!l&&!a))try{const be=new FormData;be.append("adminId",I),be.append("postText",l),a&&be.append("postMedia",a),await qe.post(`${r}/create_post`,be,{headers:{"Content-Type":"multipart/form-data"}}),c(""),u(null),d.current&&(d.current.value=""),D()}catch(be){console.error("Error creating post:",((te=be.response)==null?void 0:te.data)||be),alert("Create post failed: "+(((re=(oe=be.response)==null?void 0:oe.data)==null?void 0:re.message)||be.message||"See console"))}},G=(te,oe)=>{i(te),o(oe||"")},Z=async te=>{var re,be,ie,le;if(!te||!I)return;const oe=(s||"").trim();if(oe.length===0){alert("Post content cannot be empty.");return}C(te);try{const ae={message:oe,edited:!0,editedAt:new Date().toISOString(),lastEditedBy:I},Se=`${A}/Posts/${encodeURIComponent(te)}.json`;await qe.patch(Se,ae),t(ve=>ve.map(ke=>ke.postId===te?{...ke,message:oe,edited:!0}:ke)),i(null),o(""),C(null);return}catch{}try{const ae=`${r}/edit_post/${te}`,Se={adminId:I,postText:oe,message:oe},ve={};z&&(ve.Authorization=`Bearer ${z}`,ve["x-access-token"]=z);const ke=await qe.post(ae,Se,{headers:ve});if(ke.data&&ke.data.success===!1)throw new Error(ke.data.message||"Edit failed on backend");t(Ne=>Ne.map(ze=>ze.postId===te?{...ze,message:oe,edited:!0}:ze)),i(null),o("")}catch(ae){console.error("[EDIT] Final error:",(re=ae.response)==null?void 0:re.status,((be=ae.response)==null?void 0:be.data)||ae.message||ae),alert("Edit failed: "+(((le=(ie=ae.response)==null?void 0:ie.data)==null?void 0:le.message)||ae.message||"See console"))}finally{C(null)}},ue=async te=>{var oe,re,be,ie;if(te&&window.confirm("Are you sure you want to delete this post?")&&I){x(te);try{const le=`${A}/Posts/${encodeURIComponent(te)}.json`;await qe.delete(le),t(ae=>ae.filter(Se=>Se.postId!==te)),x(null);return}catch{}try{const le=`${r}/delete_post/${te}`,ae={};z&&(ae.Authorization=`Bearer ${z}`,ae["x-access-token"]=z);try{const ve=await qe.post(le,{adminId:I},{headers:ae});if(ve.data&&ve.data.success===!1)throw new Error(ve.data.message||"delete returned success:false");t(ke=>ke.filter(Ne=>Ne.postId!==te)),x(null);return}catch{}try{const ve=await qe.delete(le,{data:{adminId:I},headers:ae});if(ve.data&&ve.data.success===!1)throw new Error(ve.data.message||"delete returned success:false");t(ke=>ke.filter(Ne=>Ne.postId!==te)),x(null);return}catch{}const Se=await qe.delete(le,{params:{adminId:I},headers:ae});if(Se.data&&Se.data.success===!1)throw new Error(Se.data.message||"delete returned success:false");t(ve=>ve.filter(ke=>ke.postId!==te))}catch(le){console.error("[DELETE] Final error:",(oe=le.response)==null?void 0:oe.status,((re=le.response)==null?void 0:re.data)||le.message||le),alert("Delete failed: "+(((ie=(be=le.response)==null?void 0:be.data)==null?void 0:ie.message)||le.message||"See console"))}finally{x(null)}}};return me.useEffect(()=>{const te=oe=>{!oe.target.closest(".icon-circle")&&!oe.target.closest(".messenger-dropdown")&&v(!1)};return document.addEventListener("click",te),()=>document.removeEventListener("click",te)},[]),me.useEffect(()=>{const te=oe=>{!oe.target.closest(".icon-circle")&&!oe.target.closest(".notification-dropdown")&&k(!1)};return document.addEventListener("click",te),()=>document.removeEventListener("click",te)},[]),T.jsxs("div",{className:"dashboard-page",children:[T.jsxs("nav",{className:"top-navbar",children:[T.jsx("h2",{children:"Gojo Dashboard"}),T.jsxs("div",{className:"nav-right",children:[T.jsxs("div",{className:"icon-circle",style:{position:"relative",cursor:"pointer"},onClick:te=>{te.stopPropagation(),k(oe=>!oe)},children:[T.jsx(wc,{}),K>0&&T.jsx("span",{className:"badge",children:K}),L&&T.jsx("div",{className:"notification-dropdown",onClick:te=>te.stopPropagation(),style:{position:"absolute",top:"45px",right:"0",width:"360px",maxHeight:"420px",overflowY:"auto",background:"#fff",borderRadius:10,boxShadow:"0 6px 20px rgba(0,0,0,0.12)",zIndex:1e3,padding:6},children:K===0?T.jsx("p",{className:"muted",children:"No new notifications"}):T.jsxs("div",{children:[F.length>0&&T.jsxs("div",{children:[T.jsx("div",{className:"notification-section-title",children:"Posts"}),F.map(te=>T.jsxs("div",{className:"notification-row",onClick:async()=>{try{await qe.post(`${r}/mark_post_notification_read`,{notificationId:te.notificationId})}catch(oe){console.warn("Failed to mark notification:",oe)}P(oe=>oe.filter(re=>re.notificationId!==te.notificationId)),k(!1),w("/dashboard",{state:{postId:te.postId,posterName:te.adminName,posterProfile:te.adminProfile}})},style:{padding:10,display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:"1px solid #f0f0f0",transition:"background 120ms ease"},onMouseEnter:oe=>oe.currentTarget.style.background="#f6f8fa",onMouseLeave:oe=>oe.currentTarget.style.background="",children:[T.jsx("img",{src:te.adminProfile||"/default-profile.png",alt:te.adminName,style:{width:46,height:46,borderRadius:8,objectFit:"cover"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("strong",{style:{display:"block",marginBottom:4},children:te.adminName}),T.jsx("p",{style:{margin:0,fontSize:13,color:"#555",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:te.message})]}),T.jsx("div",{style:{fontSize:12,color:"#888",marginLeft:8},children:new Date(te.time||te.createdAt||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},te.notificationId))]}),H>0&&T.jsxs("div",{children:[T.jsx("div",{className:"notification-section-title",style:{padding:"8px 10px",color:"#333",fontWeight:700,background:"#fafafa",borderRadius:6,margin:"8px 6px"},children:"Messages"}),Object.entries(N||{}).map(([te,oe])=>T.jsxs("div",{className:"notification-row",onClick:async()=>{await J(te),j(re=>{const be={...re};return delete be[te],be}),k(!1),w("/all-chat",{state:{user:{userId:te,name:oe.name,profileImage:oe.profileImage,type:oe.type}}})},style:{padding:10,display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:"1px solid #f0f0f0",transition:"background 120ms ease"},onMouseEnter:re=>re.currentTarget.style.background="#f6f8fa",onMouseLeave:re=>re.currentTarget.style.background="",children:[T.jsx("img",{src:oe.profileImage||"/default-profile.png",alt:oe.name,style:{width:46,height:46,borderRadius:8,objectFit:"cover"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("strong",{style:{display:"block",marginBottom:4},children:oe.name}),T.jsxs("p",{style:{margin:0,fontSize:13,color:"#555",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:[oe.count," new message",oe.count>1&&"s"]})]})]},te))]})]})})]}),T.jsxs("div",{className:"icon-circle",style:{position:"relative",cursor:"pointer"},onClick:()=>w("/all-chat"),children:[T.jsx(vc,{}),H>0&&T.jsx("span",{className:"badge",children:H})]}),T.jsx(gr,{className:"icon-circle",to:"/settings",children:T.jsx(_c,{})}),T.jsx("img",{src:S.profileImage||"/default-profile.png",alt:"admin",className:"profile-img"})]})]}),T.jsxs("div",{className:"google-dashboard",style:{display:"flex"},children:[T.jsxs("div",{className:"google-sidebar",style:{width:"220px",padding:"10px"},children:[T.jsxs("div",{className:"sidebar-profile",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6,paddingBottom:6},children:[T.jsx("div",{className:"sidebar-img-circle",style:{width:48,height:48,borderRadius:"50%",overflow:"hidden",border:"2px solid #e6eefc"},children:T.jsx("img",{src:(S==null?void 0:S.profileImage)||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover"}})}),T.jsx("h3",{style:{margin:0,fontSize:14,fontWeight:700},children:(S==null?void 0:S.name)||"Admin Name"}),T.jsx("p",{style:{margin:0,fontSize:12,color:"#6b7280"},children:(S==null?void 0:S.adminId)||"username"})]}),T.jsxs("div",{className:"sidebar-menu",style:{display:"flex",flexDirection:"column",gap:6,marginTop:8},children:[T.jsxs(gr,{className:"sidebar-btn",to:"/dashboard",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(xc,{style:{width:18,height:18}})," Home"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/my-posts",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13,backgroundColor:"#4b6cb7",color:"#fff",borderRadius:8},children:[T.jsx(Ca,{style:{width:18,height:18}})," My Posts"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/teachers",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Teachers"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/students",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Students"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/schedule",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(sl,{style:{width:18,height:18}})," Schedule"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/parents",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Parents"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/registration-form",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Registration Form"]}),T.jsxs("button",{className:"sidebar-btn logout-btn",onClick:()=>{localStorage.removeItem("admin"),window.location.href="/login"},style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Sc,{style:{width:18,height:18}})," Logout"]})]})]}),T.jsxs("div",{className:"main-content google-main",style:{padding:"10px 20px 20px",flex:1,minWidth:0,boxSizing:"border-box"},children:[T.jsx("div",{className:"post-box",children:T.jsxs("div",{className:"fb-post-top",style:{display:"flex",gap:12},children:[T.jsx("img",{src:S.profileImage||"/default-profile.png",alt:"me"}),T.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:8},children:[T.jsx("textarea",{placeholder:"What's on your mind?",value:l,onChange:te=>c(te.target.value)}),T.jsxs("div",{className:"fb-post-bottom",style:{display:"flex",alignItems:"center",gap:12},children:[T.jsxs("label",{className:"fb-upload",title:"Upload media",style:{display:"flex",alignItems:"center",gap:8},children:[T.jsx(C7,{className:"fb-icon"}),T.jsx("input",{ref:d,type:"file",onChange:te=>{const oe=te.target.files&&te.target.files[0];u(oe||null)},accept:"image/*,video/*"})]}),a&&T.jsxs("div",{style:{width:"20%",minWidth:140,display:"flex",alignItems:"center",gap:"8px",padding:"6px 10px",background:"#f3f4f6",borderRadius:8,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",boxSizing:"border-box"},children:[T.jsx("span",{style:{fontSize:13,color:"#111",fontWeight:600,overflow:"hidden",textOverflow:"ellipsis"},children:a.name}),T.jsx("button",{onClick:()=>{u(null),d.current&&(d.current.value="")},style:{background:"transparent",border:"none",color:"#6b7280",cursor:"pointer",fontSize:16,lineHeight:1},"aria-label":"Remove selected media",title:"Remove",children:""})]}),T.jsx("div",{style:{marginLeft:"auto"},children:T.jsx("button",{className:"telegram-send-icon",onClick:O,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",width:"35",height:"35",fill:"#0088cc",children:T.jsx("path",{d:"M2.01 21L23 12 2.01 3v7l15 2-15 2z"})})})})]})]})]})}),e.length===0?T.jsx("p",{className:"muted",style:{textAlign:"center",padding:10},children:"You have no posts yet."}):T.jsx("div",{className:"posts-container",children:e.map(te=>T.jsxs("div",{className:"post-card",id:`post-${te.postId}`,children:[T.jsxs("div",{className:"post-header",children:[T.jsx("div",{className:"img-circle",children:T.jsx("img",{src:S.profileImage||"/default-profile.png",alt:"profile"})}),T.jsxs("div",{className:"post-info",children:[T.jsx("h4",{children:S.name||"Admin"}),T.jsxs("span",{children:[te.time,te.edited?" (edited)":""]})]})]}),n===te.postId?T.jsx("div",{className:"post-card-body",children:T.jsxs("div",{className:"edit-area",children:[T.jsx("textarea",{value:s,onChange:oe=>o(oe.target.value),className:"edit-textarea"}),T.jsxs("div",{className:"edit-actions",children:[T.jsx("button",{onClick:()=>Z(te.postId),disabled:R===te.postId,className:"btn primary",children:R===te.postId?"Saving...":"Save"}),T.jsx("button",{onClick:()=>i(null),className:"btn muted",children:"Cancel"})]})]})}):T.jsxs(T.Fragment,{children:[T.jsx("p",{children:te.message}),te.postUrl&&T.jsx("img",{src:te.postUrl,alt:"post media"}),T.jsxs("div",{className:"post-card-actions",children:[T.jsx("button",{onClick:()=>G(te.postId,te.message),className:"btn warning",children:"Edit"}),T.jsx("button",{onClick:()=>ue(te.postId),disabled:_===te.postId,className:"btn danger",children:_===te.postId?"Deleting...":"Delete"})]})]})]},te.postId))})]})]})]})}const PR=()=>{};var g3={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=function(r,e){if(!r)throw Uh(e)},Uh=function(r){return new Error("Firebase Database ("+A7.SDK_VERSION+") INTERNAL ASSERT FAILED: "+r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},MR=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=r[t++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=r[t++],o=r[t++],l=r[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=r[t++],o=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Rv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const s=r[i],o=i+1<r.length,l=o?r[i+1]:0,c=i+2<r.length,a=c?r[i+2]:0,u=s>>2,d=(s&3)<<4|l>>4;let f=(l&15)<<2|a>>6,h=a&63;c||(h=64,o||(f=64)),n.push(t[u],t[d],t[f],t[h])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(T7(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):MR(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const s=t[r.charAt(i++)],l=i<r.length?t[r.charAt(i)]:0;++i;const a=i<r.length?t[r.charAt(i)]:64;++i;const d=i<r.length?t[r.charAt(i)]:64;if(++i,s==null||l==null||a==null||d==null)throw new OR;const f=s<<2|l>>4;if(n.push(f),a!==64){const h=l<<4&240|a>>2;if(n.push(h),d!==64){const m=a<<6&192|d;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class OR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const N7=function(r){const e=T7(r);return Rv.encodeByteArray(e,!0)},g0=function(r){return N7(r).replace(/\./g,"")},Ty=function(r){try{return Rv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(r){return j7(void 0,r)}function j7(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!DR(t)||(r[t]=j7(r[t],e[t]));return r}function DR(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=()=>FR().__FIREBASE_DEFAULTS__,zR=()=>{if(typeof process>"u"||typeof g3>"u")return;const r=g3.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},UR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Ty(r[1]);return e&&JSON.parse(e)},Pv=()=>{try{return PR()||BR()||zR()||UR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},VR=r=>{var e,t;return(t=(e=Pv())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},Mv=r=>{const e=VR(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},R7=()=>{var r;return(r=Pv())==null?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ov(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,s=r.sub||r.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...r};return[g0(JSON.stringify(t)),g0(JSON.stringify(o)),""].join(".")}const Wf={};function $R(){const r={prod:[],emulator:[]};for(const e of Object.keys(Wf))Wf[e]?r.emulator.push(e):r.prod.push(e);return r}function WR(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let y3=!1;function Dv(r,e){if(typeof window>"u"||typeof document>"u"||!Vh(window.location.host)||Wf[r]===e||Wf[r]||y3)return;Wf[r]=e;function t(f){return`__firebase__banner__${f}`}const n="__firebase__banner",s=$R().prod.length>0;function o(){const f=document.getElementById(n);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function a(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{y3=!0,o()},f}function u(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=WR(n),h=t("text"),m=document.getElementById(h)||document.createElement("span"),g=t("learnmore"),p=document.getElementById(g)||document.createElement("a"),y=t("preprendIcon"),b=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const v=f.element;l(v),u(p,g);const E=a();c(b,y),v.append(b,m,p,E),document.body.appendChild(v)}s?(m.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P7(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function M7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(P7())}function qR(){var e;const r=(e=Pv())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GR(){return A7.NODE_ADMIN===!0}function KR(){return!qR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YR(){try{return typeof indexedDB=="object"}catch{return!1}}function XR(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="FirebaseError";class hu extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=QR,Object.setPrototypeOf(this,hu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,O7.prototype.create)}}class O7{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?JR(s,n):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new hu(i,l,n)}}function JR(r,e){return r.replace(ZR,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const ZR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(r){return JSON.parse(r)}function ts(r){return JSON.stringify(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7=function(r){let e={},t={},n={},i="";try{const s=r.split(".");e=xd(Ty(s[0])||""),t=xd(Ty(s[1])||""),i=s[2],n=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:n,signature:i}},eP=function(r){const e=L7(r),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},tP=function(r){const e=L7(r).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function wh(r,e){if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}function b3(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function y0(r,e,t){const n={};for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=e.call(t,r[i],i,r));return n}function Sd(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const s=r[i],o=e[i];if(v3(s)&&v3(o)){if(!Sd(s,o))return!1}else if(s!==o)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function v3(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)n[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)n[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const f=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4],a,u;for(let d=0;d<80;d++){d<40?d<20?(a=l^s&(o^l),u=1518500249):(a=s^o^l,u=1859775393):d<60?(a=s&o|l&(s|o),u=2400959708):(a=s^o^l,u=3395469782);const f=(i<<5|i>>>27)+a+c+u+n[d]&4294967295;c=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const n=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[n]=this.chain_[i]>>s&255,++n;return e}}function yg(r,e){return`${r} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);if(i>=55296&&i<=56319){const s=i-55296;n++,nr(n<r.length,"Surrogate pair missing trail surrogate.");const o=r.charCodeAt(n)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},bg=function(r){let e=0;for(let t=0;t<r.length;t++){const n=r.charCodeAt(t);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(r){return r&&r._delegate?r._delegate:r}class eu{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new Qd;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aP(e))try{this.getOrInitializeService({instanceIdentifier:Rc})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=Rc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rc){return this.instances.has(e)}getOptions(e=Rc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(i)}return i}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:oP(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Rc){return this.component?this.component.multipleInstances?e:Rc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oP(r){return r===Rc?void 0:r}function aP(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kn;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(kn||(kn={}));const cP={debug:kn.DEBUG,verbose:kn.VERBOSE,info:kn.INFO,warn:kn.WARN,error:kn.ERROR,silent:kn.SILENT},uP=kn.INFO,hP={[kn.DEBUG]:"log",[kn.VERBOSE]:"log",[kn.INFO]:"info",[kn.WARN]:"warn",[kn.ERROR]:"error"},fP=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=hP[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fv{constructor(e){this.name=e,this._logLevel=uP,this._logHandler=fP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in kn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,kn.DEBUG,...e),this._logHandler(this,kn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,kn.VERBOSE,...e),this._logHandler(this,kn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,kn.INFO,...e),this._logHandler(this,kn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,kn.WARN,...e),this._logHandler(this,kn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,kn.ERROR,...e),this._logHandler(this,kn.ERROR,...e)}}const dP=(r,e)=>e.some(t=>r instanceof t);let w3,_3;function pP(){return w3||(w3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mP(){return _3||(_3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D7=new WeakMap,Ny=new WeakMap,F7=new WeakMap,B1=new WeakMap,Bv=new WeakMap;function gP(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",s),r.removeEventListener("error",o)},s=()=>{t(Xl(r.result)),i()},o=()=>{n(r.error),i()};r.addEventListener("success",s),r.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&D7.set(t,r)}).catch(()=>{}),Bv.set(e,r),e}function yP(r){if(Ny.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",s),r.removeEventListener("error",o),r.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",s),r.addEventListener("error",o),r.addEventListener("abort",o)});Ny.set(r,e)}let jy={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Ny.get(r);if(e==="objectStoreNames")return r.objectStoreNames||F7.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xl(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function bP(r){jy=r(jy)}function vP(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(z1(this),e,...t);return F7.set(n,e.sort?e.sort():[e]),Xl(n)}:mP().includes(r)?function(...e){return r.apply(z1(this),e),Xl(D7.get(this))}:function(...e){return Xl(r.apply(z1(this),e))}}function wP(r){return typeof r=="function"?vP(r):(r instanceof IDBTransaction&&yP(r),dP(r,pP())?new Proxy(r,jy):r)}function Xl(r){if(r instanceof IDBRequest)return gP(r);if(B1.has(r))return B1.get(r);const e=wP(r);return e!==r&&(B1.set(r,e),Bv.set(e,r)),e}const z1=r=>Bv.get(r);function _P(r,e,{blocked:t,upgrade:n,blocking:i,terminated:s}={}){const o=indexedDB.open(r,e),l=Xl(o);return n&&o.addEventListener("upgradeneeded",c=>{n(Xl(o.result),c.oldVersion,c.newVersion,Xl(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",a=>i(a.oldVersion,a.newVersion,a))}).catch(()=>{}),l}const xP=["get","getKey","getAll","getAllKeys","count"],SP=["put","add","delete","clear"],U1=new Map;function x3(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(U1.get(e))return U1.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=SP.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||xP.includes(t)))return;const s=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let a=c.store;return n&&(a=a.index(l.shift())),(await Promise.all([a[t](...l),i&&c.done]))[0]};return U1.set(e,s),s}bP(r=>({...r,get:(e,t,n)=>x3(e,t)||r.get(e,t,n),has:(e,t)=>!!x3(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(EP(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function EP(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ry="@firebase/app",S3="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=new Fv("@firebase/app"),CP="@firebase/app-compat",IP="@firebase/analytics-compat",AP="@firebase/analytics",TP="@firebase/app-check-compat",NP="@firebase/app-check",jP="@firebase/auth",RP="@firebase/auth-compat",PP="@firebase/database",MP="@firebase/data-connect",OP="@firebase/database-compat",LP="@firebase/functions",DP="@firebase/functions-compat",FP="@firebase/installations",BP="@firebase/installations-compat",zP="@firebase/messaging",UP="@firebase/messaging-compat",VP="@firebase/performance",$P="@firebase/performance-compat",WP="@firebase/remote-config",qP="@firebase/remote-config-compat",HP="@firebase/storage",GP="@firebase/storage-compat",KP="@firebase/firestore",YP="@firebase/ai",XP="@firebase/firestore-compat",QP="firebase",JP="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="[DEFAULT]",ZP={[Ry]:"fire-core",[CP]:"fire-core-compat",[AP]:"fire-analytics",[IP]:"fire-analytics-compat",[NP]:"fire-app-check",[TP]:"fire-app-check-compat",[jP]:"fire-auth",[RP]:"fire-auth-compat",[PP]:"fire-rtdb",[MP]:"fire-data-connect",[OP]:"fire-rtdb-compat",[LP]:"fire-fn",[DP]:"fire-fn-compat",[FP]:"fire-iid",[BP]:"fire-iid-compat",[zP]:"fire-fcm",[UP]:"fire-fcm-compat",[VP]:"fire-perf",[$P]:"fire-perf-compat",[WP]:"fire-rc",[qP]:"fire-rc-compat",[HP]:"fire-gcs",[GP]:"fire-gcs-compat",[KP]:"fire-fst",[XP]:"fire-fst-compat",[YP]:"fire-vertex","fire-js":"fire-js",[QP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new Map,eM=new Map,My=new Map;function k3(r,e){try{r.container.addComponent(e)}catch(t){ol.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function _h(r){const e=r.name;if(My.has(e))return ol.debug(`There were multiple attempts to register component ${e}.`),!1;My.set(e,r);for(const t of kd.values())k3(t,r);for(const t of eM.values())k3(t,r);return!0}function zv(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Uv(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ql=new O7("app","Firebase",tM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new eu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ql.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=JP;function B7(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:Py,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw Ql.create("bad-app-name",{appName:String(i)});if(t||(t=R7()),!t)throw Ql.create("no-options");const s=kd.get(i);if(s){if(Sd(t,s.options)&&Sd(n,s.config))return s;throw Ql.create("duplicate-app",{appName:i})}const o=new lP(i);for(const c of My.values())o.addComponent(c);const l=new rM(t,n,o);return kd.set(i,l),l}function vg(r=Py){const e=kd.get(r);if(!e&&r===Py&&R7())return B7();if(!e)throw Ql.create("no-app",{appName:r});return e}function nM(){return Array.from(kd.values())}function Ia(r,e,t){let n=ZP[r]??r;t&&(n+=`-${t}`);const i=n.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${n}" with version "${e}":`];i&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ol.warn(o.join(" "));return}_h(new eu(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="firebase-heartbeat-database",sM=1,Ed="firebase-heartbeat-store";let V1=null;function z7(){return V1||(V1=_P(iM,sM,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ed)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ql.create("idb-open",{originalErrorMessage:r.message})})),V1}async function oM(r){try{const t=(await z7()).transaction(Ed),n=await t.objectStore(Ed).get(U7(r));return await t.done,n}catch(e){if(e instanceof hu)ol.warn(e.message);else{const t=Ql.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ol.warn(t.message)}}}async function E3(r,e){try{const n=(await z7()).transaction(Ed,"readwrite");await n.objectStore(Ed).put(e,U7(r)),await n.done}catch(t){if(t instanceof hu)ol.warn(t.message);else{const n=Ql.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ol.warn(n.message)}}}function U7(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=1024,lM=30;class cM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hM(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=C3();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>lM){const o=fM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ol.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=C3(),{heartbeatsToSend:n,unsentEntries:i}=uM(this._heartbeatsCache.heartbeats),s=g0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ol.warn(t),""}}}function C3(){return new Date().toISOString().substring(0,10)}function uM(r,e=aM){const t=[];let n=r.slice();for(const i of r){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),I3(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),I3(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class hM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YR()?XR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await oM(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return E3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return E3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function I3(r){return g0(JSON.stringify({version:2,heartbeats:r})).length}function fM(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(r){_h(new eu("platform-logger",e=>new kP(e),"PRIVATE")),_h(new eu("heartbeat",e=>new cM(e),"PRIVATE")),Ia(Ry,S3,r),Ia(Ry,S3,"esm2020"),Ia("fire-js","")}dM("");var A3={};const T3="@firebase/database",N3="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V7="";function pM(r){V7=r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ts(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:xd(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ra(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const e=window[r];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new mM(e)}}catch{}return new gM},zc=$7("localStorage"),yM=$7("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=new Fv("@firebase/database"),bM=function(){let r=1;return function(){return r++}}(),W7=function(r){const e=iP(r),t=new nP;t.update(e);const n=t.digest();return Rv.encodeByteArray(n)},Jd=function(...r){let e="";for(let t=0;t<r.length;t++){const n=r[t];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=Jd.apply(null,n):typeof n=="object"?e+=ts(n):e+=n,e+=" "}return e};let qf=null,j3=!0;const vM=function(r,e){nr(!0,"Can't turn on custom loggers persistently."),Ju.logLevel=kn.VERBOSE,qf=Ju.log.bind(Ju)},bs=function(...r){if(j3===!0&&(j3=!1,qf===null&&yM.get("logging_enabled")===!0&&vM()),qf){const e=Jd.apply(null,r);qf(e)}},Zd=function(r){return function(...e){bs(r,...e)}},Oy=function(...r){const e="FIREBASE INTERNAL ERROR: "+Jd(...r);Ju.error(e)},al=function(...r){const e=`FIREBASE FATAL ERROR: ${Jd(...r)}`;throw Ju.error(e),new Error(e)},Ks=function(...r){const e="FIREBASE WARNING: "+Jd(...r);Ju.warn(e)},wM=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ks("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},$v=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},_M=function(r){if(document.readyState==="complete")r();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},xh="[MIN_NAME]",tu="[MAX_NAME]",fu=function(r,e){if(r===e)return 0;if(r===xh||e===tu)return-1;if(e===xh||r===tu)return 1;{const t=R3(r),n=R3(e);return t!==null?n!==null?t-n===0?r.length-e.length:t-n:-1:n!==null?1:r<e?-1:1}},xM=function(r,e){return r===e?0:r<e?-1:1},_f=function(r,e){if(e&&r in e)return e[r];throw new Error("Missing required key ("+r+") in object: "+ts(e))},Wv=function(r){if(typeof r!="object"||r===null)return ts(r);const e=[];for(const n in r)e.push(n);e.sort();let t="{";for(let n=0;n<e.length;n++)n!==0&&(t+=","),t+=ts(e[n]),t+=":",t+=Wv(r[e[n]]);return t+="}",t},q7=function(r,e){const t=r.length;if(t<=e)return[r];const n=[];for(let i=0;i<t;i+=e)i+e>t?n.push(r.substring(i,t)):n.push(r.substring(i,i+e));return n};function _s(r,e){for(const t in r)r.hasOwnProperty(t)&&e(t,r[t])}const H7=function(r){nr(!$v(r),"Invalid JSON number");const e=11,t=52,n=(1<<e-1)-1;let i,s,o,l,c;r===0?(s=0,o=0,i=1/r===-1/0?1:0):(i=r<0,r=Math.abs(r),r>=Math.pow(2,1-n)?(l=Math.min(Math.floor(Math.log(r)/Math.LN2),n),s=l+n,o=Math.round(r*Math.pow(2,t-l)-Math.pow(2,t))):(s=0,o=Math.round(r/Math.pow(2,1-n-t))));const a=[];for(c=t;c;c-=1)a.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)a.push(s%2?1:0),s=Math.floor(s/2);a.push(i?1:0),a.reverse();const u=a.join("");let d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},SM=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},kM=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function EM(r,e){let t="Unknown Error";r==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":r==="permission_denied"?t="Client doesn't have permission to access the desired data.":r==="unavailable"&&(t="The service is unavailable");const n=new Error(r+" at "+e._path.toString()+": "+t);return n.code=r.toUpperCase(),n}const CM=new RegExp("^-?(0*)\\d{1,10}$"),IM=-2147483648,AM=2147483647,R3=function(r){if(CM.test(r)){const e=Number(r);if(e>=IM&&e<=AM)return e}return null},$h=function(r){try{r()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Ks("Exception was thrown by user callback.",t),e},Math.floor(0))}},TM=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Hf=function(r,e){const t=setTimeout(r,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Uv(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(n=>this.appCheck=n)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)==null||t.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Ks(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(bs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ks(e)}}class Im{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Im.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="5",G7="v",K7="s",Y7="r",X7="f",Q7=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,J7="ls",Z7="p",Ly="ac",e9="websocket",t9="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e,t,n,i,s=!1,o="",l=!1,c=!1,a=null){this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this.emulatorOptions=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zc.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&zc.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function RM(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function n9(r,e,t){nr(typeof e=="string","typeof type must == string"),nr(typeof t=="object","typeof params must == object");let n;if(e===e9)n=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(e===t9)n=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);RM(r)&&(t.ns=r.namespace);const i=[];return _s(t,(s,o)=>{i.push(s+"="+o)}),n+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(){this.counters_={}}incrementCounter(e,t=1){Ra(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return LR(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1={},W1={};function Hv(r){const e=r.toString();return $1[e]||($1[e]=new PM),$1[e]}function MM(r,e){const t=r.toString();return W1[t]||(W1[t]=e()),W1[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<n.length;++i)n[i]&&$h(()=>{this.onMessage_(n[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3="start",LM="close",DM="pLPCommand",FM="pRTLPCB",i9="id",s9="pw",o9="ser",BM="cb",zM="seg",UM="ts",VM="d",$M="dframe",a9=1870,l9=30,WM=a9-l9,qM=25e3,HM=3e4;class Wu{constructor(e,t,n,i,s,o,l){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Zd(e),this.stats_=Hv(t),this.urlFn=c=>(this.appCheckToken&&(c[Ly]=this.appCheckToken),n9(t,t9,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new OM(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(HM)),_M(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Gv((...s)=>{const[o,l,c,a,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===P3)this.id=l,this.password=c;else if(o===LM)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const n={};n[P3]="t",n[o9]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[BM]=this.scriptTagHolder.uniqueCallbackIdentifier),n[G7]=qv,this.transportSessionId&&(n[K7]=this.transportSessionId),this.lastSessionId&&(n[J7]=this.lastSessionId),this.applicationId&&(n[Z7]=this.applicationId),this.appCheckToken&&(n[Ly]=this.appCheckToken),typeof location<"u"&&location.hostname&&Q7.test(location.hostname)&&(n[Y7]=X7);const i=this.urlFn(n);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Wu.forceAllow_=!0}static forceDisallow(){Wu.forceDisallow_=!0}static isAvailable(){return Wu.forceAllow_?!0:!Wu.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!SM()&&!kM()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ts(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=N7(t),i=q7(n,WM);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={};n[$M]="t",n[i9]=e,n[s9]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ts(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Gv{constructor(e,t,n,i){this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=bM(),window[DM+this.uniqueCallbackIdentifier]=e,window[FM+this.uniqueCallbackIdentifier]=t,this.myIFrame=Gv.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){bs("frame writing exception"),l.stack&&bs(l.stack),bs(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||bs("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[i9]=this.myID,e[s9]=this.myPW,e[o9]=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+l9+n.length<=a9;){const o=this.pendingSegs.shift();n=n+"&"+zM+i+"="+o.seg+"&"+UM+i+"="+o.ts+"&"+VM+i+"="+o.d,i++}return t=t+n,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(qM)),s=()=>{clearTimeout(i),n()};this.addTag(e,s)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const i=n.readyState;(!i||i==="loaded"||i==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{bs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=16384,KM=45e3;let b0=null;typeof MozWebSocket<"u"?b0=MozWebSocket:typeof WebSocket<"u"&&(b0=WebSocket);class Qo{constructor(e,t,n,i,s,o,l){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Zd(this.connId),this.stats_=Hv(t),this.connURL=Qo.connectionURL_(t,o,l,i,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i,s){const o={};return o[G7]=qv,typeof location<"u"&&location.hostname&&Q7.test(location.hostname)&&(o[Y7]=X7),t&&(o[K7]=t),n&&(o[J7]=n),i&&(o[Ly]=i),s&&(o[Z7]=s),n9(e,e9,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zc.set("previous_websocket_failure",!0);try{let n;GR(),this.mySock=new b0(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const i=n.message||n.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const i=n.message||n.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Qo.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&b0!==null&&!Qo.forceDisallow_}static previouslyFailed(){return zc.isInMemoryStorage||zc.get("previous_websocket_failure")===!0}markConnectionHealthy(){zc.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const n=xd(t);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(nr(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const n=this.extractFrameCount_(t);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const t=ts(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=q7(t,GM);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(KM))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Qo.responsesRequiredToBeHealthy=2;Qo.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{static get ALL_TRANSPORTS(){return[Wu,Qo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Qo&&Qo.isAvailable();let n=t&&!Qo.previouslyFailed();if(e.webSocketOnly&&(t||Ks("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Qo];else{const i=this.transports_=[];for(const s of Cd.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Cd.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Cd.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=6e4,XM=5e3,QM=10*1024,JM=100*1024,q1="t",M3="d",ZM="s",O3="r",eO="e",L3="o",D3="a",F3="n",B3="p",tO="h";class rO{constructor(e,t,n,i,s,o,l,c,a,u){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=c,this.onKill_=a,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Zd("c:"+this.id+":"),this.transportManager_=new Cd(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Hf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>JM?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>QM?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(q1 in e){const t=e[q1];t===D3?this.upgradeIfSecondaryHealthy_():t===O3?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===L3&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=_f("t",e),n=_f("d",e);if(t==="c")this.onSecondaryControl_(n);else if(t==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:B3,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:D3,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:F3,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=_f("t",e),n=_f("d",e);t==="c"?this.onControl_(n):t==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=_f(q1,e);if(M3 in e){const n=e[M3];if(t===tO){const i={...n};this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===F3){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===ZM?this.onConnectionShutdown_(n):t===O3?this.onReset_(n):t===eO?Oy("Server Error: "+n):t===L3?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Oy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),qv!==n&&Ks("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Hf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(YM))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Hf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(XM))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:B3,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(e){this.allowedEvents_=e,this.listeners_={},nr(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let i=0;i<n.length;i++)n[i].callback.apply(n[i].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!n||n===i[s].context)){i.splice(s,1);return}}validateEventType_(e){nr(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0 extends u9{static getInstance(){return new v0}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!M7()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return nr(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=32,U3=768;class Wn{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let n=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function On(){return new Wn("")}function mn(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function sc(r){return r.pieces_.length-r.pieceNum_}function ni(r){let e=r.pieceNum_;return e<r.pieces_.length&&e++,new Wn(r.pieces_,e)}function Kv(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function nO(r){let e="";for(let t=r.pieceNum_;t<r.pieces_.length;t++)r.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(r.pieces_[t])));return e||"/"}function Id(r,e=0){return r.pieces_.slice(r.pieceNum_+e)}function h9(r){if(r.pieceNum_>=r.pieces_.length)return null;const e=[];for(let t=r.pieceNum_;t<r.pieces_.length-1;t++)e.push(r.pieces_[t]);return new Wn(e,0)}function Ti(r,e){const t=[];for(let n=r.pieceNum_;n<r.pieces_.length;n++)t.push(r.pieces_[n]);if(e instanceof Wn)for(let n=e.pieceNum_;n<e.pieces_.length;n++)t.push(e.pieces_[n]);else{const n=e.split("/");for(let i=0;i<n.length;i++)n[i].length>0&&t.push(n[i])}return new Wn(t,0)}function yn(r){return r.pieceNum_>=r.pieces_.length}function Hs(r,e){const t=mn(r),n=mn(e);if(t===null)return e;if(t===n)return Hs(ni(r),ni(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+r+")")}function iO(r,e){const t=Id(r,0),n=Id(e,0);for(let i=0;i<t.length&&i<n.length;i++){const s=fu(t[i],n[i]);if(s!==0)return s}return t.length===n.length?0:t.length<n.length?-1:1}function Yv(r,e){if(sc(r)!==sc(e))return!1;for(let t=r.pieceNum_,n=e.pieceNum_;t<=r.pieces_.length;t++,n++)if(r.pieces_[t]!==e.pieces_[n])return!1;return!0}function Lo(r,e){let t=r.pieceNum_,n=e.pieceNum_;if(sc(r)>sc(e))return!1;for(;t<r.pieces_.length;){if(r.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0}class sO{constructor(e,t){this.errorPrefix_=t,this.parts_=Id(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=bg(this.parts_[n]);f9(this)}}function oO(r,e){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(e),r.byteLength_+=bg(e),f9(r)}function aO(r){const e=r.parts_.pop();r.byteLength_-=bg(e),r.parts_.length>0&&(r.byteLength_-=1)}function f9(r){if(r.byteLength_>U3)throw new Error(r.errorPrefix_+"has a key path longer than "+U3+" bytes ("+r.byteLength_+").");if(r.parts_.length>z3)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+z3+") or object contains a cycle "+Pc(r))}function Pc(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv extends u9{static getInstance(){return new Xv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}getInitialEvent(e){return nr(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=1e3,lO=60*5*1e3,V3=30*1e3,cO=1.3,uO=3e4,hO="server_kill",$3=3;class Za extends c9{constructor(e,t,n,i,s,o,l,c){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=Za.nextPersistentConnectionId_++,this.log_=Zd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xf,this.maxReconnectDelay_=lO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&v0.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const i=++this.requestNumber_,s={r:i,a:e,b:t};this.log_(ts(s)),nr(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const t=new Qd,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?t.resolve(l):t.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),t.promise}listen(e,t,n,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),nr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),nr(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){const t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);const s={p:n},o="q";e.tag&&(s.q=t._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const c=l.d,a=l.s;Za.warnOnListenWarnings_(c,t),(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",l),a!=="ok"&&this.removeListen_(n,i),e.onComplete&&e.onComplete(a,c))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Ra(e,"w")){const n=wh(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const i='".indexOn": "'+t._queryParams.getIndex().toString()+'"',s=t._path.toString();Ks(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||tP(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=V3)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=eP(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(t,n,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),nr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);const s={p:e},o="n";i&&(s.q=n,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){const s={p:t,d:n};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,s){this.initConnection_();const o={p:t,d:n};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,s=>{this.log_(t+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,n=>{if(n.s!=="ok"){const s=n.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ts(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Oy("Unrecognized action received from server: "+ts(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){nr(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xf,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=xf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>uO&&(this.reconnectDelay_=xf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*cO)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Za.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const c=function(){l?l.close():(o=!0,n())},a=function(d){nr(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:c,sendRequest:a};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?bs("getToken() completed but was canceled"):(bs("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,l=new rO(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,h=>{Ks(h+" ("+this.repoInfo_.toString()+")"),this.interrupt(hO)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Ks(d),c())}}}interrupt(e){bs("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){bs("Resuming connection for reason: "+e),delete this.interruptReasons_[e],b3(this.interruptReasons_)&&(this.reconnectDelay_=xf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;t?n=t.map(s=>Wv(s)).join("$"):n="default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const n=new Wn(e).toString();let i;if(this.listens.has(n)){const s=this.listens.get(n);i=s.get(t),s.delete(t),s.size===0&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){bs("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=$3&&(this.reconnectDelay_=V3,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){bs("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=$3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+V7.replace(/\./g,"-")]=1,M7()?e["framework.cordova"]=1:HR()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=v0.getInstance().currentlyOnline();return b3(this.interruptReasons_)&&e}}Za.nextPersistentConnectionId_=0;Za.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new gn(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new gn(xh,e),i=new gn(xh,t);return this.compare(n,i)!==0}minPost(){return gn.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kp;class d9 extends wg{static get __EMPTY_NODE(){return Kp}static set __EMPTY_NODE(e){Kp=e}compare(e,t){return fu(e.name,t.name)}isDefinedOn(e){throw Uh("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return gn.MIN}maxPost(){return new gn(tu,Kp)}makePost(e,t){return nr(typeof e=="string","KeyIndex indexValue must always be a string."),new gn(e,Kp)}toString(){return".key"}}const Zu=new d9;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yp=class{constructor(e,t,n,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},wo=class jf{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=n??jf.RED,this.left=i??xa.EMPTY_NODE,this.right=s??xa.EMPTY_NODE}copy(e,t,n,i,s){return new jf(e??this.key,t??this.value,n??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,t,n),null):s===0?i=i.copy(null,t,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return xa.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,i;if(n=this,t(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),t(e,n.key)===0){if(n.right.isEmpty())return xa.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,jf.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,jf.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};wo.RED=!0;wo.BLACK=!1;class fO{copy(e,t,n,i,s){return this}insert(e,t,n){return new wo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let xa=class Am{constructor(e,t=Am.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Am(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,wo.BLACK,null,null))}remove(e){return new Am(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,wo.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),t===0)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();)if(t=this.comparator_(e,n.key),t===0){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else t<0?n=n.left:t>0&&(i=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Yp(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Yp(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Yp(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Yp(this.root_,null,this.comparator_,!0,e)}};xa.EMPTY_NODE=new fO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(r,e){return fu(r.name,e.name)}function Qv(r,e){return fu(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dy;function pO(r){Dy=r}const p9=function(r){return typeof r=="number"?"number:"+H7(r):"string:"+r},m9=function(r){if(r.isLeafNode()){const e=r.val();nr(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ra(e,".sv"),"Priority must be a string or number.")}else nr(r===Dy||r.isEmpty(),"priority of unexpected type.");nr(r===Dy||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W3;class as{static set __childrenNodeConstructor(e){W3=e}static get __childrenNodeConstructor(){return W3}constructor(e,t=as.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,nr(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),m9(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new as(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:as.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return yn(e)?this:mn(e)===".priority"?this.priorityNode_:as.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:as.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=mn(e);return n===null?t:t.isEmpty()&&n!==".priority"?this:(nr(n!==".priority"||sc(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,as.__childrenNodeConstructor.EMPTY_NODE.updateChild(ni(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+p9(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=H7(this.value_):e+=this.value_,this.lazyHash_=W7(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===as.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof as.__childrenNodeConstructor?-1:(nr(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,i=as.VALUE_TYPE_ORDER.indexOf(t),s=as.VALUE_TYPE_ORDER.indexOf(n);return nr(i>=0,"Unknown leaf type: "+t),nr(s>=0,"Unknown leaf type: "+n),i===s?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}as.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g9,y9;function mO(r){g9=r}function gO(r){y9=r}class yO extends wg{compare(e,t){const n=e.node.getPriority(),i=t.node.getPriority(),s=n.compareTo(i);return s===0?fu(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return gn.MIN}maxPost(){return new gn(tu,new as("[PRIORITY-POST]",y9))}makePost(e,t){const n=g9(e);return new gn(t,new as("[PRIORITY-POST]",n))}toString(){return".priority"}}const Ni=new yO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=Math.log(2);class vO{constructor(e){const t=s=>parseInt(Math.log(s)/bO,10),n=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const i=n(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const w0=function(r,e,t,n){r.sort(e);const i=function(c,a){const u=a-c;let d,f;if(u===0)return null;if(u===1)return d=r[c],f=t?t(d):d,new wo(f,d.node,wo.BLACK,null,null);{const h=parseInt(u/2,10)+c,m=i(c,h),g=i(h+1,a);return d=r[h],f=t?t(d):d,new wo(f,d.node,wo.BLACK,m,g)}},s=function(c){let a=null,u=null,d=r.length;const f=function(m,g){const p=d-m,y=d;d-=m;const b=i(p+1,y),v=r[p],E=t?t(v):v;h(new wo(E,v.node,g,null,b))},h=function(m){a?(a.left=m,a=m):(u=m,a=m)};for(let m=0;m<c.count;++m){const g=c.nextBitIsOne(),p=Math.pow(2,c.count-(m+1));g?f(p,wo.BLACK):(f(p,wo.BLACK),f(p,wo.RED))}return u},o=new vO(r.length),l=s(o);return new xa(n||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H1;const xu={};class Xa{static get Default(){return nr(xu&&Ni,"ChildrenNode.ts has not been loaded"),H1=H1||new Xa({".priority":xu},{".priority":Ni}),H1}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=wh(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof xa?t:null}hasIndex(e){return Ra(this.indexSet_,e.toString())}addIndex(e,t){nr(e!==Zu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const s=t.getIterator(gn.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),n.push(o),o=s.getNext();let l;i?l=w0(n,e.getCompare()):l=xu;const c=e.toString(),a={...this.indexSet_};a[c]=e;const u={...this.indexes_};return u[c]=l,new Xa(u,a)}addToIndexes(e,t){const n=y0(this.indexes_,(i,s)=>{const o=wh(this.indexSet_,s);if(nr(o,"Missing index implementation for "+s),i===xu)if(o.isDefinedOn(e.node)){const l=[],c=t.getIterator(gn.Wrap);let a=c.getNext();for(;a;)a.name!==e.name&&l.push(a),a=c.getNext();return l.push(e),w0(l,o.getCompare())}else return xu;else{const l=t.get(e.name);let c=i;return l&&(c=c.remove(new gn(e.name,l))),c.insert(e,e.node)}});return new Xa(n,this.indexSet_)}removeFromIndexes(e,t){const n=y0(this.indexes_,i=>{if(i===xu)return i;{const s=t.get(e.name);return s?i.remove(new gn(e.name,s)):i}});return new Xa(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sf;class Gr{static get EMPTY_NODE(){return Sf||(Sf=new Gr(new xa(Qv),null,Xa.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&m9(this.priorityNode_),this.children_.isEmpty()&&nr(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Sf}updatePriority(e){return this.children_.isEmpty()?this:new Gr(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Sf:t}}getChild(e){const t=mn(e);return t===null?this:this.getImmediateChild(t).getChild(ni(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(nr(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const n=new gn(e,t);let i,s;t.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,t),s=this.indexMap_.addToIndexes(n,this.children_));const o=i.isEmpty()?Sf:this.priorityNode_;return new Gr(i,o,s)}}updateChild(e,t){const n=mn(e);if(n===null)return t;{nr(mn(e)!==".priority"||sc(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(ni(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,i=0,s=!0;if(this.forEachChild(Ni,(o,l)=>{t[o]=l.val(e),n++,s&&Gr.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*n){const o=[];for(const l in t)o[l]=t[l];return o}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+p9(this.getPriority().val())+":"),this.forEachChild(Ni,(t,n)=>{const i=n.hash();i!==""&&(e+=":"+t+":"+i)}),this.lazyHash_=e===""?"":W7(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const i=this.resolveIndex_(n);if(i){const s=i.getPredecessorKey(new gn(e,t));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const n=t.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new gn(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const n=t.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new gn(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(i=>t(i.name,i.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,gn.Wrap);let s=i.peek();for(;s!=null&&t.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,gn.Wrap);let s=i.peek();for(;s!=null&&t.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ep?-1:0}withIndex(e){if(e===Zu||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Gr(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Zu||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const n=this.getIterator(Ni),i=t.getIterator(Ni);let s=n.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=n.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Zu?null:this.indexMap_.get(e.toString())}}Gr.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class wO extends Gr{constructor(){super(new xa(Qv),Gr.EMPTY_NODE,Xa.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Gr.EMPTY_NODE}isEmpty(){return!1}}const ep=new wO;Object.defineProperties(gn,{MIN:{value:new gn(xh,Gr.EMPTY_NODE)},MAX:{value:new gn(tu,ep)}});d9.__EMPTY_NODE=Gr.EMPTY_NODE;as.__childrenNodeConstructor=Gr;pO(ep);gO(ep);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=!0;function es(r,e=null){if(r===null)return Gr.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(e=r[".priority"]),nr(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const t=r;return new as(t,es(e))}if(!(r instanceof Array)&&_O){const t=[];let n=!1;if(_s(r,(o,l)=>{if(o.substring(0,1)!=="."){const c=es(l);c.isEmpty()||(n=n||!c.getPriority().isEmpty(),t.push(new gn(o,c)))}}),t.length===0)return Gr.EMPTY_NODE;const s=w0(t,dO,o=>o.name,Qv);if(n){const o=w0(t,Ni.getCompare());return new Gr(s,es(e),new Xa({".priority":o},{".priority":Ni}))}else return new Gr(s,es(e),Xa.Default)}else{let t=Gr.EMPTY_NODE;return _s(r,(n,i)=>{if(Ra(r,n)&&n.substring(0,1)!=="."){const s=es(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(n,s))}}),t.updatePriority(es(e))}}mO(es);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO extends wg{constructor(e){super(),this.indexPath_=e,nr(!yn(e)&&mn(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),i=this.extractChild(t.node),s=n.compareTo(i);return s===0?fu(e.name,t.name):s}makePost(e,t){const n=es(e),i=Gr.EMPTY_NODE.updateChild(this.indexPath_,n);return new gn(t,i)}maxPost(){const e=Gr.EMPTY_NODE.updateChild(this.indexPath_,ep);return new gn(tu,e)}toString(){return Id(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO extends wg{compare(e,t){const n=e.node.compareTo(t.node);return n===0?fu(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return gn.MIN}maxPost(){return gn.MAX}makePost(e,t){const n=es(e);return new gn(t,n)}toString(){return".value"}}const kO=new SO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9(r){return{type:"value",snapshotNode:r}}function Sh(r,e){return{type:"child_added",snapshotNode:e,childName:r}}function Ad(r,e){return{type:"child_removed",snapshotNode:e,childName:r}}function Td(r,e,t){return{type:"child_changed",snapshotNode:e,childName:r,oldSnap:t}}function EO(r,e){return{type:"child_moved",snapshotNode:e,childName:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e){this.index_=e}updateChild(e,t,n,i,s,o){nr(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(t);return l.getChild(i).equals(n.getChild(i))&&l.isEmpty()===n.isEmpty()||(o!=null&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(Ad(t,l)):nr(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Sh(t,n)):o.trackChildChange(Td(t,n,l))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(t,n).withIndex(this.index_)}updateFullNode(e,t,n){return n!=null&&(e.isLeafNode()||e.forEachChild(Ni,(i,s)=>{t.hasChild(i)||n.trackChildChange(Ad(i,s))}),t.isLeafNode()||t.forEachChild(Ni,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||n.trackChildChange(Td(i,s,o))}else n.trackChildChange(Sh(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Gr.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e){this.indexedFilter_=new Jv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Nd.getStartPost_(e),this.endPost_=Nd.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,i,s,o){return this.matches(new gn(t,n))||(n=Gr.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,s,o)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Gr.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Gr.EMPTY_NODE);const s=this;return t.forEachChild(Ni,(o,l)=>{s.matches(new gn(o,l))||(i=i.updateImmediateChild(o,Gr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=t=>{const n=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new Nd(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,i,s,o){return this.rangedFilter_.matches(new gn(t,n))||(n=Gr.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,s,o):this.fullLimitUpdateChild_(e,t,n,s,o)}updateFullNode(e,t,n){let i;if(t.isLeafNode()||t.isEmpty())i=Gr.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=Gr.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(Gr.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,Gr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,h)=>d(h,f)}else o=this.index_.getCompare();const l=e;nr(l.numChildren()===this.limit_,"");const c=new gn(t,n),a=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(l.hasChild(t)){const d=l.getImmediateChild(t);let f=i.getChildAfterChild(this.index_,a,this.reverse_);for(;f!=null&&(f.name===t||l.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const h=f==null?1:o(f,c);if(u&&!n.isEmpty()&&h>=0)return s!=null&&s.trackChildChange(Td(t,n,d)),l.updateImmediateChild(t,n);{s!=null&&s.trackChildChange(Ad(t,d));const g=l.updateImmediateChild(t,Gr.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(Sh(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}}else return n.isEmpty()?e:u&&o(a,c)>=0?(s!=null&&(s.trackChildChange(Ad(a.name,a.node)),s.trackChildChange(Sh(t,n))),l.updateImmediateChild(t,n).updateImmediateChild(a.name,Gr.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ni}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return nr(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return nr(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xh}hasEnd(){return this.endSet_}getIndexEndValue(){return nr(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return nr(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:tu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return nr(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ni}copy(){const e=new Zv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function IO(r){return r.loadsAllData()?new Jv(r.getIndex()):r.hasLimit()?new CO(r):new Nd(r)}function q3(r){const e={};if(r.isDefault())return e;let t;if(r.index_===Ni?t="$priority":r.index_===kO?t="$value":r.index_===Zu?t="$key":(nr(r.index_ instanceof xO,"Unrecognized index type!"),t=r.index_.toString()),e.orderBy=ts(t),r.startSet_){const n=r.startAfterSet_?"startAfter":"startAt";e[n]=ts(r.indexStartValue_),r.startNameSet_&&(e[n]+=","+ts(r.indexStartName_))}if(r.endSet_){const n=r.endBeforeSet_?"endBefore":"endAt";e[n]=ts(r.indexEndValue_),r.endNameSet_&&(e[n]+=","+ts(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?e.limitToFirst=r.limit_:e.limitToLast=r.limit_),e}function H3(r){const e={};if(r.startSet_&&(e.sp=r.indexStartValue_,r.startNameSet_&&(e.sn=r.indexStartName_),e.sin=!r.startAfterSet_),r.endSet_&&(e.ep=r.indexEndValue_,r.endNameSet_&&(e.en=r.indexEndName_),e.ein=!r.endBeforeSet_),r.limitSet_){e.l=r.limit_;let t=r.viewFrom_;t===""&&(r.isViewFromLeft()?t="l":t="r"),e.vf=t}return r.index_!==Ni&&(e.i=r.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0 extends c9{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(nr(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=Zd("p:rest:"),this.listens_={}}listen(e,t,n,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=_0.getListenId_(e,n),l={};this.listens_[o]=l;const c=q3(e._queryParams);this.restRequest_(s+".json",c,(a,u)=>{let d=u;if(a===404&&(d=null,a=null),a===null&&this.onDataUpdate_(s,d,!1,n),wh(this.listens_,o)===l){let f;a?a===401?f="permission_denied":f="rest_error:"+a:f="ok",i(f,null)}})}unlisten(e,t){const n=_0.getListenId_(e,t);delete this.listens_[n]}get(e){const t=q3(e._queryParams),n=e._path.toString(),i=new Qd;return this.restRequest_(n+".json",t,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(n,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+rP(t);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(n&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=xd(l.responseText)}catch{Ks("Failed to parse JSON response for "+o+": "+l.responseText)}n(null,c)}else l.status!==401&&l.status!==404&&Ks("Got unsuccessful REST response for "+o+" Status: "+l.status),n(l.status);n=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(){this.rootNode_=Gr.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(){return{value:null,children:new Map}}function v9(r,e,t){if(yn(e))r.value=t,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(e,t);else{const n=mn(e);r.children.has(n)||r.children.set(n,x0());const i=r.children.get(n);e=ni(e),v9(i,e,t)}}function Fy(r,e,t){r.value!==null?t(e,r.value):TO(r,(n,i)=>{const s=new Wn(e.toString()+"/"+n);Fy(i,s,t)})}function TO(r,e){r.children.forEach((t,n)=>{e(n,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&_s(this.last_,(n,i)=>{t[n]=t[n]-i}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=10*1e3,jO=30*1e3,RO=5*60*1e3;class PO{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new NO(e);const n=G3+(jO-G3)*Math.random();Hf(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;_s(e,(i,s)=>{s>0&&Ra(this.statsToReport_,i)&&(t[i]=s,n=!0)}),n&&this.server_.reportStats(t),Hf(this.reportStats_.bind(this),Math.floor(Math.random()*2*RO))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jo;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Jo||(Jo={}));function e5(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function t5(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function r5(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Jo.ACK_USER_WRITE,this.source=e5()}operationForChild(e){if(yn(this.path)){if(this.affectedTree.value!=null)return nr(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Wn(e));return new S0(On(),t,this.revert)}}else return nr(mn(this.path)===e,"operationForChild called for unrelated child."),new S0(ni(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t){this.source=e,this.path=t,this.type=Jo.LISTEN_COMPLETE}operationForChild(e){return yn(this.path)?new jd(this.source,On()):new jd(this.source,ni(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Jo.OVERWRITE}operationForChild(e){return yn(this.path)?new ru(this.source,On(),this.snap.getImmediateChild(e)):new ru(this.source,ni(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Jo.MERGE}operationForChild(e){if(yn(this.path)){const t=this.children.subtree(new Wn(e));return t.isEmpty()?null:t.value?new ru(this.source,On(),t.value):new kh(this.source,On(),t)}else return nr(mn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new kh(this.source,ni(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(yn(e))return this.isFullyInitialized()&&!this.filtered_;const t=mn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function OO(r,e,t,n){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&r.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(EO(o.childName,o.snapshotNode))}),kf(r,i,"child_removed",e,n,t),kf(r,i,"child_added",e,n,t),kf(r,i,"child_moved",s,n,t),kf(r,i,"child_changed",e,n,t),kf(r,i,"value",e,n,t),i}function kf(r,e,t,n,i,s){const o=n.filter(l=>l.type===t);o.sort((l,c)=>DO(r,l,c)),o.forEach(l=>{const c=LO(r,l,s);i.forEach(a=>{a.respondsTo(l.type)&&e.push(a.createEvent(c,r.query_))})})}function LO(r,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,r.index_)),e}function DO(r,e,t){if(e.childName==null||t.childName==null)throw Uh("Should only compare child_ events.");const n=new gn(e.childName,e.snapshotNode),i=new gn(t.childName,t.snapshotNode);return r.index_.compare(n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(r,e){return{eventCache:r,serverCache:e}}function Gf(r,e,t,n){return _g(new oc(e,t,n),r.serverCache)}function w9(r,e,t,n){return _g(r.eventCache,new oc(e,t,n))}function k0(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function nu(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G1;const FO=()=>(G1||(G1=new xa(xM)),G1);class ri{static fromObject(e){let t=new ri(null);return _s(e,(n,i)=>{t=t.set(new Wn(n),i)}),t}constructor(e,t=FO()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:On(),value:this.value};if(yn(e))return null;{const n=mn(e),i=this.children.get(n);if(i!==null){const s=i.findRootMostMatchingPathAndValue(ni(e),t);return s!=null?{path:Ti(new Wn(n),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(yn(e))return this;{const t=mn(e),n=this.children.get(t);return n!==null?n.subtree(ni(e)):new ri(null)}}set(e,t){if(yn(e))return new ri(t,this.children);{const n=mn(e),s=(this.children.get(n)||new ri(null)).set(ni(e),t),o=this.children.insert(n,s);return new ri(this.value,o)}}remove(e){if(yn(e))return this.children.isEmpty()?new ri(null):new ri(null,this.children);{const t=mn(e),n=this.children.get(t);if(n){const i=n.remove(ni(e));let s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new ri(null):new ri(this.value,s)}else return this}}get(e){if(yn(e))return this.value;{const t=mn(e),n=this.children.get(t);return n?n.get(ni(e)):null}}setTree(e,t){if(yn(e))return t;{const n=mn(e),s=(this.children.get(n)||new ri(null)).setTree(ni(e),t);let o;return s.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,s),new ri(this.value,o)}}fold(e){return this.fold_(On(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((i,s)=>{n[i]=s.fold_(Ti(e,i),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,On(),t)}findOnPath_(e,t,n){const i=this.value?n(t,this.value):!1;if(i)return i;if(yn(e))return null;{const s=mn(e),o=this.children.get(s);return o?o.findOnPath_(ni(e),Ti(t,s),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,On(),t)}foreachOnPath_(e,t,n){if(yn(e))return this;{this.value&&n(t,this.value);const i=mn(e),s=this.children.get(i);return s?s.foreachOnPath_(ni(e),Ti(t,i),n):new ri(null)}}foreach(e){this.foreach_(On(),e)}foreach_(e,t){this.children.inorderTraversal((n,i)=>{i.foreach_(Ti(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.writeTree_=e}static empty(){return new na(new ri(null))}}function Kf(r,e,t){if(yn(e))return new na(new ri(t));{const n=r.writeTree_.findRootMostValueAndPath(e);if(n!=null){const i=n.path;let s=n.value;const o=Hs(i,e);return s=s.updateChild(o,t),new na(r.writeTree_.set(i,s))}else{const i=new ri(t),s=r.writeTree_.setTree(e,i);return new na(s)}}}function By(r,e,t){let n=r;return _s(t,(i,s)=>{n=Kf(n,Ti(e,i),s)}),n}function K3(r,e){if(yn(e))return na.empty();{const t=r.writeTree_.setTree(e,new ri(null));return new na(t)}}function zy(r,e){return du(r,e)!=null}function du(r,e){const t=r.writeTree_.findRootMostValueAndPath(e);return t!=null?r.writeTree_.get(t.path).getChild(Hs(t.path,e)):null}function Y3(r){const e=[],t=r.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Ni,(n,i)=>{e.push(new gn(n,i))}):r.writeTree_.children.inorderTraversal((n,i)=>{i.value!=null&&e.push(new gn(n,i.value))}),e}function Jl(r,e){if(yn(e))return r;{const t=du(r,e);return t!=null?new na(new ri(t)):new na(r.writeTree_.subtree(e))}}function Uy(r){return r.writeTree_.isEmpty()}function Eh(r,e){return _9(On(),r.writeTree_,e)}function _9(r,e,t){if(e.value!=null)return t.updateChild(r,e.value);{let n=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(nr(s.value!==null,"Priority writes must always be leaf nodes"),n=s.value):t=_9(Ti(r,i),s,t)}),!t.getChild(r).isEmpty()&&n!==null&&(t=t.updateChild(Ti(r,".priority"),n)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(r,e){return E9(e,r)}function BO(r,e,t,n,i){nr(n>r.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),r.allWrites.push({path:e,snap:t,writeId:n,visible:i}),i&&(r.visibleWrites=Kf(r.visibleWrites,e,t)),r.lastWriteId=n}function zO(r,e,t,n){nr(n>r.lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:e,children:t,writeId:n,visible:!0}),r.visibleWrites=By(r.visibleWrites,e,t),r.lastWriteId=n}function UO(r,e){for(let t=0;t<r.allWrites.length;t++){const n=r.allWrites[t];if(n.writeId===e)return n}return null}function VO(r,e){const t=r.allWrites.findIndex(l=>l.writeId===e);nr(t>=0,"removeWrite called with nonexistent writeId.");const n=r.allWrites[t];r.allWrites.splice(t,1);let i=n.visible,s=!1,o=r.allWrites.length-1;for(;i&&o>=0;){const l=r.allWrites[o];l.visible&&(o>=t&&$O(l,n.path)?i=!1:Lo(n.path,l.path)&&(s=!0)),o--}if(i){if(s)return WO(r),!0;if(n.snap)r.visibleWrites=K3(r.visibleWrites,n.path);else{const l=n.children;_s(l,c=>{r.visibleWrites=K3(r.visibleWrites,Ti(n.path,c))})}return!0}else return!1}function $O(r,e){if(r.snap)return Lo(r.path,e);for(const t in r.children)if(r.children.hasOwnProperty(t)&&Lo(Ti(r.path,t),e))return!0;return!1}function WO(r){r.visibleWrites=x9(r.allWrites,qO,On()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function qO(r){return r.visible}function x9(r,e,t){let n=na.empty();for(let i=0;i<r.length;++i){const s=r[i];if(e(s)){const o=s.path;let l;if(s.snap)Lo(t,o)?(l=Hs(t,o),n=Kf(n,l,s.snap)):Lo(o,t)&&(l=Hs(o,t),n=Kf(n,On(),s.snap.getChild(l)));else if(s.children){if(Lo(t,o))l=Hs(t,o),n=By(n,l,s.children);else if(Lo(o,t))if(l=Hs(o,t),yn(l))n=By(n,On(),s.children);else{const c=wh(s.children,mn(l));if(c){const a=c.getChild(ni(l));n=Kf(n,On(),a)}}}else throw Uh("WriteRecord should have .snap or .children")}}return n}function S9(r,e,t,n,i){if(!n&&!i){const s=du(r.visibleWrites,e);if(s!=null)return s;{const o=Jl(r.visibleWrites,e);if(Uy(o))return t;if(t==null&&!zy(o,On()))return null;{const l=t||Gr.EMPTY_NODE;return Eh(o,l)}}}else{const s=Jl(r.visibleWrites,e);if(!i&&Uy(s))return t;if(!i&&t==null&&!zy(s,On()))return null;{const o=function(a){return(a.visible||i)&&(!n||!~n.indexOf(a.writeId))&&(Lo(a.path,e)||Lo(e,a.path))},l=x9(r.allWrites,o,e),c=t||Gr.EMPTY_NODE;return Eh(l,c)}}}function HO(r,e,t){let n=Gr.EMPTY_NODE;const i=du(r.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ni,(s,o)=>{n=n.updateImmediateChild(s,o)}),n;if(t){const s=Jl(r.visibleWrites,e);return t.forEachChild(Ni,(o,l)=>{const c=Eh(Jl(s,new Wn(o)),l);n=n.updateImmediateChild(o,c)}),Y3(s).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}else{const s=Jl(r.visibleWrites,e);return Y3(s).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}}function GO(r,e,t,n,i){nr(n||i,"Either existingEventSnap or existingServerSnap must exist");const s=Ti(e,t);if(zy(r.visibleWrites,s))return null;{const o=Jl(r.visibleWrites,s);return Uy(o)?i.getChild(t):Eh(o,i.getChild(t))}}function KO(r,e,t,n){const i=Ti(e,t),s=du(r.visibleWrites,i);if(s!=null)return s;if(n.isCompleteForChild(t)){const o=Jl(r.visibleWrites,i);return Eh(o,n.getNode().getImmediateChild(t))}else return null}function YO(r,e){return du(r.visibleWrites,e)}function XO(r,e,t,n,i,s,o){let l;const c=Jl(r.visibleWrites,e),a=du(c,On());if(a!=null)l=a;else if(t!=null)l=Eh(c,t);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const u=[],d=o.getCompare(),f=s?l.getReverseIteratorFrom(n,o):l.getIteratorFrom(n,o);let h=f.getNext();for(;h&&u.length<i;)d(h,n)!==0&&u.push(h),h=f.getNext();return u}else return[]}function QO(){return{visibleWrites:na.empty(),allWrites:[],lastWriteId:-1}}function E0(r,e,t,n){return S9(r.writeTree,r.treePath,e,t,n)}function n5(r,e){return HO(r.writeTree,r.treePath,e)}function X3(r,e,t,n){return GO(r.writeTree,r.treePath,e,t,n)}function C0(r,e){return YO(r.writeTree,Ti(r.treePath,e))}function JO(r,e,t,n,i,s){return XO(r.writeTree,r.treePath,e,t,n,i,s)}function i5(r,e,t){return KO(r.writeTree,r.treePath,e,t)}function k9(r,e){return E9(Ti(r.treePath,e),r.writeTree)}function E9(r,e){return{treePath:r,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;nr(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),nr(n!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(n,Td(n,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(n);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(n,Ad(n,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(n,Sh(n,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(n,Td(n,e.snapshotNode,i.oldSnap));else throw Uh("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}}const C9=new eL;class s5{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new oc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return i5(this.writes_,e,n)}}getChildAfterChild(e,t,n){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:nu(this.viewCache_),s=JO(this.writes_,i,t,1,n,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(r){return{filter:r}}function rL(r,e){nr(e.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),nr(e.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function nL(r,e,t,n,i){const s=new ZO;let o,l;if(t.type===Jo.OVERWRITE){const a=t;a.source.fromUser?o=Vy(r,e,a.path,a.snap,n,i,s):(nr(a.source.fromServer,"Unknown source."),l=a.source.tagged||e.serverCache.isFiltered()&&!yn(a.path),o=I0(r,e,a.path,a.snap,n,i,l,s))}else if(t.type===Jo.MERGE){const a=t;a.source.fromUser?o=sL(r,e,a.path,a.children,n,i,s):(nr(a.source.fromServer,"Unknown source."),l=a.source.tagged||e.serverCache.isFiltered(),o=$y(r,e,a.path,a.children,n,i,l,s))}else if(t.type===Jo.ACK_USER_WRITE){const a=t;a.revert?o=lL(r,e,a.path,n,i,s):o=oL(r,e,a.path,a.affectedTree,n,i,s)}else if(t.type===Jo.LISTEN_COMPLETE)o=aL(r,e,t.path,n,s);else throw Uh("Unknown operation type: "+t.type);const c=s.getChanges();return iL(e,o,c),{viewCache:o,changes:c}}function iL(r,e,t){const n=e.eventCache;if(n.isFullyInitialized()){const i=n.getNode().isLeafNode()||n.getNode().isEmpty(),s=k0(r);(t.length>0||!r.eventCache.isFullyInitialized()||i&&!n.getNode().equals(s)||!n.getNode().getPriority().equals(s.getPriority()))&&t.push(b9(k0(e)))}}function I9(r,e,t,n,i,s){const o=e.eventCache;if(C0(n,t)!=null)return e;{let l,c;if(yn(t))if(nr(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const a=nu(e),u=a instanceof Gr?a:Gr.EMPTY_NODE,d=n5(n,u);l=r.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const a=E0(n,nu(e));l=r.filter.updateFullNode(e.eventCache.getNode(),a,s)}else{const a=mn(t);if(a===".priority"){nr(sc(t)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=X3(n,t,u,c);d!=null?l=r.filter.updatePriority(u,d):l=o.getNode()}else{const u=ni(t);let d;if(o.isCompleteForChild(a)){c=e.serverCache.getNode();const f=X3(n,t,o.getNode(),c);f!=null?d=o.getNode().getImmediateChild(a).updateChild(u,f):d=o.getNode().getImmediateChild(a)}else d=i5(n,a,e.serverCache);d!=null?l=r.filter.updateChild(o.getNode(),a,d,u,i,s):l=o.getNode()}}return Gf(e,l,o.isFullyInitialized()||yn(t),r.filter.filtersNodes())}}function I0(r,e,t,n,i,s,o,l){const c=e.serverCache;let a;const u=o?r.filter:r.filter.getIndexedFilter();if(yn(t))a=u.updateFullNode(c.getNode(),n,null);else if(u.filtersNodes()&&!c.isFiltered()){const h=c.getNode().updateChild(t,n);a=u.updateFullNode(c.getNode(),h,null)}else{const h=mn(t);if(!c.isCompleteForPath(t)&&sc(t)>1)return e;const m=ni(t),p=c.getNode().getImmediateChild(h).updateChild(m,n);h===".priority"?a=u.updatePriority(c.getNode(),p):a=u.updateChild(c.getNode(),h,p,m,C9,null)}const d=w9(e,a,c.isFullyInitialized()||yn(t),u.filtersNodes()),f=new s5(i,d,s);return I9(r,d,t,i,f,l)}function Vy(r,e,t,n,i,s,o){const l=e.eventCache;let c,a;const u=new s5(i,e,s);if(yn(t))a=r.filter.updateFullNode(e.eventCache.getNode(),n,o),c=Gf(e,a,!0,r.filter.filtersNodes());else{const d=mn(t);if(d===".priority")a=r.filter.updatePriority(e.eventCache.getNode(),n),c=Gf(e,a,l.isFullyInitialized(),l.isFiltered());else{const f=ni(t),h=l.getNode().getImmediateChild(d);let m;if(yn(f))m=n;else{const g=u.getCompleteChild(d);g!=null?Kv(f)===".priority"&&g.getChild(h9(f)).isEmpty()?m=g:m=g.updateChild(f,n):m=Gr.EMPTY_NODE}if(h.equals(m))c=e;else{const g=r.filter.updateChild(l.getNode(),d,m,f,u,o);c=Gf(e,g,l.isFullyInitialized(),r.filter.filtersNodes())}}}return c}function Q3(r,e){return r.eventCache.isCompleteForChild(e)}function sL(r,e,t,n,i,s,o){let l=e;return n.foreach((c,a)=>{const u=Ti(t,c);Q3(e,mn(u))&&(l=Vy(r,l,u,a,i,s,o))}),n.foreach((c,a)=>{const u=Ti(t,c);Q3(e,mn(u))||(l=Vy(r,l,u,a,i,s,o))}),l}function J3(r,e,t){return t.foreach((n,i)=>{e=e.updateChild(n,i)}),e}function $y(r,e,t,n,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,a;yn(t)?a=n:a=new ri(null).setTree(t,n);const u=e.serverCache.getNode();return a.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){const h=e.serverCache.getNode().getImmediateChild(d),m=J3(r,h,f);c=I0(r,c,new Wn(d),m,i,s,o,l)}}),a.children.inorderTraversal((d,f)=>{const h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){const m=e.serverCache.getNode().getImmediateChild(d),g=J3(r,m,f);c=I0(r,c,new Wn(d),g,i,s,o,l)}}),c}function oL(r,e,t,n,i,s,o){if(C0(i,t)!=null)return e;const l=e.serverCache.isFiltered(),c=e.serverCache;if(n.value!=null){if(yn(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return I0(r,e,t,c.getNode().getChild(t),i,s,l,o);if(yn(t)){let a=new ri(null);return c.getNode().forEachChild(Zu,(u,d)=>{a=a.set(new Wn(u),d)}),$y(r,e,t,a,i,s,l,o)}else return e}else{let a=new ri(null);return n.foreach((u,d)=>{const f=Ti(t,u);c.isCompleteForPath(f)&&(a=a.set(u,c.getNode().getChild(f)))}),$y(r,e,t,a,i,s,l,o)}}function aL(r,e,t,n,i){const s=e.serverCache,o=w9(e,s.getNode(),s.isFullyInitialized()||yn(t),s.isFiltered());return I9(r,o,t,n,C9,i)}function lL(r,e,t,n,i,s){let o;if(C0(n,t)!=null)return e;{const l=new s5(n,e,i),c=e.eventCache.getNode();let a;if(yn(t)||mn(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=E0(n,nu(e));else{const d=e.serverCache.getNode();nr(d instanceof Gr,"serverChildren would be complete if leaf node"),u=n5(n,d)}u=u,a=r.filter.updateFullNode(c,u,s)}else{const u=mn(t);let d=i5(n,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?a=r.filter.updateChild(c,u,d,ni(t),l,s):e.eventCache.getNode().hasChild(u)?a=r.filter.updateChild(c,u,Gr.EMPTY_NODE,ni(t),l,s):a=c,a.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=E0(n,nu(e)),o.isLeafNode()&&(a=r.filter.updateFullNode(a,o,s)))}return o=e.serverCache.isFullyInitialized()||C0(n,On())!=null,Gf(e,a,o,r.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new Jv(n.getIndex()),s=IO(n);this.processor_=tL(s);const o=t.serverCache,l=t.eventCache,c=i.updateFullNode(Gr.EMPTY_NODE,o.getNode(),null),a=s.updateFullNode(Gr.EMPTY_NODE,l.getNode(),null),u=new oc(c,o.isFullyInitialized(),i.filtersNodes()),d=new oc(a,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=_g(d,u),this.eventGenerator_=new MO(this.query_)}get query(){return this.query_}}function uL(r){return r.viewCache_.serverCache.getNode()}function hL(r){return k0(r.viewCache_)}function fL(r,e){const t=nu(r.viewCache_);return t&&(r.query._queryParams.loadsAllData()||!yn(e)&&!t.getImmediateChild(mn(e)).isEmpty())?t.getChild(e):null}function Z3(r){return r.eventRegistrations_.length===0}function dL(r,e){r.eventRegistrations_.push(e)}function e_(r,e,t){const n=[];if(t){nr(e==null,"A cancel should cancel all event registrations.");const i=r.query._path;r.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&n.push(o)})}if(e){let i=[];for(let s=0;s<r.eventRegistrations_.length;++s){const o=r.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(r.eventRegistrations_.slice(s+1));break}}r.eventRegistrations_=i}else r.eventRegistrations_=[];return n}function t_(r,e,t,n){e.type===Jo.MERGE&&e.source.queryId!==null&&(nr(nu(r.viewCache_),"We should always have a full cache before handling merges"),nr(k0(r.viewCache_),"Missing event cache, even though we have a server cache"));const i=r.viewCache_,s=nL(r.processor_,i,e,t,n);return rL(r.processor_,s.viewCache),nr(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=s.viewCache,A9(r,s.changes,s.viewCache.eventCache.getNode(),null)}function pL(r,e){const t=r.viewCache_.eventCache,n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ni,(s,o)=>{n.push(Sh(s,o))}),t.isFullyInitialized()&&n.push(b9(t.getNode())),A9(r,n,t.getNode(),e)}function A9(r,e,t,n){const i=n?[n]:r.eventRegistrations_;return OO(r.eventGenerator_,e,t,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A0;class T9{constructor(){this.views=new Map}}function mL(r){nr(!A0,"__referenceConstructor has already been defined"),A0=r}function gL(){return nr(A0,"Reference.ts has not been loaded"),A0}function yL(r){return r.views.size===0}function o5(r,e,t,n){const i=e.source.queryId;if(i!==null){const s=r.views.get(i);return nr(s!=null,"SyncTree gave us an op for an invalid query."),t_(s,e,t,n)}else{let s=[];for(const o of r.views.values())s=s.concat(t_(o,e,t,n));return s}}function N9(r,e,t,n,i){const s=e._queryIdentifier,o=r.views.get(s);if(!o){let l=E0(t,i?n:null),c=!1;l?c=!0:n instanceof Gr?(l=n5(t,n),c=!1):(l=Gr.EMPTY_NODE,c=!1);const a=_g(new oc(l,c,!1),new oc(n,i,!1));return new cL(e,a)}return o}function bL(r,e,t,n,i,s){const o=N9(r,e,n,i,s);return r.views.has(e._queryIdentifier)||r.views.set(e._queryIdentifier,o),dL(o,t),pL(o,t)}function vL(r,e,t,n){const i=e._queryIdentifier,s=[];let o=[];const l=ac(r);if(i==="default")for(const[c,a]of r.views.entries())o=o.concat(e_(a,t,n)),Z3(a)&&(r.views.delete(c),a.query._queryParams.loadsAllData()||s.push(a.query));else{const c=r.views.get(i);c&&(o=o.concat(e_(c,t,n)),Z3(c)&&(r.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return l&&!ac(r)&&s.push(new(gL())(e._repo,e._path)),{removed:s,events:o}}function j9(r){const e=[];for(const t of r.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Zl(r,e){let t=null;for(const n of r.views.values())t=t||fL(n,e);return t}function R9(r,e){if(e._queryParams.loadsAllData())return Sg(r);{const n=e._queryIdentifier;return r.views.get(n)}}function P9(r,e){return R9(r,e)!=null}function ac(r){return Sg(r)!=null}function Sg(r){for(const e of r.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T0;function wL(r){nr(!T0,"__referenceConstructor has already been defined"),T0=r}function _L(){return nr(T0,"Reference.ts has not been loaded"),T0}let xL=1;class r_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ri(null),this.pendingWriteTree_=QO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function M9(r,e,t,n,i){return BO(r.pendingWriteTree_,e,t,n,i),i?Wh(r,new ru(e5(),e,t)):[]}function SL(r,e,t,n){zO(r.pendingWriteTree_,e,t,n);const i=ri.fromObject(t);return Wh(r,new kh(e5(),e,i))}function Dl(r,e,t=!1){const n=UO(r.pendingWriteTree_,e);if(VO(r.pendingWriteTree_,e)){let s=new ri(null);return n.snap!=null?s=s.set(On(),!0):_s(n.children,o=>{s=s.set(new Wn(o),!0)}),Wh(r,new S0(n.path,s,t))}else return[]}function tp(r,e,t){return Wh(r,new ru(t5(),e,t))}function kL(r,e,t){const n=ri.fromObject(t);return Wh(r,new kh(t5(),e,n))}function EL(r,e){return Wh(r,new jd(t5(),e))}function CL(r,e,t){const n=l5(r,t);if(n){const i=c5(n),s=i.path,o=i.queryId,l=Hs(s,e),c=new jd(r5(o),l);return u5(r,s,c)}else return[]}function N0(r,e,t,n,i=!1){const s=e._path,o=r.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||P9(o,e))){const c=vL(o,e,t,n);yL(o)&&(r.syncPointTree_=r.syncPointTree_.remove(s));const a=c.removed;if(l=c.events,!i){const u=a.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=r.syncPointTree_.findOnPath(s,(f,h)=>ac(h));if(u&&!d){const f=r.syncPointTree_.subtree(s);if(!f.isEmpty()){const h=TL(f);for(let m=0;m<h.length;++m){const g=h[m],p=g.query,y=F9(r,g);r.listenProvider_.startListening(Yf(p),Rd(r,p),y.hashFn,y.onComplete)}}}!d&&a.length>0&&!n&&(u?r.listenProvider_.stopListening(Yf(e),null):a.forEach(f=>{const h=r.queryToTagMap.get(kg(f));r.listenProvider_.stopListening(Yf(f),h)}))}NL(r,a)}return l}function O9(r,e,t,n){const i=l5(r,n);if(i!=null){const s=c5(i),o=s.path,l=s.queryId,c=Hs(o,e),a=new ru(r5(l),c,t);return u5(r,o,a)}else return[]}function IL(r,e,t,n){const i=l5(r,n);if(i){const s=c5(i),o=s.path,l=s.queryId,c=Hs(o,e),a=ri.fromObject(t),u=new kh(r5(l),c,a);return u5(r,o,u)}else return[]}function Wy(r,e,t,n=!1){const i=e._path;let s=null,o=!1;r.syncPointTree_.foreachOnPath(i,(f,h)=>{const m=Hs(f,i);s=s||Zl(h,m),o=o||ac(h)});let l=r.syncPointTree_.get(i);l?(o=o||ac(l),s=s||Zl(l,On())):(l=new T9,r.syncPointTree_=r.syncPointTree_.set(i,l));let c;s!=null?c=!0:(c=!1,s=Gr.EMPTY_NODE,r.syncPointTree_.subtree(i).foreachChild((h,m)=>{const g=Zl(m,On());g&&(s=s.updateImmediateChild(h,g))}));const a=P9(l,e);if(!a&&!e._queryParams.loadsAllData()){const f=kg(e);nr(!r.queryToTagMap.has(f),"View does not exist, but we have a tag");const h=jL();r.queryToTagMap.set(f,h),r.tagToQueryMap.set(h,f)}const u=xg(r.pendingWriteTree_,i);let d=bL(l,e,t,u,s,c);if(!a&&!o&&!n){const f=R9(l,e);d=d.concat(RL(r,e,f))}return d}function a5(r,e,t){const i=r.pendingWriteTree_,s=r.syncPointTree_.findOnPath(e,(o,l)=>{const c=Hs(o,e),a=Zl(l,c);if(a)return a});return S9(i,e,s,t,!0)}function AL(r,e){const t=e._path;let n=null;r.syncPointTree_.foreachOnPath(t,(a,u)=>{const d=Hs(a,t);n=n||Zl(u,d)});let i=r.syncPointTree_.get(t);i?n=n||Zl(i,On()):(i=new T9,r.syncPointTree_=r.syncPointTree_.set(t,i));const s=n!=null,o=s?new oc(n,!0,!1):null,l=xg(r.pendingWriteTree_,e._path),c=N9(i,e,l,s?o.getNode():Gr.EMPTY_NODE,s);return hL(c)}function Wh(r,e){return L9(e,r.syncPointTree_,null,xg(r.pendingWriteTree_,On()))}function L9(r,e,t,n){if(yn(r.path))return D9(r,e,t,n);{const i=e.get(On());t==null&&i!=null&&(t=Zl(i,On()));let s=[];const o=mn(r.path),l=r.operationForChild(o),c=e.children.get(o);if(c&&l){const a=t?t.getImmediateChild(o):null,u=k9(n,o);s=s.concat(L9(l,c,a,u))}return i&&(s=s.concat(o5(i,r,n,t))),s}}function D9(r,e,t,n){const i=e.get(On());t==null&&i!=null&&(t=Zl(i,On()));let s=[];return e.children.inorderTraversal((o,l)=>{const c=t?t.getImmediateChild(o):null,a=k9(n,o),u=r.operationForChild(o);u&&(s=s.concat(D9(u,l,c,a)))}),i&&(s=s.concat(o5(i,r,n,t))),s}function F9(r,e){const t=e.query,n=Rd(r,t);return{hashFn:()=>(uL(e)||Gr.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return n?CL(r,t._path,n):EL(r,t._path);{const s=EM(i,t);return N0(r,t,null,s)}}}}function Rd(r,e){const t=kg(e);return r.queryToTagMap.get(t)}function kg(r){return r._path.toString()+"$"+r._queryIdentifier}function l5(r,e){return r.tagToQueryMap.get(e)}function c5(r){const e=r.indexOf("$");return nr(e!==-1&&e<r.length-1,"Bad queryKey."),{queryId:r.substr(e+1),path:new Wn(r.substr(0,e))}}function u5(r,e,t){const n=r.syncPointTree_.get(e);nr(n,"Missing sync point for query tag that we're tracking");const i=xg(r.pendingWriteTree_,e);return o5(n,t,i,null)}function TL(r){return r.fold((e,t,n)=>{if(t&&ac(t))return[Sg(t)];{let i=[];return t&&(i=j9(t)),_s(n,(s,o)=>{i=i.concat(o)}),i}})}function Yf(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(_L())(r._repo,r._path):r}function NL(r,e){for(let t=0;t<e.length;++t){const n=e[t];if(!n._queryParams.loadsAllData()){const i=kg(n),s=r.queryToTagMap.get(i);r.queryToTagMap.delete(i),r.tagToQueryMap.delete(s)}}}function jL(){return xL++}function RL(r,e,t){const n=e._path,i=Rd(r,e),s=F9(r,t),o=r.listenProvider_.startListening(Yf(e),i,s.hashFn,s.onComplete),l=r.syncPointTree_.subtree(n);if(i)nr(!ac(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((a,u,d)=>{if(!yn(a)&&u&&ac(u))return[Sg(u).query];{let f=[];return u&&(f=f.concat(j9(u).map(h=>h.query))),_s(d,(h,m)=>{f=f.concat(m)}),f}});for(let a=0;a<c.length;++a){const u=c[a];r.listenProvider_.stopListening(Yf(u),Rd(r,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new h5(t)}node(){return this.node_}}class f5{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ti(this.path_,e);return new f5(this.syncTree_,t)}node(){return a5(this.syncTree_,this.path_)}}const PL=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},n_=function(r,e,t){if(!r||typeof r!="object")return r;if(nr(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return ML(r[".sv"],e,t);if(typeof r[".sv"]=="object")return OL(r[".sv"],e);nr(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},ML=function(r,e,t){switch(r){case"timestamp":return t.timestamp;default:nr(!1,"Unexpected server value: "+r)}},OL=function(r,e,t){r.hasOwnProperty("increment")||nr(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const n=r.increment;typeof n!="number"&&nr(!1,"Unexpected increment value: "+n);const i=e.node();if(nr(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return n;const o=i.getValue();return typeof o!="number"?n:o+n},B9=function(r,e,t,n){return d5(e,new f5(t,r),n)},z9=function(r,e,t){return d5(r,new h5(e),t)};function d5(r,e,t){const n=r.getPriority().val(),i=n_(n,e.getImmediateChild(".priority"),t);let s;if(r.isLeafNode()){const o=r,l=n_(o.getValue(),e,t);return l!==o.getValue()||i!==o.getPriority().val()?new as(l,es(i)):r}else{const o=r;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new as(i))),o.forEachChild(Ni,(l,c)=>{const a=d5(c,e.getImmediateChild(l),t);a!==c&&(s=s.updateImmediateChild(l,a))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function m5(r,e){let t=e instanceof Wn?e:new Wn(e),n=r,i=mn(t);for(;i!==null;){const s=wh(n.node.children,i)||{children:{},childCount:0};n=new p5(i,n,s),t=ni(t),i=mn(t)}return n}function qh(r){return r.node.value}function U9(r,e){r.node.value=e,qy(r)}function V9(r){return r.node.childCount>0}function LL(r){return qh(r)===void 0&&!V9(r)}function Eg(r,e){_s(r.node.children,(t,n)=>{e(new p5(t,r,n))})}function $9(r,e,t,n){t&&e(r),Eg(r,i=>{$9(i,e,!0)})}function DL(r,e,t){let n=r.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function rp(r){return new Wn(r.parent===null?r.name:rp(r.parent)+"/"+r.name)}function qy(r){r.parent!==null&&FL(r.parent,r.name,r)}function FL(r,e,t){const n=LL(t),i=Ra(r.node.children,e);n&&i?(delete r.node.children[e],r.node.childCount--,qy(r)):!n&&!i&&(r.node.children[e]=t.node,r.node.childCount++,qy(r))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=/[\[\].#$\/\u0000-\u001F\u007F]/,zL=/[\[\].#$\u0000-\u001F\u007F]/,K1=10*1024*1024,g5=function(r){return typeof r=="string"&&r.length!==0&&!BL.test(r)},W9=function(r){return typeof r=="string"&&r.length!==0&&!zL.test(r)},UL=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),W9(r)},VL=function(r){return r===null||typeof r=="string"||typeof r=="number"&&!$v(r)||r&&typeof r=="object"&&Ra(r,".sv")},q9=function(r,e,t,n){n&&e===void 0||Cg(yg(r,"value"),e,t)},Cg=function(r,e,t){const n=t instanceof Wn?new sO(t,r):t;if(e===void 0)throw new Error(r+"contains undefined "+Pc(n));if(typeof e=="function")throw new Error(r+"contains a function "+Pc(n)+" with contents = "+e.toString());if($v(e))throw new Error(r+"contains "+e.toString()+" "+Pc(n));if(typeof e=="string"&&e.length>K1/3&&bg(e)>K1)throw new Error(r+"contains a string greater than "+K1+" utf8 bytes "+Pc(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(_s(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!g5(o)))throw new Error(r+" contains an invalid key ("+o+") "+Pc(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);oO(n,o),Cg(r,l,n),aO(n)}),i&&s)throw new Error(r+' contains ".value" child '+Pc(n)+" in addition to actual children.")}},$L=function(r,e){let t,n;for(t=0;t<e.length;t++){n=e[t];const s=Id(n);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!g5(s[o]))throw new Error(r+"contains an invalid key ("+s[o]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(iO);let i=null;for(t=0;t<e.length;t++){if(n=e[t],i!==null&&Lo(i,n))throw new Error(r+"contains a path "+i.toString()+" that is ancestor of another path "+n.toString());i=n}},WL=function(r,e,t,n){const i=yg(r,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];_s(e,(o,l)=>{const c=new Wn(o);if(Cg(i,l,Ti(t,c)),Kv(c)===".priority"&&!VL(l))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),$L(i,s)},H9=function(r,e,t,n){if(!W9(t))throw new Error(yg(r,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},qL=function(r,e,t,n){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),H9(r,e,t)},G9=function(r,e){if(mn(e)===".info")throw new Error(r+" failed = Can't modify data under /.info/")},HL=function(r,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!g5(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!UL(t))throw new Error(yg(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ig(r,e){let t=null;for(let n=0;n<e.length;n++){const i=e[n],s=i.getPath();t!==null&&!Yv(s,t.path)&&(r.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&r.eventLists_.push(t)}function K9(r,e,t){Ig(r,t),Y9(r,n=>Yv(n,e))}function Uo(r,e,t){Ig(r,t),Y9(r,n=>Lo(n,e)||Lo(e,n))}function Y9(r,e){r.recursionDepth_++;let t=!0;for(let n=0;n<r.eventLists_.length;n++){const i=r.eventLists_[n];if(i){const s=i.path;e(s)?(KL(r.eventLists_[n]),r.eventLists_[n]=null):t=!1}}t&&(r.eventLists_=[]),r.recursionDepth_--}function KL(r){for(let e=0;e<r.events.length;e++){const t=r.events[e];if(t!==null){r.events[e]=null;const n=t.getEventRunner();qf&&bs("event: "+t.toString()),$h(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL="repo_interrupt",XL=25;class QL{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new GL,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=x0(),this.transactionQueueTree_=new p5,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function JL(r,e,t){if(r.stats_=Hv(r.repoInfo_),r.forceRestClient_||TM())r.server_=new _0(r.repoInfo_,(n,i,s,o)=>{i_(r,n,i,s,o)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>s_(r,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ts(t)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}r.persistentConnection_=new Za(r.repoInfo_,e,(n,i,s,o)=>{i_(r,n,i,s,o)},n=>{s_(r,n)},n=>{ZL(r,n)},r.authTokenProvider_,r.appCheckProvider_,t),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(n=>{r.server_.refreshAuthToken(n)}),r.appCheckProvider_.addTokenChangeListener(n=>{r.server_.refreshAppCheckToken(n.token)}),r.statsReporter_=MM(r.repoInfo_,()=>new PO(r.stats_,r.server_)),r.infoData_=new AO,r.infoSyncTree_=new r_({startListening:(n,i,s,o)=>{let l=[];const c=r.infoData_.getNode(n._path);return c.isEmpty()||(l=tp(r.infoSyncTree_,n._path,c),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),y5(r,"connected",!1),r.serverSyncTree_=new r_({startListening:(n,i,s,o)=>(r.server_.listen(n,s,i,(l,c)=>{const a=o(l,c);Uo(r.eventQueue_,n._path,a)}),[]),stopListening:(n,i)=>{r.server_.unlisten(n,i)}})}function X9(r){const t=r.infoData_.getNode(new Wn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Ag(r){return PL({timestamp:X9(r)})}function i_(r,e,t,n,i){r.dataUpdateCount++;const s=new Wn(e);t=r.interceptServerDataCallback_?r.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(n){const c=y0(t,a=>es(a));o=IL(r.serverSyncTree_,s,c,i)}else{const c=es(t);o=O9(r.serverSyncTree_,s,c,i)}else if(n){const c=y0(t,a=>es(a));o=kL(r.serverSyncTree_,s,c)}else{const c=es(t);o=tp(r.serverSyncTree_,s,c)}let l=s;o.length>0&&(l=Ch(r,s)),Uo(r.eventQueue_,l,o)}function s_(r,e){y5(r,"connected",e),e===!1&&nD(r)}function ZL(r,e){_s(e,(t,n)=>{y5(r,t,n)})}function y5(r,e,t){const n=new Wn("/.info/"+e),i=es(t);r.infoData_.updateSnapshot(n,i);const s=tp(r.infoSyncTree_,n,i);Uo(r.eventQueue_,n,s)}function b5(r){return r.nextWriteId_++}function eD(r,e,t){const n=AL(r.serverSyncTree_,e);return n!=null?Promise.resolve(n):r.server_.get(e).then(i=>{const s=es(i).withIndex(e._queryParams.getIndex());Wy(r.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=tp(r.serverSyncTree_,e._path,s);else{const l=Rd(r.serverSyncTree_,e);o=O9(r.serverSyncTree_,e._path,s,l)}return Uo(r.eventQueue_,e._path,o),N0(r.serverSyncTree_,e,t,null,!0),s},i=>(np(r,"get for query "+ts(e)+" failed: "+i),Promise.reject(new Error(i))))}function tD(r,e,t,n,i){np(r,"set",{path:e.toString(),value:t,priority:n});const s=Ag(r),o=es(t,n),l=a5(r.serverSyncTree_,e),c=z9(o,l,s),a=b5(r),u=M9(r.serverSyncTree_,e,c,a,!0);Ig(r.eventQueue_,u),r.server_.put(e.toString(),o.val(!0),(f,h)=>{const m=f==="ok";m||Ks("set at "+e+" failed: "+f);const g=Dl(r.serverSyncTree_,a,!m);Uo(r.eventQueue_,e,g),Hy(r,i,f,h)});const d=w5(r,e);Ch(r,d),Uo(r.eventQueue_,d,[])}function rD(r,e,t,n){np(r,"update",{path:e.toString(),value:t});let i=!0;const s=Ag(r),o={};if(_s(t,(l,c)=>{i=!1,o[l]=B9(Ti(e,l),es(c),r.serverSyncTree_,s)}),i)bs("update() called with empty data.  Don't do anything."),Hy(r,n,"ok",void 0);else{const l=b5(r),c=SL(r.serverSyncTree_,e,o,l);Ig(r.eventQueue_,c),r.server_.merge(e.toString(),t,(a,u)=>{const d=a==="ok";d||Ks("update at "+e+" failed: "+a);const f=Dl(r.serverSyncTree_,l,!d),h=f.length>0?Ch(r,e):e;Uo(r.eventQueue_,h,f),Hy(r,n,a,u)}),_s(t,a=>{const u=w5(r,Ti(e,a));Ch(r,u)}),Uo(r.eventQueue_,e,[])}}function nD(r){np(r,"onDisconnectEvents");const e=Ag(r),t=x0();Fy(r.onDisconnect_,On(),(i,s)=>{const o=B9(i,s,r.serverSyncTree_,e);v9(t,i,o)});let n=[];Fy(t,On(),(i,s)=>{n=n.concat(tp(r.serverSyncTree_,i,s));const o=w5(r,i);Ch(r,o)}),r.onDisconnect_=x0(),Uo(r.eventQueue_,On(),n)}function iD(r,e,t){let n;mn(e._path)===".info"?n=Wy(r.infoSyncTree_,e,t):n=Wy(r.serverSyncTree_,e,t),K9(r.eventQueue_,e._path,n)}function sD(r,e,t){let n;mn(e._path)===".info"?n=N0(r.infoSyncTree_,e,t):n=N0(r.serverSyncTree_,e,t),K9(r.eventQueue_,e._path,n)}function oD(r){r.persistentConnection_&&r.persistentConnection_.interrupt(YL)}function np(r,...e){let t="";r.persistentConnection_&&(t=r.persistentConnection_.id+":"),bs(t,...e)}function Hy(r,e,t,n){e&&$h(()=>{if(t==="ok")e(null);else{const i=(t||"error").toUpperCase();let s=i;n&&(s+=": "+n);const o=new Error(s);o.code=i,e(o)}})}function Q9(r,e,t){return a5(r.serverSyncTree_,e,t)||Gr.EMPTY_NODE}function v5(r,e=r.transactionQueueTree_){if(e||Tg(r,e),qh(e)){const t=Z9(r,e);nr(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&aD(r,rp(e),t)}else V9(e)&&Eg(e,t=>{v5(r,t)})}function aD(r,e,t){const n=t.map(a=>a.currentWriteId),i=Q9(r,e,n);let s=i;const o=i.hash();for(let a=0;a<t.length;a++){const u=t[a];nr(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Hs(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const l=s.val(!0),c=e;r.server_.put(c.toString(),l,a=>{np(r,"transaction put response",{path:c.toString(),status:a});let u=[];if(a==="ok"){const d=[];for(let f=0;f<t.length;f++)t[f].status=2,u=u.concat(Dl(r.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&d.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();Tg(r,m5(r.transactionQueueTree_,e)),v5(r,r.transactionQueueTree_),Uo(r.eventQueue_,e,u);for(let f=0;f<d.length;f++)$h(d[f])}else{if(a==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{Ks("transaction at "+c.toString()+" failed: "+a);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=a}Ch(r,e)}},o)}function Ch(r,e){const t=J9(r,e),n=rp(t),i=Z9(r,t);return lD(r,i,n),n}function lD(r,e,t){if(e.length===0)return;const n=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const c=e[l],a=Hs(t,c.path);let u=!1,d;if(nr(a!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Dl(r.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=XL)u=!0,d="maxretry",i=i.concat(Dl(r.serverSyncTree_,c.currentWriteId,!0));else{const f=Q9(r,c.path,o);c.currentInputSnapshot=f;const h=e[l].update(f.val());if(h!==void 0){Cg("transaction failed: Data returned ",h,c.path);let m=es(h);typeof h=="object"&&h!=null&&Ra(h,".priority")||(m=m.updatePriority(f.getPriority()));const p=c.currentWriteId,y=Ag(r),b=z9(m,f,y);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=b,c.currentWriteId=b5(r),o.splice(o.indexOf(p),1),i=i.concat(M9(r.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),i=i.concat(Dl(r.serverSyncTree_,p,!0))}else u=!0,d="nodata",i=i.concat(Dl(r.serverSyncTree_,c.currentWriteId,!0))}Uo(r.eventQueue_,t,i),i=[],u&&(e[l].status=2,function(f){setTimeout(f,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(d==="nodata"?n.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):n.push(()=>e[l].onComplete(new Error(d),!1,null))))}Tg(r,r.transactionQueueTree_);for(let l=0;l<n.length;l++)$h(n[l]);v5(r,r.transactionQueueTree_)}function J9(r,e){let t,n=r.transactionQueueTree_;for(t=mn(e);t!==null&&qh(n)===void 0;)n=m5(n,t),e=ni(e),t=mn(e);return n}function Z9(r,e){const t=[];return ek(r,e,t),t.sort((n,i)=>n.order-i.order),t}function ek(r,e,t){const n=qh(e);if(n)for(let i=0;i<n.length;i++)t.push(n[i]);Eg(e,i=>{ek(r,i,t)})}function Tg(r,e){const t=qh(e);if(t){let n=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[n]=t[i],n++);t.length=n,U9(e,t.length>0?t:void 0)}Eg(e,n=>{Tg(r,n)})}function w5(r,e){const t=rp(J9(r,e)),n=m5(r.transactionQueueTree_,e);return DL(n,i=>{Y1(r,i)}),Y1(r,n),$9(n,i=>{Y1(r,i)}),t}function Y1(r,e){const t=qh(e);if(t){const n=[];let i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(nr(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(nr(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Dl(r.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&n.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?U9(e,void 0):t.length=s+1,Uo(r.eventQueue_,rp(e),i);for(let o=0;o<n.length;o++)$h(n[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(r){let e="";const t=r.split("/");for(let n=0;n<t.length;n++)if(t[n].length>0){let i=t[n];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function uD(r){const e={};r.charAt(0)==="?"&&(r=r.substring(1));for(const t of r.split("&")){if(t.length===0)continue;const n=t.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):Ks(`Invalid query segment '${t}' in query '${r}'`)}return e}const o_=function(r,e){const t=hD(r),n=t.namespace;t.domain==="firebase.com"&&al(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&t.domain!=="localhost"&&al("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||wM();const i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new r9(t.host,t.secure,n,i,e,"",n!==t.subdomain),path:new Wn(t.pathString)}},hD=function(r){let e="",t="",n="",i="",s="",o=!0,l="https",c=443;if(typeof r=="string"){let a=r.indexOf("//");a>=0&&(l=r.substring(0,a-1),r=r.substring(a+2));let u=r.indexOf("/");u===-1&&(u=r.length);let d=r.indexOf("?");d===-1&&(d=r.length),e=r.substring(0,Math.min(u,d)),u<d&&(i=cD(r.substring(u,d)));const f=uD(r.substring(Math.min(r.length,d)));a=e.indexOf(":"),a>=0?(o=l==="https"||l==="wss",c=parseInt(e.substring(a+1),10)):a=e.length;const h=e.slice(0,a);if(h.toLowerCase()==="localhost")t="localhost";else if(h.split(".").length<=2)t=h;else{const m=e.indexOf(".");n=e.substring(0,m).toLowerCase(),t=e.substring(m+1),s=n}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:t,subdomain:n,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fD=function(){let r=0;const e=[];return function(t){const n=t===r;r=t;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=a_.charAt(t%64),t=Math.floor(t/64);nr(t===0,"Cannot push at time == 0");let o=s.join("");if(n){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=a_.charAt(e[i]);return nr(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ts(this.snapshot.exportVal())}}class pD{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return nr(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return yn(this._path)?null:Kv(this._path)}get ref(){return new fl(this._repo,this._path)}get _queryIdentifier(){const e=H3(this._queryParams),t=Wv(e);return t==="{}"?"default":t}get _queryObject(){return H3(this._queryParams)}isEqual(e){if(e=hl(e),!(e instanceof _5))return!1;const t=this._repo===e._repo,n=Yv(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+nO(this._path)}}class fl extends _5{constructor(e,t){super(e,t,new Zv,!1)}get parent(){const e=h9(this._path);return e===null?null:new fl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Pd{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Wn(e),n=Md(this.ref,e);return new Pd(this._node.getChild(t),n,Ni)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,i)=>e(new Pd(i,Md(this.ref,n),Ni)))}hasChild(e){const t=new Wn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function dn(r,e){return r=hl(r),r._checkNotDeleted("ref"),e!==void 0?Md(r._root,e):r._root}function Md(r,e){return r=hl(r),mn(r._path)===null?qL("child","path",e):H9("child","path",e),new fl(r._repo,Ti(r._path,e))}function Gy(r,e){r=hl(r),G9("push",r._path),q9("push",e,r._path,!0);const t=X9(r._repo),n=fD(t),i=Md(r,n),s=Md(r,n);let o;return e!=null?o=eh(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function eh(r,e){r=hl(r),G9("set",r._path),q9("set",e,r._path,!1);const t=new Qd;return tD(r._repo,r._path,e,null,t.wrapCallback(()=>{})),t.promise}function Il(r,e){WL("update",e,r._path);const t=new Qd;return rD(r._repo,r._path,e,t.wrapCallback(()=>{})),t.promise}function Ps(r){r=hl(r);const e=new tk(()=>{}),t=new Ng(e);return eD(r._repo,r,t).then(n=>new Pd(n,new fl(r._repo,r._path),r._queryParams.getIndex()))}class Ng{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const n=t._queryParams.getIndex();return new dD("value",this,new Pd(e.snapshotNode,new fl(t._repo,t._path),n))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new pD(this,e,t):null}matches(e){return e instanceof Ng?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function mD(r,e,t,n,i){const s=new tk(t,void 0),o=new Ng(s);return iD(r._repo,r,o),()=>sD(r._repo,r,o)}function el(r,e,t,n){return mD(r,"value",e)}mL(fl);wL(fl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD="FIREBASE_DATABASE_EMULATOR_HOST",Ky={};let yD=!1;function bD(r,e,t,n){const i=e.lastIndexOf(":"),s=e.substring(0,i),o=Vh(s);r.repoInfo_=new r9(e,o,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0,t),n&&(r.authTokenProvider_=n)}function vD(r,e,t,n,i){let s=n||r.options.databaseURL;s===void 0&&(r.options.projectId||al("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bs("Using default host for project ",r.options.projectId),s=`${r.options.projectId}-default-rtdb.firebaseio.com`);let o=o_(s,i),l=o.repoInfo,c;typeof process<"u"&&A3&&(c=A3[gD]),c?(s=`http://${c}?ns=${l.namespace}`,o=o_(s,i),l=o.repoInfo):o.repoInfo.secure;const a=new jM(r.name,r.options,e);HL("Invalid Firebase Database URL",o),yn(o.path)||al("Database URL must point to the root of a Firebase Database (not including a child path).");const u=_D(l,r,a,new NM(r,t));return new xD(u,r)}function wD(r,e){const t=Ky[e];(!t||t[r.key]!==r)&&al(`Database ${e}(${r.repoInfo_}) has already been deleted.`),oD(r),delete t[r.key]}function _D(r,e,t,n){let i=Ky[e.name];i||(i={},Ky[e.name]=i);let s=i[r.toURLString()];return s&&al("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new QL(r,yD,t,n),i[r.toURLString()]=s,s}class xD{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(JL(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new fl(this._repo,On())),this._rootInternal}_delete(){return this._rootInternal!==null&&(wD(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&al("Cannot call "+e+" on a deleted database.")}}function Ih(r=vg(),e){const t=zv(r,"database").getImmediate({identifier:e});if(!t._instanceStarted){const n=Mv("database");n&&SD(t,...n)}return t}function SD(r,e,t,n={}){r=hl(r),r._checkNotDeleted("useEmulator");const i=`${e}:${t}`,s=r._repoInternal;if(r._instanceStarted){if(i===r._repoInternal.repoInfo_.host&&Sd(n,s.repoInfo_.emulatorOptions))return;al("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)n.mockUserToken&&al('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Im(Im.OWNER);else if(n.mockUserToken){const l=typeof n.mockUserToken=="string"?n.mockUserToken:Lv(n.mockUserToken,r.app.options.projectId);o=new Im(l)}Vh(e)&&(Ov(e),Dv("Database",!0)),bD(s,i,n,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(r){pM(Vv),_h(new eu("database",(e,{instanceIdentifier:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return vD(n,i,s,t)},"PUBLIC").setMultipleInstances(!0)),Ia(T3,N3,r),Ia(T3,N3,"esm2020")}Za.prototype.simpleListen=function(r,e){this.sendRequest("q",{p:r},e)};Za.prototype.echo=function(r,e){this.sendRequest("echo",{d:r},e)};kD();var ED="firebase",CD="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ia(ED,CD,"app");var l_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ec,rk;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e($,N){function j(){}j.prototype=N.prototype,$.F=N.prototype,$.prototype=new j,$.prototype.constructor=$,$.D=function(F,P,L){for(var k=Array(arguments.length-2),R=2;R<arguments.length;R++)k[R-2]=arguments[R];return N.prototype[P].apply(F,k)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i($,N,j){j||(j=0);const F=Array(16);if(typeof N=="string")for(var P=0;P<16;++P)F[P]=N.charCodeAt(j++)|N.charCodeAt(j++)<<8|N.charCodeAt(j++)<<16|N.charCodeAt(j++)<<24;else for(P=0;P<16;++P)F[P]=N[j++]|N[j++]<<8|N[j++]<<16|N[j++]<<24;N=$.g[0],j=$.g[1],P=$.g[2];let L=$.g[3],k;k=N+(L^j&(P^L))+F[0]+3614090360&4294967295,N=j+(k<<7&4294967295|k>>>25),k=L+(P^N&(j^P))+F[1]+3905402710&4294967295,L=N+(k<<12&4294967295|k>>>20),k=P+(j^L&(N^j))+F[2]+606105819&4294967295,P=L+(k<<17&4294967295|k>>>15),k=j+(N^P&(L^N))+F[3]+3250441966&4294967295,j=P+(k<<22&4294967295|k>>>10),k=N+(L^j&(P^L))+F[4]+4118548399&4294967295,N=j+(k<<7&4294967295|k>>>25),k=L+(P^N&(j^P))+F[5]+1200080426&4294967295,L=N+(k<<12&4294967295|k>>>20),k=P+(j^L&(N^j))+F[6]+2821735955&4294967295,P=L+(k<<17&4294967295|k>>>15),k=j+(N^P&(L^N))+F[7]+4249261313&4294967295,j=P+(k<<22&4294967295|k>>>10),k=N+(L^j&(P^L))+F[8]+1770035416&4294967295,N=j+(k<<7&4294967295|k>>>25),k=L+(P^N&(j^P))+F[9]+2336552879&4294967295,L=N+(k<<12&4294967295|k>>>20),k=P+(j^L&(N^j))+F[10]+4294925233&4294967295,P=L+(k<<17&4294967295|k>>>15),k=j+(N^P&(L^N))+F[11]+2304563134&4294967295,j=P+(k<<22&4294967295|k>>>10),k=N+(L^j&(P^L))+F[12]+1804603682&4294967295,N=j+(k<<7&4294967295|k>>>25),k=L+(P^N&(j^P))+F[13]+4254626195&4294967295,L=N+(k<<12&4294967295|k>>>20),k=P+(j^L&(N^j))+F[14]+2792965006&4294967295,P=L+(k<<17&4294967295|k>>>15),k=j+(N^P&(L^N))+F[15]+1236535329&4294967295,j=P+(k<<22&4294967295|k>>>10),k=N+(P^L&(j^P))+F[1]+4129170786&4294967295,N=j+(k<<5&4294967295|k>>>27),k=L+(j^P&(N^j))+F[6]+3225465664&4294967295,L=N+(k<<9&4294967295|k>>>23),k=P+(N^j&(L^N))+F[11]+643717713&4294967295,P=L+(k<<14&4294967295|k>>>18),k=j+(L^N&(P^L))+F[0]+3921069994&4294967295,j=P+(k<<20&4294967295|k>>>12),k=N+(P^L&(j^P))+F[5]+3593408605&4294967295,N=j+(k<<5&4294967295|k>>>27),k=L+(j^P&(N^j))+F[10]+38016083&4294967295,L=N+(k<<9&4294967295|k>>>23),k=P+(N^j&(L^N))+F[15]+3634488961&4294967295,P=L+(k<<14&4294967295|k>>>18),k=j+(L^N&(P^L))+F[4]+3889429448&4294967295,j=P+(k<<20&4294967295|k>>>12),k=N+(P^L&(j^P))+F[9]+568446438&4294967295,N=j+(k<<5&4294967295|k>>>27),k=L+(j^P&(N^j))+F[14]+3275163606&4294967295,L=N+(k<<9&4294967295|k>>>23),k=P+(N^j&(L^N))+F[3]+4107603335&4294967295,P=L+(k<<14&4294967295|k>>>18),k=j+(L^N&(P^L))+F[8]+1163531501&4294967295,j=P+(k<<20&4294967295|k>>>12),k=N+(P^L&(j^P))+F[13]+2850285829&4294967295,N=j+(k<<5&4294967295|k>>>27),k=L+(j^P&(N^j))+F[2]+4243563512&4294967295,L=N+(k<<9&4294967295|k>>>23),k=P+(N^j&(L^N))+F[7]+1735328473&4294967295,P=L+(k<<14&4294967295|k>>>18),k=j+(L^N&(P^L))+F[12]+2368359562&4294967295,j=P+(k<<20&4294967295|k>>>12),k=N+(j^P^L)+F[5]+4294588738&4294967295,N=j+(k<<4&4294967295|k>>>28),k=L+(N^j^P)+F[8]+2272392833&4294967295,L=N+(k<<11&4294967295|k>>>21),k=P+(L^N^j)+F[11]+1839030562&4294967295,P=L+(k<<16&4294967295|k>>>16),k=j+(P^L^N)+F[14]+4259657740&4294967295,j=P+(k<<23&4294967295|k>>>9),k=N+(j^P^L)+F[1]+2763975236&4294967295,N=j+(k<<4&4294967295|k>>>28),k=L+(N^j^P)+F[4]+1272893353&4294967295,L=N+(k<<11&4294967295|k>>>21),k=P+(L^N^j)+F[7]+4139469664&4294967295,P=L+(k<<16&4294967295|k>>>16),k=j+(P^L^N)+F[10]+3200236656&4294967295,j=P+(k<<23&4294967295|k>>>9),k=N+(j^P^L)+F[13]+681279174&4294967295,N=j+(k<<4&4294967295|k>>>28),k=L+(N^j^P)+F[0]+3936430074&4294967295,L=N+(k<<11&4294967295|k>>>21),k=P+(L^N^j)+F[3]+3572445317&4294967295,P=L+(k<<16&4294967295|k>>>16),k=j+(P^L^N)+F[6]+76029189&4294967295,j=P+(k<<23&4294967295|k>>>9),k=N+(j^P^L)+F[9]+3654602809&4294967295,N=j+(k<<4&4294967295|k>>>28),k=L+(N^j^P)+F[12]+3873151461&4294967295,L=N+(k<<11&4294967295|k>>>21),k=P+(L^N^j)+F[15]+530742520&4294967295,P=L+(k<<16&4294967295|k>>>16),k=j+(P^L^N)+F[2]+3299628645&4294967295,j=P+(k<<23&4294967295|k>>>9),k=N+(P^(j|~L))+F[0]+4096336452&4294967295,N=j+(k<<6&4294967295|k>>>26),k=L+(j^(N|~P))+F[7]+1126891415&4294967295,L=N+(k<<10&4294967295|k>>>22),k=P+(N^(L|~j))+F[14]+2878612391&4294967295,P=L+(k<<15&4294967295|k>>>17),k=j+(L^(P|~N))+F[5]+4237533241&4294967295,j=P+(k<<21&4294967295|k>>>11),k=N+(P^(j|~L))+F[12]+1700485571&4294967295,N=j+(k<<6&4294967295|k>>>26),k=L+(j^(N|~P))+F[3]+2399980690&4294967295,L=N+(k<<10&4294967295|k>>>22),k=P+(N^(L|~j))+F[10]+4293915773&4294967295,P=L+(k<<15&4294967295|k>>>17),k=j+(L^(P|~N))+F[1]+2240044497&4294967295,j=P+(k<<21&4294967295|k>>>11),k=N+(P^(j|~L))+F[8]+1873313359&4294967295,N=j+(k<<6&4294967295|k>>>26),k=L+(j^(N|~P))+F[15]+4264355552&4294967295,L=N+(k<<10&4294967295|k>>>22),k=P+(N^(L|~j))+F[6]+2734768916&4294967295,P=L+(k<<15&4294967295|k>>>17),k=j+(L^(P|~N))+F[13]+1309151649&4294967295,j=P+(k<<21&4294967295|k>>>11),k=N+(P^(j|~L))+F[4]+4149444226&4294967295,N=j+(k<<6&4294967295|k>>>26),k=L+(j^(N|~P))+F[11]+3174756917&4294967295,L=N+(k<<10&4294967295|k>>>22),k=P+(N^(L|~j))+F[2]+718787259&4294967295,P=L+(k<<15&4294967295|k>>>17),k=j+(L^(P|~N))+F[9]+3951481745&4294967295,$.g[0]=$.g[0]+N&4294967295,$.g[1]=$.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,$.g[2]=$.g[2]+P&4294967295,$.g[3]=$.g[3]+L&4294967295}n.prototype.v=function($,N){N===void 0&&(N=$.length);const j=N-this.blockSize,F=this.C;let P=this.h,L=0;for(;L<N;){if(P==0)for(;L<=j;)i(this,$,L),L+=this.blockSize;if(typeof $=="string"){for(;L<N;)if(F[P++]=$.charCodeAt(L++),P==this.blockSize){i(this,F),P=0;break}}else for(;L<N;)if(F[P++]=$[L++],P==this.blockSize){i(this,F),P=0;break}}this.h=P,this.o+=N},n.prototype.A=function(){var $=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);$[0]=128;for(var N=1;N<$.length-8;++N)$[N]=0;N=this.o*8;for(var j=$.length-8;j<$.length;++j)$[j]=N&255,N/=256;for(this.v($),$=Array(16),N=0,j=0;j<4;++j)for(let F=0;F<32;F+=8)$[N++]=this.g[j]>>>F&255;return $};function s($,N){var j=l;return Object.prototype.hasOwnProperty.call(j,$)?j[$]:j[$]=N($)}function o($,N){this.h=N;const j=[];let F=!0;for(let P=$.length-1;P>=0;P--){const L=$[P]|0;F&&L==N||(j[P]=L,F=!1)}this.g=j}var l={};function c($){return-128<=$&&$<128?s($,function(N){return new o([N|0],N<0?-1:0)}):new o([$|0],$<0?-1:0)}function a($){if(isNaN($)||!isFinite($))return d;if($<0)return p(a(-$));const N=[];let j=1;for(let F=0;$>=j;F++)N[F]=$/j|0,j*=4294967296;return new o(N,0)}function u($,N){if($.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if($.charAt(0)=="-")return p(u($.substring(1),N));if($.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=a(Math.pow(N,8));let F=d;for(let L=0;L<$.length;L+=8){var P=Math.min(8,$.length-L);const k=parseInt($.substring(L,L+P),N);P<8?(P=a(Math.pow(N,P)),F=F.j(P).add(a(k))):(F=F.j(j),F=F.add(a(k)))}return F}var d=c(0),f=c(1),h=c(16777216);r=o.prototype,r.m=function(){if(g(this))return-p(this).m();let $=0,N=1;for(let j=0;j<this.g.length;j++){const F=this.i(j);$+=(F>=0?F:4294967296+F)*N,N*=4294967296}return $},r.toString=function($){if($=$||10,$<2||36<$)throw Error("radix out of range: "+$);if(m(this))return"0";if(g(this))return"-"+p(this).toString($);const N=a(Math.pow($,6));var j=this;let F="";for(;;){const P=E(j,N).g;j=y(j,P.j(N));let L=((j.g.length>0?j.g[0]:j.h)>>>0).toString($);if(j=P,m(j))return L+F;for(;L.length<6;)L="0"+L;F=L+F}},r.i=function($){return $<0?0:$<this.g.length?this.g[$]:this.h};function m($){if($.h!=0)return!1;for(let N=0;N<$.g.length;N++)if($.g[N]!=0)return!1;return!0}function g($){return $.h==-1}r.l=function($){return $=y(this,$),g($)?-1:m($)?0:1};function p($){const N=$.g.length,j=[];for(let F=0;F<N;F++)j[F]=~$.g[F];return new o(j,~$.h).add(f)}r.abs=function(){return g(this)?p(this):this},r.add=function($){const N=Math.max(this.g.length,$.g.length),j=[];let F=0;for(let P=0;P<=N;P++){let L=F+(this.i(P)&65535)+($.i(P)&65535),k=(L>>>16)+(this.i(P)>>>16)+($.i(P)>>>16);F=k>>>16,L&=65535,k&=65535,j[P]=k<<16|L}return new o(j,j[j.length-1]&-2147483648?-1:0)};function y($,N){return $.add(p(N))}r.j=function($){if(m(this)||m($))return d;if(g(this))return g($)?p(this).j(p($)):p(p(this).j($));if(g($))return p(this.j(p($)));if(this.l(h)<0&&$.l(h)<0)return a(this.m()*$.m());const N=this.g.length+$.g.length,j=[];for(var F=0;F<2*N;F++)j[F]=0;for(F=0;F<this.g.length;F++)for(let P=0;P<$.g.length;P++){const L=this.i(F)>>>16,k=this.i(F)&65535,R=$.i(P)>>>16,C=$.i(P)&65535;j[2*F+2*P]+=k*C,b(j,2*F+2*P),j[2*F+2*P+1]+=L*C,b(j,2*F+2*P+1),j[2*F+2*P+1]+=k*R,b(j,2*F+2*P+1),j[2*F+2*P+2]+=L*R,b(j,2*F+2*P+2)}for($=0;$<N;$++)j[$]=j[2*$+1]<<16|j[2*$];for($=N;$<2*N;$++)j[$]=0;return new o(j,0)};function b($,N){for(;($[N]&65535)!=$[N];)$[N+1]+=$[N]>>>16,$[N]&=65535,N++}function v($,N){this.g=$,this.h=N}function E($,N){if(m(N))throw Error("division by zero");if(m($))return new v(d,d);if(g($))return N=E(p($),N),new v(p(N.g),p(N.h));if(g(N))return N=E($,p(N)),new v(p(N.g),N.h);if($.g.length>30){if(g($)||g(N))throw Error("slowDivide_ only works with positive integers.");for(var j=f,F=N;F.l($)<=0;)j=M(j),F=M(F);var P=W(j,1),L=W(F,1);for(F=W(F,2),j=W(j,2);!m(F);){var k=L.add(F);k.l($)<=0&&(P=P.add(j),L=k),F=W(F,1),j=W(j,1)}return N=y($,P.j(N)),new v(P,N)}for(P=d;$.l(N)>=0;){for(j=Math.max(1,Math.floor($.m()/N.m())),F=Math.ceil(Math.log(j)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),L=a(j),k=L.j(N);g(k)||k.l($)>0;)j-=F,L=a(j),k=L.j(N);m(L)&&(L=f),P=P.add(L),$=y($,k)}return new v(P,$)}r.B=function($){return E(this,$).h},r.and=function($){const N=Math.max(this.g.length,$.g.length),j=[];for(let F=0;F<N;F++)j[F]=this.i(F)&$.i(F);return new o(j,this.h&$.h)},r.or=function($){const N=Math.max(this.g.length,$.g.length),j=[];for(let F=0;F<N;F++)j[F]=this.i(F)|$.i(F);return new o(j,this.h|$.h)},r.xor=function($){const N=Math.max(this.g.length,$.g.length),j=[];for(let F=0;F<N;F++)j[F]=this.i(F)^$.i(F);return new o(j,this.h^$.h)};function M($){const N=$.g.length+1,j=[];for(let F=0;F<N;F++)j[F]=$.i(F)<<1|$.i(F-1)>>>31;return new o(j,$.h)}function W($,N){const j=N>>5;N%=32;const F=$.g.length-j,P=[];for(let L=0;L<F;L++)P[L]=N>0?$.i(L+j)>>>N|$.i(L+j+1)<<32-N:$.i(L+j);return new o(P,$.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,rk=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=a,o.fromString=u,ec=o}).apply(typeof l_<"u"?l_:typeof self<"u"?self:typeof window<"u"?window:{});var Xp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nk,Rf,ik,Tm,Yy,sk,ok,ak;(function(){var r,e=Object.defineProperty;function t(U){U=[typeof globalThis=="object"&&globalThis,U,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xp=="object"&&Xp];for(var ee=0;ee<U.length;++ee){var se=U[ee];if(se&&se.Math==Math)return se}throw Error("Cannot find global object")}var n=t(this);function i(U,ee){if(ee)e:{var se=n;U=U.split(".");for(var xe=0;xe<U.length-1;xe++){var ht=U[xe];if(!(ht in se))break e;se=se[ht]}U=U[U.length-1],xe=se[U],ee=ee(xe),ee!=xe&&ee!=null&&e(se,U,{configurable:!0,writable:!0,value:ee})}}i("Symbol.dispose",function(U){return U||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(U){return U||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(U){return U||function(ee){var se=[],xe;for(xe in ee)Object.prototype.hasOwnProperty.call(ee,xe)&&se.push([xe,ee[xe]]);return se}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(U){var ee=typeof U;return ee=="object"&&U!=null||ee=="function"}function c(U,ee,se){return U.call.apply(U.bind,arguments)}function a(U,ee,se){return a=c,a.apply(null,arguments)}function u(U,ee){var se=Array.prototype.slice.call(arguments,1);return function(){var xe=se.slice();return xe.push.apply(xe,arguments),U.apply(this,xe)}}function d(U,ee){function se(){}se.prototype=ee.prototype,U.Z=ee.prototype,U.prototype=new se,U.prototype.constructor=U,U.Ob=function(xe,ht,bt){for(var Jt=Array(arguments.length-2),Jr=2;Jr<arguments.length;Jr++)Jt[Jr-2]=arguments[Jr];return ee.prototype[ht].apply(xe,Jt)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?U=>U&&AsyncContext.Snapshot.wrap(U):U=>U;function h(U){const ee=U.length;if(ee>0){const se=Array(ee);for(let xe=0;xe<ee;xe++)se[xe]=U[xe];return se}return[]}function m(U,ee){for(let xe=1;xe<arguments.length;xe++){const ht=arguments[xe];var se=typeof ht;if(se=se!="object"?se:ht?Array.isArray(ht)?"array":se:"null",se=="array"||se=="object"&&typeof ht.length=="number"){se=U.length||0;const bt=ht.length||0;U.length=se+bt;for(let Jt=0;Jt<bt;Jt++)U[se+Jt]=ht[Jt]}else U.push(ht)}}class g{constructor(ee,se){this.i=ee,this.j=se,this.h=0,this.g=null}get(){let ee;return this.h>0?(this.h--,ee=this.g,this.g=ee.next,ee.next=null):ee=this.i(),ee}}function p(U){o.setTimeout(()=>{throw U},0)}function y(){var U=$;let ee=null;return U.g&&(ee=U.g,U.g=U.g.next,U.g||(U.h=null),ee.next=null),ee}class b{constructor(){this.h=this.g=null}add(ee,se){const xe=v.get();xe.set(ee,se),this.h?this.h.next=xe:this.g=xe,this.h=xe}}var v=new g(()=>new E,U=>U.reset());class E{constructor(){this.next=this.g=this.h=null}set(ee,se){this.h=ee,this.g=se,this.next=null}reset(){this.next=this.g=this.h=null}}let M,W=!1,$=new b,N=()=>{const U=Promise.resolve(void 0);M=()=>{U.then(j)}};function j(){for(var U;U=y();){try{U.h.call(U.g)}catch(se){p(se)}var ee=v;ee.j(U),ee.h<100&&(ee.h++,U.next=ee.g,ee.g=U)}W=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(U,ee){this.type=U,this.g=this.target=ee,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var U=!1,ee=Object.defineProperty({},"passive",{get:function(){U=!0}});try{const se=()=>{};o.addEventListener("test",se,ee),o.removeEventListener("test",se,ee)}catch{}return U}();function k(U){return/^[\s\xa0]*$/.test(U)}function R(U,ee){P.call(this,U?U.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,U&&this.init(U,ee)}d(R,P),R.prototype.init=function(U,ee){const se=this.type=U.type,xe=U.changedTouches&&U.changedTouches.length?U.changedTouches[0]:null;this.target=U.target||U.srcElement,this.g=ee,ee=U.relatedTarget,ee||(se=="mouseover"?ee=U.fromElement:se=="mouseout"&&(ee=U.toElement)),this.relatedTarget=ee,xe?(this.clientX=xe.clientX!==void 0?xe.clientX:xe.pageX,this.clientY=xe.clientY!==void 0?xe.clientY:xe.pageY,this.screenX=xe.screenX||0,this.screenY=xe.screenY||0):(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0),this.button=U.button,this.key=U.key||"",this.ctrlKey=U.ctrlKey,this.altKey=U.altKey,this.shiftKey=U.shiftKey,this.metaKey=U.metaKey,this.pointerId=U.pointerId||0,this.pointerType=U.pointerType,this.state=U.state,this.i=U,U.defaultPrevented&&R.Z.h.call(this)},R.prototype.h=function(){R.Z.h.call(this);const U=this.i;U.preventDefault?U.preventDefault():U.returnValue=!1};var C="closure_listenable_"+(Math.random()*1e6|0),_=0;function x(U,ee,se,xe,ht){this.listener=U,this.proxy=null,this.src=ee,this.type=se,this.capture=!!xe,this.ha=ht,this.key=++_,this.da=this.fa=!1}function w(U){U.da=!0,U.listener=null,U.proxy=null,U.src=null,U.ha=null}function S(U,ee,se){for(const xe in U)ee.call(se,U[xe],xe,U)}function I(U,ee){for(const se in U)ee.call(void 0,U[se],se,U)}function z(U){const ee={};for(const se in U)ee[se]=U[se];return ee}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(U,ee){let se,xe;for(let ht=1;ht<arguments.length;ht++){xe=arguments[ht];for(se in xe)U[se]=xe[se];for(let bt=0;bt<A.length;bt++)se=A[bt],Object.prototype.hasOwnProperty.call(xe,se)&&(U[se]=xe[se])}}function K(U){this.src=U,this.g={},this.h=0}K.prototype.add=function(U,ee,se,xe,ht){const bt=U.toString();U=this.g[bt],U||(U=this.g[bt]=[],this.h++);const Jt=V(U,ee,xe,ht);return Jt>-1?(ee=U[Jt],se||(ee.fa=!1)):(ee=new x(ee,this.src,bt,!!xe,ht),ee.fa=se,U.push(ee)),ee};function J(U,ee){const se=ee.type;if(se in U.g){var xe=U.g[se],ht=Array.prototype.indexOf.call(xe,ee,void 0),bt;(bt=ht>=0)&&Array.prototype.splice.call(xe,ht,1),bt&&(w(ee),U.g[se].length==0&&(delete U.g[se],U.h--))}}function V(U,ee,se,xe){for(let ht=0;ht<U.length;++ht){const bt=U[ht];if(!bt.da&&bt.listener==ee&&bt.capture==!!se&&bt.ha==xe)return ht}return-1}var X="closure_lm_"+(Math.random()*1e6|0),D={};function O(U,ee,se,xe,ht){if(Array.isArray(ee)){for(let bt=0;bt<ee.length;bt++)O(U,ee[bt],se,xe,ht);return null}return se=le(se),U&&U[C]?U.J(ee,se,l(xe)?!!xe.capture:!1,ht):G(U,ee,se,!1,xe,ht)}function G(U,ee,se,xe,ht,bt){if(!ee)throw Error("Invalid event type");const Jt=l(ht)?!!ht.capture:!!ht;let Jr=be(U);if(Jr||(U[X]=Jr=new K(U)),se=Jr.add(ee,se,xe,Jt,bt),se.proxy)return se;if(xe=Z(),se.proxy=xe,xe.src=U,xe.listener=se,U.addEventListener)L||(ht=Jt),ht===void 0&&(ht=!1),U.addEventListener(ee.toString(),xe,ht);else if(U.attachEvent)U.attachEvent(oe(ee.toString()),xe);else if(U.addListener&&U.removeListener)U.addListener(xe);else throw Error("addEventListener and attachEvent are unavailable.");return se}function Z(){function U(se){return ee.call(U.src,U.listener,se)}const ee=re;return U}function ue(U,ee,se,xe,ht){if(Array.isArray(ee))for(var bt=0;bt<ee.length;bt++)ue(U,ee[bt],se,xe,ht);else xe=l(xe)?!!xe.capture:!!xe,se=le(se),U&&U[C]?(U=U.i,bt=String(ee).toString(),bt in U.g&&(ee=U.g[bt],se=V(ee,se,xe,ht),se>-1&&(w(ee[se]),Array.prototype.splice.call(ee,se,1),ee.length==0&&(delete U.g[bt],U.h--)))):U&&(U=be(U))&&(ee=U.g[ee.toString()],U=-1,ee&&(U=V(ee,se,xe,ht)),(se=U>-1?ee[U]:null)&&te(se))}function te(U){if(typeof U!="number"&&U&&!U.da){var ee=U.src;if(ee&&ee[C])J(ee.i,U);else{var se=U.type,xe=U.proxy;ee.removeEventListener?ee.removeEventListener(se,xe,U.capture):ee.detachEvent?ee.detachEvent(oe(se),xe):ee.addListener&&ee.removeListener&&ee.removeListener(xe),(se=be(ee))?(J(se,U),se.h==0&&(se.src=null,ee[X]=null)):w(U)}}}function oe(U){return U in D?D[U]:D[U]="on"+U}function re(U,ee){if(U.da)U=!0;else{ee=new R(ee,this);const se=U.listener,xe=U.ha||U.src;U.fa&&te(U),U=se.call(xe,ee)}return U}function be(U){return U=U[X],U instanceof K?U:null}var ie="__closure_events_fn_"+(Math.random()*1e9>>>0);function le(U){return typeof U=="function"?U:(U[ie]||(U[ie]=function(ee){return U.handleEvent(ee)}),U[ie])}function ae(){F.call(this),this.i=new K(this),this.M=this,this.G=null}d(ae,F),ae.prototype[C]=!0,ae.prototype.removeEventListener=function(U,ee,se,xe){ue(this,U,ee,se,xe)};function Se(U,ee){var se,xe=U.G;if(xe)for(se=[];xe;xe=xe.G)se.push(xe);if(U=U.M,xe=ee.type||ee,typeof ee=="string")ee=new P(ee,U);else if(ee instanceof P)ee.target=ee.target||U;else{var ht=ee;ee=new P(xe,U),H(ee,ht)}ht=!0;let bt,Jt;if(se)for(Jt=se.length-1;Jt>=0;Jt--)bt=ee.g=se[Jt],ht=ve(bt,xe,!0,ee)&&ht;if(bt=ee.g=U,ht=ve(bt,xe,!0,ee)&&ht,ht=ve(bt,xe,!1,ee)&&ht,se)for(Jt=0;Jt<se.length;Jt++)bt=ee.g=se[Jt],ht=ve(bt,xe,!1,ee)&&ht}ae.prototype.N=function(){if(ae.Z.N.call(this),this.i){var U=this.i;for(const ee in U.g){const se=U.g[ee];for(let xe=0;xe<se.length;xe++)w(se[xe]);delete U.g[ee],U.h--}}this.G=null},ae.prototype.J=function(U,ee,se,xe){return this.i.add(String(U),ee,!1,se,xe)},ae.prototype.K=function(U,ee,se,xe){return this.i.add(String(U),ee,!0,se,xe)};function ve(U,ee,se,xe){if(ee=U.i.g[String(ee)],!ee)return!0;ee=ee.concat();let ht=!0;for(let bt=0;bt<ee.length;++bt){const Jt=ee[bt];if(Jt&&!Jt.da&&Jt.capture==se){const Jr=Jt.listener,Jn=Jt.ha||Jt.src;Jt.fa&&J(U.i,Jt),ht=Jr.call(Jn,xe)!==!1&&ht}}return ht&&!xe.defaultPrevented}function ke(U,ee){if(typeof U!="function")if(U&&typeof U.handleEvent=="function")U=a(U.handleEvent,U);else throw Error("Invalid listener argument");return Number(ee)>2147483647?-1:o.setTimeout(U,ee||0)}function Ne(U){U.g=ke(()=>{U.g=null,U.i&&(U.i=!1,Ne(U))},U.l);const ee=U.h;U.h=null,U.m.apply(null,ee)}class ze extends F{constructor(ee,se){super(),this.m=ee,this.l=se,this.h=null,this.i=!1,this.g=null}j(ee){this.h=arguments,this.g?this.i=!0:Ne(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function we(U){F.call(this),this.h=U,this.g={}}d(we,F);var De=[];function He(U){S(U.g,function(ee,se){this.g.hasOwnProperty(se)&&te(ee)},U),U.g={}}we.prototype.N=function(){we.Z.N.call(this),He(this)},we.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var We=o.JSON.stringify,et=o.JSON.parse,St=class{stringify(U){return o.JSON.stringify(U,void 0)}parse(U){return o.JSON.parse(U,void 0)}};function lt(){}function At(){}var ct={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function at(){P.call(this,"d")}d(at,P);function wt(){P.call(this,"c")}d(wt,P);var ot={},nt=null;function zt(){return nt=nt||new ae}ot.Ia="serverreachability";function Lt(U){P.call(this,ot.Ia,U)}d(Lt,P);function Ct(U){const ee=zt();Se(ee,new Lt(ee))}ot.STAT_EVENT="statevent";function Ht(U,ee){P.call(this,ot.STAT_EVENT,U),this.stat=ee}d(Ht,P);function jt(U){const ee=zt();Se(ee,new Ht(ee,U))}ot.Ja="timingevent";function Mt(U,ee){P.call(this,ot.Ja,U),this.size=ee}d(Mt,P);function Qt(U,ee){if(typeof U!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){U()},ee)}function Sr(){this.g=!0}Sr.prototype.ua=function(){this.g=!1};function lr(U,ee,se,xe,ht,bt){U.info(function(){if(U.g)if(bt){var Jt="",Jr=bt.split("&");for(let wn=0;wn<Jr.length;wn++){var Jn=Jr[wn].split("=");if(Jn.length>1){const Zn=Jn[0];Jn=Jn[1];const os=Zn.split("_");Jt=os.length>=2&&os[1]=="type"?Jt+(Zn+"="+Jn+"&"):Jt+(Zn+"=redacted&")}}}else Jt=null;else Jt=bt;return"XMLHTTP REQ ("+xe+") [attempt "+ht+"]: "+ee+`
`+se+`
`+Jt})}function pr(U,ee,se,xe,ht,bt,Jt){U.info(function(){return"XMLHTTP RESP ("+xe+") [ attempt "+ht+"]: "+ee+`
`+se+`
`+bt+" "+Jt})}function jr(U,ee,se,xe){U.info(function(){return"XMLHTTP TEXT ("+ee+"): "+zr(U,se)+(xe?" "+xe:"")})}function Ft(U,ee){U.info(function(){return"TIMEOUT: "+ee})}Sr.prototype.info=function(){};function zr(U,ee){if(!U.g)return ee;if(!ee)return null;try{const bt=JSON.parse(ee);if(bt){for(U=0;U<bt.length;U++)if(Array.isArray(bt[U])){var se=bt[U];if(!(se.length<2)){var xe=se[1];if(Array.isArray(xe)&&!(xe.length<1)){var ht=xe[0];if(ht!="noop"&&ht!="stop"&&ht!="close")for(let Jt=1;Jt<xe.length;Jt++)xe[Jt]=""}}}}return We(bt)}catch{return ee}}var Rr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ue;function Ye(){}d(Ye,lt),Ye.prototype.g=function(){return new XMLHttpRequest},Ue=new Ye;function Xe(U){return encodeURIComponent(String(U))}function Le(U){var ee=1;U=U.split(":");const se=[];for(;ee>0&&U.length;)se.push(U.shift()),ee--;return U.length&&se.push(U.join(":")),se}function Fe(U,ee,se,xe){this.j=U,this.i=ee,this.l=se,this.S=xe||1,this.V=new we(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ke}function Ke(){this.i=null,this.g="",this.h=!1}var pe={},Te={};function Ze(U,ee,se){U.M=1,U.A=si(ur(ee)),U.u=se,U.R=!0,ut(U,null)}function ut(U,ee){U.F=Date.now(),Be(U),U.B=ur(U.A);var se=U.B,xe=U.S;Array.isArray(xe)||(xe=[String(xe)]),dt(se.i,"t",xe),U.C=0,se=U.j.L,U.h=new Ke,U.g=br(U.j,se?ee:null,!U.u),U.P>0&&(U.O=new ze(a(U.Y,U,U.g),U.P)),ee=U.V,se=U.g,xe=U.ba;var ht="readystatechange";Array.isArray(ht)||(ht&&(De[0]=ht.toString()),ht=De);for(let bt=0;bt<ht.length;bt++){const Jt=O(se,ht[bt],xe||ee.handleEvent,!1,ee.h||ee);if(!Jt)break;ee.g[Jt.key]=Jt}ee=U.J?z(U.J):{},U.u?(U.v||(U.v="POST"),ee["Content-Type"]="application/x-www-form-urlencoded",U.g.ea(U.B,U.v,U.u,ee)):(U.v="GET",U.g.ea(U.B,U.v,null,ee)),Ct(),lr(U.i,U.v,U.B,U.l,U.S,U.u)}Fe.prototype.ba=function(U){U=U.target;const ee=this.O;ee&&li(U)==3?ee.j():this.Y(U)},Fe.prototype.Y=function(U){try{if(U==this.g)e:{const Jr=li(this.g),Jn=this.g.ya(),wn=this.g.ca();if(!(Jr<3)&&(Jr!=3||this.g&&(this.h.h||this.g.la()||Nr(this.g)))){this.K||Jr!=4||Jn==7||(Jn==8||wn<=0?Ct(3):Ct(2)),Ge(this);var ee=this.g.ca();this.X=ee;var se=he(this);if(this.o=ee==200,pr(this.i,this.v,this.B,this.l,this.S,Jr,ee),this.o){if(this.U&&!this.L){t:{if(this.g){var xe,ht=this.g;if((xe=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(xe)){var bt=xe;break t}}bt=null}if(U=bt)jr(this.i,this.l,U,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Me(this,U);else{this.o=!1,this.m=3,jt(12),de(this),pt(this);break e}}if(this.R){U=!0;let Zn;for(;!this.K&&this.C<se.length;)if(Zn=Ve(this,se),Zn==Te){Jr==4&&(this.m=4,jt(14),U=!1),jr(this.i,this.l,null,"[Incomplete Response]");break}else if(Zn==pe){this.m=4,jt(15),jr(this.i,this.l,se,"[Invalid Chunk]"),U=!1;break}else jr(this.i,this.l,Zn,null),Me(this,Zn);if(Ce(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jr!=4||se.length!=0||this.h.h||(this.m=1,jt(16),U=!1),this.o=this.o&&U,!U)jr(this.i,this.l,se,"[Invalid Chunked Response]"),de(this),pt(this);else if(se.length>0&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.aa&&!Jt.P&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Qs(Jt),Jt.P=!0,jt(11))}}else jr(this.i,this.l,se,null),Me(this,se);Jr==4&&de(this),this.o&&!this.K&&(Jr==4?je(this.j,this):(this.o=!1,Be(this)))}else Hr(this.g),ee==400&&se.indexOf("Unknown SID")>0?(this.m=3,jt(12)):(this.m=0,jt(13)),de(this),pt(this)}}}catch{}finally{}};function he(U){if(!Ce(U))return U.g.la();const ee=Nr(U.g);if(ee==="")return"";let se="";const xe=ee.length,ht=li(U.g)==4;if(!U.h.i){if(typeof TextDecoder>"u")return de(U),pt(U),"";U.h.i=new o.TextDecoder}for(let bt=0;bt<xe;bt++)U.h.h=!0,se+=U.h.i.decode(ee[bt],{stream:!(ht&&bt==xe-1)});return ee.length=0,U.h.g+=se,U.C=0,U.h.g}function Ce(U){return U.g?U.v=="GET"&&U.M!=2&&U.j.Aa:!1}function Ve(U,ee){var se=U.C,xe=ee.indexOf(`
`,se);return xe==-1?Te:(se=Number(ee.substring(se,xe)),isNaN(se)?pe:(xe+=1,xe+se>ee.length?Te:(ee=ee.slice(xe,xe+se),U.C=xe+se,ee)))}Fe.prototype.cancel=function(){this.K=!0,de(this)};function Be(U){U.T=Date.now()+U.H,st(U,U.H)}function st(U,ee){if(U.D!=null)throw Error("WatchDog timer not null");U.D=Qt(a(U.aa,U),ee)}function Ge(U){U.D&&(o.clearTimeout(U.D),U.D=null)}Fe.prototype.aa=function(){this.D=null;const U=Date.now();U-this.T>=0?(Ft(this.i,this.B),this.M!=2&&(Ct(),jt(17)),de(this),this.m=2,pt(this)):st(this,this.T-U)};function pt(U){U.j.I==0||U.K||je(U.j,U)}function de(U){Ge(U);var ee=U.O;ee&&typeof ee.dispose=="function"&&ee.dispose(),U.O=null,He(U.V),U.g&&(ee=U.g,U.g=null,ee.abort(),ee.dispose())}function Me(U,ee){try{var se=U.j;if(se.I!=0&&(se.g==U||kt(se.h,U))){if(!U.L&&kt(se.h,U)&&se.I==3){try{var xe=se.Ba.g.parse(ee)}catch{xe=null}if(Array.isArray(xe)&&xe.length==3){var ht=xe;if(ht[0]==0){e:if(!se.v){if(se.g)if(se.g.F+3e3<U.F)ce(se),fn(se);else break e;Hn(se),jt(18)}}else se.xa=ht[1],0<se.xa-se.K&&ht[2]<37500&&se.F&&se.A==0&&!se.C&&(se.C=Qt(a(se.Va,se),6e3));It(se.h)<=1&&se.ta&&(se.ta=void 0)}else tt(se,11)}else if((U.L||se.g==U)&&ce(se),!k(ee))for(ht=se.Ba.g.parse(ee),ee=0;ee<ht.length;ee++){let wn=ht[ee];const Zn=wn[0];if(!(Zn<=se.K))if(se.K=Zn,wn=wn[1],se.I==2)if(wn[0]=="c"){se.M=wn[1],se.ba=wn[2];const os=wn[3];os!=null&&(se.ka=os,se.j.info("VER="+se.ka));const Ss=wn[4];Ss!=null&&(se.za=Ss,se.j.info("SVER="+se.za));const ei=wn[5];ei!=null&&typeof ei=="number"&&ei>0&&(xe=1.5*ei,se.O=xe,se.j.info("backChannelRequestTimeoutMs_="+xe)),xe=se;const ks=U.g;if(ks){const Ao=ks.g?ks.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ao){var bt=xe.h;bt.g||Ao.indexOf("spdy")==-1&&Ao.indexOf("quic")==-1&&Ao.indexOf("h2")==-1||(bt.j=bt.l,bt.g=new Set,bt.h&&(ir(bt,bt.h),bt.h=null))}if(xe.G){const Oa=ks.g?ks.g.getResponseHeader("X-HTTP-Session-Id"):null;Oa&&(xe.wa=Oa,Br(xe.J,xe.G,Oa))}}se.I=3,se.l&&se.l.ra(),se.aa&&(se.T=Date.now()-U.F,se.j.info("Handshake RTT: "+se.T+"ms")),xe=se;var Jt=U;if(xe.na=Vt(xe,xe.L?xe.ba:null,xe.W),Jt.L){Zt(xe.h,Jt);var Jr=Jt,Jn=xe.O;Jn&&(Jr.H=Jn),Jr.D&&(Ge(Jr),Be(Jr)),xe.g=Jt}else Ri(xe);se.i.length>0&&ln(se)}else wn[0]!="stop"&&wn[0]!="close"||tt(se,7);else se.I==3&&(wn[0]=="stop"||wn[0]=="close"?wn[0]=="stop"?tt(se,7):Or(se):wn[0]!="noop"&&se.l&&se.l.qa(wn),se.A=0)}}Ct(4)}catch{}}var Oe=class{constructor(U,ee){this.g=U,this.map=ee}};function it(U){this.l=U||10,o.PerformanceNavigationTiming?(U=o.performance.getEntriesByType("navigation"),U=U.length>0&&(U[0].nextHopProtocol=="hq"||U[0].nextHopProtocol=="h2")):U=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=U?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vt(U){return U.h?!0:U.g?U.g.size>=U.j:!1}function It(U){return U.h?1:U.g?U.g.size:0}function kt(U,ee){return U.h?U.h==ee:U.g?U.g.has(ee):!1}function ir(U,ee){U.g?U.g.add(ee):U.h=ee}function Zt(U,ee){U.h&&U.h==ee?U.h=null:U.g&&U.g.has(ee)&&U.g.delete(ee)}it.prototype.cancel=function(){if(this.i=qt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const U of this.g.values())U.cancel();this.g.clear()}};function qt(U){if(U.h!=null)return U.i.concat(U.h.G);if(U.g!=null&&U.g.size!==0){let ee=U.i;for(const se of U.g.values())ee=ee.concat(se.G);return ee}return h(U.i)}var Ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sr(U,ee){if(U){U=U.split("&");for(let se=0;se<U.length;se++){const xe=U[se].indexOf("=");let ht,bt=null;xe>=0?(ht=U[se].substring(0,xe),bt=U[se].substring(xe+1)):ht=U[se],ee(ht,bt?decodeURIComponent(bt.replace(/\+/g," ")):"")}}}function rr(U){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let ee;U instanceof rr?(this.l=U.l,hr(this,U.j),this.o=U.o,this.g=U.g,Mr(this,U.u),this.h=U.h,Yr(this,Tt(U.i)),this.m=U.m):U&&(ee=String(U).match(Ut))?(this.l=!1,hr(this,ee[1]||"",!0),this.o=Zr(ee[2]||""),this.g=Zr(ee[3]||"",!0),Mr(this,ee[4]),this.h=Zr(ee[5]||"",!0),Yr(this,ee[6]||"",!0),this.m=Zr(ee[7]||"")):(this.l=!1,this.i=new Qe(null,this.l))}rr.prototype.toString=function(){const U=[];var ee=this.j;ee&&U.push(an(ee,Wr,!0),":");var se=this.g;return(se||ee=="file")&&(U.push("//"),(ee=this.o)&&U.push(an(ee,Wr,!0),"@"),U.push(Xe(se).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),se=this.u,se!=null&&U.push(":",String(se))),(se=this.h)&&(this.g&&se.charAt(0)!="/"&&U.push("/"),U.push(an(se,se.charAt(0)=="/"?ki:qr,!0))),(se=this.i.toString())&&U.push("?",se),(se=this.m)&&U.push("#",an(se,Et)),U.join("")},rr.prototype.resolve=function(U){const ee=ur(this);let se=!!U.j;se?hr(ee,U.j):se=!!U.o,se?ee.o=U.o:se=!!U.g,se?ee.g=U.g:se=U.u!=null;var xe=U.h;if(se)Mr(ee,U.u);else if(se=!!U.h){if(xe.charAt(0)!="/")if(this.g&&!this.h)xe="/"+xe;else{var ht=ee.h.lastIndexOf("/");ht!=-1&&(xe=ee.h.slice(0,ht+1)+xe)}if(ht=xe,ht==".."||ht==".")xe="";else if(ht.indexOf("./")!=-1||ht.indexOf("/.")!=-1){xe=ht.lastIndexOf("/",0)==0,ht=ht.split("/");const bt=[];for(let Jt=0;Jt<ht.length;){const Jr=ht[Jt++];Jr=="."?xe&&Jt==ht.length&&bt.push(""):Jr==".."?((bt.length>1||bt.length==1&&bt[0]!="")&&bt.pop(),xe&&Jt==ht.length&&bt.push("")):(bt.push(Jr),xe=!0)}xe=bt.join("/")}else xe=ht}return se?ee.h=xe:se=U.i.toString()!=="",se?Yr(ee,Tt(U.i)):se=!!U.m,se&&(ee.m=U.m),ee};function ur(U){return new rr(U)}function hr(U,ee,se){U.j=se?Zr(ee,!0):ee,U.j&&(U.j=U.j.replace(/:$/,""))}function Mr(U,ee){if(ee){if(ee=Number(ee),isNaN(ee)||ee<0)throw Error("Bad port number "+ee);U.u=ee}else U.u=null}function Yr(U,ee,se){ee instanceof Qe?(U.i=ee,Ur(U.i,U.l)):(se||(ee=an(ee,_t)),U.i=new Qe(ee,U.l))}function Br(U,ee,se){U.i.set(ee,se)}function si(U){return Br(U,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),U}function Zr(U,ee){return U?ee?decodeURI(U.replace(/%25/g,"%2525")):decodeURIComponent(U):""}function an(U,ee,se){return typeof U=="string"?(U=encodeURI(U).replace(ee,Ln),se&&(U=U.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U):null}function Ln(U){return U=U.charCodeAt(0),"%"+(U>>4&15).toString(16)+(U&15).toString(16)}var Wr=/[#\/\?@]/g,qr=/[#\?:]/g,ki=/[#\?]/g,_t=/[#\?@]/g,Et=/#/g;function Qe(U,ee){this.h=this.g=null,this.i=U||null,this.j=!!ee}function Ae(U){U.g||(U.g=new Map,U.h=0,U.i&&sr(U.i,function(ee,se){U.add(decodeURIComponent(ee.replace(/\+/g," ")),se)}))}r=Qe.prototype,r.add=function(U,ee){Ae(this),this.i=null,U=er(this,U);let se=this.g.get(U);return se||this.g.set(U,se=[]),se.push(ee),this.h+=1,this};function Ee(U,ee){Ae(U),ee=er(U,ee),U.g.has(ee)&&(U.i=null,U.h-=U.g.get(ee).length,U.g.delete(ee))}function gt(U,ee){return Ae(U),ee=er(U,ee),U.g.has(ee)}r.forEach=function(U,ee){Ae(this),this.g.forEach(function(se,xe){se.forEach(function(ht){U.call(ee,ht,xe,this)},this)},this)};function $t(U,ee){Ae(U);let se=[];if(typeof ee=="string")gt(U,ee)&&(se=se.concat(U.g.get(er(U,ee))));else for(U=Array.from(U.g.values()),ee=0;ee<U.length;ee++)se=se.concat(U[ee]);return se}r.set=function(U,ee){return Ae(this),this.i=null,U=er(this,U),gt(this,U)&&(this.h-=this.g.get(U).length),this.g.set(U,[ee]),this.h+=1,this},r.get=function(U,ee){return U?(U=$t(this,U),U.length>0?String(U[0]):ee):ee};function dt(U,ee,se){Ee(U,ee),se.length>0&&(U.i=null,U.g.set(er(U,ee),h(se)),U.h+=se.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const U=[],ee=Array.from(this.g.keys());for(let xe=0;xe<ee.length;xe++){var se=ee[xe];const ht=Xe(se);se=$t(this,se);for(let bt=0;bt<se.length;bt++){let Jt=ht;se[bt]!==""&&(Jt+="="+Xe(se[bt])),U.push(Jt)}}return this.i=U.join("&")};function Tt(U){const ee=new Qe;return ee.i=U.i,U.g&&(ee.g=new Map(U.g),ee.h=U.h),ee}function er(U,ee){return ee=String(ee),U.j&&(ee=ee.toLowerCase()),ee}function Ur(U,ee){ee&&!U.j&&(Ae(U),U.i=null,U.g.forEach(function(se,xe){const ht=xe.toLowerCase();xe!=ht&&(Ee(this,xe),dt(this,ht,se))},U)),U.j=ee}function pn(U,ee){const se=new Sr;if(o.Image){const xe=new Image;xe.onload=u(kr,se,"TestLoadImage: loaded",!0,ee,xe),xe.onerror=u(kr,se,"TestLoadImage: error",!1,ee,xe),xe.onabort=u(kr,se,"TestLoadImage: abort",!1,ee,xe),xe.ontimeout=u(kr,se,"TestLoadImage: timeout",!1,ee,xe),o.setTimeout(function(){xe.ontimeout&&xe.ontimeout()},1e4),xe.src=U}else ee(!1)}function Dt(U,ee){const se=new Sr,xe=new AbortController,ht=setTimeout(()=>{xe.abort(),kr(se,"TestPingServer: timeout",!1,ee)},1e4);fetch(U,{signal:xe.signal}).then(bt=>{clearTimeout(ht),bt.ok?kr(se,"TestPingServer: ok",!0,ee):kr(se,"TestPingServer: server error",!1,ee)}).catch(()=>{clearTimeout(ht),kr(se,"TestPingServer: error",!1,ee)})}function kr(U,ee,se,xe,ht){try{ht&&(ht.onload=null,ht.onerror=null,ht.onabort=null,ht.ontimeout=null),xe(se)}catch{}}function fr(){this.g=new St}function tr(U){this.i=U.Sb||null,this.h=U.ab||!1}d(tr,lt),tr.prototype.g=function(){return new Vr(this.i,this.h)};function Vr(U,ee){ae.call(this),this.H=U,this.o=ee,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Vr,ae),r=Vr.prototype,r.open=function(U,ee){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=U,this.D=ee,this.readyState=1,Xr(this)},r.send=function(U){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const ee={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};U&&(ee.body=U),(this.H||o).fetch(new Request(this.D,ee)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,or(this)),this.readyState=0},r.Pa=function(U){if(this.g&&(this.l=U,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=U.headers,this.readyState=2,Xr(this)),this.g&&(this.readyState=3,Xr(this),this.g)))if(this.responseType==="arraybuffer")U.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in U){if(this.j=U.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Cr(this)}else U.text().then(this.Oa.bind(this),this.ga.bind(this))};function Cr(U){U.j.read().then(U.Ma.bind(U)).catch(U.ga.bind(U))}r.Ma=function(U){if(this.g){if(this.o&&U.value)this.response.push(U.value);else if(!this.o){var ee=U.value?U.value:new Uint8Array(0);(ee=this.B.decode(ee,{stream:!U.done}))&&(this.response=this.responseText+=ee)}U.done?or(this):Xr(this),this.readyState==3&&Cr(this)}},r.Oa=function(U){this.g&&(this.response=this.responseText=U,or(this))},r.Na=function(U){this.g&&(this.response=U,or(this))},r.ga=function(){this.g&&or(this)};function or(U){U.readyState=4,U.l=null,U.j=null,U.B=null,Xr(U)}r.setRequestHeader=function(U,ee){this.A.append(U,ee)},r.getResponseHeader=function(U){return this.h&&this.h.get(U.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const U=[],ee=this.h.entries();for(var se=ee.next();!se.done;)se=se.value,U.push(se[0]+": "+se[1]),se=ee.next();return U.join(`\r
`)};function Xr(U){U.onreadystatechange&&U.onreadystatechange.call(U)}Object.defineProperty(Vr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(U){this.m=U?"include":"same-origin"}});function _r(U){let ee="";return S(U,function(se,xe){ee+=xe,ee+=":",ee+=se,ee+=`\r
`}),ee}function _n(U,ee,se){e:{for(xe in se){var xe=!1;break e}xe=!0}xe||(se=_r(se),typeof U=="string"?se!=null&&Xe(se):Br(U,ee,se))}function Gt(U){ae.call(this),this.headers=new Map,this.L=U||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Gt,ae);var Tn=/^https?$/i,di=["POST","PUT"];r=Gt.prototype,r.Fa=function(U){this.H=U},r.ea=function(U,ee,se,xe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+U);ee=ee?ee.toUpperCase():"GET",this.D=U,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ue.g(),this.g.onreadystatechange=f(a(this.Ca,this));try{this.B=!0,this.g.open(ee,String(U),!0),this.B=!1}catch(bt){$n(this,bt);return}if(U=se||"",se=new Map(this.headers),xe)if(Object.getPrototypeOf(xe)===Object.prototype)for(var ht in xe)se.set(ht,xe[ht]);else if(typeof xe.keys=="function"&&typeof xe.get=="function")for(const bt of xe.keys())se.set(bt,xe.get(bt));else throw Error("Unknown input type for opt_headers: "+String(xe));xe=Array.from(se.keys()).find(bt=>bt.toLowerCase()=="content-type"),ht=o.FormData&&U instanceof o.FormData,!(Array.prototype.indexOf.call(di,ee,void 0)>=0)||xe||ht||se.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[bt,Jt]of se)this.g.setRequestHeader(bt,Jt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(U),this.v=!1}catch(bt){$n(this,bt)}};function $n(U,ee){U.h=!1,U.g&&(U.j=!0,U.g.abort(),U.j=!1),U.l=ee,U.o=5,oi(U),ss(U)}function oi(U){U.A||(U.A=!0,Se(U,"complete"),Se(U,"error"))}r.abort=function(U){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=U||7,Se(this,"complete"),Se(this,"abort"),ss(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ss(this,!0)),Gt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?ai(this):this.Xa())},r.Xa=function(){ai(this)};function ai(U){if(U.h&&typeof s<"u"){if(U.v&&li(U)==4)setTimeout(U.Ca.bind(U),0);else if(Se(U,"readystatechange"),li(U)==4){U.h=!1;try{const bt=U.ca();e:switch(bt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ee=!0;break e;default:ee=!1}var se;if(!(se=ee)){var xe;if(xe=bt===0){let Jt=String(U.D).match(Ut)[1]||null;!Jt&&o.self&&o.self.location&&(Jt=o.self.location.protocol.slice(0,-1)),xe=!Tn.test(Jt?Jt.toLowerCase():"")}se=xe}if(se)Se(U,"complete"),Se(U,"success");else{U.o=6;try{var ht=li(U)>2?U.g.statusText:""}catch{ht=""}U.l=ht+" ["+U.ca()+"]",oi(U)}}finally{ss(U)}}}}function ss(U,ee){if(U.g){U.m&&(clearTimeout(U.m),U.m=null);const se=U.g;U.g=null,ee||Se(U,"ready");try{se.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function li(U){return U.g?U.g.readyState:0}r.ca=function(){try{return li(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(U){if(this.g){var ee=this.g.responseText;return U&&ee.indexOf(U)==0&&(ee=ee.substring(U.length)),et(ee)}};function Nr(U){try{if(!U.g)return null;if("response"in U.g)return U.g.response;switch(U.F){case"":case"text":return U.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in U.g)return U.g.mozResponseArrayBuffer}return null}catch{return null}}function Hr(U){const ee={};U=(U.g&&li(U)>=2&&U.g.getAllResponseHeaders()||"").split(`\r
`);for(let xe=0;xe<U.length;xe++){if(k(U[xe]))continue;var se=Le(U[xe]);const ht=se[0];if(se=se[1],typeof se!="string")continue;se=se.trim();const bt=ee[ht]||[];ee[ht]=bt,bt.push(se)}I(ee,function(xe){return xe.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yt(U,ee,se){return se&&se.internalChannelParams&&se.internalChannelParams[U]||ee}function dr(U){this.za=0,this.i=[],this.j=new Sr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Yt("failFast",!1,U),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Yt("baseRetryDelayMs",5e3,U),this.Za=Yt("retryDelaySeedMs",1e4,U),this.Ta=Yt("forwardChannelMaxRetries",2,U),this.va=Yt("forwardChannelRequestTimeoutMs",2e4,U),this.ma=U&&U.xmlHttpFactory||void 0,this.Ua=U&&U.Rb||void 0,this.Aa=U&&U.useFetchStreams||!1,this.O=void 0,this.L=U&&U.supportsCrossDomainXhr||!1,this.M="",this.h=new it(U&&U.concurrentRequestLimit),this.Ba=new fr,this.S=U&&U.fastHandshake||!1,this.R=U&&U.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=U&&U.Pb||!1,U&&U.ua&&this.j.ua(),U&&U.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&U&&U.detectBufferingProxy||!1,this.ia=void 0,U&&U.longPollingTimeout&&U.longPollingTimeout>0&&(this.ia=U.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=dr.prototype,r.ka=8,r.I=1,r.connect=function(U,ee,se,xe){jt(0),this.W=U,this.H=ee||{},se&&xe!==void 0&&(this.H.OSID=se,this.H.OAID=xe),this.F=this.X,this.J=Vt(this,null,this.W),ln(this)};function Or(U){if(Dr(U),U.I==3){var ee=U.V++,se=ur(U.J);if(Br(se,"SID",U.M),Br(se,"RID",ee),Br(se,"TYPE","terminate"),qn(U,se),ee=new Fe(U,U.j,ee),ee.M=2,ee.A=si(ur(se)),se=!1,o.navigator&&o.navigator.sendBeacon)try{se=o.navigator.sendBeacon(ee.A.toString(),"")}catch{}!se&&o.Image&&(new Image().src=ee.A,se=!0),se||(ee.g=br(ee.j,null),ee.g.ea(ee.A)),ee.F=Date.now(),Be(ee)}Nt(U)}function fn(U){U.g&&(Qs(U),U.g.cancel(),U.g=null)}function Dr(U){fn(U),U.v&&(o.clearTimeout(U.v),U.v=null),ce(U),U.h.cancel(),U.m&&(typeof U.m=="number"&&o.clearTimeout(U.m),U.m=null)}function ln(U){if(!vt(U.h)&&!U.m){U.m=!0;var ee=U.Ea;M||N(),W||(M(),W=!0),$.add(ee,U),U.D=0}}function pi(U,ee){return It(U.h)>=U.h.j-(U.m?1:0)?!1:U.m?(U.i=ee.G.concat(U.i),!0):U.I==1||U.I==2||U.D>=(U.Sa?0:U.Ta)?!1:(U.m=Qt(a(U.Ea,U,ee),$e(U,U.D)),U.D++,!0)}r.Ea=function(U){if(this.m)if(this.m=null,this.I==1){if(!U){this.V=Math.floor(Math.random()*1e5),U=this.V++;const ht=new Fe(this,this.j,U);let bt=this.o;if(this.U&&(bt?(bt=z(bt),H(bt,this.U)):bt=this.U),this.u!==null||this.R||(ht.J=bt,bt=null),this.S)e:{for(var ee=0,se=0;se<this.i.length;se++){t:{var xe=this.i[se];if("__data__"in xe.map&&(xe=xe.map.__data__,typeof xe=="string")){xe=xe.length;break t}xe=void 0}if(xe===void 0)break;if(ee+=xe,ee>4096){ee=se;break e}if(ee===4096||se===this.i.length-1){ee=se+1;break e}}ee=1e3}else ee=1e3;ee=mi(this,ht,ee),se=ur(this.J),Br(se,"RID",U),Br(se,"CVER",22),this.G&&Br(se,"X-HTTP-Session-Id",this.G),qn(this,se),bt&&(this.R?ee="headers="+Xe(_r(bt))+"&"+ee:this.u&&_n(se,this.u,bt)),ir(this.h,ht),this.Ra&&Br(se,"TYPE","init"),this.S?(Br(se,"$req",ee),Br(se,"SID","null"),ht.U=!0,Ze(ht,se,null)):Ze(ht,se,ee),this.I=2}}else this.I==3&&(U?ji(this,U):this.i.length==0||vt(this.h)||ji(this))};function ji(U,ee){var se;ee?se=ee.l:se=U.V++;const xe=ur(U.J);Br(xe,"SID",U.M),Br(xe,"RID",se),Br(xe,"AID",U.K),qn(U,xe),U.u&&U.o&&_n(xe,U.u,U.o),se=new Fe(U,U.j,se,U.D+1),U.u===null&&(se.J=U.o),ee&&(U.i=ee.G.concat(U.i)),ee=mi(U,se,1e3),se.H=Math.round(U.va*.5)+Math.round(U.va*.5*Math.random()),ir(U.h,se),Ze(se,xe,ee)}function qn(U,ee){U.H&&S(U.H,function(se,xe){Br(ee,xe,se)}),U.l&&S({},function(se,xe){Br(ee,xe,se)})}function mi(U,ee,se){se=Math.min(U.i.length,se);const xe=U.l?a(U.l.Ka,U.l,U):null;e:{var ht=U.i;let Jr=-1;for(;;){const Jn=["count="+se];Jr==-1?se>0?(Jr=ht[0].g,Jn.push("ofs="+Jr)):Jr=0:Jn.push("ofs="+Jr);let wn=!0;for(let Zn=0;Zn<se;Zn++){var bt=ht[Zn].g;const os=ht[Zn].map;if(bt-=Jr,bt<0)Jr=Math.max(0,ht[Zn].g-100),wn=!1;else try{bt="req"+bt+"_"||"";try{var Jt=os instanceof Map?os:Object.entries(os);for(const[Ss,ei]of Jt){let ks=ei;l(ei)&&(ks=We(ei)),Jn.push(bt+Ss+"="+encodeURIComponent(ks))}}catch(Ss){throw Jn.push(bt+"type="+encodeURIComponent("_badmap")),Ss}}catch{xe&&xe(os)}}if(wn){Jt=Jn.join("&");break e}}Jt=void 0}return U=U.i.splice(0,se),ee.G=U,Jt}function Ri(U){if(!U.g&&!U.v){U.Y=1;var ee=U.Da;M||N(),W||(M(),W=!0),$.add(ee,U),U.A=0}}function Hn(U){return U.g||U.v||U.A>=3?!1:(U.Y++,U.v=Qt(a(U.Da,U),$e(U,U.A)),U.A++,!0)}r.Da=function(){if(this.v=null,Y(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var U=4*this.T;this.j.info("BP detection timer enabled: "+U),this.B=Qt(a(this.Wa,this),U)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,jt(10),fn(this),Y(this))};function Qs(U){U.B!=null&&(o.clearTimeout(U.B),U.B=null)}function Y(U){U.g=new Fe(U,U.j,"rpc",U.Y),U.u===null&&(U.g.J=U.o),U.g.P=0;var ee=ur(U.na);Br(ee,"RID","rpc"),Br(ee,"SID",U.M),Br(ee,"AID",U.K),Br(ee,"CI",U.F?"0":"1"),!U.F&&U.ia&&Br(ee,"TO",U.ia),Br(ee,"TYPE","xmlhttp"),qn(U,ee),U.u&&U.o&&_n(ee,U.u,U.o),U.O&&(U.g.H=U.O);var se=U.g;U=U.ba,se.M=1,se.A=si(ur(ee)),se.u=null,se.R=!0,ut(se,U)}r.Va=function(){this.C!=null&&(this.C=null,fn(this),Hn(this),jt(19))};function ce(U){U.C!=null&&(o.clearTimeout(U.C),U.C=null)}function je(U,ee){var se=null;if(U.g==ee){ce(U),Qs(U),U.g=null;var xe=2}else if(kt(U.h,ee))se=ee.G,Zt(U.h,ee),xe=1;else return;if(U.I!=0){if(ee.o)if(xe==1){se=ee.u?ee.u.length:0,ee=Date.now()-ee.F;var ht=U.D;xe=zt(),Se(xe,new Mt(xe,se)),ln(U)}else Ri(U);else if(ht=ee.m,ht==3||ht==0&&ee.X>0||!(xe==1&&pi(U,ee)||xe==2&&Hn(U)))switch(se&&se.length>0&&(ee=U.h,ee.i=ee.i.concat(se)),ht){case 1:tt(U,5);break;case 4:tt(U,10);break;case 3:tt(U,6);break;default:tt(U,2)}}}function $e(U,ee){let se=U.Qa+Math.floor(Math.random()*U.Za);return U.isActive()||(se*=2),se*ee}function tt(U,ee){if(U.j.info("Error code "+ee),ee==2){var se=a(U.bb,U),xe=U.Ua;const ht=!xe;xe=new rr(xe||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||hr(xe,"https"),si(xe),ht?pn(xe.toString(),se):Dt(xe.toString(),se)}else jt(2);U.I=0,U.l&&U.l.pa(ee),Nt(U),Dr(U)}r.bb=function(U){U?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function Nt(U){if(U.I=0,U.ja=[],U.l){const ee=qt(U.h);(ee.length!=0||U.i.length!=0)&&(m(U.ja,ee),m(U.ja,U.i),U.h.i.length=0,h(U.i),U.i.length=0),U.l.oa()}}function Vt(U,ee,se){var xe=se instanceof rr?ur(se):new rr(se);if(xe.g!="")ee&&(xe.g=ee+"."+xe.g),Mr(xe,xe.u);else{var ht=o.location;xe=ht.protocol,ee=ee?ee+"."+ht.hostname:ht.hostname,ht=+ht.port;const bt=new rr(null);xe&&hr(bt,xe),ee&&(bt.g=ee),ht&&Mr(bt,ht),se&&(bt.h=se),xe=bt}return se=U.G,ee=U.wa,se&&ee&&Br(xe,se,ee),Br(xe,"VER",U.ka),qn(U,xe),xe}function br(U,ee,se){if(ee&&!U.L)throw Error("Can't create secondary domain capable XhrIo object.");return ee=U.Aa&&!U.ma?new Gt(new tr({ab:se})):new Gt(U.ma),ee.Fa(U.L),ee}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Er(){}r=Er.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function $r(){}$r.prototype.g=function(U,ee){return new Lr(U,ee)};function Lr(U,ee){ae.call(this),this.g=new dr(ee),this.l=U,this.h=ee&&ee.messageUrlParams||null,U=ee&&ee.messageHeaders||null,ee&&ee.clientProtocolHeaderRequired&&(U?U["X-Client-Protocol"]="webchannel":U={"X-Client-Protocol":"webchannel"}),this.g.o=U,U=ee&&ee.initMessageHeaders||null,ee&&ee.messageContentType&&(U?U["X-WebChannel-Content-Type"]=ee.messageContentType:U={"X-WebChannel-Content-Type":ee.messageContentType}),ee&&ee.sa&&(U?U["X-WebChannel-Client-Profile"]=ee.sa:U={"X-WebChannel-Client-Profile":ee.sa}),this.g.U=U,(U=ee&&ee.Qb)&&!k(U)&&(this.g.u=U),this.A=ee&&ee.supportsCrossDomainXhr||!1,this.v=ee&&ee.sendRawJson||!1,(ee=ee&&ee.httpSessionIdParam)&&!k(ee)&&(this.g.G=ee,U=this.h,U!==null&&ee in U&&(U=this.h,ee in U&&delete U[ee])),this.j=new Gn(this)}d(Lr,ae),Lr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lr.prototype.close=function(){Or(this.g)},Lr.prototype.o=function(U){var ee=this.g;if(typeof U=="string"){var se={};se.__data__=U,U=se}else this.v&&(se={},se.__data__=We(U),U=se);ee.i.push(new Oe(ee.Ya++,U)),ee.I==3&&ln(ee)},Lr.prototype.N=function(){this.g.l=null,delete this.j,Or(this.g),delete this.g,Lr.Z.N.call(this)};function vn(U){at.call(this),U.__headers__&&(this.headers=U.__headers__,this.statusCode=U.__status__,delete U.__headers__,delete U.__status__);var ee=U.__sm__;if(ee){e:{for(const se in ee){U=se;break e}U=void 0}(this.i=U)&&(U=this.i,ee=ee!==null&&U in ee?ee[U]:void 0),this.data=ee}else this.data=U}d(vn,at);function Qn(){wt.call(this),this.status=1}d(Qn,wt);function Gn(U){this.g=U}d(Gn,Er),Gn.prototype.ra=function(){Se(this.g,"a")},Gn.prototype.qa=function(U){Se(this.g,new vn(U))},Gn.prototype.pa=function(U){Se(this.g,new Qn)},Gn.prototype.oa=function(){Se(this.g,"b")},$r.prototype.createWebChannel=$r.prototype.g,Lr.prototype.send=Lr.prototype.o,Lr.prototype.open=Lr.prototype.m,Lr.prototype.close=Lr.prototype.close,ak=function(){return new $r},ok=function(){return zt()},sk=ot,Yy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Rr.NO_ERROR=0,Rr.TIMEOUT=8,Rr.HTTP_ERROR=6,Tm=Rr,mr.COMPLETE="complete",ik=mr,At.EventType=ct,ct.OPEN="a",ct.CLOSE="b",ct.ERROR="c",ct.MESSAGE="d",ae.prototype.listen=ae.prototype.J,Rf=At,Gt.prototype.listenOnce=Gt.prototype.K,Gt.prototype.getLastError=Gt.prototype.Ha,Gt.prototype.getLastErrorCode=Gt.prototype.ya,Gt.prototype.getStatus=Gt.prototype.ca,Gt.prototype.getResponseJson=Gt.prototype.La,Gt.prototype.getResponseText=Gt.prototype.la,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Fa,nk=Gt}).apply(typeof Xp<"u"?Xp:typeof self<"u"?self:typeof window<"u"?window:{});const c_="@firebase/firestore",u_="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ms.UNAUTHENTICATED=new Ms(null),Ms.GOOGLE_CREDENTIALS=new Ms("google-credentials-uid"),Ms.FIRST_PARTY=new Ms("first-party-uid"),Ms.MOCK_USER=new Ms("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=new Fv("@firebase/firestore");function Cu(){return iu.logLevel}function yr(r,...e){if(iu.logLevel<=kn.DEBUG){const t=e.map(x5);iu.debug(`Firestore (${Hh}): ${r}`,...t)}}function ll(r,...e){if(iu.logLevel<=kn.ERROR){const t=e.map(x5);iu.error(`Firestore (${Hh}): ${r}`,...t)}}function Ah(r,...e){if(iu.logLevel<=kn.WARN){const t=e.map(x5);iu.warn(`Firestore (${Hh}): ${r}`,...t)}}function x5(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,lk(r,n,t)}function lk(r,e,t){let n=`FIRESTORE (${Hh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw ll(n),new Error(n)}function xi(r,e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,r||lk(e,i,n)}function An(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fr extends hu{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ID{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ms.UNAUTHENTICATED))}shutdown(){}}class AD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class TD{constructor(e){this.t=e,this.currentUser=Ms.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xi(this.o===void 0,42304);let n=this.i;const i=c=>this.i!==n?(n=this.i,t(c)):Promise.resolve();let s=new qc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qc,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{yr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(yr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qc)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(yr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(xi(typeof n.accessToken=="string",31837,{l:n}),new ck(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xi(e===null||typeof e=="string",2055,{h:e}),new Ms(e)}}class ND{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Ms.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jD{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new ND(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ms.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class h_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Uv(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){xi(this.o===void 0,3512);const n=s=>{s.error!=null&&yr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,yr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{yr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):yr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new h_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xi(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new h_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=PD(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%62))}return n}}function En(r,e){return r<e?-1:r>e?1:0}function Xy(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const i=r.charAt(n),s=e.charAt(n);if(i!==s)return X1(i)===X1(s)?En(i,s):X1(i)?1:-1}return En(r.length,e.length)}const MD=55296,OD=57343;function X1(r){const e=r.charCodeAt(0);return e>=MD&&e<=OD}function Th(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="__name__";class ba{constructor(e,t,n){t===void 0?t=0:t>e.length&&sn(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&sn(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return ba.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ba?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=ba.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return En(e.length,t.length)}static compareSegments(e,t){const n=ba.isNumericId(e),i=ba.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?ba.extractNumericId(e).compare(ba.extractNumericId(t)):Xy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ec.fromString(e.substring(4,e.length-2))}}class wi extends ba{construct(e,t,n){return new wi(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Fr(ar.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new wi(t)}static emptyPath(){return new wi([])}}const LD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qs extends ba{construct(e,t,n){return new qs(e,t,n)}static isValidIdentifier(e){return LD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===f_}static keyField(){return new qs([f_])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(n.length===0)throw new Fr(ar.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Fr(ar.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Fr(ar.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(n+=l,i++):(s(),i++)}if(s(),o)throw new Fr(ar.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qs(t)}static emptyPath(){return new qs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.path=e}static fromPath(e){return new Kr(wi.fromString(e))}static fromName(e){return new Kr(wi.fromString(e).popFirst(5))}static empty(){return new Kr(wi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wi.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return wi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Kr(new wi(e.slice()))}}function DD(r,e,t,n){if(e===!0&&n===!0)throw new Fr(ar.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function d_(r){if(Kr.isDocumentKey(r))throw new Fr(ar.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function FD(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function BD(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":sn(12329,{type:typeof r})}function Qy(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Fr(ar.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=BD(r);throw new Fr(ar.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(r,e){const t={typeString:r};return e&&(t.value=e),t}function ip(r,e){if(!FD(r))throw new Fr(ar.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const i=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const o=r[n];if(i&&typeof o!==i){t=`JSON field '${n}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${n}' field to equal '${s.value}'`;break}}if(t)throw new Fr(ar.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=-62135596800,m_=1e6;class qi{static now(){return qi.fromMillis(Date.now())}static fromDate(e){return qi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*m_);return new qi(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fr(ar.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fr(ar.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<p_)throw new Fr(ar.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fr(ar.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/m_}_compareTo(e){return this.seconds===e.seconds?En(this.nanoseconds,e.nanoseconds):En(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qi._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ip(e,qi._jsonSchema))return new qi(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-p_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qi._jsonSchemaVersion="firestore/timestamp/1.0",qi._jsonSchema={type:Gi("string",qi._jsonSchemaVersion),seconds:Gi("number"),nanoseconds:Gi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{static fromTimestamp(e){return new rn(e)}static min(){return new rn(new qi(0,0))}static max(){return new rn(new qi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=-1;function zD(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=rn.fromTimestamp(n===1e9?new qi(t+1,0):new qi(t,n));return new lc(i,Kr.empty(),e)}function UD(r){return new lc(r.readTime,r.key,Od)}class lc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new lc(rn.min(),Kr.empty(),Od)}static max(){return new lc(rn.max(),Kr.empty(),Od)}}function VD(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Kr.comparator(r.documentKey,e.documentKey),t!==0?t:En(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jg(r){if(r.code!==ar.FAILED_PRECONDITION||r.message!==$D)throw r;yr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&sn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Bt((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Bt?t:Bt.resolve(t)}catch(t){return Bt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Bt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Bt.reject(t)}static resolve(e){return new Bt((t,n)=>{t(e)})}static reject(e){return new Bt((t,n)=>{n(e)})}static waitFor(e){return new Bt((t,n)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&t()},c=>n(c))}),o=!0,s===i&&t()})}static or(e){let t=Bt.resolve(!1);for(const n of e)t=t.next(i=>i?Bt.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,s)=>{n.push(t.call(this,i,s))}),this.waitFor(n)}static mapArray(e,t){return new Bt((n,i)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const a=c;t(e[a]).next(u=>{o[a]=u,++l,l===s&&n(o)},u=>i(u))}})}static doWhile(e,t){return new Bt((n,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):n()};s()})}}function qD(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Gh(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rg.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=-1;function Pg(r){return r==null}function Jy(r){return r===0&&1/r==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="";function GD(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=g_(e)),e=KD(r.get(t),e);return g_(e)}function KD(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const s=r.charAt(i);switch(s){case"\0":t+="";break;case hk:t+="";break;default:t+=s}}return t}function g_(r){return r+hk+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function sp(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function YD(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t){this.comparator=e,this.root=t||ys.EMPTY}insert(e,t){return new Vi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ys.BLACK,null,null))}remove(e){return new Vi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ys.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qp(this.root,e,this.comparator,!0)}}class Qp{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ys{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=n??ys.RED,this.left=i??ys.EMPTY,this.right=s??ys.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new ys(e??this.key,t??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ys.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ys.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ys.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ys.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw sn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw sn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw sn(27949);return e+(this.isRed()?0:1)}}ys.EMPTY=null,ys.RED=!0,ys.BLACK=!1;ys.EMPTY=new class{constructor(){this.size=0}get key(){throw sn(57766)}get value(){throw sn(16141)}get color(){throw sn(16727)}get left(){throw sn(29726)}get right(){throw sn(36894)}copy(e,t,n,i,s){return this}insert(e,t,n){return new ys(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.comparator=e,this.data=new Vi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new b_(this.data.getIterator())}getIteratorFrom(e){return new b_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof is)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new is(this.comparator);return t.data=e,t}}class b_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.fields=e,e.sort(qs.comparator)}static empty(){return new Fl([])}unionWith(e){let t=new is(qs.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Fl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Th(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new fk("Invalid base64 string: "+s):s}}(e);return new xs(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new xs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return En(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xs.EMPTY_BYTE_STRING=new xs("");const XD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cc(r){if(xi(!!r,39018),typeof r=="string"){let e=0;const t=XD.exec(r);if(xi(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Di(r.seconds),nanos:Di(r.nanos)}}function Di(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function uc(r){return typeof r=="string"?xs.fromBase64String(r):xs.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="server_timestamp",pk="__type__",mk="__previous_value__",gk="__local_write_time__";function S5(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[pk])==null?void 0:n.stringValue)===dk}function Mg(r){const e=r.mapValue.fields[mk];return S5(e)?Mg(e):e}function Ld(r){const e=cc(r.mapValue.fields[gk].timestampValue);return new qi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,t,n,i,s,o,l,c,a,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=a,this.isUsingEmulator=u}}const j0="(default)";class Dd{constructor(e,t){this.projectId=e,this.database=t||j0}static empty(){return new Dd("","")}get isDefaultDatabase(){return this.database===j0}isEqual(e){return e instanceof Dd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD="__type__",ZD="__max__",Jp={mapValue:{}},eF="__vector__",Zy="value";function hc(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?S5(r)?4:rF(r)?9007199254740991:tF(r)?10:11:sn(28295,{value:r})}function Ta(r,e){if(r===e)return!0;const t=hc(r);if(t!==hc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ld(r).isEqual(Ld(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=cc(i.timestampValue),l=cc(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,s){return uc(i.bytesValue).isEqual(uc(s.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,s){return Di(i.geoPointValue.latitude)===Di(s.geoPointValue.latitude)&&Di(i.geoPointValue.longitude)===Di(s.geoPointValue.longitude)}(r,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Di(i.integerValue)===Di(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Di(i.doubleValue),l=Di(s.doubleValue);return o===l?Jy(o)===Jy(l):isNaN(o)&&isNaN(l)}return!1}(r,e);case 9:return Th(r.arrayValue.values||[],e.arrayValue.values||[],Ta);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(y_(o)!==y_(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Ta(o[c],l[c])))return!1;return!0}(r,e);default:return sn(52216,{left:r})}}function Fd(r,e){return(r.values||[]).find(t=>Ta(t,e))!==void 0}function Nh(r,e){if(r===e)return 0;const t=hc(r),n=hc(e);if(t!==n)return En(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return En(r.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Di(s.integerValue||s.doubleValue),c=Di(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(r,e);case 3:return v_(r.timestampValue,e.timestampValue);case 4:return v_(Ld(r),Ld(e));case 5:return Xy(r.stringValue,e.stringValue);case 6:return function(s,o){const l=uc(s),c=uc(o);return l.compareTo(c)}(r.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let a=0;a<l.length&&a<c.length;a++){const u=En(l[a],c[a]);if(u!==0)return u}return En(l.length,c.length)}(r.referenceValue,e.referenceValue);case 8:return function(s,o){const l=En(Di(s.latitude),Di(o.latitude));return l!==0?l:En(Di(s.longitude),Di(o.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return w_(r.arrayValue,e.arrayValue);case 10:return function(s,o){var f,h,m,g;const l=s.fields||{},c=o.fields||{},a=(f=l[Zy])==null?void 0:f.arrayValue,u=(h=c[Zy])==null?void 0:h.arrayValue,d=En(((m=a==null?void 0:a.values)==null?void 0:m.length)||0,((g=u==null?void 0:u.values)==null?void 0:g.length)||0);return d!==0?d:w_(a,u)}(r.mapValue,e.mapValue);case 11:return function(s,o){if(s===Jp.mapValue&&o===Jp.mapValue)return 0;if(s===Jp.mapValue)return 1;if(o===Jp.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),a=o.fields||{},u=Object.keys(a);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){const f=Xy(c[d],u[d]);if(f!==0)return f;const h=Nh(l[c[d]],a[u[d]]);if(h!==0)return h}return En(c.length,u.length)}(r.mapValue,e.mapValue);default:throw sn(23264,{he:t})}}function v_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return En(r,e);const t=cc(r),n=cc(e),i=En(t.seconds,n.seconds);return i!==0?i:En(t.nanos,n.nanos)}function w_(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const s=Nh(t[i],n[i]);if(s)return s}return En(t.length,n.length)}function jh(r){return eb(r)}function eb(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=cc(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return uc(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return Kr.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",i=!0;for(const s of t.values||[])i?i=!1:n+=",",n+=eb(s);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of n)s?s=!1:i+=",",i+=`${o}:${eb(t.fields[o])}`;return i+"}"}(r.mapValue):sn(61005,{value:r})}function Nm(r){switch(hc(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mg(r);return e?16+Nm(e):16;case 5:return 2*r.stringValue.length;case 6:return uc(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,s)=>i+Nm(s),0)}(r.arrayValue);case 10:case 11:return function(n){let i=0;return sp(n.fields,(s,o)=>{i+=s.length+Nm(o)}),i}(r.mapValue);default:throw sn(13486,{value:r})}}function tb(r){return!!r&&"integerValue"in r}function k5(r){return!!r&&"arrayValue"in r}function __(r){return!!r&&"nullValue"in r}function x_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Q1(r){return!!r&&"mapValue"in r}function tF(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[JD])==null?void 0:n.stringValue)===eF}function Xf(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return sp(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Xf(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xf(r.arrayValue.values[t]);return e}return{...r}}function rF(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===ZD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.value=e}static empty(){return new wa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Q1(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xf(t)}setAll(e){let t=qs.emptyPath(),n={},i=[];e.forEach((o,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,n,i),n={},i=[],t=l.popLast()}o?n[l.lastSegment()]=Xf(o):i.push(l.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());Q1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ta(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Q1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){sp(t,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new wa(Xf(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,t,n,i,s,o,l){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ls(e,0,rn.min(),rn.min(),rn.min(),wa.empty(),0)}static newFoundDocument(e,t,n,i){return new Ls(e,1,t,rn.min(),n,i,0)}static newNoDocument(e,t){return new Ls(e,2,t,rn.min(),rn.min(),wa.empty(),0)}static newUnknownDocument(e,t){return new Ls(e,3,t,rn.min(),rn.min(),wa.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ls&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ls(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,t){this.position=e,this.inclusive=t}}function S_(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const s=e[i],o=r.position[i];if(s.field.isKeyField()?n=Kr.comparator(Kr.fromName(o.referenceValue),t.key):n=Nh(o,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function k_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ta(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,t="asc"){this.field=e,this.dir=t}}function nF(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{}class rs extends yk{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new sF(e,t,n):t==="array-contains"?new lF(e,n):t==="in"?new cF(e,n):t==="not-in"?new uF(e,n):t==="array-contains-any"?new hF(e,n):new rs(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new oF(e,n):new aF(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Nh(t,this.value)):t!==null&&hc(this.value)===hc(t)&&this.matchesComparison(Nh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return sn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Na extends yk{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Na(e,t)}matches(e){return bk(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bk(r){return r.op==="and"}function vk(r){return iF(r)&&bk(r)}function iF(r){for(const e of r.filters)if(e instanceof Na)return!1;return!0}function rb(r){if(r instanceof rs)return r.field.canonicalString()+r.op.toString()+jh(r.value);if(vk(r))return r.filters.map(e=>rb(e)).join(",");{const e=r.filters.map(t=>rb(t)).join(",");return`${r.op}(${e})`}}function wk(r,e){return r instanceof rs?function(n,i){return i instanceof rs&&n.op===i.op&&n.field.isEqual(i.field)&&Ta(n.value,i.value)}(r,e):r instanceof Na?function(n,i){return i instanceof Na&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,o,l)=>s&&wk(o,i.filters[l]),!0):!1}(r,e):void sn(19439)}function _k(r){return r instanceof rs?function(t){return`${t.field.canonicalString()} ${t.op} ${jh(t.value)}`}(r):r instanceof Na?function(t){return t.op.toString()+" {"+t.getFilters().map(_k).join(" ,")+"}"}(r):"Filter"}class sF extends rs{constructor(e,t,n){super(e,t,n),this.key=Kr.fromName(n.referenceValue)}matches(e){const t=Kr.comparator(e.key,this.key);return this.matchesComparison(t)}}class oF extends rs{constructor(e,t){super(e,"in",t),this.keys=xk("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class aF extends rs{constructor(e,t){super(e,"not-in",t),this.keys=xk("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function xk(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(n=>Kr.fromName(n.referenceValue))}class lF extends rs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return k5(t)&&Fd(t.arrayValue,this.value)}}class cF extends rs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Fd(this.value.arrayValue,t)}}class uF extends rs{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Fd(this.value.arrayValue,t)}}class hF extends rs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!k5(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Fd(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,t=null,n=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function E_(r,e=null,t=[],n=[],i=null,s=null,o=null){return new fF(r,e,t,n,i,s,o)}function E5(r){const e=An(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>rb(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Pg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>jh(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>jh(n)).join(",")),e.Te=t}return e.Te}function C5(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!nF(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!wk(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!k_(r.startAt,e.startAt)&&k_(r.endAt,e.endAt)}function nb(r){return Kr.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,t=null,n=[],i=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function dF(r,e,t,n,i,s,o,l){return new Og(r,e,t,n,i,s,o,l)}function Sk(r){return new Og(r)}function C_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function pF(r){return r.collectionGroup!==null}function Qf(r){const e=An(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new is(qs.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(a=>{a.isInequality()&&(l=l.add(a.field))})}),l})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new P0(s,n))}),t.has(qs.keyField().canonicalString())||e.Ie.push(new P0(qs.keyField(),n))}return e.Ie}function Aa(r){const e=An(r);return e.Ee||(e.Ee=mF(e,Qf(r))),e.Ee}function mF(r,e){if(r.limitType==="F")return E_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new P0(i.field,s)});const t=r.endAt?new R0(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new R0(r.startAt.position,r.startAt.inclusive):null;return E_(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function ib(r,e,t){return new Og(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Lg(r,e){return C5(Aa(r),Aa(e))&&r.limitType===e.limitType}function kk(r){return`${E5(Aa(r))}|lt:${r.limitType}`}function Iu(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(i=>_k(i)).join(", ")}]`),Pg(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>jh(i)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>jh(i)).join(",")),`Target(${n})`}(Aa(r))}; limitType=${r.limitType})`}function Dg(r,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Kr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(r,e)&&function(n,i){for(const s of Qf(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(r,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(r,e)&&function(n,i){return!(n.startAt&&!function(o,l,c){const a=S_(o,l,c);return o.inclusive?a<=0:a<0}(n.startAt,Qf(n),i)||n.endAt&&!function(o,l,c){const a=S_(o,l,c);return o.inclusive?a>=0:a>0}(n.endAt,Qf(n),i))}(r,e)}function gF(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Ek(r){return(e,t)=>{let n=!1;for(const i of Qf(r)){const s=yF(i,e,t);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function yF(r,e,t){const n=r.field.isKeyField()?Kr.comparator(e.key,t.key):function(s,o,l){const c=o.data.field(s),a=l.data.field(s);return c!==null&&a!==null?Nh(c,a):sn(42886)}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return sn(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){sp(this.inner,(t,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return YD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF=new Vi(Kr.comparator);function fc(){return bF}const Ck=new Vi(Kr.comparator);function Pf(...r){let e=Ck;for(const t of r)e=e.insert(t.key,t);return e}function vF(r){let e=Ck;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function Uc(){return Jf()}function Ik(){return Jf()}function Jf(){return new pu(r=>r.toString(),(r,e)=>r.isEqual(e))}const wF=new is(Kr.comparator);function jn(...r){let e=wF;for(const t of r)e=e.add(t);return e}const _F=new is(En);function xF(){return _F}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SF(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jy(e)?"-0":e}}function kF(r){return{integerValue:""+r}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(){this._=void 0}}function EF(r,e,t){return r instanceof sb?function(i,s){const o={fields:{[pk]:{stringValue:dk},[gk]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&S5(s)&&(s=Mg(s)),s&&(o.fields[mk]=s),{mapValue:o}}(t,e):r instanceof M0?Ak(r,e):r instanceof O0?Tk(r,e):function(i,s){const o=IF(i,s),l=I_(o)+I_(i.Ae);return tb(o)&&tb(i.Ae)?kF(l):SF(i.serializer,l)}(r,e)}function CF(r,e,t){return r instanceof M0?Ak(r,e):r instanceof O0?Tk(r,e):t}function IF(r,e){return r instanceof ob?function(n){return tb(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class sb extends Fg{}class M0 extends Fg{constructor(e){super(),this.elements=e}}function Ak(r,e){const t=Nk(e);for(const n of r.elements)t.some(i=>Ta(i,n))||t.push(n);return{arrayValue:{values:t}}}class O0 extends Fg{constructor(e){super(),this.elements=e}}function Tk(r,e){let t=Nk(e);for(const n of r.elements)t=t.filter(i=>!Ta(i,n));return{arrayValue:{values:t}}}class ob extends Fg{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function I_(r){return Di(r.integerValue||r.doubleValue)}function Nk(r){return k5(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function AF(r,e){return r.field.isEqual(e.field)&&function(n,i){return n instanceof M0&&i instanceof M0||n instanceof O0&&i instanceof O0?Th(n.elements,i.elements,Ta):n instanceof ob&&i instanceof ob?Ta(n.Ae,i.Ae):n instanceof sb&&i instanceof sb}(r.transform,e.transform)}class Hc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Hc}static exists(e){return new Hc(void 0,e)}static updateTime(e){return new Hc(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jm(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class I5{}function jk(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new NF(r.key,Hc.none()):new A5(r.key,r.data,Hc.none());{const t=r.data,n=wa.empty();let i=new is(qs.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?n.delete(s):n.set(s,o),i=i.add(s)}return new Bg(r.key,n,new Fl(i.toArray()),Hc.none())}}function TF(r,e,t){r instanceof A5?function(i,s,o){const l=i.value.clone(),c=T_(i.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(r,e,t):r instanceof Bg?function(i,s,o){if(!jm(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=T_(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Rk(i)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(r,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Zf(r,e,t,n){return r instanceof A5?function(s,o,l,c){if(!jm(s.precondition,o))return l;const a=s.value.clone(),u=N_(s.fieldTransforms,c,o);return a.setAll(u),o.convertToFoundDocument(o.version,a).setHasLocalMutations(),null}(r,e,t,n):r instanceof Bg?function(s,o,l,c){if(!jm(s.precondition,o))return l;const a=N_(s.fieldTransforms,c,o),u=o.data;return u.setAll(Rk(s)),u.setAll(a),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(r,e,t,n):function(s,o,l){return jm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(r,e,t)}function A_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Th(n,i,(s,o)=>AF(s,o))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class A5 extends I5{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bg extends I5{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Rk(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function T_(r,e,t){const n=new Map;xi(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let i=0;i<t.length;i++){const s=r[i],o=s.transform,l=e.data.field(s.field);n.set(s.field,CF(o,l,t[i]))}return n}function N_(r,e,t){const n=new Map;for(const i of r){const s=i.transform,o=t.data.field(i.field);n.set(i.field,EF(s,o,e))}return n}class NF extends I5{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&TF(s,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Zf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Zf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ik();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=t.has(i.key)?null:l;const c=jk(o,l);c!==null&&n.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(rn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jn())}isEqual(e){return this.batchId===e.batchId&&Th(this.mutations,e.mutations,(t,n)=>A_(t,n))&&Th(this.baseMutations,e.baseMutations,(t,n)=>A_(t,n))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wi,In;function Pk(r){if(r===void 0)return ll("GRPC error has no .code"),ar.UNKNOWN;switch(r){case Wi.OK:return ar.OK;case Wi.CANCELLED:return ar.CANCELLED;case Wi.UNKNOWN:return ar.UNKNOWN;case Wi.DEADLINE_EXCEEDED:return ar.DEADLINE_EXCEEDED;case Wi.RESOURCE_EXHAUSTED:return ar.RESOURCE_EXHAUSTED;case Wi.INTERNAL:return ar.INTERNAL;case Wi.UNAVAILABLE:return ar.UNAVAILABLE;case Wi.UNAUTHENTICATED:return ar.UNAUTHENTICATED;case Wi.INVALID_ARGUMENT:return ar.INVALID_ARGUMENT;case Wi.NOT_FOUND:return ar.NOT_FOUND;case Wi.ALREADY_EXISTS:return ar.ALREADY_EXISTS;case Wi.PERMISSION_DENIED:return ar.PERMISSION_DENIED;case Wi.FAILED_PRECONDITION:return ar.FAILED_PRECONDITION;case Wi.ABORTED:return ar.ABORTED;case Wi.OUT_OF_RANGE:return ar.OUT_OF_RANGE;case Wi.UNIMPLEMENTED:return ar.UNIMPLEMENTED;case Wi.DATA_LOSS:return ar.DATA_LOSS;default:return sn(39323,{code:r})}}(In=Wi||(Wi={}))[In.OK=0]="OK",In[In.CANCELLED=1]="CANCELLED",In[In.UNKNOWN=2]="UNKNOWN",In[In.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",In[In.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",In[In.NOT_FOUND=5]="NOT_FOUND",In[In.ALREADY_EXISTS=6]="ALREADY_EXISTS",In[In.PERMISSION_DENIED=7]="PERMISSION_DENIED",In[In.UNAUTHENTICATED=16]="UNAUTHENTICATED",In[In.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",In[In.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",In[In.ABORTED=10]="ABORTED",In[In.OUT_OF_RANGE=11]="OUT_OF_RANGE",In[In.UNIMPLEMENTED=12]="UNIMPLEMENTED",In[In.INTERNAL=13]="INTERNAL",In[In.UNAVAILABLE=14]="UNAVAILABLE",In[In.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF=new ec([4294967295,4294967295],0);function j_(r){const e=MF().encode(r),t=new rk;return t.update(e),new Uint8Array(t.digest())}function R_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ec([t,n],0),new ec([i,s],0)]}class T5{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Mf(`Invalid padding: ${t}`);if(n<0)throw new Mf(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Mf(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Mf(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ec.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(ec.fromNumber(n)));return i.compare(OF)===1&&(i=new ec([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=j_(e),[n,i]=R_(t);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,i,s);if(!this.we(o))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new T5(s,i,t);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const t=j_(e),[n,i]=R_(t);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,i,s);this.Se(o)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Mf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,op.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new zg(rn.min(),i,new Vi(En),fc(),jn())}}class op{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new op(n,t,jn(),jn(),jn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,t,n,i){this.be=e,this.removedTargetIds=t,this.key=n,this.De=i}}class Mk{constructor(e,t){this.targetId=e,this.Ce=t}}class Ok{constructor(e,t,n=xs.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class P_{constructor(){this.ve=0,this.Fe=M_(),this.Me=xs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=jn(),t=jn(),n=jn();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:sn(38017,{changeType:s})}}),new op(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=M_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,xi(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LF{constructor(e){this.Ge=e,this.ze=new Map,this.je=fc(),this.Je=Zp(),this.He=Zp(),this.Ye=new Vi(En)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:sn(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((n,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,n=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(nb(s))if(n===0){const o=new Kr(s.path);this.et(t,o,Ls.newNoDocument(o,rn.min()))}else xi(n===1,20013,{expectedCount:n});else{const o=this._t(t);if(o!==n){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(t);const a=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,a)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=t;let o,l;try{o=uc(n).toUint8Array()}catch(c){if(c instanceof fk)return Ah("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new T5(o,i,s)}catch(c){return Ah(c instanceof Mf?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let i=0;return n.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(t,s,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&nb(l.target)){const c=new Kr(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ls.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let n=jn();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const a=this.ot(c);return!a||a.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new zg(e,t,this.Ye,this.je,n);return this.je=fc(),this.Je=Zp(),this.He=Zp(),this.Ye=new Vi(En),i}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new P_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new is(En),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new is(En),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||yr("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new P_),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Zp(){return new Vi(Kr.comparator)}function M_(){return new Vi(Kr.comparator)}const DF={asc:"ASCENDING",desc:"DESCENDING"},FF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BF={and:"AND",or:"OR"};class zF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ab(r,e){return r.useProto3Json||Pg(e)?e:{value:e}}function UF(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VF(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function th(r){return xi(!!r,49232),rn.fromTimestamp(function(t){const n=cc(t);return new qi(n.seconds,n.nanos)}(r))}function $F(r,e){return lb(r,e).canonicalString()}function lb(r,e){const t=function(i){return new wi(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function Lk(r){const e=wi.fromString(r);return xi(Uk(e),10190,{key:e.toString()}),e}function J1(r,e){const t=Lk(e);if(t.get(1)!==r.databaseId.projectId)throw new Fr(ar.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Fr(ar.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Kr(Fk(t))}function Dk(r,e){return $F(r.databaseId,e)}function WF(r){const e=Lk(r);return e.length===4?wi.emptyPath():Fk(e)}function O_(r){return new wi(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Fk(r){return xi(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function qF(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(a){return a==="NO_CHANGE"?0:a==="ADD"?1:a==="REMOVE"?2:a==="CURRENT"?3:a==="RESET"?4:sn(39313,{state:a})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(a,u){return a.useProto3Json?(xi(u===void 0||typeof u=="string",58123),xs.fromBase64String(u||"")):(xi(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),xs.fromUint8Array(u||new Uint8Array))}(r,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(a){const u=a.code===void 0?ar.UNKNOWN:Pk(a.code);return new Fr(u,a.message||"")}(o);t=new Ok(n,i,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=J1(r,n.document.name),s=th(n.document.updateTime),o=n.document.createTime?th(n.document.createTime):rn.min(),l=new wa({mapValue:{fields:n.document.fields}}),c=Ls.newFoundDocument(i,s,o,l),a=n.targetIds||[],u=n.removedTargetIds||[];t=new Rm(a,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=J1(r,n.document),s=n.readTime?th(n.readTime):rn.min(),o=Ls.newNoDocument(i,s),l=n.removedTargetIds||[];t=new Rm([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=J1(r,n.document),s=n.removedTargetIds||[];t=new Rm([],s,i,null)}else{if(!("filter"in e))return sn(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,o=new PF(i,s),l=n.targetId;t=new Mk(l,o)}}return t}function HF(r,e){return{documents:[Dk(r,e.path)]}}function GF(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=Dk(r,i);const s=function(a){if(a.length!==0)return zk(Na.create(a,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(a){if(a.length!==0)return a.map(u=>function(f){return{field:Au(f.field),direction:XF(f.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=ab(r,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(a){return{before:a.inclusive,values:a.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(a){return{before:!a.inclusive,values:a.position}}(e.endAt)),{ft:t,parent:i}}function KF(r){let e=WF(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){xi(n===1,65062);const u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(d){const f=Bk(d);return f instanceof Na&&vk(f)?f.getFilters():[f]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(f=>function(m){return new P0(Tu(m.field),function(p){switch(p){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(t.orderBy));let l=null;t.limit&&(l=function(d){let f;return f=typeof d=="object"?d.value:d,Pg(f)?null:f}(t.limit));let c=null;t.startAt&&(c=function(d){const f=!!d.before,h=d.values||[];return new R0(h,f)}(t.startAt));let a=null;return t.endAt&&(a=function(d){const f=!d.before,h=d.values||[];return new R0(h,f)}(t.endAt)),dF(e,i,o,s,l,"F",c,a)}function YF(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return sn(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Bk(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Tu(t.unaryFilter.field);return rs.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Tu(t.unaryFilter.field);return rs.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Tu(t.unaryFilter.field);return rs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Tu(t.unaryFilter.field);return rs.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return sn(61313);default:return sn(60726)}}(r):r.fieldFilter!==void 0?function(t){return rs.create(Tu(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return sn(58110);default:return sn(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Na.create(t.compositeFilter.filters.map(n=>Bk(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return sn(1026)}}(t.compositeFilter.op))}(r):sn(30097,{filter:r})}function XF(r){return DF[r]}function QF(r){return FF[r]}function JF(r){return BF[r]}function Au(r){return{fieldPath:r.canonicalString()}}function Tu(r){return qs.fromServerFormat(r.fieldPath)}function zk(r){return r instanceof rs?function(t){if(t.op==="=="){if(x_(t.value))return{unaryFilter:{field:Au(t.field),op:"IS_NAN"}};if(__(t.value))return{unaryFilter:{field:Au(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(x_(t.value))return{unaryFilter:{field:Au(t.field),op:"IS_NOT_NAN"}};if(__(t.value))return{unaryFilter:{field:Au(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Au(t.field),op:QF(t.op),value:t.value}}}(r):r instanceof Na?function(t){const n=t.getFilters().map(i=>zk(i));return n.length===1?n[0]:{compositeFilter:{op:JF(t.op),filters:n}}}(r):sn(54877,{filter:r})}function Uk(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,t,n,i,s=rn.min(),o=rn.min(),l=xs.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Bl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e){this.yt=e}}function eB(r){const e=KF({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ib(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(){this.Cn=new rB}addToCollectionParentIndex(e,t){return this.Cn.add(t),Bt.resolve()}getCollectionParents(e,t){return Bt.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Bt.resolve()}deleteFieldIndex(e,t){return Bt.resolve()}deleteAllFieldIndexes(e){return Bt.resolve()}createTargetIndexes(e,t){return Bt.resolve()}getDocumentsMatchingTarget(e,t){return Bt.resolve(null)}getIndexType(e,t){return Bt.resolve(0)}getFieldIndexes(e,t){return Bt.resolve([])}getNextCollectionGroupToUpdate(e){return Bt.resolve(null)}getMinOffset(e,t){return Bt.resolve(lc.min())}getMinOffsetFromCollectionGroup(e,t){return Bt.resolve(lc.min())}updateCollectionGroup(e,t,n){return Bt.resolve()}updateIndexEntries(e,t){return Bt.resolve()}}class rB{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new is(wi.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new is(wi.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vk=41943040;class eo{static withCacheSize(e){return new eo(e,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */eo.DEFAULT_COLLECTION_PERCENTILE=10,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,eo.DEFAULT=new eo(Vk,eo.DEFAULT_COLLECTION_PERCENTILE,eo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),eo.DISABLED=new eo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Rh(0)}static cr(){return new Rh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="LruGarbageCollector",nB=1048576;function F_([r,e],[t,n]){const i=En(r,t);return i===0?En(e,n):i}class iB{constructor(e){this.Ir=e,this.buffer=new is(F_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();F_(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sB{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){yr(D_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Gh(t)?yr(D_,"Ignoring IndexedDB error during garbage collection: ",t):await jg(t)}await this.Vr(3e5)})}}class oB{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return Bt.resolve(Rg.ce);const n=new iB(t);return this.mr.forEachTarget(e,i=>n.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>n.Ar(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(yr("LruGarbageCollector","Garbage collection skipped; disabled"),Bt.resolve(L_)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(yr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),L_):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,i,s,o,l,c,a;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(yr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(n=d,l=Date.now(),this.removeTargets(e,n,t))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(d=>(a=Date.now(),Cu()<=kn.DEBUG&&yr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${d} documents in `+(a-c)+`ms
Total Duration: ${a-u}ms`),Bt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function aB(r,e){return new oB(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(){this.changes=new pu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ls.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Bt.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(n!==null&&Zf(n.mutation,i,Fl.empty(),qi.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,jn()).next(()=>n))}getLocalViewOfDocuments(e,t,n=jn()){const i=Uc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(s=>{let o=Pf();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const n=Uc();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,jn()))}populateOverlays(e,t,n){const i=[];return n.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{t.set(o,l)})})}computeViews(e,t,n,i){let s=fc();const o=Jf(),l=function(){return Jf()}();return t.forEach((c,a)=>{const u=n.get(a.key);i.has(a.key)&&(u===void 0||u.mutation instanceof Bg)?s=s.insert(a.key,a):u!==void 0?(o.set(a.key,u.mutation.getFieldMask()),Zf(u.mutation,a,u.mutation.getFieldMask(),qi.now())):o.set(a.key,Fl.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((a,u)=>o.set(a,u)),t.forEach((a,u)=>l.set(a,new cB(u,o.get(a)??null))),l))}recalculateAndSaveOverlays(e,t){const n=Jf();let i=new Vi((o,l)=>o-l),s=jn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const l of o)l.keys().forEach(c=>{const a=t.get(c);if(a===null)return;let u=n.get(c)||Fl.empty();u=l.applyToLocalView(a,u),n.set(c,u);const d=(i.get(l.batchId)||jn()).add(c);i=i.insert(l.batchId,d)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),a=c.key,u=c.value,d=Ik();u.forEach(f=>{if(!s.has(f)){const h=jk(t.get(f),n.get(f));h!==null&&d.set(f,h),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,a,d))}return Bt.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,i){return function(o){return Kr.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-s.size):Bt.resolve(Uc());let l=Od,c=s;return o.next(a=>Bt.forEach(a,(u,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),s.get(u)?Bt.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{c=c.insert(u,f)}))).next(()=>this.populateOverlays(e,a,s)).next(()=>this.computeViews(e,c,a,jn())).next(u=>({batchId:l,changes:vF(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Kr(t)).next(n=>{let i=Pf();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const s=t.collectionGroup;let o=Pf();return this.indexManager.getCollectionParents(e,s).next(l=>Bt.forEach(l,c=>{const a=function(d,f){return new Og(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,a,n,i).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,i))).next(o=>{s.forEach((c,a)=>{const u=a.getKey();o.get(u)===null&&(o=o.insert(u,Ls.newInvalidDocument(u)))});let l=Pf();return o.forEach((c,a)=>{const u=s.get(c);u!==void 0&&Zf(u.mutation,a,Fl.empty(),qi.now()),Dg(t,a)&&(l=l.insert(c,a))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Bt.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:th(i.createTime)}}(t)),Bt.resolve()}getNamedQuery(e,t){return Bt.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:eB(i.bundledQuery),readTime:th(i.readTime)}}(t)),Bt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(){this.overlays=new Vi(Kr.comparator),this.qr=new Map}getOverlay(e,t){return Bt.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Uc();return Bt.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((i,s)=>{this.St(e,t,s)}),Bt.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Bt.resolve()}getOverlaysForCollection(e,t,n){const i=Uc(),s=t.length+1,o=new Kr(t.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,a=c.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===s&&c.largestBatchId>n&&i.set(c.getKey(),c)}return Bt.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new Vi((a,u)=>a-u);const o=this.overlays.getIterator();for(;o.hasNext();){const a=o.getNext().value;if(a.getKey().getCollectionGroup()===t&&a.largestBatchId>n){let u=s.get(a.largestBatchId);u===null&&(u=Uc(),s=s.insert(a.largestBatchId,u)),u.set(a.getKey(),a)}}const l=Uc(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((a,u)=>l.set(a,u)),!(l.size()>=i)););return Bt.resolve(l)}St(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new RF(t,n));let s=this.qr.get(t);s===void 0&&(s=jn(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(){this.sessionToken=xs.EMPTY_BYTE_STRING}getSessionToken(e){return Bt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Bt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(){this.Qr=new is(ls.$r),this.Ur=new is(ls.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new ls(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Gr(new ls(e,t))}zr(e,t){e.forEach(n=>this.removeReference(n,t))}jr(e){const t=new Kr(new wi([])),n=new ls(t,e),i=new ls(t,e+1),s=[];return this.Ur.forEachInRange([n,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Kr(new wi([])),n=new ls(t,e),i=new ls(t,e+1);let s=jn();return this.Ur.forEachInRange([n,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new ls(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class ls{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Kr.comparator(e.key,t.key)||En(e.Yr,t.Yr)}static Kr(e,t){return En(e.Yr,t.Yr)||Kr.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new is(ls.$r)}checkEmpty(e){return Bt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new jF(s,t,n,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new ls(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Bt.resolve(o)}lookupMutationBatch(e,t){return Bt.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.ei(n),s=i<0?0:i;return Bt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Bt.resolve(this.mutationQueue.length===0?HD:this.tr-1)}getAllMutationBatches(e){return Bt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ls(t,0),i=new ls(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),Bt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new is(En);return t.forEach(i=>{const s=new ls(i,0),o=new ls(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{n=n.add(l.Yr)})}),Bt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;Kr.isDocumentKey(s)||(s=s.child(""));const o=new ls(new Kr(s),0);let l=new is(En);return this.Zr.forEachWhile(c=>{const a=c.key.path;return!!n.isPrefixOf(a)&&(a.length===i&&(l=l.add(c.Yr)),!0)},o),Bt.resolve(this.ti(l))}ti(e){const t=[];return e.forEach(n=>{const i=this.Xr(n);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){xi(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Bt.forEach(t.mutations,i=>{const s=new ls(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new ls(t,0),i=this.Zr.firstAfterOrEqual(n);return Bt.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Bt.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e){this.ri=e,this.docs=function(){return new Vi(Kr.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Bt.resolve(n?n.document.mutableCopy():Ls.newInvalidDocument(t))}getEntries(e,t){let n=fc();return t.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():Ls.newInvalidDocument(i))}),Bt.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let s=fc();const o=t.path,l=new Kr(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:a,value:{document:u}}=c.getNext();if(!o.isPrefixOf(a.path))break;a.path.length>o.length+1||VD(UD(u),n)<=0||(i.has(u.key)||Dg(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return Bt.resolve(s)}getAllFromCollectionGroup(e,t,n,i){sn(9500)}ii(e,t){return Bt.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new gB(this)}getSize(e){return Bt.resolve(this.size)}}class gB extends lB{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)}),Bt.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e){this.persistence=e,this.si=new pu(t=>E5(t),C5),this.lastRemoteSnapshotVersion=rn.min(),this.highestTargetId=0,this.oi=0,this._i=new N5,this.targetCount=0,this.ai=Rh.ur()}forEachTarget(e,t){return this.si.forEach((n,i)=>t(i)),Bt.resolve()}getLastRemoteSnapshotVersion(e){return Bt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Bt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Bt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Bt.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Rh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Bt.resolve()}updateTargetData(e,t){return this.Pr(t),Bt.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Bt.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=t&&n.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),Bt.waitFor(s).next(()=>i)}getTargetCount(e){return Bt.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Bt.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Bt.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Bt.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Bt.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Bt.resolve(n)}containsKey(e,t){return Bt.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,t){this.ui={},this.overlays={},this.ci=new Rg(0),this.li=!1,this.li=!0,this.hi=new dB,this.referenceDelegate=e(this),this.Pi=new yB(this),this.indexManager=new tB,this.remoteDocumentCache=function(i){return new mB(i)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new ZF(t),this.Ii=new hB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new pB(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){yr("MemoryPersistence","Starting transaction:",e);const i=new bB(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return Bt.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class bB extends WD{constructor(e){super(),this.currentSequenceNumber=e}}class j5{constructor(e){this.persistence=e,this.Ri=new N5,this.Vi=null}static mi(e){return new j5(e)}get fi(){if(this.Vi)return this.Vi;throw sn(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Bt.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Bt.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Bt.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Bt.forEach(this.fi,n=>{const i=Kr.fromPath(n);return this.gi(e,i).next(s=>{s||t.removeEntry(i,rn.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Bt.or([()=>Bt.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class L0{constructor(e,t){this.persistence=e,this.pi=new pu(n=>GD(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=aB(this,t)}static mi(e,t){return new L0(e,t)}Ei(){}di(e){return Bt.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}wr(e){let t=0;return this.pr(e,n=>{t++}).next(()=>t)}pr(e,t){return Bt.forEach(this.pi,(n,i)=>this.br(e,n,i).next(s=>s?Bt.resolve():t(i)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(l=>{l||(n++,s.removeEntry(o,rn.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Bt.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Bt.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Bt.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Bt.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nm(e.data.value)),t}br(e,t,n){return Bt.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return Bt.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=i}static As(e,t){let n=jn(),i=jn();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new R5(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return KR()?8:qD(P7())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,i){const s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new vB;return this.Ss(e,t,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,t,o,l.size)})}).next(()=>s.result)}bs(e,t,n,i){return n.documentReadCount<this.fs?(Cu()<=kn.DEBUG&&yr("QueryEngine","SDK will not create cache indexes for query:",Iu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Bt.resolve()):(Cu()<=kn.DEBUG&&yr("QueryEngine","Query:",Iu(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(Cu()<=kn.DEBUG&&yr("QueryEngine","The SDK decides to create cache indexes for query:",Iu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Aa(t))):Bt.resolve())}ys(e,t){if(C_(t))return Bt.resolve(null);let n=Aa(t);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ib(t,null,"F"),n=Aa(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const o=jn(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const a=this.Ds(t,l);return this.Cs(t,a,o,c.readTime)?this.ys(e,ib(t,null,"F")):this.vs(e,a,t,c)}))})))}ws(e,t,n,i){return C_(t)||i.isEqual(rn.min())?Bt.resolve(null):this.ps.getDocuments(e,n).next(s=>{const o=this.Ds(t,s);return this.Cs(t,o,n,i)?Bt.resolve(null):(Cu()<=kn.DEBUG&&yr("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Iu(t)),this.vs(e,o,t,zD(i,Od)).next(l=>l))})}Ds(e,t){let n=new is(Ek(e));return t.forEach((i,s)=>{Dg(e,s)&&(n=n.add(s))}),n}Cs(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,n){return Cu()<=kn.DEBUG&&yr("QueryEngine","Using full collection scan to execute query:",Iu(t)),this.ps.getDocumentsMatchingQuery(e,t,lc.min(),n)}vs(e,t,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5="LocalStore",_B=3e8;class xB{constructor(e,t,n,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Vi(En),this.xs=new pu(s=>E5(s),C5),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uB(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function SB(r,e,t,n){return new xB(r,e,t,n)}async function Wk(r,e){const t=An(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let c=jn();for(const a of i){o.push(a.batchId);for(const u of a.mutations)c=c.add(u.key)}for(const a of s){l.push(a.batchId);for(const u of a.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(n,c).next(a=>({Ls:a,removedBatchIds:o,addedBatchIds:l}))})})}function qk(r){const e=An(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function kB(r,e){const t=An(r),n=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const l=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;l.push(t.Pi.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Pi.addMatchingKeys(s,u.addedDocuments,d)));let h=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?h=h.withResumeToken(xs.EMPTY_BYTE_STRING,rn.min()).withLastLimboFreeSnapshotVersion(rn.min()):u.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(u.resumeToken,n)),i=i.insert(d,h),function(g,p,y){return g.resumeToken.approximateByteSize()===0||p.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=_B?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,h,u)&&l.push(t.Pi.updateTargetData(s,h))});let c=fc(),a=jn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),l.push(EB(s,o,e.documentUpdates).next(u=>{c=u.ks,a=u.qs})),!n.isEqual(rn.min())){const u=t.Pi.getLastRemoteSnapshotVersion(s).next(d=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(u)}return Bt.waitFor(l).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,a)).next(()=>c)}).then(s=>(t.Ms=i,s))}function EB(r,e,t){let n=jn(),i=jn();return t.forEach(s=>n=n.add(s)),e.getEntries(r,n).next(s=>{let o=fc();return t.forEach((l,c)=>{const a=s.get(l);c.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(rn.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!a.isValidDocument()||c.version.compareTo(a.version)>0||c.version.compareTo(a.version)===0&&a.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):yr(P5,"Ignoring outdated watch update for ",l,". Current version:",a.version," Watch version:",c.version)}),{ks:o,qs:i}})}function CB(r,e){const t=An(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.Pi.getTargetData(n,e).next(s=>s?(i=s,Bt.resolve(i)):t.Pi.allocateTargetId(n).next(o=>(i=new Bl(e,o,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n})}async function cb(r,e,t){const n=An(r),i=n.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Gh(o))throw o;yr(P5,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function B_(r,e,t){const n=An(r);let i=rn.min(),s=jn();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,a,u){const d=An(c),f=d.xs.get(u);return f!==void 0?Bt.resolve(d.Ms.get(f)):d.Pi.getTargetData(a,u)}(n,o,Aa(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(o,e,t?i:rn.min(),t?s:jn())).next(l=>(IB(n,gF(e),l),{documents:l,Qs:s})))}function IB(r,e,t){let n=r.Os.get(e)||rn.min();t.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),r.Os.set(e,n)}class z_{constructor(){this.activeTargetIds=xF()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AB{constructor(){this.Mo=new z_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new z_,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="ConnectivityMonitor";class V_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){yr(U_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){yr(U_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let em=null;function ub(){return em===null?em=function(){return 268435456+Math.round(2147483648*Math.random())}():em++,"0x"+em.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="RestConnection",NB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jB{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===j0?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,t,n,i,s){const o=ub(),l=this.zo(e,t.toUriEncodedString());yr(Z1,`Sending RPC '${e}' ${o}:`,l,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:a}=new URL(l),u=Vh(a);return this.Jo(e,l,c,n,u).then(d=>(yr(Z1,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Ah(Z1,`RPC '${e}' ${o} failed with error: `,d,"url: ",l,"request:",n),d})}Ho(e,t,n,i,s,o){return this.Go(e,t,n,i,s)}jo(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hh}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),n&&n.headers.forEach((i,s)=>e[s]=i)}zo(e,t){const n=NB[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="WebChannelConnection";class PB extends jB{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,i,s){const o=ub();return new Promise((l,c)=>{const a=new nk;a.setWithCredentials(!0),a.listenOnce(ik.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Tm.NO_ERROR:const d=a.getResponseJson();yr(As,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),l(d);break;case Tm.TIMEOUT:yr(As,`RPC '${e}' ${o} timed out`),c(new Fr(ar.DEADLINE_EXCEEDED,"Request time out"));break;case Tm.HTTP_ERROR:const f=a.getStatus();if(yr(As,`RPC '${e}' ${o} failed with status:`,f,"response text:",a.getResponseText()),f>0){let h=a.getResponseJson();Array.isArray(h)&&(h=h[0]);const m=h==null?void 0:h.error;if(m&&m.status&&m.message){const g=function(y){const b=y.toLowerCase().replace(/_/g,"-");return Object.values(ar).indexOf(b)>=0?b:ar.UNKNOWN}(m.status);c(new Fr(g,m.message))}else c(new Fr(ar.UNKNOWN,"Server responded with status "+a.getStatus()))}else c(new Fr(ar.UNAVAILABLE,"Connection failed."));break;default:sn(9055,{l_:e,streamId:o,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{yr(As,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);yr(As,`RPC '${e}' ${o} sending request:`,i),a.send(t,"POST",u,n,15)})}T_(e,t,n){const i=ub(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ak(),l=ok(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},a=this.longPollingOptions.timeoutSeconds;a!==void 0&&(c.longPollingTimeout=Math.round(1e3*a)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,n),c.encodeInitMessageHeaders=!0;const u=s.join("");yr(As,`Creating RPC '${e}' stream ${i}: ${u}`,c);const d=o.createWebChannel(u,c);this.I_(d);let f=!1,h=!1;const m=new RB({Yo:p=>{h?yr(As,`Not sending because RPC '${e}' stream ${i} is closed:`,p):(f||(yr(As,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),yr(As,`RPC '${e}' stream ${i} sending:`,p),d.send(p))},Zo:()=>d.close()}),g=(p,y,b)=>{p.listen(y,v=>{try{b(v)}catch(E){setTimeout(()=>{throw E},0)}})};return g(d,Rf.EventType.OPEN,()=>{h||(yr(As,`RPC '${e}' stream ${i} transport opened.`),m.o_())}),g(d,Rf.EventType.CLOSE,()=>{h||(h=!0,yr(As,`RPC '${e}' stream ${i} transport closed`),m.a_(),this.E_(d))}),g(d,Rf.EventType.ERROR,p=>{h||(h=!0,Ah(As,`RPC '${e}' stream ${i} transport errored. Name:`,p.name,"Message:",p.message),m.a_(new Fr(ar.UNAVAILABLE,"The operation could not be completed")))}),g(d,Rf.EventType.MESSAGE,p=>{var y;if(!h){const b=p.data[0];xi(!!b,16349);const v=b,E=(v==null?void 0:v.error)||((y=v[0])==null?void 0:y.error);if(E){yr(As,`RPC '${e}' stream ${i} received error:`,E);const M=E.status;let W=function(j){const F=Wi[j];if(F!==void 0)return Pk(F)}(M),$=E.message;W===void 0&&(W=ar.INTERNAL,$="Unknown error status: "+M+" with message "+E.message),h=!0,m.a_(new Fr(W,$)),d.close()}else yr(As,`RPC '${e}' stream ${i} received:`,b),m.u_(b)}}),g(l,sk.STAT_EVENT,p=>{p.stat===Yy.PROXY?yr(As,`RPC '${e}' stream ${i} detected buffering proxy`):p.stat===Yy.NOPROXY&&yr(As,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.__()},0),m}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function e2(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(r){return new zF(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,t,n=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-n);i>0&&yr("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="PersistentStream";class MB{constructor(e,t,n,i,s,o,l,c){this.Mi=e,this.S_=n,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Gk(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ar.RESOURCE_EXHAUSTED?(ll(t.toString()),ll("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ar.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.D_===t&&this.G_(n,i)},n=>{e(()=>{const i=new Fr(ar.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{n(()=>this.z_(i))}),this.stream.onMessage(i=>{n(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return yr($_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(yr($_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OB extends MB{constructor(e,t,n,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=qF(this.serializer,e),n=function(s){if(!("targetChange"in s))return rn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?rn.min():o.readTime?th(o.readTime):rn.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=O_(this.serializer),t.addTarget=function(s,o){let l;const c=o.target;if(l=nb(c)?{documents:HF(s,c)}:{query:GF(s,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=VF(s,o.resumeToken);const a=ab(s,o.expectedCount);a!==null&&(l.expectedCount=a)}else if(o.snapshotVersion.compareTo(rn.min())>0){l.readTime=UF(s,o.snapshotVersion.toTimestamp());const a=ab(s,o.expectedCount);a!==null&&(l.expectedCount=a)}return l}(this.serializer,e);const n=YF(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=O_(this.serializer),t.removeTarget=e,this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{}class DB extends LB{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Fr(ar.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,lb(t,n),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ar.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Fr(ar.UNKNOWN,s.toString())})}Ho(e,t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,lb(t,n),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ar.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Fr(ar.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class FB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ll(t),this.aa=!1):yr("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="RemoteStore";class BB{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{n.enqueueAndForget(async()=>{lp(this)&&(yr(Ph,"Restarting streams for network reachability change."),await async function(c){const a=An(c);a.Ea.add(4),await ap(a),a.Ra.set("Unknown"),a.Ea.delete(4),await Ug(a)}(this))})}),this.Ra=new FB(n,i)}}async function Ug(r){if(lp(r))for(const e of r.da)await e(!0)}async function ap(r){for(const e of r.da)await e(!1)}function Kk(r,e){const t=An(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),D5(t)?L5(t):Kh(t).O_()&&O5(t,e))}function M5(r,e){const t=An(r),n=Kh(t);t.Ia.delete(e),n.O_()&&Yk(t,e),t.Ia.size===0&&(n.O_()?n.L_():lp(t)&&t.Ra.set("Unknown"))}function O5(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rn.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Kh(r).Y_(e)}function Yk(r,e){r.Va.Ue(e),Kh(r).Z_(e)}function L5(r){r.Va=new LF({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Kh(r).start(),r.Ra.ua()}function D5(r){return lp(r)&&!Kh(r).x_()&&r.Ia.size>0}function lp(r){return An(r).Ea.size===0}function Xk(r){r.Va=void 0}async function zB(r){r.Ra.set("Online")}async function UB(r){r.Ia.forEach((e,t)=>{O5(r,e)})}async function VB(r,e){Xk(r),D5(r)?(r.Ra.ha(e),L5(r)):r.Ra.set("Unknown")}async function $B(r,e,t){if(r.Ra.set("Online"),e instanceof Ok&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(r,e)}catch(n){yr(Ph,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await W_(r,n)}else if(e instanceof Rm?r.Va.Ze(e):e instanceof Mk?r.Va.st(e):r.Va.tt(e),!t.isEqual(rn.min()))try{const n=await qk(r.localStore);t.compareTo(n)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((c,a)=>{if(c.resumeToken.approximateByteSize()>0){const u=s.Ia.get(a);u&&s.Ia.set(a,u.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,a)=>{const u=s.Ia.get(c);if(!u)return;s.Ia.set(c,u.withResumeToken(xs.EMPTY_BYTE_STRING,u.snapshotVersion)),Yk(s,c);const d=new Bl(u.target,c,a,u.sequenceNumber);O5(s,d)}),s.remoteSyncer.applyRemoteEvent(l)}(r,t)}catch(n){yr(Ph,"Failed to raise snapshot:",n),await W_(r,n)}}async function W_(r,e,t){if(!Gh(e))throw e;r.Ea.add(1),await ap(r),r.Ra.set("Offline"),t||(t=()=>qk(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{yr(Ph,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Ug(r)})}async function q_(r,e){const t=An(r);t.asyncQueue.verifyOperationInProgress(),yr(Ph,"RemoteStore received new credentials");const n=lp(t);t.Ea.add(3),await ap(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ug(t)}async function WB(r,e){const t=An(r);e?(t.Ea.delete(2),await Ug(t)):e||(t.Ea.add(2),await ap(t),t.Ra.set("Unknown"))}function Kh(r){return r.ma||(r.ma=function(t,n,i){const s=An(t);return s.sa(),new OB(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(r.datastore,r.asyncQueue,{Xo:zB.bind(null,r),t_:UB.bind(null,r),r_:VB.bind(null,r),H_:$B.bind(null,r)}),r.da.push(async e=>{e?(r.ma.B_(),D5(r)?L5(r):r.Ra.set("Unknown")):(await r.ma.stop(),Xk(r))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new qc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,s){const o=Date.now()+n,l=new F5(e,t,o,i,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Fr(ar.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qk(r,e){if(ll("AsyncQueue",`${e}: ${r}`),Gh(r))return new Fr(ar.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{static emptySet(e){return new rh(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Kr.comparator(t.key,n.key):(t,n)=>Kr.comparator(t.key,n.key),this.keyedMap=Pf(),this.sortedSet=new Vi(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new rh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(){this.ga=new Vi(Kr.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):sn(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Mh{constructor(e,t,n,i,s,o,l,c,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=a}static fromInitialDocuments(e,t,n,i,s){const o=[];return t.forEach(l=>{o.push({type:0,doc:l})}),new Mh(e,t,rh.emptySet(t),o,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class HB{constructor(){this.queries=G_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const i=An(t),s=i.queries;i.queries=G_(),s.forEach((o,l)=>{for(const c of l.Sa)c.onError(n)})})(this,new Fr(ar.ABORTED,"Firestore shutting down"))}}function G_(){return new pu(r=>kk(r),Lg)}async function GB(r,e){const t=An(r);let n=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(n=2):(s=new qB,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const l=Qk(o,`Initialization of query '${Iu(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&B5(t)}async function KB(r,e){const t=An(r),n=e.query;let i=3;const s=t.queries.get(n);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function YB(r,e){const t=An(r);let n=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(n=!0);o.wa=i}}n&&B5(t)}function XB(r,e,t){const n=An(r),i=n.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);n.queries.delete(e)}function B5(r){r.Ca.forEach(e=>{e.next()})}var hb,K_;(K_=hb||(hb={})).Ma="default",K_.Cache="cache";class QB{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Mh(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Mh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==hb.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e){this.key=e}}class Zk{constructor(e){this.key=e}}class JB{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=jn(),this.mutatedKeys=jn(),this.eu=Ek(e),this.tu=new rh(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new H_,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,a=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),h=Dg(this.query,d)?d:null,m=!!f&&this.mutatedKeys.has(f.key),g=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let p=!1;f&&h?f.data.isEqual(h.data)?m!==g&&(n.track({type:3,doc:h}),p=!0):this.su(f,h)||(n.track({type:2,doc:h}),p=!0,(c&&this.eu(h,c)>0||a&&this.eu(h,a)<0)&&(l=!0)):!f&&h?(n.track({type:0,doc:h}),p=!0):f&&!h&&(n.track({type:1,doc:f}),p=!0,(c||a)&&(l=!0)),p&&(h?(o=o.add(h),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),n.track({type:1,doc:u})}return{tu:o,iu:n,Cs:l,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((u,d)=>function(h,m){const g=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sn(20277,{Rt:p})}};return g(h)-g(m)}(u.type,d.type)||this.eu(u.doc,d.doc)),this.ou(n),i=i??!1;const l=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,a=c!==this.Za;return this.Za=c,o.length!==0||a?{snapshot:new Mh(this.query,e.tu,s,o,e.mutatedKeys,c===0,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new H_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=jn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const t=[];return e.forEach(n=>{this.Xa.has(n)||t.push(new Zk(n))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Jk(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=jn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Mh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const z5="SyncEngine";class ZB{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ez{constructor(e){this.key=e,this.hu=!1}}class tz{constructor(e,t,n,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new pu(l=>kk(l),Lg),this.Iu=new Map,this.Eu=new Set,this.du=new Vi(Kr.comparator),this.Au=new Map,this.Ru=new N5,this.Vu={},this.mu=new Map,this.fu=Rh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rz(r,e,t=!0){const n=iE(r);let i;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await eE(n,e,t,!0),i}async function nz(r,e){const t=iE(r);await eE(t,e,!0,!1)}async function eE(r,e,t,n){const i=await CB(r.localStore,Aa(e)),s=i.targetId,o=r.sharedClientState.addLocalQueryTarget(s,t);let l;return n&&(l=await iz(r,e,s,o==="current",i.resumeToken)),r.isPrimaryClient&&t&&Kk(r.remoteStore,i),l}async function iz(r,e,t,n,i){r.pu=(d,f,h)=>async function(g,p,y,b){let v=p.view.ru(y);v.Cs&&(v=await B_(g.localStore,p.query,!1).then(({documents:$})=>p.view.ru($,v)));const E=b&&b.targetChanges.get(p.targetId),M=b&&b.targetMismatches.get(p.targetId)!=null,W=p.view.applyChanges(v,g.isPrimaryClient,E,M);return X_(g,p.targetId,W.au),W.snapshot}(r,d,f,h);const s=await B_(r.localStore,e,!0),o=new JB(e,s.Qs),l=o.ru(s.documents),c=op.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),a=o.applyChanges(l,r.isPrimaryClient,c);X_(r,t,a.au);const u=new ZB(e,t,o);return r.Tu.set(e,u),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),a.snapshot}async function sz(r,e,t){const n=An(r),i=n.Tu.get(e),s=n.Iu.get(i.targetId);if(s.length>1)return n.Iu.set(i.targetId,s.filter(o=>!Lg(o,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await cb(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),t&&M5(n.remoteStore,i.targetId),fb(n,i.targetId)}).catch(jg)):(fb(n,i.targetId),await cb(n.localStore,i.targetId,!0))}async function oz(r,e){const t=An(r),n=t.Tu.get(e),i=t.Iu.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),M5(t.remoteStore,n.targetId))}async function tE(r,e){const t=An(r);try{const n=await kB(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Au.get(s);o&&(xi(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?xi(o.hu,14607):i.removedDocuments.size>0&&(xi(o.hu,42227),o.hu=!1))}),await nE(t,n,e)}catch(n){await jg(n)}}function Y_(r,e,t){const n=An(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=An(o);c.onlineState=l;let a=!1;c.queries.forEach((u,d)=>{for(const f of d.Sa)f.va(l)&&(a=!0)}),a&&B5(c)}(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function az(r,e,t){const n=An(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Au.get(e),s=i&&i.key;if(s){let o=new Vi(Kr.comparator);o=o.insert(s,Ls.newNoDocument(s,rn.min()));const l=jn().add(s),c=new zg(rn.min(),new Map,new Vi(En),o,l);await tE(n,c),n.du=n.du.remove(s),n.Au.delete(e),U5(n)}else await cb(n.localStore,e,!1).then(()=>fb(n,e,t)).catch(jg)}function fb(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach(n=>{r.Ru.containsKey(n)||rE(r,n)})}function rE(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(M5(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),U5(r))}function X_(r,e,t){for(const n of t)n instanceof Jk?(r.Ru.addReference(n.key,e),lz(r,n)):n instanceof Zk?(yr(z5,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||rE(r,n.key)):sn(19791,{wu:n})}function lz(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(yr(z5,"New document in limbo: "+t),r.Eu.add(n),U5(r))}function U5(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Kr(wi.fromString(e)),n=r.fu.next();r.Au.set(n,new ez(t)),r.du=r.du.insert(t,n),Kk(r.remoteStore,new Bl(Aa(Sk(t.path)),n,"TargetPurposeLimboResolution",Rg.ce))}}async function nE(r,e,t){const n=An(r),i=[],s=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((l,c)=>{o.push(n.pu(c,e,t).then(a=>{var u;if((a||t)&&n.isPrimaryClient){const d=a?!a.fromCache:(u=t==null?void 0:t.targetChanges.get(c.targetId))==null?void 0:u.current;n.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(a){i.push(a);const d=R5.As(c.targetId,a);s.push(d)}}))}),await Promise.all(o),n.Pu.H_(i),await async function(c,a){const u=An(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Bt.forEach(a,f=>Bt.forEach(f.Es,h=>u.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>Bt.forEach(f.ds,h=>u.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!Gh(d))throw d;yr(P5,"Failed to update sequence numbers: "+d)}for(const d of a){const f=d.targetId;if(!d.fromCache){const h=u.Ms.get(f),m=h.snapshotVersion,g=h.withLastLimboFreeSnapshotVersion(m);u.Ms=u.Ms.insert(f,g)}}}(n.localStore,s))}async function cz(r,e){const t=An(r);if(!t.currentUser.isEqual(e)){yr(z5,"User change. New user:",e.toKey());const n=await Wk(t.localStore,e);t.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new Fr(ar.CANCELLED,o))})}),s.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await nE(t,n.Ls)}}function uz(r,e){const t=An(r),n=t.Au.get(e);if(n&&n.hu)return jn().add(n.key);{let i=jn();const s=t.Iu.get(e);if(!s)return i;for(const o of s){const l=t.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function iE(r){const e=An(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=tE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=az.bind(null,e),e.Pu.H_=YB.bind(null,e.eventManager),e.Pu.yu=XB.bind(null,e.eventManager),e}class D0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hk(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return SB(this.persistence,new wB,e.initialUser,this.serializer)}Cu(e){return new $k(j5.mi,this.serializer)}Du(e){return new AB}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}D0.provider={build:()=>new D0};class hz extends D0{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){xi(this.persistence.referenceDelegate instanceof L0,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new sB(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?eo.withCacheSize(this.cacheSizeBytes):eo.DEFAULT;return new $k(n=>L0.mi(n,t),this.serializer)}}class db{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Y_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=cz.bind(null,this.syncEngine),await WB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HB}()}createDatastore(e){const t=Hk(e.databaseInfo.databaseId),n=function(s){return new PB(s)}(e.databaseInfo);return function(s,o,l,c){return new DB(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,i,s,o,l){return new BB(n,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,t=>Y_(this.syncEngine,t,0),function(){return V_.v()?new V_:new TB}())}createSyncEngine(e,t){return function(i,s,o,l,c,a,u){const d=new tz(i,s,o,l,c,a);return u&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=An(i);yr(Ph,"RemoteStore shutting down."),s.Ea.add(5),await ap(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}db.provider={build:()=>new db};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ll("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc="FirestoreClient";class dz{constructor(e,t,n,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Ms.UNAUTHENTICATED,this.clientId=uk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{yr(dc,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(yr(dc,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Qk(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function t2(r,e){r.asyncQueue.verifyOperationInProgress(),yr(dc,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async i=>{n.isEqual(i)||(await Wk(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Q_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await pz(r);yr(dc,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>q_(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,i)=>q_(e.remoteStore,i)),r._onlineComponents=e}async function pz(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){yr(dc,"Using user provided OfflineComponentProvider");try{await t2(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ar.FAILED_PRECONDITION||i.code===ar.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ah("Error using user provided cache. Falling back to memory cache: "+t),await t2(r,new D0)}}else yr(dc,"Using default OfflineComponentProvider"),await t2(r,new hz(void 0));return r._offlineComponents}async function mz(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(yr(dc,"Using user provided OnlineComponentProvider"),await Q_(r,r._uninitializedComponentsProvider._online)):(yr(dc,"Using default OnlineComponentProvider"),await Q_(r,new db))),r._onlineComponents}async function gz(r){const e=await mz(r),t=e.eventManager;return t.onListen=rz.bind(null,e.syncEngine),t.onUnlisten=sz.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nz.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oz.bind(null,e.syncEngine),t}function yz(r,e,t={}){const n=new qc;return r.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,a){const u=new fz({next:f=>{u.Nu(),o.enqueueAndForget(()=>KB(s,d)),f.fromCache&&c.source==="server"?a.reject(new Fr(ar.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(f)},error:f=>a.reject(f)}),d=new QB(l,u,{includeMetadataChanges:!0,qa:!0});return GB(s,d)}(await gz(r),r.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="firestore.googleapis.com",Z_=!0;class ex{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Fr(ar.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oE,this.ssl=Z_}else this.host=e.host,this.ssl=e.ssl??Z_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Vk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nB)throw new Fr(ar.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sE(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Fr(ar.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Fr(ar.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Fr(ar.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class V5{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ex({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Fr(ar.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Fr(ar.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ex(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new ID;switch(n.type){case"firstParty":return new jD(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Fr(ar.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=J_.get(t);n&&(yr("ComponentProvider","Removing Datastore"),J_.delete(t),n.terminate())}(this),Promise.resolve()}}function bz(r,e,t,n={}){var a;r=Qy(r,V5);const i=Vh(e),s=r._getSettings(),o={...s,emulatorOptions:r._getEmulatorOptions()},l=`${e}:${t}`;i&&(Ov(`https://${l}`),Dv("Firestore",!0)),s.host!==oE&&s.host!==l&&Ah("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:i,emulatorOptions:n};if(!Sd(c,o)&&(r._setSettings(c),n.mockUserToken)){let u,d;if(typeof n.mockUserToken=="string")u=n.mockUserToken,d=Ms.MOCK_USER;else{u=Lv(n.mockUserToken,(a=r._app)==null?void 0:a.options.projectId);const f=n.mockUserToken.sub||n.mockUserToken.user_id;if(!f)throw new Fr(ar.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ms(f)}r._authCredentials=new AD(new ck(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Vg(this.firestore,e,this._query)}}class Do{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Do(this.firestore,e,this._key)}toJSON(){return{type:Do._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(ip(t,Do._jsonSchema))return new Do(e,n||null,new Kr(wi.fromString(t.referencePath)))}}Do._jsonSchemaVersion="firestore/documentReference/1.0",Do._jsonSchema={type:Gi("string",Do._jsonSchemaVersion),referencePath:Gi("string")};class nh extends Vg{constructor(e,t,n){super(e,t,Sk(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Do(this.firestore,null,new Kr(e))}withConverter(e){return new nh(this.firestore,e,this._path)}}function vz(r,e,...t){if(r=hl(r),r instanceof V5){const n=wi.fromString(e,...t);return d_(n),new nh(r,null,n)}{if(!(r instanceof Do||r instanceof nh))throw new Fr(ar.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(wi.fromString(e,...t));return d_(n),new nh(r.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="AsyncQueue";class rx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Gk(this,"async_queue_retry"),this._c=()=>{const n=e2();n&&yr(tx,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=e2();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=e2();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new qc;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Gh(e))throw e;yr(tx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,ll("INTERNAL UNHANDLED ERROR: ",nx(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=F5.createAndSchedule(this,e,t,n,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&sn(47125,{Pc:nx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function nx(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class aE extends V5{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new rx,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rx(e),this._firestoreClient=void 0,await e}}}function wz(r,e){const t=typeof r=="object"?r:vg(),n=typeof r=="string"?r:j0,i=zv(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=Mv("firestore");s&&bz(i,...s)}return i}function _z(r){if(r._terminated)throw new Fr(ar.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||xz(r),r._firestoreClient}function xz(r){var n,i,s;const e=r._freezeSettings(),t=function(l,c,a,u){return new QD(l,c,a,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,sE(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(r._databaseId,((n=r._app)==null?void 0:n.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new dz(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _a(xs.fromBase64String(e))}catch(t){throw new Fr(ar.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _a(xs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_a._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ip(e,_a._jsonSchema))return _a.fromBase64String(e.bytes)}}_a._jsonSchemaVersion="firestore/bytes/1.0",_a._jsonSchema={type:Gi("string",_a._jsonSchemaVersion),bytes:Gi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Fr(ar.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fr(ar.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fr(ar.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return En(this._lat,e._lat)||En(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:tc._jsonSchemaVersion}}static fromJSON(e){if(ip(e,tc._jsonSchema))return new tc(e.latitude,e.longitude)}}tc._jsonSchemaVersion="firestore/geoPoint/1.0",tc._jsonSchema={type:Gi("string",tc._jsonSchemaVersion),latitude:Gi("number"),longitude:Gi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:rc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ip(e,rc._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new rc(e.vectorValues);throw new Fr(ar.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rc._jsonSchemaVersion="firestore/vectorValue/1.0",rc._jsonSchema={type:Gi("string",rc._jsonSchemaVersion),vectorValues:Gi("object")};const Sz=new RegExp("[~\\*/\\[\\]]");function kz(r,e,t){if(e.search(Sz)>=0)throw ix(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r);try{return new lE(...e.split("."))._internalPath}catch{throw ix(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r)}}function ix(r,e,t,n,i){let s=`Function ${e}() called with invalid data`;s+=". ";let o="";return new Fr(ar.INVALID_ARGUMENT,s+r+o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Do(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ez(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Ez extends cE{data(){return super.data()}}function uE(r,e){return typeof e=="string"?kz(r,e):e instanceof lE?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cz(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Fr(ar.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Iz{convertValue(e,t="none"){switch(hc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Di(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(uc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw sn(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return sp(e,(i,s)=>{n[i]=this.convertValue(s,t)}),n}convertVectorValue(e){var n,i,s;const t=(s=(i=(n=e.fields)==null?void 0:n[Zy].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Di(o.doubleValue));return new rc(t)}convertGeoPoint(e){return new tc(Di(e.latitude),Di(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Mg(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ld(e));default:return null}}convertTimestamp(e){const t=cc(e);return new qi(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=wi.fromString(e);xi(Uk(n),9688,{name:e});const i=new Dd(n.get(1),n.get(3)),s=new Kr(n.popFirst(5));return i.isEqual(t)||ll(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class tm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ih extends cE{constructor(e,t,n,i,s,o){super(e,t,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(uE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Fr(ar.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ih._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ih._jsonSchemaVersion="firestore/documentSnapshot/1.0",ih._jsonSchema={type:Gi("string",ih._jsonSchemaVersion),bundleSource:Gi("string","DocumentSnapshot"),bundleName:Gi("string"),bundle:Gi("string")};class Pm extends ih{data(e={}){return super.data(e)}}class sh{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new tm(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Pm(this._firestore,this._userDataWriter,n.key,n,new tm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fr(ar.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new Pm(i._firestore,i._userDataWriter,l.doc.key,l.doc,new tm(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new Pm(i._firestore,i._userDataWriter,l.doc.key,l.doc,new tm(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let a=-1,u=-1;return l.type!==0&&(a=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),u=o.indexOf(l.doc.key)),{type:Az(l.type),doc:c,oldIndex:a,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Fr(ar.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sh._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=uk.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Az(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sn(61501,{type:r})}}sh._jsonSchemaVersion="firestore/querySnapshot/1.0",sh._jsonSchema={type:Gi("string",sh._jsonSchemaVersion),bundleSource:Gi("string","QuerySnapshot"),bundleName:Gi("string"),bundle:Gi("string")};class Tz extends Iz{constructor(e){super(),this.firestore=e}convertBytes(e){return new _a(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Do(this.firestore,null,t)}}function Nz(r){r=Qy(r,Vg);const e=Qy(r.firestore,aE),t=_z(e),n=new Tz(e);return Cz(r._query),yz(t,r._query).then(i=>new sh(e,n,r,i))}(function(e,t=!0){(function(i){Hh=i})(Vv),_h(new eu("firestore",(n,{instanceIdentifier:i,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new aE(new TD(n.getProvider("auth-internal")),new RD(o,n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Fr(ar.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dd(a.options.projectId,u)}(o,i),o);return s={useFetchStreams:t,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Ia(c_,u_,e),Ia(c_,u_,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="firebasestorage.googleapis.com",jz="storageBucket",Rz=2*60*1e3,Pz=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa extends hu{constructor(e,t,n=0){super(r2(e),`Firebase Storage: ${t} (${r2(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pa.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return r2(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ja;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ja||(ja={}));function r2(r){return"storage/"+r}function Mz(){const r="An unknown error occurred, please check the error payload for server response.";return new Pa(ja.UNKNOWN,r)}function Oz(){return new Pa(ja.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Lz(){return new Pa(ja.CANCELED,"User canceled the upload/download.")}function Dz(r){return new Pa(ja.INVALID_URL,"Invalid URL '"+r+"'.")}function Fz(r){return new Pa(ja.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function sx(r){return new Pa(ja.INVALID_ARGUMENT,r)}function fE(){return new Pa(ja.APP_DELETED,"The Firebase app was deleted.")}function Bz(r){return new Pa(ja.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Zo.makeFromUrl(e,t)}catch{return new Zo(e,"")}if(n.path==="")return n;throw Fz(e)}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function a(E){E.path_=decodeURIComponent(E.path)}const u="v[A-Za-z0-9_]+",d=t.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${u}/b/${i}/o${f}`,"i"),m={bucket:1,path:3},g=t===hE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,p="([^?#]*)",y=new RegExp(`^https?://${g}/${i}/${p}`,"i"),v=[{regex:l,indices:c,postModify:s},{regex:h,indices:m,postModify:a},{regex:y,indices:{bucket:1,path:2},postModify:a}];for(let E=0;E<v.length;E++){const M=v[E],W=M.regex.exec(e);if(W){const $=W[M.indices.bucket];let N=W[M.indices.path];N||(N=""),n=new Zo($,N),M.postModify(n);break}}if(n==null)throw Dz(e);return n}}class zz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uz(r,e,t){let n=1,i=null,s=null,o=!1,l=0;function c(){return l===2}let a=!1;function u(...p){a||(a=!0,e.apply(null,p))}function d(p){i=setTimeout(()=>{i=null,r(h,c())},p)}function f(){s&&clearTimeout(s)}function h(p,...y){if(a){f();return}if(p){f(),u.call(null,p,...y);return}if(c()||o){f(),u.call(null,p,...y);return}n<64&&(n*=2);let v;l===1?(l=2,v=0):v=(n+Math.random())*1e3,d(v)}let m=!1;function g(p){m||(m=!0,f(),!a&&(i!==null?(p||(l=2),clearTimeout(i),d(0)):p||(l=1)))}return d(0),s=setTimeout(()=>{o=!0,g(!0)},t),g}function Vz(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $z(r){return r!==void 0}function ox(r,e,t,n){if(n<e)throw sx(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw sx(`Invalid value for '${r}'. Expected ${t} or less.`)}function Wz(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const i=e(n)+"="+e(r[n]);t=t+i+"&"}return t=t.slice(0,-1),t}var F0;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(F0||(F0={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qz(r,e){const t=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,s=e.indexOf(r)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(e,t,n,i,s,o,l,c,a,u,d,f=!0,h=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=a,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,g)=>{this.resolve_=m,this.reject_=g,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new rm(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const c=l.loaded,a=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,a)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===F0.NO_ERROR,c=s.getStatus();if(!l||qz(c,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===F0.ABORT;n(!1,new rm(!1,null,u));return}const a=this.successCodes_.indexOf(c)!==-1;n(!0,new rm(a,s))})},t=(n,i)=>{const s=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());$z(c)?s(c):s()}catch(c){o(c)}else if(l!==null){const c=Mz();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(i.canceled){const c=this.appDelete_?fE():Lz();o(c)}else{const c=Oz();o(c)}};this.canceled_?t(!1,new rm(!1,null,!0)):this.backoffId_=Uz(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Vz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rm{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Gz(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function Kz(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Yz(r,e){e&&(r["X-Firebase-GMPID"]=e)}function Xz(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function Qz(r,e,t,n,i,s,o=!0,l=!1){const c=Wz(r.urlParams),a=r.url+c,u=Object.assign({},r.headers);return Yz(u,e),Gz(u,t),Kz(u,s),Xz(u,n),new Hz(a,r.method,u,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jz(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function Zz(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,t){this._service=e,t instanceof Zo?this._location=t:this._location=Zo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new B0(e,t)}get root(){const e=new Zo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Zz(this._location.path)}get storage(){return this._service}get parent(){const e=Jz(this._location.path);if(e===null)return null;const t=new Zo(this._location.bucket,e);return new B0(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Bz(e)}}function ax(r,e){const t=e==null?void 0:e[jz];return t==null?null:Zo.makeFromBucketSpec(t,r)}function eU(r,e,t,n={}){r.host=`${e}:${t}`;const i=Vh(e);i&&(Ov(`https://${r.host}/b`),Dv("Storage",!0)),r._isUsingEmulator=!0,r._protocol=i?"https":"http";const{mockUserToken:s}=n;s&&(r._overrideAuthToken=typeof s=="string"?s:Lv(s,r.app.options.projectId))}class tU{constructor(e,t,n,i,s,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=hE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Rz,this._maxUploadRetryTime=Pz,this._requests=new Set,i!=null?this._bucket=Zo.makeFromBucketSpec(i,this._host):this._bucket=ax(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zo.makeFromBucketSpec(this._url,e):this._bucket=ax(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ox("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ox("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Uv(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new B0(this,e)}_makeRequest(e,t,n,i,s=!0){if(this._deleted)return new zz(fE());{const o=Qz(e,this._appId,n,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const lx="@firebase/storage",cx="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="storage";function rU(r=vg(),e){r=hl(r);const n=zv(r,dE).getImmediate({identifier:e}),i=Mv("storage");return i&&nU(n,...i),n}function nU(r,e,t,n={}){eU(r,e,t,n)}function iU(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new tU(t,n,i,e,Vv)}function sU(){_h(new eu(dE,iU,"PUBLIC").setMultipleInstances(!0)),Ia(lx,cx,""),Ia(lx,cx,"esm2020")}sU();const oU={apiKey:"AIzaSyCMkZr4Xz204NjvETje-Rhznf6ECDYiEnE",authDomain:"ethiostore-17d9f.firebaseapp.com",databaseURL:"https://ethiostore-17d9f-default-rtdb.firebaseio.com",projectId:"ethiostore-17d9f",storageBucket:"ethiostore-17d9f.appspot.com",messagingSenderId:"964518277159",appId:"1:964518277159:web:9404cace890edf88961e02"},cp=nM().length?vg():B7(oU),Mn=Ih(cp);wz(cp);rU(cp);const aU="modulepreload",lU=function(r){return"/"+r},ux={},n2=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(c=>{if(c=lU(c),c in ux)return;ux[c]=!0;const a=c.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":aU,a||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),a)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function Un(r){"@babel/helpers - typeof";return Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Un(r)}var sa=Uint8Array,xo=Uint16Array,$5=Int32Array,W5=new sa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),q5=new sa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),hx=new sa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pE=function(r,e){for(var t=new xo(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new $5(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return{b:t,r:i}},mE=pE(W5,2),cU=mE.b,pb=mE.r;cU[28]=258,pb[258]=28;var uU=pE(q5,0),fx=uU.r,mb=new xo(32768);for(var hi=0;hi<32768;++hi){var Al=(hi&43690)>>1|(hi&21845)<<1;Al=(Al&52428)>>2|(Al&13107)<<2,Al=(Al&61680)>>4|(Al&3855)<<4,mb[hi]=((Al&65280)>>8|(Al&255)<<8)>>1}var ed=function(r,e,t){for(var n=r.length,i=0,s=new xo(e);i<n;++i)r[i]&&++s[r[i]-1];var o=new xo(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var l;if(t){l=new xo(1<<e);var c=15-e;for(i=0;i<n;++i)if(r[i])for(var a=i<<4|r[i],u=e-r[i],d=o[r[i]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)l[mb[d]>>c]=a}else for(l=new xo(n),i=0;i<n;++i)r[i]&&(l[i]=mb[o[r[i]-1]++]>>15-r[i]);return l},su=new sa(288);for(var hi=0;hi<144;++hi)su[hi]=8;for(var hi=144;hi<256;++hi)su[hi]=9;for(var hi=256;hi<280;++hi)su[hi]=7;for(var hi=280;hi<288;++hi)su[hi]=8;var z0=new sa(32);for(var hi=0;hi<32;++hi)z0[hi]=5;var hU=ed(su,9,0),fU=ed(z0,5,0),gE=function(r){return(r+7)/8|0},dU=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new sa(r.subarray(e,t))},Va=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},Ef=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},i2=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var i=t.length,s=t.slice();if(!i)return{t:bE,l:0};if(i==1){var o=new sa(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(M,W){return M.f-W.f}),t.push({s:-1,f:25001});var l=t[0],c=t[1],a=0,u=1,d=2;for(t[0]={s:-1,f:l.f+c.f,l,r:c};u!=i-1;)l=t[t[a].f<t[d].f?a++:d++],c=t[a!=u&&t[a].f<t[d].f?a++:d++],t[u++]={s:-1,f:l.f+c.f,l,r:c};for(var f=s[0].s,n=1;n<i;++n)s[n].s>f&&(f=s[n].s);var h=new xo(f+1),m=gb(t[u-1],h,0);if(m>e){var n=0,g=0,p=m-e,y=1<<p;for(s.sort(function(W,$){return h[$.s]-h[W.s]||W.f-$.f});n<i;++n){var b=s[n].s;if(h[b]>e)g+=y-(1<<m-h[b]),h[b]=e;else break}for(g>>=p;g>0;){var v=s[n].s;h[v]<e?g-=1<<e-h[v]++-1:++n}for(;n>=0&&g;--n){var E=s[n].s;h[E]==e&&(--h[E],++g)}m=e}return{t:new sa(h),l:m}},gb=function(r,e,t){return r.s==-1?Math.max(gb(r.l,e,t+1),gb(r.r,e,t+1)):e[r.s]=t},dx=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new xo(++e),n=0,i=r[0],s=1,o=function(c){t[n++]=c},l=1;l<=e;++l)if(r[l]==i&&l!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=r[l]}return{c:t.subarray(0,n),n:e}},Cf=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},yE=function(r,e,t){var n=t.length,i=gE(e+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var s=0;s<n;++s)r[i+s+4]=t[s];return(i+4+n)*8},px=function(r,e,t,n,i,s,o,l,c,a,u){Va(e,u++,t),++i[256];for(var d=i2(i,15),f=d.t,h=d.l,m=i2(s,15),g=m.t,p=m.l,y=dx(f),b=y.c,v=y.n,E=dx(g),M=E.c,W=E.n,$=new xo(19),N=0;N<b.length;++N)++$[b[N]&31];for(var N=0;N<M.length;++N)++$[M[N]&31];for(var j=i2($,7),F=j.t,P=j.l,L=19;L>4&&!F[hx[L-1]];--L);var k=a+5<<3,R=Cf(i,su)+Cf(s,z0)+o,C=Cf(i,f)+Cf(s,g)+o+14+3*L+Cf($,F)+2*$[16]+3*$[17]+7*$[18];if(c>=0&&k<=R&&k<=C)return yE(e,u,r.subarray(c,c+a));var _,x,w,S;if(Va(e,u,1+(C<R)),u+=2,C<R){_=ed(f,h,0),x=f,w=ed(g,p,0),S=g;var I=ed(F,P,0);Va(e,u,v-257),Va(e,u+5,W-1),Va(e,u+10,L-4),u+=14;for(var N=0;N<L;++N)Va(e,u+3*N,F[hx[N]]);u+=3*L;for(var z=[b,M],A=0;A<2;++A)for(var H=z[A],N=0;N<H.length;++N){var K=H[N]&31;Va(e,u,I[K]),u+=F[K],K>15&&(Va(e,u,H[N]>>5&127),u+=H[N]>>12)}}else _=hU,x=su,w=fU,S=z0;for(var N=0;N<l;++N){var J=n[N];if(J>255){var K=J>>18&31;Ef(e,u,_[K+257]),u+=x[K+257],K>7&&(Va(e,u,J>>23&31),u+=W5[K]);var V=J&31;Ef(e,u,w[V]),u+=S[V],V>3&&(Ef(e,u,J>>5&8191),u+=q5[V])}else Ef(e,u,_[J]),u+=x[J]}return Ef(e,u,_[256]),u+x[256]},pU=new $5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),bE=new sa(0),mU=function(r,e,t,n,i,s){var o=s.z||r.length,l=new sa(n+o+5*(1+Math.ceil(o/7e3))+i),c=l.subarray(n,l.length-i),a=s.l,u=(s.r||0)&7;if(e){u&&(c[0]=s.r>>3);for(var d=pU[e-1],f=d>>13,h=d&8191,m=(1<<t)-1,g=s.p||new xo(32768),p=s.h||new xo(m+1),y=Math.ceil(t/3),b=2*y,v=function(oe){return(r[oe]^r[oe+1]<<y^r[oe+2]<<b)&m},E=new $5(25e3),M=new xo(288),W=new xo(32),$=0,N=0,j=s.i||0,F=0,P=s.w||0,L=0;j+2<o;++j){var k=v(j),R=j&32767,C=p[k];if(g[R]=C,p[k]=R,P<=j){var _=o-j;if(($>7e3||F>24576)&&(_>423||!a)){u=px(r,c,0,E,M,W,N,F,L,j-L,u),F=$=N=0,L=j;for(var x=0;x<286;++x)M[x]=0;for(var x=0;x<30;++x)W[x]=0}var w=2,S=0,I=h,z=R-C&32767;if(_>2&&k==v(j-z))for(var A=Math.min(f,_)-1,H=Math.min(32767,j),K=Math.min(258,_);z<=H&&--I&&R!=C;){if(r[j+w]==r[j+w-z]){for(var J=0;J<K&&r[j+J]==r[j+J-z];++J);if(J>w){if(w=J,S=z,J>A)break;for(var V=Math.min(z,J-2),X=0,x=0;x<V;++x){var D=j-z+x&32767,O=g[D],G=D-O&32767;G>X&&(X=G,C=D)}}}R=C,C=g[R],z+=R-C&32767}if(S){E[F++]=268435456|pb[w]<<18|fx[S];var Z=pb[w]&31,ue=fx[S]&31;N+=W5[Z]+q5[ue],++M[257+Z],++W[ue],P=j+w,++$}else E[F++]=r[j],++M[r[j]]}}for(j=Math.max(j,P);j<o;++j)E[F++]=r[j],++M[r[j]];u=px(r,c,a,E,M,W,N,F,L,j-L,u),a||(s.r=u&7|c[u/8|0]<<3,u-=7,s.h=p,s.p=g,s.i=j,s.w=P)}else{for(var j=s.w||0;j<o+a;j+=65535){var te=j+65535;te>=o&&(c[u/8|0]=a,te=o),u=yE(c,u+1,r.subarray(j,te))}s.i=o}return dU(l,0,n+gE(u)+i)},vE=function(){var r=1,e=0;return{p:function(t){for(var n=r,i=e,s=t.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)i+=n+=t[o];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}r=n,e=i},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},gU=function(r,e,t,n,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new sa(s.length+r.length);o.set(s),o.set(r,s.length),r=o,i.w=s.length}return mU(r,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,i)},wE=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},yU=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var i=vE();i.p(e.dictionary),wE(r,2,i.d())}};function yb(r,e){e||(e={});var t=vE();t.p(r);var n=gU(r,e,e.dictionary?6:2,4);return yU(n,e),wE(n,n.length-4,t.d()),n}var bU=typeof TextDecoder<"u"&&new TextDecoder,vU=0;try{bU.decode(bE,{stream:!0}),vU=1}catch{}function wU(r){if(Array.isArray(r))return r}function _U(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,s,o,l=[],c=!0,a=!1;try{if(s=(t=t.call(r)).next,e!==0)for(;!(c=(n=s.call(t)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){a=!0,i=u}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(a)throw i}}return l}}function mx(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function xU(r,e){if(r){if(typeof r=="string")return mx(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?mx(r,e):void 0}}function SU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gx(r,e){return wU(r)||_U(r,e)||xU(r,e)||SU()}function yx(r,e="utf8"){return new TextDecoder(e).decode(r)}const kU=new TextEncoder;function EU(r){return kU.encode(r)}const CU=1024*8,IU=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),s2={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class H5{constructor(e=CU,t={}){zn(this,"buffer");zn(this,"byteLength");zn(this,"byteOffset");zn(this,"length");zn(this,"offset");zn(this,"lastWrittenByte");zn(this,"littleEndian");zn(this,"_data");zn(this,"_mark");zn(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,s=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof H5)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const n=s2[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+n);if(this.littleEndian===IU&&t!=="uint8"&&t!=="int8"){const l=new Uint8Array(this.buffer.slice(i,i+n));l.reverse();const c=new s2[t](l.buffer);return this.offset+=n,c.reverse(),c}const o=new s2[t](s);return this.offset+=n,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return yx(this.readBytes(e))}decodeText(e=1,t="utf8"){return yx(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(EU(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Yh(r){let e=r.length;for(;--e>=0;)r[e]=0}const AU=3,TU=258,_E=29,NU=256,jU=NU+1+_E,xE=30,RU=512,PU=new Array((jU+2)*2);Yh(PU);const MU=new Array(xE*2);Yh(MU);const OU=new Array(RU);Yh(OU);const LU=new Array(TU-AU+1);Yh(LU);const DU=new Array(_E);Yh(DU);const FU=new Array(xE);Yh(FU);const BU=(r,e,t,n)=>{let i=r&65535|0,s=r>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do i=i+e[n++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var bb=BU;const zU=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},UU=new Uint32Array(zU()),VU=(r,e,t,n)=>{const i=UU,s=n+t;r^=-1;for(let o=n;o<s;o++)r=r>>>8^i[(r^e[o])&255];return r^-1};var pa=VU,vb={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},SE={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const $U=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var WU=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)$U(t,n)&&(r[n]=t[n])}}return r},qU=r=>{let e=0;for(let n=0,i=r.length;n<i;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,i=0,s=r.length;n<s;n++){let o=r[n];t.set(o,i),i+=o.length}return t},kE={assign:WU,flattenChunks:qU};let EE=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{EE=!1}const Bd=new Uint8Array(256);for(let r=0;r<256;r++)Bd[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;Bd[254]=Bd[254]=1;var HU=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,i,s,o=r.length,l=0;for(i=0;i<o;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<o&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),l+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(l),s=0,i=0;s<l;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<o&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e};const GU=(r,e)=>{if(e<65534&&r.subarray&&EE)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var KU=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,i;const s=new Array(t*2);for(i=0,n=0;n<t;){let o=r[n++];if(o<128){s[i++]=o;continue}let l=Bd[o];if(l>4){s[i++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<t;)o=o<<6|r[n++]&63,l--;if(l>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return GU(s,i)},YU=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+Bd[r[t]]>e?t:e},wb={string2buf:HU,buf2string:KU,utf8border:YU};function XU(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var QU=XU;const nm=16209,JU=16191;var ZU=function(e,t){let n,i,s,o,l,c,a,u,d,f,h,m,g,p,y,b,v,E,M,W,$,N,j,F;const P=e.state;n=e.next_in,j=e.input,i=n+(e.avail_in-5),s=e.next_out,F=e.output,o=s-(t-e.avail_out),l=s+(e.avail_out-257),c=P.dmax,a=P.wsize,u=P.whave,d=P.wnext,f=P.window,h=P.hold,m=P.bits,g=P.lencode,p=P.distcode,y=(1<<P.lenbits)-1,b=(1<<P.distbits)-1;e:do{m<15&&(h+=j[n++]<<m,m+=8,h+=j[n++]<<m,m+=8),v=g[h&y];t:for(;;){if(E=v>>>24,h>>>=E,m-=E,E=v>>>16&255,E===0)F[s++]=v&65535;else if(E&16){M=v&65535,E&=15,E&&(m<E&&(h+=j[n++]<<m,m+=8),M+=h&(1<<E)-1,h>>>=E,m-=E),m<15&&(h+=j[n++]<<m,m+=8,h+=j[n++]<<m,m+=8),v=p[h&b];r:for(;;){if(E=v>>>24,h>>>=E,m-=E,E=v>>>16&255,E&16){if(W=v&65535,E&=15,m<E&&(h+=j[n++]<<m,m+=8,m<E&&(h+=j[n++]<<m,m+=8)),W+=h&(1<<E)-1,W>c){e.msg="invalid distance too far back",P.mode=nm;break e}if(h>>>=E,m-=E,E=s-o,W>E){if(E=W-E,E>u&&P.sane){e.msg="invalid distance too far back",P.mode=nm;break e}if($=0,N=f,d===0){if($+=a-E,E<M){M-=E;do F[s++]=f[$++];while(--E);$=s-W,N=F}}else if(d<E){if($+=a+d-E,E-=d,E<M){M-=E;do F[s++]=f[$++];while(--E);if($=0,d<M){E=d,M-=E;do F[s++]=f[$++];while(--E);$=s-W,N=F}}}else if($+=d-E,E<M){M-=E;do F[s++]=f[$++];while(--E);$=s-W,N=F}for(;M>2;)F[s++]=N[$++],F[s++]=N[$++],F[s++]=N[$++],M-=3;M&&(F[s++]=N[$++],M>1&&(F[s++]=N[$++]))}else{$=s-W;do F[s++]=F[$++],F[s++]=F[$++],F[s++]=F[$++],M-=3;while(M>2);M&&(F[s++]=F[$++],M>1&&(F[s++]=F[$++]))}}else if(E&64){e.msg="invalid distance code",P.mode=nm;break e}else{v=p[(v&65535)+(h&(1<<E)-1)];continue r}break}}else if(E&64)if(E&32){P.mode=JU;break e}else{e.msg="invalid literal/length code",P.mode=nm;break e}else{v=g[(v&65535)+(h&(1<<E)-1)];continue t}break}}while(n<i&&s<l);M=m>>3,n-=M,m-=M<<3,h&=(1<<m)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<l?257+(l-s):257-(s-l),P.hold=h,P.bits=m};const Su=15,bx=852,vx=592,wx=0,o2=1,_x=2,eV=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),tV=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),rV=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),nV=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),iV=(r,e,t,n,i,s,o,l)=>{const c=l.bits;let a=0,u=0,d=0,f=0,h=0,m=0,g=0,p=0,y=0,b=0,v,E,M,W,$,N=null,j;const F=new Uint16Array(Su+1),P=new Uint16Array(Su+1);let L=null,k,R,C;for(a=0;a<=Su;a++)F[a]=0;for(u=0;u<n;u++)F[e[t+u]]++;for(h=c,f=Su;f>=1&&F[f]===0;f--);if(h>f&&(h=f),f===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,l.bits=1,0;for(d=1;d<f&&F[d]===0;d++);for(h<d&&(h=d),p=1,a=1;a<=Su;a++)if(p<<=1,p-=F[a],p<0)return-1;if(p>0&&(r===wx||f!==1))return-1;for(P[1]=0,a=1;a<Su;a++)P[a+1]=P[a]+F[a];for(u=0;u<n;u++)e[t+u]!==0&&(o[P[e[t+u]]++]=u);if(r===wx?(N=L=o,j=20):r===o2?(N=eV,L=tV,j=257):(N=rV,L=nV,j=0),b=0,u=0,a=d,$=s,m=h,g=0,M=-1,y=1<<h,W=y-1,r===o2&&y>bx||r===_x&&y>vx)return 1;for(;;){k=a-g,o[u]+1<j?(R=0,C=o[u]):o[u]>=j?(R=L[o[u]-j],C=N[o[u]-j]):(R=96,C=0),v=1<<a-g,E=1<<m,d=E;do E-=v,i[$+(b>>g)+E]=k<<24|R<<16|C|0;while(E!==0);for(v=1<<a-1;b&v;)v>>=1;if(v!==0?(b&=v-1,b+=v):b=0,u++,--F[a]===0){if(a===f)break;a=e[t+o[u]]}if(a>h&&(b&W)!==M){for(g===0&&(g=h),$+=d,m=a-g,p=1<<m;m+g<f&&(p-=F[m+g],!(p<=0));)m++,p<<=1;if(y+=1<<m,r===o2&&y>bx||r===_x&&y>vx)return 1;M=b&W,i[M]=h<<24|m<<16|$-s|0}}return b!==0&&(i[$+b]=a-g<<24|64<<16|0),l.bits=h,0};var td=iV;const sV=0,CE=1,IE=2,{Z_FINISH:xx,Z_BLOCK:oV,Z_TREES:im,Z_OK:ou,Z_STREAM_END:aV,Z_NEED_DICT:lV,Z_STREAM_ERROR:Vo,Z_DATA_ERROR:AE,Z_MEM_ERROR:TE,Z_BUF_ERROR:cV,Z_DEFLATED:Sx}=SE,$g=16180,kx=16181,Ex=16182,Cx=16183,Ix=16184,Ax=16185,Tx=16186,Nx=16187,jx=16188,Rx=16189,U0=16190,$a=16191,a2=16192,Px=16193,l2=16194,Mx=16195,Ox=16196,Lx=16197,Dx=16198,sm=16199,om=16200,Fx=16201,Bx=16202,zx=16203,Ux=16204,Vx=16205,c2=16206,$x=16207,Wx=16208,gi=16209,NE=16210,jE=16211,uV=852,hV=592,fV=15,dV=fV,qx=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function pV(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const mu=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<$g||e.mode>jE?1:0},RE=r=>{if(mu(r))return Vo;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=$g,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(uV),e.distcode=e.distdyn=new Int32Array(hV),e.sane=1,e.back=-1,ou},PE=r=>{if(mu(r))return Vo;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,RE(r)},ME=(r,e)=>{let t;if(mu(r))return Vo;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Vo:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,PE(r))},OE=(r,e)=>{if(!r)return Vo;const t=new pV;r.state=t,t.strm=r,t.window=null,t.mode=$g;const n=ME(r,e);return n!==ou&&(r.state=null),n},mV=r=>OE(r,dV);let Hx=!0,u2,h2;const gV=r=>{if(Hx){u2=new Int32Array(512),h2=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(td(CE,r.lens,0,288,u2,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;td(IE,r.lens,0,32,h2,0,r.work,{bits:5}),Hx=!1}r.lencode=u2,r.lenbits=9,r.distcode=h2,r.distbits=5},LE=(r,e,t,n)=>{let i;const s=r.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(t-n,t-n+i),s.wnext),n-=i,n?(s.window.set(e.subarray(t-n,t),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},yV=(r,e)=>{let t,n,i,s,o,l,c,a,u,d,f,h,m,g,p=0,y,b,v,E,M,W,$,N;const j=new Uint8Array(4);let F,P;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(mu(r)||!r.output||!r.input&&r.avail_in!==0)return Vo;t=r.state,t.mode===$a&&(t.mode=a2),o=r.next_out,i=r.output,c=r.avail_out,s=r.next_in,n=r.input,l=r.avail_in,a=t.hold,u=t.bits,d=l,f=c,N=ou;e:for(;;)switch(t.mode){case $g:if(t.wrap===0){t.mode=a2;break}for(;u<16;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}if(t.wrap&2&&a===35615){t.wbits===0&&(t.wbits=15),t.check=0,j[0]=a&255,j[1]=a>>>8&255,t.check=pa(t.check,j,2,0),a=0,u=0,t.mode=kx;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((a&255)<<8)+(a>>8))%31){r.msg="incorrect header check",t.mode=gi;break}if((a&15)!==Sx){r.msg="unknown compression method",t.mode=gi;break}if(a>>>=4,u-=4,$=(a&15)+8,t.wbits===0&&(t.wbits=$),$>15||$>t.wbits){r.msg="invalid window size",t.mode=gi;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=a&512?Rx:$a,a=0,u=0;break;case kx:for(;u<16;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}if(t.flags=a,(t.flags&255)!==Sx){r.msg="unknown compression method",t.mode=gi;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=gi;break}t.head&&(t.head.text=a>>8&1),t.flags&512&&t.wrap&4&&(j[0]=a&255,j[1]=a>>>8&255,t.check=pa(t.check,j,2,0)),a=0,u=0,t.mode=Ex;case Ex:for(;u<32;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}t.head&&(t.head.time=a),t.flags&512&&t.wrap&4&&(j[0]=a&255,j[1]=a>>>8&255,j[2]=a>>>16&255,j[3]=a>>>24&255,t.check=pa(t.check,j,4,0)),a=0,u=0,t.mode=Cx;case Cx:for(;u<16;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}t.head&&(t.head.xflags=a&255,t.head.os=a>>8),t.flags&512&&t.wrap&4&&(j[0]=a&255,j[1]=a>>>8&255,t.check=pa(t.check,j,2,0)),a=0,u=0,t.mode=Ix;case Ix:if(t.flags&1024){for(;u<16;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}t.length=a,t.head&&(t.head.extra_len=a),t.flags&512&&t.wrap&4&&(j[0]=a&255,j[1]=a>>>8&255,t.check=pa(t.check,j,2,0)),a=0,u=0}else t.head&&(t.head.extra=null);t.mode=Ax;case Ax:if(t.flags&1024&&(h=t.length,h>l&&(h=l),h&&(t.head&&($=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(s,s+h),$)),t.flags&512&&t.wrap&4&&(t.check=pa(t.check,n,h,s)),l-=h,s+=h,t.length-=h),t.length))break e;t.length=0,t.mode=Tx;case Tx:if(t.flags&2048){if(l===0)break e;h=0;do $=n[s+h++],t.head&&$&&t.length<65536&&(t.head.name+=String.fromCharCode($));while($&&h<l);if(t.flags&512&&t.wrap&4&&(t.check=pa(t.check,n,h,s)),l-=h,s+=h,$)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Nx;case Nx:if(t.flags&4096){if(l===0)break e;h=0;do $=n[s+h++],t.head&&$&&t.length<65536&&(t.head.comment+=String.fromCharCode($));while($&&h<l);if(t.flags&512&&t.wrap&4&&(t.check=pa(t.check,n,h,s)),l-=h,s+=h,$)break e}else t.head&&(t.head.comment=null);t.mode=jx;case jx:if(t.flags&512){for(;u<16;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}if(t.wrap&4&&a!==(t.check&65535)){r.msg="header crc mismatch",t.mode=gi;break}a=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=$a;break;case Rx:for(;u<32;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}r.adler=t.check=qx(a),a=0,u=0,t.mode=U0;case U0:if(t.havedict===0)return r.next_out=o,r.avail_out=c,r.next_in=s,r.avail_in=l,t.hold=a,t.bits=u,lV;r.adler=t.check=1,t.mode=$a;case $a:if(e===oV||e===im)break e;case a2:if(t.last){a>>>=u&7,u-=u&7,t.mode=c2;break}for(;u<3;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}switch(t.last=a&1,a>>>=1,u-=1,a&3){case 0:t.mode=Px;break;case 1:if(gV(t),t.mode=sm,e===im){a>>>=2,u-=2;break e}break;case 2:t.mode=Ox;break;case 3:r.msg="invalid block type",t.mode=gi}a>>>=2,u-=2;break;case Px:for(a>>>=u&7,u-=u&7;u<32;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}if((a&65535)!==(a>>>16^65535)){r.msg="invalid stored block lengths",t.mode=gi;break}if(t.length=a&65535,a=0,u=0,t.mode=l2,e===im)break e;case l2:t.mode=Mx;case Mx:if(h=t.length,h){if(h>l&&(h=l),h>c&&(h=c),h===0)break e;i.set(n.subarray(s,s+h),o),l-=h,s+=h,c-=h,o+=h,t.length-=h;break}t.mode=$a;break;case Ox:for(;u<14;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}if(t.nlen=(a&31)+257,a>>>=5,u-=5,t.ndist=(a&31)+1,a>>>=5,u-=5,t.ncode=(a&15)+4,a>>>=4,u-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=gi;break}t.have=0,t.mode=Lx;case Lx:for(;t.have<t.ncode;){for(;u<3;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}t.lens[L[t.have++]]=a&7,a>>>=3,u-=3}for(;t.have<19;)t.lens[L[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,F={bits:t.lenbits},N=td(sV,t.lens,0,19,t.lencode,0,t.work,F),t.lenbits=F.bits,N){r.msg="invalid code lengths set",t.mode=gi;break}t.have=0,t.mode=Dx;case Dx:for(;t.have<t.nlen+t.ndist;){for(;p=t.lencode[a&(1<<t.lenbits)-1],y=p>>>24,b=p>>>16&255,v=p&65535,!(y<=u);){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}if(v<16)a>>>=y,u-=y,t.lens[t.have++]=v;else{if(v===16){for(P=y+2;u<P;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}if(a>>>=y,u-=y,t.have===0){r.msg="invalid bit length repeat",t.mode=gi;break}$=t.lens[t.have-1],h=3+(a&3),a>>>=2,u-=2}else if(v===17){for(P=y+3;u<P;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}a>>>=y,u-=y,$=0,h=3+(a&7),a>>>=3,u-=3}else{for(P=y+7;u<P;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}a>>>=y,u-=y,$=0,h=11+(a&127),a>>>=7,u-=7}if(t.have+h>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=gi;break}for(;h--;)t.lens[t.have++]=$}}if(t.mode===gi)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=gi;break}if(t.lenbits=9,F={bits:t.lenbits},N=td(CE,t.lens,0,t.nlen,t.lencode,0,t.work,F),t.lenbits=F.bits,N){r.msg="invalid literal/lengths set",t.mode=gi;break}if(t.distbits=6,t.distcode=t.distdyn,F={bits:t.distbits},N=td(IE,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,F),t.distbits=F.bits,N){r.msg="invalid distances set",t.mode=gi;break}if(t.mode=sm,e===im)break e;case sm:t.mode=om;case om:if(l>=6&&c>=258){r.next_out=o,r.avail_out=c,r.next_in=s,r.avail_in=l,t.hold=a,t.bits=u,ZU(r,f),o=r.next_out,i=r.output,c=r.avail_out,s=r.next_in,n=r.input,l=r.avail_in,a=t.hold,u=t.bits,t.mode===$a&&(t.back=-1);break}for(t.back=0;p=t.lencode[a&(1<<t.lenbits)-1],y=p>>>24,b=p>>>16&255,v=p&65535,!(y<=u);){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}if(b&&!(b&240)){for(E=y,M=b,W=v;p=t.lencode[W+((a&(1<<E+M)-1)>>E)],y=p>>>24,b=p>>>16&255,v=p&65535,!(E+y<=u);){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}a>>>=E,u-=E,t.back+=E}if(a>>>=y,u-=y,t.back+=y,t.length=v,b===0){t.mode=Vx;break}if(b&32){t.back=-1,t.mode=$a;break}if(b&64){r.msg="invalid literal/length code",t.mode=gi;break}t.extra=b&15,t.mode=Fx;case Fx:if(t.extra){for(P=t.extra;u<P;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}t.length+=a&(1<<t.extra)-1,a>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Bx;case Bx:for(;p=t.distcode[a&(1<<t.distbits)-1],y=p>>>24,b=p>>>16&255,v=p&65535,!(y<=u);){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}if(!(b&240)){for(E=y,M=b,W=v;p=t.distcode[W+((a&(1<<E+M)-1)>>E)],y=p>>>24,b=p>>>16&255,v=p&65535,!(E+y<=u);){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}a>>>=E,u-=E,t.back+=E}if(a>>>=y,u-=y,t.back+=y,b&64){r.msg="invalid distance code",t.mode=gi;break}t.offset=v,t.extra=b&15,t.mode=zx;case zx:if(t.extra){for(P=t.extra;u<P;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}t.offset+=a&(1<<t.extra)-1,a>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=gi;break}t.mode=Ux;case Ux:if(c===0)break e;if(h=f-c,t.offset>h){if(h=t.offset-h,h>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=gi;break}h>t.wnext?(h-=t.wnext,m=t.wsize-h):m=t.wnext-h,h>t.length&&(h=t.length),g=t.window}else g=i,m=o-t.offset,h=t.length;h>c&&(h=c),c-=h,t.length-=h;do i[o++]=g[m++];while(--h);t.length===0&&(t.mode=om);break;case Vx:if(c===0)break e;i[o++]=t.length,c--,t.mode=om;break;case c2:if(t.wrap){for(;u<32;){if(l===0)break e;l--,a|=n[s++]<<u,u+=8}if(f-=c,r.total_out+=f,t.total+=f,t.wrap&4&&f&&(r.adler=t.check=t.flags?pa(t.check,i,f,o-f):bb(t.check,i,f,o-f)),f=c,t.wrap&4&&(t.flags?a:qx(a))!==t.check){r.msg="incorrect data check",t.mode=gi;break}a=0,u=0}t.mode=$x;case $x:if(t.wrap&&t.flags){for(;u<32;){if(l===0)break e;l--,a+=n[s++]<<u,u+=8}if(t.wrap&4&&a!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=gi;break}a=0,u=0}t.mode=Wx;case Wx:N=aV;break e;case gi:N=AE;break e;case NE:return TE;case jE:default:return Vo}return r.next_out=o,r.avail_out=c,r.next_in=s,r.avail_in=l,t.hold=a,t.bits=u,(t.wsize||f!==r.avail_out&&t.mode<gi&&(t.mode<c2||e!==xx))&&LE(r,r.output,r.next_out,f-r.avail_out),d-=r.avail_in,f-=r.avail_out,r.total_in+=d,r.total_out+=f,t.total+=f,t.wrap&4&&f&&(r.adler=t.check=t.flags?pa(t.check,i,f,r.next_out-f):bb(t.check,i,f,r.next_out-f)),r.data_type=t.bits+(t.last?64:0)+(t.mode===$a?128:0)+(t.mode===sm||t.mode===l2?256:0),(d===0&&f===0||e===xx)&&N===ou&&(N=cV),N},bV=r=>{if(mu(r))return Vo;let e=r.state;return e.window&&(e.window=null),r.state=null,ou},vV=(r,e)=>{if(mu(r))return Vo;const t=r.state;return t.wrap&2?(t.head=e,e.done=!1,ou):Vo},wV=(r,e)=>{const t=e.length;let n,i,s;return mu(r)||(n=r.state,n.wrap!==0&&n.mode!==U0)?Vo:n.mode===U0&&(i=1,i=bb(i,e,t,0),i!==n.check)?AE:(s=LE(r,e,t,t),s?(n.mode=NE,TE):(n.havedict=1,ou))};var _V=PE,xV=ME,SV=RE,kV=mV,EV=OE,CV=yV,IV=bV,AV=vV,TV=wV,NV="pako inflate (from Nodeca project)",Ga={inflateReset:_V,inflateReset2:xV,inflateResetKeep:SV,inflateInit:kV,inflateInit2:EV,inflate:CV,inflateEnd:IV,inflateGetHeader:AV,inflateSetDictionary:TV,inflateInfo:NV};function jV(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var RV=jV;const DE=Object.prototype.toString,{Z_NO_FLUSH:PV,Z_FINISH:MV,Z_OK:zd,Z_STREAM_END:f2,Z_NEED_DICT:d2,Z_STREAM_ERROR:OV,Z_DATA_ERROR:Gx,Z_MEM_ERROR:LV}=SE;function up(r){this.options=kE.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new QU,this.strm.avail_out=0;let t=Ga.inflateInit2(this.strm,e.windowBits);if(t!==zd)throw new Error(vb[t]);if(this.header=new RV,Ga.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=wb.string2buf(e.dictionary):DE.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Ga.inflateSetDictionary(this.strm,e.dictionary),t!==zd)))throw new Error(vb[t])}up.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?MV:PV,DE.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),s=Ga.inflate(t,o),s===d2&&i&&(s=Ga.inflateSetDictionary(t,i),s===zd?s=Ga.inflate(t,o):s===Gx&&(s=d2));t.avail_in>0&&s===f2&&t.state.wrap>0&&r[t.next_in]!==0;)Ga.inflateReset(t),s=Ga.inflate(t,o);switch(s){case OV:case Gx:case d2:case LV:return this.onEnd(s),this.ended=!0,!1}if(l=t.avail_out,t.next_out&&(t.avail_out===0||s===f2))if(this.options.to==="string"){let c=wb.utf8border(t.output,t.next_out),a=t.next_out-c,u=wb.buf2string(t.output,c);t.next_out=a,t.avail_out=n-a,a&&t.output.set(t.output.subarray(c,c+a),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===zd&&l===0)){if(s===f2)return s=Ga.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};up.prototype.onData=function(r){this.chunks.push(r)};up.prototype.onEnd=function(r){r===zd&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=kE.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function DV(r,e){const t=new up(e);if(t.push(r),t.err)throw t.msg||vb[t.err];return t.result}var FV=up,BV=DV,zV={Inflate:FV,inflate:BV};const{Inflate:UV,inflate:VV}=zV;var Kx=UV,$V=VV;const FE=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;FE[r]=e}const Yx=4294967295;function WV(r,e,t){let n=r;for(let i=0;i<t;i++)n=FE[(n^e[i])&255]^n>>>8;return n}function qV(r,e){return(WV(Yx,r,e)^Yx)>>>0}function Xx(r,e,t){const n=r.readUint32(),i=qV(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(i!==n)throw new Error(`CRC mismatch for chunk ${t}. Expected ${n}, found ${i}`)}function BE(r,e,t){for(let n=0;n<t;n++)e[n]=r[n]}function zE(r,e,t,n){let i=0;for(;i<n;i++)e[i]=r[i];for(;i<t;i++)e[i]=r[i]+e[i-n]&255}function UE(r,e,t,n){let i=0;if(t.length===0)for(;i<n;i++)e[i]=r[i];else for(;i<n;i++)e[i]=r[i]+t[i]&255}function VE(r,e,t,n,i){let s=0;if(t.length===0){for(;s<i;s++)e[s]=r[s];for(;s<n;s++)e[s]=r[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=r[s]+(t[s]>>1)&255;for(;s<n;s++)e[s]=r[s]+(e[s-i]+t[s]>>1)&255}}function $E(r,e,t,n,i){let s=0;if(t.length===0){for(;s<i;s++)e[s]=r[s];for(;s<n;s++)e[s]=r[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=r[s]+t[s]&255;for(;s<n;s++)e[s]=r[s]+HV(e[s-i],t[s],t[s-i])&255}}function HV(r,e,t){const n=r+e-t,i=Math.abs(n-r),s=Math.abs(n-e),o=Math.abs(n-t);return i<=s&&i<=o?r:s<=o?e:t}function GV(r,e,t,n,i,s){switch(r){case 0:BE(e,t,i);break;case 1:zE(e,t,i,s);break;case 2:UE(e,t,n,i);break;case 3:VE(e,t,n,i,s);break;case 4:$E(e,t,n,i,s);break;default:throw new Error(`Unsupported filter: ${r}`)}}const KV=new Uint16Array([255]),YV=new Uint8Array(KV.buffer),XV=YV[0]===255;function QV(r){const{data:e,width:t,height:n,channels:i,depth:s}=r,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*i,c=new Uint8Array(n*t*l);let a=0;for(let u=0;u<7;u++){const d=o[u],f=Math.ceil((t-d.x)/d.xStep),h=Math.ceil((n-d.y)/d.yStep);if(f<=0||h<=0)continue;const m=f*l,g=new Uint8Array(m);for(let p=0;p<h;p++){const y=e[a++],b=e.subarray(a,a+m);a+=m;const v=new Uint8Array(m);GV(y,b,v,g,m,l),g.set(v);for(let E=0;E<f;E++){const M=d.x+E*d.xStep,W=d.y+p*d.yStep;if(!(M>=t||W>=n))for(let $=0;$<l;$++)c[(W*t+M)*l+$]=v[E*l+$]}}}if(s===16){const u=new Uint16Array(c.buffer);if(XV)for(let d=0;d<u.length;d++)u[d]=JV(u[d]);return u}else return c}function JV(r){return(r&255)<<8|r>>8&255}const ZV=new Uint16Array([255]),e$=new Uint8Array(ZV.buffer),t$=e$[0]===255,r$=new Uint8Array(0);function Qx(r){const{data:e,width:t,height:n,channels:i,depth:s}=r,o=Math.ceil(s/8)*i,l=Math.ceil(s/8*i*t),c=new Uint8Array(n*l);let a=r$,u=0,d,f;for(let h=0;h<n;h++){switch(d=e.subarray(u+1,u+1+l),f=c.subarray(h*l,(h+1)*l),e[u]){case 0:BE(d,f,l);break;case 1:zE(d,f,l,o);break;case 2:UE(d,f,a,l);break;case 3:VE(d,f,a,l,o);break;case 4:$E(d,f,a,l,o);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}a=f,u+=l+1}if(s===16){const h=new Uint16Array(c.buffer);if(t$)for(let m=0;m<h.length;m++)h[m]=n$(h[m]);return h}else return c}function n$(r){return(r&255)<<8|r>>8&255}const Mm=Uint8Array.of(137,80,78,71,13,10,26,10);function Jx(r){if(!i$(r.readBytes(Mm.length)))throw new Error("wrong PNG signature")}function i$(r){if(r.length<Mm.length)return!1;for(let e=0;e<Mm.length;e++)if(r[e]!==Mm[e])return!1;return!0}const s$="tEXt",o$=0,WE=new TextDecoder("latin1");function a$(r){if(c$(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const l$=/^[\u0000-\u00FF]*$/;function c$(r){if(!l$.test(r))throw new Error("invalid latin1 text")}function u$(r,e,t){const n=qE(e);r[n]=h$(e,t-n.length-1)}function qE(r){for(r.mark();r.readByte()!==o$;);const e=r.offset;r.reset();const t=WE.decode(r.readBytes(e-r.offset-1));return r.skip(1),a$(t),t}function h$(r,e){return WE.decode(r.readBytes(e))}const bo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},p2={UNKNOWN:-1,DEFLATE:0},Zx={UNKNOWN:-1,ADAPTIVE:0},m2={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},am={NONE:0,BACKGROUND:1,PREVIOUS:2},g2={SOURCE:0,OVER:1};class f$ extends H5{constructor(t,n={}){super(t);zn(this,"_checkCrc");zn(this,"_inflator");zn(this,"_png");zn(this,"_apng");zn(this,"_end");zn(this,"_hasPalette");zn(this,"_palette");zn(this,"_hasTransparency");zn(this,"_transparency");zn(this,"_compressionMethod");zn(this,"_filterMethod");zn(this,"_interlaceMethod");zn(this,"_colorType");zn(this,"_isAnimated");zn(this,"_numberOfFrames");zn(this,"_numberOfPlays");zn(this,"_frames");zn(this,"_writingDataChunks");const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new Kx,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=p2.UNKNOWN,this._filterMethod=Zx.UNKNOWN,this._interlaceMethod=m2.UNKNOWN,this._colorType=bo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Jx(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeChunk(t,n)}return this.decodeImage(),this._png}decodeApng(){for(Jx(this);!this._end;){const t=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(t,n)}return this.decodeApngImage(),this._apng}decodeChunk(t,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case s$:u$(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Xx(this,t+4,n):this.skip(4)}decodeApngChunk(t,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,n),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?Xx(this,t+4,n):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=d$(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case bo.GREYSCALE:i=1;break;case bo.TRUECOLOUR:i=3;break;case bo.INDEXED_COLOUR:i=1;break;case bo.GREYSCALE_ALPHA:i=2;break;case bo.TRUECOLOUR_ALPHA:i=4;break;case bo.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==p2.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const n=t/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<n;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const n=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let n=t,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case bo.GREYSCALE:case bo.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let n=0;n<t/2;n++)this._transparency[n]=this.readUint16();break}case bo.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case bo.UNKNOWN:case bo.GREYSCALE_ALPHA:case bo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const n=qE(this),i=this.readUint8();if(i!==p2.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:$V(s)}}decodepHYs(){const t=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const n={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=Qx({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const s=this._apng.frames.at(t-1);this.disposeFrame(i,s,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(t,n,i){switch(t.disposeOp){case am.NONE:break;case am.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const l=(s*t.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)i.data[l+c]=0}break;case am.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,n){const i=1<<this._png.depth,s=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,a=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:a}};switch(n.blendOp){case g2.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:a}=s(o,l);for(let u=0;u<this._png.channels;u++)t.data[c+u]=n.data[a+u]}break;case g2.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:a}=s(o,l);for(let u=0;u<this._png.channels;u++){const d=n.data[a+this._png.channels-1]/i,f=u%(this._png.channels-1)===0?1:n.data[a+u],h=Math.floor(d*f+(1-d)*t.data[c+u]);t.data[c+u]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==Zx.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===m2.NO_INTERLACE)this._png.data=Qx({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===m2.ADAM7)this._png.data=QV({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,n=this._frames.at(-1);n?n.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:am.NONE,blendOp:g2.SOURCE,data:t}),this._inflator=new Kx,this._writingDataChunks=!1}}function d$(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var e6;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(e6||(e6={}));function p$(r,e){return new f$(r,e).decode()}var Qr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function y2(){Qr.console&&typeof Qr.console.log=="function"&&Qr.console.log.apply(Qr.console,arguments)}var Xn={log:y2,warn:function(r){Qr.console&&(typeof Qr.console.warn=="function"?Qr.console.warn.apply(Qr.console,arguments):y2.call(null,arguments))},error:function(r){Qr.console&&(typeof Qr.console.error=="function"?Qr.console.error.apply(Qr.console,arguments):y2(r))}};function b2(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){Mc(n.response,e,t)},n.onerror=function(){Xn.error("could not download file")},n.send()}function t6(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function lm(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var Mc=Qr.saveAs||((typeof window>"u"?"undefined":Un(window))!=="object"||window!==Qr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=Qr.URL||Qr.webkitURL,i=document.createElement("a");e=e||r.name||"download",i.download=e,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?t6(i.href)?b2(r,e,t):lm(i,i.target="_blank"):lm(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){lm(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(t6(r))b2(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){lm(n)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Un(s)!=="object"&&(Xn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return b2(r,e,t);var i=r.type==="application/octet-stream",s=/constructor/i.test(Qr.HTMLElement)||Qr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Un(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},l.readAsDataURL(r)}else{var c=Qr.URL||Qr.webkitURL,a=c.createObjectURL(r);n?n.location=a:location.href=a,n=null,setTimeout(function(){c.revokeObjectURL(a)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function HE(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<t.length;n++){var i=t[n].re,s=t[n].process,o=i.exec(r);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),a=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),a.length==1&&(a="0"+a),"#"+l+c+a}}var Om=Qr.atob.bind(Qr),r6=Qr.btoa.bind(Qr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function v2(r,e){var t=r[0],n=r[1],i=r[2],s=r[3];t=Ts(t,n,i,s,e[0],7,-680876936),s=Ts(s,t,n,i,e[1],12,-389564586),i=Ts(i,s,t,n,e[2],17,606105819),n=Ts(n,i,s,t,e[3],22,-1044525330),t=Ts(t,n,i,s,e[4],7,-176418897),s=Ts(s,t,n,i,e[5],12,1200080426),i=Ts(i,s,t,n,e[6],17,-1473231341),n=Ts(n,i,s,t,e[7],22,-45705983),t=Ts(t,n,i,s,e[8],7,1770035416),s=Ts(s,t,n,i,e[9],12,-1958414417),i=Ts(i,s,t,n,e[10],17,-42063),n=Ts(n,i,s,t,e[11],22,-1990404162),t=Ts(t,n,i,s,e[12],7,1804603682),s=Ts(s,t,n,i,e[13],12,-40341101),i=Ts(i,s,t,n,e[14],17,-1502002290),t=Ns(t,n=Ts(n,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ns(s,t,n,i,e[6],9,-1069501632),i=Ns(i,s,t,n,e[11],14,643717713),n=Ns(n,i,s,t,e[0],20,-373897302),t=Ns(t,n,i,s,e[5],5,-701558691),s=Ns(s,t,n,i,e[10],9,38016083),i=Ns(i,s,t,n,e[15],14,-660478335),n=Ns(n,i,s,t,e[4],20,-405537848),t=Ns(t,n,i,s,e[9],5,568446438),s=Ns(s,t,n,i,e[14],9,-1019803690),i=Ns(i,s,t,n,e[3],14,-187363961),n=Ns(n,i,s,t,e[8],20,1163531501),t=Ns(t,n,i,s,e[13],5,-1444681467),s=Ns(s,t,n,i,e[2],9,-51403784),i=Ns(i,s,t,n,e[7],14,1735328473),t=js(t,n=Ns(n,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=js(s,t,n,i,e[8],11,-2022574463),i=js(i,s,t,n,e[11],16,1839030562),n=js(n,i,s,t,e[14],23,-35309556),t=js(t,n,i,s,e[1],4,-1530992060),s=js(s,t,n,i,e[4],11,1272893353),i=js(i,s,t,n,e[7],16,-155497632),n=js(n,i,s,t,e[10],23,-1094730640),t=js(t,n,i,s,e[13],4,681279174),s=js(s,t,n,i,e[0],11,-358537222),i=js(i,s,t,n,e[3],16,-722521979),n=js(n,i,s,t,e[6],23,76029189),t=js(t,n,i,s,e[9],4,-640364487),s=js(s,t,n,i,e[12],11,-421815835),i=js(i,s,t,n,e[15],16,530742520),t=Rs(t,n=js(n,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Rs(s,t,n,i,e[7],10,1126891415),i=Rs(i,s,t,n,e[14],15,-1416354905),n=Rs(n,i,s,t,e[5],21,-57434055),t=Rs(t,n,i,s,e[12],6,1700485571),s=Rs(s,t,n,i,e[3],10,-1894986606),i=Rs(i,s,t,n,e[10],15,-1051523),n=Rs(n,i,s,t,e[1],21,-2054922799),t=Rs(t,n,i,s,e[8],6,1873313359),s=Rs(s,t,n,i,e[15],10,-30611744),i=Rs(i,s,t,n,e[6],15,-1560198380),n=Rs(n,i,s,t,e[13],21,1309151649),t=Rs(t,n,i,s,e[4],6,-145523070),s=Rs(s,t,n,i,e[11],10,-1120210379),i=Rs(i,s,t,n,e[2],15,718787259),n=Rs(n,i,s,t,e[9],21,-343485551),r[0]=zl(t,r[0]),r[1]=zl(n,r[1]),r[2]=zl(i,r[2]),r[3]=zl(s,r[3])}function Wg(r,e,t,n,i,s){return e=zl(zl(e,r),zl(n,s)),zl(e<<i|e>>>32-i,t)}function Ts(r,e,t,n,i,s,o){return Wg(e&t|~e&n,r,e,i,s,o)}function Ns(r,e,t,n,i,s,o){return Wg(e&n|t&~n,r,e,i,s,o)}function js(r,e,t,n,i,s,o){return Wg(e^t^n,r,e,i,s,o)}function Rs(r,e,t,n,i,s,o){return Wg(t^(e|~n),r,e,i,s,o)}function GE(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)v2(n,m$(r.substring(e-64,e)));r=r.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(v2(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,v2(n,i),n}function m$(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var n6="0123456789abcdef".split("");function g$(r){for(var e="",t=0;t<4;t++)e+=n6[r>>8*t+4&15]+n6[r>>8*t&15];return e}function y$(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function _b(r){return GE(r).map(y$).join("")}var b$=function(r){for(var e=0;e<r.length;e++)r[e]=g$(r[e]);return r.join("")}(GE("hello"))!="5d41402abc4b2a76b9719d911017c592";function zl(r,e){if(b$){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function xb(r,e){var t,n,i,s;if(r!==t){for(var o=(i=r,s=1+(256/r.length|0),new Array(s+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var a=0;for(c=0;c<256;c++){var u=l[c];a=(a+u+o.charCodeAt(c))%256,l[c]=l[a],l[a]=u}t=r,n=l}else l=n;var d=e.length,f=0,h=0,m="";for(c=0;c<d;c++)h=(h+(u=l[f=(f+1)%256]))%256,l[f]=l[h],l[h]=u,o=l[(l[f]+l[h])%256],m+=String.fromCharCode(e.charCodeAt(c)^o);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var i6={print:4,modify:8,copy:16,"annot-forms":32};function Nu(r,e,t,n){this.v=1,this.r=2;var i=192;r.forEach(function(l){if(i6.perm!==void 0)throw new Error("Invalid permission: "+l);i+=i6[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=_b(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=xb(this.encryptionKey,this.padding)}function ju(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var i=r.charCodeAt(n);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):r[n]}return e}function s6(r){if(Un(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,typeof t!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[n,!!i],s},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var o=e[t][s];try{o[0].apply(r,n)}catch(l){Qr.console&&Xn.error("jsPDF PubSub Error",l.message,l)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function V0(r){if(!(this instanceof V0))return new V0(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function KE(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function Oc(r,e,t,n,i){if(!(this instanceof Oc))return new Oc(r,e,t,n,i);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,KE.call(this,n,i)}function qu(r,e,t,n,i){if(!(this instanceof qu))return new qu(r,e,t,n,i);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,KE.call(this,n,i)}function Tr(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],o=[],l=1,c=16,a="S",u=null;Un(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,i=r.format||i,s=r.compress||r.compressPdf||s,(u=r.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(c=r.floatPrecision),a=r.defaultPathOperation||"S"),o=r.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",t=(""+(t||"P")).toLowerCase();var d=r.putOnlyUsedFonts||!1,f={},h={internal:{},__private__:{}};h.__private__.PubSub=s6;var m="1.3",g=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(Y){m=Y};var p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return p};var y=h.__private__.getPageFormat=function(Y){return p[Y]};i=i||"a4";var b="compat",v="advanced",E=b;function M(){this.saveGraphicsState(),re(new Ft(St,0,0,-St,0,Hn()*St).toString()+" cm"),this.setFontSize(this.getFontSize()/St),a="n",E=v}function W(){this.restoreGraphicsState(),a="S",E=b}var $=h.__private__.combineFontStyleAndFontWeight=function(Y,ce){if(Y=="bold"&&ce=="normal"||Y=="bold"&&ce==400||Y=="normal"&&ce=="italic"||Y=="bold"&&ce=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ce&&(Y=ce==400||ce==="normal"?Y==="italic"?"italic":"normal":ce!=700&&ce!=="bold"||Y!=="normal"?(ce==700?"bold":ce)+""+Y:"bold"),Y};h.advancedAPI=function(Y){var ce=E===b;return ce&&M.call(this),typeof Y!="function"||(Y(this),ce&&W.call(this)),this},h.compatAPI=function(Y){var ce=E===v;return ce&&W.call(this),typeof Y!="function"||(Y(this),ce&&M.call(this)),this},h.isAdvancedAPI=function(){return E===v};var N,j=function(Y){if(E!==v)throw new Error(Y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=h.roundToPrecision=h.__private__.roundToPrecision=function(Y,ce){var je=e||ce;if(isNaN(Y)||isNaN(je))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Y.toFixed(je).replace(/0+$/,"")};N=h.hpf=h.__private__.hpf=typeof c=="number"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return F(Y,c)}:c==="smart"?function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return F(Y,Y>-1&&Y<1?16:5)}:function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.hpf");return F(Y,16)};var P=h.f2=h.__private__.f2=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f2");return F(Y,2)},L=h.__private__.f3=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.f3");return F(Y,3)},k=h.scale=h.__private__.scale=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.scale");return E===b?Y*St:E===v?Y:void 0},R=function(Y){return k(function(ce){return E===b?Hn()-ce:E===v?ce:void 0}(Y))};h.__private__.setPrecision=h.setPrecision=function(Y){typeof parseInt(Y,10)=="number"&&(e=parseInt(Y,10))};var C,_="00000000000000000000000000000000",x=h.__private__.getFileId=function(){return _},w=h.__private__.setFileId=function(Y){return _=Y!==void 0&&/^[a-fA-F0-9]{32}$/.test(Y)?Y.toUpperCase():_.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(an=new Nu(u.userPermissions,u.userPassword,u.ownerPassword,_)),_};h.setFileId=function(Y){return w(Y),this},h.getFileId=function(){return x()};var S=h.__private__.convertDateToPDFDate=function(Y){var ce=Y.getTimezoneOffset(),je=ce<0?"+":"-",$e=Math.floor(Math.abs(ce/60)),tt=Math.abs(ce%60),Nt=[je,K($e),"'",K(tt),"'"].join("");return["D:",Y.getFullYear(),K(Y.getMonth()+1),K(Y.getDate()),K(Y.getHours()),K(Y.getMinutes()),K(Y.getSeconds()),Nt].join("")},I=h.__private__.convertPDFDateToDate=function(Y){var ce=parseInt(Y.substr(2,4),10),je=parseInt(Y.substr(6,2),10)-1,$e=parseInt(Y.substr(8,2),10),tt=parseInt(Y.substr(10,2),10),Nt=parseInt(Y.substr(12,2),10),Vt=parseInt(Y.substr(14,2),10);return new Date(ce,je,$e,tt,Nt,Vt,0)},z=h.__private__.setCreationDate=function(Y){var ce;if(Y===void 0&&(Y=new Date),Y instanceof Date)ce=S(Y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ce=Y}return C=ce},A=h.__private__.getCreationDate=function(Y){var ce=C;return Y==="jsDate"&&(ce=I(C)),ce};h.setCreationDate=function(Y){return z(Y),this},h.getCreationDate=function(Y){return A(Y)};var H,K=h.__private__.padd2=function(Y){return("0"+parseInt(Y)).slice(-2)},J=h.__private__.padd2Hex=function(Y){return("00"+(Y=Y.toString())).substr(Y.length)},V=0,X=[],D=[],O=0,G=[],Z=[],ue=!1,te=D;h.__private__.setCustomOutputDestination=function(Y){ue=!0,te=Y};var oe=function(Y){ue||(te=Y)};h.__private__.resetCustomOutputDestination=function(){ue=!1,te=D};var re=h.__private__.out=function(Y){return Y=Y.toString(),O+=Y.length+1,te.push(Y),te},be=h.__private__.write=function(Y){return re(arguments.length===1?Y.toString():Array.prototype.join.call(arguments," "))},ie=h.__private__.getArrayBuffer=function(Y){for(var ce=Y.length,je=new ArrayBuffer(ce),$e=new Uint8Array(je);ce--;)$e[ce]=Y.charCodeAt(ce);return je},le=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return le};var ae=r.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(Y){return ae=E===v?Y/St:Y,this};var Se,ve=h.__private__.getFontSize=h.getFontSize=function(){return E===b?ae:ae*St},ke=r.R2L||!1;h.__private__.setR2L=h.setR2L=function(Y){return ke=Y,this},h.__private__.getR2L=h.getR2L=function(){return ke};var Ne,ze=h.__private__.setZoomMode=function(Y){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Y))Se=Y;else if(isNaN(Y)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(Y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Y+'" is not recognized.');Se=Y}else Se=parseInt(Y,10)};h.__private__.getZoomMode=function(){return Se};var we,De=h.__private__.setPageMode=function(Y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Y+'" is not recognized.');Ne=Y};h.__private__.getPageMode=function(){return Ne};var He=h.__private__.setLayoutMode=function(Y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Y+'" is not recognized.');we=Y};h.__private__.getLayoutMode=function(){return we},h.__private__.setDisplayMode=h.setDisplayMode=function(Y,ce,je){return ze(Y),He(ce),De(je),this};var We={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(Y){if(Object.keys(We).indexOf(Y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return We[Y]},h.__private__.getDocumentProperties=function(){return We},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(Y){for(var ce in We)We.hasOwnProperty(ce)&&Y[ce]&&(We[ce]=Y[ce]);return this},h.__private__.setDocumentProperty=function(Y,ce){if(Object.keys(We).indexOf(Y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return We[Y]=ce};var et,St,lt,At,ct,at={},wt={},ot=[],nt={},zt={},Lt={},Ct={},Ht=null,jt=0,Mt=[],Qt=new s6(h),Sr=r.hotfixes||[],lr={},pr={},jr=[],Ft=function Y(ce,je,$e,tt,Nt,Vt){if(!(this instanceof Y))return new Y(ce,je,$e,tt,Nt,Vt);isNaN(ce)&&(ce=1),isNaN(je)&&(je=0),isNaN($e)&&($e=0),isNaN(tt)&&(tt=1),isNaN(Nt)&&(Nt=0),isNaN(Vt)&&(Vt=0),this._matrix=[ce,je,$e,tt,Nt,Vt]};Object.defineProperty(Ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(Ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(Ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(Ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(Ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(Ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(Ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(Y){this._matrix[0]=Y}}),Object.defineProperty(Ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(Y){this._matrix[1]=Y}}),Object.defineProperty(Ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(Y){this._matrix[2]=Y}}),Object.defineProperty(Ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(Y){this._matrix[3]=Y}}),Object.defineProperty(Ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(Y){this._matrix[4]=Y}}),Object.defineProperty(Ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(Y){this._matrix[5]=Y}}),Object.defineProperty(Ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ft.prototype.join=function(Y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(Y)},Ft.prototype.multiply=function(Y){var ce=Y.sx*this.sx+Y.shy*this.shx,je=Y.sx*this.shy+Y.shy*this.sy,$e=Y.shx*this.sx+Y.sy*this.shx,tt=Y.shx*this.shy+Y.sy*this.sy,Nt=Y.tx*this.sx+Y.ty*this.shx+this.tx,Vt=Y.tx*this.shy+Y.ty*this.sy+this.ty;return new Ft(ce,je,$e,tt,Nt,Vt)},Ft.prototype.decompose=function(){var Y=this.sx,ce=this.shy,je=this.shx,$e=this.sy,tt=this.tx,Nt=this.ty,Vt=Math.sqrt(Y*Y+ce*ce),br=(Y/=Vt)*je+(ce/=Vt)*$e;je-=Y*br,$e-=ce*br;var Er=Math.sqrt(je*je+$e*$e);return br/=Er,Y*($e/=Er)<ce*(je/=Er)&&(Y=-Y,ce=-ce,br=-br,Vt=-Vt),{scale:new Ft(Vt,0,0,Er,0,0),translate:new Ft(1,0,0,1,tt,Nt),rotate:new Ft(Y,ce,-ce,Y,0,0),skew:new Ft(1,0,br,1,0,0)}},Ft.prototype.toString=function(Y){return this.join(" ")},Ft.prototype.inversed=function(){var Y=this.sx,ce=this.shy,je=this.shx,$e=this.sy,tt=this.tx,Nt=this.ty,Vt=1/(Y*$e-ce*je),br=$e*Vt,Er=-ce*Vt,$r=-je*Vt,Lr=Y*Vt;return new Ft(br,Er,$r,Lr,-br*tt-$r*Nt,-Er*tt-Lr*Nt)},Ft.prototype.applyToPoint=function(Y){var ce=Y.x*this.sx+Y.y*this.shx+this.tx,je=Y.x*this.shy+Y.y*this.sy+this.ty;return new Yt(ce,je)},Ft.prototype.applyToRectangle=function(Y){var ce=this.applyToPoint(Y),je=this.applyToPoint(new Yt(Y.x+Y.w,Y.y+Y.h));return new dr(ce.x,ce.y,je.x-ce.x,je.y-ce.y)},Ft.prototype.clone=function(){var Y=this.sx,ce=this.shy,je=this.shx,$e=this.sy,tt=this.tx,Nt=this.ty;return new Ft(Y,ce,je,$e,tt,Nt)},h.Matrix=Ft;var zr=h.matrixMult=function(Y,ce){return ce.multiply(Y)},Rr=new Ft(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Rr;var mr=function(Y,ce){if(!zt[Y]){var je=(ce instanceof Oc?"Sh":"P")+(Object.keys(nt).length+1).toString(10);ce.id=je,zt[Y]=je,nt[je]=ce,Qt.publish("addPattern",ce)}};h.ShadingPattern=Oc,h.TilingPattern=qu,h.addShadingPattern=function(Y,ce){return j("addShadingPattern()"),mr(Y,ce),this},h.beginTilingPattern=function(Y){j("beginTilingPattern()"),fn(Y.boundingBox[0],Y.boundingBox[1],Y.boundingBox[2]-Y.boundingBox[0],Y.boundingBox[3]-Y.boundingBox[1],Y.matrix)},h.endTilingPattern=function(Y,ce){j("endTilingPattern()"),ce.stream=Z[H].join(`
`),mr(Y,ce),Qt.publish("endTilingPattern",ce),jr.pop().restore()};var Ue,Ye=h.__private__.newObject=function(){var Y=Xe();return Le(Y,!0),Y},Xe=h.__private__.newObjectDeferred=function(){return V++,X[V]=function(){return O},V},Le=function(Y,ce){return ce=typeof ce=="boolean"&&ce,X[Y]=O,ce&&re(Y+" 0 obj"),Y},Fe=h.__private__.newAdditionalObject=function(){var Y={objId:Xe(),content:""};return G.push(Y),Y},Ke=Xe(),pe=Xe(),Te=h.__private__.decodeColorString=function(Y){var ce=Y.split(" ");if(ce.length!==2||ce[1]!=="g"&&ce[1]!=="G")ce.length!==5||ce[4]!=="k"&&ce[4]!=="K"||(ce=[(1-ce[0])*(1-ce[3]),(1-ce[1])*(1-ce[3]),(1-ce[2])*(1-ce[3]),"r"]);else{var je=parseFloat(ce[0]);ce=[je,je,je,"r"]}for(var $e="#",tt=0;tt<3;tt++)$e+=("0"+Math.floor(255*parseFloat(ce[tt])).toString(16)).slice(-2);return $e},Ze=h.__private__.encodeColorString=function(Y){var ce;typeof Y=="string"&&(Y={ch1:Y});var je=Y.ch1,$e=Y.ch2,tt=Y.ch3,Nt=Y.ch4,Vt=Y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof je=="string"&&je.charAt(0)!=="#"){var br=new HE(je);if(br.ok)je=br.toHex();else if(!/^\d*\.?\d*$/.test(je))throw new Error('Invalid color "'+je+'" passed to jsPDF.encodeColorString.')}if(typeof je=="string"&&/^#[0-9A-Fa-f]{3}$/.test(je)&&(je="#"+je[1]+je[1]+je[2]+je[2]+je[3]+je[3]),typeof je=="string"&&/^#[0-9A-Fa-f]{6}$/.test(je)){var Er=parseInt(je.substr(1),16);je=Er>>16&255,$e=Er>>8&255,tt=255&Er}if($e===void 0||Nt===void 0&&je===$e&&$e===tt)ce=typeof je=="string"?je+" "+Vt[0]:Y.precision===2?P(je/255)+" "+Vt[0]:L(je/255)+" "+Vt[0];else if(Nt===void 0||Un(Nt)==="object"){if(Nt&&!isNaN(Nt.a)&&Nt.a===0)return["1.","1.","1.",Vt[1]].join(" ");ce=typeof je=="string"?[je,$e,tt,Vt[1]].join(" "):Y.precision===2?[P(je/255),P($e/255),P(tt/255),Vt[1]].join(" "):[L(je/255),L($e/255),L(tt/255),Vt[1]].join(" ")}else ce=typeof je=="string"?[je,$e,tt,Nt,Vt[2]].join(" "):Y.precision===2?[P(je),P($e),P(tt),P(Nt),Vt[2]].join(" "):[L(je),L($e),L(tt),L(Nt),Vt[2]].join(" ");return ce},ut=h.__private__.getFilters=function(){return o},he=h.__private__.putStream=function(Y){var ce=(Y=Y||{}).data||"",je=Y.filters||ut(),$e=Y.alreadyAppliedFilters||[],tt=Y.addLength1||!1,Nt=ce.length,Vt=Y.objectId,br=function(ee){return ee};if(u!==null&&Vt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(br=an.encryptor(Vt,0));var Er={};je===!0&&(je=["FlateEncode"]);var $r=Y.additionalKeyValues||[],Lr=(Er=Tr.API.processDataByFilters!==void 0?Tr.API.processDataByFilters(ce,je):{data:ce,reverseChain:[]}).reverseChain+(Array.isArray($e)?$e.join(" "):$e.toString());if(Er.data.length!==0&&($r.push({key:"Length",value:Er.data.length}),tt===!0&&$r.push({key:"Length1",value:Nt})),Lr.length!=0)if(Lr.split("/").length-1==1)$r.push({key:"Filter",value:Lr});else{$r.push({key:"Filter",value:"["+Lr+"]"});for(var vn=0;vn<$r.length;vn+=1)if($r[vn].key==="DecodeParms"){for(var Qn=[],Gn=0;Gn<Er.reverseChain.split("/").length-1;Gn+=1)Qn.push("null");Qn.push($r[vn].value),$r[vn].value="["+Qn.join(" ")+"]"}}re("<<");for(var U=0;U<$r.length;U++)re("/"+$r[U].key+" "+$r[U].value);re(">>"),Er.data.length!==0&&(re("stream"),re(br(Er.data)),re("endstream"))},Ce=h.__private__.putPage=function(Y){var ce=Y.number,je=Y.data,$e=Y.objId,tt=Y.contentsObjId;Le($e,!0),re("<</Type /Page"),re("/Parent "+Y.rootDictionaryObjId+" 0 R"),re("/Resources "+Y.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat(N(Y.mediaBox.bottomLeftX))+" "+parseFloat(N(Y.mediaBox.bottomLeftY))+" "+N(Y.mediaBox.topRightX)+" "+N(Y.mediaBox.topRightY)+"]"),Y.cropBox!==null&&re("/CropBox ["+N(Y.cropBox.bottomLeftX)+" "+N(Y.cropBox.bottomLeftY)+" "+N(Y.cropBox.topRightX)+" "+N(Y.cropBox.topRightY)+"]"),Y.bleedBox!==null&&re("/BleedBox ["+N(Y.bleedBox.bottomLeftX)+" "+N(Y.bleedBox.bottomLeftY)+" "+N(Y.bleedBox.topRightX)+" "+N(Y.bleedBox.topRightY)+"]"),Y.trimBox!==null&&re("/TrimBox ["+N(Y.trimBox.bottomLeftX)+" "+N(Y.trimBox.bottomLeftY)+" "+N(Y.trimBox.topRightX)+" "+N(Y.trimBox.topRightY)+"]"),Y.artBox!==null&&re("/ArtBox ["+N(Y.artBox.bottomLeftX)+" "+N(Y.artBox.bottomLeftY)+" "+N(Y.artBox.topRightX)+" "+N(Y.artBox.topRightY)+"]"),typeof Y.userUnit=="number"&&Y.userUnit!==1&&re("/UserUnit "+Y.userUnit),Qt.publish("putPage",{objId:$e,pageContext:Mt[ce],pageNumber:ce,page:je}),re("/Contents "+tt+" 0 R"),re(">>"),re("endobj");var Nt=je.join(`
`);return E===v&&(Nt+=`
Q`),Le(tt,!0),he({data:Nt,filters:ut(),objectId:tt}),re("endobj"),$e},Ve=h.__private__.putPages=function(){var Y,ce,je=[];for(Y=1;Y<=jt;Y++)Mt[Y].objId=Xe(),Mt[Y].contentsObjId=Xe();for(Y=1;Y<=jt;Y++)je.push(Ce({number:Y,data:Z[Y],objId:Mt[Y].objId,contentsObjId:Mt[Y].contentsObjId,mediaBox:Mt[Y].mediaBox,cropBox:Mt[Y].cropBox,bleedBox:Mt[Y].bleedBox,trimBox:Mt[Y].trimBox,artBox:Mt[Y].artBox,userUnit:Mt[Y].userUnit,rootDictionaryObjId:Ke,resourceDictionaryObjId:pe}));Le(Ke,!0),re("<</Type /Pages");var $e="/Kids [";for(ce=0;ce<jt;ce++)$e+=je[ce]+" 0 R ";re($e+"]"),re("/Count "+jt),re(">>"),re("endobj"),Qt.publish("postPutPages")},Be=function(Y){Qt.publish("putFont",{font:Y,out:re,newObject:Ye,putStream:he}),Y.isAlreadyPutted!==!0&&(Y.objectNumber=Ye(),re("<<"),re("/Type /Font"),re("/BaseFont /"+ju(Y.postScriptName)),re("/Subtype /Type1"),typeof Y.encoding=="string"&&re("/Encoding /"+Y.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},st=function(Y){Y.objectNumber=Ye();var ce=[];ce.push({key:"Type",value:"/XObject"}),ce.push({key:"Subtype",value:"/Form"}),ce.push({key:"BBox",value:"["+[N(Y.x),N(Y.y),N(Y.x+Y.width),N(Y.y+Y.height)].join(" ")+"]"}),ce.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"});var je=Y.pages[1].join(`
`);he({data:je,additionalKeyValues:ce,objectId:Y.objectNumber}),re("endobj")},Ge=function(Y,ce){ce||(ce=21);var je=Ye(),$e=function(Vt,br){var Er,$r=[],Lr=1/(br-1);for(Er=0;Er<1;Er+=Lr)$r.push(Er);if($r.push(1),Vt[0].offset!=0){var vn={offset:0,color:Vt[0].color};Vt.unshift(vn)}if(Vt[Vt.length-1].offset!=1){var Qn={offset:1,color:Vt[Vt.length-1].color};Vt.push(Qn)}for(var Gn="",U=0,ee=0;ee<$r.length;ee++){for(Er=$r[ee];Er>Vt[U+1].offset;)U++;var se=Vt[U].offset,xe=(Er-se)/(Vt[U+1].offset-se),ht=Vt[U].color,bt=Vt[U+1].color;Gn+=J(Math.round((1-xe)*ht[0]+xe*bt[0]).toString(16))+J(Math.round((1-xe)*ht[1]+xe*bt[1]).toString(16))+J(Math.round((1-xe)*ht[2]+xe*bt[2]).toString(16))}return Gn.trim()}(Y.colors,ce),tt=[];tt.push({key:"FunctionType",value:"0"}),tt.push({key:"Domain",value:"[0.0 1.0]"}),tt.push({key:"Size",value:"["+ce+"]"}),tt.push({key:"BitsPerSample",value:"8"}),tt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),tt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),he({data:$e,additionalKeyValues:tt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:je}),re("endobj"),Y.objectNumber=Ye(),re("<< /ShadingType "+Y.type),re("/ColorSpace /DeviceRGB");var Nt="/Coords ["+N(parseFloat(Y.coords[0]))+" "+N(parseFloat(Y.coords[1]))+" ";Y.type===2?Nt+=N(parseFloat(Y.coords[2]))+" "+N(parseFloat(Y.coords[3])):Nt+=N(parseFloat(Y.coords[2]))+" "+N(parseFloat(Y.coords[3]))+" "+N(parseFloat(Y.coords[4]))+" "+N(parseFloat(Y.coords[5])),re(Nt+="]"),Y.matrix&&re("/Matrix ["+Y.matrix.toString()+"]"),re("/Function "+je+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},pt=function(Y,ce){var je=Xe(),$e=Ye();ce.push({resourcesOid:je,objectOid:$e}),Y.objectNumber=$e;var tt=[];tt.push({key:"Type",value:"/Pattern"}),tt.push({key:"PatternType",value:"1"}),tt.push({key:"PaintType",value:"1"}),tt.push({key:"TilingType",value:"1"}),tt.push({key:"BBox",value:"["+Y.boundingBox.map(N).join(" ")+"]"}),tt.push({key:"XStep",value:N(Y.xStep)}),tt.push({key:"YStep",value:N(Y.yStep)}),tt.push({key:"Resources",value:je+" 0 R"}),Y.matrix&&tt.push({key:"Matrix",value:"["+Y.matrix.toString()+"]"}),he({data:Y.stream,additionalKeyValues:tt,objectId:Y.objectNumber}),re("endobj")},de=function(Y){for(var ce in Y.objectNumber=Ye(),re("<<"),Y)switch(ce){case"opacity":re("/ca "+P(Y[ce]));break;case"stroke-opacity":re("/CA "+P(Y[ce]))}re(">>"),re("endobj")},Me=function(Y){Le(Y.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var ce in re("/Font <<"),at)at.hasOwnProperty(ce)&&(d===!1||d===!0&&f.hasOwnProperty(ce))&&re("/"+ce+" "+at[ce].objectNumber+" 0 R");re(">>")}(),function(){if(Object.keys(nt).length>0){for(var ce in re("/Shading <<"),nt)nt.hasOwnProperty(ce)&&nt[ce]instanceof Oc&&nt[ce].objectNumber>=0&&re("/"+ce+" "+nt[ce].objectNumber+" 0 R");Qt.publish("putShadingPatternDict"),re(">>")}}(),function(ce){if(Object.keys(nt).length>0){for(var je in re("/Pattern <<"),nt)nt.hasOwnProperty(je)&&nt[je]instanceof h.TilingPattern&&nt[je].objectNumber>=0&&nt[je].objectNumber<ce&&re("/"+je+" "+nt[je].objectNumber+" 0 R");Qt.publish("putTilingPatternDict"),re(">>")}}(Y.objectOid),function(){if(Object.keys(Lt).length>0){var ce;for(ce in re("/ExtGState <<"),Lt)Lt.hasOwnProperty(ce)&&Lt[ce].objectNumber>=0&&re("/"+ce+" "+Lt[ce].objectNumber+" 0 R");Qt.publish("putGStateDict"),re(">>")}}(),function(){for(var ce in re("/XObject <<"),lr)lr.hasOwnProperty(ce)&&lr[ce].objectNumber>=0&&re("/"+ce+" "+lr[ce].objectNumber+" 0 R");Qt.publish("putXobjectDict"),re(">>")}(),re(">>"),re("endobj")},Oe=function(Y){wt[Y.fontName]=wt[Y.fontName]||{},wt[Y.fontName][Y.fontStyle]=Y.id},it=function(Y,ce,je,$e,tt){var Nt={id:"F"+(Object.keys(at).length+1).toString(10),postScriptName:Y,fontName:ce,fontStyle:je,encoding:$e,isStandardFont:tt||!1,metadata:{}};return Qt.publish("addFont",{font:Nt,instance:this}),at[Nt.id]=Nt,Oe(Nt),Nt.id},vt=h.__private__.pdfEscape=h.pdfEscape=function(Y,ce){return function(je,$e){var tt,Nt,Vt,br,Er,$r,Lr,vn,Qn;if(Vt=($e=$e||{}).sourceEncoding||"Unicode",Er=$e.outputEncoding,($e.autoencode||Er)&&at[et].metadata&&at[et].metadata[Vt]&&at[et].metadata[Vt].encoding&&(br=at[et].metadata[Vt].encoding,!Er&&at[et].encoding&&(Er=at[et].encoding),!Er&&br.codePages&&(Er=br.codePages[0]),typeof Er=="string"&&(Er=br[Er]),Er)){for(Lr=!1,$r=[],tt=0,Nt=je.length;tt<Nt;tt++)(vn=Er[je.charCodeAt(tt)])?$r.push(String.fromCharCode(vn)):$r.push(je[tt]),$r[tt].charCodeAt(0)>>8&&(Lr=!0);je=$r.join("")}for(tt=je.length;Lr===void 0&&tt!==0;)je.charCodeAt(tt-1)>>8&&(Lr=!0),tt--;if(!Lr)return je;for($r=$e.noBOM?[]:[254,255],tt=0,Nt=je.length;tt<Nt;tt++){if((Qn=(vn=je.charCodeAt(tt))>>8)>>8)throw new Error("Character at position "+tt+" of string '"+je+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");$r.push(Qn),$r.push(vn-(Qn<<8))}return String.fromCharCode.apply(void 0,$r)}(Y,ce).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},It=h.__private__.beginPage=function(Y){Z[++jt]=[],Mt[jt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Y[0]),topRightY:Number(Y[1])}},Zt(jt),oe(Z[H])},kt=function(Y,ce){var je,$e,tt;switch(t=ce||t,typeof Y=="string"&&(je=y(Y.toLowerCase()),Array.isArray(je)&&($e=je[0],tt=je[1])),Array.isArray(Y)&&($e=Y[0]*St,tt=Y[1]*St),isNaN($e)&&($e=i[0],tt=i[1]),($e>14400||tt>14400)&&(Xn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),$e=Math.min(14400,$e),tt=Math.min(14400,tt)),i=[$e,tt],t.substr(0,1)){case"l":tt>$e&&(i=[tt,$e]);break;case"p":$e>tt&&(i=[tt,$e])}It(i),tr(kr),re(Tn),li!==0&&re(li+" J"),Nr!==0&&re(Nr+" j"),Qt.publish("addPage",{pageNumber:jt})},ir=function(Y){Y>0&&Y<=jt&&(Z.splice(Y,1),Mt.splice(Y,1),jt--,H>jt&&(H=jt),this.setPage(H))},Zt=function(Y){Y>0&&Y<=jt&&(H=Y)},qt=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return Z.length-1},Ut=function(Y,ce,je){var $e,tt=void 0;return je=je||{},Y=Y!==void 0?Y:at[et].fontName,ce=ce!==void 0?ce:at[et].fontStyle,$e=Y.toLowerCase(),wt[$e]!==void 0&&wt[$e][ce]!==void 0?tt=wt[$e][ce]:wt[Y]!==void 0&&wt[Y][ce]!==void 0?tt=wt[Y][ce]:je.disableWarning===!1&&Xn.warn("Unable to look up font label for font '"+Y+"', '"+ce+"'. Refer to getFontList() for available fonts."),tt||je.noFallback||(tt=wt.times[ce])==null&&(tt=wt.times.normal),tt},sr=h.__private__.putInfo=function(){var Y=Ye(),ce=function($e){return $e};for(var je in u!==null&&(ce=an.encryptor(Y,0)),re("<<"),re("/Producer ("+vt(ce("jsPDF "+Tr.version))+")"),We)We.hasOwnProperty(je)&&We[je]&&re("/"+je.substr(0,1).toUpperCase()+je.substr(1)+" ("+vt(ce(We[je]))+")");re("/CreationDate ("+vt(ce(C))+")"),re(">>"),re("endobj")},rr=h.__private__.putCatalog=function(Y){var ce=(Y=Y||{}).rootDictionaryObjId||Ke;switch(Ye(),re("<<"),re("/Type /Catalog"),re("/Pages "+ce+" 0 R"),Se||(Se="fullwidth"),Se){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var je=""+Se;je.substr(je.length-1)==="%"&&(Se=parseInt(Se)/100),typeof Se=="number"&&re("/OpenAction [3 0 R /XYZ null null "+P(Se)+"]")}switch(we||(we="continuous"),we){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}Ne&&re("/PageMode /"+Ne),Qt.publish("putCatalog"),re(">>"),re("endobj")},ur=h.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(V+1)),re("/Root "+V+" 0 R"),re("/Info "+(V-1)+" 0 R"),u!==null&&re("/Encrypt "+an.oid+" 0 R"),re("/ID [ <"+_+"> <"+_+"> ]"),re(">>")},hr=h.__private__.putHeader=function(){re("%PDF-"+m),re("%")},Mr=h.__private__.putXRef=function(){var Y="0000000000";re("xref"),re("0 "+(V+1)),re("0000000000 65535 f ");for(var ce=1;ce<=V;ce++)typeof X[ce]=="function"?re((Y+X[ce]()).slice(-10)+" 00000 n "):X[ce]!==void 0?re((Y+X[ce]).slice(-10)+" 00000 n "):re("0000000000 00000 n ")},Yr=h.__private__.buildDocument=function(){var Y;V=0,O=0,D=[],X=[],G=[],Ke=Xe(),pe=Xe(),oe(D),Qt.publish("buildDocument"),hr(),Ve(),function(){Qt.publish("putAdditionalObjects");for(var je=0;je<G.length;je++){var $e=G[je];Le($e.objId,!0),re($e.content),re("endobj")}Qt.publish("postPutAdditionalObjects")}(),Y=[],function(){for(var je in at)at.hasOwnProperty(je)&&(d===!1||d===!0&&f.hasOwnProperty(je))&&Be(at[je])}(),function(){var je;for(je in Lt)Lt.hasOwnProperty(je)&&de(Lt[je])}(),function(){for(var je in lr)lr.hasOwnProperty(je)&&st(lr[je])}(),function(je){var $e;for($e in nt)nt.hasOwnProperty($e)&&(nt[$e]instanceof Oc?Ge(nt[$e]):nt[$e]instanceof qu&&pt(nt[$e],je))}(Y),Qt.publish("putResources"),Y.forEach(Me),Me({resourcesOid:pe,objectOid:Number.MAX_SAFE_INTEGER}),Qt.publish("postPutResources"),u!==null&&(an.oid=Ye(),re("<<"),re("/Filter /Standard"),re("/V "+an.v),re("/R "+an.r),re("/U <"+an.toHexString(an.U)+">"),re("/O <"+an.toHexString(an.O)+">"),re("/P "+an.P),re(">>"),re("endobj")),sr(),rr();var ce=O;return Mr(),ur(),re("startxref"),re(""+ce),re("%%EOF"),oe(Z[H]),D.join(`
`)},Br=h.__private__.getBlob=function(Y){return new Blob([ie(Y)],{type:"application/pdf"})},si=h.output=h.__private__.output=(Ue=function(Y,ce){switch(typeof(ce=ce||{})=="string"?ce={filename:ce}:ce.filename=ce.filename||"generated.pdf",Y){case void 0:return Yr();case"save":h.save(ce.filename);break;case"arraybuffer":return ie(Yr());case"blob":return Br(Yr());case"bloburi":case"bloburl":if(Qr.URL!==void 0&&typeof Qr.URL.createObjectURL=="function")return Qr.URL&&Qr.URL.createObjectURL(Br(Yr()))||void 0;Xn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var je="",$e=Yr();try{je=r6($e)}catch{je=r6(unescape(encodeURIComponent($e)))}return"data:application/pdf;filename="+ce.filename+";base64,"+je;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Qr)==="[object Window]"){var tt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Nt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ce.pdfObjectUrl&&(tt=ce.pdfObjectUrl,Nt="");var Vt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+tt+'"'+Nt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ce)+");<\/script></body></html>",br=Qr.open();return br!==null&&br.document.write(Vt),br}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Qr)==="[object Window]"){var Er='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ce.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ce.filename+'" width="500px" height="400px" /></body></html>',$r=Qr.open();if($r!==null){$r.document.write(Er);var Lr=this;$r.document.documentElement.querySelector("#pdfViewer").onload=function(){$r.document.title=ce.filename,$r.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Lr.output("bloburl"))}}return $r}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Qr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var vn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ce)+'"></iframe></body></html>',Qn=Qr.open();if(Qn!==null&&(Qn.document.write(vn),Qn.document.title=ce.filename),Qn||typeof safari>"u")return Qn;break;case"datauri":case"dataurl":return Qr.document.location.href=this.output("datauristring",ce);default:return null}},Ue.foo=function(){try{return Ue.apply(this,arguments)}catch(je){var Y=je.stack||"";~Y.indexOf(" at ")&&(Y=Y.split(" at ")[1]);var ce="Error in function "+Y.split(`
`)[0].split("<")[0]+": "+je.message;if(!Qr.console)throw new Error(ce);Qr.console.error(ce,je),Qr.alert&&alert(ce)}},Ue.foo.bar=Ue,Ue.foo),Zr=function(Y){return Array.isArray(Sr)===!0&&Sr.indexOf(Y)>-1};switch(n){case"pt":St=1;break;case"mm":St=72/25.4;break;case"cm":St=72/2.54;break;case"in":St=72;break;case"px":St=Zr("px_scaling")==1?.75:96/72;break;case"pc":case"em":St=12;break;case"ex":St=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);St=n}var an=null;z(),w();var Ln=h.__private__.getPageInfo=h.getPageInfo=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Mt[Y].objId,pageNumber:Y,pageContext:Mt[Y]}},Wr=h.__private__.getPageInfoByObjId=function(Y){if(isNaN(Y)||Y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ce in Mt)if(Mt[ce].objId===Y)break;return Ln(ce)},qr=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Mt[H].objId,pageNumber:H,pageContext:Mt[H]}};h.addPage=function(){return kt.apply(this,arguments),this},h.setPage=function(){return Zt.apply(this,arguments),oe.call(this,Z[H]),this},h.insertPage=function(Y){return this.addPage(),this.movePage(H,Y),this},h.movePage=function(Y,ce){var je,$e;if(Y>ce){je=Z[Y],$e=Mt[Y];for(var tt=Y;tt>ce;tt--)Z[tt]=Z[tt-1],Mt[tt]=Mt[tt-1];Z[ce]=je,Mt[ce]=$e,this.setPage(ce)}else if(Y<ce){je=Z[Y],$e=Mt[Y];for(var Nt=Y;Nt<ce;Nt++)Z[Nt]=Z[Nt+1],Mt[Nt]=Mt[Nt+1];Z[ce]=je,Mt[ce]=$e,this.setPage(ce)}return this},h.deletePage=function(){return ir.apply(this,arguments),this},h.__private__.text=h.text=function(Y,ce,je,$e,tt){var Nt,Vt,br,Er,$r,Lr,vn,Qn,Gn,U=($e=$e||{}).scope||this;if(typeof Y=="number"&&typeof ce=="number"&&(typeof je=="string"||Array.isArray(je))){var ee=je;je=ce,ce=Y,Y=ee}if(arguments[3]instanceof Ft==0?(br=arguments[4],Er=arguments[5],Un(vn=arguments[3])==="object"&&vn!==null||(typeof br=="string"&&(Er=br,br=null),typeof vn=="string"&&(Er=vn,vn=null),typeof vn=="number"&&(br=vn,vn=null),$e={flags:vn,angle:br,align:Er})):(j("The transform parameter of text() with a Matrix value"),Gn=tt),isNaN(ce)||isNaN(je)||Y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Y.length===0)return U;var se,xe="",ht=typeof $e.lineHeightFactor=="number"?$e.lineHeightFactor:Dt,bt=U.internal.scaleFactor;function Jt(Dn){return Dn=Dn.split("	").join(Array($e.TabLen||9).join(" ")),vt(Dn,vn)}function Jr(Dn){for(var Kn,Mi=Dn.concat(),Yi=[],Fa=Mi.length;Fa--;)typeof(Kn=Mi.shift())=="string"?Yi.push(Kn):Array.isArray(Dn)&&(Kn.length===1||Kn[1]===void 0&&Kn[2]===void 0)?Yi.push(Kn[0]):Yi.push([Kn[0],Kn[1],Kn[2]]);return Yi}function Jn(Dn,Kn){var Mi;if(typeof Dn=="string")Mi=Kn(Dn)[0];else if(Array.isArray(Dn)){for(var Yi,Fa,sf=Dn.concat(),vu=[],dp=sf.length;dp--;)typeof(Yi=sf.shift())=="string"?vu.push(Kn(Yi)[0]):Array.isArray(Yi)&&typeof Yi[0]=="string"&&(Fa=Kn(Yi[0],Yi[1],Yi[2]),vu.push([Fa[0],Fa[1],Fa[2]]));Mi=vu}return Mi}var wn=!1,Zn=!0;if(typeof Y=="string")wn=!0;else if(Array.isArray(Y)){var os=Y.concat();Vt=[];for(var Ss,ei=os.length;ei--;)(typeof(Ss=os.shift())!="string"||Array.isArray(Ss)&&typeof Ss[0]!="string")&&(Zn=!1);wn=Zn}if(wn===!1)throw new Error('Type of text must be string or Array. "'+Y+'" is not recognized.');typeof Y=="string"&&(Y=Y.match(/[\r?\n]/)?Y.split(/\r\n|\r|\n/g):[Y]);var ks=ae/U.internal.scaleFactor,Ao=ks*(ht-1);switch($e.baseline){case"bottom":je-=Ao;break;case"top":je+=ks-Ao;break;case"hanging":je+=ks-2*Ao;break;case"middle":je+=ks/2-Ao}if((Lr=$e.maxWidth||0)>0&&(typeof Y=="string"?Y=U.splitTextToSize(Y,Lr):Object.prototype.toString.call(Y)==="[object Array]"&&(Y=Y.reduce(function(Dn,Kn){return Dn.concat(U.splitTextToSize(Kn,Lr))},[]))),Nt={text:Y,x:ce,y:je,options:$e,mutex:{pdfEscape:vt,activeFontKey:et,fonts:at,activeFontSize:ae}},Qt.publish("preProcessText",Nt),Y=Nt.text,br=($e=Nt.options).angle,Gn instanceof Ft==0&&br&&typeof br=="number"){br*=Math.PI/180,$e.rotationDirection===0&&(br=-br),E===v&&(br=-br);var Oa=Math.cos(br),Xh=Math.sin(br);Gn=new Ft(Oa,Xh,-Xh,Oa,0,0)}else br&&br instanceof Ft&&(Gn=br);E!==v||Gn||(Gn=Rr),($r=$e.charSpace||ai)!==void 0&&(xe+=N(k($r))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Qn=$e.horizontalScale)!==void 0&&(xe+=N(100*Qn)+` Tz
`),$e.lang;var zs=-1,La=$e.renderingMode!==void 0?$e.renderingMode:$e.stroke,yu=U.internal.getCurrentPageInfo().pageContext;switch(La){case 0:case!1:case"fill":zs=0;break;case 1:case!0:case"stroke":zs=1;break;case 2:case"fillThenStroke":zs=2;break;case 3:case"invisible":zs=3;break;case 4:case"fillAndAddForClipping":zs=4;break;case 5:case"strokeAndAddPathForClipping":zs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":zs=6;break;case 7:case"addToPathForClipping":zs=7}var hp=yu.usedRenderingMode!==void 0?yu.usedRenderingMode:-1;zs!==-1?xe+=zs+` Tr
`:hp!==-1&&(xe+=`0 Tr
`),zs!==-1&&(yu.usedRenderingMode=zs),Er=$e.align||"left";var To,kc=ae*ht,Qh=U.internal.pageSize.getWidth(),Jh=at[et];$r=$e.charSpace||ai,Lr=$e.maxWidth||0,vn=Object.assign({autoencode:!0,noBOM:!0},$e.flags);var dl=[],Ec=function(Dn){return U.getStringUnitWidth(Dn,{font:Jh,charSpace:$r,fontSize:ae,doKerning:!1})*ae/bt};if(Object.prototype.toString.call(Y)==="[object Array]"){var co;Vt=Jr(Y),Er!=="left"&&(To=Vt.map(Ec));var uo,pl=0;if(Er==="right"){ce-=To[0],Y=[],ei=Vt.length;for(var Da=0;Da<ei;Da++)Da===0?(uo=Xr(ce),co=_r(je)):(uo=k(pl-To[Da]),co=-kc),Y.push([Vt[Da],uo,co]),pl=To[Da]}else if(Er==="center"){ce-=To[0]/2,Y=[],ei=Vt.length;for(var ml=0;ml<ei;ml++)ml===0?(uo=Xr(ce),co=_r(je)):(uo=k((pl-To[ml])/2),co=-kc),Y.push([Vt[ml],uo,co]),pl=To[ml]}else if(Er==="left"){Y=[],ei=Vt.length;for(var Zh=0;Zh<ei;Zh++)Y.push(Vt[Zh])}else if(Er==="justify"&&Jh.encoding==="Identity-H"){Y=[],ei=Vt.length,Lr=Lr!==0?Lr:Qh;for(var bu=0,Pi=0;Pi<ei;Pi++)if(co=Pi===0?_r(je):-kc,uo=Pi===0?Xr(ce):bu,Pi<ei-1){var fp=k((Lr-To[Pi])/(Vt[Pi].split(" ").length-1)),ca=Vt[Pi].split(" ");Y.push([ca[0]+" ",uo,co]),bu=0;for(var ua=1;ua<ca.length;ua++){var ef=(Ec(ca[ua-1]+" "+ca[ua])-Ec(ca[ua]))*bt+fp;ua==ca.length-1?Y.push([ca[ua],ef,0]):Y.push([ca[ua]+" ",ef,0]),bu-=ef}}else Y.push([Vt[Pi],uo,co]);Y.push(["",bu,0])}else{if(Er!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Y=[],ei=Vt.length,Lr=Lr!==0?Lr:Qh,Pi=0;Pi<ei;Pi++){co=Pi===0?_r(je):-kc,uo=Pi===0?Xr(ce):0;var tf=Vt[Pi].split(" ").length-1,rf=tf>0?(Lr-To[Pi])/tf:0;Pi<ei-1?dl.push(N(k(rf))):dl.push(0),Y.push([Vt[Pi],uo,co])}}}(typeof $e.R2L=="boolean"?$e.R2L:ke)===!0&&(Y=Jn(Y,function(Dn,Kn,Mi){return[Dn.split("").reverse().join(""),Kn,Mi]})),Nt={text:Y,x:ce,y:je,options:$e,mutex:{pdfEscape:vt,activeFontKey:et,fonts:at,activeFontSize:ae}},Qt.publish("postProcessText",Nt),Y=Nt.text,se=Nt.mutex.isHex||!1;var nf=at[et].encoding;nf!=="WinAnsiEncoding"&&nf!=="StandardEncoding"||(Y=Jn(Y,function(Dn,Kn,Mi){return[Jt(Dn),Kn,Mi]})),Vt=Jr(Y),Y=[];for(var gl,yl,bl,Cc=Array.isArray(Vt[0])?1:0,vl="",Ic=function(Dn,Kn,Mi){var Yi="";return Mi instanceof Ft?(Mi=typeof $e.angle=="number"?zr(Mi,new Ft(1,0,0,1,Dn,Kn)):zr(new Ft(1,0,0,1,Dn,Kn),Mi),E===v&&(Mi=zr(new Ft(1,0,0,-1,0,0),Mi)),Yi=Mi.join(" ")+` Tm
`):Yi=N(Dn)+" "+N(Kn)+` Td
`,Yi},No=0;No<Vt.length;No++){switch(vl="",Cc){case 1:bl=(se?"<":"(")+Vt[No][0]+(se?">":")"),gl=parseFloat(Vt[No][1]),yl=parseFloat(Vt[No][2]);break;case 0:bl=(se?"<":"(")+Vt[No]+(se?">":")"),gl=Xr(ce),yl=_r(je)}dl!==void 0&&dl[No]!==void 0&&(vl=dl[No]+` Tw
`),No===0?Y.push(vl+Ic(gl,yl,Gn)+bl):Cc===0?Y.push(vl+bl):Cc===1&&Y.push(vl+Ic(gl,yl,Gn)+bl)}Y=Cc===0?Y.join(` Tj
T* `):Y.join(` Tj
`),Y+=` Tj
`;var ha=`BT
/`;return ha+=et+" "+ae+` Tf
`,ha+=N(ae*ht)+` TL
`,ha+=$n+`
`,ha+=xe,ha+=Y,re(ha+="ET"),f[et]=!0,U};var ki=h.__private__.clip=h.clip=function(Y){return re(Y==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return ki("evenodd")},h.__private__.discardPath=h.discardPath=function(){return re("n"),this};var _t=h.__private__.isValidStyle=function(Y){var ce=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Y)!==-1&&(ce=!0),ce};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(Y){return _t(Y)&&(a=Y),this};var Et=h.__private__.getStyle=h.getStyle=function(Y){var ce=a;switch(Y){case"D":case"S":ce="S";break;case"F":ce="f";break;case"FD":case"DF":ce="B";break;case"f":case"f*":case"B":case"B*":ce=Y}return ce},Qe=h.close=function(){return re("h"),this};h.stroke=function(){return re("S"),this},h.fill=function(Y){return Ae("f",Y),this},h.fillEvenOdd=function(Y){return Ae("f*",Y),this},h.fillStroke=function(Y){return Ae("B",Y),this},h.fillStrokeEvenOdd=function(Y){return Ae("B*",Y),this};var Ae=function(Y,ce){Un(ce)==="object"?$t(ce,Y):re(Y)},Ee=function(Y){Y===null||E===v&&Y===void 0||(Y=Et(Y),re(Y))};function gt(Y,ce,je,$e,tt){var Nt=new qu(ce||this.boundingBox,je||this.xStep,$e||this.yStep,this.gState,tt||this.matrix);Nt.stream=this.stream;var Vt=Y+"$$"+this.cloneIndex+++"$$";return mr(Vt,Nt),Nt}var $t=function(Y,ce){var je=zt[Y.key],$e=nt[je];if($e instanceof Oc)re("q"),re(dt(ce)),$e.gState&&h.setGState($e.gState),re(Y.matrix.toString()+" cm"),re("/"+je+" sh"),re("Q");else if($e instanceof qu){var tt=new Ft(1,0,0,-1,0,Hn());Y.matrix&&(tt=tt.multiply(Y.matrix||Rr),je=gt.call($e,Y.key,Y.boundingBox,Y.xStep,Y.yStep,tt).id),re("q"),re("/Pattern cs"),re("/"+je+" scn"),$e.gState&&h.setGState($e.gState),re(ce),re("Q")}},dt=function(Y){switch(Y){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Tt=h.moveTo=function(Y,ce){return re(N(k(Y))+" "+N(R(ce))+" m"),this},er=h.lineTo=function(Y,ce){return re(N(k(Y))+" "+N(R(ce))+" l"),this},Ur=h.curveTo=function(Y,ce,je,$e,tt,Nt){return re([N(k(Y)),N(R(ce)),N(k(je)),N(R($e)),N(k(tt)),N(R(Nt)),"c"].join(" ")),this};h.__private__.line=h.line=function(Y,ce,je,$e,tt){if(isNaN(Y)||isNaN(ce)||isNaN(je)||isNaN($e)||!_t(tt))throw new Error("Invalid arguments passed to jsPDF.line");return E===b?this.lines([[je-Y,$e-ce]],Y,ce,[1,1],tt||"S"):this.lines([[je-Y,$e-ce]],Y,ce,[1,1]).stroke()},h.__private__.lines=h.lines=function(Y,ce,je,$e,tt,Nt){var Vt,br,Er,$r,Lr,vn,Qn,Gn,U,ee,se,xe;if(typeof Y=="number"&&(xe=je,je=ce,ce=Y,Y=xe),$e=$e||[1,1],Nt=Nt||!1,isNaN(ce)||isNaN(je)||!Array.isArray(Y)||!Array.isArray($e)||!_t(tt)||typeof Nt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Tt(ce,je),Vt=$e[0],br=$e[1],$r=Y.length,ee=ce,se=je,Er=0;Er<$r;Er++)(Lr=Y[Er]).length===2?(ee=Lr[0]*Vt+ee,se=Lr[1]*br+se,er(ee,se)):(vn=Lr[0]*Vt+ee,Qn=Lr[1]*br+se,Gn=Lr[2]*Vt+ee,U=Lr[3]*br+se,ee=Lr[4]*Vt+ee,se=Lr[5]*br+se,Ur(vn,Qn,Gn,U,ee,se));return Nt&&Qe(),Ee(tt),this},h.path=function(Y){for(var ce=0;ce<Y.length;ce++){var je=Y[ce],$e=je.c;switch(je.op){case"m":Tt($e[0],$e[1]);break;case"l":er($e[0],$e[1]);break;case"c":Ur.apply(this,$e);break;case"h":Qe()}}return this},h.__private__.rect=h.rect=function(Y,ce,je,$e,tt){if(isNaN(Y)||isNaN(ce)||isNaN(je)||isNaN($e)||!_t(tt))throw new Error("Invalid arguments passed to jsPDF.rect");return E===b&&($e=-$e),re([N(k(Y)),N(R(ce)),N(k(je)),N(k($e)),"re"].join(" ")),Ee(tt),this},h.__private__.triangle=h.triangle=function(Y,ce,je,$e,tt,Nt,Vt){if(isNaN(Y)||isNaN(ce)||isNaN(je)||isNaN($e)||isNaN(tt)||isNaN(Nt)||!_t(Vt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[je-Y,$e-ce],[tt-je,Nt-$e],[Y-tt,ce-Nt]],Y,ce,[1,1],Vt,!0),this},h.__private__.roundedRect=h.roundedRect=function(Y,ce,je,$e,tt,Nt,Vt){if(isNaN(Y)||isNaN(ce)||isNaN(je)||isNaN($e)||isNaN(tt)||isNaN(Nt)||!_t(Vt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var br=4/3*(Math.SQRT2-1);return tt=Math.min(tt,.5*je),Nt=Math.min(Nt,.5*$e),this.lines([[je-2*tt,0],[tt*br,0,tt,Nt-Nt*br,tt,Nt],[0,$e-2*Nt],[0,Nt*br,-tt*br,Nt,-tt,Nt],[2*tt-je,0],[-tt*br,0,-tt,-Nt*br,-tt,-Nt],[0,2*Nt-$e],[0,-Nt*br,tt*br,-Nt,tt,-Nt]],Y+tt,ce,[1,1],Vt,!0),this},h.__private__.ellipse=h.ellipse=function(Y,ce,je,$e,tt){if(isNaN(Y)||isNaN(ce)||isNaN(je)||isNaN($e)||!_t(tt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Nt=4/3*(Math.SQRT2-1)*je,Vt=4/3*(Math.SQRT2-1)*$e;return Tt(Y+je,ce),Ur(Y+je,ce-Vt,Y+Nt,ce-$e,Y,ce-$e),Ur(Y-Nt,ce-$e,Y-je,ce-Vt,Y-je,ce),Ur(Y-je,ce+Vt,Y-Nt,ce+$e,Y,ce+$e),Ur(Y+Nt,ce+$e,Y+je,ce+Vt,Y+je,ce),Ee(tt),this},h.__private__.circle=h.circle=function(Y,ce,je,$e){if(isNaN(Y)||isNaN(ce)||isNaN(je)||!_t($e))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Y,ce,je,je,$e)},h.setFont=function(Y,ce,je){return je&&(ce=$(ce,je)),et=Ut(Y,ce,{disableWarning:!1}),this};var pn=h.__private__.getFont=h.getFont=function(){return at[Ut.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var Y,ce,je={};for(Y in wt)if(wt.hasOwnProperty(Y))for(ce in je[Y]=[],wt[Y])wt[Y].hasOwnProperty(ce)&&je[Y].push(ce);return je},h.addFont=function(Y,ce,je,$e,tt){var Nt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Nt.indexOf(arguments[3])!==-1?tt=arguments[3]:arguments[3]&&Nt.indexOf(arguments[3])==-1&&(je=$(je,$e)),it.call(this,Y,ce,je,tt=tt||"Identity-H")};var Dt,kr=r.lineWidth||.200025,fr=h.__private__.getLineWidth=h.getLineWidth=function(){return kr},tr=h.__private__.setLineWidth=h.setLineWidth=function(Y){return kr=Y,re(N(k(Y))+" w"),this};h.__private__.setLineDash=Tr.API.setLineDash=Tr.API.setLineDashPattern=function(Y,ce){if(Y=Y||[],ce=ce||0,isNaN(ce)||!Array.isArray(Y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Y=Y.map(function(je){return N(k(je))}).join(" "),ce=N(k(ce)),re("["+Y+"] "+ce+" d"),this};var Vr=h.__private__.getLineHeight=h.getLineHeight=function(){return ae*Dt};h.__private__.getLineHeight=h.getLineHeight=function(){return ae*Dt};var Cr=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(Y){return typeof(Y=Y||1.15)=="number"&&(Dt=Y),this},or=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Dt};Cr(r.lineHeight);var Xr=h.__private__.getHorizontalCoordinate=function(Y){return k(Y)},_r=h.__private__.getVerticalCoordinate=function(Y){return E===v?Y:Mt[H].mediaBox.topRightY-Mt[H].mediaBox.bottomLeftY-k(Y)},_n=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(Y){return N(Xr(Y))},Gt=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(Y){return N(_r(Y))},Tn=r.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return Te(Tn)},h.__private__.setStrokeColor=h.setDrawColor=function(Y,ce,je,$e){return Tn=Ze({ch1:Y,ch2:ce,ch3:je,ch4:$e,pdfColorType:"draw",precision:2}),re(Tn),this};var di=r.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return Te(di)},h.__private__.setFillColor=h.setFillColor=function(Y,ce,je,$e){return di=Ze({ch1:Y,ch2:ce,ch3:je,ch4:$e,pdfColorType:"fill",precision:2}),re(di),this};var $n=r.textColor||"0 g",oi=h.__private__.getTextColor=h.getTextColor=function(){return Te($n)};h.__private__.setTextColor=h.setTextColor=function(Y,ce,je,$e){return $n=Ze({ch1:Y,ch2:ce,ch3:je,ch4:$e,pdfColorType:"text",precision:3}),this};var ai=r.charSpace,ss=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(ai||0)};h.__private__.setCharSpace=h.setCharSpace=function(Y){if(isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ai=Y,this};var li=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(Y){var ce=h.CapJoinStyles[Y];if(ce===void 0)throw new Error("Line cap style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return li=ce,re(ce+" J"),this};var Nr=0;h.__private__.setLineJoin=h.setLineJoin=function(Y){var ce=h.CapJoinStyles[Y];if(ce===void 0)throw new Error("Line join style of '"+Y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nr=ce,re(ce+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(Y){if(Y=Y||0,isNaN(Y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re(N(k(Y))+" M"),this},h.GState=V0,h.setGState=function(Y){(Y=typeof Y=="string"?Lt[Ct[Y]]:Hr(null,Y)).equals(Ht)||(re("/"+Y.id+" gs"),Ht=Y)};var Hr=function(Y,ce){if(!Y||!Ct[Y]){var je=!1;for(var $e in Lt)if(Lt.hasOwnProperty($e)&&Lt[$e].equals(ce)){je=!0;break}if(je)ce=Lt[$e];else{var tt="GS"+(Object.keys(Lt).length+1).toString(10);Lt[tt]=ce,ce.id=tt}return Y&&(Ct[Y]=ce.id),Qt.publish("addGState",ce),ce}};h.addGState=function(Y,ce){return Hr(Y,ce),this},h.saveGraphicsState=function(){return re("q"),ot.push({key:et,size:ae,color:$n}),this},h.restoreGraphicsState=function(){re("Q");var Y=ot.pop();return et=Y.key,ae=Y.size,$n=Y.color,Ht=null,this},h.setCurrentTransformationMatrix=function(Y){return re(Y.toString()+" cm"),this},h.comment=function(Y){return re("#"+Y),this};var Yt=function(Y,ce){var je=Y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return je},set:function(Nt){isNaN(Nt)||(je=parseFloat(Nt))}});var $e=ce||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return $e},set:function(Nt){isNaN(Nt)||($e=parseFloat(Nt))}});var tt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return tt},set:function(Nt){tt=Nt.toString()}}),this},dr=function(Y,ce,je,$e){Yt.call(this,Y,ce),this.type="rect";var tt=je||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return tt},set:function(Vt){isNaN(Vt)||(tt=parseFloat(Vt))}});var Nt=$e||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Nt},set:function(Vt){isNaN(Vt)||(Nt=parseFloat(Vt))}}),this},Or=function(){this.page=jt,this.currentPage=H,this.pages=Z.slice(0),this.pagesContext=Mt.slice(0),this.x=lt,this.y=At,this.matrix=ct,this.width=ln(H),this.height=ji(H),this.outputDestination=te,this.id="",this.objectNumber=-1};Or.prototype.restore=function(){jt=this.page,H=this.currentPage,Mt=this.pagesContext,Z=this.pages,lt=this.x,At=this.y,ct=this.matrix,pi(H,this.width),qn(H,this.height),te=this.outputDestination};var fn=function(Y,ce,je,$e,tt){jr.push(new Or),jt=H=0,Z=[],lt=Y,At=ce,ct=tt,It([je,$e])};for(var Dr in h.beginFormObject=function(Y,ce,je,$e,tt){return fn(Y,ce,je,$e,tt),this},h.endFormObject=function(Y){return function(ce){if(pr[ce])jr.pop().restore();else{var je=new Or,$e="Xo"+(Object.keys(lr).length+1).toString(10);je.id=$e,pr[ce]=$e,lr[$e]=je,Qt.publish("addFormObject",je),jr.pop().restore()}}(Y),this},h.doFormObject=function(Y,ce){var je=lr[pr[Y]];return re("q"),re(ce.toString()+" cm"),re("/"+je.id+" Do"),re("Q"),this},h.getFormObject=function(Y){var ce=lr[pr[Y]];return{x:ce.x,y:ce.y,width:ce.width,height:ce.height,matrix:ce.matrix}},h.save=function(Y,ce){return Y=Y||"generated.pdf",(ce=ce||{}).returnPromise=ce.returnPromise||!1,ce.returnPromise===!1?(Mc(Br(Yr()),Y),typeof Mc.unload=="function"&&Qr.setTimeout&&setTimeout(Mc.unload,911),this):new Promise(function(je,$e){try{var tt=Mc(Br(Yr()),Y);typeof Mc.unload=="function"&&Qr.setTimeout&&setTimeout(Mc.unload,911),je(tt)}catch(Nt){$e(Nt.message)}})},Tr.API)Tr.API.hasOwnProperty(Dr)&&(Dr==="events"&&Tr.API.events.length?function(Y,ce){var je,$e,tt;for(tt=ce.length-1;tt!==-1;tt--)je=ce[tt][0],$e=ce[tt][1],Y.subscribe.apply(Y,[je].concat(typeof $e=="function"?[$e]:$e))}(Qt,Tr.API.events):h[Dr]=Tr.API[Dr]);function ln(Y){return Mt[Y].mediaBox.topRightX-Mt[Y].mediaBox.bottomLeftX}function pi(Y,ce){Mt[Y].mediaBox.topRightX=ce+Mt[Y].mediaBox.bottomLeftX}function ji(Y){return Mt[Y].mediaBox.topRightY-Mt[Y].mediaBox.bottomLeftY}function qn(Y,ce){Mt[Y].mediaBox.topRightY=ce+Mt[Y].mediaBox.bottomLeftY}var mi=h.getPageWidth=function(Y){return ln(Y=Y||H)/St},Ri=h.setPageWidth=function(Y,ce){pi(Y,ce*St)},Hn=h.getPageHeight=function(Y){return ji(Y=Y||H)/St},Qs=h.setPageHeight=function(Y,ce){qn(Y,ce*St)};return h.internal={pdfEscape:vt,getStyle:Et,getFont:pn,getFontSize:ve,getCharSpace:ss,getTextColor:oi,getLineHeight:Vr,getLineHeightFactor:or,getLineWidth:fr,write:be,getHorizontalCoordinate:Xr,getVerticalCoordinate:_r,getCoordinateString:_n,getVerticalCoordinateString:Gt,collections:{},newObject:Ye,newAdditionalObject:Fe,newObjectDeferred:Xe,newObjectDeferredBegin:Le,getFilters:ut,putStream:he,events:Qt,scaleFactor:St,pageSize:{getWidth:function(){return mi(H)},setWidth:function(Y){Ri(H,Y)},getHeight:function(){return Hn(H)},setHeight:function(Y){Qs(H,Y)}},encryptionOptions:u,encryption:an,getEncryptor:function(Y){return u!==null?an.encryptor(Y,0):function(ce){return ce}},output:si,getNumberOfPages:qt,get pages(){return Z},out:re,f2:P,f3:L,getPageInfo:Ln,getPageInfoByObjId:Wr,getCurrentPageInfo:qr,getPDFVersion:g,Point:Yt,Rectangle:dr,Matrix:Ft,hasHotfix:Zr},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return mi(H)},set:function(Y){Ri(H,Y)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Hn(H)},set:function(Y){Qs(H,Y)},enumerable:!0,configurable:!0}),(function(Y){for(var ce=0,je=le.length;ce<je;ce++){var $e=it.call(this,Y[ce][0],Y[ce][1],Y[ce][2],le[ce][3],!0);d===!1&&(f[$e]=!0);var tt=Y[ce][0].split("-");Oe({id:$e,fontName:tt[0],fontStyle:tt[1]||""})}Qt.publish("addFonts",{fonts:at,dictionary:wt})}).call(h,le),et="F1",kt(i,t),Qt.publish("initialized"),h}Nu.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},Nu.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Nu.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},Nu.prototype.processOwnerPassword=function(r,e){return xb(_b(e).substr(0,5),r)},Nu.prototype.encryptor=function(r,e){var t=_b(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return xb(t,n)}},V0.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||Un(r)!==Un(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},Tr.API={events:[]},Tr.version="4.1.0";var Ii=Tr.API,G5=1,gu=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ku=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},$0=function(r){return r.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"#"+(t.length===1?"0"+t:t)})},tn=function(r){return r.toFixed(2)},Tl=function(r){return r.toFixed(5)};Ii.__acroform__={};var lo=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},o6=function(r){return r*G5},ga=function(r){var e=new XE,t=xr.internal.getHeight(r)||0,n=xr.internal.getWidth(r)||0;return e.BBox=[0,0,Number(tn(n)),Number(tn(t))],e},v$=Ii.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},w$=Ii.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},_$=Ii.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},Bi=Ii.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return _$(r,e-1)},zi=Ii.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return v$(r,e-1)},Ui=Ii.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return w$(r,e-1)},x$=Ii.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=r[0],s=r[1],o=r[2],l=r[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=t(i+o)||0,c.upperRight_Y=n(s)||0,[Number(tn(c.lowerLeft_X)),Number(tn(c.lowerLeft_Y)),Number(tn(c.upperRight_X)),Number(tn(c.upperRight_Y))]},S$=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=Sb(r,t),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+i+" "+tn(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=ga(r);return s.scope=r.scope,s.stream=e.join(`
`),s}},Sb=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=r.multiline?i.map(function(P){return P.split(`
`)}):i.map(function(P){return[P]});var s=t,o=xr.internal.getHeight(r)||0;o=o<0?-o:o;var l=xr.internal.getWidth(r)||0;l=l<0?-l:l;var c=function(P,L,k){if(P+1<i.length){var R=L+" "+i[P+1][0];return cm(R,r,k).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var a,u,d=cm("3",r,s).height,f=r.multiline?o-s:(o-d)/2,h=f+=2,m=0,g=0,p=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+cm(e,r,s=12).width+", FieldWidth:"+l+`
`;break}for(var y="",b=0,v=0;v<i.length;v++)if(i.hasOwnProperty(v)){var E=!1;if(i[v].length!==1&&p!==i[v].length-1){if((d+2)*(b+2)+2>o)continue e;y+=i[v][p],E=!0,g=v,v--}else{y=(y+=i[v][p]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var M=parseInt(v),W=c(M,y,s),$=v>=i.length-1;if(W&&!$){y+=" ",p=0;continue}if(W||$){if($)g=M;else if(r.multiline&&(d+2)*(b+2)+2>o)continue e}else{if(!r.multiline||(d+2)*(b+2)+2>o)continue e;g=M}}for(var N="",j=m;j<=g;j++){var F=i[j];if(r.multiline){if(j===g){N+=F[p]+" ",p=(p+1)%F.length;continue}if(j===m){N+=F[F.length-1]+" ";continue}}N+=F[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,u=cm(N,r,s).width,r.textAlign){case"right":a=l-u-2;break;case"center":a=(l-u)/2;break;default:a=2}e+=tn(a)+" "+tn(h)+` Td
`,e+="("+gu(N)+`) Tj
`,e+=-tn(a)+` 0 Td
`,h=-(s+2),u=0,m=E?g:g+1,b++,y=""}break}return n.text=e,n.fontSize=s,n},cm=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},k$={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},E$=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},C$=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(aa.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(k$)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");G5=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new QE,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&E$(s,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,i){var s=!n;for(var o in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],a=l.Rect;if(l.Rect&&(l.Rect=x$(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=xr.createDefaultAppearanceStream(l),Un(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=a,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=S$(l);c.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var d="";for(var f in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(f)){var h=l.appearanceStreamContent[f];if(d+="/"+f+" ",d+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var m=h[o];typeof m=="function"&&(m=m.call(i,l)),d+="/"+o+" "+m+" ",i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m)}}else typeof(m=h)=="function"&&(m=m.call(i,l)),d+="/"+o+" "+m,i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m);d+=">>"}c.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}s&&function(g,p){for(var y in g)if(g.hasOwnProperty(y)){var b=y,v=g[y];p.internal.newObjectDeferredBegin(v.objId,!0),Un(v)==="object"&&typeof v.putStream=="function"&&v.putStream(),delete g[b]}}(i.internal.acroformPlugin.xForms,i)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},YE=Ii.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(o){return o};if(Array.isArray(r)){for(var i="[",s=0;s<r.length;s++)switch(s!==0&&(i+=" "),Un(r[s])){case"boolean":case"number":case"object":i+=r[s].toString();break;case"string":r[s].substr(0,1)==="/"?i+="/"+$0(r[s].substr(1)):(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),i+="("+gu(n(r[s].toString()))+")")}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},w2=function(r,e,t){var n=function(i){return i};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+gu(n(r))+")"},Sa=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Sa.prototype.toString=function(){return this.objId+" 0 R"},Sa.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Sa.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:YE(i,this.objId,this.scope)}):i instanceof Sa?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var XE=function(){Sa.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};lo(XE,Sa);var QE=function(){Sa.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+gu(t(r))+")"}},set:function(t){r=t}})};lo(QE,Sa);var aa=function r(){Sa.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Bi(e,3)},set:function(y){y?this.F=zi(e,3):this.F=Ui(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');t=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof W0)return;s="FieldObject"+r.FieldNum++}var y=function(b){return b};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+gu(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var a=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return a===void 0?50/G5:a},set:function(y){a=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof W0||this instanceof Gc))return w2(d,this.objId,this.scope)},set:function(y){y=y.toString(),d=y}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof us==0?w2(f,this.objId,this.scope):f},set:function(y){y=y.toString(),f=this instanceof us==0?y.substr(0,1)==="("?ku(y.substr(1,y.length-2)):ku(y):y}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof us==1?ku(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof us==1?"/"+$0(y):y}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof us==0?w2(h,this.objId,this.scope):h},set:function(y){y=y.toString(),h=this instanceof us==0?y.substr(0,1)==="("?ku(y.substr(1,y.length-2)):ku(y):y}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof us==1?ku(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof us==1?"/"+$0(y):y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(y){y=!!y,g=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(y){m=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,1)},set:function(y){y?this.Ff=zi(this.Ff,1):this.Ff=Ui(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,2)},set:function(y){y?this.Ff=zi(this.Ff,2):this.Ff=Ui(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,3)},set:function(y){y?this.Ff=zi(this.Ff,3):this.Ff=Ui(this.Ff,3)}});var p=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(p!==null)return p},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');p=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(p){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:p=2;break;case"center":case 1:p=1;break;default:p=0}}})};lo(aa,Sa);var oh=function(){aa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return YE(e,this.objId,this.scope)},set:function(t){var n,i;i=[],typeof(n=t)=="string"&&(i=function(s,o,l){l||(l=1);for(var c,a=[];c=o.exec(s);)a.push(c[l]);return a}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,18)},set:function(t){t?this.Ff=zi(this.Ff,18):this.Ff=Ui(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=zi(this.Ff,19):this.Ff=Ui(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,20)},set:function(t){t?(this.Ff=zi(this.Ff,20),e.sort()):this.Ff=Ui(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,22)},set:function(t){t?this.Ff=zi(this.Ff,22):this.Ff=Ui(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,23)},set:function(t){t?this.Ff=zi(this.Ff,23):this.Ff=Ui(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,27)},set:function(t){t?this.Ff=zi(this.Ff,27):this.Ff=Ui(this.Ff,27)}}),this.hasAppearanceStream=!1};lo(oh,aa);var ah=function(){oh.call(this),this.fontName="helvetica",this.combo=!1};lo(ah,oh);var lh=function(){ah.call(this),this.combo=!0};lo(lh,ah);var Lm=function(){lh.call(this),this.edit=!0};lo(Lm,lh);var us=function(){aa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,15)},set:function(t){t?this.Ff=zi(this.Ff,15):this.Ff=Ui(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,16)},set:function(t){t?this.Ff=zi(this.Ff,16):this.Ff=Ui(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,17)},set:function(t){t?this.Ff=zi(this.Ff,17):this.Ff=Ui(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,26)},set:function(t){t?this.Ff=zi(this.Ff,26):this.Ff=Ui(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+gu(t(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Un(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+$0(t)}})};lo(us,aa);var Dm=function(){us.call(this),this.pushButton=!0};lo(Dm,us);var ch=function(){us.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};lo(ch,us);var W0=function(){var r,e;aa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+gu(i(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Un(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};lo(W0,aa),ch.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},ch.prototype.createOption=function(r){var e=new W0;return e.Parent=this,e.optionName=r,this.Kids.push(e),I$.call(this.scope,e),e};var Fm=function(){us.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xr.CheckBox.createAppearanceStream()};lo(Fm,us);var Gc=function(){aa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,13)},set:function(e){e?this.Ff=zi(this.Ff,13):this.Ff=Ui(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,21)},set:function(e){e?this.Ff=zi(this.Ff,21):this.Ff=Ui(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,23)},set:function(e){e?this.Ff=zi(this.Ff,23):this.Ff=Ui(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,24)},set:function(e){e?this.Ff=zi(this.Ff,24):this.Ff=Ui(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,25)},set:function(e){e?this.Ff=zi(this.Ff,25):this.Ff=Ui(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,26)},set:function(e){e?this.Ff=zi(this.Ff,26):this.Ff=Ui(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};lo(Gc,aa);var Bm=function(){Gc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Bi(this.Ff,14)},set:function(r){r?this.Ff=zi(this.Ff,14):this.Ff=Ui(this.Ff,14)}}),this.password=!0};lo(Bm,Gc);var xr={CheckBox:{createAppearanceStream:function(){return{N:{On:xr.CheckBox.YesNormal},D:{On:xr.CheckBox.YesPushDown,Off:xr.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=ga(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),s=Sb(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+tn(xr.internal.getWidth(r))+" "+tn(xr.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+tn(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=ga(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],s=xr.internal.getHeight(r),o=xr.internal.getWidth(r),l=Sb(r,r.caption);return i.push("1 g"),i.push("0 0 "+tn(o)+" "+tn(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+tn(o-1)+" "+tn(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+tn(l.fontSize)+" Tf "+n),i.push(l.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(r){var e=ga(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+tn(xr.internal.getWidth(r))+" "+tn(xr.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:xr.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=xr.RadioButton.Circle.YesNormal,e.D[r]=xr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=ga(r);e.scope=r.scope;var t=[],n=xr.internal.getWidth(r)<=xr.internal.getHeight(r)?xr.internal.getWidth(r)/4:xr.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=xr.internal.Bezier_C,s=Number((n*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Tl(xr.internal.getWidth(r)/2)+" "+Tl(xr.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),t.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),t.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),t.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=ga(r);e.scope=r.scope;var t=[],n=xr.internal.getWidth(r)<=xr.internal.getHeight(r)?xr.internal.getWidth(r)/4:xr.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*xr.internal.Bezier_C).toFixed(5)),o=Number((n*xr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Tl(xr.internal.getWidth(r)/2)+" "+Tl(xr.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Tl(xr.internal.getWidth(r)/2)+" "+Tl(xr.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),t.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),t.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),t.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=ga(r);e.scope=r.scope;var t=[],n=xr.internal.getWidth(r)<=xr.internal.getHeight(r)?xr.internal.getWidth(r)/4:xr.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*xr.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Tl(xr.internal.getWidth(r)/2)+" "+Tl(xr.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:xr.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=xr.RadioButton.Cross.YesNormal,e.D[r]=xr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=ga(r);e.scope=r.scope;var t=[],n=xr.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+tn(xr.internal.getWidth(r)-2)+" "+tn(xr.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(tn(n.x1.x)+" "+tn(n.x1.y)+" m"),t.push(tn(n.x2.x)+" "+tn(n.x2.y)+" l"),t.push(tn(n.x4.x)+" "+tn(n.x4.y)+" m"),t.push(tn(n.x3.x)+" "+tn(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=ga(r);e.scope=r.scope;var t=xr.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+tn(xr.internal.getWidth(r))+" "+tn(xr.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+tn(xr.internal.getWidth(r)-2)+" "+tn(xr.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(tn(t.x1.x)+" "+tn(t.x1.y)+" m"),n.push(tn(t.x2.x)+" "+tn(t.x2.y)+" l"),n.push(tn(t.x4.x)+" "+tn(t.x4.y)+" m"),n.push(tn(t.x3.x)+" "+tn(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=ga(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+tn(xr.internal.getWidth(r))+" "+tn(xr.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};xr.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=xr.internal.getWidth(r),t=xr.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},xr.internal.getWidth=function(r){var e=0;return Un(r)==="object"&&(e=o6(r.Rect[2])),e},xr.internal.getHeight=function(r){var e=0;return Un(r)==="object"&&(e=o6(r.Rect[3])),e};var I$=Ii.addField=function(r){if(C$(this,r),!(r instanceof aa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Ii.AcroFormChoiceField=oh,Ii.AcroFormListBox=ah,Ii.AcroFormComboBox=lh,Ii.AcroFormEditBox=Lm,Ii.AcroFormButton=us,Ii.AcroFormPushButton=Dm,Ii.AcroFormRadioButton=ch,Ii.AcroFormCheckBox=Fm,Ii.AcroFormTextField=Gc,Ii.AcroFormPasswordField=Bm,Ii.AcroFormAppearance=xr,Ii.AcroForm={ChoiceField:oh,ListBox:ah,ComboBox:lh,EditBox:Lm,Button:us,PushButton:Dm,RadioButton:ch,CheckBox:Fm,TextField:Gc,PasswordField:Bm,Appearance:xr},Tr.AcroForm={ChoiceField:oh,ListBox:ah,ComboBox:lh,EditBox:Lm,Button:us,PushButton:Dm,RadioButton:ch,CheckBox:Fm,TextField:Gc,PasswordField:Bm,Appearance:xr};Tr.AcroForm;function JE(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=r.__addimage__.getImageFileTypeByImageData=function(P,L){var k,R,C,_,x,w=t;if((L=L||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(W(P))for(x in n)for(C=n[x],k=0;k<C.length;k+=1){for(_=!0,R=0;R<C[k].length;R+=1)if(C[k][R]!==void 0&&C[k][R]!==P[R]){_=!1;break}if(_===!0){w=x;break}}else for(x in n)for(C=n[x],k=0;k<C.length;k+=1){for(_=!0,R=0;R<C[k].length;R+=1)if(C[k][R]!==void 0&&C[k][R]!==P.charCodeAt(R)){_=!1;break}if(_===!0){w=x;break}}return w===t&&L!==t&&(w=L),w},s=function P(L){for(var k=this.internal.write,R=this.internal.putStream,C=(0,this.internal.getFilters)();C.indexOf("FlateEncode")!==-1;)C.splice(C.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var _=[];if(_.push({key:"Type",value:"/XObject"}),_.push({key:"Subtype",value:"/Image"}),_.push({key:"Width",value:L.width}),_.push({key:"Height",value:L.height}),L.colorSpace===y.INDEXED?_.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(_.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===y.DEVICE_CMYK&&_.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),_.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&_.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var x="",w=0,S=L.transparency.length;w<S;w++)x+=L.transparency[w]+" "+L.transparency[w]+" ";_.push({key:"Mask",value:"["+x+"]"})}L.sMask!==void 0&&_.push({key:"SMask",value:L.objectId+1+" 0 R"});var I=L.filter!==void 0?["/"+L.filter]:void 0;if(R({data:L.data,additionalKeyValues:_,alreadyAppliedFilters:I,objectId:L.objectId}),k("endobj"),"sMask"in L&&L.sMask!==void 0){var z,A=(z=L.sMaskBitsPerComponent)!==null&&z!==void 0?z:L.bitsPerComponent,H={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:A,data:L.sMask};"filter"in L&&(H.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(A," /Columns ").concat(L.width),H.filter=L.filter),P.call(this,H)}if(L.colorSpace===y.INDEXED){var K=this.internal.newObject();R({data:N(new Uint8Array(L.palette)),objectId:K}),k("endobj")}},o=function(){var P=this.internal.collections[e+"images"];for(var L in P)s.call(this,P[L])},l=function(){var P,L=this.internal.collections[e+"images"],k=this.internal.write;for(var R in L)k("/I"+(P=L[R]).index,P.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},a=function(){var P=this.internal.collections[e+"images"];return c.call(this),P},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},d=function(P){return typeof r["process"+P.toUpperCase()]=="function"},f=function(P){return Un(P)==="object"&&P.nodeType===1},h=function(P,L){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var k=""+P.getAttribute("src");if(k.indexOf("data:image/")===0)return Om(unescape(k).split("base64,").pop());var R=r.loadFile(k,!0);if(R!==void 0)return R}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var C;switch(L){case"PNG":C="image/png";break;case"WEBP":C="image/webp";break;default:C="image/jpeg"}return Om(P.toDataURL(C,1).split("base64,").pop())}},m=function(P){var L=this.internal.collections[e+"images"];if(L){for(var k in L)if(P===L[k].alias)return L[k]}},g=function(P,L,k){return P||L||(P=-96,L=-96),P<0&&(P=-1*k.width*72/P/this.internal.scaleFactor),L<0&&(L=-1*k.height*72/L/this.internal.scaleFactor),P===0&&(P=L*k.width/k.height),L===0&&(L=P*k.height/k.width),[P,L]},p=function(P,L,k,R,C,_){var x=g.call(this,k,R,C),w=this.internal.getCoordinateString,S=this.internal.getVerticalCoordinateString,I=a.call(this);if(k=x[0],R=x[1],I[C.index]=C,_){_*=Math.PI/180;var z=Math.cos(_),A=Math.sin(_),H=function(J){return J.toFixed(4)},K=[H(z),H(A),H(-1*A),H(z),0,0,"cm"]}this.internal.write("q"),_?(this.internal.write([1,"0","0",1,w(P),S(L+R),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([w(k),"0","0",w(R),"0","0","cm"].join(" "))):this.internal.write([w(k),"0","0",w(R),w(P),S(L+R),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+C.index+" Do"),this.internal.write("Q")},y=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=r.__addimage__.sHashCode=function(P){var L,k,R=0;if(typeof P=="string")for(k=P.length,L=0;L<k;L++)R=(R<<5)-R+P.charCodeAt(L),R|=0;else if(W(P))for(k=P.byteLength/2,L=0;L<k;L++)R=(R<<5)-R+P[L],R|=0;return R},E=r.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var L=!0;return P.length===0&&(L=!1),P.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(L=!1),L},M=r.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var L=P.indexOf(",");return L<0?null:P.substring(0,L).trim().endsWith("base64")?P.substring(L+1):null};r.__addimage__.isArrayBuffer=function(P){return P instanceof ArrayBuffer};var W=r.__addimage__.isArrayBufferView=function(P){return P instanceof Int8Array||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array},$=r.__addimage__.binaryStringToUint8Array=function(P){for(var L=P.length,k=new Uint8Array(L),R=0;R<L;R++)k[R]=P.charCodeAt(R);return k},N=r.__addimage__.arrayBufferToBinaryString=function(P){for(var L="",k=W(P)?P:new Uint8Array(P),R=0;R<k.length;R+=8192)L+=String.fromCharCode.apply(null,k.subarray(R,R+8192));return L};r.addImage=function(){var P,L,k,R,C,_,x,w,S;if(typeof arguments[1]=="number"?(L=t,k=arguments[1],R=arguments[2],C=arguments[3],_=arguments[4],x=arguments[5],w=arguments[6],S=arguments[7]):(L=arguments[1],k=arguments[2],R=arguments[3],C=arguments[4],_=arguments[5],x=arguments[6],w=arguments[7],S=arguments[8]),Un(P=arguments[0])==="object"&&!f(P)&&"imageData"in P){var I=P;P=I.imageData,L=I.format||L||t,k=I.x||k||0,R=I.y||R||0,C=I.w||I.width||C,_=I.h||I.height||_,x=I.alias||x,w=I.compression||w,S=I.rotation||I.angle||S}var z=this.internal.getFilters();if(w===void 0&&z.indexOf("FlateEncode")!==-1&&(w="SLOW"),isNaN(k)||isNaN(R))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var A=j.call(this,P,L,x,w);return p.call(this,k,R,C,_,A,S),this};var j=function(P,L,k,R){var C,_,x;if(typeof P=="string"&&i(P)===t){P=unescape(P);var w=F(P,!1);(w!==""||(w=r.loadFile(P,!0))!==void 0)&&(P=w)}if(f(P)&&(P=h(P,L)),L=i(P,L),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((x=k)==null||x.length===0)&&(k=function(S){return typeof S=="string"||W(S)?v(S):W(S.data)?v(S.data):null}(P)),(C=m.call(this,k))||(P instanceof Uint8Array||L==="RGBA"||(_=P,P=$(P)),C=this["process"+L.toUpperCase()](P,u.call(this),k,function(S){return S&&typeof S=="string"&&(S=S.toUpperCase()),S in r.image_compression?S:b.NONE}(R),_)),!C)throw new Error("An unknown error occurred whilst processing the image.");return C},F=r.__addimage__.convertBase64ToBinaryString=function(P,L){L=typeof L!="boolean"||L;var k,R="";if(typeof P=="string"){var C;k=(C=M(P))!==null&&C!==void 0?C:P;try{R=Om(k)}catch(_){if(L)throw E(k)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+_.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return R};r.getImageProperties=function(P){var L,k,R="";if(f(P)&&(P=h(P)),typeof P=="string"&&i(P)===t&&((R=F(P,!1))===""&&(R=r.loadFile(P)||""),P=R),k=i(P),!d(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(P instanceof Uint8Array||(P=$(P)),!(L=this["process"+k.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=k,L}})(Tr.API),function(r){var e=function(t){if(t!==void 0&&t!="")return!0};Tr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,i,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),a=t.pageContext.annotations,u=!1,d=0;d<a.length&&!u;d++)switch((n=a[d]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var f=0;f<a.length;f++){n=a[f];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(g.objId),b=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+h(y(n.contents))+")",s+=" /Popup "+p.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+h(y(b))+") >>",g.content=s;var v=g.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+v,n.open&&(s+=" /Open true"),s+=" >>",p.content=s,this.internal.write(g.objId,"0 R",p.objId,"0 R");break;case"freetext":i="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var E=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+h(m(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+E+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var M=this.annotations._nameMap[n.options.name];n.options.pageNumber=M.page,n.options.top=M.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var W=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+W+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,i,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(t),y:a(n),w:c(t+i),h:a(n+s)},options:o,type:"link"})},r.textWithLink=function(t,n,i,s){var o,l,c=this.getTextWidth(t),a=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var u=this.splitTextToSize(t,l).length;o=Math.ceil(a*u)}else l=c,o=a;return this.text(t,n,i,s),i+=.2*a,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,i-a,l,o,s),c},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}}(Tr.API),function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var s=r.__arabicParser__.isInArabicSubstitutionA=function(g){return e[g.charCodeAt(0)]!==void 0},o=r.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=r.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length<=2},c=r.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&i.indexOf(g.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=1};var a=r.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length>=3};var u=r.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&s(g)&&e[g.charCodeAt(0)].length==4},d=r.__arabicParser__.resolveLigatures=function(g){var p=0,y=t,b="",v=0;for(p=0;p<g.length;p+=1)y[g.charCodeAt(p)]!==void 0?(v++,typeof(y=y[g.charCodeAt(p)])=="number"&&(b+=String.fromCharCode(y),y=t,v=0),p===g.length-1&&(y=t,b+=g.charAt(p-(v-1)),p-=v-1,v=0)):(y=t,b+=g.charAt(p-v),p-=v,v=0);return b};r.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&n[g.charCodeAt(0)]!==void 0};var f=r.__arabicParser__.getCorrectForm=function(g,p,y){return o(g)?s(g)===!1?-1:!a(g)||!o(p)&&!o(y)||!o(y)&&l(p)||l(g)&&!o(p)||l(g)&&c(p)||l(g)&&l(p)?0:u(g)&&o(p)&&!l(p)&&o(y)&&a(y)?3:l(g)||!o(y)?1:2:-1},h=function(g){var p=0,y=0,b=0,v="",E="",M="",W=(g=g||"").split("\\s+"),$=[];for(p=0;p<W.length;p+=1){for($.push(""),y=0;y<W[p].length;y+=1)v=W[p][y],E=W[p][y-1],M=W[p][y+1],o(v)?(b=f(v,E,M),$[p]+=b!==-1?String.fromCharCode(e[v.charCodeAt(0)][b]):v):$[p]+=v;$[p]=d($[p])}return $.join(" ")},m=r.__arabicParser__.processArabic=r.processArabic=function(){var g,p=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(p)){var b=0;for(y=[],b=0;b<p.length;b+=1)Array.isArray(p[b])?y.push([h(p[b][0]),p[b][1],p[b][2]]):y.push([h(p[b])]);g=y}else g=h(p);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};r.events.push(["preProcessText",m])}(Tr.API),Tr.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(l){t=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var i;if((t=t||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Tr.API),function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var a=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return a},set:function(g){a=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(g){m=g}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},r.getTextDimensions=function(c,a){n.call(this);var u=(a=a||{}).fontSize||this.getFontSize(),d=a.font||this.getFont(),f=a.scaleFactor||this.internal.scaleFactor,h=0,m=0,g=0,p=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=a.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(v,E){return v.concat(p.splitTextToSize(E,y))},[])):c=Array.isArray(c)?c:[c];for(var b=0;b<c.length;b++)h<(g=this.getStringUnitWidth(c[b],{font:d})*u)&&(h=g);return h!==0&&(m=c.length),{w:h/=f,h:Math.max((m*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/f,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=r.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var a=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return a.lineNumber!==void 0&&(a.lineNumber===c.lineNumber?(c.x=(a.x||0)+(a.width||0),c.y=a.y||0):a.y+a.height+c.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=d.top,h&&f&&(this.printHeaderRow(c.lineNumber,!0),c.y+=f[0].height)):c.y=a.y+a.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};r.table=function(c,a,u,d,f){if(n.call(this),!u)throw new Error("No data for PDF table.");var h,m,g,p,y=[],b=[],v=[],E={},M={},W=[],$=[],N=(f=f||{}).autoSize||!1,j=f.printHeaders!==!1,F=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,P=f.margins||Object.assign({width:this.getPageWidth()},e),L=typeof f.padding=="number"?f.padding:3,k=f.headerBackgroundColor||"#c8c8c8",R=f.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=k,this.internal.__cell__.headerTextColor=R,this.setFontSize(F),d==null)b=y=Object.keys(u[0]),v=y.map(function(){return"left"});else if(Array.isArray(d)&&Un(d[0])==="object")for(y=d.map(function(I){return I.name}),b=d.map(function(I){return I.prompt||I.name||""}),v=d.map(function(I){return I.align||"left"}),h=0;h<d.length;h+=1)M[d[h].name]=.7499990551181103*d[h].width;else Array.isArray(d)&&typeof d[0]=="string"&&(b=y=d,v=y.map(function(){return"left"}));if(N||Array.isArray(d)&&typeof d[0]=="string")for(h=0;h<y.length;h+=1){for(E[p=y[h]]=u.map(function(I){return I[p]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(b[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=E[p],this.setFont(void 0,"normal"),g=0;g<m.length;g+=1)W.push(this.getTextDimensions(m[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);M[p]=Math.max.apply(null,W)+L+L,W=[]}if(j){var C={};for(h=0;h<y.length;h+=1)C[y[h]]={},C[y[h]].text=b[h],C[y[h]].align=v[h];var _=l.call(this,C,M);$=y.map(function(I){return new s(c,a,M[I],_,C[I].text,void 0,C[I].align)}),this.setTableHeaderRow($),this.printHeaderRow(1,!1)}var x=d.reduce(function(I,z){return I[z.name]=z.align,I},{});for(h=0;h<u.length;h+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:h,data:u[h]},this);var w=l.call(this,u[h],M);for(g=0;g<y.length;g+=1){var S=u[h][y[g]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:h,col:g,data:S},this),o.call(this,new s(c,a,M[y[g]],w,S,h+2,x[y[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=a,this};var l=function(c,a){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(c).map(function(h){var m=c[h];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,a[h]-u-u)},this).map(function(h){return this.getLineHeightFactor()*h.length*d/f+u+u},this).reduce(function(h,m){return Math.max(h,m)},0)};r.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},r.printHeaderRow=function(c,a){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){u=this.internal.__cell__.tableHeaderRow[h].clone(),a&&(u.y=this.internal.__cell__.margins.top||0,f.push(u)),u.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(m)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),t=!1}}(Tr.API);var ZE={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},eC=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],kb=JE(eC),tC=[100,200,300,400,500,600,700,800,900],A$=JE(tC);function _2(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return ZE[s=s||"normal"]?s:"normal"}(r.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(r.weight),i=function(s){return typeof kb[s=s||"normal"]=="number"?s:"normal"}(r.stretch);return{family:e,style:t,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:e,style:[i,t,n].join(" ")}}}function a6(r,e,t,n){var i;for(i=t;i>=0&&i<e.length;i+=n)if(r[e[i]])return r[e[i]];for(i=t;i>=0&&i<e.length;i-=n)if(r[e[i]])return r[e[i]]}var T$={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},l6={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function c6(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function u6(r){return r.trimLeft()}function N$(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function j$(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var Eu,um,h6,f6,d6,x2=["times"];function p6(r,e,t,n,i){var s=4,o=g6;switch(i){case Tr.API.image_compression.FAST:s=1,o=m6;break;case Tr.API.image_compression.MEDIUM:s=6,o=y6;break;case Tr.API.image_compression.SLOW:s=9,o=b6}r=function(c,a,u,d){for(var f,h=c.length/a,m=new Uint8Array(c.length+h),g=[R$,m6,g6,y6,b6],p=0;p<h;p+=1){var y=p*a,b=c.subarray(y,y+a);if(d)m.set(d(b,u,f),y+p);else{for(var v=g.length,E=[],M=0;M<v;M+=1)E[M]=g[M](b,u,f);var W=M$(E.concat());m.set(E[W],y+p)}f=b}return m}(r,e,Math.ceil(t*n/8),o);var l=yb(r,{level:s});return Tr.API.__addimage__.arrayBufferToBinaryString(l)}function R$(r){var e=Array.apply([],r);return e.unshift(0),e}function m6(r,e){var t=r.length,n=[];n[0]=1;for(var i=0;i<t;i+=1){var s=r[i-e]||0;n[i+1]=r[i]-s+256&255}return n}function g6(r,e,t){var n=r.length,i=[];i[0]=2;for(var s=0;s<n;s+=1){var o=t&&t[s]||0;i[s+1]=r[s]-o+256&255}return i}function y6(r,e,t){var n=r.length,i=[];i[0]=3;for(var s=0;s<n;s+=1){var o=r[s-e]||0,l=t&&t[s]||0;i[s+1]=r[s]+256-(o+l>>>1)&255}return i}function b6(r,e,t){var n=r.length,i=[];i[0]=4;for(var s=0;s<n;s+=1){var o=P$(r[s-e]||0,t&&t[s]||0,t&&t[s-e]||0);i[s+1]=r[s]-o+256&255}return i}function P$(r,e,t){if(r===e&&e===t)return r;var n=Math.abs(e-t),i=Math.abs(r-t),s=Math.abs(r+e-t-t);return n<=i&&n<=s?r:i<=s?e:t}function M$(r){var e=r.map(function(t){return t.reduce(function(n,i){return n+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function S2(r,e,t){var n=e*t,i=Math.floor(n/8),s=16-(n-8*i+t),o=(1<<t)-1;return rC(r,i)>>s&o}function v6(r,e,t,n){var i=t*n,s=Math.floor(i/8),o=16-(i-8*s+n),l=(1<<n)-1,c=(e&l)<<o;(function(a,u,d){if(u+1<a.byteLength)a.setUint16(u,d,!1);else{var f=d>>8&255;a.setUint8(u,f)}})(r,s,rC(r,s)&~(l<<o)&65535|c)}function rC(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function O$(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,i=r[e++],s=i>>7,o=1<<1+(7&i);r[e++],r[e++];var l=null,c=null;s&&(l=e,c=o,e+=3*o);var a=!0,u=[],d=0,f=null,h=0,m=null;for(this.width=t,this.height=n;a&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,m=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((P=r[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var g=r[e++];d=r[e++]|r[e++]<<8,f=r[e++],1&g||(f=null),h=g>>2&7,e++;break;case 254:for(;;){if(!((P=r[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var p=r[e++]|r[e++]<<8,y=r[e++]|r[e++]<<8,b=r[e++]|r[e++]<<8,v=r[e++]|r[e++]<<8,E=r[e++],M=E>>6&1,W=1<<1+(7&E),$=l,N=c,j=!1;E>>7&&(j=!0,$=e,N=W,e+=3*W);var F=e;for(e++;;){var P;if(!((P=r[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}u.push({x:p,y,width:b,height:v,has_local_palette:j,palette_offset:$,palette_size:N,data_offset:F,data_length:e-F,transparent_index:f,interlaced:!!M,delay:d,disposal:h});break;case 59:a=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return m},this.frameInfo=function(L){if(L<0||L>=u.length)throw new Error("Frame index out of range.");return u[L]},this.decodeAndBlitFrameBGRA=function(L,k){var R=this.frameInfo(L),C=R.width*R.height,_=new Uint8Array(C);w6(r,R.data_offset,_,C);var x=R.palette_offset,w=R.transparent_index;w===null&&(w=256);var S=R.width,I=t-S,z=S,A=4*(R.y*t+R.x),H=4*((R.y+R.height)*t+R.x),K=A,J=4*I;R.interlaced===!0&&(J+=4*t*7);for(var V=8,X=0,D=_.length;X<D;++X){var O=_[X];if(z===0&&(z=S,(K+=J)>=H&&(J=4*I+4*t*(V-1),K=A+(S+I)*(V<<1),V>>=1)),O===w)K+=4;else{var G=r[x+3*O],Z=r[x+3*O+1],ue=r[x+3*O+2];k[K++]=ue,k[K++]=Z,k[K++]=G,k[K++]=255}--z}},this.decodeAndBlitFrameRGBA=function(L,k){var R=this.frameInfo(L),C=R.width*R.height,_=new Uint8Array(C);w6(r,R.data_offset,_,C);var x=R.palette_offset,w=R.transparent_index;w===null&&(w=256);var S=R.width,I=t-S,z=S,A=4*(R.y*t+R.x),H=4*((R.y+R.height)*t+R.x),K=A,J=4*I;R.interlaced===!0&&(J+=4*t*7);for(var V=8,X=0,D=_.length;X<D;++X){var O=_[X];if(z===0&&(z=S,(K+=J)>=H&&(J=4*I+4*t*(V-1),K=A+(S+I)*(V<<1),V>>=1)),O===w)K+=4;else{var G=r[x+3*O],Z=r[x+3*O+1],ue=r[x+3*O+2];k[K++]=G,k[K++]=Z,k[K++]=ue,k[K++]=255}--z}}}function w6(r,e,t,n){for(var i=r[e++],s=1<<i,o=s+1,l=o+1,c=i+1,a=(1<<c)-1,u=0,d=0,f=0,h=r[e++],m=new Int32Array(4096),g=null;;){for(;u<16&&h!==0;)d|=r[e++]<<u,u+=8,h===1?h=r[e++]:--h;if(u<c)break;var p=d&a;if(d>>=c,u-=c,p!==s){if(p===o)break;for(var y=p<l?p:g,b=0,v=y;v>s;)v=m[v]>>8,++b;var E=v;if(f+b+(y!==p?1:0)>n)return void Xn.log("Warning, gif stream longer than expected.");t[f++]=E;var M=f+=b;for(y!==p&&(t[f++]=E),v=y;b--;)v=m[v],t[--M]=255&v,v>>=8;g!==null&&l<4096&&(m[l++]=g<<8|E,l>=a+1&&c<12&&(++c,a=a<<1|1)),g=p}else l=o+1,a=(1<<(c=i+1))-1,g=null}return f!==n&&Xn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function k2(r){var e,t,n,i,s,o=Math.floor,l=new Array(64),c=new Array(64),a=new Array(64),u=new Array(64),d=new Array(65535),f=new Array(65535),h=new Array(64),m=new Array(64),g=[],p=0,y=7,b=new Array(64),v=new Array(64),E=new Array(64),M=new Array(256),W=new Array(2048),$=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],C=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function _(A,H){for(var K=0,J=0,V=new Array,X=1;X<=16;X++){for(var D=1;D<=A[X];D++)V[H[J]]=[],V[H[J]][0]=K,V[H[J]][1]=X,J++,K++;K*=2}return V}function x(A){for(var H=A[0],K=A[1]-1;K>=0;)H&1<<K&&(p|=1<<y),K--,--y<0&&(p==255?(w(255),w(0)):w(p),y=7,p=0)}function w(A){g.push(A)}function S(A){w(A>>8&255),w(255&A)}function I(A,H,K,J,V){for(var X,D=V[0],O=V[240],G=function(ae,Se){var ve,ke,Ne,ze,we,De,He,We,et,St,lt=0;for(et=0;et<8;++et){ve=ae[lt],ke=ae[lt+1],Ne=ae[lt+2],ze=ae[lt+3],we=ae[lt+4],De=ae[lt+5],He=ae[lt+6];var At=ve+(We=ae[lt+7]),ct=ve-We,at=ke+He,wt=ke-He,ot=Ne+De,nt=Ne-De,zt=ze+we,Lt=ze-we,Ct=At+zt,Ht=At-zt,jt=at+ot,Mt=at-ot;ae[lt]=Ct+jt,ae[lt+4]=Ct-jt;var Qt=.707106781*(Mt+Ht);ae[lt+2]=Ht+Qt,ae[lt+6]=Ht-Qt;var Sr=.382683433*((Ct=Lt+nt)-(Mt=wt+ct)),lr=.5411961*Ct+Sr,pr=1.306562965*Mt+Sr,jr=.707106781*(jt=nt+wt),Ft=ct+jr,zr=ct-jr;ae[lt+5]=zr+lr,ae[lt+3]=zr-lr,ae[lt+1]=Ft+pr,ae[lt+7]=Ft-pr,lt+=8}for(lt=0,et=0;et<8;++et){ve=ae[lt],ke=ae[lt+8],Ne=ae[lt+16],ze=ae[lt+24],we=ae[lt+32],De=ae[lt+40],He=ae[lt+48];var Rr=ve+(We=ae[lt+56]),mr=ve-We,Ue=ke+He,Ye=ke-He,Xe=Ne+De,Le=Ne-De,Fe=ze+we,Ke=ze-we,pe=Rr+Fe,Te=Rr-Fe,Ze=Ue+Xe,ut=Ue-Xe;ae[lt]=pe+Ze,ae[lt+32]=pe-Ze;var he=.707106781*(ut+Te);ae[lt+16]=Te+he,ae[lt+48]=Te-he;var Ce=.382683433*((pe=Ke+Le)-(ut=Ye+mr)),Ve=.5411961*pe+Ce,Be=1.306562965*ut+Ce,st=.707106781*(Ze=Le+Ye),Ge=mr+st,pt=mr-st;ae[lt+40]=pt+Ve,ae[lt+24]=pt-Ve,ae[lt+8]=Ge+Be,ae[lt+56]=Ge-Be,lt++}for(et=0;et<64;++et)St=ae[et]*Se[et],h[et]=St>0?St+.5|0:St-.5|0;return h}(A,H),Z=0;Z<64;++Z)m[$[Z]]=G[Z];var ue=m[0]-K;K=m[0],ue==0?x(J[0]):(x(J[f[X=32767+ue]]),x(d[X]));for(var te=63;te>0&&m[te]==0;)te--;if(te==0)return x(D),K;for(var oe,re=1;re<=te;){for(var be=re;m[re]==0&&re<=te;)++re;var ie=re-be;if(ie>=16){oe=ie>>4;for(var le=1;le<=oe;++le)x(O);ie&=15}X=32767+m[re],x(V[(ie<<4)+f[X]]),x(d[X]),re++}return te!=63&&x(D),K}function z(A){A=Math.min(Math.max(A,1),100),s!=A&&(function(H){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var V=o((K[J]*H+50)/100);V=Math.min(Math.max(V,1),255),l[$[J]]=V}for(var X=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],D=0;D<64;D++){var O=o((X[D]*H+50)/100);O=Math.min(Math.max(O,1),255),c[$[D]]=O}for(var G=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Z=0,ue=0;ue<8;ue++)for(var te=0;te<8;te++)a[Z]=1/(l[$[Z]]*G[ue]*G[te]*8),u[Z]=1/(c[$[Z]]*G[ue]*G[te]*8),Z++}(A<50?Math.floor(5e3/A):Math.floor(200-2*A)),s=A)}this.encode=function(A,H){H&&z(H),g=new Array,p=0,y=7,S(65496),S(65504),S(16),w(74),w(70),w(73),w(70),w(0),w(1),w(1),w(0),S(1),S(1),w(0),w(0),function(){S(65499),S(132),w(0);for(var ke=0;ke<64;ke++)w(l[ke]);w(1);for(var Ne=0;Ne<64;Ne++)w(c[Ne])}(),function(ke,Ne){S(65472),S(17),w(8),S(Ne),S(ke),w(3),w(1),w(17),w(0),w(2),w(17),w(1),w(3),w(17),w(1)}(A.width,A.height),function(){S(65476),S(418),w(0);for(var ke=0;ke<16;ke++)w(N[ke+1]);for(var Ne=0;Ne<=11;Ne++)w(j[Ne]);w(16);for(var ze=0;ze<16;ze++)w(F[ze+1]);for(var we=0;we<=161;we++)w(P[we]);w(1);for(var De=0;De<16;De++)w(L[De+1]);for(var He=0;He<=11;He++)w(k[He]);w(17);for(var We=0;We<16;We++)w(R[We+1]);for(var et=0;et<=161;et++)w(C[et])}(),S(65498),S(12),w(3),w(1),w(0),w(2),w(17),w(3),w(17),w(0),w(63),w(0);var K=0,J=0,V=0;p=0,y=7,this.encode.displayName="_encode_";for(var X,D,O,G,Z,ue,te,oe,re,be=A.data,ie=A.width,le=A.height,ae=4*ie,Se=0;Se<le;){for(X=0;X<ae;){for(Z=ae*Se+X,te=-1,oe=0,re=0;re<64;re++)ue=Z+(oe=re>>3)*ae+(te=4*(7&re)),Se+oe>=le&&(ue-=ae*(Se+1+oe-le)),X+te>=ae&&(ue-=X+te-ae+4),D=be[ue++],O=be[ue++],G=be[ue++],b[re]=(W[D]+W[O+256|0]+W[G+512|0]>>16)-128,v[re]=(W[D+768|0]+W[O+1024|0]+W[G+1280|0]>>16)-128,E[re]=(W[D+1280|0]+W[O+1536|0]+W[G+1792|0]>>16)-128;K=I(b,a,K,e,n),J=I(v,u,J,t,i),V=I(E,u,V,t,i),X+=32}Se+=8}if(y>=0){var ve=[];ve[1]=y+1,ve[0]=(1<<y+1)-1,x(ve)}return S(65497),new Uint8Array(g)},r=r||50,function(){for(var A=String.fromCharCode,H=0;H<256;H++)M[H]=A(H)}(),e=_(N,j),t=_(L,k),n=_(F,P),i=_(R,C),function(){for(var A=1,H=2,K=1;K<=15;K++){for(var J=A;J<H;J++)f[32767+J]=K,d[32767+J]=[],d[32767+J][1]=K,d[32767+J][0]=J;for(var V=-(H-1);V<=-A;V++)f[32767+V]=K,d[32767+V]=[],d[32767+V][1]=K,d[32767+V][0]=H-1+V;A<<=1,H<<=1}}(),function(){for(var A=0;A<256;A++)W[A]=19595*A,W[A+256|0]=38470*A,W[A+512|0]=7471*A+32768,W[A+768|0]=-11059*A,W[A+1024|0]=-21709*A,W[A+1280|0]=32768*A+8421375,W[A+1536|0]=-27439*A,W[A+1792|0]=-5329*A}(),z(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Go(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function _6(r){function e(j){if(!j)throw Error("assert :P")}function t(j,F,P){for(var L=0;4>L;L++)if(j[F+L]!=P.charCodeAt(L))return!0;return!1}function n(j,F,P,L,k){for(var R=0;R<k;R++)j[F+R]=P[L+R]}function i(j,F,P,L){for(var k=0;k<L;k++)j[F+k]=P}function s(j){return new Int32Array(j)}function o(j,F){for(var P=[],L=0;L<j;L++)P.push(new F);return P}function l(j,F){var P=[];return function L(k,R,C){for(var _=C[R],x=0;x<_&&(k.push(C.length>R+1?[]:new F),!(C.length<R+1));x++)L(k[x],R+1,C)}(P,0,j),P}var c=function(){var j=this;function F(B,q){for(var Q=1<<q-1>>>0;B&Q;)Q>>>=1;return Q?(B&Q-1)+Q:B}function P(B,q,Q,ne,fe){e(!(ne%Q));do B[q+(ne-=Q)]=fe;while(0<ne)}function L(B,q,Q,ne,fe){if(e(2328>=fe),512>=fe)var ge=s(512);else if((ge=s(fe))==null)return 0;return function(ye,_e,Ie,Re,Je,yt){var Pe,rt,ft=_e,Rt=1<<Ie,mt=s(16),Pt=s(16);for(e(Je!=0),e(Re!=null),e(ye!=null),e(0<Ie),rt=0;rt<Je;++rt){if(15<Re[rt])return 0;++mt[Re[rt]]}if(mt[0]==Je)return 0;for(Pt[1]=0,Pe=1;15>Pe;++Pe){if(mt[Pe]>1<<Pe)return 0;Pt[Pe+1]=Pt[Pe]+mt[Pe]}for(rt=0;rt<Je;++rt)Pe=Re[rt],0<Re[rt]&&(yt[Pt[Pe]++]=rt);if(Pt[15]==1)return(Re=new k).g=0,Re.value=yt[0],P(ye,ft,1,Rt,Re),Rt;var Ot,Kt=-1,Wt=Rt-1,Pr=0,wr=1,cn=1,Ir=1<<Ie;for(rt=0,Pe=1,Je=2;Pe<=Ie;++Pe,Je<<=1){if(wr+=cn<<=1,0>(cn-=mt[Pe]))return 0;for(;0<mt[Pe];--mt[Pe])(Re=new k).g=Pe,Re.value=yt[rt++],P(ye,ft+Pr,Je,Ir,Re),Pr=F(Pr,Pe)}for(Pe=Ie+1,Je=2;15>=Pe;++Pe,Je<<=1){if(wr+=cn<<=1,0>(cn-=mt[Pe]))return 0;for(;0<mt[Pe];--mt[Pe]){if(Re=new k,(Pr&Wt)!=Kt){for(ft+=Ir,Ot=1<<(Kt=Pe)-Ie;15>Kt&&!(0>=(Ot-=mt[Kt]));)++Kt,Ot<<=1;Rt+=Ir=1<<(Ot=Kt-Ie),ye[_e+(Kt=Pr&Wt)].g=Ot+Ie,ye[_e+Kt].value=ft-_e-Kt}Re.g=Pe-Ie,Re.value=yt[rt++],P(ye,ft+(Pr>>Ie),Je,Ir,Re),Pr=F(Pr,Pe)}}return wr!=2*Pt[15]-1?0:Rt}(B,q,Q,ne,fe,ge)}function k(){this.value=this.g=0}function R(){this.value=this.g=0}function C(){this.G=o(5,k),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ec,R)}function _(B,q,Q,ne){e(B!=null),e(q!=null),e(2147483648>ne),B.Ca=254,B.I=0,B.b=-8,B.Ka=0,B.oa=q,B.pa=Q,B.Jd=q,B.Yc=Q+ne,B.Zc=4<=ne?Q+ne-4+1:Q,D(B)}function x(B,q){for(var Q=0;0<q--;)Q|=G(B,128)<<q;return Q}function w(B,q){var Q=x(B,q);return O(B)?-Q:Q}function S(B,q,Q,ne){var fe,ge=0;for(e(B!=null),e(q!=null),e(4294967288>ne),B.Sb=ne,B.Ra=0,B.u=0,B.h=0,4<ne&&(ne=4),fe=0;fe<ne;++fe)ge+=q[Q+fe]<<8*fe;B.Ra=ge,B.bb=ne,B.oa=q,B.pa=Q}function I(B){for(;8<=B.u&&B.bb<B.Sb;)B.Ra>>>=8,B.Ra+=B.oa[B.pa+B.bb]<<pl-8>>>0,++B.bb,B.u-=8;J(B)&&(B.h=1,B.u=0)}function z(B,q){if(e(0<=q),!B.h&&q<=uo){var Q=K(B)&co[q];return B.u+=q,I(B),Q}return B.h=1,B.u=0}function A(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function H(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(B){return B.Ra>>>(B.u&pl-1)>>>0}function J(B){return e(B.bb<=B.Sb),B.h||B.bb==B.Sb&&B.u>pl}function V(B,q){B.u=q,B.h=J(B)}function X(B){B.u>=Da&&(e(B.u>=Da),I(B))}function D(B){e(B!=null&&B.oa!=null),B.pa<B.Zc?(B.I=(B.oa[B.pa++]|B.I<<8)>>>0,B.b+=8):(e(B!=null&&B.oa!=null),B.pa<B.Yc?(B.b+=8,B.I=B.oa[B.pa++]|B.I<<8):B.Ka?B.b=0:(B.I<<=8,B.b+=8,B.Ka=1))}function O(B){return x(B,1)}function G(B,q){var Q=B.Ca;0>B.b&&D(B);var ne=B.b,fe=Q*q>>>8,ge=(B.I>>>ne>fe)+0;for(ge?(Q-=fe,B.I-=fe+1<<ne>>>0):Q=fe+1,ne=Q,fe=0;256<=ne;)fe+=8,ne>>=8;return ne=7^fe+ml[ne],B.b-=ne,B.Ca=(Q<<ne)-1,ge}function Z(B,q,Q){B[q+0]=Q>>24&255,B[q+1]=Q>>16&255,B[q+2]=Q>>8&255,B[q+3]=255&Q}function ue(B,q){return B[q+0]|B[q+1]<<8}function te(B,q){return ue(B,q)|B[q+2]<<16}function oe(B,q){return ue(B,q)|ue(B,q+2)<<16}function re(B,q){var Q=1<<q;return e(B!=null),e(0<q),B.X=s(Q),B.X==null?0:(B.Mb=32-q,B.Xa=q,1)}function be(B,q){e(B!=null),e(q!=null),e(B.Xa==q.Xa),n(q.X,0,B.X,0,1<<q.Xa)}function ie(){this.X=[],this.Xa=this.Mb=0}function le(B,q,Q,ne){e(Q!=null),e(ne!=null);var fe=Q[0],ge=ne[0];return fe==0&&(fe=(B*ge+q/2)/q),ge==0&&(ge=(q*fe+B/2)/B),0>=fe||0>=ge?0:(Q[0]=fe,ne[0]=ge,1)}function ae(B,q){return B+(1<<q)-1>>>q}function Se(B,q){return((4278255360&B)+(4278255360&q)>>>0&4278255360)+((16711935&B)+(16711935&q)>>>0&16711935)>>>0}function ve(B,q){j[q]=function(Q,ne,fe,ge,ye,_e,Ie){var Re;for(Re=0;Re<ye;++Re){var Je=j[B](_e[Ie+Re-1],fe,ge+Re);_e[Ie+Re]=Se(Q[ne+Re],Je)}}}function ke(){this.ud=this.hd=this.jd=0}function Ne(B,q){return((4278124286&(B^q))>>>1)+(B&q)>>>0}function ze(B){return 0<=B&&256>B?B:0>B?0:255<B?255:void 0}function we(B,q){return ze(B+(B-q+.5>>1))}function De(B,q,Q){return Math.abs(q-Q)-Math.abs(B-Q)}function He(B,q,Q,ne,fe,ge,ye){for(ne=ge[ye-1],Q=0;Q<fe;++Q)ge[ye+Q]=ne=Se(B[q+Q],ne)}function We(B,q,Q,ne,fe){var ge;for(ge=0;ge<Q;++ge){var ye=B[q+ge],_e=ye>>8&255,Ie=16711935&(Ie=(Ie=16711935&ye)+((_e<<16)+_e));ne[fe+ge]=(4278255360&ye)+Ie>>>0}}function et(B,q){q.jd=255&B,q.hd=B>>8&255,q.ud=B>>16&255}function St(B,q,Q,ne,fe,ge){var ye;for(ye=0;ye<ne;++ye){var _e=q[Q+ye],Ie=_e>>>8,Re=_e,Je=255&(Je=(Je=_e>>>16)+((B.jd<<24>>24)*(Ie<<24>>24)>>>5));Re=255&(Re=(Re+=(B.hd<<24>>24)*(Ie<<24>>24)>>>5)+((B.ud<<24>>24)*(Je<<24>>24)>>>5)),fe[ge+ye]=(4278255360&_e)+(Je<<16)+Re}}function lt(B,q,Q,ne,fe){j[q]=function(ge,ye,_e,Ie,Re,Je,yt,Pe,rt){for(Ie=yt;Ie<Pe;++Ie)for(yt=0;yt<rt;++yt)Re[Je++]=fe(_e[ne(ge[ye++])])},j[B]=function(ge,ye,_e,Ie,Re,Je,yt){var Pe=8>>ge.b,rt=ge.Ea,ft=ge.K[0],Rt=ge.w;if(8>Pe)for(ge=(1<<ge.b)-1,Rt=(1<<Pe)-1;ye<_e;++ye){var mt,Pt=0;for(mt=0;mt<rt;++mt)mt&ge||(Pt=ne(Ie[Re++])),Je[yt++]=fe(ft[Pt&Rt]),Pt>>=Pe}else j["VP8LMapColor"+Q](Ie,Re,ft,Rt,Je,yt,ye,_e,rt)}}function At(B,q,Q,ne,fe){for(Q=q+Q;q<Q;){var ge=B[q++];ne[fe++]=ge>>16&255,ne[fe++]=ge>>8&255,ne[fe++]=255&ge}}function ct(B,q,Q,ne,fe){for(Q=q+Q;q<Q;){var ge=B[q++];ne[fe++]=ge>>16&255,ne[fe++]=ge>>8&255,ne[fe++]=255&ge,ne[fe++]=ge>>24&255}}function at(B,q,Q,ne,fe){for(Q=q+Q;q<Q;){var ge=(ye=B[q++])>>16&240|ye>>12&15,ye=240&ye|ye>>28&15;ne[fe++]=ge,ne[fe++]=ye}}function wt(B,q,Q,ne,fe){for(Q=q+Q;q<Q;){var ge=(ye=B[q++])>>16&248|ye>>13&7,ye=ye>>5&224|ye>>3&31;ne[fe++]=ge,ne[fe++]=ye}}function ot(B,q,Q,ne,fe){for(Q=q+Q;q<Q;){var ge=B[q++];ne[fe++]=255&ge,ne[fe++]=ge>>8&255,ne[fe++]=ge>>16&255}}function nt(B,q,Q,ne,fe,ge){if(ge==0)for(Q=q+Q;q<Q;)Z(ne,((ge=B[q++])[0]>>24|ge[1]>>8&65280|ge[2]<<8&16711680|ge[3]<<24)>>>0),fe+=32;else n(ne,fe,B,q,Q)}function zt(B,q){j[q][0]=j[B+"0"],j[q][1]=j[B+"1"],j[q][2]=j[B+"2"],j[q][3]=j[B+"3"],j[q][4]=j[B+"4"],j[q][5]=j[B+"5"],j[q][6]=j[B+"6"],j[q][7]=j[B+"7"],j[q][8]=j[B+"8"],j[q][9]=j[B+"9"],j[q][10]=j[B+"10"],j[q][11]=j[B+"11"],j[q][12]=j[B+"12"],j[q][13]=j[B+"13"],j[q][14]=j[B+"0"],j[q][15]=j[B+"0"]}function Lt(B){return B==Kg||B==Yg||B==vp||B==Xg}function Ct(){this.eb=[],this.size=this.A=this.fb=0}function Ht(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function jt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ct,this.f.kb=new Ht,this.sd=null}function Mt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Qt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Sr(B){return alert("todo:WebPSamplerProcessPlane"),B.T}function lr(B,q){var Q=B.T,ne=q.ba.f.RGBA,fe=ne.eb,ge=ne.fb+B.ka*ne.A,ye=Ro[q.ba.S],_e=B.y,Ie=B.O,Re=B.f,Je=B.N,yt=B.ea,Pe=B.W,rt=q.cc,ft=q.dc,Rt=q.Mc,mt=q.Nc,Pt=B.ka,Ot=B.ka+B.T,Kt=B.U,Wt=Kt+1>>1;for(Pt==0?ye(_e,Ie,null,null,Re,Je,yt,Pe,Re,Je,yt,Pe,fe,ge,null,null,Kt):(ye(q.ec,q.fc,_e,Ie,rt,ft,Rt,mt,Re,Je,yt,Pe,fe,ge-ne.A,fe,ge,Kt),++Q);Pt+2<Ot;Pt+=2)rt=Re,ft=Je,Rt=yt,mt=Pe,Je+=B.Rc,Pe+=B.Rc,ge+=2*ne.A,ye(_e,(Ie+=2*B.fa)-B.fa,_e,Ie,rt,ft,Rt,mt,Re,Je,yt,Pe,fe,ge-ne.A,fe,ge,Kt);return Ie+=B.fa,B.j+Ot<B.o?(n(q.ec,q.fc,_e,Ie,Kt),n(q.cc,q.dc,Re,Je,Wt),n(q.Mc,q.Nc,yt,Pe,Wt),Q--):1&Ot||ye(_e,Ie,null,null,Re,Je,yt,Pe,Re,Je,yt,Pe,fe,ge+ne.A,null,null,Kt),Q}function pr(B,q,Q){var ne=B.F,fe=[B.J];if(ne!=null){var ge=B.U,ye=q.ba.S,_e=ye==bp||ye==vp;q=q.ba.f.RGBA;var Ie=[0],Re=B.ka;Ie[0]=B.T,B.Kb&&(Re==0?--Ie[0]:(--Re,fe[0]-=B.width),B.j+B.ka+B.T==B.o&&(Ie[0]=B.o-B.j-Re));var Je=q.eb;Re=q.fb+Re*q.A,B=tw(ne,fe[0],B.width,ge,Ie,Je,Re+(_e?0:3),q.A),e(Q==Ie),B&&Lt(ye)&&of(Je,Re,_e,ge,Ie,q.A)}return 0}function jr(B){var q=B.ma,Q=q.ba.S,ne=11>Q,fe=Q==gp||Q==yp||Q==bp||Q==Gg||Q==12||Lt(Q);if(q.memory=null,q.Ib=null,q.Jb=null,q.Nd=null,!Qh(q.Oa,B,fe?11:12))return 0;if(fe&&Lt(Q)&&Jr(),B.da)alert("todo:use_scaling");else{if(ne){if(q.Ib=Sr,B.Kb){if(Q=B.U+1>>1,q.memory=s(B.U+2*Q),q.memory==null)return 0;q.ec=q.memory,q.fc=0,q.cc=q.ec,q.dc=q.fc+B.U,q.Mc=q.cc,q.Nc=q.dc+Q,q.Ib=lr,Jr()}}else alert("todo:EmitYUV");fe&&(q.Jb=pr,ne&&bt())}if(ne&&!yw){for(B=0;256>B;++B)zC[B]=89858*(B-128)+_p>>wp,$C[B]=-22014*(B-128)+_p,VC[B]=-45773*(B-128),UC[B]=113618*(B-128)+_p>>wp;for(B=lf;B<Zg;++B)q=76283*(B-16)+_p>>wp,WC[B-lf]=sr(q,255),qC[B-lf]=sr(q+8>>4,15);yw=1}return 1}function Ft(B){var q=B.ma,Q=B.U,ne=B.T;return e(!(1&B.ka)),0>=Q||0>=ne?0:(Q=q.Ib(B,q),q.Jb!=null&&q.Jb(B,q,Q),q.Dc+=Q,1)}function zr(B){B.ma.memory=null}function Rr(B,q,Q,ne){return z(B,8)!=47?0:(q[0]=z(B,14)+1,Q[0]=z(B,14)+1,ne[0]=z(B,1),z(B,3)!=0?0:!B.h)}function mr(B,q){if(4>B)return B+1;var Q=B-2>>1;return(2+(1&B)<<Q)+z(q,Q)+1}function Ue(B,q){return 120<q?q-120:1<=(Q=((Q=CC[q-1])>>4)*B+(8-(15&Q)))?Q:1;var Q}function Ye(B,q,Q){var ne=K(Q),fe=B[q+=255&ne].g-8;return 0<fe&&(V(Q,Q.u+8),ne=K(Q),q+=B[q].value,q+=ne&(1<<fe)-1),V(Q,Q.u+B[q].g),B[q].value}function Xe(B,q,Q){return Q.g+=B.g,Q.value+=B.value<<q>>>0,e(8>=Q.g),B.g}function Le(B,q,Q){var ne=B.xc;return e((q=ne==0?0:B.vc[B.md*(Q>>ne)+(q>>ne)])<B.Wb),B.Ya[q]}function Fe(B,q,Q,ne){var fe=B.ab,ge=B.c*q,ye=B.C;q=ye+q;var _e=Q,Ie=ne;for(ne=B.Ta,Q=B.Ua;0<fe--;){var Re=B.gc[fe],Je=ye,yt=q,Pe=_e,rt=Ie,ft=(Ie=ne,_e=Q,Re.Ea);switch(e(Je<yt),e(yt<=Re.nc),Re.hc){case 2:Pi(Pe,rt,(yt-Je)*ft,Ie,_e);break;case 0:var Rt=Je,mt=yt,Pt=Ie,Ot=_e,Kt=(Ir=Re).Ea;Rt==0&&(Zh(Pe,rt,null,null,1,Pt,Ot),He(Pe,rt+1,0,0,Kt-1,Pt,Ot+1),rt+=Kt,Ot+=Kt,++Rt);for(var Wt=1<<Ir.b,Pr=Wt-1,wr=ae(Kt,Ir.b),cn=Ir.K,Ir=Ir.w+(Rt>>Ir.b)*wr;Rt<mt;){var xn=cn,Xi=Ir,un=1;for(bu(Pe,rt,Pt,Ot-Kt,1,Pt,Ot);un<Kt;){var Ar=(un&~Pr)+Wt;Ar>Kt&&(Ar=Kt),(0,tf[xn[Xi++]>>8&15])(Pe,rt+ +un,Pt,Ot+un-Kt,Ar-un,Pt,Ot+un),un=Ar}rt+=Kt,Ot+=Kt,++Rt&Pr||(Ir+=wr)}yt!=Re.nc&&n(Ie,_e-ft,Ie,_e+(yt-Je-1)*ft,ft);break;case 1:for(ft=Pe,mt=rt,Kt=(Pe=Re.Ea)-(Ot=Pe&~(Pt=(rt=1<<Re.b)-1)),Rt=ae(Pe,Re.b),Wt=Re.K,Re=Re.w+(Je>>Re.b)*Rt;Je<yt;){for(Pr=Wt,wr=Re,cn=new ke,Ir=mt+Ot,xn=mt+Pe;mt<Ir;)et(Pr[wr++],cn),rf(cn,ft,mt,rt,Ie,_e),mt+=rt,_e+=rt;mt<xn&&(et(Pr[wr++],cn),rf(cn,ft,mt,Kt,Ie,_e),mt+=Kt,_e+=Kt),++Je&Pt||(Re+=Rt)}break;case 3:if(Pe==Ie&&rt==_e&&0<Re.b){for(mt=Ie,Pe=ft=_e+(yt-Je)*ft-(Ot=(yt-Je)*ae(Re.Ea,Re.b)),rt=Ie,Pt=_e,Rt=[],Ot=(Kt=Ot)-1;0<=Ot;--Ot)Rt[Ot]=rt[Pt+Ot];for(Ot=Kt-1;0<=Ot;--Ot)mt[Pe+Ot]=Rt[Ot];fp(Re,Je,yt,Ie,ft,Ie,_e)}else fp(Re,Je,yt,Pe,rt,Ie,_e)}_e=ne,Ie=Q}Ie!=Q&&n(ne,Q,_e,Ie,ge)}function Ke(B,q){var Q=B.V,ne=B.Ba+B.c*B.C,fe=q-B.C;if(e(q<=B.l.o),e(16>=fe),0<fe){var ge=B.l,ye=B.Ta,_e=B.Ua,Ie=ge.width;if(Fe(B,fe,Q,ne),fe=_e=[_e],e((Q=B.C)<(ne=q)),e(ge.v<ge.va),ne>ge.o&&(ne=ge.o),Q<ge.j){var Re=ge.j-Q;Q=ge.j,fe[0]+=Re*Ie}if(Q>=ne?Q=0:(fe[0]+=4*ge.v,ge.ka=Q-ge.j,ge.U=ge.va-ge.v,ge.T=ne-Q,Q=1),Q){if(_e=_e[0],11>(Q=B.ca).S){var Je=Q.f.RGBA,yt=(ne=Q.S,fe=ge.U,ge=ge.T,Re=Je.eb,Je.A),Pe=ge;for(Je=Je.fb+B.Ma*Je.A;0<Pe--;){var rt=ye,ft=_e,Rt=fe,mt=Re,Pt=Je;switch(ne){case mp:nf(rt,ft,Rt,mt,Pt);break;case gp:gl(rt,ft,Rt,mt,Pt);break;case Kg:gl(rt,ft,Rt,mt,Pt),of(mt,Pt,0,Rt,1,0);break;case lw:Cc(rt,ft,Rt,mt,Pt);break;case yp:nt(rt,ft,Rt,mt,Pt,1);break;case Yg:nt(rt,ft,Rt,mt,Pt,1),of(mt,Pt,0,Rt,1,0);break;case bp:nt(rt,ft,Rt,mt,Pt,0);break;case vp:nt(rt,ft,Rt,mt,Pt,0),of(mt,Pt,1,Rt,1,0);break;case Gg:yl(rt,ft,Rt,mt,Pt);break;case Xg:yl(rt,ft,Rt,mt,Pt),ew(mt,Pt,Rt,1,0);break;case cw:bl(rt,ft,Rt,mt,Pt);break;default:e(0)}_e+=Ie,Je+=yt}B.Ma+=ge}else alert("todo:EmitRescaledRowsYUVA");e(B.Ma<=Q.height)}}B.C=q,e(B.C<=B.i)}function pe(B){var q;if(0<B.ua)return 0;for(q=0;q<B.Wb;++q){var Q=B.Ya[q].G,ne=B.Ya[q].H;if(0<Q[1][ne[1]+0].g||0<Q[2][ne[2]+0].g||0<Q[3][ne[3]+0].g)return 0}return 1}function Te(B,q,Q,ne,fe,ge){if(B.Z!=0){var ye=B.qd,_e=B.rd;for(e(_l[B.Z]!=null);q<Q;++q)_l[B.Z](ye,_e,ne,fe,ne,fe,ge),ye=ne,_e=fe,fe+=ge;B.qd=ye,B.rd=_e}}function Ze(B,q){var Q=B.l.ma,ne=Q.Z==0||Q.Z==1?B.l.j:B.C;if(ne=B.C<ne?ne:B.C,e(q<=B.l.o),q>ne){var fe=B.l.width,ge=Q.ca,ye=Q.tb+fe*ne,_e=B.V,Ie=B.Ba+B.c*ne,Re=B.gc;e(B.ab==1),e(Re[0].hc==3),ua(Re[0],ne,q,_e,Ie,ge,ye),Te(Q,ne,q,ge,ye,fe)}B.C=B.Ma=q}function ut(B,q,Q,ne,fe,ge,ye){var _e=B.$/ne,Ie=B.$%ne,Re=B.m,Je=B.s,yt=Q+B.$,Pe=yt;fe=Q+ne*fe;var rt=Q+ne*ge,ft=280+Je.ua,Rt=B.Pb?_e:16777216,mt=0<Je.ua?Je.Wa:null,Pt=Je.wc,Ot=yt<rt?Le(Je,Ie,_e):null;e(B.C<ge),e(rt<=fe);var Kt=!1;e:for(;;){for(;Kt||yt<rt;){var Wt=0;if(_e>=Rt){var Pr=yt-Q;e((Rt=B).Pb),Rt.wd=Rt.m,Rt.xd=Pr,0<Rt.s.ua&&be(Rt.s.Wa,Rt.s.vb),Rt=_e+AC}if(Ie&Pt||(Ot=Le(Je,Ie,_e)),e(Ot!=null),Ot.Qb&&(q[yt]=Ot.qb,Kt=!0),!Kt)if(X(Re),Ot.jc){Wt=Re,Pr=q;var wr=yt,cn=Ot.pd[K(Wt)&Ec-1];e(Ot.jc),256>cn.g?(V(Wt,Wt.u+cn.g),Pr[wr]=cn.value,Wt=0):(V(Wt,Wt.u+cn.g-256),e(256<=cn.value),Wt=cn.value),Wt==0&&(Kt=!0)}else Wt=Ye(Ot.G[0],Ot.H[0],Re);if(Re.h)break;if(Kt||256>Wt){if(!Kt)if(Ot.nd)q[yt]=(Ot.qb|Wt<<8)>>>0;else{if(X(Re),Kt=Ye(Ot.G[1],Ot.H[1],Re),X(Re),Pr=Ye(Ot.G[2],Ot.H[2],Re),wr=Ye(Ot.G[3],Ot.H[3],Re),Re.h)break;q[yt]=(wr<<24|Kt<<16|Wt<<8|Pr)>>>0}if(Kt=!1,++yt,++Ie>=ne&&(Ie=0,++_e,ye!=null&&_e<=ge&&!(_e%16)&&ye(B,_e),mt!=null))for(;Pe<yt;)Wt=q[Pe++],mt.X[(506832829*Wt&4294967295)>>>mt.Mb]=Wt}else if(280>Wt){if(Wt=mr(Wt-256,Re),Pr=Ye(Ot.G[4],Ot.H[4],Re),X(Re),Pr=Ue(ne,Pr=mr(Pr,Re)),Re.h)break;if(yt-Q<Pr||fe-yt<Wt)break e;for(wr=0;wr<Wt;++wr)q[yt+wr]=q[yt+wr-Pr];for(yt+=Wt,Ie+=Wt;Ie>=ne;)Ie-=ne,++_e,ye!=null&&_e<=ge&&!(_e%16)&&ye(B,_e);if(e(yt<=fe),Ie&Pt&&(Ot=Le(Je,Ie,_e)),mt!=null)for(;Pe<yt;)Wt=q[Pe++],mt.X[(506832829*Wt&4294967295)>>>mt.Mb]=Wt}else{if(!(Wt<ft))break e;for(Kt=Wt-280,e(mt!=null);Pe<yt;)Wt=q[Pe++],mt.X[(506832829*Wt&4294967295)>>>mt.Mb]=Wt;Wt=yt,e(!(Kt>>>(Pr=mt).Xa)),q[Wt]=Pr.X[Kt],Kt=!0}Kt||e(Re.h==J(Re))}if(B.Pb&&Re.h&&yt<fe)e(B.m.h),B.a=5,B.m=B.wd,B.$=B.xd,0<B.s.ua&&be(B.s.vb,B.s.Wa);else{if(Re.h)break e;ye!=null&&ye(B,_e>ge?ge:_e),B.a=0,B.$=yt-Q}return 1}return B.a=3,0}function he(B){e(B!=null),B.vc=null,B.yc=null,B.Ya=null;var q=B.Wa;q!=null&&(q.X=null),B.vb=null,e(B!=null)}function Ce(){var B=new $r;return B==null?null:(B.a=0,B.xb=fw,zt("Predictor","VP8LPredictors"),zt("Predictor","VP8LPredictors_C"),zt("PredictorAdd","VP8LPredictorsAdd"),zt("PredictorAdd","VP8LPredictorsAdd_C"),Pi=We,rf=St,nf=At,gl=ct,yl=at,bl=wt,Cc=ot,j.VP8LMapColor32b=ca,j.VP8LMapColor8b=ef,B)}function Ve(B,q,Q,ne,fe){var ge=1,ye=[B],_e=[q],Ie=ne.m,Re=ne.s,Je=null,yt=0;e:for(;;){if(Q)for(;ge&&z(Ie,1);){var Pe=ye,rt=_e,ft=ne,Rt=1,mt=ft.m,Pt=ft.gc[ft.ab],Ot=z(mt,2);if(ft.Oc&1<<Ot)ge=0;else{switch(ft.Oc|=1<<Ot,Pt.hc=Ot,Pt.Ea=Pe[0],Pt.nc=rt[0],Pt.K=[null],++ft.ab,e(4>=ft.ab),Ot){case 0:case 1:Pt.b=z(mt,3)+2,Rt=Ve(ae(Pt.Ea,Pt.b),ae(Pt.nc,Pt.b),0,ft,Pt.K),Pt.K=Pt.K[0];break;case 3:var Kt,Wt=z(mt,8)+1,Pr=16<Wt?0:4<Wt?1:2<Wt?2:3;if(Pe[0]=ae(Pt.Ea,Pr),Pt.b=Pr,Kt=Rt=Ve(Wt,1,0,ft,Pt.K)){var wr,cn=Wt,Ir=Pt,xn=1<<(8>>Ir.b),Xi=s(xn);if(Xi==null)Kt=0;else{var un=Ir.K[0],Ar=Ir.w;for(Xi[0]=Ir.K[0][0],wr=1;wr<1*cn;++wr)Xi[wr]=Se(un[Ar+wr],Xi[wr-1]);for(;wr<4*xn;++wr)Xi[wr]=0;Ir.K[0]=null,Ir.K[0]=Xi,Kt=1}}Rt=Kt;break;case 2:break;default:e(0)}ge=Rt}}if(ye=ye[0],_e=_e[0],ge&&z(Ie,1)&&!(ge=1<=(yt=z(Ie,4))&&11>=yt)){ne.a=3;break e}var cr;if(cr=ge)t:{var Oi,nn,Cn,ci=ne,fs=ye,Us=_e,Ei=yt,Es=Q,Vs=ci.m,Qi=ci.s,Nn=[null],Fn=1,Ci=0,Bn=IC[Ei];r:for(;;){if(Es&&z(Vs,1)){var ds=z(Vs,3)+2,Wo=ae(fs,ds),Li=ae(Us,ds),Js=Wo*Li;if(!Ve(Wo,Li,0,ci,Nn))break r;for(Nn=Nn[0],Qi.xc=ds,Oi=0;Oi<Js;++Oi){var Yn=Nn[Oi]>>8&65535;Nn[Oi]=Yn,Yn>=Fn&&(Fn=Yn+1)}}if(Vs.h)break r;for(nn=0;5>nn;++nn){var Ji=uw[nn];!nn&&0<Ei&&(Ji+=1<<Ei),Ci<Ji&&(Ci=Ji)}var fo=o(Fn*Bn,k),$s=Fn,po=o($s,C);if(po==null)var mo=null;else e(65536>=$s),mo=po;var Zs=s(Ci);if(mo==null||Zs==null||fo==null){ci.a=1;break r}var go=fo;for(Oi=Cn=0;Oi<Fn;++Oi){var ti=mo[Oi],yo=ti.G,qo=ti.H,Ac=0,za=1,ps=0;for(nn=0;5>nn;++nn){Ji=uw[nn],yo[nn]=go,qo[nn]=Cn,!nn&&0<Ei&&(Ji+=1<<Ei);i:{var Sp,e1=Ji,kp=ci,cf=Zs,KC=go,YC=Cn,t1=0,xl=kp.m,XC=z(xl,1);if(i(cf,0,0,e1),XC){var QC=z(xl,1)+1,JC=z(xl,1),ww=z(xl,JC==0?1:8);cf[ww]=1,QC==2&&(cf[ww=z(xl,8)]=1);var Ep=1}else{var _w=s(19),xw=z(xl,4)+4;if(19<xw){kp.a=3;var Cp=0;break i}for(Sp=0;Sp<xw;++Sp)_w[EC[Sp]]=z(xl,3);var r1=void 0,uf=void 0,Sw=kp,ZC=_w,Ip=e1,kw=cf,n1=0,Sl=Sw.m,Ew=8,Cw=o(128,k);n:for(;L(Cw,0,7,ZC,19);){if(z(Sl,1)){var eI=2+2*z(Sl,3);if((r1=2+z(Sl,eI))>Ip)break n}else r1=Ip;for(uf=0;uf<Ip&&r1--;){X(Sl);var Iw=Cw[0+(127&K(Sl))];V(Sl,Sl.u+Iw.g);var wu=Iw.value;if(16>wu)kw[uf++]=wu,wu!=0&&(Ew=wu);else{var tI=wu==16,Aw=wu-16,rI=SC[Aw],Tw=z(Sl,xC[Aw])+rI;if(uf+Tw>Ip)break n;for(var nI=tI?Ew:0;0<Tw--;)kw[uf++]=nI}}n1=1;break n}n1||(Sw.a=3),Ep=n1}(Ep=Ep&&!xl.h)&&(t1=L(KC,YC,8,cf,e1)),Ep&&t1!=0?Cp=t1:(kp.a=3,Cp=0)}if(Cp==0)break r;if(za&&kC[nn]==1&&(za=go[Cn].g==0),Ac+=go[Cn].g,Cn+=Cp,3>=nn){var hf,i1=Zs[0];for(hf=1;hf<Ji;++hf)Zs[hf]>i1&&(i1=Zs[hf]);ps+=i1}}if(ti.nd=za,ti.Qb=0,za&&(ti.qb=(yo[3][qo[3]+0].value<<24|yo[1][qo[1]+0].value<<16|yo[2][qo[2]+0].value)>>>0,Ac==0&&256>yo[0][qo[0]+0].value&&(ti.Qb=1,ti.qb+=yo[0][qo[0]+0].value<<8)),ti.jc=!ti.Qb&&6>ps,ti.jc){var Ap,Ua=ti;for(Ap=0;Ap<Ec;++Ap){var kl=Ap,El=Ua.pd[kl],Tp=Ua.G[0][Ua.H[0]+kl];256<=Tp.value?(El.g=Tp.g+256,El.value=Tp.value):(El.g=0,El.value=0,kl>>=Xe(Tp,8,El),kl>>=Xe(Ua.G[1][Ua.H[1]+kl],16,El),kl>>=Xe(Ua.G[2][Ua.H[2]+kl],0,El),Xe(Ua.G[3][Ua.H[3]+kl],24,El))}}}Qi.vc=Nn,Qi.Wb=Fn,Qi.Ya=mo,Qi.yc=fo,cr=1;break t}cr=0}if(!(ge=cr)){ne.a=3;break e}if(0<yt){if(Re.ua=1<<yt,!re(Re.Wa,yt)){ne.a=1,ge=0;break e}}else Re.ua=0;var s1=ne,Nw=ye,iI=_e,o1=s1.s,a1=o1.xc;if(s1.c=Nw,s1.i=iI,o1.md=ae(Nw,a1),o1.wc=a1==0?-1:(1<<a1)-1,Q){ne.xb=OC;break e}if((Je=s(ye*_e))==null){ne.a=1,ge=0;break e}ge=(ge=ut(ne,Je,0,ye,_e,_e,null))&&!Ie.h;break e}return ge?(fe!=null?fe[0]=Je:(e(Je==null),e(Q)),ne.$=0,Q||he(Re)):he(Re),ge}function Be(B,q){var Q=B.c*B.i,ne=Q+q+16*q;return e(B.c<=q),B.V=s(ne),B.V==null?(B.Ta=null,B.Ua=0,B.a=1,0):(B.Ta=B.V,B.Ua=B.Ba+Q+q,1)}function st(B,q){var Q=B.C,ne=q-Q,fe=B.V,ge=B.Ba+B.c*Q;for(e(q<=B.l.o);0<ne;){var ye=16<ne?16:ne,_e=B.l.ma,Ie=B.l.width,Re=Ie*ye,Je=_e.ca,yt=_e.tb+Ie*Q,Pe=B.Ta,rt=B.Ua;Fe(B,ye,fe,ge),rw(Pe,rt,Je,yt,Re),Te(_e,Q,Q+ye,Je,yt,Ie),ne-=ye,fe+=ye*B.c,Q+=ye}e(Q==q),B.C=B.Ma=q}function Ge(){this.ub=this.yd=this.td=this.Rb=0}function pt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function de(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Me(){this.Yb=function(){var B=[];return function q(Q,ne,fe){for(var ge=fe[ne],ye=0;ye<ge&&(Q.push(fe.length>ne+1?[]:0),!(fe.length<ne+1));ye++)q(Q[ye],ne+1,fe)}(B,0,[3,11]),B}()}function Oe(){this.jb=s(3),this.Wc=l([4,8],Me),this.Xc=l([4,17],Me)}function it(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function vt(){this.ld=this.La=this.dd=this.tc=0}function It(){this.Na=this.la=0}function kt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ir(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Zt(){this.uc=this.M=this.Nb=0,this.wa=Array(new vt),this.Y=0,this.ya=Array(new ir),this.aa=0,this.l=new rr}function qt(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ut(){this.cb=this.a=0,this.sc="",this.m=new A,this.Od=new Ge,this.Kc=new pt,this.ed=new it,this.Qa=new de,this.Ic=this.$c=this.Aa=0,this.D=new Zt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,A),this.ia=0,this.pb=o(4,kt),this.Pa=new Oe,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new qt),this.Hd=0,this.rb=Array(new It),this.sb=0,this.wa=Array(new vt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ir),this.L=this.aa=0,this.gd=l([4,2],vt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function sr(B,q){return 0>B?0:B>q?q:B}function rr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ur(){var B=new Ut;return B!=null&&(B.a=0,B.sc="OK",B.cb=0,B.Xb=0,af||(af=Br)),B}function hr(B,q,Q){return B.a==0&&(B.a=q,B.sc=Q,B.cb=0),0}function Mr(B,q,Q){return 3<=Q&&B[q+0]==157&&B[q+1]==1&&B[q+2]==42}function Yr(B,q){if(B==null)return 0;if(B.a=0,B.sc="OK",q==null)return hr(B,2,"null VP8Io passed to VP8GetHeaders()");var Q=q.data,ne=q.w,fe=q.ha;if(4>fe)return hr(B,7,"Truncated header.");var ge=Q[ne+0]|Q[ne+1]<<8|Q[ne+2]<<16,ye=B.Od;if(ye.Rb=!(1&ge),ye.td=ge>>1&7,ye.yd=ge>>4&1,ye.ub=ge>>5,3<ye.td)return hr(B,3,"Incorrect keyframe parameters.");if(!ye.yd)return hr(B,4,"Frame not displayable.");ne+=3,fe-=3;var _e=B.Kc;if(ye.Rb){if(7>fe)return hr(B,7,"cannot parse picture header");if(!Mr(Q,ne,fe))return hr(B,3,"Bad code word");_e.c=16383&(Q[ne+4]<<8|Q[ne+3]),_e.Td=Q[ne+4]>>6,_e.i=16383&(Q[ne+6]<<8|Q[ne+5]),_e.Ud=Q[ne+6]>>6,ne+=7,fe-=7,B.za=_e.c+15>>4,B.Ub=_e.i+15>>4,q.width=_e.c,q.height=_e.i,q.Da=0,q.j=0,q.v=0,q.va=q.width,q.o=q.height,q.da=0,q.ib=q.width,q.hb=q.height,q.U=q.width,q.T=q.height,i((ge=B.Pa).jb,0,255,ge.jb.length),e((ge=B.Qa)!=null),ge.Cb=0,ge.Bb=0,ge.Fb=1,i(ge.Zb,0,0,ge.Zb.length),i(ge.Lb,0,0,ge.Lb)}if(ye.ub>fe)return hr(B,7,"bad partition length");_(ge=B.m,Q,ne,ye.ub),ne+=ye.ub,fe-=ye.ub,ye.Rb&&(_e.Ld=O(ge),_e.Kd=O(ge)),_e=B.Qa;var Ie,Re=B.Pa;if(e(ge!=null),e(_e!=null),_e.Cb=O(ge),_e.Cb){if(_e.Bb=O(ge),O(ge)){for(_e.Fb=O(ge),Ie=0;4>Ie;++Ie)_e.Zb[Ie]=O(ge)?w(ge,7):0;for(Ie=0;4>Ie;++Ie)_e.Lb[Ie]=O(ge)?w(ge,6):0}if(_e.Bb)for(Ie=0;3>Ie;++Ie)Re.jb[Ie]=O(ge)?x(ge,8):255}else _e.Bb=0;if(ge.Ka)return hr(B,3,"cannot parse segment header");if((_e=B.ed).zd=O(ge),_e.Tb=x(ge,6),_e.wb=x(ge,3),_e.Pc=O(ge),_e.Pc&&O(ge)){for(Re=0;4>Re;++Re)O(ge)&&(_e.vd[Re]=w(ge,6));for(Re=0;4>Re;++Re)O(ge)&&(_e.od[Re]=w(ge,6))}if(B.L=_e.Tb==0?0:_e.zd?1:2,ge.Ka)return hr(B,3,"cannot parse filter header");var Je=fe;if(fe=Ie=ne,ne=Ie+Je,_e=Je,B.Xb=(1<<x(B.m,2))-1,Je<3*(Re=B.Xb))Q=7;else{for(Ie+=3*Re,_e-=3*Re,Je=0;Je<Re;++Je){var yt=Q[fe+0]|Q[fe+1]<<8|Q[fe+2]<<16;yt>_e&&(yt=_e),_(B.Jc[+Je],Q,Ie,yt),Ie+=yt,_e-=yt,fe+=3}_(B.Jc[+Re],Q,Ie,_e),Q=Ie<ne?0:5}if(Q!=0)return hr(B,Q,"cannot parse partitions");for(Q=x(Ie=B.m,7),fe=O(Ie)?w(Ie,4):0,ne=O(Ie)?w(Ie,4):0,_e=O(Ie)?w(Ie,4):0,Re=O(Ie)?w(Ie,4):0,Ie=O(Ie)?w(Ie,4):0,Je=B.Qa,yt=0;4>yt;++yt){if(Je.Cb){var Pe=Je.Zb[yt];Je.Fb||(Pe+=Q)}else{if(0<yt){B.pb[yt]=B.pb[0];continue}Pe=Q}var rt=B.pb[yt];rt.Sc[0]=Qg[sr(Pe+fe,127)],rt.Sc[1]=Jg[sr(Pe+0,127)],rt.Eb[0]=2*Qg[sr(Pe+ne,127)],rt.Eb[1]=101581*Jg[sr(Pe+_e,127)]>>16,8>rt.Eb[1]&&(rt.Eb[1]=8),rt.Qc[0]=Qg[sr(Pe+Re,117)],rt.Qc[1]=Jg[sr(Pe+Ie,127)],rt.lc=Pe+Ie}if(!ye.Rb)return hr(B,4,"Not a key frame.");for(O(ge),ye=B.Pa,Q=0;4>Q;++Q){for(fe=0;8>fe;++fe)for(ne=0;3>ne;++ne)for(_e=0;11>_e;++_e)Re=G(ge,PC[Q][fe][ne][_e])?x(ge,8):jC[Q][fe][ne][_e],ye.Wc[Q][fe].Yb[ne][_e]=Re;for(fe=0;17>fe;++fe)ye.Xc[Q][fe]=ye.Wc[Q][MC[fe]]}return B.kc=O(ge),B.kc&&(B.Bd=x(ge,8)),B.cb=1}function Br(B,q,Q,ne,fe,ge,ye){var _e=q[fe].Yb[Q];for(Q=0;16>fe;++fe){if(!G(B,_e[Q+0]))return fe;for(;!G(B,_e[Q+1]);)if(_e=q[++fe].Yb[0],Q=0,fe==16)return 16;var Ie=q[fe+1].Yb;if(G(B,_e[Q+2])){var Re=B,Je=0;if(G(Re,(Pe=_e)[(yt=Q)+3]))if(G(Re,Pe[yt+6])){for(_e=0,yt=2*(Je=G(Re,Pe[yt+8]))+(Pe=G(Re,Pe[yt+9+Je])),Je=0,Pe=TC[yt];Pe[_e];++_e)Je+=Je+G(Re,Pe[_e]);Je+=3+(8<<yt)}else G(Re,Pe[yt+7])?(Je=7+2*G(Re,165),Je+=G(Re,145)):Je=5+G(Re,159);else Je=G(Re,Pe[yt+4])?3+G(Re,Pe[yt+5]):2;_e=Ie[2]}else Je=1,_e=Ie[1];Ie=ye+NC[fe],0>(Re=B).b&&D(Re);var yt,Pe=Re.b,rt=(yt=Re.Ca>>1)-(Re.I>>Pe)>>31;--Re.b,Re.Ca+=rt,Re.Ca|=1,Re.I-=(yt+1&rt)<<Pe,ge[Ie]=((Je^rt)-rt)*ne[(0<fe)+0]}return 16}function si(B){var q=B.rb[B.sb-1];q.la=0,q.Na=0,i(B.zc,0,0,B.zc.length),B.ja=0}function Zr(B,q,Q,ne,fe){fe=B[q+Q+32*ne]+(fe>>3),B[q+Q+32*ne]=-256&fe?0>fe?0:255:fe}function an(B,q,Q,ne,fe,ge){Zr(B,q,0,Q,ne+fe),Zr(B,q,1,Q,ne+ge),Zr(B,q,2,Q,ne-ge),Zr(B,q,3,Q,ne-fe)}function Ln(B){return(20091*B>>16)+B}function Wr(B,q,Q,ne){var fe,ge=0,ye=s(16);for(fe=0;4>fe;++fe){var _e=B[q+0]+B[q+8],Ie=B[q+0]-B[q+8],Re=(35468*B[q+4]>>16)-Ln(B[q+12]),Je=Ln(B[q+4])+(35468*B[q+12]>>16);ye[ge+0]=_e+Je,ye[ge+1]=Ie+Re,ye[ge+2]=Ie-Re,ye[ge+3]=_e-Je,ge+=4,q++}for(fe=ge=0;4>fe;++fe)_e=(B=ye[ge+0]+4)+ye[ge+8],Ie=B-ye[ge+8],Re=(35468*ye[ge+4]>>16)-Ln(ye[ge+12]),Zr(Q,ne,0,0,_e+(Je=Ln(ye[ge+4])+(35468*ye[ge+12]>>16))),Zr(Q,ne,1,0,Ie+Re),Zr(Q,ne,2,0,Ie-Re),Zr(Q,ne,3,0,_e-Je),ge++,ne+=32}function qr(B,q,Q,ne){var fe=B[q+0]+4,ge=35468*B[q+4]>>16,ye=Ln(B[q+4]),_e=35468*B[q+1]>>16;an(Q,ne,0,fe+ye,B=Ln(B[q+1]),_e),an(Q,ne,1,fe+ge,B,_e),an(Q,ne,2,fe-ge,B,_e),an(Q,ne,3,fe-ye,B,_e)}function ki(B,q,Q,ne,fe){Wr(B,q,Q,ne),fe&&Wr(B,q+16,Q,ne+4)}function _t(B,q,Q,ne){Ic(B,q+0,Q,ne,1),Ic(B,q+32,Q,ne+128,1)}function Et(B,q,Q,ne){var fe;for(B=B[q+0]+4,fe=0;4>fe;++fe)for(q=0;4>q;++q)Zr(Q,ne,q,fe,B)}function Qe(B,q,Q,ne){B[q+0]&&Dn(B,q+0,Q,ne),B[q+16]&&Dn(B,q+16,Q,ne+4),B[q+32]&&Dn(B,q+32,Q,ne+128),B[q+48]&&Dn(B,q+48,Q,ne+128+4)}function Ae(B,q,Q,ne){var fe,ge=s(16);for(fe=0;4>fe;++fe){var ye=B[q+0+fe]+B[q+12+fe],_e=B[q+4+fe]+B[q+8+fe],Ie=B[q+4+fe]-B[q+8+fe],Re=B[q+0+fe]-B[q+12+fe];ge[0+fe]=ye+_e,ge[8+fe]=ye-_e,ge[4+fe]=Re+Ie,ge[12+fe]=Re-Ie}for(fe=0;4>fe;++fe)ye=(B=ge[0+4*fe]+3)+ge[3+4*fe],_e=ge[1+4*fe]+ge[2+4*fe],Ie=ge[1+4*fe]-ge[2+4*fe],Re=B-ge[3+4*fe],Q[ne+0]=ye+_e>>3,Q[ne+16]=Re+Ie>>3,Q[ne+32]=ye-_e>>3,Q[ne+48]=Re-Ie>>3,ne+=64}function Ee(B,q,Q){var ne,fe=q-32,ge=ho,ye=255-B[fe-1];for(ne=0;ne<Q;++ne){var _e,Ie=ge,Re=ye+B[q-1];for(_e=0;_e<Q;++_e)B[q+_e]=Ie[Re+B[fe+_e]];q+=32}}function gt(B,q){Ee(B,q,4)}function $t(B,q){Ee(B,q,8)}function dt(B,q){Ee(B,q,16)}function Tt(B,q){var Q;for(Q=0;16>Q;++Q)n(B,q+32*Q,B,q-32,16)}function er(B,q){var Q;for(Q=16;0<Q;--Q)i(B,q,B[q-1],16),q+=32}function Ur(B,q,Q){var ne;for(ne=0;16>ne;++ne)i(q,Q+32*ne,B,16)}function pn(B,q){var Q,ne=16;for(Q=0;16>Q;++Q)ne+=B[q-1+32*Q]+B[q+Q-32];Ur(ne>>5,B,q)}function Dt(B,q){var Q,ne=8;for(Q=0;16>Q;++Q)ne+=B[q-1+32*Q];Ur(ne>>4,B,q)}function kr(B,q){var Q,ne=8;for(Q=0;16>Q;++Q)ne+=B[q+Q-32];Ur(ne>>4,B,q)}function fr(B,q){Ur(128,B,q)}function tr(B,q,Q){return B+2*q+Q+2>>2}function Vr(B,q){var Q,ne=q-32;for(ne=new Uint8Array([tr(B[ne-1],B[ne+0],B[ne+1]),tr(B[ne+0],B[ne+1],B[ne+2]),tr(B[ne+1],B[ne+2],B[ne+3]),tr(B[ne+2],B[ne+3],B[ne+4])]),Q=0;4>Q;++Q)n(B,q+32*Q,ne,0,ne.length)}function Cr(B,q){var Q=B[q-1],ne=B[q-1+32],fe=B[q-1+64],ge=B[q-1+96];Z(B,q+0,16843009*tr(B[q-1-32],Q,ne)),Z(B,q+32,16843009*tr(Q,ne,fe)),Z(B,q+64,16843009*tr(ne,fe,ge)),Z(B,q+96,16843009*tr(fe,ge,ge))}function or(B,q){var Q,ne=4;for(Q=0;4>Q;++Q)ne+=B[q+Q-32]+B[q-1+32*Q];for(ne>>=3,Q=0;4>Q;++Q)i(B,q+32*Q,ne,4)}function Xr(B,q){var Q=B[q-1+0],ne=B[q-1+32],fe=B[q-1+64],ge=B[q-1-32],ye=B[q+0-32],_e=B[q+1-32],Ie=B[q+2-32],Re=B[q+3-32];B[q+0+96]=tr(ne,fe,B[q-1+96]),B[q+1+96]=B[q+0+64]=tr(Q,ne,fe),B[q+2+96]=B[q+1+64]=B[q+0+32]=tr(ge,Q,ne),B[q+3+96]=B[q+2+64]=B[q+1+32]=B[q+0+0]=tr(ye,ge,Q),B[q+3+64]=B[q+2+32]=B[q+1+0]=tr(_e,ye,ge),B[q+3+32]=B[q+2+0]=tr(Ie,_e,ye),B[q+3+0]=tr(Re,Ie,_e)}function _r(B,q){var Q=B[q+1-32],ne=B[q+2-32],fe=B[q+3-32],ge=B[q+4-32],ye=B[q+5-32],_e=B[q+6-32],Ie=B[q+7-32];B[q+0+0]=tr(B[q+0-32],Q,ne),B[q+1+0]=B[q+0+32]=tr(Q,ne,fe),B[q+2+0]=B[q+1+32]=B[q+0+64]=tr(ne,fe,ge),B[q+3+0]=B[q+2+32]=B[q+1+64]=B[q+0+96]=tr(fe,ge,ye),B[q+3+32]=B[q+2+64]=B[q+1+96]=tr(ge,ye,_e),B[q+3+64]=B[q+2+96]=tr(ye,_e,Ie),B[q+3+96]=tr(_e,Ie,Ie)}function _n(B,q){var Q=B[q-1+0],ne=B[q-1+32],fe=B[q-1+64],ge=B[q-1-32],ye=B[q+0-32],_e=B[q+1-32],Ie=B[q+2-32],Re=B[q+3-32];B[q+0+0]=B[q+1+64]=ge+ye+1>>1,B[q+1+0]=B[q+2+64]=ye+_e+1>>1,B[q+2+0]=B[q+3+64]=_e+Ie+1>>1,B[q+3+0]=Ie+Re+1>>1,B[q+0+96]=tr(fe,ne,Q),B[q+0+64]=tr(ne,Q,ge),B[q+0+32]=B[q+1+96]=tr(Q,ge,ye),B[q+1+32]=B[q+2+96]=tr(ge,ye,_e),B[q+2+32]=B[q+3+96]=tr(ye,_e,Ie),B[q+3+32]=tr(_e,Ie,Re)}function Gt(B,q){var Q=B[q+0-32],ne=B[q+1-32],fe=B[q+2-32],ge=B[q+3-32],ye=B[q+4-32],_e=B[q+5-32],Ie=B[q+6-32],Re=B[q+7-32];B[q+0+0]=Q+ne+1>>1,B[q+1+0]=B[q+0+64]=ne+fe+1>>1,B[q+2+0]=B[q+1+64]=fe+ge+1>>1,B[q+3+0]=B[q+2+64]=ge+ye+1>>1,B[q+0+32]=tr(Q,ne,fe),B[q+1+32]=B[q+0+96]=tr(ne,fe,ge),B[q+2+32]=B[q+1+96]=tr(fe,ge,ye),B[q+3+32]=B[q+2+96]=tr(ge,ye,_e),B[q+3+64]=tr(ye,_e,Ie),B[q+3+96]=tr(_e,Ie,Re)}function Tn(B,q){var Q=B[q-1+0],ne=B[q-1+32],fe=B[q-1+64],ge=B[q-1+96];B[q+0+0]=Q+ne+1>>1,B[q+2+0]=B[q+0+32]=ne+fe+1>>1,B[q+2+32]=B[q+0+64]=fe+ge+1>>1,B[q+1+0]=tr(Q,ne,fe),B[q+3+0]=B[q+1+32]=tr(ne,fe,ge),B[q+3+32]=B[q+1+64]=tr(fe,ge,ge),B[q+3+64]=B[q+2+64]=B[q+0+96]=B[q+1+96]=B[q+2+96]=B[q+3+96]=ge}function di(B,q){var Q=B[q-1+0],ne=B[q-1+32],fe=B[q-1+64],ge=B[q-1+96],ye=B[q-1-32],_e=B[q+0-32],Ie=B[q+1-32],Re=B[q+2-32];B[q+0+0]=B[q+2+32]=Q+ye+1>>1,B[q+0+32]=B[q+2+64]=ne+Q+1>>1,B[q+0+64]=B[q+2+96]=fe+ne+1>>1,B[q+0+96]=ge+fe+1>>1,B[q+3+0]=tr(_e,Ie,Re),B[q+2+0]=tr(ye,_e,Ie),B[q+1+0]=B[q+3+32]=tr(Q,ye,_e),B[q+1+32]=B[q+3+64]=tr(ne,Q,ye),B[q+1+64]=B[q+3+96]=tr(fe,ne,Q),B[q+1+96]=tr(ge,fe,ne)}function $n(B,q){var Q;for(Q=0;8>Q;++Q)n(B,q+32*Q,B,q-32,8)}function oi(B,q){var Q;for(Q=0;8>Q;++Q)i(B,q,B[q-1],8),q+=32}function ai(B,q,Q){var ne;for(ne=0;8>ne;++ne)i(q,Q+32*ne,B,8)}function ss(B,q){var Q,ne=8;for(Q=0;8>Q;++Q)ne+=B[q+Q-32]+B[q-1+32*Q];ai(ne>>4,B,q)}function li(B,q){var Q,ne=4;for(Q=0;8>Q;++Q)ne+=B[q+Q-32];ai(ne>>3,B,q)}function Nr(B,q){var Q,ne=4;for(Q=0;8>Q;++Q)ne+=B[q-1+32*Q];ai(ne>>3,B,q)}function Hr(B,q){ai(128,B,q)}function Yt(B,q,Q){var ne=B[q-Q],fe=B[q+0],ge=3*(fe-ne)+Hg[1020+B[q-2*Q]-B[q+Q]],ye=pp[112+(ge+4>>3)];B[q-Q]=ho[255+ne+pp[112+(ge+3>>3)]],B[q+0]=ho[255+fe-ye]}function dr(B,q,Q,ne){var fe=B[q+0],ge=B[q+Q];return jo[255+B[q-2*Q]-B[q-Q]]>ne||jo[255+ge-fe]>ne}function Or(B,q,Q,ne){return 4*jo[255+B[q-Q]-B[q+0]]+jo[255+B[q-2*Q]-B[q+Q]]<=ne}function fn(B,q,Q,ne,fe){var ge=B[q-3*Q],ye=B[q-2*Q],_e=B[q-Q],Ie=B[q+0],Re=B[q+Q],Je=B[q+2*Q],yt=B[q+3*Q];return 4*jo[255+_e-Ie]+jo[255+ye-Re]>ne?0:jo[255+B[q-4*Q]-ge]<=fe&&jo[255+ge-ye]<=fe&&jo[255+ye-_e]<=fe&&jo[255+yt-Je]<=fe&&jo[255+Je-Re]<=fe&&jo[255+Re-Ie]<=fe}function Dr(B,q,Q,ne){var fe=2*ne+1;for(ne=0;16>ne;++ne)Or(B,q+ne,Q,fe)&&Yt(B,q+ne,Q)}function ln(B,q,Q,ne){var fe=2*ne+1;for(ne=0;16>ne;++ne)Or(B,q+ne*Q,1,fe)&&Yt(B,q+ne*Q,1)}function pi(B,q,Q,ne){var fe;for(fe=3;0<fe;--fe)Dr(B,q+=4*Q,Q,ne)}function ji(B,q,Q,ne){var fe;for(fe=3;0<fe;--fe)ln(B,q+=4,Q,ne)}function qn(B,q,Q,ne,fe,ge,ye,_e){for(ge=2*ge+1;0<fe--;){if(fn(B,q,Q,ge,ye))if(dr(B,q,Q,_e))Yt(B,q,Q);else{var Ie=B,Re=q,Je=Q,yt=Ie[Re-2*Je],Pe=Ie[Re-Je],rt=Ie[Re+0],ft=Ie[Re+Je],Rt=Ie[Re+2*Je],mt=27*(Ot=Hg[1020+3*(rt-Pe)+Hg[1020+yt-ft]])+63>>7,Pt=18*Ot+63>>7,Ot=9*Ot+63>>7;Ie[Re-3*Je]=ho[255+Ie[Re-3*Je]+Ot],Ie[Re-2*Je]=ho[255+yt+Pt],Ie[Re-Je]=ho[255+Pe+mt],Ie[Re+0]=ho[255+rt-mt],Ie[Re+Je]=ho[255+ft-Pt],Ie[Re+2*Je]=ho[255+Rt-Ot]}q+=ne}}function mi(B,q,Q,ne,fe,ge,ye,_e){for(ge=2*ge+1;0<fe--;){if(fn(B,q,Q,ge,ye))if(dr(B,q,Q,_e))Yt(B,q,Q);else{var Ie=B,Re=q,Je=Q,yt=Ie[Re-Je],Pe=Ie[Re+0],rt=Ie[Re+Je],ft=pp[112+(4+(Rt=3*(Pe-yt))>>3)],Rt=pp[112+(Rt+3>>3)],mt=ft+1>>1;Ie[Re-2*Je]=ho[255+Ie[Re-2*Je]+mt],Ie[Re-Je]=ho[255+yt+Rt],Ie[Re+0]=ho[255+Pe-ft],Ie[Re+Je]=ho[255+rt-mt]}q+=ne}}function Ri(B,q,Q,ne,fe,ge){qn(B,q,Q,1,16,ne,fe,ge)}function Hn(B,q,Q,ne,fe,ge){qn(B,q,1,Q,16,ne,fe,ge)}function Qs(B,q,Q,ne,fe,ge){var ye;for(ye=3;0<ye;--ye)mi(B,q+=4*Q,Q,1,16,ne,fe,ge)}function Y(B,q,Q,ne,fe,ge){var ye;for(ye=3;0<ye;--ye)mi(B,q+=4,1,Q,16,ne,fe,ge)}function ce(B,q,Q,ne,fe,ge,ye,_e){qn(B,q,fe,1,8,ge,ye,_e),qn(Q,ne,fe,1,8,ge,ye,_e)}function je(B,q,Q,ne,fe,ge,ye,_e){qn(B,q,1,fe,8,ge,ye,_e),qn(Q,ne,1,fe,8,ge,ye,_e)}function $e(B,q,Q,ne,fe,ge,ye,_e){mi(B,q+4*fe,fe,1,8,ge,ye,_e),mi(Q,ne+4*fe,fe,1,8,ge,ye,_e)}function tt(B,q,Q,ne,fe,ge,ye,_e){mi(B,q+4,1,fe,8,ge,ye,_e),mi(Q,ne+4,1,fe,8,ge,ye,_e)}function Nt(){this.ba=new jt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Qt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Vt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function br(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Er(){this.ua=0,this.Wa=new ie,this.vb=new ie,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new C,this.yc=new k}function $r(){this.xb=this.a=0,this.l=new rr,this.ca=new jt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new H,this.Pb=0,this.wd=new H,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Er,this.ab=0,this.gc=o(4,br),this.Oc=0}function Lr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new rr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function vn(B,q,Q,ne,fe,ge,ye){for(B=B==null?0:B[q+0],q=0;q<ye;++q)fe[ge+q]=B+Q[ne+q]&255,B=fe[ge+q]}function Qn(B,q,Q,ne,fe,ge,ye){var _e;if(B==null)vn(null,null,Q,ne,fe,ge,ye);else for(_e=0;_e<ye;++_e)fe[ge+_e]=B[q+_e]+Q[ne+_e]&255}function Gn(B,q,Q,ne,fe,ge,ye){if(B==null)vn(null,null,Q,ne,fe,ge,ye);else{var _e,Ie=B[q+0],Re=Ie,Je=Ie;for(_e=0;_e<ye;++_e)Re=Je+(Ie=B[q+_e])-Re,Je=Q[ne+_e]+(-256&Re?0>Re?0:255:Re)&255,Re=Ie,fe[ge+_e]=Je}}function U(B,q,Q,ne){var fe=q.width,ge=q.o;if(e(B!=null&&q!=null),0>Q||0>=ne||Q+ne>ge)return null;if(!B.Cc){if(B.ga==null){var ye;if(B.ga=new Lr,(ye=B.ga==null)||(ye=q.width*q.o,e(B.Gb.length==0),B.Gb=s(ye),B.Uc=0,B.Gb==null?ye=0:(B.mb=B.Gb,B.nb=B.Uc,B.rc=null,ye=1),ye=!ye),!ye){ye=B.ga;var _e=B.Fa,Ie=B.P,Re=B.qc,Je=B.mb,yt=B.nb,Pe=Ie+1,rt=Re-1,ft=ye.l;if(e(_e!=null&&Je!=null&&q!=null),_l[0]=null,_l[1]=vn,_l[2]=Qn,_l[3]=Gn,ye.ca=Je,ye.tb=yt,ye.c=q.width,ye.i=q.height,e(0<ye.c&&0<ye.i),1>=Re)q=0;else if(ye.$a=3&_e[Ie+0],ye.Z=_e[Ie+0]>>2&3,ye.Lc=_e[Ie+0]>>4&3,Ie=_e[Ie+0]>>6&3,0>ye.$a||1<ye.$a||4<=ye.Z||1<ye.Lc||Ie)q=0;else if(ft.put=Ft,ft.ac=jr,ft.bc=zr,ft.ma=ye,ft.width=q.width,ft.height=q.height,ft.Da=q.Da,ft.v=q.v,ft.va=q.va,ft.j=q.j,ft.o=q.o,ye.$a)e:{e(ye.$a==1),q=Ce();t:for(;;){if(q==null){q=0;break e}if(e(ye!=null),ye.mc=q,q.c=ye.c,q.i=ye.i,q.l=ye.l,q.l.ma=ye,q.l.width=ye.c,q.l.height=ye.i,q.a=0,S(q.m,_e,Pe,rt),!Ve(ye.c,ye.i,1,q,null)||(q.ab==1&&q.gc[0].hc==3&&pe(q.s)?(ye.ic=1,_e=q.c*q.i,q.Ta=null,q.Ua=0,q.V=s(_e),q.Ba=0,q.V==null?(q.a=1,q=0):q=1):(ye.ic=0,q=Be(q,ye.c)),!q))break t;q=1;break e}ye.mc=null,q=0}else q=rt>=ye.c*ye.i;ye=!q}if(ye)return null;B.ga.Lc!=1?B.Ga=0:ne=ge-Q}e(B.ga!=null),e(Q+ne<=ge);e:{if(q=(_e=B.ga).c,ge=_e.l.o,_e.$a==0){if(Pe=B.rc,rt=B.Vc,ft=B.Fa,Ie=B.P+1+Q*q,Re=B.mb,Je=B.nb+Q*q,e(Ie<=B.P+B.qc),_e.Z!=0)for(e(_l[_e.Z]!=null),ye=0;ye<ne;++ye)_l[_e.Z](Pe,rt,ft,Ie,Re,Je,q),Pe=Re,rt=Je,Je+=q,Ie+=q;else for(ye=0;ye<ne;++ye)n(Re,Je,ft,Ie,q),Pe=Re,rt=Je,Je+=q,Ie+=q;B.rc=Pe,B.Vc=rt}else{if(e(_e.mc!=null),q=Q+ne,e((ye=_e.mc)!=null),e(q<=ye.i),ye.C>=q)q=1;else if(_e.ic||bt(),_e.ic){_e=ye.V,Pe=ye.Ba,rt=ye.c;var Rt=ye.i,mt=(ft=1,Ie=ye.$/rt,Re=ye.$%rt,Je=ye.m,yt=ye.s,ye.$),Pt=rt*Rt,Ot=rt*q,Kt=yt.wc,Wt=mt<Ot?Le(yt,Re,Ie):null;e(mt<=Pt),e(q<=Rt),e(pe(yt));t:for(;;){for(;!Je.h&&mt<Ot;){if(Re&Kt||(Wt=Le(yt,Re,Ie)),e(Wt!=null),X(Je),256>(Rt=Ye(Wt.G[0],Wt.H[0],Je)))_e[Pe+mt]=Rt,++mt,++Re>=rt&&(Re=0,++Ie<=q&&!(Ie%16)&&Ze(ye,Ie));else{if(!(280>Rt)){ft=0;break t}Rt=mr(Rt-256,Je);var Pr,wr=Ye(Wt.G[4],Wt.H[4],Je);if(X(Je),!(mt>=(wr=Ue(rt,wr=mr(wr,Je)))&&Pt-mt>=Rt)){ft=0;break t}for(Pr=0;Pr<Rt;++Pr)_e[Pe+mt+Pr]=_e[Pe+mt+Pr-wr];for(mt+=Rt,Re+=Rt;Re>=rt;)Re-=rt,++Ie<=q&&!(Ie%16)&&Ze(ye,Ie);mt<Ot&&Re&Kt&&(Wt=Le(yt,Re,Ie))}e(Je.h==J(Je))}Ze(ye,Ie>q?q:Ie);break t}!ft||Je.h&&mt<Pt?(ft=0,ye.a=Je.h?5:3):ye.$=mt,q=ft}else q=ut(ye,ye.V,ye.Ba,ye.c,ye.i,q,st);if(!q){ne=0;break e}}Q+ne>=ge&&(B.Cc=1),ne=1}if(!ne)return null;if(B.Cc&&((ne=B.ga)!=null&&(ne.mc=null),B.ga=null,0<B.Ga))return alert("todo:WebPDequantizeLevels"),null}return B.nb+Q*fe}function ee(B,q,Q,ne,fe,ge){for(;0<fe--;){var ye,_e=B,Ie=q+(Q?1:0),Re=B,Je=q+(Q?0:3);for(ye=0;ye<ne;++ye){var yt=Re[Je+4*ye];yt!=255&&(yt*=32897,_e[Ie+4*ye+0]=_e[Ie+4*ye+0]*yt>>23,_e[Ie+4*ye+1]=_e[Ie+4*ye+1]*yt>>23,_e[Ie+4*ye+2]=_e[Ie+4*ye+2]*yt>>23)}q+=ge}}function se(B,q,Q,ne,fe){for(;0<ne--;){var ge;for(ge=0;ge<Q;++ge){var ye=B[q+2*ge+0],_e=15&(Re=B[q+2*ge+1]),Ie=4369*_e,Re=(240&Re|Re>>4)*Ie>>16;B[q+2*ge+0]=(240&ye|ye>>4)*Ie>>16&240|(15&ye|ye<<4)*Ie>>16>>4&15,B[q+2*ge+1]=240&Re|_e}q+=fe}}function xe(B,q,Q,ne,fe,ge,ye,_e){var Ie,Re,Je=255;for(Re=0;Re<fe;++Re){for(Ie=0;Ie<ne;++Ie){var yt=B[q+Ie];ge[ye+4*Ie]=yt,Je&=yt}q+=Q,ye+=_e}return Je!=255}function ht(B,q,Q,ne,fe){var ge;for(ge=0;ge<fe;++ge)Q[ne+ge]=B[q+ge]>>8}function bt(){of=ee,ew=se,tw=xe,rw=ht}function Jt(B,q,Q){j[B]=function(ne,fe,ge,ye,_e,Ie,Re,Je,yt,Pe,rt,ft,Rt,mt,Pt,Ot,Kt){var Wt,Pr=Kt-1>>1,wr=_e[Ie+0]|Re[Je+0]<<16,cn=yt[Pe+0]|rt[ft+0]<<16;e(ne!=null);var Ir=3*wr+cn+131074>>2;for(q(ne[fe+0],255&Ir,Ir>>16,Rt,mt),ge!=null&&(Ir=3*cn+wr+131074>>2,q(ge[ye+0],255&Ir,Ir>>16,Pt,Ot)),Wt=1;Wt<=Pr;++Wt){var xn=_e[Ie+Wt]|Re[Je+Wt]<<16,Xi=yt[Pe+Wt]|rt[ft+Wt]<<16,un=wr+xn+cn+Xi+524296,Ar=un+2*(xn+cn)>>3;Ir=Ar+wr>>1,wr=(un=un+2*(wr+Xi)>>3)+xn>>1,q(ne[fe+2*Wt-1],255&Ir,Ir>>16,Rt,mt+(2*Wt-1)*Q),q(ne[fe+2*Wt-0],255&wr,wr>>16,Rt,mt+(2*Wt-0)*Q),ge!=null&&(Ir=un+cn>>1,wr=Ar+Xi>>1,q(ge[ye+2*Wt-1],255&Ir,Ir>>16,Pt,Ot+(2*Wt-1)*Q),q(ge[ye+2*Wt+0],255&wr,wr>>16,Pt,Ot+(2*Wt+0)*Q)),wr=xn,cn=Xi}1&Kt||(Ir=3*wr+cn+131074>>2,q(ne[fe+Kt-1],255&Ir,Ir>>16,Rt,mt+(Kt-1)*Q),ge!=null&&(Ir=3*cn+wr+131074>>2,q(ge[ye+Kt-1],255&Ir,Ir>>16,Pt,Ot+(Kt-1)*Q)))}}function Jr(){Ro[mp]=LC,Ro[gp]=dw,Ro[lw]=DC,Ro[yp]=pw,Ro[bp]=mw,Ro[Gg]=gw,Ro[cw]=FC,Ro[Kg]=dw,Ro[Yg]=pw,Ro[vp]=mw,Ro[Xg]=gw}function Jn(B){return B&-16384?0>B?0:255:B>>BC}function wn(B,q){return Jn((19077*B>>8)+(26149*q>>8)-14234)}function Zn(B,q,Q){return Jn((19077*B>>8)-(6419*q>>8)-(13320*Q>>8)+8708)}function os(B,q){return Jn((19077*B>>8)+(33050*q>>8)-17685)}function Ss(B,q,Q,ne,fe){ne[fe+0]=wn(B,Q),ne[fe+1]=Zn(B,q,Q),ne[fe+2]=os(B,q)}function ei(B,q,Q,ne,fe){ne[fe+0]=os(B,q),ne[fe+1]=Zn(B,q,Q),ne[fe+2]=wn(B,Q)}function ks(B,q,Q,ne,fe){var ge=Zn(B,q,Q);q=ge<<3&224|os(B,q)>>3,ne[fe+0]=248&wn(B,Q)|ge>>5,ne[fe+1]=q}function Ao(B,q,Q,ne,fe){var ge=240&os(B,q)|15;ne[fe+0]=240&wn(B,Q)|Zn(B,q,Q)>>4,ne[fe+1]=ge}function Oa(B,q,Q,ne,fe){ne[fe+0]=255,Ss(B,q,Q,ne,fe+1)}function Xh(B,q,Q,ne,fe){ei(B,q,Q,ne,fe),ne[fe+3]=255}function zs(B,q,Q,ne,fe){Ss(B,q,Q,ne,fe),ne[fe+3]=255}function La(B,q,Q){j[B]=function(ne,fe,ge,ye,_e,Ie,Re,Je,yt){for(var Pe=Je+(-2&yt)*Q;Je!=Pe;)q(ne[fe+0],ge[ye+0],_e[Ie+0],Re,Je),q(ne[fe+1],ge[ye+0],_e[Ie+0],Re,Je+Q),fe+=2,++ye,++Ie,Je+=2*Q;1&yt&&q(ne[fe+0],ge[ye+0],_e[Ie+0],Re,Je)}}function yu(B,q,Q){return Q==0?B==0?q==0?6:5:q==0?4:0:Q}function hp(B,q,Q,ne,fe){switch(B>>>30){case 3:Ic(q,Q,ne,fe,0);break;case 2:No(q,Q,ne,fe);break;case 1:Dn(q,Q,ne,fe)}}function To(B,q){var Q,ne,fe=q.M,ge=q.Nb,ye=B.oc,_e=B.pc+40,Ie=B.oc,Re=B.pc+584,Je=B.oc,yt=B.pc+600;for(Q=0;16>Q;++Q)ye[_e+32*Q-1]=129;for(Q=0;8>Q;++Q)Ie[Re+32*Q-1]=129,Je[yt+32*Q-1]=129;for(0<fe?ye[_e-1-32]=Ie[Re-1-32]=Je[yt-1-32]=129:(i(ye,_e-32-1,127,21),i(Ie,Re-32-1,127,9),i(Je,yt-32-1,127,9)),ne=0;ne<B.za;++ne){var Pe=q.ya[q.aa+ne];if(0<ne){for(Q=-1;16>Q;++Q)n(ye,_e+32*Q-4,ye,_e+32*Q+12,4);for(Q=-1;8>Q;++Q)n(Ie,Re+32*Q-4,Ie,Re+32*Q+4,4),n(Je,yt+32*Q-4,Je,yt+32*Q+4,4)}var rt=B.Gd,ft=B.Hd+ne,Rt=Pe.ad,mt=Pe.Hc;if(0<fe&&(n(ye,_e-32,rt[ft].y,0,16),n(Ie,Re-32,rt[ft].f,0,8),n(Je,yt-32,rt[ft].ea,0,8)),Pe.Za){var Pt=ye,Ot=_e-32+16;for(0<fe&&(ne>=B.za-1?i(Pt,Ot,rt[ft].y[15],4):n(Pt,Ot,rt[ft+1].y,0,4)),Q=0;4>Q;Q++)Pt[Ot+128+Q]=Pt[Ot+256+Q]=Pt[Ot+384+Q]=Pt[Ot+0+Q];for(Q=0;16>Q;++Q,mt<<=2)Pt=ye,Ot=_e+bw[Q],$o[Pe.Ob[Q]](Pt,Ot),hp(mt,Rt,16*+Q,Pt,Ot)}else if(Pt=yu(ne,fe,Pe.Ob[0]),wl[Pt](ye,_e),mt!=0)for(Q=0;16>Q;++Q,mt<<=2)hp(mt,Rt,16*+Q,ye,_e+bw[Q]);for(Q=Pe.Gc,Pt=yu(ne,fe,Pe.Dd),Ba[Pt](Ie,Re),Ba[Pt](Je,yt),mt=Rt,Pt=Ie,Ot=Re,255&(Pe=0|Q)&&(170&Pe?ha(mt,256,Pt,Ot):Kn(mt,256,Pt,Ot)),Pe=Je,mt=yt,255&(Q>>=8)&&(170&Q?ha(Rt,320,Pe,mt):Kn(Rt,320,Pe,mt)),fe<B.Ub-1&&(n(rt[ft].y,0,ye,_e+480,16),n(rt[ft].f,0,Ie,Re+224,8),n(rt[ft].ea,0,Je,yt+224,8)),Q=8*ge*B.B,rt=B.sa,ft=B.ta+16*ne+16*ge*B.R,Rt=B.qa,Pe=B.ra+8*ne+Q,mt=B.Ha,Pt=B.Ia+8*ne+Q,Q=0;16>Q;++Q)n(rt,ft+Q*B.R,ye,_e+32*Q,16);for(Q=0;8>Q;++Q)n(Rt,Pe+Q*B.B,Ie,Re+32*Q,8),n(mt,Pt+Q*B.B,Je,yt+32*Q,8)}}function kc(B,q,Q,ne,fe,ge,ye,_e,Ie){var Re=[0],Je=[0],yt=0,Pe=Ie!=null?Ie.kd:0,rt=Ie??new Vt;if(B==null||12>Q)return 7;rt.data=B,rt.w=q,rt.ha=Q,q=[q],Q=[Q],rt.gb=[rt.gb];e:{var ft=q,Rt=Q,mt=rt.gb;if(e(B!=null),e(Rt!=null),e(mt!=null),mt[0]=0,12<=Rt[0]&&!t(B,ft[0],"RIFF")){if(t(B,ft[0]+8,"WEBP")){mt=3;break e}var Pt=oe(B,ft[0]+4);if(12>Pt||4294967286<Pt){mt=3;break e}if(Pe&&Pt>Rt[0]-8){mt=7;break e}mt[0]=Pt,ft[0]+=12,Rt[0]-=12}mt=0}if(mt!=0)return mt;for(Pt=0<rt.gb[0],Q=Q[0];;){e:{var Ot=B;Rt=q,mt=Q;var Kt=Re,Wt=Je,Pr=ft=[0];if((Ir=yt=[yt])[0]=0,8>mt[0])mt=7;else{if(!t(Ot,Rt[0],"VP8X")){if(oe(Ot,Rt[0]+4)!=10){mt=3;break e}if(18>mt[0]){mt=7;break e}var wr=oe(Ot,Rt[0]+8),cn=1+te(Ot,Rt[0]+12);if(2147483648<=cn*(Ot=1+te(Ot,Rt[0]+15))){mt=3;break e}Pr!=null&&(Pr[0]=wr),Kt!=null&&(Kt[0]=cn),Wt!=null&&(Wt[0]=Ot),Rt[0]+=18,mt[0]-=18,Ir[0]=1}mt=0}}if(yt=yt[0],ft=ft[0],mt!=0)return mt;if(Rt=!!(2&ft),!Pt&&yt)return 3;if(ge!=null&&(ge[0]=!!(16&ft)),ye!=null&&(ye[0]=Rt),_e!=null&&(_e[0]=0),ye=Re[0],ft=Je[0],yt&&Rt&&Ie==null){mt=0;break}if(4>Q){mt=7;break}if(Pt&&yt||!Pt&&!yt&&!t(B,q[0],"ALPH")){Q=[Q],rt.na=[rt.na],rt.P=[rt.P],rt.Sa=[rt.Sa];e:{wr=B,mt=q,Pt=Q;var Ir=rt.gb;Kt=rt.na,Wt=rt.P,Pr=rt.Sa,cn=22,e(wr!=null),e(Pt!=null),Ot=mt[0];var xn=Pt[0];for(e(Kt!=null),e(Pr!=null),Kt[0]=null,Wt[0]=null,Pr[0]=0;;){if(mt[0]=Ot,Pt[0]=xn,8>xn){mt=7;break e}var Xi=oe(wr,Ot+4);if(4294967286<Xi){mt=3;break e}var un=8+Xi+1&-2;if(cn+=un,0<Ir&&cn>Ir){mt=3;break e}if(!t(wr,Ot,"VP8 ")||!t(wr,Ot,"VP8L")){mt=0;break e}if(xn[0]<un){mt=7;break e}t(wr,Ot,"ALPH")||(Kt[0]=wr,Wt[0]=Ot+8,Pr[0]=Xi),Ot+=un,xn-=un}}if(Q=Q[0],rt.na=rt.na[0],rt.P=rt.P[0],rt.Sa=rt.Sa[0],mt!=0)break}Q=[Q],rt.Ja=[rt.Ja],rt.xa=[rt.xa];e:if(Ir=B,mt=q,Pt=Q,Kt=rt.gb[0],Wt=rt.Ja,Pr=rt.xa,wr=mt[0],Ot=!t(Ir,wr,"VP8 "),cn=!t(Ir,wr,"VP8L"),e(Ir!=null),e(Pt!=null),e(Wt!=null),e(Pr!=null),8>Pt[0])mt=7;else{if(Ot||cn){if(Ir=oe(Ir,wr+4),12<=Kt&&Ir>Kt-12){mt=3;break e}if(Pe&&Ir>Pt[0]-8){mt=7;break e}Wt[0]=Ir,mt[0]+=8,Pt[0]-=8,Pr[0]=cn}else Pr[0]=5<=Pt[0]&&Ir[wr+0]==47&&!(Ir[wr+4]>>5),Wt[0]=Pt[0];mt=0}if(Q=Q[0],rt.Ja=rt.Ja[0],rt.xa=rt.xa[0],q=q[0],mt!=0)break;if(4294967286<rt.Ja)return 3;if(_e==null||Rt||(_e[0]=rt.xa?2:1),ye=[ye],ft=[ft],rt.xa){if(5>Q){mt=7;break}_e=ye,Pe=ft,Rt=ge,B==null||5>Q?B=0:5<=Q&&B[q+0]==47&&!(B[q+4]>>5)?(Pt=[0],Ir=[0],Kt=[0],S(Wt=new H,B,q,Q),Rr(Wt,Pt,Ir,Kt)?(_e!=null&&(_e[0]=Pt[0]),Pe!=null&&(Pe[0]=Ir[0]),Rt!=null&&(Rt[0]=Kt[0]),B=1):B=0):B=0}else{if(10>Q){mt=7;break}_e=ft,B==null||10>Q||!Mr(B,q+3,Q-3)?B=0:(Pe=B[q+0]|B[q+1]<<8|B[q+2]<<16,Rt=16383&(B[q+7]<<8|B[q+6]),B=16383&(B[q+9]<<8|B[q+8]),1&Pe||3<(Pe>>1&7)||!(Pe>>4&1)||Pe>>5>=rt.Ja||!Rt||!B?B=0:(ye&&(ye[0]=Rt),_e&&(_e[0]=B),B=1))}if(!B||(ye=ye[0],ft=ft[0],yt&&(Re[0]!=ye||Je[0]!=ft)))return 3;Ie!=null&&(Ie[0]=rt,Ie.offset=q-Ie.w,e(4294967286>q-Ie.w),e(Ie.offset==Ie.ha-Q));break}return mt==0||mt==7&&yt&&Ie==null?(ge!=null&&(ge[0]|=rt.na!=null&&0<rt.na.length),ne!=null&&(ne[0]=ye),fe!=null&&(fe[0]=ft),0):mt}function Qh(B,q,Q){var ne=q.width,fe=q.height,ge=0,ye=0,_e=ne,Ie=fe;if(q.Da=B!=null&&0<B.Da,q.Da&&(_e=B.cd,Ie=B.bd,ge=B.v,ye=B.j,11>Q||(ge&=-2,ye&=-2),0>ge||0>ye||0>=_e||0>=Ie||ge+_e>ne||ye+Ie>fe))return 0;if(q.v=ge,q.j=ye,q.va=ge+_e,q.o=ye+Ie,q.U=_e,q.T=Ie,q.da=B!=null&&0<B.da,q.da){if(!le(_e,Ie,Q=[B.ib],ge=[B.hb]))return 0;q.ib=Q[0],q.hb=ge[0]}return q.ob=B!=null&&B.ob,q.Kb=B==null||!B.Sd,q.da&&(q.ob=q.ib<3*ne/4&&q.hb<3*fe/4,q.Kb=0),1}function Jh(B){if(B==null)return 2;if(11>B.S){var q=B.f.RGBA;q.fb+=(B.height-1)*q.A,q.A=-q.A}else q=B.f.kb,B=B.height,q.O+=(B-1)*q.fa,q.fa=-q.fa,q.N+=(B-1>>1)*q.Ab,q.Ab=-q.Ab,q.W+=(B-1>>1)*q.Db,q.Db=-q.Db,q.F!=null&&(q.J+=(B-1)*q.lb,q.lb=-q.lb);return 0}function dl(B,q,Q,ne){if(ne==null||0>=B||0>=q)return 2;if(Q!=null){if(Q.Da){var fe=Q.cd,ge=Q.bd,ye=-2&Q.v,_e=-2&Q.j;if(0>ye||0>_e||0>=fe||0>=ge||ye+fe>B||_e+ge>q)return 2;B=fe,q=ge}if(Q.da){if(!le(B,q,fe=[Q.ib],ge=[Q.hb]))return 2;B=fe[0],q=ge[0]}}ne.width=B,ne.height=q;e:{var Ie=ne.width,Re=ne.height;if(B=ne.S,0>=Ie||0>=Re||!(B>=mp&&13>B))B=2;else{if(0>=ne.Rd&&ne.sd==null){ye=ge=fe=q=0;var Je=(_e=Ie*vw[B])*Re;if(11>B||(ge=(Re+1)/2*(q=(Ie+1)/2),B==12&&(ye=(fe=Ie)*Re)),(Re=s(Je+2*ge+ye))==null){B=1;break e}ne.sd=Re,11>B?((Ie=ne.f.RGBA).eb=Re,Ie.fb=0,Ie.A=_e,Ie.size=Je):((Ie=ne.f.kb).y=Re,Ie.O=0,Ie.fa=_e,Ie.Fd=Je,Ie.f=Re,Ie.N=0+Je,Ie.Ab=q,Ie.Cd=ge,Ie.ea=Re,Ie.W=0+Je+ge,Ie.Db=q,Ie.Ed=ge,B==12&&(Ie.F=Re,Ie.J=0+Je+2*ge),Ie.Tc=ye,Ie.lb=fe)}if(q=1,fe=ne.S,ge=ne.width,ye=ne.height,fe>=mp&&13>fe)if(11>fe)B=ne.f.RGBA,q&=(_e=Math.abs(B.A))*(ye-1)+ge<=B.size,q&=_e>=ge*vw[fe],q&=B.eb!=null;else{B=ne.f.kb,_e=(ge+1)/2,Je=(ye+1)/2,Ie=Math.abs(B.fa),Re=Math.abs(B.Ab);var yt=Math.abs(B.Db),Pe=Math.abs(B.lb),rt=Pe*(ye-1)+ge;q&=Ie*(ye-1)+ge<=B.Fd,q&=Re*(Je-1)+_e<=B.Cd,q=(q&=yt*(Je-1)+_e<=B.Ed)&Ie>=ge&Re>=_e&yt>=_e,q&=B.y!=null,q&=B.f!=null,q&=B.ea!=null,fe==12&&(q&=Pe>=ge,q&=rt<=B.Tc,q&=B.F!=null)}else q=0;B=q?0:2}}return B!=0||Q!=null&&Q.fd&&(B=Jh(ne)),B}var Ec=64,co=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],uo=24,pl=32,Da=8,ml=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ve("Predictor0","PredictorAdd0"),j.Predictor0=function(){return 4278190080},j.Predictor1=function(B){return B},j.Predictor2=function(B,q,Q){return q[Q+0]},j.Predictor3=function(B,q,Q){return q[Q+1]},j.Predictor4=function(B,q,Q){return q[Q-1]},j.Predictor5=function(B,q,Q){return Ne(Ne(B,q[Q+1]),q[Q+0])},j.Predictor6=function(B,q,Q){return Ne(B,q[Q-1])},j.Predictor7=function(B,q,Q){return Ne(B,q[Q+0])},j.Predictor8=function(B,q,Q){return Ne(q[Q-1],q[Q+0])},j.Predictor9=function(B,q,Q){return Ne(q[Q+0],q[Q+1])},j.Predictor10=function(B,q,Q){return Ne(Ne(B,q[Q-1]),Ne(q[Q+0],q[Q+1]))},j.Predictor11=function(B,q,Q){var ne=q[Q+0];return 0>=De(ne>>24&255,B>>24&255,(q=q[Q-1])>>24&255)+De(ne>>16&255,B>>16&255,q>>16&255)+De(ne>>8&255,B>>8&255,q>>8&255)+De(255&ne,255&B,255&q)?ne:B},j.Predictor12=function(B,q,Q){var ne=q[Q+0];return(ze((B>>24&255)+(ne>>24&255)-((q=q[Q-1])>>24&255))<<24|ze((B>>16&255)+(ne>>16&255)-(q>>16&255))<<16|ze((B>>8&255)+(ne>>8&255)-(q>>8&255))<<8|ze((255&B)+(255&ne)-(255&q)))>>>0},j.Predictor13=function(B,q,Q){var ne=q[Q-1];return(we((B=Ne(B,q[Q+0]))>>24&255,ne>>24&255)<<24|we(B>>16&255,ne>>16&255)<<16|we(B>>8&255,ne>>8&255)<<8|we(255&B,255&ne))>>>0};var Zh=j.PredictorAdd0;j.PredictorAdd1=He,ve("Predictor2","PredictorAdd2"),ve("Predictor3","PredictorAdd3"),ve("Predictor4","PredictorAdd4"),ve("Predictor5","PredictorAdd5"),ve("Predictor6","PredictorAdd6"),ve("Predictor7","PredictorAdd7"),ve("Predictor8","PredictorAdd8"),ve("Predictor9","PredictorAdd9"),ve("Predictor10","PredictorAdd10"),ve("Predictor11","PredictorAdd11"),ve("Predictor12","PredictorAdd12"),ve("Predictor13","PredictorAdd13");var bu=j.PredictorAdd2;lt("ColorIndexInverseTransform","MapARGB","32b",function(B){return B>>8&255},function(B){return B}),lt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(B){return B},function(B){return B>>8&255});var Pi,fp=j.ColorIndexInverseTransform,ca=j.MapARGB,ua=j.VP8LColorIndexInverseTransformAlpha,ef=j.MapAlpha,tf=j.VP8LPredictorsAdd=[];tf.length=16,(j.VP8LPredictors=[]).length=16,(j.VP8LPredictorsAdd_C=[]).length=16,(j.VP8LPredictors_C=[]).length=16;var rf,nf,gl,yl,bl,Cc,vl,Ic,No,ha,Dn,Kn,Mi,Yi,Fa,sf,vu,dp,K5,Y5,X5,Q5,J5,Z5,of,ew,tw,rw,nw=s(511),iw=s(2041),sw=s(225),ow=s(767),aw=0,Hg=iw,pp=sw,ho=ow,jo=nw,mp=0,gp=1,lw=2,yp=3,bp=4,Gg=5,cw=6,Kg=7,Yg=8,vp=9,Xg=10,xC=[2,3,7],SC=[3,3,11],uw=[280,256,256,256,40],kC=[0,1,1,1,0],EC=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],CC=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],IC=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],AC=8,Qg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Jg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],af=null,TC=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],NC=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],hw=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],jC=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],RC=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],PC=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],MC=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],wl=[],$o=[],Ba=[],OC=1,fw=2,_l=[],Ro=[];Jt("UpsampleRgbLinePair",Ss,3),Jt("UpsampleBgrLinePair",ei,3),Jt("UpsampleRgbaLinePair",zs,4),Jt("UpsampleBgraLinePair",Xh,4),Jt("UpsampleArgbLinePair",Oa,4),Jt("UpsampleRgba4444LinePair",Ao,2),Jt("UpsampleRgb565LinePair",ks,2);var LC=j.UpsampleRgbLinePair,DC=j.UpsampleBgrLinePair,dw=j.UpsampleRgbaLinePair,pw=j.UpsampleBgraLinePair,mw=j.UpsampleArgbLinePair,gw=j.UpsampleRgba4444LinePair,FC=j.UpsampleRgb565LinePair,wp=16,_p=1<<wp-1,lf=-227,Zg=482,BC=6,yw=0,zC=s(256),UC=s(256),VC=s(256),$C=s(256),WC=s(Zg-lf),qC=s(Zg-lf);La("YuvToRgbRow",Ss,3),La("YuvToBgrRow",ei,3),La("YuvToRgbaRow",zs,4),La("YuvToBgraRow",Xh,4),La("YuvToArgbRow",Oa,4),La("YuvToRgba4444Row",Ao,2),La("YuvToRgb565Row",ks,2);var bw=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],xp=[0,2,8],HC=[8,7,6,4,4,2,2,2,1,1,1,1],GC=1;this.WebPDecodeRGBA=function(B,q,Q,ne,fe){var ge=gp,ye=new Nt,_e=new jt;ye.ba=_e,_e.S=ge,_e.width=[_e.width],_e.height=[_e.height];var Ie=_e.width,Re=_e.height,Je=new Mt;if(Je==null||B==null)var yt=2;else e(Je!=null),yt=kc(B,q,Q,Je.width,Je.height,Je.Pd,Je.Qd,Je.format,null);if(yt!=0?Ie=0:(Ie!=null&&(Ie[0]=Je.width[0]),Re!=null&&(Re[0]=Je.height[0]),Ie=1),Ie){_e.width=_e.width[0],_e.height=_e.height[0],ne!=null&&(ne[0]=_e.width),fe!=null&&(fe[0]=_e.height);e:{if(ne=new rr,(fe=new Vt).data=B,fe.w=q,fe.ha=Q,fe.kd=1,q=[0],e(fe!=null),((B=kc(fe.data,fe.w,fe.ha,null,null,null,q,null,fe))==0||B==7)&&q[0]&&(B=4),(q=B)==0){if(e(ye!=null),ne.data=fe.data,ne.w=fe.w+fe.offset,ne.ha=fe.ha-fe.offset,ne.put=Ft,ne.ac=jr,ne.bc=zr,ne.ma=ye,fe.xa){if((B=Ce())==null){ye=1;break e}if(function(Pe,rt){var ft=[0],Rt=[0],mt=[0];t:for(;;){if(Pe==null)return 0;if(rt==null)return Pe.a=2,0;if(Pe.l=rt,Pe.a=0,S(Pe.m,rt.data,rt.w,rt.ha),!Rr(Pe.m,ft,Rt,mt)){Pe.a=3;break t}if(Pe.xb=fw,rt.width=ft[0],rt.height=Rt[0],!Ve(ft[0],Rt[0],1,Pe,null))break t;return 1}return e(Pe.a!=0),0}(B,ne)){if(ne=(q=dl(ne.width,ne.height,ye.Oa,ye.ba))==0){t:{ne=B;r:for(;;){if(ne==null){ne=0;break t}if(e(ne.s.yc!=null),e(ne.s.Ya!=null),e(0<ne.s.Wb),e((Q=ne.l)!=null),e((fe=Q.ma)!=null),ne.xb!=0){if(ne.ca=fe.ba,ne.tb=fe.tb,e(ne.ca!=null),!Qh(fe.Oa,Q,yp)){ne.a=2;break r}if(!Be(ne,Q.width)||Q.da)break r;if((Q.da||Lt(ne.ca.S))&&bt(),11>ne.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ne.ca.f.kb.F!=null&&bt()),ne.Pb&&0<ne.s.ua&&ne.s.vb.X==null&&!re(ne.s.vb,ne.s.Wa.Xa)){ne.a=1;break r}ne.xb=0}if(!ut(ne,ne.V,ne.Ba,ne.c,ne.i,Q.o,Ke))break r;fe.Dc=ne.Ma,ne=1;break t}e(ne.a!=0),ne=0}ne=!ne}ne&&(q=B.a)}else q=B.a}else{if((B=new ur)==null){ye=1;break e}if(B.Fa=fe.na,B.P=fe.P,B.qc=fe.Sa,Yr(B,ne)){if((q=dl(ne.width,ne.height,ye.Oa,ye.ba))==0){if(B.Aa=0,Q=ye.Oa,e((fe=B)!=null),Q!=null){if(0<(Ie=0>(Ie=Q.Md)?0:100<Ie?255:255*Ie/100)){for(Re=Je=0;4>Re;++Re)12>(yt=fe.pb[Re]).lc&&(yt.ia=Ie*HC[0>yt.lc?0:yt.lc]>>3),Je|=yt.ia;Je&&(alert("todo:VP8InitRandom"),fe.ia=1)}fe.Ga=Q.Id,100<fe.Ga?fe.Ga=100:0>fe.Ga&&(fe.Ga=0)}(function(Pe,rt){if(Pe==null)return 0;if(rt==null)return hr(Pe,2,"NULL VP8Io parameter in VP8Decode().");if(!Pe.cb&&!Yr(Pe,rt))return 0;if(e(Pe.cb),rt.ac==null||rt.ac(rt)){rt.ob&&(Pe.L=0);var ft=xp[Pe.L];if(Pe.L==2?(Pe.yb=0,Pe.zb=0):(Pe.yb=rt.v-ft>>4,Pe.zb=rt.j-ft>>4,0>Pe.yb&&(Pe.yb=0),0>Pe.zb&&(Pe.zb=0)),Pe.Va=rt.o+15+ft>>4,Pe.Hb=rt.va+15+ft>>4,Pe.Hb>Pe.za&&(Pe.Hb=Pe.za),Pe.Va>Pe.Ub&&(Pe.Va=Pe.Ub),0<Pe.L){var Rt=Pe.ed;for(ft=0;4>ft;++ft){var mt;if(Pe.Qa.Cb){var Pt=Pe.Qa.Lb[ft];Pe.Qa.Fb||(Pt+=Rt.Tb)}else Pt=Rt.Tb;for(mt=0;1>=mt;++mt){var Ot=Pe.gd[ft][mt],Kt=Pt;if(Rt.Pc&&(Kt+=Rt.vd[0],mt&&(Kt+=Rt.od[0])),0<(Kt=0>Kt?0:63<Kt?63:Kt)){var Wt=Kt;0<Rt.wb&&(Wt=4<Rt.wb?Wt>>2:Wt>>1)>9-Rt.wb&&(Wt=9-Rt.wb),1>Wt&&(Wt=1),Ot.dd=Wt,Ot.tc=2*Kt+Wt,Ot.ld=40<=Kt?2:15<=Kt?1:0}else Ot.tc=0;Ot.La=mt}}}ft=0}else hr(Pe,6,"Frame setup failed"),ft=Pe.a;if(ft=ft==0){if(ft){Pe.$c=0,0<Pe.Aa||(Pe.Ic=GC);t:{ft=Pe.Ic,Rt=4*(Wt=Pe.za);var Pr=32*Wt,wr=Wt+1,cn=0<Pe.L?Wt*(0<Pe.Aa?2:1):0,Ir=(Pe.Aa==2?2:1)*Wt;if((Ot=Rt+832+(mt=3*(16*ft+xp[Pe.L])/2*Pr)+(Pt=Pe.Fa!=null&&0<Pe.Fa.length?Pe.Kc.c*Pe.Kc.i:0))!=Ot)ft=0;else{if(Ot>Pe.Vb){if(Pe.Vb=0,Pe.Ec=s(Ot),Pe.Fc=0,Pe.Ec==null){ft=hr(Pe,1,"no memory during frame initialization.");break t}Pe.Vb=Ot}Ot=Pe.Ec,Kt=Pe.Fc,Pe.Ac=Ot,Pe.Bc=Kt,Kt+=Rt,Pe.Gd=o(Pr,qt),Pe.Hd=0,Pe.rb=o(wr+1,It),Pe.sb=1,Pe.wa=cn?o(cn,vt):null,Pe.Y=0,Pe.D.Nb=0,Pe.D.wa=Pe.wa,Pe.D.Y=Pe.Y,0<Pe.Aa&&(Pe.D.Y+=Wt),e(!0),Pe.oc=Ot,Pe.pc=Kt,Kt+=832,Pe.ya=o(Ir,ir),Pe.aa=0,Pe.D.ya=Pe.ya,Pe.D.aa=Pe.aa,Pe.Aa==2&&(Pe.D.aa+=Wt),Pe.R=16*Wt,Pe.B=8*Wt,Wt=(Pr=xp[Pe.L])*Pe.R,Pr=Pr/2*Pe.B,Pe.sa=Ot,Pe.ta=Kt+Wt,Pe.qa=Pe.sa,Pe.ra=Pe.ta+16*ft*Pe.R+Pr,Pe.Ha=Pe.qa,Pe.Ia=Pe.ra+8*ft*Pe.B+Pr,Pe.$c=0,Kt+=mt,Pe.mb=Pt?Ot:null,Pe.nb=Pt?Kt:null,e(Kt+Pt<=Pe.Fc+Pe.Vb),si(Pe),i(Pe.Ac,Pe.Bc,0,Rt),ft=1}}if(ft){if(rt.ka=0,rt.y=Pe.sa,rt.O=Pe.ta,rt.f=Pe.qa,rt.N=Pe.ra,rt.ea=Pe.Ha,rt.Vd=Pe.Ia,rt.fa=Pe.R,rt.Rc=Pe.B,rt.F=null,rt.J=0,!aw){for(ft=-255;255>=ft;++ft)nw[255+ft]=0>ft?-ft:ft;for(ft=-1020;1020>=ft;++ft)iw[1020+ft]=-128>ft?-128:127<ft?127:ft;for(ft=-112;112>=ft;++ft)sw[112+ft]=-16>ft?-16:15<ft?15:ft;for(ft=-255;510>=ft;++ft)ow[255+ft]=0>ft?0:255<ft?255:ft;aw=1}vl=Ae,Ic=ki,ha=_t,Dn=Et,Kn=Qe,No=qr,Mi=Ri,Yi=Hn,Fa=ce,sf=je,vu=Qs,dp=Y,K5=$e,Y5=tt,X5=Dr,Q5=ln,J5=pi,Z5=ji,$o[0]=or,$o[1]=gt,$o[2]=Vr,$o[3]=Cr,$o[4]=Xr,$o[5]=_n,$o[6]=_r,$o[7]=Gt,$o[8]=di,$o[9]=Tn,wl[0]=pn,wl[1]=dt,wl[2]=Tt,wl[3]=er,wl[4]=Dt,wl[5]=kr,wl[6]=fr,Ba[0]=ss,Ba[1]=$t,Ba[2]=$n,Ba[3]=oi,Ba[4]=Nr,Ba[5]=li,Ba[6]=Hr,ft=1}else ft=0}ft&&(ft=function(xn,Xi){for(xn.M=0;xn.M<xn.Va;++xn.M){var un,Ar=xn.Jc[xn.M&xn.Xb],cr=xn.m,Oi=xn;for(un=0;un<Oi.za;++un){var nn=cr,Cn=Oi,ci=Cn.Ac,fs=Cn.Bc+4*un,Us=Cn.zc,Ei=Cn.ya[Cn.aa+un];if(Cn.Qa.Bb?Ei.$b=G(nn,Cn.Pa.jb[0])?2+G(nn,Cn.Pa.jb[2]):G(nn,Cn.Pa.jb[1]):Ei.$b=0,Cn.kc&&(Ei.Ad=G(nn,Cn.Bd)),Ei.Za=!G(nn,145)+0,Ei.Za){var Es=Ei.Ob,Vs=0;for(Cn=0;4>Cn;++Cn){var Qi,Nn=Us[0+Cn];for(Qi=0;4>Qi;++Qi){Nn=RC[ci[fs+Qi]][Nn];for(var Fn=hw[G(nn,Nn[0])];0<Fn;)Fn=hw[2*Fn+G(nn,Nn[Fn])];Nn=-Fn,ci[fs+Qi]=Nn}n(Es,Vs,ci,fs,4),Vs+=4,Us[0+Cn]=Nn}}else Nn=G(nn,156)?G(nn,128)?1:3:G(nn,163)?2:0,Ei.Ob[0]=Nn,i(ci,fs,Nn,4),i(Us,0,Nn,4);Ei.Dd=G(nn,142)?G(nn,114)?G(nn,183)?1:3:2:0}if(Oi.m.Ka)return hr(xn,7,"Premature end-of-partition0 encountered.");for(;xn.ja<xn.za;++xn.ja){if(Oi=Ar,nn=(cr=xn).rb[cr.sb-1],ci=cr.rb[cr.sb+cr.ja],un=cr.ya[cr.aa+cr.ja],fs=cr.kc?un.Ad:0)nn.la=ci.la=0,un.Za||(nn.Na=ci.Na=0),un.Hc=0,un.Gc=0,un.ia=0;else{var Ci,Bn;if(nn=ci,ci=Oi,fs=cr.Pa.Xc,Us=cr.ya[cr.aa+cr.ja],Ei=cr.pb[Us.$b],Cn=Us.ad,Es=0,Vs=cr.rb[cr.sb-1],Nn=Qi=0,i(Cn,Es,0,384),Us.Za)var ds=0,Wo=fs[3];else{Fn=s(16);var Li=nn.Na+Vs.Na;if(Li=af(ci,fs[1],Li,Ei.Eb,0,Fn,0),nn.Na=Vs.Na=(0<Li)+0,1<Li)vl(Fn,0,Cn,Es);else{var Js=Fn[0]+3>>3;for(Fn=0;256>Fn;Fn+=16)Cn[Es+Fn]=Js}ds=1,Wo=fs[0]}var Yn=15&nn.la,Ji=15&Vs.la;for(Fn=0;4>Fn;++Fn){var fo=1&Ji;for(Js=Bn=0;4>Js;++Js)Yn=Yn>>1|(fo=(Li=af(ci,Wo,Li=fo+(1&Yn),Ei.Sc,ds,Cn,Es))>ds)<<7,Bn=Bn<<2|(3<Li?3:1<Li?2:Cn[Es+0]!=0),Es+=16;Yn>>=4,Ji=Ji>>1|fo<<7,Qi=(Qi<<8|Bn)>>>0}for(Wo=Yn,ds=Ji>>4,Ci=0;4>Ci;Ci+=2){for(Bn=0,Yn=nn.la>>4+Ci,Ji=Vs.la>>4+Ci,Fn=0;2>Fn;++Fn){for(fo=1&Ji,Js=0;2>Js;++Js)Li=fo+(1&Yn),Yn=Yn>>1|(fo=0<(Li=af(ci,fs[2],Li,Ei.Qc,0,Cn,Es)))<<3,Bn=Bn<<2|(3<Li?3:1<Li?2:Cn[Es+0]!=0),Es+=16;Yn>>=2,Ji=Ji>>1|fo<<5}Nn|=Bn<<4*Ci,Wo|=Yn<<4<<Ci,ds|=(240&Ji)<<Ci}nn.la=Wo,Vs.la=ds,Us.Hc=Qi,Us.Gc=Nn,Us.ia=43690&Nn?0:Ei.ia,fs=!(Qi|Nn)}if(0<cr.L&&(cr.wa[cr.Y+cr.ja]=cr.gd[un.$b][un.Za],cr.wa[cr.Y+cr.ja].La|=!fs),Oi.Ka)return hr(xn,7,"Premature end-of-file encountered.")}if(si(xn),cr=Xi,Oi=1,un=(Ar=xn).D,nn=0<Ar.L&&Ar.M>=Ar.zb&&Ar.M<=Ar.Va,Ar.Aa==0)t:{if(un.M=Ar.M,un.uc=nn,To(Ar,un),Oi=1,un=(Bn=Ar.D).Nb,nn=(Nn=xp[Ar.L])*Ar.R,ci=Nn/2*Ar.B,Fn=16*un*Ar.R,Js=8*un*Ar.B,fs=Ar.sa,Us=Ar.ta-nn+Fn,Ei=Ar.qa,Cn=Ar.ra-ci+Js,Es=Ar.Ha,Vs=Ar.Ia-ci+Js,Ji=(Yn=Bn.M)==0,Qi=Yn>=Ar.Va-1,Ar.Aa==2&&To(Ar,Bn),Bn.uc)for(fo=(Li=Ar).D.M,e(Li.D.uc),Bn=Li.yb;Bn<Li.Hb;++Bn){ds=Bn,Wo=fo;var $s=(po=(ps=Li).D).Nb;Ci=ps.R;var po=po.wa[po.Y+ds],mo=ps.sa,Zs=ps.ta+16*$s*Ci+16*ds,go=po.dd,ti=po.tc;if(ti!=0)if(e(3<=ti),ps.L==1)0<ds&&Q5(mo,Zs,Ci,ti+4),po.La&&Z5(mo,Zs,Ci,ti),0<Wo&&X5(mo,Zs,Ci,ti+4),po.La&&J5(mo,Zs,Ci,ti);else{var yo=ps.B,qo=ps.qa,Ac=ps.ra+8*$s*yo+8*ds,za=ps.Ha,ps=ps.Ia+8*$s*yo+8*ds;$s=po.ld,0<ds&&(Yi(mo,Zs,Ci,ti+4,go,$s),sf(qo,Ac,za,ps,yo,ti+4,go,$s)),po.La&&(dp(mo,Zs,Ci,ti,go,$s),Y5(qo,Ac,za,ps,yo,ti,go,$s)),0<Wo&&(Mi(mo,Zs,Ci,ti+4,go,$s),Fa(qo,Ac,za,ps,yo,ti+4,go,$s)),po.La&&(vu(mo,Zs,Ci,ti,go,$s),K5(qo,Ac,za,ps,yo,ti,go,$s))}}if(Ar.ia&&alert("todo:DitherRow"),cr.put!=null){if(Bn=16*Yn,Yn=16*(Yn+1),Ji?(cr.y=Ar.sa,cr.O=Ar.ta+Fn,cr.f=Ar.qa,cr.N=Ar.ra+Js,cr.ea=Ar.Ha,cr.W=Ar.Ia+Js):(Bn-=Nn,cr.y=fs,cr.O=Us,cr.f=Ei,cr.N=Cn,cr.ea=Es,cr.W=Vs),Qi||(Yn-=Nn),Yn>cr.o&&(Yn=cr.o),cr.F=null,cr.J=null,Ar.Fa!=null&&0<Ar.Fa.length&&Bn<Yn&&(cr.J=U(Ar,cr,Bn,Yn-Bn),cr.F=Ar.mb,cr.F==null&&cr.F.length==0)){Oi=hr(Ar,3,"Could not decode alpha data.");break t}Bn<cr.j&&(Nn=cr.j-Bn,Bn=cr.j,e(!(1&Nn)),cr.O+=Ar.R*Nn,cr.N+=Ar.B*(Nn>>1),cr.W+=Ar.B*(Nn>>1),cr.F!=null&&(cr.J+=cr.width*Nn)),Bn<Yn&&(cr.O+=cr.v,cr.N+=cr.v>>1,cr.W+=cr.v>>1,cr.F!=null&&(cr.J+=cr.v),cr.ka=Bn-cr.j,cr.U=cr.va-cr.v,cr.T=Yn-Bn,Oi=cr.put(cr))}un+1!=Ar.Ic||Qi||(n(Ar.sa,Ar.ta-nn,fs,Us+16*Ar.R,nn),n(Ar.qa,Ar.ra-ci,Ei,Cn+8*Ar.B,ci),n(Ar.Ha,Ar.Ia-ci,Es,Vs+8*Ar.B,ci))}if(!Oi)return hr(xn,6,"Output aborted.")}return 1}(Pe,rt)),rt.bc!=null&&rt.bc(rt),ft&=1}return ft?(Pe.cb=0,ft):0})(B,ne)||(q=B.a)}}else q=B.a}q==0&&ye.Oa!=null&&ye.Oa.fd&&(q=Jh(ye.ba))}ye=q}ge=ye!=0?null:11>ge?_e.f.RGBA.eb:_e.f.kb.y}else ge=null;return ge};var vw=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function a(j,F){for(var P="",L=0;L<4;L++)P+=String.fromCharCode(j[F++]);return P}function u(j,F){return j[F+0]|j[F+1]<<8}function d(j,F){return(j[F+0]|j[F+1]<<8|j[F+2]<<16)>>>0}function f(j,F){return(j[F+0]|j[F+1]<<8|j[F+2]<<16|j[F+3]<<24)>>>0}new c;var h=[0],m=[0],g=[],p=new c,y=r,b=function(j,F){var P={},L=0,k=!1,R=0,C=0;if(P.frames=[],!function(A,H){for(var K=0;K<4;K++)if(A[H+K]!="RIFF".charCodeAt(K))return!0;return!1}(j,F)){for(f(j,F+=4),F+=8;F<j.length;){var _=a(j,F),x=f(j,F+=4);F+=4;var w=x+(1&x);switch(_){case"VP8 ":case"VP8L":P.frames[L]===void 0&&(P.frames[L]={}),(z=P.frames[L]).src_off=k?C:F-8,z.src_size=R+x+8,L++,k&&(k=!1,R=0,C=0);break;case"VP8X":(z=P.header={}).feature_flags=j[F];var S=F+4;z.canvas_width=1+d(j,S),S+=3,z.canvas_height=1+d(j,S),S+=3;break;case"ALPH":k=!0,R=w+8,C=F-8;break;case"ANIM":(z=P.header).bgcolor=f(j,F),S=F+4,z.loop_count=u(j,S),S+=2;break;case"ANMF":var I,z;(z=P.frames[L]={}).offset_x=2*d(j,F),F+=3,z.offset_y=2*d(j,F),F+=3,z.width=1+d(j,F),F+=3,z.height=1+d(j,F),F+=3,z.duration=d(j,F),F+=3,I=j[F++],z.dispose=1&I,z.blend=I>>1&1}_!="ANMF"&&(F+=w)}return P}}(y,0);b.response=y,b.rgbaoutput=!0,b.dataurl=!1;var v=b.header?b.header:null,E=b.frames?b.frames:null;if(v){v.loop_counter=v.loop_count,h=[v.canvas_height],m=[v.canvas_width];for(var M=0;M<E.length&&E[M].blend!=0;M++);}var W=E[0],$=p.WebPDecodeRGBA(y,W.src_off,W.src_size,m,h);W.rgba=$,W.imgwidth=m[0],W.imgheight=h[0];for(var N=0;N<m[0]*h[0]*4;N++)g[N]=$[N];return this.width=m,this.height=h,this.data=g,this}/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */function L$(){var r,e=this.internal.__metadata__.metadata,t=unescape(encodeURIComponent(e));r=this.internal.__metadata__.rawXml?t:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+r.length+" >>"),this.internal.write("stream"),this.internal.write(r),this.internal.write("endstream"),this.internal.write("endobj")}function D$(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(r){var e,t,n,i,s,o,l,c,a,u=function(A){return A=A||{},this.isStrokeTransparent=A.isStrokeTransparent||!1,this.strokeOpacity=A.strokeOpacity||1,this.strokeStyle=A.strokeStyle||"#000000",this.fillStyle=A.fillStyle||"#000000",this.isFillTransparent=A.isFillTransparent||!1,this.fillOpacity=A.fillOpacity||1,this.font=A.font||"10px sans-serif",this.textBaseline=A.textBaseline||"alphabetic",this.textAlign=A.textAlign||"left",this.lineWidth=A.lineWidth||1,this.lineJoin=A.lineJoin||"miter",this.lineCap=A.lineCap||"butt",this.path=A.path||[],this.transform=A.transform!==void 0?A.transform.clone():new c,this.globalCompositeOperation=A.globalCompositeOperation||"normal",this.globalAlpha=A.globalAlpha||1,this.clip_path=A.clip_path||[],this.currentPoint=A.currentPoint||new o,this.miterLimit=A.miterLimit||10,this.lastPoint=A.lastPoint||new o,this.lineDashOffset=A.lineDashOffset||0,this.lineDash=A.lineDash||[],this.margin=A.margin||[0,0,0,0],this.prevPageLastElemOffset=A.prevPageLastElemOffset||0,this.ignoreClearRect=typeof A.ignoreClearRect!="boolean"||A.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,a=new u}]);var d=function(A){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=A;Object.defineProperty(this,"pdf",{get:function(){return H}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(re){K=!!re}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(re){J=!!re}});var V=0;Object.defineProperty(this,"posX",{get:function(){return V},set:function(re){isNaN(re)||(V=re)}});var X=0;Object.defineProperty(this,"posY",{get:function(){return X},set:function(re){isNaN(re)||(X=re)}}),Object.defineProperty(this,"margin",{get:function(){return a.margin},set:function(re){var be;typeof re=="number"?be=[re,re,re,re]:((be=new Array(4))[0]=re[0],be[1]=re.length>=2?re[1]:be[0],be[2]=re.length>=3?re[2]:be[0],be[3]=re.length>=4?re[3]:be[1]),a.margin=be}});var D=!1;Object.defineProperty(this,"autoPaging",{get:function(){return D},set:function(re){D=re}});var O=0;Object.defineProperty(this,"lastBreak",{get:function(){return O},set:function(re){O=re}});var G=[];Object.defineProperty(this,"pageBreaks",{get:function(){return G},set:function(re){G=re}}),Object.defineProperty(this,"ctx",{get:function(){return a},set:function(re){re instanceof u&&(a=re)}}),Object.defineProperty(this,"path",{get:function(){return a.path},set:function(re){a.path=re}});var Z=[];Object.defineProperty(this,"ctxStack",{get:function(){return Z},set:function(re){Z=re}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(re){var be;be=f(re),this.ctx.fillStyle=be.style,this.ctx.isFillTransparent=be.a===0,this.ctx.fillOpacity=be.a,this.pdf.setFillColor(be.r,be.g,be.b,{a:be.a}),this.pdf.setTextColor(be.r,be.g,be.b,{a:be.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(re){var be=f(re);this.ctx.strokeStyle=be.style,this.ctx.isStrokeTransparent=be.a===0,this.ctx.strokeOpacity=be.a,be.a===0?this.pdf.setDrawColor(255,255,255):(be.a,this.pdf.setDrawColor(be.r,be.g,be.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(re){["butt","round","square"].indexOf(re)!==-1&&(this.ctx.lineCap=re,this.pdf.setLineCap(re))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(re){isNaN(re)||(this.ctx.lineWidth=re,this.pdf.setLineWidth(re))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(re){["bevel","round","miter"].indexOf(re)!==-1&&(this.ctx.lineJoin=re,this.pdf.setLineJoin(re))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(re){isNaN(re)||(this.ctx.miterLimit=re,this.pdf.setMiterLimit(re))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(re){this.ctx.textBaseline=re}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(re){["right","end","center","left","start"].indexOf(re)!==-1&&(this.ctx.textAlign=re)}});var ue=null,te=null,oe=null;Object.defineProperty(this,"fontFaces",{get:function(){return oe},set:function(re){ue=null,te=null,oe=re}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(re){var be;if(this.ctx.font=re,(be=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(re))!==null){var ie=be[1];be[2];var le=be[3],ae=be[4];be[5];var Se=be[6],ve=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ae)[2];ae=Math.floor(ve==="px"?parseFloat(ae)*this.pdf.internal.scaleFactor:ve==="em"?parseFloat(ae)*this.pdf.getFontSize():parseFloat(ae)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ae);var ke=function(lt){var At,ct,at=[],wt=lt.trim();if(wt==="")return x2;if(wt in l6)return[l6[wt]];for(;wt!=="";){switch(ct=null,At=(wt=u6(wt)).charAt(0)){case'"':case"'":ct=N$(wt.substring(1),At);break;default:ct=j$(wt)}if(ct===null||(at.push(ct[0]),(wt=u6(ct[1]))!==""&&wt.charAt(0)!==","))return x2;wt=wt.replace(/^,/,"")}return at}(Se);if(this.fontFaces){var Ne=function(lt,At){var ct=lt.getFontList(),at=JSON.stringify(ct);if(ue===null||te!==at){var wt=function(ot){var nt=[];return Object.keys(ot).forEach(function(zt){ot[zt].forEach(function(Lt){var Ct=null;switch(Lt){case"bold":Ct={family:zt,weight:"bold"};break;case"italic":Ct={family:zt,style:"italic"};break;case"bolditalic":Ct={family:zt,weight:"bold",style:"italic"};break;case"":case"normal":Ct={family:zt}}Ct!==null&&(Ct.ref={name:zt,style:Lt},nt.push(Ct))})}),nt}(ct);ue=function(ot){for(var nt={},zt=0;zt<ot.length;++zt){var Lt=_2(ot[zt]),Ct=Lt.family,Ht=Lt.stretch,jt=Lt.style,Mt=Lt.weight;nt[Ct]=nt[Ct]||{},nt[Ct][Ht]=nt[Ct][Ht]||{},nt[Ct][Ht][jt]=nt[Ct][Ht][jt]||{},nt[Ct][Ht][jt][Mt]=Lt}return nt}(wt.concat(At)),te=at}return ue}(this.pdf,this.fontFaces),ze=ke.map(function(lt){return{family:lt,stretch:"normal",weight:le,style:ie}}),we=function(lt,At,ct){for(var at=(ct=ct||{}).defaultFontFamily||"times",wt=Object.assign({},T$,ct.genericFontFamilies||{}),ot=null,nt=null,zt=0;zt<At.length;++zt)if(wt[(ot=_2(At[zt])).family]&&(ot.family=wt[ot.family]),lt.hasOwnProperty(ot.family)){nt=lt[ot.family];break}if(!(nt=nt||lt[at]))throw new Error("Could not find a font-family for the rule '"+c6(ot)+"' and default family '"+at+"'.");if(nt=function(Lt,Ct){if(Ct[Lt])return Ct[Lt];var Ht=kb[Lt],jt=Ht<=kb.normal?-1:1,Mt=a6(Ct,eC,Ht,jt);if(!Mt)throw new Error("Could not find a matching font-stretch value for "+Lt);return Mt}(ot.stretch,nt),nt=function(Lt,Ct){if(Ct[Lt])return Ct[Lt];for(var Ht=ZE[Lt],jt=0;jt<Ht.length;++jt)if(Ct[Ht[jt]])return Ct[Ht[jt]];throw new Error("Could not find a matching font-style for "+Lt)}(ot.style,nt),!(nt=function(Lt,Ct){if(Ct[Lt])return Ct[Lt];if(Lt===400&&Ct[500])return Ct[500];if(Lt===500&&Ct[400])return Ct[400];var Ht=A$[Lt],jt=a6(Ct,tC,Ht,Lt<400?-1:1);if(!jt)throw new Error("Could not find a matching font-weight for value "+Lt);return jt}(ot.weight,nt)))throw new Error("Failed to resolve a font for the rule '"+c6(ot)+"'.");return nt}(Ne,ze);this.pdf.setFont(we.ref.name,we.ref.style)}else{var De="";(le==="bold"||parseInt(le,10)>=700||ie==="bold")&&(De="bold"),ie==="italic"&&(De+="italic"),De.length===0&&(De="normal");for(var He="",We={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},et=0;et<ke.length;et++){if(this.pdf.internal.getFont(ke[et],De,{noFallback:!0,disableWarning:!0})!==void 0){He=ke[et];break}if(De==="bolditalic"&&this.pdf.internal.getFont(ke[et],"bold",{noFallback:!0,disableWarning:!0})!==void 0)He=ke[et],De="bold";else if(this.pdf.internal.getFont(ke[et],"normal",{noFallback:!0,disableWarning:!0})!==void 0){He=ke[et],De="normal";break}}if(He===""){for(var St=0;St<ke.length;St++)if(We[ke[St]]){He=We[ke[St]];break}}He=He===""?"Times":He,this.pdf.setFont(He,De)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(re){this.ctx.globalCompositeOperation=re}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(re){this.ctx.globalAlpha=re}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(re){this.ctx.lineDashOffset=re,z.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(re){this.ctx.lineDash=re,z.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(re){this.ctx.ignoreClearRect=!!re}})};d.prototype.setLineDash=function(A){this.lineDash=A},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){E.call(this,"fill",!1)},d.prototype.stroke=function(){E.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(A,H){if(isNaN(A)||isNaN(H))throw Xn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new o(A,H));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(A,H)},d.prototype.closePath=function(){var A=new o(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&Un(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){A=new o(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(A.x,A.y)},d.prototype.lineTo=function(A,H){if(isNaN(A)||isNaN(H))throw Xn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new o(A,H));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},d.prototype.quadraticCurveTo=function(A,H,K,J){if(isNaN(K)||isNaN(J)||isNaN(A)||isNaN(H))throw Xn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var V=this.ctx.transform.applyToPoint(new o(K,J)),X=this.ctx.transform.applyToPoint(new o(A,H));this.path.push({type:"qct",x1:X.x,y1:X.y,x:V.x,y:V.y}),this.ctx.lastPoint=new o(V.x,V.y)},d.prototype.bezierCurveTo=function(A,H,K,J,V,X){if(isNaN(V)||isNaN(X)||isNaN(A)||isNaN(H)||isNaN(K)||isNaN(J))throw Xn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var D=this.ctx.transform.applyToPoint(new o(V,X)),O=this.ctx.transform.applyToPoint(new o(A,H)),G=this.ctx.transform.applyToPoint(new o(K,J));this.path.push({type:"bct",x1:O.x,y1:O.y,x2:G.x,y2:G.y,x:D.x,y:D.y}),this.ctx.lastPoint=new o(D.x,D.y)},d.prototype.arc=function(A,H,K,J,V,X){if(isNaN(A)||isNaN(H)||isNaN(K)||isNaN(J)||isNaN(V))throw Xn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(X=!!X,!this.ctx.transform.isIdentity){var D=this.ctx.transform.applyToPoint(new o(A,H));A=D.x,H=D.y;var O=this.ctx.transform.applyToPoint(new o(0,K)),G=this.ctx.transform.applyToPoint(new o(0,0));K=Math.sqrt(Math.pow(O.x-G.x,2)+Math.pow(O.y-G.y,2))}Math.abs(V-J)>=2*Math.PI&&(J=0,V=2*Math.PI),this.path.push({type:"arc",x:A,y:H,radius:K,startAngle:J,endAngle:V,counterclockwise:X})},d.prototype.arcTo=function(A,H,K,J,V){throw new Error("arcTo not implemented.")},d.prototype.rect=function(A,H,K,J){if(isNaN(A)||isNaN(H)||isNaN(K)||isNaN(J))throw Xn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(A,H),this.lineTo(A+K,H),this.lineTo(A+K,H+J),this.lineTo(A,H+J),this.lineTo(A,H),this.lineTo(A+K,H),this.lineTo(A,H)},d.prototype.fillRect=function(A,H,K,J){if(isNaN(A)||isNaN(H)||isNaN(K)||isNaN(J))throw Xn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var V={};this.lineCap!=="butt"&&(V.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(V.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(A,H,K,J),this.fill(),V.hasOwnProperty("lineCap")&&(this.lineCap=V.lineCap),V.hasOwnProperty("lineJoin")&&(this.lineJoin=V.lineJoin)}},d.prototype.strokeRect=function(A,H,K,J){if(isNaN(A)||isNaN(H)||isNaN(K)||isNaN(J))throw Xn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(A,H,K,J),this.stroke())},d.prototype.clearRect=function(A,H,K,J){if(isNaN(A)||isNaN(H)||isNaN(K)||isNaN(J))throw Xn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(A,H,K,J))},d.prototype.save=function(A){A=typeof A!="boolean"||A;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),A){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},d.prototype.restore=function(A){A=typeof A!="boolean"||A;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(H),A&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(A){var H,K,J,V;if(A.isCanvasGradient===!0&&(A=A.getColor()),!A)return{r:0,g:0,b:0,a:0,style:A};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(A))H=0,K=0,J=0,V=0;else{var X=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(A);if(X!==null)H=parseInt(X[1]),K=parseInt(X[2]),J=parseInt(X[3]),V=1;else if((X=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(A))!==null)H=parseInt(X[1]),K=parseInt(X[2]),J=parseInt(X[3]),V=parseFloat(X[4]);else{if(V=1,typeof A=="string"&&A.charAt(0)!=="#"){var D=new HE(A);A=D.ok?D.toHex():"#000000"}A.length===4?(H=A.substring(1,2),H+=H,K=A.substring(2,3),K+=K,J=A.substring(3,4),J+=J):(H=A.substring(1,3),K=A.substring(3,5),J=A.substring(5,7)),H=parseInt(H,16),K=parseInt(K,16),J=parseInt(J,16)}}return{r:H,g:K,b:J,a:V,style:A}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(A,H,K,J){if(isNaN(H)||isNaN(K)||typeof A!="string")throw Xn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!h.call(this)){var V=w(this.ctx.transform.rotation),X=this.ctx.transform.scaleX;L.call(this,{text:A,x:H,y:K,scale:X,angle:V,align:this.textAlign,maxWidth:J})}},d.prototype.strokeText=function(A,H,K,J){if(isNaN(H)||isNaN(K)||typeof A!="string")throw Xn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){J=isNaN(J)?void 0:J;var V=w(this.ctx.transform.rotation),X=this.ctx.transform.scaleX;L.call(this,{text:A,x:H,y:K,scale:X,renderingMode:"stroke",angle:V,align:this.textAlign,maxWidth:J})}},d.prototype.measureText=function(A){if(typeof A!="string")throw Xn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,K=this.pdf.internal.scaleFactor,J=H.internal.getFontSize(),V=H.getStringUnitWidth(A)*J/H.internal.scaleFactor;return new function(X){var D=(X=X||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return D}}),this}({width:V*=Math.round(96*K/72*1e4)/1e4})},d.prototype.scale=function(A,H){if(isNaN(A)||isNaN(H))throw Xn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new c(A,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.rotate=function(A){if(isNaN(A))throw Xn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new c(Math.cos(A),Math.sin(A),-Math.sin(A),Math.cos(A),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},d.prototype.translate=function(A,H){if(isNaN(A)||isNaN(H))throw Xn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new c(1,0,0,1,A,H);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.transform=function(A,H,K,J,V,X){if(isNaN(A)||isNaN(H)||isNaN(K)||isNaN(J)||isNaN(V)||isNaN(X))throw Xn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var D=new c(A,H,K,J,V,X);this.ctx.transform=this.ctx.transform.multiply(D)},d.prototype.setTransform=function(A,H,K,J,V,X){A=isNaN(A)?1:A,H=isNaN(H)?0:H,K=isNaN(K)?0:K,J=isNaN(J)?1:J,V=isNaN(V)?0:V,X=isNaN(X)?0:X,this.ctx.transform=new c(A,H,K,J,V,X)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(A,H,K,J,V,X,D,O,G){var Z=this.pdf.getImageProperties(A),ue=1,te=1,oe=1,re=1;J!==void 0&&O!==void 0&&(oe=O/J,re=G/V,ue=Z.width/J*O/J,te=Z.height/V*G/V),X===void 0&&(X=H,D=K,H=0,K=0),J!==void 0&&O===void 0&&(O=J,G=V),J===void 0&&O===void 0&&(O=Z.width,G=Z.height);var be=this.ctx.transform.decompose(),ie=w(be.rotate.shx),le=new c,ae=(le=(le=(le=le.multiply(be.translate)).multiply(be.skew)).multiply(be.scale)).applyToRectangle(new l(X-H*oe,D-K*re,J*ue,V*te));if(this.autoPaging){for(var Se,ve=p.call(this,ae),ke=[],Ne=0;Ne<ve.length;Ne+=1)ke.indexOf(ve[Ne])===-1&&ke.push(ve[Ne]);v(ke);for(var ze=ke[0],we=ke[ke.length-1],De=ze;De<we+1;De++){this.pdf.setPage(De);var He=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],We=De===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],St=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],lt=De===1?0:et+(De-2)*St;if(this.ctx.clip_path.length!==0){var At=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Se,this.posX+this.margin[3],-lt+We+this.ctx.prevPageLastElemOffset),M.call(this,"fill",!0),this.path=At}var ct=JSON.parse(JSON.stringify(ae));ct=b([ct],this.posX+this.margin[3],-lt+We+this.ctx.prevPageLastElemOffset)[0];var at=(De>ze||De<we)&&g.call(this);at&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],He,St,null).clip().discardPath()),this.pdf.addImage(A,"JPEG",ct.x,ct.y,ct.w,ct.h,null,null,ie),at&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(A,"JPEG",ae.x,ae.y,ae.w,ae.h,null,null,ie)};var p=function(A,H,K){var J=[];H=H||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var V=this.posY+this.ctx.prevPageLastElemOffset;switch(A.type){default:case"mt":case"lt":J.push(Math.floor((A.y+V)/K)+1);break;case"arc":J.push(Math.floor((A.y+V-A.radius)/K)+1),J.push(Math.floor((A.y+V+A.radius)/K)+1);break;case"qct":var X=S(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x,A.y);J.push(Math.floor((X.y+V)/K)+1),J.push(Math.floor((X.y+X.h+V)/K)+1);break;case"bct":var D=I(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x2,A.y2,A.x,A.y);J.push(Math.floor((D.y+V)/K)+1),J.push(Math.floor((D.y+D.h+V)/K)+1);break;case"rect":J.push(Math.floor((A.y+V)/K)+1),J.push(Math.floor((A.y+A.h+V)/K)+1)}for(var O=0;O<J.length;O+=1)for(;this.pdf.internal.getNumberOfPages()<J[O];)y.call(this);return J},y=function(){var A=this.fillStyle,H=this.strokeStyle,K=this.font,J=this.lineCap,V=this.lineWidth,X=this.lineJoin;this.pdf.addPage(),this.fillStyle=A,this.strokeStyle=H,this.font=K,this.lineCap=J,this.lineWidth=V,this.lineJoin=X},b=function(A,H,K){for(var J=0;J<A.length;J++)switch(A[J].type){case"bct":A[J].x2+=H,A[J].y2+=K;case"qct":A[J].x1+=H,A[J].y1+=K;default:A[J].x+=H,A[J].y+=K}return A},v=function(A){return A.sort(function(H,K){return H-K})},E=function(A,H){var K=this.fillStyle,J=this.strokeStyle,V=this.lineCap,X=this.lineWidth,D=Math.abs(X*this.ctx.transform.scaleX),O=this.lineJoin;if(this.autoPaging){for(var G,Z,ue=JSON.parse(JSON.stringify(this.path)),te=JSON.parse(JSON.stringify(this.path)),oe=[],re=0;re<te.length;re++)if(te[re].x!==void 0)for(var be=p.call(this,te[re]),ie=0;ie<be.length;ie+=1)oe.indexOf(be[ie])===-1&&oe.push(be[ie]);for(var le=0;le<oe.length;le++)for(;this.pdf.internal.getNumberOfPages()<oe[le];)y.call(this);v(oe);for(var ae=oe[0],Se=oe[oe.length-1],ve=ae;ve<Se+1;ve++){this.pdf.setPage(ve),this.fillStyle=K,this.strokeStyle=J,this.lineCap=V,this.lineWidth=D,this.lineJoin=O;var ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ne=ve===1?this.posY+this.margin[0]:this.margin[0],ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],we=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],De=ve===1?0:ze+(ve-2)*we;if(this.ctx.clip_path.length!==0){var He=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(G,this.posX+this.margin[3],-De+Ne+this.ctx.prevPageLastElemOffset),M.call(this,A,!0),this.path=He}if(Z=JSON.parse(JSON.stringify(ue)),this.path=b(Z,this.posX+this.margin[3],-De+Ne+this.ctx.prevPageLastElemOffset),H===!1||ve===0){var We=(ve>ae||ve<Se)&&g.call(this);We&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ke,we,null).clip().discardPath()),M.call(this,A,H),We&&this.pdf.restoreGraphicsState()}this.lineWidth=X}this.path=ue}else this.lineWidth=D,M.call(this,A,H),this.lineWidth=X},M=function(A,H){if((A!=="stroke"||H||!m.call(this))&&(A==="stroke"||H||!h.call(this))){for(var K,J,V=[],X=this.path,D=0;D<X.length;D++){var O=X[D];switch(O.type){case"begin":V.push({begin:!0});break;case"close":V.push({close:!0});break;case"mt":V.push({start:O,deltas:[],abs:[]});break;case"lt":var G=V.length;if(X[D-1]&&!isNaN(X[D-1].x)&&(K=[O.x-X[D-1].x,O.y-X[D-1].y],G>0)){for(;G>=0;G--)if(V[G-1].close!==!0&&V[G-1].begin!==!0){V[G-1].deltas.push(K),V[G-1].abs.push(O);break}}break;case"bct":K=[O.x1-X[D-1].x,O.y1-X[D-1].y,O.x2-X[D-1].x,O.y2-X[D-1].y,O.x-X[D-1].x,O.y-X[D-1].y],V[V.length-1].deltas.push(K);break;case"qct":var Z=X[D-1].x+2/3*(O.x1-X[D-1].x),ue=X[D-1].y+2/3*(O.y1-X[D-1].y),te=O.x+2/3*(O.x1-O.x),oe=O.y+2/3*(O.y1-O.y),re=O.x,be=O.y;K=[Z-X[D-1].x,ue-X[D-1].y,te-X[D-1].x,oe-X[D-1].y,re-X[D-1].x,be-X[D-1].y],V[V.length-1].deltas.push(K);break;case"arc":V.push({deltas:[],abs:[],arc:!0}),Array.isArray(V[V.length-1].abs)&&V[V.length-1].abs.push(O)}}J=H?null:A==="stroke"?"stroke":"fill";for(var ie=!1,le=0;le<V.length;le++)if(V[le].arc)for(var ae=V[le].abs,Se=0;Se<ae.length;Se++){var ve=ae[Se];ve.type==="arc"?N.call(this,ve.x,ve.y,ve.radius,ve.startAngle,ve.endAngle,ve.counterclockwise,void 0,H,!ie):k.call(this,ve.x,ve.y),ie=!0}else if(V[le].close===!0)this.pdf.internal.out("h"),ie=!1;else if(V[le].begin!==!0){var ke=V[le].start.x,Ne=V[le].start.y;R.call(this,V[le].deltas,ke,Ne),ie=!0}J&&j.call(this,J),H&&F.call(this)}},W=function(A){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return A-K;case"top":return A+H-K;case"hanging":return A+H-2*K;case"middle":return A+H/2-K;default:return A}},$=function(A){return A+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var A=function(){};return A.colorStops=[],A.addColorStop=function(H,K){this.colorStops.push([H,K])},A.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},A.isCanvasGradient=!0,A},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(A,H,K,J,V,X,D,O,G){for(var Z=_.call(this,K,J,V,X),ue=0;ue<Z.length;ue++){var te=Z[ue];ue===0&&(G?P.call(this,te.x1+A,te.y1+H):k.call(this,te.x1+A,te.y1+H)),C.call(this,A,H,te.x2,te.y2,te.x3,te.y3,te.x4,te.y4)}O?F.call(this):j.call(this,D)},j=function(A){switch(A){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(A,H){this.pdf.internal.out(t(A)+" "+n(H)+" m")},L=function(A){var H;switch(A.align){case"right":case"end":H="right";break;case"center":H="center";break;default:H="left"}var K,J,V,X=this.pdf.getTextDimensions(A.text),D=W.call(this,A.y),O=$.call(this,D)-X.h,G=this.ctx.transform.applyToPoint(new o(A.x,D));if(this.autoPaging){var Z=this.ctx.transform.decompose(),ue=new c;ue=(ue=(ue=ue.multiply(Z.translate)).multiply(Z.skew)).multiply(Z.scale);for(var te=this.ctx.transform.applyToRectangle(new l(A.x,D,X.w,X.h)),oe=ue.applyToRectangle(new l(A.x,O,X.w,X.h)),re=p.call(this,oe),be=[],ie=0;ie<re.length;ie+=1)be.indexOf(re[ie])===-1&&be.push(re[ie]);v(be);for(var le=be[0],ae=be[be.length-1],Se=le;Se<ae+1;Se++){this.pdf.setPage(Se);var ve=Se===1?this.posY+this.margin[0]:this.margin[0],ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ne=this.pdf.internal.pageSize.height-this.margin[2],ze=Ne-this.margin[0],we=this.pdf.internal.pageSize.width-this.margin[1],De=we-this.margin[3],He=Se===1?0:ke+(Se-2)*ze;if(this.ctx.clip_path.length!==0){var We=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(K,this.posX+this.margin[3],-1*He+ve),M.call(this,"fill",!0),this.path=We}var et=b([JSON.parse(JSON.stringify(oe))],this.posX+this.margin[3],-He+ve+this.ctx.prevPageLastElemOffset)[0];A.scale>=.01&&(J=this.pdf.internal.getFontSize(),this.pdf.setFontSize(J*A.scale),V=this.lineWidth,this.lineWidth=V*A.scale);var St=this.autoPaging!=="text";if(St||et.y+et.h<=Ne){if(St||et.y>=ve&&et.x<=we){var lt=St?A.text:this.pdf.splitTextToSize(A.text,A.maxWidth||we-et.x)[0],At=b([JSON.parse(JSON.stringify(te))],this.posX+this.margin[3],-He+ve+this.ctx.prevPageLastElemOffset)[0],ct=St&&(Se>le||Se<ae)&&g.call(this);ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],De,ze,null).clip().discardPath()),this.pdf.text(lt,At.x,At.y,{angle:A.angle,align:H,renderingMode:A.renderingMode}),ct&&this.pdf.restoreGraphicsState()}}else et.y<Ne&&(this.ctx.prevPageLastElemOffset+=Ne-et.y);A.scale>=.01&&(this.pdf.setFontSize(J),this.lineWidth=V)}}else A.scale>=.01&&(J=this.pdf.internal.getFontSize(),this.pdf.setFontSize(J*A.scale),V=this.lineWidth,this.lineWidth=V*A.scale),this.pdf.text(A.text,G.x+this.posX,G.y+this.posY,{angle:A.angle,align:H,renderingMode:A.renderingMode,maxWidth:A.maxWidth}),A.scale>=.01&&(this.pdf.setFontSize(J),this.lineWidth=V)},k=function(A,H,K,J){K=K||0,J=J||0,this.pdf.internal.out(t(A+K)+" "+n(H+J)+" l")},R=function(A,H,K){return this.pdf.lines(A,H,K,null,null)},C=function(A,H,K,J,V,X,D,O){this.pdf.internal.out([e(i(K+A)),e(s(J+H)),e(i(V+A)),e(s(X+H)),e(i(D+A)),e(s(O+H)),"c"].join(" "))},_=function(A,H,K,J){for(var V=2*Math.PI,X=Math.PI/2;H>K;)H-=V;var D=Math.abs(K-H);D<V&&J&&(D=V-D);for(var O=[],G=J?-1:1,Z=H;D>1e-5;){var ue=Z+G*Math.min(D,X);O.push(x.call(this,A,Z,ue)),D-=Math.abs(ue-Z),Z=ue}return O},x=function(A,H,K){var J=(K-H)/2,V=A*Math.cos(J),X=A*Math.sin(J),D=V,O=-X,G=D*D+O*O,Z=G+D*V+O*X,ue=4/3*(Math.sqrt(2*G*Z)-Z)/(D*X-O*V),te=D-ue*O,oe=O+ue*D,re=te,be=-oe,ie=J+H,le=Math.cos(ie),ae=Math.sin(ie);return{x1:A*Math.cos(H),y1:A*Math.sin(H),x2:te*le-oe*ae,y2:te*ae+oe*le,x3:re*le-be*ae,y3:re*ae+be*le,x4:A*Math.cos(K),y4:A*Math.sin(K)}},w=function(A){return 180*A/Math.PI},S=function(A,H,K,J,V,X){var D=A+.5*(K-A),O=H+.5*(J-H),G=V+.5*(K-V),Z=X+.5*(J-X),ue=Math.min(A,V,D,G),te=Math.max(A,V,D,G),oe=Math.min(H,X,O,Z),re=Math.max(H,X,O,Z);return new l(ue,oe,te-ue,re-oe)},I=function(A,H,K,J,V,X,D,O){var G,Z,ue,te,oe,re,be,ie,le,ae,Se,ve,ke,Ne,ze=K-A,we=J-H,De=V-K,He=X-J,We=D-V,et=O-X;for(Z=0;Z<41;Z++)le=(be=(ue=A+(G=Z/40)*ze)+G*((oe=K+G*De)-ue))+G*(oe+G*(V+G*We-oe)-be),ae=(ie=(te=H+G*we)+G*((re=J+G*He)-te))+G*(re+G*(X+G*et-re)-ie),Z==0?(Se=le,ve=ae,ke=le,Ne=ae):(Se=Math.min(Se,le),ve=Math.min(ve,ae),ke=Math.max(ke,le),Ne=Math.max(Ne,ae));return new l(Math.round(Se),Math.round(ve),Math.round(ke-Se),Math.round(Ne-ve))},z=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var A,H,K=(A=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:A,lineDashOffset:H}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(Tr.API),function(r){var e=function(o){var l,c,a,u,d,f,h,m,g,p;for(c=[],a=0,u=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;u>a;a+=4)(d=(o.charCodeAt(a)<<24)+(o.charCodeAt(a+1)<<16)+(o.charCodeAt(a+2)<<8)+o.charCodeAt(a+3))!==0?(f=(d=((d=((d=((d=(d-(p=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)-(h=d%85))/85)%85,c.push(f+33,h+33,m+33,g+33,p+33)):c.push(122);return function(y,b){for(var v=b;v>0;v--)y.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},t=function(o){var l,c,a,u,d,f=String,h="length",m=255,g="charCodeAt",p="slice",y="replace";for(o[p](-2),o=o[p](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),a=[],u=0,d=(o+=l="uuuuu"[p](o[h]%5||5))[h];d>u;u+=5)c=52200625*(o[g](u)-33)+614125*(o[g](u+1)-33)+7225*(o[g](u+2)-33)+85*(o[g](u+3)-33)+(o[g](u+4)-33),a.push(m&c>>24,m&c>>16,m&c>>8,m&c);return function(b,v){for(var E=v;E>0;E--)b.pop()}(a,l[h]),f.fromCharCode.apply(f,a)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",a=0;a<o.length;a+=2)c+=String.fromCharCode("0x"+(o[a]+o[a+1]));return c},s=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=yb(l)).reduce(function(a,u){return a+String.fromCharCode(u)},"")};r.processDataByFilters=function(o,l){var c=0,a=o||"",u=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":a=t(a),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":a=e(a),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":a=i(a),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":a=n(a),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":a=s(a),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:a,reverseChain:u.reverse().join(" ")}}}(Tr.API),function(r){r.loadFile=function(e,t,n){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,a,u){var d=new XMLHttpRequest,f=0,h=function(m){var g=m.length,p=[],y=String.fromCharCode;for(f=0;f<g;f+=1)p.push(y(255&m.charCodeAt(f)));return p.join("")};if(d.open("GET",c,!a),d.overrideMimeType("text/plain; charset=x-user-defined"),a===!1&&(d.onload=function(){d.status===200?u(h(this.responseText)):u(void 0)}),d.send(null),a&&d.status===200)return h(d.responseText)}(i,s,o)}catch{}return l}(e,t,n)},r.allowFsRead=void 0,r.loadImageFile=r.loadFile}(Tr.API),function(r){function e(){return(Qr.html2canvas?Promise.resolve(Qr.html2canvas):n2(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function t(){return(Qr.DOMPurify?Promise.resolve(Qr.DOMPurify):n2(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=Un(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(l,c){var a=document.createElement(l);for(var u in c.className&&(a.className=c.className),c.innerHTML&&c.dompurify&&(a.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)a.style[u]=c.style[u];return a},s=function l(c,a){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),d=c.firstChild;d;d=d.nextSibling)a!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||u.appendChild(l(d,a));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},o=function l(c){var a=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),u=l.convert(Promise.resolve(),a);return(u=u.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(a){switch(n(a)){case"string":return"string";case"element":return a.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(t).then(function(a){return this.set({src:i("div",{innerHTML:l,dompurify:a})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var a=Object.assign({},this.opt.html2canvas);return delete a.onrendered,c(this.prop.container,a)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var a=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,a.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,a.context2d.posX=this.opt.x,a.context2d.posY=this.opt.y,a.context2d.margin=this.opt.margin,a.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var m=u[h],g=m.src.find(function(p){return p.format==="truetype"});g&&a.addFont(g.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,a.context2d.save(!0),c(this.prop.container,f)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,a){return(a=a||"pdf").toLowerCase()==="img"||a.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(a){if(a in o.template.prop)return function(){this.prop[a]=l[a]};switch(a){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[a]=l[a]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var a=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(a):a})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(a,u){return Math.floor(a*u/72*96)}return this.then(function(){(l=l||Tr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,a,u){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),a!=null&&(this.progress.n=a),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,a,u){return this.setProgress(l?this.progress.val+l:null,c||null,a?this.progress.n+a:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(l,c){var a=this;return this.thenCore(l,c,function(u,d){return a.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return a.updateProgress(null,u),f}).then(u,d).then(function(f){return a.updateProgress(1),f})})},o.prototype.thenCore=function(l,c,a){a=a||Promise.prototype.then;var u=this;l&&(l=l.bind(u)),c&&(c=c.bind(u));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:o.convert(Object.assign({},u),Promise.prototype),f=a.call(d,l,c);return o.convert(f,u.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(a){c=c.thenCore(a)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Tr.getPageSize=function(l,c,a){if(Un(l)==="object"){var u=l;l=u.orientation,c=u.unit||c,a=u.format||a}c=c||"mm",a=a||"a4",l=(""+(l||"P")).toLowerCase();var d,f=(""+a).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+c}var m,g=0,p=0;if(h.hasOwnProperty(f))g=h[f][1]/d,p=h[f][0]/d;else try{g=a[1],p=a[0]}catch{throw new Error("Invalid format: "+a)}if(l==="p"||l==="portrait")l="p",p>g&&(m=p,p=g,g=m);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",g>p&&(m=p,p=g,g=m)}return{width:p,height:g,unit:c,k:d,orientation:l}},r.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(_2):null;var a=new o(c);return c.worker?a:a.from(l).doCallback()}}(Tr.API),Tr.API.addJS=function(r){var e,t,n=r;return this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(e+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+n+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){e!==void 0&&t!==void 0&&this.internal.out("/Names <</JavaScript "+e+" 0 R>>")}),this},function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],l=n.exec(o);if(l!=null){var c=l[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var a=this.internal.pages.length,u=[];for(s=0;s<a;s++){var d=t.internal.newObject();u.push(d);var f=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var h=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<u.length;s++)t.internal.write("(page_"+(s+1)+")"+u[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+h+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,i,s){var o={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var a=0;a<n.children.length;a++)this.renderItems(n.children[a])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])}(Tr.API),function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,i,s,o,l){var c,a=this.decode.DCT_DECODE,u=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,c=function(d){for(var f,h=256*d.charCodeAt(4)+d.charCodeAt(5),m=d.length,g={width:0,height:0,numcomponents:1},p=4;p<m;p+=2){if(p+=h,e.indexOf(d.charCodeAt(p+1))!==-1){f=256*d.charCodeAt(p+5)+d.charCodeAt(p+6),g={width:256*d.charCodeAt(p+7)+d.charCodeAt(p+8),height:f,numcomponents:d.charCodeAt(p+9)};break}h=256*d.charCodeAt(p+2)+d.charCodeAt(p+3)}return g}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:t,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:a,index:n,alias:i}}return u}}(Tr.API),Tr.API.processPNG=function(r,e,t,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var i,s=p$(r,{checkCrc:!0}),o=s.width,l=s.height,c=s.channels,a=s.palette,u=s.depth;i=a&&c===1?function(N){for(var j=N.width,F=N.height,P=N.data,L=N.palette,k=N.depth,R=!1,C=[],_=[],x=void 0,w=!1,S=0,I=0;I<L.length;I++){var z=gx(L[I],4),A=z[0],H=z[1],K=z[2],J=z[3];C.push(A,H,K),J!=null&&(J===0?(S++,_.length<1&&_.push(I)):J<255&&(w=!0))}if(w||S>1){R=!0,_=void 0;var V=j*F;x=new Uint8Array(V);for(var X=new DataView(P.buffer),D=0;D<V;D++){var O=S2(X,D,k),G=gx(L[O],4)[3];x[D]=G}}else S===0&&(_=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:R?8:void 0,colorBytes:P,alphaBytes:x,needSMask:R,palette:C,mask:_}}(s):c===2||c===4?function(N){for(var j=N.data,F=N.width,P=N.height,L=N.channels,k=N.depth,R=L===2?"DeviceGray":"DeviceRGB",C=L-1,_=F*P,x=C,w=_*x,S=1*_,I=Math.ceil(w*k/8),z=Math.ceil(S*k/8),A=new Uint8Array(I),H=new Uint8Array(z),K=new DataView(j.buffer),J=new DataView(A.buffer),V=new DataView(H.buffer),X=!1,D=0;D<_;D++){for(var O=D*L,G=0;G<x;G++)v6(J,S2(K,O+G,k),D*x+G,k);var Z=S2(K,O+x,k);Z<(1<<k)-1&&(X=!0),v6(V,Z,1*D,k)}return{colorSpace:R,colorsPerPixel:C,sMaskBitsPerComponent:X?k:void 0,colorBytes:A,alphaBytes:H,needSMask:X}}(s):function(N){var j=N.data,F=N.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:F,colorsPerPixel:F==="DeviceGray"?1:3,colorBytes:j instanceof Uint16Array?function(P){for(var L=P.length,k=new Uint8Array(2*L),R=new DataView(k.buffer,k.byteOffset,k.byteLength),C=0;C<L;C++)R.setUint16(2*C,P[C],!1);return k}(j):j,needSMask:!1}}(s);var d,f,h,m=i,g=m.colorSpace,p=m.colorsPerPixel,y=m.sMaskBitsPerComponent,b=m.colorBytes,v=m.alphaBytes,E=m.needSMask,M=m.palette,W=m.mask,$=null;return n!==Tr.API.image_compression.NONE&&typeof yb=="function"?($=function(N){var j;switch(N){case Tr.API.image_compression.FAST:j=11;break;case Tr.API.image_compression.MEDIUM:j=13;break;case Tr.API.image_compression.SLOW:j=14;break;default:j=12}return j}(n),d=this.decode.FLATE_DECODE,f="/Predictor ".concat($," /Colors ").concat(p," /BitsPerComponent ").concat(u," /Columns ").concat(o),r=p6(b,Math.ceil(o*p*u/8),p,u,n),E&&(h=p6(v,Math.ceil(o*y/8),1,y,n))):(d=void 0,f=void 0,r=b,E&&(h=v)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:t,data:r,index:e,filter:d,decodeParameters:f,transparency:W,palette:M,sMask:h,predictor:$,width:o,height:l,bitsPerComponent:u,sMaskBitsPerComponent:y,colorSpace:g}}},function(r){r.processGIF89A=function(e,t,n,i){var s=new O$(e),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var a={data:c,width:o,height:l},u=new k2(100).encode(a,100);return r.processJPEG.call(this,u,t,n,i)},r.processGIF87A=r.processGIF89A}(Tr.API),Go.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Go.prototype.parseBGR=function(){this.pos=this.offset;var r="bit"+this.bitPP,e=this.width*this.height*4;if(e>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(e);try{this[r]()}catch(t){Xn.log("bit decode error:"+t)}},Go.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}t!==0&&(this.pos+=4-t)}},Go.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<r;i++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*i*4,l=s>>4,c=15&s,a=this.palette[l];if(this.data[o]=a.blue,this.data[o+1]=a.green,this.data[o+2]=a.red,this.data[o+3]=255,2*i+1>=this.width)break;a=this.palette[c],this.data[o+4]=a.blue,this.data[o+4+1]=a.green,this.data[o+4+2]=a.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Go.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}r!==0&&(this.pos+=4-r)}},Go.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,a=s>>15?255:0,u=n*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=a}this.pos+=r}},Go.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&t)/t*255|0,a=(o>>11)/e*255|0,u=i*this.width*4+4*s;this.data[u]=a,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=r}},Go.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Go.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=s,this.data[l+1]=i,this.data[l+2]=n,this.data[l+3]=o}},Go.prototype.getData=function(){return this.data},function(r){r.processBMP=function(e,t,n,i){var s=new Go(e,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},a=new k2(100).encode(c,100);return r.processJPEG.call(this,a,t,n,i)}}(Tr.API),_6.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(e,t,n,i){var s=new _6(e),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},a=new k2(100).encode(c,100);return r.processJPEG.call(this,a,t,n,i)}}(Tr.API),Tr.API.processRGBA=function(r,e,t){for(var n=r.data,i=n.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),l=0,c=0,a=0;a<i;a+=4){var u=n[a],d=n[a+1],f=n[a+2],h=n[a+3];s[l++]=u,s[l++]=d,s[l++]=f,o[c++]=h}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Tr.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Eu=Tr.API,um=Eu.getCharWidthsArray=function(r,e){var t,n,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,a=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=a.fof?a.fof:1,d=e.doKerning!==!1,f=0,h=r.length,m=0,g=l[0]||c,p=[];for(t=0;t<h;t++)n=r.charCodeAt(t),typeof i.metadata.widthOfString=="function"?p.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(f=d&&Un(a[n])==="object"&&!isNaN(parseInt(a[n][m],10))?a[n][m]/u:0,p.push((l[n]||g)/c+f)),m=n;return p},h6=Eu.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Eu.processArabic&&(r=Eu.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,i)/t:um.apply(this,arguments).reduce(function(s,o){return s+o},0)},f6=function(r,e,t,n){for(var i=[],s=0,o=r.length,l=0;s!==o&&l+e[s]<t;)l+=e[s],s++;i.push(r.slice(0,s));var c=s;for(l=0;s!==o;)l+e[s]>n&&(i.push(r.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&i.push(r.slice(c,s)),i},d6=function(r,e,t){t||(t={});var n,i,s,o,l,c,a,u=[],d=[u],f=t.textIndent||0,h=0,m=0,g=r.split(" "),p=um.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?g[0].length+2:t.lineIndent||0){var y=Array(c).join(" "),b=[];g.map(function(E){(E=E.split(/\s*\n/)).length>1?b=b.concat(E.map(function(M,W){return(W&&M.length?`
`:"")+M})):b.push(E[0])}),g=b,c=h6.apply(this,[y,t])}for(s=0,o=g.length;s<o;s++){var v=0;if(n=g[s],c&&n[0]==`
`&&(n=n.substr(1),v=1),f+h+(m=(i=um.apply(this,[n,t])).reduce(function(E,M){return E+M},0))>e||v){if(m>e){for(l=f6.apply(this,[n,i,e-(f+h),e]),u.push(l.shift()),u=[l.pop()];l.length;)d.push([l.shift()]);m=i.slice(n.length-(u[0]?u[0].length:0)).reduce(function(E,M){return E+M},0)}else u=[n];d.push(u),f=m+c,h=p}else u.push(n),f+=h+m,h=p}return a=c?function(E,M){return(M?y:"")+E.join(" ")}:function(E){return E.join(" ")},d.map(a)},Eu.splitTextToSize=function(r,e,t){var n,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle),f="Unicode";return d.metadata[f]?{widths:d.metadata[f].widths||{0:1},kerning:d.metadata[f].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var l,c,a=[];for(l=0,c=n.length;l<c;l++)a=a.concat(d6.apply(this,[n[l],o,s]));return a},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",n={},i={},s=0;s<16;s++)n[t[s]]=e[s],i[e[s]]=t[s];var o=function(f){return"0x"+parseInt(f,10).toString(16)},l=r.__fontmetrics__.compress=function(f){var h,m,g,p,y=["{"];for(var b in f){if(h=f[b],isNaN(parseInt(b,10))?m="'"+b+"'":(b=parseInt(b,10),m=(m=o(b).slice(2)).slice(0,-1)+i[m.slice(-1)]),typeof h=="number")h<0?(g=o(h).slice(3),p="-"):(g=o(h).slice(2),p=""),g=p+g.slice(0,-1)+i[g.slice(-1)];else{if(Un(h)!=="object")throw new Error("Don't know what to do with value type "+Un(h)+".");g=l(h)}y.push(m+g)}return y.push("}"),y.join("")},c=r.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,g,p,y={},b=1,v=y,E=[],M="",W="",$=f.length-1,N=1;N<$;N+=1)(p=f[N])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(p):p=="{"?(E.push([v,g]),v={},g=void 0):p=="}"?((m=E.pop())[0][m[1]]=v,g=void 0,v=m[0]):p=="-"?b=-1:g===void 0?n.hasOwnProperty(p)?(M+=n[p],g=parseInt(M,16)*b,b=1,M=""):M+=p:n.hasOwnProperty(p)?(W+=n[p],v[g]=parseInt(W,16)*b,b=1,g=void 0,W=""):W+=p;return y},a={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:a,"Courier-Bold":a,"Courier-BoldOblique":a,"Courier-Oblique":a,Helvetica:a,"Helvetica-Bold":a,"Helvetica-BoldOblique":a,"Helvetica-Oblique":a,"Times-Roman":a,"Times-Bold":a,"Times-BoldItalic":a,"Times-Italic":a}},d={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(f){var h=f.font,m=d.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(Tr.API),function(r){var e=function(t){for(var n=t.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=t.charCodeAt(s);return i};r.API.events.push(["addFont",function(t){var n=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(Om(l)),o.metadata=r.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,n)}}])}(Tr),Tr.API.addSvgAsImage=function(r,e,t,n,i,s,o,l){if(isNaN(e)||isNaN(t))throw Xn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw Xn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=i;var a=c.getContext("2d");a.fillStyle="#fff",a.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(Qr.canvg?Promise.resolve(Qr.canvg):n2(()=>import("./index.es-GFdb9vga.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load canvg: "+f))}).then(function(f){return f.default?f.default:f}).then(function(f){return f.fromString(a,r,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(f){return f.render(u)}).then(function(){d.addImage(c.toDataURL("image/jpeg",1),e,t,n,i,o,l)})},Tr.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,t);return this},Tr.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],a=0,u=0,d=0;function f(m,g){var p,y=!1;for(p=0;p<m.length;p+=1)m[p]===g&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var h=l.length;for(d=0;d<h;d+=1)t[l[d]].value=t[l[d]].defaultValue,t[l[d]].explicitSet=!1}if(Un(r)==="object"){for(i in r)if(s=r[i],f(l,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&f(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(a=0;a<s.length;a+=1)if(n=!0,s[a].length===1&&typeof s[a][0]=="number")c.push(String(s[a]-1));else if(s[a].length>1){for(u=0;u<s[a].length;u+=1)typeof s[a][u]!="number"&&(n=!1);n===!0&&c.push([s[a][0]-1,s[a][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,g=[];for(m in t)t[m].explicitSet===!0&&(t[m].type==="name"?g.push("/"+m+" /"+t[m].value):g.push("/"+m+" "+t[m].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},Tr.API.addMetadata=function(r,e){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceUri:e??"http://jspdf.default.namespaceuri/",rawXml:typeof e=="boolean"&&e},this.internal.events.subscribe("putCatalog",D$),this.internal.events.subscribe("postPutResources",L$)),this},function(r){var e=r.API,t=e.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,a=["","0","00","000","0000"],u=[""],d=0,f=s.length;d<f;++d){if(l=o.metadata.characterToGlyph(s.charCodeAt(d)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(d),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(a[4-l.length],l)}return u.join("")},n=function(s){var o,l,c,a,u,d,f;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],d=0,f=(l=Object.keys(s).sort(function(h,m){return h-m})).length;d<f;d++)o=l[d],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(a=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+a+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,a=o.newObject,u=o.putStream;if(l.metadata instanceof r.API.TTFFont&&l.encoding==="Identity-H"){for(var d=l.metadata.Unicode.widths,f=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),h="",m=0;m<f.length;m++)h+=String.fromCharCode(f[m]);var g=a();u({data:h,addLength1:!0,objectId:g}),c("endobj");var p=a();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var y=a();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+ju(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+r.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var b=a();c("<<"),c("/Type /Font"),c("/BaseFont /"+ju(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+r.API.PDFObject.convert(d)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=a(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+p+" 0 R"),c("/BaseFont /"+ju(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+b+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,a=o.newObject,u=o.putStream;if(l.metadata instanceof r.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var d=l.metadata.rawData,f="",h=0;h<d.length;h++)f+=String.fromCharCode(d[h]);var m=a();u({data:f,addLength1:!0,objectId:m}),c("endobj");var g=a();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var p=a();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+r.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+ju(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=a();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+ju(l.fontName)+"/FontDescriptor "+p+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,l=s.text||"",c=s.x,a=s.y,u=s.options||{},d=s.mutex||{},f=d.pdfEscape,h=d.activeFontKey,m=d.fonts,g=h,p="",y=0,b="",v=m[g].encoding;if(m[g].encoding!=="Identity-H")return{text:l,x:c,y:a,options:u,mutex:d};for(b=l,g=h,Array.isArray(l)&&(b=l[0]),y=0;y<b.length;y+=1)m[g].metadata.hasOwnProperty("cmap")&&(o=m[g].metadata.cmap.unicode.codeMap[b[y].charCodeAt(0)]),o||b[y].charCodeAt(0)<256&&m[g].metadata.hasOwnProperty("Unicode")?p+=b[y]:p+="";var E="";return parseInt(g.slice(1))<14||v==="WinAnsiEncoding"?E=f(p,g).split("").map(function(M){return M.charCodeAt(0).toString(16)}).join(""):v==="Identity-H"&&(E=t(p,m[g])),d.isHex=!0,{text:E,x:c,y:a,options:u,mutex:d}};e.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var a=0;for(a=0;a<o.length;a+=1)Array.isArray(o[a])&&o[a].length===3?l.push([i(Object.assign({},c,{text:o[a][0]})).text,o[a][1],o[a][2]]):l.push(i(Object.assign({},c,{text:o[a]})).text);s.text=l}else s.text=i(Object.assign({},c,{text:o})).text}])}(Tr),function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Tr.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,s,o,l,c,a,u,d=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,v=0;this.__bidiEngine__={};var E=function(P){var L=P.charCodeAt(),k=L>>8,R=g[k];return R!==void 0?d[256*R+(255&L)]:k===252||k===253?"AL":y.test(k)?"L":k===8?"R":"N"},M=function(P){for(var L,k=0;k<P.length;k++){if((L=E(P.charAt(k)))==="L")return!1;if(L==="R")return!0}return!1},W=function(P,L,k,R){var C,_,x,w,S=L[R];switch(S){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"N":case"AN":break;case"EN":b&&(S="AN");break;case"AL":b=!0,S="R";break;case"WS":case"BN":S="N";break;case"CS":R<1||R+1>=L.length||(C=k[R-1])!=="EN"&&C!=="AN"||(_=L[R+1])!=="EN"&&_!=="AN"?S="N":b&&(_="AN"),S=_===C?_:"N";break;case"ES":S=(C=R>0?k[R-1]:"B")==="EN"&&R+1<L.length&&L[R+1]==="EN"?"EN":"N";break;case"ET":if(R>0&&k[R-1]==="EN"){S="EN";break}if(b){S="N";break}for(x=R+1,w=L.length;x<w&&L[x]==="ET";)x++;S=x<w&&L[x]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(w=L.length,x=R+1;x<w&&L[x]==="NSM";)x++;if(x<w){var I=P[R],z=I>=1425&&I<=2303||I===64286;if(C=L[x],z&&(C==="R"||C==="AL")){S="R";break}}}S=R<1||(C=L[R-1])==="B"?"N":k[R-1];break;case"B":b=!1,i=!0,S=v;break;case"S":s=!0,S="N"}return S},$=function(P,L,k){var R=P.split("");return k&&N(R,k,{hiLevel:v}),R.reverse(),L&&L.reverse(),R.join("")},N=function(P,L,k){var R,C,_,x,w,S=-1,I=P.length,z=0,A=[],H=v?h:f,K=[];for(b=!1,i=!1,s=!1,C=0;C<I;C++)K[C]=E(P[C]);for(_=0;_<I;_++){if(w=z,A[_]=W(P,K,A,_),R=240&(z=H[w][m[A[_]]]),z&=15,L[_]=x=H[z][5],R>0)if(R===16){for(C=S;C<_;C++)L[C]=1;S=-1}else S=-1;if(H[z][6])S===-1&&(S=_);else if(S>-1){for(C=S;C<_;C++)L[C]=x;S=-1}K[_]==="B"&&(L[_]=0),k.hiLevel|=x}s&&function(J,V,X){for(var D=0;D<X;D++)if(J[D]==="S"){V[D]=v;for(var O=D-1;O>=0&&J[O]==="WS";O--)V[O]=v}}(K,L,I)},j=function(P,L,k,R,C){if(!(C.hiLevel<P)){if(P===1&&v===1&&!i)return L.reverse(),void(k&&k.reverse());for(var _,x,w,S,I=L.length,z=0;z<I;){if(R[z]>=P){for(w=z+1;w<I&&R[w]>=P;)w++;for(S=z,x=w-1;S<x;S++,x--)_=L[S],L[S]=L[x],L[x]=_,k&&(_=k[S],k[S]=k[x],k[x]=_);z=w}z++}}},F=function(P,L,k){var R=P.split(""),C={hiLevel:v};return k||(k=[]),N(R,k,C),function(_,x,w){if(w.hiLevel!==0&&u)for(var S,I=0;I<_.length;I++)x[I]===1&&(S=p.indexOf(_[I]))>=0&&(_[I]=p[S+1])}(R,k,C),j(2,R,L,k,C),j(1,R,L,k,C),R.join("")};return this.__bidiEngine__.doBidiReorder=function(P,L,k){if(function(C,_){if(_)for(var x=0;x<C.length;x++)_[x]=x;l===void 0&&(l=M(C)),a===void 0&&(a=M(C))}(P,L),o||!c||a)if(o&&c&&l^a)v=l?1:0,P=$(P,L,k);else if(!o&&c&&a)v=l?1:0,P=F(P,L,k),P=$(P,L);else if(!o||l||c||a){if(o&&!c&&l^a)P=$(P,L),l?(v=0,P=F(P,L,k)):(v=1,P=F(P,L,k),P=$(P,L));else if(o&&l&&!c&&a)v=1,P=F(P,L,k),P=$(P,L);else if(!o&&!c&&l^a){var R=u;l?(v=1,P=F(P,L,k),v=0,u=!1,P=F(P,L,k),u=R):(v=0,P=F(P,L,k),P=$(P,L),v=1,u=!1,P=F(P,L,k),u=R,P=$(P,L))}}else v=0,P=F(P,L,k);else v=l?1:0,P=F(P,L,k);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,a=P.isOutputRtl,u=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(o=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?o.push([t.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):o.push([t.doBidiReorder(i[l])]);n.text=o}else n.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Tr),Tr.API.TTFFont=function(){function r(e){var t;if(this.rawData=e,t=this.contents=new pc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new J$(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new F$(this.contents),this.head=new z$(this),this.name=new q$(this),this.cmap=new nC(this),this.toUnicode={},this.hhea=new U$(this),this.maxp=new H$(this),this.hmtx=new G$(this),this.post=new $$(this),this.os2=new V$(this),this.loca=new Q$(this),this.glyf=new K$(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,a;for(a=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],a.push(Math.round(e*this.scaleFactor));return a}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var i,s,o,l;for(o=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/t)||0;return o*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r}();var la,pc=function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,i;for(i=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,i,s,o,l,c;return e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*i+16777216*s+65536*o+256*l+c},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,i,s;for(s=[],n=0,i=e.length;n<i;n++)t=e[n],s.push(this.writeByte(t));return s},r}(),F$=function(){var r;function e(t){var n,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,i,s,o,l,c,a,u,d,f,h,m,g;for(g in h=Object.keys(t).length,c=Math.log(2),d=16*Math.floor(Math.log(h)/c),o=Math.floor(d/c),u=16*h-d,(i=new pc).writeInt(this.scalarType),i.writeShort(h),i.writeShort(d),i.writeShort(o),i.writeShort(u),s=16*h,a=i.pos+s,l=null,m=[],t)for(f=t[g],i.writeString(g),i.writeInt(r(f)),i.writeInt(a),i.writeInt(f.length),m=m.concat(f),g==="head"&&(l=a),a+=f.length;a%4;)m.push(0),a++;return i.write(m),n=2981146554-r(i.data),i.pos=l+8,i.writeUInt32(n),i.data},r=function(t){var n,i,s,o;for(t=iC.call(t);t.length%4;)t.push(0);for(s=new pc(t),i=0,n=0,o=t.length;n<o;n=n+=4)i+=s.readUInt32();return 4294967295&i},e}(),B$={}.hasOwnProperty,Ma=function(r,e){for(var t in e)B$.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};la=function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var z$=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ma(r,la),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new pc).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r}(),x6=function(){function r(e,t){var n,i,s,o,l,c,a,u,d,f,h,m,g,p,y,b,v;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(h=e.readUInt16(),f=h/2,e.pos+=6,s=function(){var E,M;for(M=[],c=E=0;0<=f?E<f:E>f;c=0<=f?++E:--E)M.push(e.readUInt16());return M}(),e.pos+=2,g=function(){var E,M;for(M=[],c=E=0;0<=f?E<f:E>f;c=0<=f?++E:--E)M.push(e.readUInt16());return M}(),a=function(){var E,M;for(M=[],c=E=0;0<=f?E<f:E>f;c=0<=f?++E:--E)M.push(e.readUInt16());return M}(),u=function(){var E,M;for(M=[],c=E=0;0<=f?E<f:E>f;c=0<=f?++E:--E)M.push(e.readUInt16());return M}(),i=(this.length-e.pos+this.offset)/2,l=function(){var E,M;for(M=[],c=E=0;0<=i?E<i:E>i;c=0<=i?++E:--E)M.push(e.readUInt16());return M}(),c=y=0,v=s.length;y<v;c=++y)for(p=s[c],n=b=m=g[c];m<=p?b<=p:b>=p;n=m<=p?++b:--b)u[c]===0?o=n+a[c]:(o=l[u[c]/2+(n-m)-(f-c)]||0)!==0&&(o+=a[c]),this.codeMap[n]=65535&o}e.pos=d}return r.encode=function(e,t){var n,i,s,o,l,c,a,u,d,f,h,m,g,p,y,b,v,E,M,W,$,N,j,F,P,L,k,R,C,_,x,w,S,I,z,A,H,K,J,V,X,D,O,G,Z,ue;switch(R=new pc,o=Object.keys(e).sort(function(te,oe){return te-oe}),t){case"macroman":for(g=0,p=function(){var te=[];for(m=0;m<256;++m)te.push(0);return te}(),b={0:0},s={},C=0,S=o.length;C<S;C++)b[O=e[i=o[C]]]==null&&(b[O]=++g),s[i]={old:e[i],new:b[e[i]]},p[i]=b[e[i]];return R.writeUInt16(1),R.writeUInt16(0),R.writeUInt32(12),R.writeUInt16(0),R.writeUInt16(262),R.writeUInt16(0),R.write(p),{charMap:s,subtable:R.data,maxGlyphID:g+1};case"unicode":for(L=[],d=[],v=0,b={},n={},y=a=null,_=0,I=o.length;_<I;_++)b[M=e[i=o[_]]]==null&&(b[M]=++v),n[i]={old:M,new:b[M]},l=b[M]-i,y!=null&&l===a||(y&&d.push(y),L.push(i),a=l),y=i;for(y&&d.push(y),d.push(65535),L.push(65535),F=2*(j=L.length),N=2*Math.pow(Math.log(j)/Math.LN2,2),f=Math.log(N/2)/Math.LN2,$=2*j-N,c=[],W=[],h=[],m=x=0,z=L.length;x<z;m=++x){if(P=L[m],u=d[m],P===65535){c.push(0),W.push(0);break}if(P-(k=n[P].new)>=32768)for(c.push(0),W.push(2*(h.length+j-m)),i=w=P;P<=u?w<=u:w>=u;i=P<=u?++w:--w)h.push(n[i].new);else c.push(k-P),W.push(0)}for(R.writeUInt16(3),R.writeUInt16(1),R.writeUInt32(12),R.writeUInt16(4),R.writeUInt16(16+8*j+2*h.length),R.writeUInt16(0),R.writeUInt16(F),R.writeUInt16(N),R.writeUInt16(f),R.writeUInt16($),X=0,A=d.length;X<A;X++)i=d[X],R.writeUInt16(i);for(R.writeUInt16(0),D=0,H=L.length;D<H;D++)i=L[D],R.writeUInt16(i);for(G=0,K=c.length;G<K;G++)l=c[G],R.writeUInt16(l);for(Z=0,J=W.length;Z<J;Z++)E=W[Z],R.writeUInt16(E);for(ue=0,V=h.length;ue<V;ue++)g=h[ue],R.writeUInt16(g);return{charMap:n,subtable:R.data,maxGlyphID:v+1}}},r}(),nC=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ma(r,la),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,n,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)t=new x6(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var n,i;return t==null&&(t="macroman"),n=x6.encode(e,t),(i=new pc).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},r}(),U$=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ma(r,la),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r}(),V$=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ma(r,la),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r}(),$$=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ma(r,la),r.prototype.tag="post",r.prototype.parse=function(e){var t,n,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(e.readUInt32());return c}).call(this)}},r}(),W$=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},q$=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ma(r,la),r.prototype.tag="name",r.prototype.parse=function(e){var t,n,i,s,o,l,c,a,u,d,f;for(e.pos=this.offset,e.readShort(),t=e.readShort(),l=e.readShort(),n=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=u=0,d=n.length;u<d;s=++u)i=n[s],e.pos=i.offset,a=e.readString(i.length),o=new W$(a,i),c[f=i.nameID]==null&&(c[f]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},r}(),H$=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ma(r,la),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r}(),G$=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ma(r,la),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,n,i,s,o,l,c;for(e.pos=this.offset,this.metrics=[],t=0,l=this.file.hhea.numberOfMetrics;0<=l?t<l:t>l;t=0<=l?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var a,u;for(u=[],t=a=0;0<=i?a<i:a>i;t=0<=i?++a:--a)u.push(e.readInt16());return u}(),this.widths=(function(){var a,u,d,f;for(f=[],a=0,u=(d=this.metrics).length;a<u;a++)s=d[a],f.push(s.advance);return f}).call(this),n=this.widths[this.widths.length-1],c=[],t=o=0;0<=i?o<i:o>i;t=0<=i?++o:--o)c.push(this.widths.push(n));return c},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r}(),iC=[].slice,K$=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ma(r,la),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,n,i,s,o,l,c,a,u,d;return e in this.cache?this.cache[e]:(s=this.file.loca,t=this.file.contents,n=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+n,o=(l=new pc(t.read(i))).readShort(),a=l.readShort(),d=l.readShort(),c=l.readShort(),u=l.readShort(),this.cache[e]=o===-1?new X$(l,a,d,c,u):new Y$(l,o,a,d,c,u),this.cache[e]))},r.prototype.encode=function(e,t,n){var i,s,o,l,c;for(o=[],s=[],l=0,c=t.length;l<c;l++)i=e[t[l]],s.push(o.length),i&&(o=o.concat(i.encode(n)));return s.push(o.length),{table:o,offsets:s}},r}(),Y$=function(){function r(e,t,n,i,s,o){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),X$=function(){function r(e,t,n,i,s){var o,l;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new pc(iC.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r}(),Q$=function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Ma(r,la),r.prototype.tag="loca",r.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],n=0,i=this.length;n<i;n+=4)s.push(e.readUInt32());return s}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<n.length;++o)if(n[o]=i,s<t.length&&t[s]==o){++s,n[o]=i;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(i+=c)}for(var a=new Array(4*n.length),u=0;u<n.length;++u)a[4*u+3]=255&n[u],a[4*u+2]=(65280&n[u])>>8,a[4*u+1]=(16711680&n[u])>>16,a[4*u]=(4278190080&n[u])>>24;return a},r}(),J$=function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[t],e[t]=i[n];return e},r.prototype.glyphsFor=function(e){var t,n,i,s,o,l,c;for(i={},o=0,l=e.length;o<l;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(n=i[s])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(s in c=this.glyphsFor(t))n=c[s],i[s]=n;return i},r.prototype.encode=function(e,t){var n,i,s,o,l,c,a,u,d,f,h,m,g,p,y;for(i in n=nC.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),h={0:0},y=n.charMap)h[(c=y[i]).old]=c.new;for(m in f=n.maxGlyphID,o)m in h||(h[m]=f++);return u=function(b){var v,E;for(v in E={},b)E[b[v]]=v;return E}(h),d=Object.keys(u).sort(function(b,v){return b-v}),g=function(){var b,v,E;for(E=[],b=0,v=d.length;b<v;b++)l=d[b],E.push(u[l]);return E}(),s=this.font.glyf.encode(o,g,h),a=this.font.loca.encode(s.offsets,g),p={cmap:this.font.cmap.raw(),glyf:s.table,loca:a,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(p["OS/2"]=this.font.os2.raw()),this.font.directory.encode(p)},r}();Tr.API.PDFObject=function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,i,s,o;if(Array.isArray(t))return"["+function(){var l,c,a;for(a=[],l=0,c=t.length;l<c;l++)n=t[l],a.push(e.convert(n));return a}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)o=t[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+t},e}();function sC(r,e,t,n,i){n=n||{};var s=1.15,o=i.internal.scaleFactor,l=i.internal.getFontSize()/o,c=i.getLineHeightFactor?i.getLineHeightFactor():s,a=l*c,u=/\r\n|\r|\n/g,d="",f=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(d=typeof r=="string"?r.split(u):r,f=d.length||1),t+=l*(2-s),n.valign==="middle"?t-=f/2*a:n.valign==="bottom"&&(t-=f*a),n.halign==="center"||n.halign==="right"){var h=l;if(n.halign==="center"&&(h*=.5),d&&f>=1){for(var m=0;m<d.length;m++)i.text(d[m],e-i.getStringUnitWidth(d[m])*h,t),t+=a;return i}e-=i.getStringUnitWidth(r)*h}return n.halign==="justify"?i.text(r,e,t,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(r,e,t),i}var S6={},uh=function(){function r(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return r.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:S6=e},r.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},r.prototype.applyStyles=function(e,t){var n,i,s;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(e.font&&(c=e.font),e.fontStyle){l=e.fontStyle;var a=this.getFontList()[c];a&&a.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(a[0]),l=a[0])}if(this.jsPDFDocument.setFont(c,l),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var u=r.unifyColor(e.fillColor);u&&(n=this.jsPDFDocument).setFillColor.apply(n,u),u=r.unifyColor(e.textColor),u&&(i=this.jsPDFDocument).setTextColor.apply(i,u),u=r.unifyColor(e.lineColor),u&&(s=this.jsPDFDocument).setDrawColor.apply(s,u),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},r.prototype.splitTextToSize=function(e,t,n){return this.jsPDFDocument.splitTextToSize(e,t,n)},r.prototype.rect=function(e,t,n,i,s){return this.jsPDFDocument.rect(e,t,n,i,s)},r.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},r.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},r.prototype.getDocument=function(){return this.jsPDFDocument},r.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},r.prototype.addPage=function(){return this.jsPDFDocument.addPage()},r.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},r.prototype.getGlobalOptions=function(){return S6||{}},r.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},r.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},r.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},r.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},r.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},r.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},r}(),Eb=function(r,e){return Eb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},Eb(r,e)};function oC(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Eb(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var aC=function(r){oC(e,r);function e(t){var n=r.call(this)||this;return n._element=t,n}return e}(Array);function Z$(r){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/r,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function eW(r){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[r]}function q0(r,e,t){t.applyStyles(e,!0);var n=Array.isArray(r)?r:[r],i=n.map(function(s){return t.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return i}function lC(r,e,t,n){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;r.applyStyles({lineWidth:i,lineColor:s});var o=cC(i,!1);o&&r.rect(t.x,t.y,e.getWidth(r.pageSize().width),n.y-t.y,o)}function cC(r,e){var t=r>0,n=e||e===0;return t&&n?"DF":t?"S":n?"F":null}function qg(r,e){var t,n,i,s;if(r=r||e,Array.isArray(r)){if(r.length>=4)return{top:r[0],right:r[1],bottom:r[2],left:r[3]};if(r.length===3)return{top:r[0],right:r[1],bottom:r[2],left:r[1]};if(r.length===2)return{top:r[0],right:r[1],bottom:r[0],left:r[1]};r.length===1?r=r[0]:r=e}return typeof r=="object"?(typeof r.vertical=="number"&&(r.top=r.vertical,r.bottom=r.vertical),typeof r.horizontal=="number"&&(r.right=r.horizontal,r.left=r.horizontal),{left:(t=r.left)!==null&&t!==void 0?t:e,top:(n=r.top)!==null&&n!==void 0?n:e,right:(i=r.right)!==null&&i!==void 0?i:e,bottom:(s=r.bottom)!==null&&s!==void 0?s:e}):(typeof r!="number"&&(r=e),{top:r,right:r,bottom:r,left:r})}function uC(r,e){var t=qg(e.settings.margin,0);return r.pageSize().width-(t.left+t.right)}function tW(r,e,t,n,i){var s={},o=1.3333333333333333,l=E2(e,function(v){return i.getComputedStyle(v).backgroundColor});l!=null&&(s.fillColor=l);var c=E2(e,function(v){return i.getComputedStyle(v).color});c!=null&&(s.textColor=c);var a=nW(n,t);a&&(s.cellPadding=a);var u="borderTopColor",d=o*t,f=n.borderTopWidth;if(n.borderBottomWidth===f&&n.borderRightWidth===f&&n.borderLeftWidth===f){var h=(parseFloat(f)||0)/d;h&&(s.lineWidth=h)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/d,right:(parseFloat(n.borderRightWidth)||0)/d,bottom:(parseFloat(n.borderBottomWidth)||0)/d,left:(parseFloat(n.borderLeftWidth)||0)/d},s.lineWidth.top||(s.lineWidth.right?u="borderRightColor":s.lineWidth.bottom?u="borderBottomColor":s.lineWidth.left&&(u="borderLeftColor"));var m=E2(e,function(v){return i.getComputedStyle(v)[u]});m!=null&&(s.lineColor=m);var g=["left","right","center","justify"];g.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),g=["middle","bottom","top"],g.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var p=parseInt(n.fontSize||"");isNaN(p)||(s.fontSize=p/o);var y=rW(n);y&&(s.fontStyle=y);var b=(n.fontFamily||"").toLowerCase();return r.indexOf(b)!==-1&&(s.font=b),s}function rW(r){var e="";return(r.fontWeight==="bold"||r.fontWeight==="bolder"||parseInt(r.fontWeight)>=700)&&(e="bold"),(r.fontStyle==="italic"||r.fontStyle==="oblique")&&(e+="italic"),e}function E2(r,e){var t=hC(r,e);if(!t)return null;var n=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function hC(r,e){var t=e(r);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?r.parentElement==null?null:hC(r.parentElement,e):t}function nW(r,e){var t=[r.paddingTop,r.paddingRight,r.paddingBottom,r.paddingLeft],n=96/(72/e),i=(parseInt(r.lineHeight)-parseInt(r.fontSize))/e/2,s=t.map(function(l){return parseInt(l||"0")/n}),o=qg(s,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function fC(r,e,t,n,i){var s,o;n===void 0&&(n=!1),i===void 0&&(i=!1);var l;typeof e=="string"?l=t.document.querySelector(e):l=e;var c=Object.keys(r.getFontList()),a=r.scaleFactor(),u=[],d=[],f=[];if(!l)return console.error("Html table could not be found with input: ",e),{head:u,body:d,foot:f};for(var h=0;h<l.rows.length;h++){var m=l.rows[h],g=(o=(s=m==null?void 0:m.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),p=iW(c,a,t,m,n,i);p&&(g==="thead"?u.push(p):g==="tfoot"?f.push(p):d.push(p))}return{head:u,body:d,foot:f}}function iW(r,e,t,n,i,s){for(var o=new aC(n),l=0;l<n.cells.length;l++){var c=n.cells[l],a=t.getComputedStyle(c);if(i||a.display!=="none"){var u=void 0;s&&(u=tW(r,c,e,a,t)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:u,_element:c,content:sW(c)})}}var d=t.getComputedStyle(n);if(o.length>0&&(i||d.display!=="none"))return o}function sW(r){var e=r.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function oW(r,e,t){for(var n=0,i=[r,e,t];n<i.length;n++){var s=i[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Qa(r,e,t,n,i){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(r),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function dC(r,e){var t=new uh(r),n=t.getDocumentOptions(),i=t.getGlobalOptions();oW(i,n,e);var s=Qa({},i,n,e),o;typeof window<"u"&&(o=window);var l=aW(i,n,e),c=lW(i,n,e),a=cW(t,s),u=hW(t,s,o);return{id:e.tableId,content:u,hooks:c,styles:l,settings:a}}function aW(r,e,t){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var a=r[c],u=e[c],d=t[c];n.columnStyles=Qa({},a,u,d)}else{var f=[r,e,t],h=f.map(function(m){return m[c]||{}});n[c]=Qa({},h[0],h[1],h[2])}},s=0,o=Object.keys(n);s<o.length;s++){var l=o[s];i(l)}return n}function lW(r,e,t){for(var n=[r,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=n;s<o.length;s++){var l=o[s];l.didParseCell&&i.didParseCell.push(l.didParseCell),l.willDrawCell&&i.willDrawCell.push(l.willDrawCell),l.didDrawCell&&i.didDrawCell.push(l.didDrawCell),l.willDrawPage&&i.willDrawPage.push(l.willDrawPage),l.didDrawPage&&i.didDrawPage.push(l.didDrawPage)}return i}function cW(r,e){var t,n,i,s,o,l,c,a,u,d,f,h,m=qg(e.margin,40/r.scaleFactor()),g=(t=uW(r,e.startY))!==null&&t!==void 0?t:m.top,p;e.showFoot===!0?p="everyPage":e.showFoot===!1?p="never":p=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var y;e.showHead===!0?y="everyPage":e.showHead===!1?y="never":y=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var b=(s=e.useCss)!==null&&s!==void 0?s:!1,v=e.theme||(b?"plain":"striped"),E=!!e.horizontalPageBreak,M=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=e.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:b,theme:v,startY:g,margin:m,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(a=e.rowPageBreak)!==null&&a!==void 0?a:"auto",tableWidth:(u=e.tableWidth)!==null&&u!==void 0?u:"auto",showHead:y,showFoot:p,tableLineWidth:(d=e.tableLineWidth)!==null&&d!==void 0?d:0,tableLineColor:(f=e.tableLineColor)!==null&&f!==void 0?f:200,horizontalPageBreak:E,horizontalPageBreakRepeat:M,horizontalPageBreakBehaviour:(h=e.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function uW(r,e){var t=r.getLastAutoTable(),n=r.scaleFactor(),i=r.pageNumber(),s=!1;if(t&&t.startPageNumber){var o=t.startPageNumber+t.pageNumber-1;s=o===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&(t==null?void 0:t.finalY)!=null?t.finalY+20/n:null}function hW(r,e,t){var n=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(t){var l=fC(r,e.html,t,o,e.useCss)||{};n=l.head||n,i=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=e.columns||fW(n,i,s);return{columns:c,head:n,body:i,foot:s}}function fW(r,e,t){var n=r[0]||e[0]||t[0]||[],i=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var a=void 0;Array.isArray(n)?a=i.length:a=s+(c>0?"_".concat(c):"");var u={dataKey:a};i.push(u)}}),i}var Cb=function(){function r(e,t,n){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=n,this.doc=e.getDocument()}return r}(),dW=function(r){oC(e,r);function e(t,n,i,s,o,l){var c=r.call(this,t,n,l)||this;return c.cell=i,c.row=s,c.column=o,c.section=s.section,c}return e}(Cb),pW=function(){function r(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return r.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},r.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},r.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},r.prototype.callCellHooks=function(e,t,n,i,s,o){for(var l=0,c=t;l<c.length;l++){var a=c[l],u=new dW(e,this,n,i,s,o),d=a(u)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],d)return!1}return!0},r.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var s=i[n];s(new Cb(e,this,t))}},r.prototype.callWillDrawPageHooks=function(e,t){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var s=i[n];s(new Cb(e,this,t))}},r.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return t}else{var n=this.settings.margin;return e-n.left-n.right}},r}(),pC=function(){function r(e,t,n,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof aC&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=n,this.cells=i,this.spansMultiplePages=s}return r.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(n,i){var s;return Math.max(n,((s=t.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},r.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(n){var i=t.cells[n.index];return i?i.rowSpan>1:!1}).length>0},r.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},r.prototype.getMinimumRowHeight=function(e,t){var n=this;return e.reduce(function(i,s){var o=n.cells[s.index];if(!o)return 0;var l=t.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),a=c+l;return a>i?a:i},0)},r}(),mC=function(){function r(e,t,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return r.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},r.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,s=n*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},r.prototype.padding=function(e){var t=qg(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},r}(),mW=function(){function r(e,t,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=n}return r.prototype.getMaxCustomCellWidth=function(e){for(var t=0,n=0,i=e.allRows();n<i.length;n++){var s=i[n],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(t=Math.max(t,o.styles.cellWidth))}return t},r}();function gW(r,e){yW(r,e);var t=[],n=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,t.push(s)),n+=s.width});var i=e.getWidth(r.pageSize().width)-n;i&&(i=Ib(t,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=Ib(t,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/r.scaleFactor()&&(i=i<1?i:Math.round(i),console.log("Of the table content, ".concat(i," units width could not fit page"))),vW(e),wW(e,r),bW(e)}function yW(r,e){var t=r.scaleFactor(),n=e.settings.horizontalPageBreak,i=uC(r,e);e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],a=s.cells[c.index];if(a){var u=e.hooks.didParseCell;e.callCellHooks(r,u,a,s,c,null);var d=a.padding("horizontal");a.contentWidth=q0(a.text,a.styles,r)+d;var f=q0(a.text.join(" ").split(/[^\S\u00A0]+/),a.styles,r);if(a.minReadableWidth=f+a.padding("horizontal"),typeof a.styles.cellWidth=="number")a.minWidth=a.styles.cellWidth,a.wrappedWidth=a.styles.cellWidth;else if(a.styles.cellWidth==="wrap"||n===!0)a.contentWidth>i?(a.minWidth=i,a.wrappedWidth=i):(a.minWidth=a.contentWidth,a.wrappedWidth=a.contentWidth);else{var h=10/t;a.minWidth=a.styles.minCellWidth||h,a.wrappedWidth=a.contentWidth,a.minWidth>a.wrappedWidth&&(a.wrappedWidth=a.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],a=s.cells[c.index];if(a&&a.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,a.wrappedWidth),c.minWidth=Math.max(c.minWidth,a.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,a.minReadableWidth);else{var u=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},d=u.cellWidth||u.minCellWidth;d&&typeof d=="number"&&(c.minWidth=d,c.wrappedWidth=d)}a&&(a.colSpan>1&&!c.minWidth&&(c.minWidth=a.minWidth),a.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=a.minWidth))}})}function Ib(r,e,t){for(var n=e,i=r.reduce(function(h,m){return h+m.wrappedWidth},0),s=0;s<r.length;s++){var o=r[s],l=o.wrappedWidth/i,c=n*l,a=o.width+c,u=t(o),d=a<u?u:a;e-=d-o.width,o.width=d}if(e=Math.round(e*1e10)/1e10,e){var f=r.filter(function(h){return e<0?h.width>t(h):!0});f.length&&(e=Ib(f,e,t))}return e}function bW(r){for(var e={},t=1,n=r.allRows(),i=0;i<n.length;i++)for(var s=n[i],o=0,l=r.columns;o<l.length;o++){var c=l[o],a=e[c.index];if(t>1)t--,delete s.cells[c.index];else if(a)a.cell.height+=s.height,t=a.cell.colSpan,delete s.cells[c.index],a.left--,a.left<=1&&delete e[c.index];else{var u=s.cells[c.index];if(!u)continue;if(u.height=s.height,u.rowSpan>1){var d=n.length-i,f=u.rowSpan>d?d:u.rowSpan;e[c.index]={cell:u,left:f,row:s}}}}}function vW(r){for(var e=r.allRows(),t=0;t<e.length;t++)for(var n=e[t],i=null,s=0,o=0,l=0;l<r.columns.length;l++){var c=r.columns[l];if(o-=1,o>1&&r.columns[l+1])s+=c.width,delete n.cells[c.index];else if(i){var a=i;delete n.cells[c.index],i=null,a.width=c.width+s}else{var a=n.cells[c.index];if(!a)continue;if(o=a.colSpan,s=0,a.colSpan>1){i=a,s+=c.width;continue}a.width=c.width+s}}}function wW(r,e){for(var t={count:0,height:0},n=0,i=r.allRows();n<i.length;n++){for(var s=i[n],o=0,l=r.columns;o<l.length;o++){var c=l[o],a=s.cells[c.index];if(a){e.applyStyles(a.styles,!0);var u=a.width-a.padding("horizontal");if(a.styles.overflow==="linebreak")a.text=e.splitTextToSize(a.text,u+1/e.scaleFactor(),{fontSize:a.styles.fontSize});else if(a.styles.overflow==="ellipsize")a.text=k6(a.text,u,a.styles,e,"...");else if(a.styles.overflow==="hidden")a.text=k6(a.text,u,a.styles,e,"");else if(typeof a.styles.overflow=="function"){var d=a.styles.overflow(a.text,u);typeof d=="string"?a.text=[d]:a.text=d}a.contentHeight=a.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var f=a.contentHeight/a.rowSpan;a.rowSpan>1&&t.count*t.height<f*a.rowSpan?t={height:f,count:a.rowSpan}:t&&t.count>0&&t.height>f&&(f=t.height),f>s.height&&(s.height=f)}}t.count--}}function k6(r,e,t,n,i){return r.map(function(s){return _W(s,e,t,n,i)})}function _W(r,e,t,n,i){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=q0(r,t,n))return r;for(;e<q0(r+i,t,n)&&!(r.length<=1);)r=r.substring(0,r.length-1);return r.trim()+i}function gC(r,e){var t=new uh(r),n=xW(e,t.scaleFactor()),i=new pW(e,n);return gW(t,i),t.applyStyles(t.userStyles),i}function xW(r,e){var t=r.content,n=kW(t.columns);if(t.head.length===0){var i=E6(n,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=E6(n,"foot");i&&t.foot.push(i)}var s=r.settings.theme,o=r.styles;return{columns:n,head:C2("head",t.head,n,o,s,e),body:C2("body",t.body,n,o,s,e),foot:C2("foot",t.foot,n,o,s,e)}}function C2(r,e,t,n,i,s){var o={},l=e.map(function(c,a){for(var u=0,d={},f=0,h=0,m=0,g=t;m<g.length;m++){var p=g[m];if(o[p.index]==null||o[p.index].left===0)if(h===0){var y=void 0;Array.isArray(c)?y=c[p.index-f-u]:y=c[p.dataKey];var b={};typeof y=="object"&&!Array.isArray(y)&&(b=(y==null?void 0:y.styles)||{});var v=EW(r,p,a,i,n,s,b),E=new mC(y,v,r);d[p.dataKey]=E,d[p.index]=E,h=E.colSpan-1,o[p.index]={left:E.rowSpan-1,times:h}}else h--,f++;else o[p.index].left--,h=o[p.index].times,u++}return new pC(c,a,r,d)});return l}function E6(r,e){var t={};return r.forEach(function(n){if(n.raw!=null){var i=SW(e,n.raw);i!=null&&(t[n.dataKey]=i)}}),Object.keys(t).length>0?t:null}function SW(r,e){if(r==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(r==="foot"&&typeof e=="object")return e.footer;return null}function kW(r){return r.map(function(e,t){var n,i;return typeof e=="object"?i=(n=e.dataKey)!==null&&n!==void 0?n:t:i=t,new mW(i,e,t)})}function EW(r,e,t,n,i,s,o){var l=eW(n),c;r==="head"?c=i.headStyles:r==="body"?c=i.bodyStyles:r==="foot"&&(c=i.footStyles);var a=Qa({},l.table,l[r],i.styles,c),u=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},d=r==="body"?u:{},f=r==="body"&&t%2===0?Qa({},l.alternateRow,i.alternateRowStyles):{},h=Z$(s),m=Qa({},h,a,f,d);return Qa(m,o)}function CW(r,e,t){var n;t===void 0&&(t={});var i=uC(r,e),s=new Map,o=[],l=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(f){var h=e.columns.find(function(m){return m.dataKey===f||m.index===f});h&&!s.has(h.index)&&(s.set(h.index,!0),o.push(h.index),l.push(e.columns[h.index]),i-=h.wrappedWidth)});for(var a=!0,u=(n=t==null?void 0:t.start)!==null&&n!==void 0?n:0;u<e.columns.length;){if(s.has(u)){u++;continue}var d=e.columns[u].wrappedWidth;if(a||i>=d)a=!1,o.push(u),l.push(e.columns[u]),i-=d;else break;u++}return{colIndexes:o,columns:l,lastIndex:u-1}}function IW(r,e){for(var t=[],n=0;n<e.columns.length;n++){var i=CW(r,e,{start:n});i.columns.length&&(t.push(i),n=i.lastIndex)}return t}function yC(r,e){var t=e.settings,n=t.startY,i=t.margin,s={x:i.left,y:n},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),l=n+i.bottom+o;if(t.pageBreak==="avoid"){var c=e.body,a=c.reduce(function(f,h){return f+h.height},0);l+=a}var u=new uh(r);(t.pageBreak==="always"||t.startY!=null&&l>u.pageSize().height)&&(vC(u),s.y=i.top),e.callWillDrawPageHooks(u,s);var d=Qa({},s);e.startPageNumber=u.pageNumber(),t.horizontalPageBreak?AW(u,e,d,s):(u.applyStyles(u.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(f){return cl(u,e,f,s,e.columns)}),u.applyStyles(u.userStyles),e.body.forEach(function(f,h){var m=h===e.body.length-1;H0(u,e,f,m,d,s,e.columns)}),u.applyStyles(u.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(f){return cl(u,e,f,s,e.columns)})),lC(u,e,d,s),e.callEndPageHooks(u,s),e.finalY=s.y,r.lastAutoTable=e,u.applyStyles(u.userStyles)}function AW(r,e,t,n){var i=IW(r,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(a,u){r.applyStyles(r.userStyles),u>0?rd(r,e,t,n,a.columns,!0):C6(r,e,n,a.columns),TW(r,e,t,n,a.columns),I2(r,e,n,a.columns)});else for(var o=-1,l=i[0],c=function(){var a=o;if(l){r.applyStyles(r.userStyles);var u=l.columns;o>=0?rd(r,e,t,n,u,!0):C6(r,e,n,u),a=I6(r,e,o+1,n,u),I2(r,e,n,u)}var d=a-o;i.slice(1).forEach(function(f){r.applyStyles(r.userStyles),rd(r,e,t,n,f.columns,!0),I6(r,e,o+1,n,f.columns,d),I2(r,e,n,f.columns)}),o=a};o<e.body.length-1;)c()}function C6(r,e,t,n){var i=e.settings;r.applyStyles(r.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return cl(r,e,s,t,n)})}function TW(r,e,t,n,i){r.applyStyles(r.userStyles),e.body.forEach(function(s,o){var l=o===e.body.length-1;H0(r,e,s,l,t,n,i)})}function I6(r,e,t,n,i,s){r.applyStyles(r.userStyles),s=s??e.body.length;var o=Math.min(t+s,e.body.length),l=-1;return e.body.slice(t,o).forEach(function(c,a){var u=t+a===e.body.length-1,d=bC(r,e,u,n);c.canEntireRowFit(d,i)&&(cl(r,e,c,n,i),l=t+a)}),l}function I2(r,e,t,n){var i=e.settings;r.applyStyles(r.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return cl(r,e,s,t,n)})}function NW(r,e,t){var n=t.getLineHeight(r.styles.fontSize),i=r.padding("vertical"),s=Math.floor((e-i)/n);return Math.max(0,s)}function jW(r,e,t,n){var i={};r.spansMultiplePages=!0,r.height=0;for(var s=0,o=0,l=t.columns;o<l.length;o++){var c=l[o],a=r.cells[c.index];if(a){Array.isArray(a.text)||(a.text=[a.text]);var u=new mC(a.raw,a.styles,a.section);u=Qa(u,a),u.text=[];var d=NW(a,e,n);a.text.length>d&&(u.text=a.text.splice(d,a.text.length));var f=n.scaleFactor(),h=n.getLineHeightFactor();a.contentHeight=a.getContentHeight(f,h),a.contentHeight>=e&&(a.contentHeight=e,u.styles.minCellHeight-=e),a.contentHeight>r.height&&(r.height=a.contentHeight),u.contentHeight=u.getContentHeight(f,h),u.contentHeight>s&&(s=u.contentHeight),i[c.index]=u}}var m=new pC(r.raw,-1,r.section,i,!0);m.height=s;for(var g=0,p=t.columns;g<p.length;g++){var c=p[g],u=m.cells[c.index];u&&(u.height=m.height);var a=r.cells[c.index];a&&(a.height=r.height)}return m}function RW(r,e,t,n){var i=r.pageSize().height,s=n.settings.margin,o=s.top+s.bottom,l=i-o;e.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=e.getMinimumRowHeight(n.columns,r),a=c<t;if(c>l)return console.log("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!a)return!1;var u=e.hasRowSpan(n.columns),d=e.getMaxCellHeight(n.columns)>l;return d?(u&&console.log("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||n.settings.rowPageBreak==="avoid")}function H0(r,e,t,n,i,s,o){var l=bC(r,e,n,s);if(t.canEntireRowFit(l,o))cl(r,e,t,s,o);else if(RW(r,t,l,e)){var c=jW(t,l,e,r);cl(r,e,t,s,o),rd(r,e,i,s,o),H0(r,e,c,n,i,s,o)}else rd(r,e,i,s,o),H0(r,e,t,n,i,s,o)}function cl(r,e,t,n,i){n.x=e.settings.margin.left;for(var s=0,o=i;s<o.length;s++){var l=o[s],c=t.cells[l.index];if(!c){n.x+=l.width;continue}r.applyStyles(c.styles),c.x=n.x,c.y=n.y;var a=e.callCellHooks(r,e.hooks.willDrawCell,c,t,l,n);if(a===!1){n.x+=l.width;continue}PW(r,c,n);var u=c.getTextPos();sC(c.text,u.x,u.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},r.getDocument()),e.callCellHooks(r,e.hooks.didDrawCell,c,t,l,n),n.x+=l.width}n.y+=t.height}function PW(r,e,t){var n=e.styles;if(r.getDocument().setFillColor(r.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=cC(n.lineWidth,n.fillColor);i&&r.rect(e.x,t.y,e.width,e.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&r.rect(e.x,t.y,e.width,e.height,"F"),MW(r,e,t,n.lineWidth))}function MW(r,e,t,n){var i,s,o,l;n.top&&(i=t.x,s=t.y,o=t.x+e.width,l=t.y,n.right&&(o+=.5*n.right),n.left&&(i-=.5*n.left),c(n.top,i,s,o,l)),n.bottom&&(i=t.x,s=t.y+e.height,o=t.x+e.width,l=t.y+e.height,n.right&&(o+=.5*n.right),n.left&&(i-=.5*n.left),c(n.bottom,i,s,o,l)),n.left&&(i=t.x,s=t.y,o=t.x,l=t.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,i,s,o,l)),n.right&&(i=t.x+e.width,s=t.y,o=t.x+e.width,l=t.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,i,s,o,l));function c(a,u,d,f,h){r.getDocument().setLineWidth(a),r.getDocument().line(u,d,f,h,"S")}}function bC(r,e,t,n){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),r.pageSize().height-n.y-i}function rd(r,e,t,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),r.applyStyles(r.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(l){return cl(r,e,l,n,i)}),e.callEndPageHooks(r,n);var o=e.settings.margin;lC(r,e,t,n),vC(r),e.pageNumber++,n.x=o.left,n.y=o.top,t.y=o.top,e.callWillDrawPageHooks(r,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(l){return cl(r,e,l,n,i)}),r.applyStyles(r.userStyles))}function vC(r){var e=r.pageNumber();r.setPage(e+1);var t=r.pageNumber();return t===e?(r.addPage(),!0):!1}function OW(r){r.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],i=dC(this,n),s=gC(this,i);return yC(this,s),this},r.API.lastAutoTable=!1,r.API.autoTableText=function(e,t,n,i){sC(e,t,n,i,this)},r.API.autoTableSetDefaults=function(e){return uh.setDefaults(e,this),this},r.autoTableSetDefaults=function(e,t){uh.setDefaults(e,t)},r.API.autoTableHtmlToJson=function(e,t){var n;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new uh(this),s=fC(i,e,window,t,!1),o=s.head,l=s.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(a){return a.content}))||[];return{columns:c,rows:l,data:l}}}var A2;function Ab(r,e){var t=dC(r,e),n=gC(r,t);yC(r,n)}try{if(typeof window<"u"&&window){var A6=window,T6=A6.jsPDF||((A2=A6.jspdf)===null||A2===void 0?void 0:A2.jsPDF);T6&&OW(T6)}}catch(r){console.error("Could not apply autoTable plugin",r)}function LW(){var ut;const r=`${Io}/api`,[e,t]=me.useState([]),[n,i]=me.useState(!0),[s,o]=me.useState("All"),[l,c]=me.useState(null),[a,u]=me.useState(!1),[d,f]=me.useState("details"),[h,m]=me.useState(""),[g,p]=me.useState([]),[y,b]=me.useState(""),v=me.useRef(null),E=me.useRef(null),[M,W]=me.useState(null),$=he=>{if(!he)return"";try{return new Date(he).toLocaleDateString()}catch{return""}},N=he=>{if(!he)return"";try{return new Date(he).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}};me.useEffect(()=>{var he;(he=v.current)==null||he.scrollIntoView({behavior:"smooth"})},[g,a]);const[j,F]=me.useState({}),[P,L]=me.useState([]),[k,R]=me.useState("daily"),[C,_]=me.useState([]),[x,w]=me.useState([]),[S,I]=me.useState(null),[z,A]=me.useState(!1),[H,K]=me.useState(""),[J,V]=me.useState([]),[X,D]=me.useState(!0),[O,G]=me.useState(0),[Z,ue]=me.useState("all"),[te,oe]=me.useState({}),[re,be]=me.useState(!1),[ie,le]=me.useState(!1),[ae,Se]=me.useState({}),[ve,ke]=me.useState({}),[Ne,ze]=me.useState([]),[we,De]=me.useState(!1),[He,We]=me.useState(null),[et,St]=me.useState(typeof window<"u"?window.innerWidth<window.innerHeight:!1),[lt,At]=me.useState(typeof window<"u"?window.innerWidth<900:!1),[ct,at]=me.useState(()=>Date.now()),wt=Bs(),ot=JSON.parse(localStorage.getItem("admin"))||{},nt=ot.userId,zt=ot.userId,Lt=Ih(cp),Ct=["Monday","Tuesday","Wednesday","Thursday","Friday"],Ht=new Date(ct),jt=Ht.toLocaleDateString("en-US",{weekday:"long"}),Mt=Ht.getHours()*60+Ht.getMinutes(),Qt="https://ethiostore-17d9f-default-rtdb.firebaseio.com";me.useEffect(()=>{const Ce=setInterval(()=>at(Date.now()),6e4);return()=>clearInterval(Ce)},[]);const Sr=he=>{if(!he)return null;const Ve=String(he).match(/(\d{1,2}):(\d{2})\s*[-]\s*(\d{1,2}):(\d{2})/);if(!Ve)return null;const Be=(pt,de)=>{let Me=parseInt(pt,10);const Oe=parseInt(de,10);return Number.isNaN(Me)||Number.isNaN(Oe)?null:(Me<8&&(Me+=12),Me*60+Oe)},st=Be(Ve[1],Ve[2]),Ge=Be(Ve[3],Ve[4]);return st===null||Ge===null?null:{start:st,end:Ge}},lr=()=>{try{if(!l||!j||Object.keys(j).length===0)return;const he=((l==null?void 0:l.name)||"Teacher").toString().trim(),Ve=`${he.replace(/[<>:"/\\|?*]+/g,"").trim()||"Teacher"}_Weekly_Timetable.pdf`,Be=Ct.filter(Zt=>j[Zt]),st=new Set;Be.forEach(Zt=>{const qt=(j==null?void 0:j[Zt])||{};Object.keys(qt).forEach(Ut=>st.add(Ut))});const pt=(Zt=>[...Zt].sort((qt,Ut)=>{const sr=String(qt||""),rr=String(Ut||""),ur=(sr.match(/\d+/)||[null])[0],hr=(rr.match(/\d+/)||[null])[0];if(ur!==null&&hr!==null){const Mr=parseInt(ur,10),Yr=parseInt(hr,10);if(!Number.isNaN(Mr)&&!Number.isNaN(Yr)&&Mr!==Yr)return Mr-Yr}return sr.localeCompare(rr)}))(Array.from(st)),de=new Tr({orientation:"landscape",unit:"pt",format:"a4"}),Me=40,Oe=40;de.setFont("helvetica","bold"),de.setFontSize(16),de.text("Weekly Teaching Timetable",Me,Oe),de.setFont("helvetica","normal"),de.setFontSize(11);const it=Oe+18,vt=((He==null?void 0:He.email)||(l==null?void 0:l.email)||"").toString(),It=((l==null?void 0:l.subjectsUnique)||[]).join(", ");de.text(`Teacher: ${he}`,Me,it),de.text(`Email: ${vt}`,Me,it+14),de.text(`Subjects: ${It}`,Me,it+28),de.text(`Generated: ${new Date().toLocaleString()}`,Me,it+42);const kt=[["Period",...Be]],ir=pt.map(Zt=>[Zt,...Be.map(qt=>{var rr;const Ut=((rr=j==null?void 0:j[qt])==null?void 0:rr[Zt])||[];if(!Array.isArray(Ut)||Ut.length===0)return"";const sr=Ut.map(ur=>{const hr=((ur==null?void 0:ur.subject)||"").toString().trim(),Mr=((ur==null?void 0:ur.class)||"").toString().trim();return hr&&Mr?`${hr} (${Mr})`:hr||Mr}).filter(Boolean);return Array.from(new Set(sr)).join(`
`)})]);Ab(de,{startY:it+60,head:kt,body:ir,theme:"grid",styles:{font:"helvetica",fontSize:9,cellPadding:4,valign:"top"},headStyles:{fillColor:[30,64,175],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:90}}}),de.save(Ve)}catch(he){console.error("Failed to export teacher timetable:",he)}},pr={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6};me.useEffect(()=>{const he=Ce=>{!Ce.target.closest(".icon-circle")&&!Ce.target.closest(".notification-dropdown")&&De(!1)};return document.addEventListener("click",he),()=>document.removeEventListener("click",he)},[]),me.useEffect(()=>{(async()=>{i(!0);try{const[Ce,Ve,Be,st]=await Promise.all([qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json"),qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/TeacherAssignments.json"),qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Courses.json"),qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json")]),Ge=Ce.data||{},pt=Ve.data||{},de=Be.data||{},Me=st.data||{},Oe=Object.keys(Ge).map(it=>{const vt=Ge[it],It=Me[vt.userId]||{},kt=Object.values(pt).filter(sr=>sr.teacherId===it).map(sr=>{const rr=de[sr.courseId];return rr?{courseId:sr.courseId,grade:rr.grade,subject:rr.subject,section:rr.section}:null}).filter(Boolean),ir=new Set,Zt=[];kt.forEach(sr=>{const rr=sr.courseId||`${sr.grade}-${sr.section}-${sr.subject}`;ir.has(rr)||(ir.add(rr),Zt.push(sr))});const qt=new Set,Ut=[];return Zt.forEach(sr=>{const rr=((sr==null?void 0:sr.subject)??"").toString().trim();if(!rr)return;const ur=rr.toLowerCase().replace(/\s+/g," ");qt.has(ur)||(qt.add(ur),Ut.push(rr))}),{teacherId:it,name:It.name||"No Name",profileImage:It.profileImage||"/default-profile.png",gradesSubjects:Zt,subjectsUnique:Ut,email:It.email||null,userId:vt.userId}});t(Oe)}catch(Ce){console.error("Error fetching teachers:",Ce)}finally{i(!1)}})()},[]);const jr=h.trim().toLowerCase(),Ft=he=>{if(!jr)return!0;const Ce=((he==null?void 0:he.name)||"").toLowerCase(),Ve=((he==null?void 0:he.subjectsUnique)||[]).join(" ").toLowerCase(),Be=((he==null?void 0:he.gradesSubjects)||[]).map(st=>`${st.grade??""}${st.section??""} ${st.subject??""}`).join(" ").toLowerCase();return Ce.includes(jr)||Ve.includes(jr)||Be.includes(jr)},zr=s==="All"?e.filter(Ft):e.filter(he=>he.gradesSubjects.some(Ce=>Ce.grade===s)).filter(Ft);me.useEffect(()=>{if(!l||d!=="schedule")return;(async()=>{try{const Ve=(await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Schedules.json")).data||{},Be={};Object.entries(Ve).forEach(([st,Ge])=>{Object.entries(Ge||{}).forEach(([pt,de])=>{Object.entries(de||{}).forEach(([Me,Oe])=>{Oe&&Oe.teacherId===l.teacherId&&!Oe.break&&(Be[st]||(Be[st]={}),Be[st][Me]||(Be[st][Me]=[]),Be[st][Me].push({subject:Oe.subject,class:pt}))})})}),console.log(" FINAL TEACHER SCHEDULE:",Be),F(Be)}catch(Ce){console.error(" Schedule fetch failed:",Ce),F({})}})()},[l,d]),me.useEffect(()=>{(async()=>{const Ve=await(await fetch("/api/unreadSenders")).json();ke(Ve)})()},[]),me.useEffect(()=>{if(!l||d!=="plan"){L([]),_([]),w([]),I(null),V([]),ue("all"),oe({}),be(!1),K(""),A(!1);return}(async()=>{try{A(!0),K("");const Ce=l.userId,Ve=l.teacherId;if(!Ce&&!Ve){L([]),_([]),w([]),I(null);return}const Be=new Date,st=Be.toISOString().slice(0,10),Ge=Be.toLocaleDateString("en-US",{weekday:"long"}).toLowerCase(),pt=Be.getDay(),de=Ae=>{const Ee=(Ae||"").toString().toLowerCase();return Object.prototype.hasOwnProperty.call(pr,Ee)?pr[Ee]:null},Me=Ae=>{if(Ae==null)return"";const Ee=String(Ae).trim();if(!Ee)return"";const gt=Ee.match(/\d+/);return gt?gt[0]:Ee},Oe=Ae=>String(Ae||"").trim().toLowerCase(),it=(Ae,Ee,gt,$t)=>{const dt=String(Ae||"").trim(),Tt=String(Ee||"").trim();return`${dt}::${Tt}::${Me(gt)}::${Oe($t)}`},vt=Ae=>{if(!Ae)return"";const Ee=String(Ae).trim();if(/^\d{4}-\d{2}-\d{2}$/.test(Ee))return Ee;const gt=new Date(Ee);return Number.isNaN(gt.getTime())?"":gt.toISOString().slice(0,10)},It=Ae=>{const Ee=vt(Ae);return Ee?Ee<st:!1},kt=Ae=>Ae?Array.isArray(Ae)?Ae.map(Ee=>({dayName:(Ee.dayName||Ee.name||Ee.day||Ee.label||"").toString(),date:vt(Ee.date||Ee.dayDate||Ee.isoDate||Ee.dayISO||""),topic:Ee.topic||Ee.subject||Ee.title||"",method:Ee.method||Ee.methods||"",aids:Ee.aids||Ee.material||Ee.materials||"",assessment:Ee.assessment||Ee.assess||Ee.evaluation||""})):typeof Ae=="object"?Object.keys(Ae).map(Ee=>{const gt=Ae[Ee]||{};return typeof gt=="string"?{dayName:Ee,date:"",topic:gt,method:"",aids:"",assessment:""}:{dayName:(gt.dayName||gt.name||Ee).toString(),date:vt(gt.date||gt.dayDate||gt.isoDate||gt.dayISO||""),topic:gt.topic||gt.subject||"",method:gt.method||gt.methods||"",aids:gt.aids||gt.material||"",assessment:gt.assessment||gt.assess||""}}):[]:[],ir=(Ae,Ee=null)=>{if(!Ae||typeof Ae!="object")return null;const gt=Object.keys(Ae);if(!gt.length)return null;if(Ee&&Ae[Ee])return Ee;if(Ee){const $t=[Ee,Ee.replaceAll("/","_"),Ee.replaceAll("/","-"),Ee.replaceAll("/","")];for(const dt of $t)if(Ae[dt])return dt}return gt.sort().slice(-1)[0]},Zt=Ae=>{const gt=String(Ae||"").trim().match(/^(\d{4})\s*\/\s*(\d{2,4})$/);if(!gt)return null;const $t=gt[1];let dt=gt[2];return dt.length===4&&(dt=dt.slice(2)),{yearKey:$t,termKey:dt}},qt=(Ae,Ee)=>{if(!Ae||typeof Ae!="object")return{node:{},path:[]};const gt=ir(Ae,Ee);if(gt&&Ae[gt]&&typeof Ae[gt]=="object"){const dt=Ae[gt];if(dt.courses&&typeof dt.courses=="object")return{node:dt,path:[gt]}}const $t=Zt(Ee);if($t&&Ae[$t.yearKey]&&typeof Ae[$t.yearKey]=="object"){const dt=Ae[$t.yearKey];if(dt[$t.termKey]&&typeof dt[$t.termKey]=="object"){const Tt=dt[$t.termKey];if(Tt.courses&&typeof Tt.courses=="object")return{node:Tt,path:[$t.yearKey,$t.termKey]}}for(const Tt of Object.keys(dt||{})){const er=dt==null?void 0:dt[Tt];if(er&&typeof er=="object"&&er.courses&&typeof er.courses=="object")return{node:er,path:[$t.yearKey,Tt]}}}for(const dt of Object.keys(Ae||{})){const Tt=Ae==null?void 0:Ae[dt];if(Tt&&typeof Tt=="object"){if(Tt.courses&&typeof Tt.courses=="object")return{node:Tt,path:[dt]};for(const er of Object.keys(Tt||{})){const Ur=Tt==null?void 0:Tt[er];if(Ur&&typeof Ur=="object"&&Ur.courses&&typeof Ur.courses=="object")return{node:Ur,path:[dt,er]}}}}return{node:{},path:[]}},Ut=(Ae,Ee)=>{if(!Ae||typeof Ae!="object")return{node:{},path:[]};const gt=Zt(Ee);if(gt&&Ae[gt.yearKey]&&typeof Ae[gt.yearKey]=="object"){const $t=Ae[gt.yearKey];if($t[gt.termKey]&&typeof $t[gt.termKey]=="object")return{node:$t[gt.termKey],path:[gt.yearKey,gt.termKey]};for(const dt of Object.keys($t||{})){const Tt=$t==null?void 0:$t[dt];if(Tt&&typeof Tt=="object")return{node:Tt,path:[gt.yearKey,dt]}}}if(Ee){const dt=[Ee,String(Ee).replaceAll("/","_"),String(Ee).replaceAll("/","-"),String(Ee).replaceAll("/","")].find(Tt=>Ae[Tt]&&typeof Ae[Tt]=="object");if(dt)return{node:Ae[dt],path:[dt]}}for(const $t of Object.keys(Ae||{})){const dt=Ae==null?void 0:Ae[$t];if(dt&&typeof dt=="object"){for(const Tt of Object.keys(dt||{})){const er=dt==null?void 0:dt[Tt];if(er&&typeof er=="object")return{node:er,path:[$t,Tt]}}return{node:dt,path:[$t]}}}return{node:{},path:[]}},sr=["January","February","March","April","May","June","July","August","September","October","November","December"],rr=Ae=>{const Ee=(Ae||[]).find(dt=>vt(dt==null?void 0:dt.date)),gt=vt(Ee==null?void 0:Ee.date);if(!gt)return"";const $t=new Date(`${gt}T00:00:00`);return Number.isNaN($t.getTime())?"":sr[$t.getMonth()]||""},ur=Array.from(new Set([String(Ve||"").trim(),String(Ce||"").trim()].filter(Boolean)));let hr={};for(const Ae of ur){const Ee=await qe.get(`${Qt}/LessonPlans/${encodeURIComponent(Ae)}.json`).catch(()=>({data:null}));if(Ee&&Ee.data&&typeof Ee.data=="object"&&(hr=Ee.data,Object.keys(hr||{}).length))break}const Mr="2025/26",Yr=qt(hr,Mr),Br=Yr.node&&Yr.node.courses&&typeof Yr.node.courses=="object"?Yr.node.courses:{},si=String(Ve||Ce||"").trim();let Zr=new Set;try{const Ae=Array.from(new Set([String(Ce||"").trim(),String((l==null?void 0:l.teacherId)||"").trim()].filter(Boolean))),Ee=[];for(const gt of Ae){const $t=[`${Qt}/LessonPlanSubmissions/${encodeURIComponent(gt)}.json`];(await Promise.all($t.map(Tt=>qe.get(Tt).catch(()=>({data:null}))))).forEach(Tt=>{Tt&&Tt.data&&typeof Tt.data=="object"&&Ee.push(Tt.data)})}Ee.forEach(gt=>{const dt=Ut(gt,Mr).node||{};Object.values(dt||{}).forEach(Tt=>{!Tt||typeof Tt!="object"||Object.values(Tt).forEach(er=>{if(er){if(er.key){const Ur=String(er.key).trim();Zr.add(Ur);const pn=Ur.split("::");if(pn.length>=4){const[Dt,kr,fr,tr]=pn.map(Vr=>String(Vr??"").trim());Zr.add(it(Dt,kr,fr,tr))}}if((er.teacherId||er.courseId||er.week||er.dayName)&&Zr.add(it(er.teacherId,er.courseId,er.week,er.dayName)),er.childKey){const pn=String(er.childKey).trim().split("__").map(Dt=>String(Dt??"").trim());if(pn.length>=4){const[Dt,kr,fr,tr]=pn;Zr.add(it(Dt,kr,fr,tr))}}}})})})}catch{Zr=new Set}V(Array.from(Zr));const an=(Ae,Ee)=>{if(!Ee)return[];const gt=[],$t=(dt,Tt="")=>{if(!dt)return;const er=kt(dt.weekDays||dt.days||dt.daily||[]);if(!er.length&&!(dt.topic||dt.weekTopic))return;const Ur=(dt.month||dt.monthName||"").toString()||rr(er);gt.push({month:Ur,week:dt.week||dt.weekNumber||Tt||"",topic:dt.topic||dt.weekTopic||"",objective:dt.objective||dt.objectives||dt.weekObjective||dt.weekObjectives||"",method:dt.method||dt.teachingMethod||dt.methods||"",material:dt.material||dt.materials||dt.aids||dt.resources||"",assessment:dt.assessment||dt.evaluation||dt.assessments||"",weekDays:er,courseId:Ae||dt.courseId||null})};return Ee.annual&&Array.isArray(Ee.annual.annualRows)&&Ee.annual.annualRows.forEach(dt=>$t(dt,dt.week||"")),Object.keys(Ee).forEach(dt=>{if(dt&&dt.startsWith("week_")){const Tt=Ee[dt],er=dt.replace(/^week_/,"");Tt&&typeof Tt=="object"&&$t(Tt,Tt.week||er)}}),gt};let Ln=[];Object.entries(Br||{}).forEach(([Ae,Ee])=>{Ln=Ln.concat(an(Ae,Ee))});const Wr=new Set;Ln=Ln.filter(Ae=>{const Ee=`${String(Ae.courseId)}::${String(Ae.week)}::${String(Ae.month)}::${String(Ae.topic)}`;return Wr.has(Ee)?!1:(Wr.add(Ee),!0)}),_(Ln);const qr=[],ki=[],_t=(Ln||[]).reduce((Ae,Ee)=>{const gt=String(Ee.courseId||"unknown");return Ae[gt]||(Ae[gt]=[]),Ae[gt].push(Ee),Ae},{});Object.entries(_t).forEach(([Ae,Ee])=>{let gt=null;for(let dt=0;dt<Ee.length;dt++){if((Ee[dt].weekDays||[]).some(Tt=>vt(Tt.date)===st)){gt=dt;break}if((Ee[dt].weekDays||[]).some(Tt=>(Tt.dayName||"").toString().toLowerCase()===Ge)){gt=dt;break}}if(gt===null&&Ee.length&&(gt=0),gt===null)return;const $t=Ee[gt];qr.push($t),($t.weekDays||[]).forEach(dt=>{const Tt=de(dt.dayName||""),er=it(si,Ae,$t.week||"",dt.dayName||""),pn=Zr.has(er)||Zr.has(String(er).replace(/::([a-z]+)$/i,kr=>kr))?"submitted":dt.date&&It(dt.date)||Tt!==null&&Tt<pt?"missed":"pending";(dt.date&&vt(dt.date)===st||Tt===pt||(dt.dayName||"").toString().toLowerCase()===Ge)&&ki.push({...dt,courseId:Ae,week:$t.week||"",month:$t.month||"",status:pn,key:er,scheduledIndex:Tt})})});const Et=new Set,Qe=ki.filter(Ae=>{const Ee=String(Ae.key||"");return Ee?Et.has(Ee)?!1:(Et.add(Ee),!0):!0});w(qr),I(qr.length?0:null),L(Qe)}catch(Ce){console.error("Failed to fetch LessonPlans",Ce),L([]),_([]),w([]),I(null),V([]),K("Failed to load lesson plans from database.")}finally{A(!1)}})()},[l,d,O]),me.useEffect(()=>{if(!l||d!=="plan")return;const he=Array.from(new Set([...Array.isArray(C)?C.map(Be=>String((Be==null?void 0:Be.courseId)||"")).filter(Boolean):[],...Array.isArray(x)?x.map(Be=>String((Be==null?void 0:Be.courseId)||"")).filter(Boolean):[]]));if(!he.length){oe({}),ue("all");return}let Ce=!1;return(async()=>{try{const st=(await qe.get(`${Qt}/Courses.json`)).data||{},Ge={};if(he.forEach(pt=>{const de=st==null?void 0:st[pt];if(!de)return;const Me=(de.subject||"").toString().trim()||pt,Oe=de.grade?`Grade ${de.grade}`:"",it=de.section?`${de.section}`:"",vt=[Oe,it].filter(Boolean).join(" ");Ge[pt]=vt?`${Me}  ${vt}`:Me}),Ce)return;oe(Ge),ue(pt=>pt==="all"||he.includes(pt)?pt:"all")}catch{if(Ce)return;oe({}),ue("all")}})(),()=>{Ce=!0}},[l,d,C,x,Qt]);const Rr=(he,Ce)=>[he,Ce].sort().join("_"),mr=async(he,Ce)=>{if(!(!nt||!Ce))try{const Be=(await qe.get(`${Qt}/Chats/${encodeURIComponent(he)}.json`).catch(()=>({data:null}))).data||{},st={...Be.participants||{},[nt]:!0,[Ce]:!0},Ge={...Be.unread||{}};Ge[nt]===void 0&&(Ge[nt]=0),Ge[Ce]===void 0&&(Ge[Ce]=0);const pt={participants:st,unread:Ge};Be.typing===void 0&&(pt.typing=null),Be.lastMessage===void 0&&(pt.lastMessage=null),await qe.patch(`${Qt}/Chats/${encodeURIComponent(he)}.json`,pt).catch(()=>{})}catch{}},Ue=async he=>{try{const Ve=(await qe.get(`${Qt}/Chats/${encodeURIComponent(he)}/lastMessage.json`).catch(()=>({data:null}))).data;if(!Ve)return;String(Ve.receiverId)===String(nt)&&Ve.seen===!1&&await qe.patch(`${Qt}/Chats/${encodeURIComponent(he)}/lastMessage.json`,{seen:!0}).catch(()=>{})}catch{}},Ye=he=>{qe.put(`${Qt}/Chats/${encodeURIComponent(he)}/typing.json`,null).catch(()=>{})},Xe=he=>{if(!nt||!(l!=null&&l.userId))return;const Ce=Rr(l.userId,nt);if(!he||!he.trim()){Ye(Ce),E.current&&(clearTimeout(E.current),E.current=null);return}qe.put(`${Qt}/Chats/${encodeURIComponent(Ce)}/typing.json`,{userId:nt}).catch(()=>{}),E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{Ye(Ce),E.current=null},1800)};me.useEffect(()=>{if(!nt||e.length===0)return;(async()=>{const Ce={};for(const Ve of e){const Be=Rr(nt,Ve.userId);try{const st=await qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Be}/messages.json`),pt=Object.values(st.data||{}).filter(de=>de.receiverId===nt&&de.seen===!1).length;pt>0&&(Ce[Ve.userId]=pt)}catch(st){console.error(st)}}Se(Ce)})()},[e,nt]);const Le=async()=>{if(!y.trim()||!l)return;const he=Rr(l.userId,nt),Ce=Date.now(),Ve={senderId:nt,receiverId:l.userId,type:"text",text:y,imageUrl:null,replyTo:null,seen:!1,edited:!1,deleted:!1,timeStamp:Ce};try{await mr(he,l.userId);const Be=await qe.post(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${encodeURIComponent(he)}/messages.json`,Ve),st=Be.data&&Be.data.name,Ge={messageId:st||`${Ce}`,senderId:Ve.senderId,receiverId:Ve.receiverId,text:Ve.text||"",type:Ve.type||"text",timeStamp:Ve.timeStamp,seen:!1,edited:!1,deleted:!1};await qe.put(`${Qt}/Chats/${encodeURIComponent(he)}/lastMessage.json`,Ge).catch(()=>{});try{const de=(await qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${encodeURIComponent(he)}/unread.json`)).data||{},Me=Number(de[l.userId]||0),Oe={...de||{},[l.userId]:Me+1,[nt]:Number(de[nt]||0)};await qe.put(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${encodeURIComponent(he)}/unread.json`,Oe)}catch{await qe.put(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${encodeURIComponent(he)}/unread.json`,{[l.userId]:1,[nt]:0})}Ye(he),p(pt=>[...pt,{messageId:st||`${Ce}`,...Ve,sender:"admin"}]),b("")}catch(Be){console.error("Failed to send message:",Be)}};me.useEffect(()=>{const he=Ce=>{!Ce.target.closest(".icon-circle")&&!Ce.target.closest(".messenger-dropdown")&&le(!1)};return document.addEventListener("click",he),()=>document.removeEventListener("click",he)},[]),me.useEffect(()=>{if(!ot.userId)return;pe();const he=setInterval(pe,5e3);return()=>clearInterval(he)},[ot.userId]),me.useEffect(()=>{if(!a||!l)return;const he=Rr(l.userId,nt),Ce=dn(Lt,`Chats/${he}/messages`),Be=el(Ce,async st=>{const Ge=st.val()||{},pt=Object.entries(Ge).map(([Me,Oe])=>({messageId:Me,...Oe})).sort((Me,Oe)=>Me.timeStamp-Oe.timeStamp);p(pt);const de={};if(Object.entries(Ge).forEach(([Me,Oe])=>{Oe&&Oe.receiverId===nt&&!Oe.seen&&(de[`Chats/${he}/messages/${Me}/seen`]=!0)}),Object.keys(de).length>0)try{await qe.patch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/.json",de),Se(Me=>({...Me,[l.userId]:0})),await mr(he,l.userId),await qe.put(`${Qt}/Chats/${encodeURIComponent(he)}/unread/${nt}.json`,0).catch(()=>{}),await Ue(he)}catch(Me){console.error("Failed to patch seen updates:",Me)}});return()=>Be()},[a,l,nt]),me.useEffect(()=>{if(!a||!l){W(null);return}const he=Rr(l.userId,nt),Ce=dn(Lt,`Chats/${he}/typing`),Ve=el(Ce,Be=>{const st=Be.val();W((st==null?void 0:st.userId)||null)});return()=>{Ve(),W(null)}},[a,l,nt]);const Fe=async()=>{if(zt)try{const he=await qe.get(`${r}/get_post_notifications/${zt}`);let Ce=Array.isArray(he.data)?he.data:Object.values(he.data||{});if(Ce.length===0){ze([]);return}const[Ve,Be]=await Promise.all([qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json"),qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/School_Admins.json")]),st=Ve.data||{},Ge=Be.data||{},pt=Me=>{const Oe=Ge[Me];return Oe?Object.values(st).find(it=>it.userId===Oe.userId):null},de=Ce.map(Me=>{const Oe=pt(Me.adminId);return{...Me,notificationId:Me.notificationId||Me.id||`${Me.postId}_${Me.adminId}`,adminName:(Oe==null?void 0:Oe.name)||"Unknown Admin",adminProfile:(Oe==null?void 0:Oe.profileImage)||"/default-profile.png"}});ze(de)}catch(he){console.error("Post notification fetch failed",he),ze([])}};me.useEffect(()=>{if(!zt)return;Fe();const he=setInterval(Fe,5e3);return()=>clearInterval(he)},[zt]);const Ke=async he=>{try{await qe.post(`${r}/mark_post_notification_read`,{notificationId:he.notificationId,adminId:ot.userId})}catch(Ce){console.warn("Failed to delete notification:",Ce)}ze(Ce=>Ce.filter(Ve=>Ve.notificationId!==he.notificationId)),De(!1),wt("/dashboard",{state:{postId:he.postId}})};me.useEffect(()=>{var he;(he=location.state)!=null&&he.postId&&ze([])},[]),me.useEffect(()=>{const he=Ce=>{!Ce.target.closest(".icon-circle")&&!Ce.target.closest(".notification-dropdown")&&De(!1)};return document.addEventListener("click",he),()=>document.removeEventListener("click",he)},[]),me.useEffect(()=>{const he=Ce=>{le(!1)};return document.addEventListener("click",he),()=>document.removeEventListener("click",he)},[]),me.useEffect(()=>{(async()=>{try{const Ve=await(await fetch("/api/unreadSenders")).json();ke(Ve)}catch{}})()},[]);const pe=async()=>{if(!ot.userId)return;const he={};try{const Ve=(await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json")).data||{},Be=Me=>Object.values(Ve).find(Oe=>Oe.userId===Me),st=async Me=>{const Oe=`${ot.userId}_${Me}`,it=`${Me}_${ot.userId}`,[vt,It]=await Promise.all([qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Oe}/messages.json`),qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${it}/messages.json`)]);return[...Object.values(vt.data||{}),...Object.values(It.data||{})].filter(ir=>ir.receiverId===ot.userId&&!ir.seen).length},Ge=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json");for(const Me in Ge.data||{}){const Oe=Ge.data[Me],it=await st(Oe.userId);if(it>0){const vt=Be(Oe.userId);he[Oe.userId]={type:"teacher",name:(vt==null?void 0:vt.name)||"Teacher",profileImage:(vt==null?void 0:vt.profileImage)||"/default-profile.png",count:it}}}const pt=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Students.json");for(const Me in pt.data||{}){const Oe=pt.data[Me],it=await st(Oe.userId);if(it>0){const vt=Be(Oe.userId);he[Oe.userId]={type:"student",name:(vt==null?void 0:vt.name)||Oe.name||"Student",profileImage:(vt==null?void 0:vt.profileImage)||Oe.profileImage||"/default-profile.png",count:it}}}const de=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Parents.json");for(const Me in de.data||{}){const Oe=de.data[Me],it=await st(Oe.userId);if(it>0){const vt=Be(Oe.userId);he[Oe.userId]={type:"parent",name:(vt==null?void 0:vt.name)||Oe.name||"Parent",profileImage:(vt==null?void 0:vt.profileImage)||Oe.profileImage||"/default-profile.png",count:it}}}ke(he)}catch(Ce){console.error("Unread fetch failed:",Ce)}};me.useEffect(()=>{const he=Ce=>{!Ce.target.closest(".icon-circle")&&!Ce.target.closest(".messenger-dropdown")&&le(!1)};return document.addEventListener("click",he),()=>document.removeEventListener("click",he)},[]),me.useEffect(()=>{if(!ot.userId)return;pe();const he=setInterval(pe,5e3);return()=>clearInterval(he)},[ot.userId]);const Te=async he=>{const Ce=`${ot.userId}_${he}`,Ve=`${he}_${ot.userId}`,[Be,st]=await Promise.all([qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ce}/messages.json`),qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ve}/messages.json`)]),Ge={},pt=(de,Me)=>{Object.entries(de||{}).forEach(([Oe,it])=>{it.receiverId===ot.userId&&!it.seen&&(Ge[`${Me}/${Oe}/seen`]=!0)})};pt(Be.data,`Chats/${Ce}/messages`),pt(st.data,`Chats/${Ve}/messages`),Object.keys(Ge).length>0&&await qe.patch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/.json",Ge)},Ze=Object.values(ve||{}).reduce((he,Ce)=>he+(Ce.count||0),0);return((Ne==null?void 0:Ne.length)||0)+Ze,T.jsxs("div",{className:"dashboard-page",children:[T.jsxs("nav",{className:"top-navbar",children:[T.jsx("h2",{children:"Gojo Dashboard"}),T.jsxs("div",{className:"nav-right",children:[T.jsxs("div",{className:"icon-circle",style:{position:"relative",cursor:"pointer"},onClick:he=>{he.stopPropagation(),De(Ce=>!Ce)},children:[T.jsx(wc,{}),(()=>{const he=Object.values(ve||{}).reduce((Ve,Be)=>Ve+(Be.count||0),0),Ce=((Ne==null?void 0:Ne.length)||0)+he;return Ce>0?T.jsx("span",{style:{position:"absolute",top:"-5px",right:"-5px",background:"red",color:"#fff",borderRadius:"50%",padding:"2px 6px",fontSize:"10px",fontWeight:"bold"},children:Ce}):null})(),we&&T.jsx("div",{className:"notification-dropdown",style:{position:"absolute",top:"40px",right:"0",width:"360px",maxHeight:"420px",overflowY:"auto",background:"#fff",borderRadius:10,boxShadow:"0 6px 20px rgba(0,0,0,0.12)",zIndex:1e3,padding:6},onClick:he=>he.stopPropagation(),children:((Ne==null?void 0:Ne.length)||0)+Object.values(ve||{}).reduce((he,Ce)=>he+(Ce.count||0),0)===0?T.jsx("p",{style:{padding:"12px",textAlign:"center",color:"#777"},children:"No new notifications"}):T.jsxs("div",{children:[Ne.length>0&&T.jsxs("div",{children:[T.jsx("div",{style:{padding:"8px 12px",borderBottom:"1px solid #eee",fontWeight:700},children:"Posts"}),Ne.map(he=>T.jsxs("div",{style:{padding:10,display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:"1px solid #f0f0f0",transition:"background 120ms ease"},onMouseEnter:Ce=>Ce.currentTarget.style.background="#f6f8fa",onMouseLeave:Ce=>Ce.currentTarget.style.background="",onClick:()=>Ke(he),children:[T.jsx("img",{src:he.adminProfile||"/default-profile.png",alt:he.adminName,style:{width:46,height:46,borderRadius:8,objectFit:"cover"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("strong",{style:{display:"block",marginBottom:4},children:he.adminName}),T.jsx("p",{style:{margin:0,fontSize:13,color:"#555",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:he.message})]}),T.jsx("div",{style:{fontSize:12,color:"#888",marginLeft:8},children:new Date(he.time||he.createdAt||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},he.notificationId))]}),Object.values(ve||{}).reduce((he,Ce)=>he+(Ce.count||0),0)>0&&T.jsxs("div",{children:[T.jsx("div",{style:{padding:"8px 10px",color:"#333",fontWeight:700,background:"#fafafa",borderRadius:6,margin:"8px 6px"},children:"Messages"}),Object.entries(ve||{}).map(([he,Ce])=>T.jsxs("div",{style:{padding:10,display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:"1px solid #f0f0f0",transition:"background 120ms ease"},onMouseEnter:Ve=>Ve.currentTarget.style.background="#f6f8fa",onMouseLeave:Ve=>Ve.currentTarget.style.background="",onClick:async()=>{await Te(he),ke(Ve=>{const Be={...Ve};return delete Be[he],Be}),De(!1),wt("/all-chat",{state:{user:{userId:he,name:Ce.name,profileImage:Ce.profileImage,type:Ce.type}}})},children:[T.jsx("img",{src:Ce.profileImage||"/default-profile.png",alt:Ce.name,style:{width:46,height:46,borderRadius:8,objectFit:"cover"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("strong",{style:{display:"block",marginBottom:4},children:Ce.name}),T.jsxs("p",{style:{margin:0,fontSize:13,color:"#555",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:[Ce.count," new message",Ce.count>1&&"s"]})]})]},he))]})]})})]}),T.jsxs("div",{className:"icon-circle",style:{position:"relative",cursor:"pointer"},onClick:()=>wt("/all-chat"),children:[T.jsx(vc,{}),Object.values(ve||{}).reduce((he,Ce)=>he+(Ce.count||0),0)>0&&T.jsx("span",{style:{position:"absolute",top:"-5px",right:"-5px",background:"red",color:"#fff",borderRadius:"50%",padding:"2px 6px",fontSize:"10px",fontWeight:"bold"},children:Object.values(ve||{}).reduce((he,Ce)=>he+(Ce.count||0),0)})]}),T.jsx(gr,{className:"icon-circle",to:"/settings",children:T.jsx(_c,{})}),T.jsx("img",{src:ot.profileImage||"/default-profile.png",alt:"admin",className:"profile-img"})]})]}),T.jsxs("div",{className:"google-dashboard",style:{display:"flex"},children:[T.jsxs("div",{className:"google-sidebar",style:{width:"220px",padding:"10px"},children:[T.jsxs("div",{className:"sidebar-profile",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6,paddingBottom:6},children:[T.jsx("div",{className:"sidebar-img-circle",style:{width:48,height:48,borderRadius:"50%",overflow:"hidden",border:"2px solid #e6eefc"},children:T.jsx("img",{src:ot.profileImage||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover"}})}),T.jsx("h3",{style:{margin:0,fontSize:14,fontWeight:700},children:ot.name}),T.jsx("p",{style:{margin:0,fontSize:12,color:"#6b7280"},children:(ot==null?void 0:ot.adminId)||"username"})]}),T.jsxs("div",{className:"sidebar-menu",style:{display:"flex",flexDirection:"column",gap:6,marginTop:8},children:[T.jsxs(gr,{className:"sidebar-btn",to:"/dashboard",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(xc,{style:{width:18,height:18}})," Home"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/my-posts",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Ca,{style:{width:18,height:18}})," My Posts"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/teachers",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13,backgroundColor:"#4b6cb7",color:"#fff",borderRadius:8},children:[T.jsx(Pn,{style:{width:18,height:18}})," Teachers"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/students",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Students"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/schedule",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(sl,{style:{width:18,height:18}})," Schedule"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/parents",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Parents"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/registration-form",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Registration Form"]}),T.jsxs("button",{className:"sidebar-btn logout-btn",onClick:()=>{localStorage.removeItem("admin"),window.location.href="/login"},style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Sc,{style:{width:18,height:18}})," Logout"]})]})]}),T.jsxs("div",{className:"main-content",style:{padding:"10px 20px 20px",flex:1,minWidth:0,boxSizing:"border-box"},children:[T.jsx("h2",{style:{marginBottom:"6px",textAlign:lt?"center":"left",marginTop:"-8px",fontSize:"20px",marginLeft:lt?0:64},children:"Teachers"}),T.jsx("div",{style:{display:"flex",justifyContent:lt?"center":"flex-start",marginBottom:"8px",paddingLeft:lt?0:64},children:T.jsxs("div",{style:{width:"min(580px, 100%)",display:"flex",alignItems:"center",gap:"8px",background:"#fff",borderRadius:"10px",padding:"6px 10px",border:"1px solid #e5e7eb",boxShadow:"0 2px 6px rgba(0,0,0,0.06)"},children:[T.jsx(jv,{style:{color:"#64748b",fontSize:"12px"}}),T.jsx("input",{type:"text",value:h,onChange:he=>m(he.target.value),placeholder:"Search teachers by name, subject, or grade",style:{border:"none",outline:"none",width:"100%",fontSize:"12px",color:"#111827",background:"transparent"}})]})}),T.jsx("div",{style:{display:"flex",justifyContent:lt?"center":"flex-start",marginBottom:"10px",paddingLeft:lt?0:64},children:T.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",justifyContent:"center",maxWidth:"100%",overflowX:"auto",paddingBottom:1},children:["All","1","2","3","4","5","6","7","8"].map(he=>T.jsx("button",{onClick:()=>o(he),style:{padding:"4px 10px",borderRadius:"8px",background:s===he?"#4b6cb7":"#ddd",color:s===he?"#fff":"#000",cursor:"pointer",border:"none",fontSize:"11px"},children:he==="All"?"All Teachers":`Grade ${he}`},he))})}),n?T.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:lt?"center":"flex-start",gap:"10px",marginLeft:lt?0:"165px"},children:Array.from({length:4}).map((he,Ce)=>T.jsxs("div",{style:{width:lt?"92%":"400px",borderRadius:"12px",padding:"10px",background:"#fff",border:"1px solid #eee",boxShadow:"0 2px 6px rgba(0,0,0,0.04)",display:"flex",alignItems:"center",gap:12},children:[T.jsx("div",{style:{width:36,height:36,borderRadius:10,background:"#f0f2f5"}}),T.jsx("div",{style:{width:48,height:48,borderRadius:"50%",background:"#e6e6e6"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("div",{style:{height:12,width:"40%",background:"#e6e6e6",borderRadius:6,marginBottom:8}}),T.jsx("div",{style:{height:10,width:"60%",background:"#f0f0f0",borderRadius:6}})]})]},Ce))}):zr.length===0?T.jsx("p",{style:{textAlign:"center",color:"#555"},children:"No teachers found for this grade."}):T.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:lt?"center":"flex-start",gap:"10px",marginLeft:lt?0:"165px"},children:zr.map((he,Ce)=>{var Ve;return T.jsxs("div",{onClick:()=>c(he),style:{width:lt?"92%":"400px",borderRadius:"12px",padding:"10px",background:(l==null?void 0:l.teacherId)===he.teacherId?"#e0e7ff":"#fff",border:(l==null?void 0:l.teacherId)===he.teacherId?"2px solid #4b6cb7":"1px solid #ddd",boxShadow:(l==null?void 0:l.teacherId)===he.teacherId?"0 6px 15px rgba(75,108,183,0.3)":"0 4px 10px rgba(0,0,0,0.1)",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,flex:"0 0 auto"},children:[T.jsx("div",{style:{width:36,height:36,borderRadius:10,background:"#eef2ff",color:"#2563eb",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:13,flex:"0 0 auto"},children:Ce+1}),T.jsx("img",{src:he.profileImage,alt:he.name,style:{width:48,height:48,borderRadius:"50%",border:(l==null?void 0:l.teacherId)===he.teacherId?"3px solid #4b6cb7":"3px solid #ddd",objectFit:"cover",transition:"all 0.3s ease",flex:"0 0 auto"}})]}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",marginLeft:12,minWidth:0},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[T.jsx("h3",{style:{margin:0,fontSize:14,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:he.name}),ae[he.userId]>0&&T.jsx("span",{style:{background:"red",color:"#fff",borderRadius:12,padding:"2px 6px",fontSize:11,fontWeight:700,marginLeft:8},children:ae[he.userId]})]}),T.jsx("div",{style:{color:"#555",fontSize:11,marginTop:6,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:((Ve=he.subjectsUnique)==null?void 0:Ve.length)>0?he.subjectsUnique.join(", "):"No assigned courses"})]})]},he.teacherId)})})]}),l&&T.jsxs("div",{className:"teacher-info-sidebar",style:{width:et?"100%":"30%",position:"fixed",left:et?0:"auto",right:0,top:et?0:"55px",height:et?"100vh":"calc(100vh - 55px)",background:"#ffffff",boxShadow:"0 0 18px rgba(0,0,0,0.08)",borderLeft:et?"none":"1px solid #e5e7eb",zIndex:120,display:"flex",flexDirection:"column",fontSize:"10px"},children:[T.jsx("div",{style:{position:"absolute",top:0,left:22,zIndex:999},children:T.jsx("button",{onClick:()=>c(null),"aria-label":"Close sidebar",style:{background:"none",border:"none",fontSize:28,fontWeight:700,color:"#3647b7",cursor:"pointer",padding:2,lineHeight:1},children:""})}),T.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"12px"},children:[T.jsxs("div",{style:{background:"#e0e7ff",margin:"-12px -12px 10px",padding:"14px 10px",textAlign:"center"},children:[T.jsx("div",{style:{width:"70px",height:"70px",margin:"0 auto 10px",borderRadius:"50%",overflow:"hidden",border:"3px solid #4b6cb7"},children:T.jsx("img",{src:l.profileImage,alt:l.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),T.jsx("h2",{style:{margin:0,color:"#111827",fontSize:14},children:l.name}),T.jsx("p",{style:{margin:"4px 0",color:"#6b7280",fontSize:"10px"},children:(He==null?void 0:He.email)||l.email||"teacher@example.com"})]}),T.jsx("div",{style:{display:"flex",borderBottom:"1px solid #e5e7eb",marginBottom:"10px"},children:["details","schedule","plan"].map(he=>T.jsx("button",{onClick:()=>f(he),style:{flex:1,padding:"6px",background:"none",border:"none",cursor:"pointer",fontWeight:600,color:d===he?"#4b6cb7":"#6b7280",fontSize:"10px",borderBottom:d===he?"3px solid #4b6cb7":"3px solid transparent"},children:he.toUpperCase()},he))}),d==="details"&&l&&T.jsxs("div",{style:{padding:"12px",background:"#ffffff",borderRadius:12,border:"1px solid #e5e7eb",boxShadow:"0 8px 20px rgba(15,23,42,0.06)",margin:"0 auto",maxWidth:380},children:[T.jsx("h3",{style:{margin:0,marginBottom:6,color:"#0f172a",fontWeight:800,letterSpacing:"0.1px",fontSize:12,textAlign:"left"},children:"Teacher Profile"}),T.jsxs("div",{style:{color:"#64748b",fontSize:9,textAlign:"left",marginBottom:10},children:["ID: ",T.jsx("b",{style:{color:"#111827"},children:l.teacherId})]}),T.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:10},children:[{label:"Email",icon:"",value:(He==null?void 0:He.email)||l.email},{label:"Gender",icon:((He==null?void 0:He.gender)||l.gender)==="male"?"":((He==null?void 0:He.gender)||l.gender)==="female"?"":"",value:(He==null?void 0:He.gender)||l.gender||"N/A"},{label:"Phone",icon:"",value:(He==null?void 0:He.phone)||l.phone||l.phoneNumber||"N/A"},{label:"Status",icon:"",value:l.status||"Active"},{label:"Class(es)",icon:"",value:(()=>{const he=new Set;return((l==null?void 0:l.gradesSubjects)||[]).forEach(Ce=>{const Ve=((Ce==null?void 0:Ce.grade)??"").toString().trim(),Be=((Ce==null?void 0:Ce.section)??"").toString().trim();Ve&&Be?he.add(`Grade ${Ve}${Be}`):Ve&&he.add(`Grade ${Ve}`)}),Array.from(he).join(", ")})()},{label:"Subject(s)",icon:"",value:(ut=l.subjectsUnique)==null?void 0:ut.join(", ")},{label:"Teacher ID",icon:"",value:l.teacherId}].map((he,Ce)=>T.jsxs("div",{style:{alignItems:"center",justifyContent:"flex-start",display:"flex",background:"#ffffff",padding:"8px",borderRadius:10,border:"1px solid #eef2f7",boxShadow:"none",minHeight:36},children:[T.jsx("span",{style:{fontSize:14,marginRight:8,display:"inline-flex",alignItems:"center",justifyContent:"center",color:"#64748b"},children:he.icon}),T.jsxs("div",{children:[T.jsx("div",{style:{fontSize:"9px",fontWeight:700,letterSpacing:"0.4px",color:"#64748b",textTransform:"uppercase"},children:he.label}),T.jsx("div",{style:{fontSize:10,fontWeight:600,color:he.label==="Status"?he.value&&String(he.value).toLowerCase()==="active"?"#16a34a":"#991b1b":"#111",marginTop:2,wordBreak:"break-word"},children:he.value||T.jsx("span",{style:{color:"#d1d5db"},children:"N/A"})})]})]},Ce))}),(()=>{const he=new Map;((l==null?void 0:l.gradesSubjects)||[]).forEach(Ve=>{const Be=((Ve==null?void 0:Ve.grade)??"").toString().trim(),st=((Ve==null?void 0:Ve.section)??"").toString().trim(),Ge=((Ve==null?void 0:Ve.subject)??"").toString().trim();if(!Be||!st||!Ge)return;const pt=`Grade ${Be}${st}`;he.has(pt)||he.set(pt,new Set),he.get(pt).add(Ge)});const Ce=Array.from(he.keys()).sort((Ve,Be)=>Ve.localeCompare(Be,void 0,{numeric:!0}));return Ce.length?T.jsxs("div",{style:{background:"#ffffff",borderRadius:12,padding:10,border:"1px solid #eef2f7",boxShadow:"none"},children:[T.jsx("div",{style:{fontSize:10,fontWeight:800,letterSpacing:"0.4px",color:"#64748b",textTransform:"uppercase",marginBottom:8},children:"Teaching by class"}),T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:Ce.map(Ve=>T.jsxs("div",{style:{display:"flex",gap:10,alignItems:"flex-start"},children:[T.jsx("div",{style:{minWidth:110,fontWeight:800,color:"#0f172a"},children:Ve}),T.jsx("div",{style:{color:"#111827",fontWeight:600,lineHeight:1.35,wordBreak:"break-word"},children:Array.from(he.get(Ve)||[]).sort((Be,st)=>Be.localeCompare(st)).join(", ")})]},Ve))})]}):null})()]}),d==="schedule"&&T.jsxs("div",{style:{padding:"8px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,marginBottom:10},children:[T.jsx("h4",{style:{fontSize:"12px",fontWeight:"800",color:"#111827",letterSpacing:"0.1px",margin:0},children:"Weekly Teaching Schedule"}),T.jsx("button",{type:"button",className:"btn btn-sm",style:{background:"#4b6cb7",color:"#ffffff",border:"none",padding:"5px 8px",borderRadius:"10px",fontWeight:800,fontSize:"9px",letterSpacing:"0.2px",boxShadow:"none",textTransform:"none"},onClick:lr,disabled:!j||Object.keys(j).length===0,children:"Download PDF"})]}),Object.keys(j).length===0?T.jsx("div",{style:{textAlign:"center",padding:"12px",borderRadius:"12px",background:"#f8fafc",border:"1px solid #e2e8f0",color:"#475569",fontSize:"10px",boxShadow:"none"},children:"No schedule assigned yet"}):T.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"6px"},children:Ct.filter(he=>j[he]).map(he=>{const Ce=j[he],Ve=jt===he;return T.jsxs("div",{style:{borderRadius:"12px",padding:"7px",background:"#ffffff",boxShadow:"0 8px 22px rgba(15,23,42,0.06)",border:Ve?"1px solid #4b6cb7":"1px solid #e5e7eb"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[T.jsx("h5",{style:{fontSize:"12px",fontWeight:"800",color:"#0f172a"},children:he}),T.jsxs("span",{style:{fontSize:"10px",padding:"4px 6px",borderRadius:"999px",background:"#f1f5f9",color:"#334155",fontWeight:"700"},children:[Object.keys(Ce).length," periods"]})]}),Object.entries(Ce).map(([Be,st])=>{const Ge=Sr(Be),pt=Ve&&Ge&&Mt>=Ge.start&&Mt<Ge.end;return T.jsxs("div",{style:{marginBottom:"6px",borderRadius:"12px",padding:"8px",background:pt?"#eef2ff":"#f8fafc",border:pt?"1px solid #4b6cb7":"1px solid #e2e8f0"},children:[T.jsxs("div",{style:{fontSize:"9px",fontWeight:"800",color:"#1f2937",marginBottom:"4px"},children:[T.jsx("span",{children:Be}),pt&&T.jsx("span",{style:{marginLeft:"8px",fontSize:"8px",padding:"1px 4px",borderRadius:"999px",background:"#4b6cb7",color:"#ffffff",fontWeight:"700"},children:"NOW"})]}),st.map((de,Me)=>T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 6px",borderRadius:"8px",background:"#ffffff",marginBottom:"4px",border:"1px solid #eef2f7",boxShadow:"none",fontSize:"10px"},children:[T.jsx("span",{style:{fontWeight:"600",color:"#111827"},children:de.subject}),T.jsx("span",{style:{fontSize:"8px",fontWeight:"500",padding:"1px 4px",borderRadius:"999px",background:"#f1f5f9",color:"#334155"},children:de.class})]},Me))]},Be)})]},he)})})]}),d==="plan"&&(()=>{const he=l==null?void 0:l.userId,Ce=String((l==null?void 0:l.teacherId)||he||"").trim(),Ve=new Date,Be=Ve.toISOString().slice(0,10),st=Ve.getDay(),Ge=Ve.toLocaleDateString("en-US",{month:"long"}),pt=_t=>{if(_t==null)return"";const Et=String(_t).trim();if(!Et)return"";const Qe=Et.match(/\d+/);return Qe?Qe[0]:Et},de=_t=>String(_t||"").trim().toLowerCase(),Me=(_t,Et,Qe,Ae)=>{const Ee=String(_t||"").trim(),gt=String(Et||"").trim();return`${Ee}::${gt}::${pt(Qe)}::${de(Ae)}`},Oe=new Set((J||[]).flatMap(_t=>{const Et=String(_t).trim(),Qe=Et.split("::");if(Qe.length>=4){const[Ae,Ee,gt,$t]=Qe.map(dt=>String(dt??"").trim());return[Et,Me(Ae,Ee,gt,$t)]}return[Et]})),it=Array.from(new Set([...Array.isArray(C)?C.map(_t=>String((_t==null?void 0:_t.courseId)||"")).filter(Boolean):[],...Array.isArray(x)?x.map(_t=>String((_t==null?void 0:_t.courseId)||"")).filter(Boolean):[],...Array.isArray(P)?P.map(_t=>String((_t==null?void 0:_t.courseId)||"")).filter(Boolean):[]])),vt=[{value:"all",label:"All Subjects"},...it.map(_t=>({value:_t,label:(te==null?void 0:te[_t])||_t}))],It=Z==="all"?"All Subjects":(te==null?void 0:te[Z])||Z,kt=Z==="all"?P||[]:(P||[]).filter(_t=>String((_t==null?void 0:_t.courseId)||"")===String(Z)),ir=Z==="all"?x||[]:(x||[]).filter(_t=>String((_t==null?void 0:_t.courseId)||"")===String(Z)),Zt=Z==="all"?C||[]:(C||[]).filter(_t=>String((_t==null?void 0:_t.courseId)||"")===String(Z)),qt=_t=>{const Et=(_t||"").toString().toLowerCase();return Object.prototype.hasOwnProperty.call(pr,Et)?pr[Et]:null},Ut=(_t,Et,Qe)=>Me(Ce||"anon",_t||"unknown",Et||"",Qe||""),sr=(_t,Et,Qe)=>{const Ae=((Qe==null?void 0:Qe.dayName)||"").toString(),Ee=((Qe==null?void 0:Qe.date)||"").toString().slice(0,10),gt=qt(Ae),$t=Ut(_t,Et,Ae);return Oe.has($t)?{status:"submitted",key:$t}:Ee&&Ee<Be?{status:"missed",key:$t}:gt!==null&&gt<st?{status:"missed",key:$t}:{status:"pending",key:$t}},rr=(()=>{const _t={submitted:0,missed:0,pending:0,total:0};return(ir||[]).forEach(Et=>{((Et==null?void 0:Et.weekDays)||[]).forEach(Qe=>{const Ae=sr(Et==null?void 0:Et.courseId,Et==null?void 0:Et.week,Qe);_t[Ae.status]=(_t[Ae.status]||0)+1,_t.total+=1})}),_t})(),ur=(Zt||[]).filter(_t=>{const Et=((_t==null?void 0:_t.month)||"").toString().trim().toLowerCase();return Et&&Et===Ge.toLowerCase()}),hr=ur.length,Mr=(()=>{const _t={submitted:0,missed:0,pending:0,total:0,topics:[]};return(ur||[]).forEach(Et=>{Et!=null&&Et.topic&&_t.topics.push(Et.topic),((Et==null?void 0:Et.weekDays)||[]).forEach(Qe=>{const Ae=sr(Et==null?void 0:Et.courseId,Et==null?void 0:Et.week,Qe);_t[Ae.status]=(_t[Ae.status]||0)+1,_t.total+=1,Qe!=null&&Qe.topic&&_t.topics.push(Qe.topic)})}),_t.topics=Array.from(new Set(_t.topics.filter(Boolean))),_t})(),Yr=Mr.total?Math.round(Mr.submitted/Mr.total*100):0,Br={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},si=_t=>{const Et=(_t||"").toString().trim().toLowerCase();return Br[Et]||999},Zr=Array.isArray(Zt)?Zt:[],an=Zr.reduce((_t,Et)=>{const Qe=((Et==null?void 0:Et.month)||"").toString().trim()||"Other";return _t[Qe]||(_t[Qe]=[]),_t[Qe].push(Et),_t},{}),Ln=Object.keys(an).sort((_t,Et)=>{const Qe=si(_t),Ae=si(Et);return Qe!==Ae?Qe-Ae:_t.localeCompare(Et)}),Wr=_t=>{const Et=_t==null?void 0:_t.week;if(Et==null)return 9999;const Qe=Number(Et);if(!Number.isNaN(Qe))return Qe;const Ae=String(Et).match(/\d+/);return Ae?Number(Ae[0]):9999},qr=()=>{try{const _t=_r=>_r==null?"":Array.isArray(_r)?_r.map(_n=>String(_n??"").trim()).filter(Boolean).join("; "):String(_r).trim(),Et=_r=>Array.from(new Set((_r||[]).map(Gt=>_t(Gt)).filter(Boolean))).join("; "),Qe=_r=>String(_r??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),Ae=[];if(Ln.forEach(_r=>{(an[_r]||[]).slice().sort((Gt,Tn)=>Wr(Gt)-Wr(Tn)).forEach(Gt=>{const Tn=Gt!=null&&Gt.week?`Week ${Gt.week}`:"-",di=Array.isArray(Gt==null?void 0:Gt.weekDays)?Gt.weekDays:[],$n=_t(Gt==null?void 0:Gt.topic)||Et(di.map(Yt=>Yt==null?void 0:Yt.topic)),oi=_t(Gt==null?void 0:Gt.objective)||_t(Gt==null?void 0:Gt.objectives)||Et(di.map(Yt=>(Yt==null?void 0:Yt.objective)??(Yt==null?void 0:Yt.objectives))),ai=_t(Gt==null?void 0:Gt.method)||Et(di.map(Yt=>Yt==null?void 0:Yt.method)),ss=_t(Gt==null?void 0:Gt.material)||_t(Gt==null?void 0:Gt.materials)||_t(Gt==null?void 0:Gt.aids)||Et(di.map(Yt=>(Yt==null?void 0:Yt.material)??(Yt==null?void 0:Yt.materials)??(Yt==null?void 0:Yt.aids))),li=_t(Gt==null?void 0:Gt.assessment)||Et(di.map(Yt=>Yt==null?void 0:Yt.assessment)),Nr=(()=>{const Yt={submitted:0,missed:0,pending:0,total:0};return(di||[]).forEach(dr=>{const Or=sr(Gt==null?void 0:Gt.courseId,Gt==null?void 0:Gt.week,dr);Yt[Or.status]=(Yt[Or.status]||0)+1,Yt.total+=1}),Yt})(),Hr=Nr.missed>0?"missed":Nr.submitted>0?"submitted":"pending";Ae.push({month:_r,week:Tn,topic:$n,objective:oi,method:ai,material:ss,assessment:li,status:Hr})})}),!Ae.length)return;const Ee=((l==null?void 0:l.fullName)||(l==null?void 0:l.name)||(l==null?void 0:l.userId)||"teacher").toString(),gt=Ee.replace(/[\\/:*?"<>|]/g,"_"),$t=(It||"all").toString().replace(/[\\/:*?"<>|]/g,"_"),dt=new Date().toISOString().slice(0,10),Tt=`Annual_Lesson_Plan_${gt}_${$t}_${dt}.xls`,er="2025/26",Ur=(It||"").toString(),pn=(()=>{if(!Ur||Z==="all")return{subject:"All Subjects",gradeSection:""};const _r=Ur.split("").map(ai=>ai.trim()).filter(Boolean),_n=_r[0]||Ur,Gt=_r[1]||"";if(!Gt)return{subject:_n,gradeSection:""};const Tn=Gt.match(/Grade\s*(\d+)\s*(.*)$/i);if(!Tn)return{subject:_n,gradeSection:Gt};const di=Tn[1]?`Grade ${Tn[1]}`:"",$n=(Tn[2]||"").trim(),oi=[di,$n].filter(Boolean).join(" ");return{subject:_n,gradeSection:oi}})(),Dt=`
              table { border-collapse: collapse; font-family: Calibri, Arial, sans-serif; font-size: 12pt; }
              th, td { border: 1px solid #000; padding: 6px 8px; vertical-align: top; }
              th { background: #f1f5f9; font-weight: 700; }
            `,kr=["Month","Week","Topic","Objective","Method","Material","Assessment"],fr=`
              <div style="font-family: Calibri, Arial, sans-serif; font-size: 12pt;">
                <div><strong>Teacher Name:</strong> ${Qe(Ee)}</div>
                <div><strong>Grade &amp; Section:</strong> ${Qe(pn.gradeSection||"-")}</div>
                <div><strong>Subject:</strong> ${Qe(pn.subject||Ur||"-")}</div>
                <div><strong>Year:</strong> ${Qe(er)}</div>
              </div>
              <br />
            `,tr=`
              <table>
                <thead>
                  <tr>${kr.map(_r=>`<th>${Qe(_r)}</th>`).join("")}</tr>
                </thead>
                <tbody>
                  ${Ae.map(_r=>`<tr style="background-color:${_r.status==="missed"?"#FEE2E2":_r.status==="submitted"?"#DCFCE7":"#FFFFFF"};">
                      <td>${Qe(_r.month)}</td>
                      <td>${Qe(_r.week)}</td>
                      <td>${Qe(_r.topic||"-")}</td>
                      <td>${Qe(_r.objective||"-")}</td>
                      <td>${Qe(_r.method||"-")}</td>
                      <td>${Qe(_r.material||"-")}</td>
                      <td>${Qe(_r.assessment||"-")}</td>
                    </tr>`).join("")}
                </tbody>
              </table>
            `,Vr=`
              <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
                <head>
                  <meta charset="utf-8" />
                  <style>${Dt}</style>
                </head>
                <body>
                  ${fr}
                  ${tr}
                </body>
              </html>
            `,Cr=new Blob([Vr],{type:"application/vnd.ms-excel;charset=utf-8;"}),or=URL.createObjectURL(Cr),Xr=document.createElement("a");Xr.href=or,Xr.download=Tt,document.body.appendChild(Xr),Xr.click(),Xr.remove(),URL.revokeObjectURL(or)}catch(_t){console.error("Failed to export annual plan",_t)}},ki=()=>{if(k==="daily"){const _t=(()=>{const Et=[];return(Zt||[]).forEach(Qe=>{((Qe==null?void 0:Qe.weekDays)||[]).forEach(Ae=>{const Ee=sr(Qe==null?void 0:Qe.courseId,Qe==null?void 0:Qe.week,Ae);Ee.status==="submitted"&&Et.push({...Ae,courseId:Qe==null?void 0:Qe.courseId,week:Qe==null?void 0:Qe.week,month:Qe==null?void 0:Qe.month,key:Ee.key,status:"submitted",topic:(Ae==null?void 0:Ae.topic)||(Qe==null?void 0:Qe.topic)||"",method:(Ae==null?void 0:Ae.method)||(Qe==null?void 0:Qe.method)||"",aids:(Ae==null?void 0:Ae.aids)||(Qe==null?void 0:Qe.material)||(Qe==null?void 0:Qe.materials)||(Qe==null?void 0:Qe.aids)||"",assessment:(Ae==null?void 0:Ae.assessment)||(Qe==null?void 0:Qe.assessment)||""})})}),Et.sort((Qe,Ae)=>{var Tt,er;const Ee=((Qe==null?void 0:Qe.date)||"").toString().slice(0,10),gt=((Ae==null?void 0:Ae.date)||"").toString().slice(0,10);if(Ee&&gt&&Ee!==gt)return gt.localeCompare(Ee);const $t=Number(((Tt=String((Qe==null?void 0:Qe.week)??"").match(/\d+/))==null?void 0:Tt[0])??0);return Number(((er=String((Ae==null?void 0:Ae.week)??"").match(/\d+/))==null?void 0:er[0])??0)-$t}),Et})();return T.jsxs("div",{className:"space-y-3",children:[T.jsxs("div",{style:{background:"#fff",borderRadius:8,padding:6,boxShadow:"0 4px 10px rgba(11,20,30,0.04)"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("h3",{className:"font-semibold",style:{margin:0,fontSize:11},children:"Submitted Daily Plans"}),T.jsxs("div",{style:{textAlign:"right"},children:[T.jsx("div",{style:{fontSize:9,color:"#666"},children:"Total"}),T.jsx("div",{style:{fontWeight:800,color:"#16a34a"},children:_t.length})]})]}),_t.length?T.jsxs("div",{style:{marginTop:6,display:"flex",flexDirection:"column",gap:5},children:[_t.slice(0,10).map((Et,Qe)=>T.jsxs("div",{style:{display:"flex",gap:6,padding:6,borderRadius:8,background:"#ecfdf5",border:"1px solid #bbf7d0",alignItems:"center"},children:[T.jsx("div",{style:{width:5,height:30,borderRadius:6,background:"#16a34a"}}),T.jsxs("div",{style:{flex:1},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("div",{style:{fontWeight:800,fontSize:10},children:Et.dayName||`Submitted ${Qe+1}`}),T.jsxs("div",{style:{fontSize:9,color:"#166534"},children:[Et.week?`Week: ${Et.week}`:"Week: -",Et!=null&&Et.date?`  ${String(Et.date).slice(0,10)}`:""]})]}),T.jsx("div",{style:{fontSize:10,color:"#14532d",marginTop:3},children:Et.topic||"No topic provided"}),T.jsx("div",{style:{fontSize:9,color:"#166534",marginTop:3},children:Et.method?`Method: ${Et.method}`:Et.aids?`Material: ${Et.aids}`:Et.assessment?`Assessment: ${Et.assessment}`:"Quick note: -"})]}),T.jsx("div",{style:{background:"#16a34a",color:"#fff",padding:"3px 6px",borderRadius:999,fontSize:9,fontWeight:800},children:"Submitted"})]},(Et==null?void 0:Et.key)||Qe)),_t.length>10&&T.jsx("div",{style:{fontSize:9,color:"#166534",textAlign:"center"},children:"Showing latest 10 submitted daily plans."})]}):T.jsx("div",{style:{marginTop:6,textAlign:"center",color:"#666",fontSize:9},children:"No submitted daily plans yet."})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("h3",{className:"font-semibold",style:{fontSize:11},children:"Today's Plan"}),T.jsxs("div",{style:{textAlign:"right"},children:[T.jsx("div",{style:{fontSize:9,color:"#666"},children:"Today"}),T.jsx("div",{style:{fontWeight:700},children:(kt||[]).length})]})]}),kt&&kt.length>0?T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:5},children:kt.map((Et,Qe)=>{const Ae=(Et==null?void 0:Et.status)||"pending",Ee=Ae==="submitted"?"#2f855a":Ae==="missed"?"#c53030":"#4a5568";return T.jsxs("div",{style:{display:"flex",gap:6,padding:6,borderRadius:8,background:"#fff",boxShadow:"0 4px 10px rgba(11,20,30,0.04)",alignItems:"center"},children:[T.jsx("div",{style:{width:5,height:30,borderRadius:6,background:Ee}}),T.jsxs("div",{style:{flex:1},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("div",{style:{fontWeight:700,fontSize:10},children:Et.dayName||`Plan ${Qe+1}`}),T.jsx("div",{style:{fontSize:9,color:"#666"},children:Et.week?`Week: ${Et.week}`:"Week: -"})]}),T.jsx("div",{style:{fontSize:10,color:"#333",marginTop:3},children:Et.topic||"No topic provided"}),T.jsx("div",{style:{fontSize:9,color:"#666",marginTop:3},children:Et.method?`Method: ${Et.method}`:Et.aids?`Aids: ${Et.aids}`:Et.assessment?`Assessment: ${Et.assessment}`:"Quick note: -"})]}),T.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:8},children:T.jsx("div",{style:{background:Ee,color:"#fff",padding:"3px 6px",borderRadius:999,fontSize:9,fontWeight:700},children:Ae==="submitted"?"Submitted":Ae==="missed"?"Missed":"Pending"})})]},(Et==null?void 0:Et.key)||Qe)})}):T.jsx("div",{style:{textAlign:"center",color:"#666",fontSize:9},children:"No plans for today."})]})}if(k==="weekly"){const _t=Array.isArray(ir)?ir:[];return _t.length?T.jsxs("div",{className:"sidebar-week-list",style:{display:"flex",flexDirection:"column",gap:6},children:[T.jsx("h3",{className:"font-semibold",style:{fontSize:11},children:"Week Plan"}),_t.map((Et,Qe)=>{const Ae=(Et==null?void 0:Et.weekDays)||[];return Ae.length?T.jsxs("div",{style:{background:"#fff",padding:6,borderRadius:8,boxShadow:"0 4px 10px rgba(11,20,30,0.04)"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:5},children:[T.jsx("div",{style:{fontWeight:800},children:Et.courseId||"Course"}),T.jsx("div",{style:{fontSize:9,color:"#666"},children:Et.week?`Week ${Et.week}`:""})]}),T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:5},children:Ae.map((Ee,gt)=>{const dt=sr(Et.courseId,Et.week,Ee).status,Tt=dt==="submitted"?"#2f855a":dt==="missed"?"#c53030":"#4a5568",er=dt==="submitted"?"#d9f8d5":dt==="missed"?"#ffe4e4":"#ffffff";return T.jsxs("div",{className:`sidebar-week-card ${dt}`,style:{display:"flex",gap:10,color:"#333",padding:6,borderRadius:8,background:er,alignItems:"center",boxShadow:"0 6px 14px rgba(11,20,30,0.04)"},children:[T.jsx("div",{style:{width:6,height:30,borderRadius:6,background:dt==="submitted"?"linear-gradient(180deg,#9ae6b4,#2f855a)":dt==="missed"?"linear-gradient(180deg,#feb2b2,#c53030)":"linear-gradient(180deg,#e2e8f0,#4a5568)"}}),T.jsxs("div",{style:{flex:1},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("div",{style:{fontWeight:700,fontSize:10},children:Ee.dayName||`Day ${gt+1}`}),T.jsx("div",{style:{fontSize:9,color:"#666"},children:Et.week?`Week ${Et.week}`:""})]}),T.jsx("div",{style:{fontSize:10,color:"#333",marginTop:3},children:Ee.topic||Et.topic||"No topic set"}),Ee!=null&&Ee.date?T.jsxs("div",{style:{fontSize:9,color:"#666",marginTop:3},children:["Date: ",Ee.date]}):null]}),T.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:8},children:T.jsx("div",{style:{background:Tt,color:"#fff",padding:"3px 6px",borderRadius:999,fontSize:9,fontWeight:700},children:dt==="submitted"?"Submitted":dt==="missed"?"Missed":"Pending"})})]},gt)})})]},Qe):null})]}):T.jsx("div",{style:{textAlign:"center",color:"#666"},children:"No weekly plan found."})}return T.jsxs("div",{className:"space-y-2",children:[T.jsx("h3",{className:"font-semibold",style:{fontSize:11},children:"This Month"}),!ur.length&&T.jsx("div",{className:"text-xs text-gray-500",style:{color:"#666",fontSize:9},children:"No plans for this month."}),!!ur.length&&T.jsxs("div",{style:{padding:6,borderRadius:8,background:"#fff",boxShadow:"0 6px 14px rgba(12,20,30,0.04)",marginBottom:6},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsxs("div",{children:[T.jsx("div",{style:{fontWeight:800,fontSize:10},children:Ge}),T.jsxs("div",{style:{fontSize:9,color:"#666"},children:[ur.length," week(s)  ",Mr.total," day(s)"]})]}),T.jsxs("div",{style:{textAlign:"right"},children:[T.jsx("div",{style:{fontSize:9,color:"#666"},children:"Completed"}),T.jsxs("div",{style:{fontWeight:700},children:[Yr,"%"]})]})]}),T.jsx("div",{style:{height:5,background:"#edf2f7",borderRadius:999,marginTop:6,overflow:"hidden"},children:T.jsx("div",{style:{width:`${Yr}%`,height:"100%",background:"linear-gradient(90deg,#67e8f9,#4b6cb7)"}})}),T.jsx("div",{style:{display:"flex",gap:6,marginTop:6,alignItems:"center"},children:T.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[T.jsxs("div",{style:{fontSize:9,color:"#2f855a"},children:["Submitted: ",T.jsx("strong",{children:Mr.submitted})]}),T.jsxs("div",{style:{fontSize:9,color:"#c53030"},children:["Missed: ",T.jsx("strong",{children:Mr.missed})]}),T.jsxs("div",{style:{fontSize:9,color:"#4a5568"},children:["Pending: ",T.jsx("strong",{children:Mr.pending})]})]})}),Mr.topics&&Mr.topics.length>0&&T.jsxs("div",{style:{marginTop:6},children:[T.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:3},children:"Topics this month"}),T.jsx("ul",{style:{margin:0,paddingLeft:16},children:Mr.topics.slice(0,3).map((_t,Et)=>T.jsx("li",{style:{fontSize:10,color:"#333"},children:_t},Et))})]})]})]})};return T.jsxs(T.Fragment,{children:[re&&T.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,zIndex:5e3,background:"rgba(15, 23, 42, 0.55)",padding:16},onClick:()=>be(!1),children:T.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",background:"#f7fafc",borderRadius:16,overflow:"hidden",boxShadow:"0 18px 60px rgba(0,0,0,0.35)",display:"flex",flexDirection:"column"},onClick:_t=>_t.stopPropagation(),children:[T.jsxs("div",{style:{position:"sticky",top:0,zIndex:1,background:"#ffffff",borderBottom:"1px solid #e5e7eb",padding:8,display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},children:[T.jsxs("div",{children:[T.jsx("div",{style:{fontWeight:900,fontSize:12,color:"#0f172a"},children:"Annual Lesson Plan"}),T.jsxs("div",{style:{fontSize:9,color:"#64748b"},children:["Showing: ",T.jsx("strong",{style:{color:"#111827"},children:It})]})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flex:1,justifyContent:"center"},children:[T.jsx("div",{style:{fontSize:9,color:"#64748b",fontWeight:800,whiteSpace:"nowrap"},children:"Subject"}),T.jsx("select",{value:Z,onChange:_t=>ue(_t.target.value),style:{width:"min(520px, 100%)",padding:"5px 6px",borderRadius:10,border:"1px solid #e5e7eb",background:"#f8fafc",outline:"none",fontSize:10,color:"#111827"},children:vt.map(_t=>T.jsx("option",{value:_t.value,children:_t.label},_t.value))})]}),T.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[T.jsx("button",{className:"btn btn-ghost",onClick:qr,disabled:!Zr.length,style:{borderRadius:12,background:Zr.length?"linear-gradient(135deg,#16a34a,#22c55e)":"#e5e7eb",color:Zr.length?"#fff":"#94a3b8",padding:"6px 8px",fontSize:10,fontWeight:900,cursor:Zr.length?"pointer":"not-allowed"},children:"Download Excel"}),T.jsx("button",{className:"btn btn-ghost",onClick:()=>be(!1),style:{borderRadius:12,background:"#0f172a",color:"#fff",padding:"6px 8px",fontSize:10},children:"Close"})]})]}),T.jsxs("div",{style:{padding:10,overflowY:"auto",flex:1},children:[!Zr.length&&T.jsx("div",{style:{padding:8,borderRadius:8,background:"#fff",border:"1px solid #e5e7eb",color:"#64748b",fontSize:10},children:"No annual lesson plan found for this selection."}),!!Zr.length&&T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:14},children:Ln.map(_t=>{const Et=(an[_t]||[]).slice().sort((Ee,gt)=>Wr(Ee)-Wr(gt)),Qe=Ee=>Ee==null?"":Array.isArray(Ee)?Ee.map(gt=>String(gt??"").trim()).filter(Boolean).join("; "):String(Ee).trim(),Ae=Ee=>Array.from(new Set((Ee||[]).map($t=>Qe($t)).filter(Boolean))).join("; ");return T.jsxs("div",{style:{background:"#fff",borderRadius:12,border:"1px solid #e5e7eb",boxShadow:"0 10px 28px rgba(14,30,37,0.06)"},children:[T.jsxs("div",{style:{padding:8,borderBottom:"1px solid #eef2f7",display:"flex",alignItems:"baseline",justifyContent:"space-between",gap:10},children:[T.jsx("div",{style:{fontWeight:900,fontSize:12,color:"#0f172a"},children:_t}),T.jsxs("div",{style:{fontSize:9,color:"#64748b"},children:[Et.length," week(s)"]})]}),T.jsx("div",{style:{padding:8},children:T.jsx("div",{style:{width:"100%",overflowX:"auto",borderRadius:10,border:"1px solid #e5e7eb"},children:T.jsxs("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:0,minWidth:700,background:"#fff"},children:[T.jsx("thead",{children:T.jsx("tr",{style:{background:"#f8fafc"},children:["Week","Topic","Objective","Method","Material","Assessment"].map(Ee=>T.jsx("th",{style:{textAlign:"left",padding:"6px 8px",fontSize:9,color:"#475569",fontWeight:900,borderBottom:"1px solid #e5e7eb",position:"sticky",top:0,background:"#f8fafc",zIndex:1},children:Ee},Ee))})}),T.jsx("tbody",{children:Et.map((Ee,gt)=>{const $t=Ee!=null&&Ee.week?`Week ${Ee.week}`:"-",dt=Array.isArray(Ee==null?void 0:Ee.weekDays)?Ee.weekDays:[],Tt=Qe(Ee==null?void 0:Ee.topic)||Ae(dt.map(or=>or==null?void 0:or.topic)),er=Qe(Ee==null?void 0:Ee.objective)||Qe(Ee==null?void 0:Ee.objectives)||Ae(dt.map(or=>(or==null?void 0:or.objective)??(or==null?void 0:or.objectives))),Ur=Qe(Ee==null?void 0:Ee.method)||Ae(dt.map(or=>or==null?void 0:or.method)),pn=Qe(Ee==null?void 0:Ee.material)||Qe(Ee==null?void 0:Ee.materials)||Qe(Ee==null?void 0:Ee.aids)||Ae(dt.map(or=>(or==null?void 0:or.material)??(or==null?void 0:or.materials)??(or==null?void 0:or.aids))),Dt=Qe(Ee==null?void 0:Ee.assessment)||Ae(dt.map(or=>or==null?void 0:or.assessment)),kr=(()=>{const or={submitted:0,missed:0,pending:0,total:0};return(dt||[]).forEach(Xr=>{const _r=sr(Ee==null?void 0:Ee.courseId,Ee==null?void 0:Ee.week,Xr);or[_r.status]=(or[_r.status]||0)+1,or.total+=1}),or})(),fr=kr.missed>0,tr=!fr&&kr.submitted>0,Vr=fr?"#fff1f2":tr?"#ecfdf5":gt%2===0?"#ffffff":"#fcfcfd",Cr=fr?"#dc2626":tr?"#16a34a":"#e2e8f0";return T.jsxs("tr",{style:{background:Vr},children:[T.jsx("td",{style:{padding:"6px 8px",fontSize:10,color:"#0f172a",borderBottom:"1px solid #eef2f7",fontWeight:900,whiteSpace:"nowrap",borderLeft:`6px solid ${Cr}`},children:$t}),T.jsx("td",{style:{padding:"6px 8px",fontSize:10,color:"#334155",borderBottom:"1px solid #eef2f7"},children:Tt||"-"}),T.jsx("td",{style:{padding:"6px 8px",fontSize:10,color:"#334155",borderBottom:"1px solid #eef2f7"},children:er||"-"}),T.jsx("td",{style:{padding:"6px 8px",fontSize:10,color:"#334155",borderBottom:"1px solid #eef2f7"},children:Ur||"-"}),T.jsx("td",{style:{padding:"6px 8px",fontSize:10,color:"#334155",borderBottom:"1px solid #eef2f7"},children:pn||"-"}),T.jsx("td",{style:{padding:"6px 8px",fontSize:10,color:"#334155",borderBottom:"1px solid #eef2f7"},children:Dt||"-"})]},`${(Ee==null?void 0:Ee.courseId)||"c"}-${(Ee==null?void 0:Ee.week)||"w"}-${gt}`)})})]})})})]},_t)})})]})]})}),T.jsx("div",{className:"right-sidebar",style:{padding:X?12:6,background:"#ffffff",border:"1px solid #e5e7eb",boxShadow:"0 8px 20px rgba(15,23,42,0.06)",display:"flex",flexDirection:"column",gap:8,transition:"all 220ms ease",borderRadius:12,fontSize:12},children:X&&T.jsxs(T.Fragment,{children:[T.jsx("div",{style:{position:"sticky",top:8,zIndex:250,display:"flex",justifyContent:"flex-end",paddingBottom:6},children:T.jsx("button",{onClick:()=>be(!0),style:{borderRadius:10,padding:"8px 12px",background:"#4b6cb7",color:"#ffffff",border:"none",fontWeight:800,fontSize:12,cursor:"pointer"},children:"Annual Lesson Plan"})}),T.jsxs("div",{style:{background:"#ffffff",padding:12,borderRadius:12,border:"1px solid #eef2f7",boxShadow:"none"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[T.jsx("div",{style:{background:"#f1f5f9",padding:8,borderRadius:10,border:"1px solid #e2e8f0"},children:T.jsx(sl,{color:"#4b6cb7"})}),T.jsxs("div",{children:[T.jsx("div",{style:{fontWeight:800,color:"#0f172a"},children:"Lesson Overview"}),T.jsx("div",{style:{fontSize:11,color:"#64748b"},children:Ve.toLocaleDateString()})]})]}),T.jsx("div",{style:{display:"flex",gap:8,alignItems:"center"},children:T.jsxs("div",{style:{textAlign:"right"},children:[T.jsx("div",{style:{fontSize:11,color:"#64748b"},children:"This Week"}),T.jsx("div",{style:{fontWeight:800,color:"#0f172a"},children:rr.total})]})})]}),T.jsxs("div",{style:{marginTop:10,display:"flex",gap:10,alignItems:"center"},children:[T.jsx("div",{style:{fontSize:11,color:"#64748b",fontWeight:800,whiteSpace:"nowrap"},children:"Subject"}),T.jsx("select",{value:Z,onChange:_t=>ue(_t.target.value),style:{flex:1,padding:"8px 10px",borderRadius:10,border:"1px solid #e5e7eb",background:"#f8fafc",outline:"none",fontSize:12,color:"#111827"},children:vt.map(_t=>T.jsx("option",{value:_t.value,children:_t.label},_t.value))})]}),T.jsxs("div",{style:{marginTop:8,fontSize:11,color:"#64748b"},children:["Showing: ",T.jsx("strong",{style:{color:"#111827"},children:It})]}),T.jsxs("div",{style:{display:"flex",gap:8,marginTop:10},children:[T.jsxs("div",{style:{flex:1,background:"#ffffff",padding:8,borderRadius:10,textAlign:"center",border:"1px solid #eef2f7"},children:[T.jsx("div",{style:{fontSize:12,color:"#16a34a"},children:T.jsx(ER,{})}),T.jsx("div",{style:{fontWeight:800,color:"#0f172a"},children:rr.submitted}),T.jsx("div",{style:{fontSize:10,color:"#64748b"},children:"Submitted"})]}),T.jsxs("div",{style:{flex:1,background:"#ffffff",padding:8,borderRadius:10,textAlign:"center",border:"1px solid #eef2f7"},children:[T.jsx("div",{style:{fontSize:12,color:"#dc2626"},children:T.jsx(CR,{})}),T.jsx("div",{style:{fontWeight:800,color:"#0f172a"},children:rr.missed}),T.jsx("div",{style:{fontSize:10,color:"#64748b"},children:"Missed"})]}),T.jsxs("div",{style:{flex:1,background:"#ffffff",padding:8,borderRadius:10,textAlign:"center",border:"1px solid #eef2f7"},children:[T.jsx("div",{style:{fontSize:12,color:"#64748b"},children:""}),T.jsx("div",{style:{fontWeight:800,color:"#0f172a"},children:rr.pending}),T.jsx("div",{style:{fontSize:10,color:"#64748b"},children:"Pending"})]})]}),H&&T.jsx("div",{style:{marginTop:10,padding:10,borderRadius:10,background:"#fff7f7",color:"#991b1b",fontSize:13},children:H}),z&&T.jsx("div",{style:{marginTop:10,padding:10,borderRadius:10,background:"#f3f4f6",color:"#6b7280",fontSize:13},children:"Loading lesson plans..."})]}),T.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[T.jsx("button",{onClick:()=>R("daily"),className:"btn "+(k==="daily"?"btn-primary":"btn-ghost"),style:{flex:1,borderRadius:10,padding:"8px 10px",fontSize:11,fontWeight:800,background:k==="daily"?"#4b6cb7":"#ffffff",color:k==="daily"?"#ffffff":"#0f172a",border:"1px solid "+(k==="daily"?"#4b6cb7":"#e5e7eb")},children:"Daily"}),T.jsx("button",{onClick:()=>R("weekly"),className:"btn "+(k==="weekly"?"btn-primary":"btn-ghost"),style:{flex:1,borderRadius:10,padding:"8px 10px",fontSize:11,fontWeight:800,background:k==="weekly"?"#4b6cb7":"#ffffff",color:k==="weekly"?"#ffffff":"#0f172a",border:"1px solid "+(k==="weekly"?"#4b6cb7":"#e5e7eb")},children:"Weekly"}),T.jsx("button",{onClick:()=>R("monthly"),className:"btn "+(k==="monthly"?"btn-primary":"btn-ghost"),style:{flex:1,borderRadius:10,padding:"8px 10px",fontSize:11,fontWeight:800,background:k==="monthly"?"#4b6cb7":"#ffffff",color:k==="monthly"?"#ffffff":"#0f172a",border:"1px solid "+(k==="monthly"?"#4b6cb7":"#e5e7eb")},children:"Monthly"})]}),T.jsx("div",{style:{background:"#ffffff",padding:12,borderRadius:12,border:"1px solid #eef2f7",boxShadow:"none",overflowY:"auto",maxHeight:"56vh"},children:ki()}),T.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"space-between",alignItems:"center"},children:[T.jsxs("div",{style:{fontSize:11,color:"#64748b"},children:["Monthly entries: ",T.jsx("strong",{style:{color:"#0f172a"},children:hr})]}),T.jsx("div",{children:T.jsx("button",{className:"btn btn-ghost",onClick:()=>G(_t=>_t+1),children:"Refresh"})})]})]})})]})})(),T.jsx("div",{onClick:()=>u(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #833ab4, #0259fa, #459afc)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)",transition:"transform 0.2s ease"},onMouseEnter:he=>he.currentTarget.style.transform="scale(1.05)",onMouseLeave:he=>he.currentTarget.style.transform="scale(1) ",children:T.jsx(Nv,{size:30})})]})]})]}),a&&l&&T.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[T.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[T.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[T.jsx("strong",{children:l.name}),M&&String(M)!==String(nt)&&T.jsx("span",{style:{fontSize:12,color:"#666"},children:"Typing"})]}),T.jsxs("div",{style:{display:"flex",gap:"10px"},children:[T.jsx("button",{onClick:()=>{l!=null&&l.userId&&nt&&Ye(Rr(l.userId,nt)),u(!1),wt("/all-chat",{state:{user:l,tab:"teacher"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),T.jsx("button",{onClick:()=>{l!=null&&l.userId&&nt&&Ye(Rr(l.userId,nt)),u(!1)},style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),T.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[g.length===0?T.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",l.name]}):g.map(he=>{const Ce=String(he.senderId)===String(nt)||he.sender==="admin";return T.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:Ce?"flex-end":"flex-start",marginBottom:10},children:T.jsxs("div",{style:{maxWidth:"70%",background:Ce?"#4facfe":"#fff",color:Ce?"#fff":"#000",padding:"10px 14px",borderRadius:18,borderTopRightRadius:Ce?0:18,borderTopLeftRadius:Ce?18:0,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",wordBreak:"break-word",cursor:"default",position:"relative"},children:[he.text," ",he.edited&&T.jsx("small",{style:{fontSize:10},children:" (edited)"}),T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:6,marginTop:6,fontSize:11,color:Ce?"#fff":"#888"},children:[T.jsx("span",{style:{marginRight:6,fontSize:11,opacity:.9},children:$(he.timeStamp)}),T.jsx("span",{children:N(he.timeStamp)}),Ce&&!he.deleted&&T.jsxs("span",{style:{display:"flex",gap:0,alignItems:"center"},children:[T.jsx(vh,{size:10,color:Ce?"#fff":"#888",style:{opacity:.85,marginLeft:4}}),he.seen&&T.jsx(vh,{size:10,color:Ce?"#f3f7f8":"#ccc",style:{marginLeft:2,opacity:.95}})]})]})]})},he.messageId||he.id)}),T.jsx("div",{ref:v})]}),T.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[T.jsx("input",{value:y,onChange:he=>{const Ce=he.target.value;b(Ce),Xe(Ce)},placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"25px",border:"1px solid #ccc",outline:"none"},onKeyDown:he=>{he.key==="Enter"&&Le()}}),T.jsx("button",{onClick:()=>Le(),style:{width:45,height:45,borderRadius:"50%",background:"#4facfe",border:"none",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:T.jsx(gg,{})})]})]})]})}function DW(){const r=`${Io}/api`,[e,t]=me.useState([]),[n,i]=me.useState("All"),[s,o]=me.useState("All"),[l,c]=me.useState(""),[a,u]=me.useState([]),[d,f]=me.useState(null),[h,m]=me.useState(!1),[g,p]=me.useState([]),y=me.useRef(null),[b,v]=me.useState(""),[E,M]=me.useState(null),[W,$]=me.useState([]),[N,j]=me.useState("details"),[F,P]=me.useState([]),[L,k]=me.useState({}),[R,C]=me.useState(!0),[_,x]=me.useState({}),w=Bs(),S=JSON.parse(localStorage.getItem("admin"))||{},[I,z]=me.useState({}),A=me.useMemo(()=>I||{},[I]),[H,K]=me.useState("daily"),[J,V]=me.useState("All"),[X,D]=me.useState({}),[O,G]=me.useState(!1),[Z,ue]=me.useState([]),[te,oe]=me.useState({}),[re,be]=me.useState({}),[ie,le]=me.useState(!1),[ae,Se]=me.useState(null),[ve,ke]=me.useState(!1),[Ne,ze]=me.useState([]),[we,De]=me.useState(!1),[He,We]=me.useState(""),[et,St]=me.useState({}),[lt,At]=me.useState([]),[ct,at]=me.useState("semester2"),wt=S.userId,ot=S.userId,[nt,zt]=me.useState(typeof window<"u"?window.innerWidth<window.innerHeight:!1),[Lt,Ct]=me.useState(typeof window<"u"?window.innerWidth<900:!1),Ht=Ih(cp),jt=(pe,Te)=>[pe,Te].sort().join("_"),Mt=pe=>{if(!pe)return"";try{return new Date(pe).toLocaleDateString()}catch{return""}},Qt=pe=>{if(!pe)return"";try{return new Date(pe).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}},Sr=async()=>{if(wt)try{const pe=await qe.get(`${r}/get_post_notifications/${wt}`);let Te=Array.isArray(pe.data)?pe.data:Object.values(pe.data||{});if(Te.length===0){ze([]);return}const[Ze,ut]=await Promise.all([qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json"),qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/School_Admins.json")]),he=Ze.data||{},Ce=ut.data||{},Ve=st=>{const Ge=Ce[st];return Ge?Object.values(he).find(pt=>pt.userId===Ge.userId):null},Be=Te.map(st=>{const Ge=Ve(st.adminId);return{...st,notificationId:st.notificationId||st.id||`${st.postId}_${st.adminId}`,adminName:(Ge==null?void 0:Ge.name)||"Unknown Admin",adminProfile:(Ge==null?void 0:Ge.profileImage)||"/default-profile.png"}});ze(Be)}catch(pe){console.error("Post notification fetch failed",pe),ze([])}};me.useEffect(()=>{if(!wt)return;Sr();const pe=setInterval(Sr,5e3);return()=>clearInterval(pe)},[wt]);const lr=async pe=>{try{await qe.post(`${r}/mark_post_notification_read`,{notificationId:pe.notificationId,adminId:S.userId})}catch(Te){console.warn("Failed to delete notification:",Te)}ze(Te=>Te.filter(Ze=>Ze.notificationId!==pe.notificationId)),De(!1),w("/dashboard",{state:{postId:pe.postId}})};me.useEffect(()=>{var pe;(pe=location.state)!=null&&pe.postId&&ze([])},[]),me.useEffect(()=>{const pe=Te=>{!Te.target.closest(".icon-circle")&&!Te.target.closest(".notification-dropdown")&&De(!1)};return document.addEventListener("click",pe),()=>document.removeEventListener("click",pe)},[]),me.useEffect(()=>{(async()=>{const Ze=(await Nz(vz(Mn,"students"))).docs.map(ut=>({id:ut.id,...ut.data()}));t(Ze)})()},[]),me.useEffect(()=>{(async()=>{const Ze=await(await fetch("/api/unreadSenders")).json();be(Ze)})()},[]);const pr=async pe=>{C(!0);try{const Ze=(await qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users/${pe.userId}.json`)).data||{},he=(await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/ClassMarks.json")).data||{},Ce={},Ve={};Object.entries(he).forEach(([kt,ir])=>{const Zt=(ir==null?void 0:ir[pe.studentId])||Object.values(ir||{}).find(qt=>qt&&(qt.userId===pe.userId||qt.studentId===pe.studentId));Zt&&(Ce[kt]=Zt,Ve[kt]=Zt.teacherName||"Teacher")});const st=(await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Attendance.json")).data||{},Ge=[];Object.entries(st).forEach(([kt,ir])=>{Object.entries(ir||{}).forEach(([Zt,qt])=>{const Ut=qt==null?void 0:qt[pe.studentId];Ut&&Ge.push({courseId:kt,date:Zt,status:Ut,teacherName:Ve[kt]||"Teacher"})})});let pt={};try{pe.studentId&&(pt=(await qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Students/${pe.studentId}.json`)).data||{})}catch{pt={}}const de=(Ze==null?void 0:Ze.dob)||(pt==null?void 0:pt.dob)||(pe==null?void 0:pe.dob),Oe=(kt=>{if(!kt)return null;try{const ir=new Date(kt),Zt=new Date;let qt=Zt.getFullYear()-ir.getFullYear();const Ut=Zt.getMonth()-ir.getMonth();return(Ut<0||Ut===0&&Zt.getDate()<ir.getDate())&&qt--,qt}catch{return null}})(de),it=[];let vt=null,It=null;try{const kt=pt!=null&&pt.parents?Object.keys(pt.parents):pe.parents?Object.keys(pe.parents):[];for(const ir of kt)try{const qt=(await qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Parents/${ir}.json`)).data||{},Ut=qt.userId;if(Ut){const rr=(await qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users/${Ut}.json`)).data||{},ur={parentId:ir,name:rr.name||qt.name||"Parent",phone:rr.phone||rr.phoneNumber||qt.phone||null};it.push(ur),vt||(vt=ur.name),It||(It=ur.phone)}}catch{}}catch{}f({...pe,...Ze,marks:Ce,attendance:Ge,age:Oe,parents:it,parentName:vt,parentPhone:It}),G(!0)}catch(Te){console.error("Error fetching student data:",Te)}finally{C(!1)}};me.useEffect(()=>{const pe=Te=>{!Te.target.closest(".icon-circle")&&!Te.target.closest(".messenger-dropdown")&&le(!1),!Te.target.closest(".icon-circle")&&!Te.target.closest(".notification-dropdown")&&De(!1)};return document.addEventListener("click",pe),()=>document.removeEventListener("click",pe)},[]),me.useEffect(()=>{(async()=>{try{const[Te,Ze]=await Promise.all([qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json"),qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json")]),ut=Te.data||{},he=Ze.data||{},Ce=Object.keys(ut).map(st=>{const Ge=ut[st],pt=he[Ge.userId]||{};return{teacherId:st,userId:Ge.userId,name:pt.name||"No Name",profileImage:pt.profileImage||"/default-profile.png"}});ue(Ce);const Ve={},Be=[];for(const st of Ce){const Ge=`${st.userId}_${ot}`,pt=await qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ge}/messages.json`),de=Object.values(pt.data||{}).map(Oe=>({...Oe,sender:Oe.senderId===ot?"admin":"teacher"}));Be.push(...de);const Me=de.filter(Oe=>Oe.receiverId===ot&&!Oe.seen).length;Me>0&&(Ve[st.userId]=Me)}p(Be),oe(Ve)}catch(Te){console.error(Te)}})()},[ot]),me.useEffect(()=>{(async()=>{try{C(!0);const Te=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Students.json"),Ze=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json"),ut=Te.data||{},he=Ze.data||{},Ce=Object.keys(ut).map(Ve=>{const Be=ut[Ve],st=he[Be.userId]||{};return{studentId:Ve,userId:Be.userId,name:st.name||st.username||"No Name",profileImage:st.profileImage||"/default-profile.png",grade:Be.grade,section:Be.section,email:st.email||""}});t(Ce)}catch(Te){console.error("Error fetching students:",Te)}finally{C(!1)}})()},[]),me.useEffect(()=>{if(n==="All")u([]);else{const pe=[...new Set(e.filter(Te=>Te.grade===n).map(Te=>Te.section))];u(pe),o("All")}},[n,e]);const jr=l.trim().toLowerCase(),Ft=e.filter(pe=>n!=="All"&&pe.grade!==n||s!=="All"&&pe.section!==s?!1:jr?[pe.name,pe.studentId,pe.userId,pe.email,pe.grade,pe.section].filter(Boolean).join(" ").toLowerCase().includes(jr):!0);me.useEffect(()=>{if(!(d!=null&&d.studentId)){z({});return}let pe=!1;async function Te(){C(!0);try{const Ze=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/ClassMarks.json"),ut={};Object.entries(Ze.data||{}).forEach(([he,Ce])=>{if(Ce!=null&&Ce[d.studentId]){ut[he]=Ce[d.studentId];return}const Ve=Object.values(Ce||{}).find(Be=>Be&&(Be.userId===d.userId||Be.studentId===d.studentId));Ve&&(ut[he]=Ve)}),pe||z(ut)}catch(Ze){console.error("Marks fetch error:",Ze),pe||z({})}finally{pe||C(!1)}}return Te(),()=>{pe=!0}},[d]),me.useEffect(()=>{const pe=async()=>{const Te={};for(const Ze of e){const ut=`${Ze.studentId}_${S.userId}`,Ce=(await qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${ut}/messages.json`)).data||{};Te[Ze.studentId]=Object.values(Ce).some(Ve=>Ve.senderId===Ze.studentId&&Ve.seenByAdmin===!1)}x(Te)};e.length>0&&pe()},[e]),me.useEffect(()=>{if(!h||!d)return;const pe=jt(d.userId,ot);(async()=>{try{const Ze=await qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${pe}/messages.json`),ut=Object.values(Ze.data||{}).map(he=>({...he,sender:he.senderId===ot?"admin":"student"})).sort((he,Ce)=>he.timeStamp-Ce.timeStamp);p(ut)}catch(Ze){console.error(Ze)}})()},[h,d,ot]);const zr=async()=>{if(!He.trim()||!d)return;const pe={senderId:ot,receiverId:d.userId,text:He,timeStamp:Date.now(),seen:!1};try{const Te=jt(d.userId,ot);try{const Ze=await qe.post(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Te}/messages.json`,{senderId:pe.senderId,receiverId:pe.receiverId,type:pe.type||"text",text:pe.text||"",imageUrl:null,replyTo:null,seen:!1,edited:!1,deleted:!1,timeStamp:pe.timeStamp}),ut=Ze.data&&Ze.data.name,he={text:pe.text,senderId:pe.senderId,seen:!1,timeStamp:pe.timeStamp};await qe.patch(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Te}.json`,{participants:{[ot]:!0,[d.userId]:!0},lastMessage:he});try{const Ve=(await qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Te}/unread.json`)).data||{},Be=Number(Ve[d.userId]||0),st={...Ve||{},[d.userId]:Be+1,[ot]:Number(Ve[ot]||0)};await qe.put(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Te}/unread.json`,st)}catch{await qe.put(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Te}/unread.json`,{[d.userId]:1,[ot]:0})}p(Ce=>[...Ce,{messageId:ut||`${Date.now()}`,...pe,sender:"admin"}]),We("")}catch(Ze){console.error("Failed to send message:",Ze)}}catch(Te){console.error("Failed to send message:",Te)}},Rr=async()=>{if(!S.userId)return;const pe={};try{const Ze=(await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json")).data||{},ut=st=>Object.values(Ze).find(Ge=>Ge.userId===st),he=async st=>{const Ge=`${S.userId}_${st}`,pt=`${st}_${S.userId}`,[de,Me]=await Promise.all([qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ge}/messages.json`),qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${pt}/messages.json`)]);return[...Object.values(de.data||{}),...Object.values(Me.data||{})].filter(it=>it.receiverId===S.userId&&!it.seen).length},Ce=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json");for(const st in Ce.data||{}){const Ge=Ce.data[st],pt=await he(Ge.userId);if(pt>0){const de=ut(Ge.userId);pe[Ge.userId]={type:"teacher",name:(de==null?void 0:de.name)||"Teacher",profileImage:(de==null?void 0:de.profileImage)||"/default-profile.png",count:pt}}}const Ve=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Students.json");for(const st in Ve.data||{}){const Ge=Ve.data[st],pt=await he(Ge.userId);if(pt>0){const de=ut(Ge.userId);pe[Ge.userId]={type:"student",name:(de==null?void 0:de.name)||Ge.name||"Student",profileImage:(de==null?void 0:de.profileImage)||Ge.profileImage||"/default-profile.png",count:pt}}}const Be=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Parents.json");for(const st in Be.data||{}){const Ge=Be.data[st],pt=await he(Ge.userId);if(pt>0){const de=ut(Ge.userId);pe[Ge.userId]={type:"parent",name:(de==null?void 0:de.name)||Ge.name||"Parent",profileImage:(de==null?void 0:de.profileImage)||Ge.profileImage||"/default-profile.png",count:pt}}}be(pe)}catch(Te){console.error("Unread fetch failed:",Te)}};me.useEffect(()=>{const pe=Te=>{!Te.target.closest(".icon-circle")&&!Te.target.closest(".messenger-dropdown")&&le(!1)};return document.addEventListener("click",pe),()=>document.removeEventListener("click",pe)},[]),me.useEffect(()=>{if(!S.userId)return;Rr();const pe=setInterval(Rr,5e3);return()=>clearInterval(pe)},[S.userId]),me.useEffect(()=>{const pe=()=>{zt(window.innerWidth<window.innerHeight),Ct(window.innerWidth<900)};return window.addEventListener("resize",pe),()=>window.removeEventListener("resize",pe)},[]),me.useEffect(()=>{if(!h||!d)return;const pe=jt(d.userId,ot),Te=dn(Ht,`Chats/${pe}/messages`),ut=el(Te,async he=>{const Ce=he.val()||{},Ve=Object.entries(Ce).map(([st,Ge])=>({messageId:st,...Ge})).sort((st,Ge)=>st.timeStamp-Ge.timeStamp);p(Ve);const Be={};if(Object.entries(Ce).forEach(([st,Ge])=>{Ge&&Ge.receiverId===ot&&!Ge.seen&&(Be[`Chats/${pe}/messages/${st}/seen`]=!0)}),Object.keys(Be).length>0)try{await qe.patch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/.json",Be),qe.patch(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${pe}.json`,{unread:{[ot]:0},lastMessage:{seen:!0}}).catch(()=>{})}catch(st){console.error("Failed to patch seen updates:",st)}});return()=>ut()},[h,d,ot]),me.useMemo(()=>{if(!(d!=null&&d.attendance))return null;const pe=d.attendance.length,Te=d.attendance.filter(Ce=>Ce.status==="present").length,Ze=pe-Te,ut=pe?Math.round(Te/pe*100):0;let he=0;return[...d.attendance].sort((Ce,Ve)=>Ve.date.localeCompare(Ce.date)).some(Ce=>Ce.status==="absent"?(he++,!1):!0),{total:pe,present:Te,absent:Ze,percent:ut,streak:he}},[d]);const mr=async pe=>{const Te=`${S.userId}_${pe}`,Ze=`${pe}_${S.userId}`,[ut,he]=await Promise.all([qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Te}/messages.json`),qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ze}/messages.json`)]),Ce={},Ve=(Be,st)=>{Object.entries(Be||{}).forEach(([Ge,pt])=>{pt.receiverId===S.userId&&!pt.seen&&(Ce[`${st}/${Ge}/seen`]=!0)})};Ve(ut.data,`Chats/${Te}/messages`),Ve(he.data,`Chats/${Ze}/messages`),Object.keys(Ce).length>0&&await qe.patch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/.json",Ce)},Ue=ea.useMemo(()=>d!=null&&d.attendance?d.attendance.map(pe=>({date:pe.date||pe.created_at,courseId:pe.courseId||pe.course||"Unknown Course",teacherName:pe.teacherName||pe.teacher||"Unknown Teacher",status:pe.status||pe.attendance_status||"absent"})):[],[d]);ea.useMemo(()=>Ue.length?Ue.reduce((pe,Te)=>{const Ze=new Date(Te.date).toLocaleDateString();return pe[Ze]||(pe[Ze]=[]),pe[Ze].push(Te),pe},{}):{},[Ue]);const Ye=pe=>{D(Te=>({...Te,[pe]:!Te[pe]}))},Xe=pe=>{if(!pe||!pe.length)return 0;const Te=pe.filter(Ze=>Ze.status==="present"||Ze.status==="late").length;return Math.round(Te/pe.length*100)},Le=Ue.reduce((pe,Te)=>(pe[Te.courseId]||(pe[Te.courseId]=[]),pe[Te.courseId].push(Te),pe),{}),Fe=(pe="")=>{const Te=pe.replace("course_","").replace(/_[0-9A-Za-z]+$/,"").replace(/_/g," ");return Te.charAt(0).toUpperCase()+Te.slice(1)},Ke=Lt?0:90;return T.jsxs("div",{className:"dashboard-page",children:[T.jsxs("nav",{className:"top-navbar",children:[T.jsx("h2",{children:"Gojo Dashboard"}),T.jsxs("div",{className:"nav-right",children:[T.jsxs("div",{className:"icon-circle",style:{position:"relative",cursor:"pointer"},onClick:pe=>{pe.stopPropagation(),De(Te=>!Te)},children:[T.jsx(wc,{}),(()=>{const pe=Object.values(re||{}).reduce((Ze,ut)=>Ze+(ut.count||0),0),Te=((Ne==null?void 0:Ne.length)||0)+pe;return Te>0?T.jsx("span",{style:{position:"absolute",top:"-5px",right:"-5px",background:"red",color:"#fff",borderRadius:"50%",padding:"2px 6px",fontSize:"10px",fontWeight:"bold"},children:Te}):null})(),we&&T.jsx("div",{className:"notification-dropdown",onClick:pe=>pe.stopPropagation(),style:{position:"absolute",top:40,right:0,width:360,maxHeight:420,overflowY:"auto",background:"#fff",borderRadius:10,boxShadow:"0 6px 20px rgba(0,0,0,0.12)",zIndex:1e3,padding:6},children:((Ne==null?void 0:Ne.length)||0)+Object.values(re||{}).reduce((pe,Te)=>pe+(Te.count||0),0)===0?T.jsx("p",{style:{padding:12,textAlign:"center",color:"#777"},children:"No new notifications"}):T.jsxs("div",{children:[Ne.length>0&&T.jsxs("div",{children:[T.jsx("div",{style:{padding:"8px 12px",borderBottom:"1px solid #eee",fontWeight:700},children:"Posts"}),Ne.map(pe=>T.jsxs("div",{style:{padding:10,display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:"1px solid #f0f0f0",transition:"background 120ms ease"},onMouseEnter:Te=>Te.currentTarget.style.background="#f6f8fa",onMouseLeave:Te=>Te.currentTarget.style.background="",onClick:()=>lr(pe),children:[T.jsx("img",{src:pe.adminProfile||"/default-profile.png",alt:pe.adminName,style:{width:46,height:46,borderRadius:8,objectFit:"cover"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("strong",{style:{display:"block",marginBottom:4},children:pe.adminName}),T.jsx("p",{style:{margin:0,fontSize:13,color:"#555",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:pe.message})]}),T.jsx("div",{style:{fontSize:12,color:"#888",marginLeft:8},children:new Date(pe.time||pe.createdAt||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},pe.notificationId))]}),Object.values(re||{}).reduce((pe,Te)=>pe+(Te.count||0),0)>0&&T.jsxs("div",{children:[T.jsx("div",{style:{padding:"8px 10px",color:"#333",fontWeight:700,background:"#fafafa",borderRadius:6,margin:"8px 6px"},children:"Messages"}),Object.entries(re||{}).map(([pe,Te])=>T.jsxs("div",{style:{padding:10,display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:"1px solid #f0f0f0",transition:"background 120ms ease"},onMouseEnter:Ze=>Ze.currentTarget.style.background="#f6f8fa",onMouseLeave:Ze=>Ze.currentTarget.style.background="",onClick:async()=>{await mr(pe),be(Ze=>{const ut={...Ze};return delete ut[pe],ut}),De(!1),w("/all-chat",{state:{user:{userId:pe,name:Te.name,profileImage:Te.profileImage,type:Te.type}}})},children:[T.jsx("img",{src:Te.profileImage||"/default-profile.png",alt:Te.name,style:{width:46,height:46,borderRadius:8,objectFit:"cover"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("strong",{style:{display:"block",marginBottom:4},children:Te.name}),T.jsxs("p",{style:{margin:0,fontSize:13,color:"#555",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:[Te.count," new message",Te.count>1&&"s"]})]})]},pe))]})]})})]}),T.jsxs("div",{className:"icon-circle",style:{position:"relative",cursor:"pointer"},onClick:()=>w("/all-chat"),children:[T.jsx(vc,{}),Object.values(re||{}).reduce((pe,Te)=>pe+(Te.count||0),0)>0&&T.jsx("span",{className:"badge",children:Object.values(re||{}).reduce((pe,Te)=>pe+(Te.count||0),0)})]}),T.jsx(gr,{className:"icon-circle",to:"/settings",children:T.jsx(_c,{})}),T.jsx("img",{src:S.profileImage||"/default-profile.png",alt:"admin",className:"profile-img"})]})]}),T.jsxs("div",{className:"google-dashboard",style:{display:"flex"},children:[T.jsxs("div",{className:"google-sidebar",style:{width:"220px",padding:"10px"},children:[T.jsxs("div",{className:"sidebar-profile",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6,paddingBottom:6},children:[T.jsx("div",{className:"sidebar-img-circle",style:{width:48,height:48,borderRadius:"50%",overflow:"hidden",border:"2px solid #e6eefc"},children:T.jsx("img",{src:S.profileImage||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover"}})}),T.jsx("h3",{style:{margin:0,fontSize:14,fontWeight:700},children:S.name}),T.jsx("p",{style:{margin:0,fontSize:12,color:"#6b7280"},children:(S==null?void 0:S.adminId)||"username"})]}),T.jsxs("div",{className:"sidebar-menu",style:{display:"flex",flexDirection:"column",gap:6,marginTop:8},children:[T.jsxs(gr,{className:"sidebar-btn",to:"/dashboard",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(xc,{style:{width:18,height:18}})," Home"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/my-posts",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Ca,{style:{width:18,height:18}})," My Posts"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/teachers",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Teachers"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/students",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13,backgroundColor:"#4b6cb7",color:"#fff",borderRadius:8},children:[T.jsx(Pn,{style:{width:18,height:18}})," Students"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/schedule",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(sl,{style:{width:18,height:18}})," Schedule"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/parents",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Parents"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/registration-form",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Registration Form"]}),T.jsxs("button",{className:"sidebar-btn logout-btn",onClick:()=>{localStorage.removeItem("admin"),window.location.href="/login"},style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Sc,{style:{width:18,height:18}})," Logout"]})]})]}),T.jsx("div",{className:`main-content ${O?"sidebar-open":""}`,style:{padding:"10px 20px 20px",flex:1,minWidth:0,boxSizing:"border-box"},children:T.jsxs("div",{className:"main-inner",style:{marginLeft:0,marginTop:0},children:[T.jsx("h2",{style:{marginBottom:"6px",textAlign:Lt?"center":"left",marginTop:"-8px",fontSize:"20px",marginLeft:Ke},children:"Students"}),T.jsx("div",{style:{display:"flex",justifyContent:Lt?"center":"flex-start",marginBottom:"10px",paddingLeft:Ke},children:T.jsxs("div",{style:{width:Lt?"92%":"400px",display:"flex",alignItems:"center",gap:"8px",background:"#fff",border:"1px solid #e5e7eb",borderRadius:"10px",padding:"6px 10px",boxShadow:"0 4px 10px rgba(0,0,0,0.06)"},children:[T.jsx(jv,{style:{color:"#6b7280",fontSize:14}}),T.jsx("input",{type:"text",value:l,onChange:pe=>c(pe.target.value),placeholder:"Search students...",style:{width:"100%",border:"none",outline:"none",fontSize:12,background:"transparent"}})]})}),T.jsx("div",{style:{display:"flex",justifyContent:Lt?"center":"flex-start",marginBottom:"10px",paddingLeft:Ke},children:T.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",justifyContent:"center",maxWidth:"100%",overflowX:"auto",paddingBottom:1},children:["All","7","8","9","10","11","12"].map(pe=>T.jsx("button",{onClick:()=>i(pe),style:{padding:"4px 10px",borderRadius:"8px",background:n===pe?"#4b6cb7":"#ddd",color:n===pe?"#fff":"#000",cursor:"pointer",border:"none",fontSize:"11px"},children:pe==="All"?"All Grades":`Grade ${pe}`},pe))})}),n!=="All"&&a.length>0&&T.jsx("div",{style:{display:"flex",justifyContent:Lt?"center":"flex-start",marginBottom:"10px",paddingLeft:Ke},children:T.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",justifyContent:"center",maxWidth:"100%",overflowX:"auto",paddingBottom:1},children:["All",...a].map(pe=>T.jsx("button",{onClick:()=>o(pe),style:{padding:"4px 10px",borderRadius:"8px",background:s===pe?"#4b6cb7":"#ddd",color:s===pe?"#fff":"#000",cursor:"pointer",border:"none",fontSize:"11px"},children:pe==="All"?"All Sections":`Section ${pe}`},pe))})}),R?T.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:Lt?"center":"flex-start",gap:"10px",paddingLeft:Ke},children:Array.from({length:6}).map((pe,Te)=>T.jsx("div",{style:{width:Lt?"92%":"400px",height:"72px",borderRadius:"12px",padding:"10px",background:"#fff",border:"1px solid #eee",boxShadow:"0 4px 10px rgba(0,0,0,0.04)"},children:T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[T.jsx("div",{style:{width:36,height:36,borderRadius:10,background:"#f1f5f9"}}),T.jsx("div",{style:{width:48,height:48,borderRadius:"50%",background:"#f1f5f9"}}),T.jsxs("div",{style:{flex:1},children:[T.jsx("div",{style:{width:"60%",height:12,background:"#f1f5f9",borderRadius:6,marginBottom:8}}),T.jsx("div",{style:{width:"40%",height:10,background:"#f1f5f9",borderRadius:6}})]})]})},Te))}):Ft.length===0?T.jsx("p",{style:{textAlign:"center",color:"#555"},children:"No students found for this selection."}):T.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:Lt?"center":"flex-start",gap:"10px",paddingLeft:Ke},children:Ft.map((pe,Te)=>T.jsxs("div",{onClick:()=>pr(pe),className:"student-card",style:{width:Lt?"92%":"400px",height:"72px",borderRadius:"12px",padding:"10px",background:(d==null?void 0:d.studentId)===pe.studentId?"#e0e7ff":"#fff",border:(d==null?void 0:d.studentId)===pe.studentId?"2px solid #4b6cb7":"1px solid #ddd",boxShadow:(d==null?void 0:d.studentId)===pe.studentId?"0 6px 15px rgba(75,108,183,0.3)":"0 4px 10px rgba(0,0,0,0.1)",cursor:"pointer",transition:"all 0.3s ease"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[T.jsx("div",{style:{width:36,height:36,borderRadius:10,background:"#eef2ff",color:"#2563eb",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:13,flex:"0 0 auto"},children:Te+1}),T.jsx("img",{src:pe.profileImage,alt:pe.name,style:{width:"48px",height:"48px",borderRadius:"50%",border:(d==null?void 0:d.studentId)===pe.studentId?"3px solid #4b6cb7":"3px solid red",objectFit:"cover",transition:"all 0.3s ease"}}),T.jsx("h3",{style:{marginTop:"-24px",fontSize:"14px"},children:pe.name})]}),T.jsxs("div",{style:{marginLeft:Lt?"78px":"104px",marginTop:"-16px",color:"#555",fontSize:"11px"},children:["Grade ",pe.grade," - Section ",pe.section]})]},pe.userId))})]})}),d&&T.jsxs("div",{style:{width:nt?"100%":"30%",height:nt?"100vh":"calc(100vh - 55px)",position:"fixed",right:0,top:nt?0:"55px",background:"#fff",zIndex:1e3,display:"flex",flexDirection:"column",overflowY:"auto",padding:"12px",boxShadow:"0 0 18px rgba(0,0,0,0.08)",borderLeft:nt?"none":"1px solid #e5e7eb",transition:"all 0.35s ease",fontSize:"10px"},children:[T.jsx("div",{style:{position:"absolute",top:0,left:22,zIndex:2e3},children:T.jsx("button",{onClick:()=>f(null),"aria-label":"Close sidebar",style:{background:"none",border:"none",fontSize:28,fontWeight:700,color:"#3647b7",cursor:"pointer",padding:2,lineHeight:1},children:""})}),T.jsxs("div",{style:{background:"#e0e7ff",margin:"-12px -12px 10px",padding:"14px 10px",textAlign:"center"},children:[T.jsx("div",{style:{width:"70px",height:"70px",margin:"0 auto 10px",borderRadius:"50%",overflow:"hidden",border:"3px solid #4b6cb7"},children:T.jsx("img",{src:d.profileImage,alt:d.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),T.jsx("h2",{style:{margin:0,color:"#111827",fontSize:14},children:d.name}),T.jsx("p",{style:{margin:"4px 0",color:"#6b7280",fontSize:"10px"},children:d.studentId}),T.jsxs("p",{style:{margin:0,color:"#6b7280",fontSize:"10px"},children:["Grade ",d.grade," - Section ",d.section]})]}),T.jsx("div",{style:{display:"flex",borderBottom:"1px solid #e5e7eb",marginBottom:"10px"},children:["details","attendance","performance"].map(pe=>T.jsx("button",{onClick:()=>j(pe),style:{flex:1,padding:"6px",background:"none",border:"none",cursor:"pointer",fontWeight:600,color:N===pe?"#4b6cb7":"#6b7280",fontSize:"10px",borderBottom:N===pe?"3px solid #4b6cb7":"3px solid transparent"},children:pe.toUpperCase()},pe))}),T.jsxs("div",{children:[N==="details"&&T.jsx("div",{style:{padding:"12px",background:"#ffffff",borderRadius:12,border:"1px solid #e5e7eb",boxShadow:"0 8px 20px rgba(15,23,42,0.06)",margin:"0 auto",maxWidth:380},children:T.jsxs("div",{children:[T.jsx("h3",{style:{margin:0,marginBottom:6,color:"#0f172a",fontWeight:800,letterSpacing:"0.1px",fontSize:12,textAlign:"left"},children:"Student Profile"}),T.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[["Phone",d==null?void 0:d.phone],["Gender",d==null?void 0:d.gender],["Email",d==null?void 0:d.email],["Grade",d==null?void 0:d.grade],["Section",d==null?void 0:d.section],["Age",d==null?void 0:d.age],["Birth Date",d==null?void 0:d.dob],["Parent Name",d==null?void 0:d.parentName],["Parent Phone",d==null?void 0:d.parentPhone]].map(([pe,Te])=>T.jsx("div",{style:{alignItems:"center",justifyContent:"flex-start",display:"flex",background:"#ffffff",padding:"8px",borderRadius:10,border:"1px solid #eef2f7",boxShadow:"none",minHeight:36},children:T.jsxs("div",{children:[T.jsx("div",{style:{fontSize:"9px",fontWeight:700,letterSpacing:"0.4px",color:"#64748b",textTransform:"uppercase"},children:pe}),T.jsx("div",{style:{fontSize:10,fontWeight:600,color:"#111",marginTop:2,wordBreak:"break-word"},children:Te||T.jsx("span",{style:{color:"#cbd5e1"},children:"N/A"})})]})},pe))})]})}),N==="attendance"&&d&&T.jsxs("div",{style:{padding:"12px",background:"#ffffff",borderRadius:12,border:"1px solid #e5e7eb",boxShadow:"0 8px 20px rgba(15,23,42,0.06)"},children:[T.jsx("div",{style:{display:"flex",justifyContent:"center",gap:6,marginBottom:10},children:["daily","weekly","monthly"].map(pe=>T.jsx("button",{onClick:()=>K(pe),style:{padding:"4px 10px",borderRadius:8,border:"none",fontWeight:700,fontSize:10,cursor:"pointer",background:H===pe?"#4b6cb7":"#e5e7eb",color:H===pe?"#fff":"#111827"},children:pe.toUpperCase()},pe))}),Object.entries(Le).filter(([pe])=>J==="All"||pe===J).map(([pe,Te])=>{var st;const Ze=new Date().toDateString(),ut=Te.filter(Ge=>{var pt,de,Me,Oe;return((de=(pt=new Date(Ge.date)).getWeek)==null?void 0:de.call(pt))===((Oe=(Me=new Date).getWeek)==null?void 0:Oe.call(Me))}),he=Te.filter(Ge=>new Date(Ge.date).getMonth()===new Date().getMonth()),Ce=H==="daily"?Te.filter(Ge=>new Date(Ge.date).toDateString()===Ze):H==="weekly"?ut:he,Ve=Xe(Ce),Be=`${H}-${pe}`;return T.jsxs("div",{onClick:()=>Ye(Be),style:{cursor:"pointer",background:"#ffffff",borderRadius:12,padding:12,marginBottom:10,border:"1px solid #e5e7eb",boxShadow:"0 8px 20px rgba(15,23,42,0.06)",position:"relative",overflow:"hidden"},children:[T.jsx("div",{style:{position:"absolute",inset:0,background:"transparent",pointerEvents:"none"}}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:18},children:[T.jsxs("div",{children:[T.jsx("h3",{style:{margin:0,fontSize:12,fontWeight:800,color:"#0f172a"},children:Fe(pe)}),T.jsx("p",{style:{margin:"6px 0 0",fontSize:10,color:"#64748b"},children:(st=Te[0])==null?void 0:st.teacherName})]}),T.jsxs("div",{style:{padding:"4px 8px",borderRadius:999,fontSize:10,fontWeight:800,background:"#e0e7ff",color:"#1e40af",border:"1px solid #c7d2fe"},children:[Ve,"%"]})]}),T.jsx("div",{onClick:()=>Ye(Be),style:{height:8,background:"#e5e7eb",borderRadius:999,cursor:"pointer",overflow:"hidden",marginBottom:10},children:T.jsx("div",{style:{height:"100%",width:`${Ve}%`,background:"#4b6cb7",transition:"width .3s ease"}})}),T.jsxs("div",{style:{fontSize:10,fontWeight:700,color:"#475569",marginBottom:12},children:["Click to view ",H.toUpperCase()," details"]}),X[Be]&&T.jsx("div",{style:{marginTop:14,background:"#ffffff",border:"1px solid #e5e7eb",borderRadius:10,padding:10},children:Ce.map((Ge,pt)=>T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 6px",borderBottom:pt!==Ce.length-1?"1px solid #e5e7eb":"none"},children:[T.jsx("div",{style:{display:"flex",flexDirection:"column"},children:T.jsx("span",{style:{fontSize:10,color:"#1f2937"},children:new Date(Ge.date).toDateString()})}),T.jsx("span",{style:{padding:"4px 10px",borderRadius:999,fontSize:10,fontWeight:800,background:Ge.status==="present"?"#dcfce7":Ge.status==="late"?"#fef3c7":"#fee2e2",color:Ge.status==="present"?"#166534":Ge.status==="late"?"#92400e":"#991b1b"},children:Ge.status.toUpperCase()})]},pt))})]},pe)})]}),N==="performance"&&T.jsxs("div",{style:{position:"relative",paddingBottom:"70px",background:"#ffffff",border:"1px solid #e5e7eb",borderRadius:12,boxShadow:"0 8px 20px rgba(15,23,42,0.06)",padding:12},children:[T.jsx("div",{style:{display:"flex",justifyContent:"center",gap:6,marginBottom:10,borderBottom:"1px solid #e5e7eb",paddingBottom:6},children:["semester1","semester2"].map(pe=>{const Te=ct===pe;return T.jsx("button",{onClick:()=>at(pe),style:{background:"none",border:"none",cursor:"pointer",fontSize:10,fontWeight:700,color:Te?"#4b6cb7":"#64748b",padding:"6px 8px",borderBottom:Te?"2px solid #4b6cb7":"2px solid transparent"},children:pe==="semester1"?"Semester 1":"Semester 2"},pe)})}),T.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:10,padding:0},children:R?T.jsx("div",{style:{textAlign:"center",gridColumn:"1 / -1",padding:12,color:"#64748b",fontSize:11},children:"Loading performance..."}):Object.keys(A||{}).length===0?T.jsx("div",{style:{textAlign:"center",padding:12,borderRadius:12,background:"#ffffff",color:"#64748b",fontSize:11,fontWeight:600,border:"1px solid #e5e7eb",gridColumn:"1 / -1"},children:"No performance records"}):Object.entries(A).map(([pe,Te],Ze)=>{const ut=Te==null?void 0:Te[ct];if(!ut)return null;const he=ut.assessments||{},Ce=Object.values(he).reduce((pt,de)=>pt+(de.score||0),0),Ve=Object.values(he).reduce((pt,de)=>pt+(de.max||0),0),Be=Ve?Ce/Ve*100:0,st=Be>=75?"#16a34a":Be>=50?"#f59e0b":"#dc2626",Ge=pe.replace("course_","").replace(/_/g," ").toUpperCase();return T.jsxs("div",{style:{padding:12,borderRadius:12,background:"#ffffff",border:"1px solid #e5e7eb",boxShadow:"0 8px 20px rgba(15,23,42,0.06)"},children:[T.jsx("div",{style:{fontSize:11,fontWeight:800,marginBottom:10,color:"#0f172a",textAlign:"left"},children:Ge}),T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[T.jsx("div",{style:{fontSize:10,color:"#64748b",fontWeight:600},children:"Total"}),T.jsxs("div",{style:{fontSize:11,fontWeight:800,color:"#111827"},children:[Ce," / ",Ve]}),T.jsxs("div",{style:{padding:"3px 8px",borderRadius:999,fontSize:10,fontWeight:800,border:"1px solid #e5e7eb",color:st,background:"#ffffff"},children:[Math.round(Be),"%"]})]}),T.jsx("div",{style:{height:8,borderRadius:999,background:"#e5e7eb",overflow:"hidden",marginBottom:12},children:T.jsx("div",{style:{width:`${Math.max(0,Math.min(100,Be))}%`,height:"100%",background:st}})}),Object.entries(he).map(([pt,de])=>T.jsxs("div",{style:{marginBottom:8},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,fontWeight:600,color:"#111827"},children:[T.jsx("span",{children:de.name}),T.jsxs("span",{children:[de.score," / ",de.max]})]}),T.jsx("div",{style:{height:5,borderRadius:"999px",background:"#e5e7eb",marginTop:"5px"},children:T.jsx("div",{style:{width:`${de.score/de.max*100}%`,height:"100%",background:st}})})]},pt)),T.jsx("div",{style:{marginTop:8,textAlign:"left",fontWeight:700,color:st,fontSize:10},children:Be>=75?"Excellent":Be>=50?"Good":"Needs Improvement"}),T.jsx("div",{style:{marginTop:6,textAlign:"left",fontSize:10,color:"#64748b"},children:Te.teacherName||ut.teacherName||"N/A"})]},`${pe}-${Ze}`)})})]})]}),!h&&T.jsx("div",{onClick:()=>m(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",background:"linear-gradient(135deg, #833ab4, #0259fa, #459afc)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.25)",transition:"transform 0.2s ease"},children:T.jsx(Nv,{size:30})}),h&&d&&T.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[T.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#fafafa"},children:[T.jsx("strong",{children:d.name}),T.jsxs("div",{style:{display:"flex",gap:"10px"},children:[T.jsx("button",{onClick:()=>{m(!1),w("/all-chat",{state:{user:d,tab:"student"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),T.jsx("button",{onClick:()=>m(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),T.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f9f9f9"},children:[g.length===0?T.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",d.name]}):g.map(pe=>{const Te=String(pe.senderId)===String(ot);return T.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:Te?"flex-end":"flex-start",marginBottom:10},children:T.jsxs("div",{style:{maxWidth:"70%",background:Te?"#4facfe":"#fff",color:Te?"#fff":"#000",padding:"10px 14px",borderRadius:18,borderTopRightRadius:Te?0:18,borderTopLeftRadius:Te?18:0,boxShadow:"0 1px 3px rgba(0,0,0,0.1)",wordBreak:"break-word",cursor:"default",position:"relative"},children:[pe.text," "," ",pe.edited&&T.jsx("small",{style:{fontSize:10},children:" (edited)"}),T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:6,marginTop:6,fontSize:11,color:Te?"#fff":"#888"},children:[T.jsx("span",{style:{marginRight:6,fontSize:11,opacity:.9},children:Mt(pe.timeStamp)}),T.jsx("span",{children:Qt(pe.timeStamp)}),Te&&!pe.deleted&&T.jsxs("span",{style:{display:"flex",gap:0,alignItems:"center"},children:[T.jsx(vh,{size:10,color:Te?"#fff":"#888",style:{opacity:.9,marginLeft:2}}),pe.seen&&T.jsx(vh,{size:10,color:Te?"#f3f7f8":"#ccc",style:{marginLeft:-6,opacity:.95}})]})]})]})},pe.messageId||pe.id)}),T.jsx("div",{ref:y})]}),T.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #eee",display:"flex",gap:"8px",background:"#fff"},children:[T.jsx("input",{value:He,onChange:pe=>We(pe.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"25px",border:"1px solid #ccc",outline:"none"},onKeyDown:pe=>{pe.key==="Enter"&&zr()}}),T.jsx("button",{onClick:()=>zr(),style:{width:45,height:45,borderRadius:"50%",background:"#4facfe",border:"none",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:T.jsx(gg,{})})]})]})]})]})]})}const Sn="https://ethiostore-17d9f-default-rtdb.firebaseio.com",Tc=(r,e)=>[r,e].sort().join("_");function FW(){const r=`${Io}/api`,[e,t]=me.useState([]),[n,i]=me.useState(!0),[s,o]=me.useState(""),[l,c]=me.useState("Details"),[a,u]=me.useState(!1),[d,f]=me.useState(""),[h,m]=me.useState(null),[g,p]=me.useState([]),[y,b]=me.useState({}),[v,E]=me.useState({}),[M,W]=me.useState(!1),[$,N]=me.useState([]),[j,F]=me.useState(!1),[P,L]=me.useState(null),[k,R]=me.useState([]),[C,_]=me.useState(window.innerWidth>900),x=me.useRef(null),[w,S]=me.useState(null),I=Bs(),z=bc(),A=JSON.parse(localStorage.getItem("admin"))||{},H=A.userId,K=A!=null&&A.userId&&(P!=null&&P.userId)?Tc(A.userId,P.userId):null,J=async we=>{try{const He=(await qe.get(`${Sn}/Chats/${we}/lastMessage.json`).catch(()=>({data:null}))).data;if(!He)return;String(He.receiverId)===String(A.userId)&&He.seen===!1&&await qe.patch(`${Sn}/Chats/${we}/lastMessage.json`,{seen:!0}).catch(()=>{})}catch{}},V=me.useRef(null),X=we=>{if(!we)return"";try{return new Date(we).toLocaleDateString()}catch{return""}},D=we=>{if(!we)return"";try{return new Date(we).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}},[O,G]=me.useState(window.innerWidth),Z=O<900,ue=O<=600;me.useEffect(()=>{const we=()=>G(window.innerWidth);return window.addEventListener("resize",we),()=>window.removeEventListener("resize",we)},[]),me.useEffect(()=>{_(O>900)},[O]),me.useEffect(()=>{(async()=>{i(!0);try{const[De,He,We]=await Promise.all([qe.get(`${Sn}/Users.json`).catch(()=>({data:{}})),qe.get(`${Sn}/Parents.json`).catch(()=>({data:{}})),qe.get(`${Sn}/Students.json`).catch(()=>({data:{}}))]),et=De.data||{},St=He.data||{},lt=We.data||{},At=nt=>nt&&(et[nt]||Object.values(et).find(zt=>String(zt==null?void 0:zt.userId)===String(nt)))||null,ct=nt=>{var zt;return nt&&((St==null?void 0:St[nt])||((zt=Object.entries(St||{}).find(([Lt,Ct])=>String(Lt)===String(nt)||String(Ct==null?void 0:Ct.userId)===String(nt)))==null?void 0:zt[1]))||null},at=nt=>{var zt;return nt&&((lt==null?void 0:lt[nt])||((zt=Object.entries(lt||{}).find(([Lt,Ct])=>String(Lt)===String(nt)||String((Ct==null?void 0:Ct.studentId)||(Ct==null?void 0:Ct.id)||"")===String(nt)))==null?void 0:zt[1]))||null},wt=nt=>{const zt=ct(nt),Lt=Object.values((zt==null?void 0:zt.children)||{});if(!Lt.length)return null;const Ct=Lt[0]||{},Ht=at(Ct.studentId);if(!Ht)return null;const jt=Ht.use||Ht.userId||Ht.user||null,Mt=At(jt),Qt=(Mt==null?void 0:Mt.name)||(Mt==null?void 0:Mt.username)||(Ht==null?void 0:Ht.name)||(Ht==null?void 0:Ht.username)||null,Sr=Ct.relationship||null;return{name:Qt,relationship:Sr}},ot=Object.keys(et).filter(nt=>et[nt].role==="parent").map(nt=>{const zt=et[nt]||{},Lt=zt.userId||nt,Ct=wt(Lt);return{userId:Lt,name:zt.name||zt.username||"No Name",email:zt.email||"N/A",childName:(Ct==null?void 0:Ct.name)||"N/A",childRelationship:(Ct==null?void 0:Ct.relationship)||"N/A",profileImage:zt.profileImage||"/default-profile.png",phone:zt.phone||zt.phoneNumber||"N/A",age:zt.age||null,city:zt.city||zt.address&&zt.address.city||null,citizenship:zt.citizenship||null,job:zt.job||null,address:zt.address||null}});t(ot)}catch(De){console.error("Error fetching parents:",De),t([])}finally{i(!1)}})()},[]);const te=async()=>{if(H)try{const we=await qe.get(`${r}/get_post_notifications/${H}`);let De=Array.isArray(we.data)?we.data:Object.values(we.data||{});if(De.length===0){N([]);return}const[He,We]=await Promise.all([qe.get(`${Sn}/Users.json`),qe.get(`${Sn}/School_Admins.json`)]),et=He.data||{},St=We.data||{},lt=ct=>{const at=St[ct];return at?Object.values(et).find(wt=>wt.userId===at.userId):null},At=De.map(ct=>{const at=lt(ct.adminId);return{...ct,notificationId:ct.notificationId||ct.id||`${ct.postId}_${ct.adminId}`,adminName:(at==null?void 0:at.name)||"Unknown Admin",adminProfile:(at==null?void 0:at.profileImage)||"/default-profile.png"}});N(At)}catch(we){console.error("Post notification fetch failed",we),N([])}};me.useEffect(()=>{if(!H)return;te();const we=setInterval(te,9e3);return()=>clearInterval(we)},[H]),me.useEffect(()=>{var we;(we=z.state)!=null&&we.postId&&N([])},[z.state]);const oe=async()=>{if(!A.userId)return;const we={};try{const He=(await qe.get(`${Sn}/Users.json`)).data||{},We=ct=>Object.values(He).find(at=>at.userId===ct),et=async ct=>{const at=`${A.userId}_${ct}`,wt=`${ct}_${A.userId}`,[ot,nt]=await Promise.all([qe.get(`${Sn}/Chats/${at}/messages.json`).catch(()=>({data:null})),qe.get(`${Sn}/Chats/${wt}/messages.json`).catch(()=>({data:null}))]);return[...Object.values(ot.data||{}),...Object.values(nt.data||{})].filter(Lt=>Lt.receiverId===A.userId&&!Lt.seen).length},St=await qe.get(`${Sn}/Teachers.json`).catch(()=>({data:{}}));for(const ct in St.data||{}){const at=St.data[ct],wt=await et(at.userId);if(wt>0){const ot=We(at.userId);we[at.userId]={type:"teacher",name:(ot==null?void 0:ot.name)||"Teacher",profileImage:(ot==null?void 0:ot.profileImage)||"/default-profile.png",count:wt}}}const lt=await qe.get(`${Sn}/Students.json`).catch(()=>({data:{}}));for(const ct in lt.data||{}){const at=lt.data[ct],wt=await et(at.userId);if(wt>0){const ot=We(at.userId);we[at.userId]={type:"student",name:(ot==null?void 0:ot.name)||at.name||"Student",profileImage:(ot==null?void 0:ot.profileImage)||at.profileImage||"/default-profile.png",count:wt}}}const At=await qe.get(`${Sn}/Parents.json`).catch(()=>({data:{}}));for(const ct in At.data||{}){const at=At.data[ct],wt=await et(at.userId);if(wt>0){const ot=We(at.userId);we[at.userId]={type:"parent",name:(ot==null?void 0:ot.name)||at.name||"Parent",profileImage:(ot==null?void 0:ot.profileImage)||at.profileImage||"/default-profile.png",count:wt}}}E(we)}catch(De){console.error("Unread fetch failed:",De),E({})}};me.useEffect(()=>{if(!A.userId)return;oe();const we=setInterval(oe,9e3);return()=>clearInterval(we)},[A.userId]),me.useEffect(()=>{const we=De=>{!De.target.closest(".icon-circle")&&!De.target.closest(".messenger-dropdown")&&W(!1)};return document.addEventListener("click",we),()=>document.removeEventListener("click",we)},[]),me.useEffect(()=>{if(!P)return;(async()=>{try{const He=(await qe.get(`${Sn}/Parents.json`).catch(()=>({data:{}}))).data||{},We=(Object.entries(He).find(([Ht,jt])=>String(jt==null?void 0:jt.userId)===String(P.userId)||String(Ht)===String(P.userId))||[])[1],St=(await qe.get(`${Sn}/Users.json`).catch(()=>({data:{}}))).data||{},lt=Ht=>Ht&&(St[Ht]||Object.values(St).find(jt=>String(jt==null?void 0:jt.userId)===String(Ht)))||null,At=lt(P.userId)||{},ct=(At==null?void 0:At.dob)||(At==null?void 0:At.birthDate)||(We==null?void 0:We.dob)||(We==null?void 0:We.birthDate)||null,at=Ht=>{if(!Ht)return null;try{const jt=typeof Ht=="number"?new Date(Ht):new Date(String(Ht)),Mt=new Date;let Qt=Mt.getFullYear()-jt.getFullYear();const Sr=Mt.getMonth()-jt.getMonth();return(Sr<0||Sr===0&&Mt.getDate()<jt.getDate())&&Qt--,Qt}catch{return null}},wt=(We==null?void 0:We.age)||(At==null?void 0:At.age)||at(ct)||null,ot=Object.values((We==null?void 0:We.children)||{}).map(Ht=>Ht.relationship).filter(Boolean)||[],nt={userId:P.userId,name:At.name||At.username||"No Name",username:At.username||null,email:At.email||"N/A",phone:At.phone||(We==null?void 0:We.phone)||"N/A",isActive:At.isActive??(We==null?void 0:We.isActive)??!0,job:At.job||(We==null?void 0:We.job)||null,relationships:ot,age:wt??"",city:(We==null?void 0:We.city)||(We==null?void 0:We.address)&&We.address.city||At.city||"",citizenship:(We==null?void 0:We.citizenship)||At.citizenship||"",status:(We==null?void 0:We.status)||(At.isActive?"Active":"Inactive")||"N/A",address:(We==null?void 0:We.address)||At.address||null,additionalInfo:(We==null?void 0:We.additionalInfo)||"N/A",createdAt:(We==null?void 0:We.createdAt)||At.createdAt||"N/A",profileImage:At.profileImage||"/default-profile.png"};m(nt),L(Ht=>({...Ht||{},...nt}));const Lt=(await qe.get(`${Sn}/Students.json`).catch(()=>({data:{}}))).data||{},Ct=Object.values((We==null?void 0:We.children)||{}).map(Ht=>{var Sr;const jt=(Lt==null?void 0:Lt[Ht.studentId])||((Sr=Object.entries(Lt||{}).find(([lr,pr])=>String(lr)===String(Ht.studentId||"")||String((pr==null?void 0:pr.studentId)||(pr==null?void 0:pr.id)||"")===String(Ht.studentId||"")||String((pr==null?void 0:pr.use)||(pr==null?void 0:pr.userId)||"")===String(Ht.studentId||"")))==null?void 0:Sr[1]);if(!jt)return null;const Mt=jt.use||jt.userId||jt.user||null,Qt=lt(Mt)||{};return{studentId:Ht.studentId,name:Qt.name||Qt.username||jt.name||jt.username||"N/A",email:Qt.email||"N/A",grade:jt.grade||"N/A",section:jt.section||"N/A",parentPhone:We.phone||"N/A",relationship:Ht.relationship||"N/A",profileImage:Qt.profileImage||jt.profileImage||"/default-profile.png"}}).filter(Boolean);p(Ct)}catch(De){console.error("Error fetching parent info and children:",De),m(null),p([])}})()},[P]),me.useEffect(()=>{if(!K)return;const we=Ih(),De=dn(we,`Chats/${K}/messages`),He=el(De,async We=>{const et=We.val()||{},St=Object.entries(et).map(([At,ct])=>({messageId:At,...ct})).sort((At,ct)=>At.timeStamp-ct.timeStamp);R(St);const lt={};if(Object.entries(et).forEach(([At,ct])=>{ct&&ct.receiverId===A.userId&&!ct.seen&&(lt[`${At}/seen`]=!0)}),Object.keys(lt).length>0){try{await qe.patch(`${Sn}/Chats/${K}/messages.json`,lt).catch(()=>{})}catch(At){console.warn("Failed to patch parent seen updates",At)}qe.patch(`${Sn}/Chats/${K}/unread.json`,{[A.userId]:0}).catch(()=>{}),J(K),R(At=>At.map(ct=>ct.receiverId===A.userId?{...ct,seen:!0}:ct))}});return()=>He()},[K]),me.useEffect(()=>{if(!K||!a){S(null);return}const we=Ih(),De=dn(we,`Chats/${K}/typing`),He=el(De,We=>{const et=We.val();S(et&&et.userId?et.userId:null)});return()=>He()},[K,a]),me.useEffect(()=>{if(!a||!P||!(A!=null&&A.userId))return;const we=Tc(A.userId,P.userId);(async()=>{try{const We=(await qe.get(`${Sn}/Chats/${we}/messages.json`)).data||{},et={};Object.entries(We).forEach(([St,lt])=>{lt&&lt.receiverId===A.userId&&!lt.seen&&(et[`${St}/seen`]=!0)}),Object.keys(et).length>0&&await qe.patch(`${Sn}/Chats/${we}/messages.json`,et).catch(()=>{}),R(St=>St.map(lt=>lt.receiverId===A.userId?{...lt,seen:!0}:lt))}catch(He){console.warn("Failed to mark messages as seen:",He)}})(),qe.patch(`${Sn}/Chats/${we}/unread.json`,{[A.userId]:0}).catch(()=>{}),J(we),qe.put(`${Sn}/Chats/${we}/typing.json`,null).catch(()=>{})},[a,P,A]);const re=we=>{if(!(A!=null&&A.userId)||!(P!=null&&P.userId))return;const De=Tc(A.userId,P.userId);if(!we||!we.trim()){qe.put(`${Sn}/Chats/${De}/typing.json`,null).catch(()=>{}),x.current&&(clearTimeout(x.current),x.current=null);return}qe.put(`${Sn}/Chats/${De}/typing.json`,{userId:A.userId}).catch(()=>{}),x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{qe.put(`${Sn}/Chats/${De}/typing.json`,null).catch(()=>{}),x.current=null},1800)};me.useEffect(()=>{if(!a&&P&&(A!=null&&A.userId)){const we=Tc(A.userId,P.userId);qe.put(`${Sn}/Chats/${we}/typing.json`,null).catch(()=>{})}return()=>{x.current&&clearTimeout(x.current)}},[a,P,A]),me.useEffect(()=>{var we;(we=V.current)==null||we.scrollIntoView({behavior:"smooth"})},[k,a]);const be=async()=>{K&&await qe.patch(`${Sn}/Chats/${K}.json`,{participants:{[A.userId]:!0,[P.userId]:!0},unread:{[A.userId]:0,[P.userId]:0},typing:null,lastMessage:null}).catch(()=>{})},ie=async we=>{var We;if(!we||!we.trim()||!P||!(A!=null&&A.userId)||!(P!=null&&P.userId))return;const De=Tc(A.userId,P.userId);await be();const He={senderId:A.userId,receiverId:P.userId,type:"text",text:we,imageUrl:null,replyTo:null,seen:!1,edited:!1,deleted:!1,timeStamp:Date.now()};try{const et=await qe.post(`${Sn}/Chats/${De}/messages.json`,He).catch(()=>({data:null})),lt={messageId:((We=et==null?void 0:et.data)==null?void 0:We.name)||`${Date.now()}`,senderId:He.senderId,receiverId:He.receiverId,text:He.text||"",type:He.type||"text",timeStamp:He.timeStamp,seen:!1,edited:!1,deleted:!1};await qe.patch(`${Sn}/Chats/${De}.json`,{participants:{[A.userId]:!0,[P.userId]:!0},lastMessage:lt,typing:null}).catch(()=>{});try{const ct=(await qe.get(`${Sn}/Chats/${De}/unread.json`)).data||{},at=Number(ct[P.userId]||0),wt={...ct||{},[P.userId]:at+1,[A.userId]:Number(ct[A.userId]||0)};await qe.put(`${Sn}/Chats/${De}/unread.json`,wt).catch(()=>{})}catch{await qe.put(`${Sn}/Chats/${De}/unread.json`,{[P.userId]:1,[A.userId]:0}).catch(()=>{})}f(""),qe.put(`${Sn}/Chats/${De}/typing.json`,null).catch(()=>{})}catch(et){console.error("Failed to send parent message:",et)}};me.useEffect(()=>{if(!P||!(A!=null&&A.userId))return;const we=Tc(A.userId,P.userId);qe.patch(`${Sn}/Chats/${we}/unread.json`,{[A.userId]:0}).catch(()=>{}),J(we)},[P,A]);const le=async we=>{if(!(A!=null&&A.userId)||!we)return;const De=Tc(A.userId,we);await qe.patch(`${Sn}/Chats/${De}/unread.json`,{[A.userId]:0}).catch(()=>{}),await J(De)},ae=Object.values(v||{}).reduce((we,De)=>we+(De.count||0),0),Se=(($==null?void 0:$.length)||0)+ae;if(!(A!=null&&A.userId))return null;const ve=s.trim().toLowerCase(),ke=me.useMemo(()=>ve?(e||[]).filter(we=>[we==null?void 0:we.name,we==null?void 0:we.email,we==null?void 0:we.phone,we==null?void 0:we.city,we==null?void 0:we.job,we==null?void 0:we.citizenship].filter(Boolean).join(" ").toLowerCase().includes(ve)):e,[e,ve]),Ne={padding:"10px 20px 20px",flex:1,minWidth:0,boxSizing:"border-box"},ze={height:"72px",borderRadius:"12px",padding:"10px",cursor:"pointer",transition:"all 0.3s ease",width:"100%",boxSizing:"border-box"};return T.jsxs("div",{className:"dashboard-page",children:[T.jsxs("nav",{className:"top-navbar",children:[T.jsx("h2",{children:"Gojo Dashboard"}),T.jsxs("div",{className:"nav-right",children:[T.jsxs("div",{className:"icon-circle",style:{position:"relative",cursor:"pointer"},onClick:we=>{we.stopPropagation(),F(De=>!De)},children:[T.jsx(wc,{}),$.length+Object.values(v||{}).reduce((we,De)=>we+(De.count||0),0)>0&&T.jsx("span",{className:"badge",children:$.length+Object.values(v||{}).reduce((we,De)=>we+(De.count||0),0)}),j&&T.jsx("div",{className:"notification-dropdown",onClick:we=>we.stopPropagation(),style:{position:"absolute",top:"45px",right:"0",width:"360px",maxHeight:"420px",overflowY:"auto",background:"#fff",borderRadius:10,boxShadow:"0 6px 20px rgba(0,0,0,0.12)",zIndex:1e3,padding:6},children:Se===0?T.jsx("p",{className:"muted",children:"No new notifications"}):T.jsxs("div",{children:[$.length>0&&T.jsxs("div",{children:[T.jsx("div",{className:"notification-section-title",children:"Posts"}),$.map(we=>T.jsxs("div",{className:"notification-row",onClick:async()=>{try{await qe.post(`${r}/mark_post_notification_read`,{notificationId:we.notificationId})}catch(De){console.warn("Failed to mark notification:",De)}N(De=>De.filter(He=>He.notificationId!==we.notificationId)),F(!1),I("/dashboard",{state:{postId:we.postId,posterName:we.adminName,posterProfile:we.adminProfile}})},style:{padding:10,display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:"1px solid #f0f0f0",transition:"background 120ms ease"},onMouseEnter:De=>De.currentTarget.style.background="#f6f8fa",onMouseLeave:De=>De.currentTarget.style.background="",children:[T.jsx("img",{src:we.adminProfile||"/default-profile.png",alt:we.adminName,style:{width:46,height:46,borderRadius:8,objectFit:"cover"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("strong",{style:{display:"block",marginBottom:4},children:we.adminName}),T.jsx("p",{style:{margin:0,fontSize:13,color:"#555",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:we.message})]}),T.jsx("div",{style:{fontSize:12,color:"#888",marginLeft:8},children:new Date(we.time||we.createdAt||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},we.notificationId))]}),ae>0&&T.jsxs("div",{children:[T.jsx("div",{className:"notification-section-title",style:{padding:"8px 10px",color:"#333",fontWeight:700,background:"#fafafa",borderRadius:6,margin:"8px 6px"},children:"Messages"}),Object.entries(v||{}).map(([we,De])=>T.jsxs("div",{className:"notification-row",onClick:async()=>{await le(we),E(He=>{const We={...He};return delete We[we],We}),F(!1),I("/all-chat",{state:{user:{userId:we,name:De.name,profileImage:De.profileImage,type:De.type}}})},style:{padding:10,display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:"1px solid #f0f0f0",transition:"background 120ms ease"},onMouseEnter:He=>He.currentTarget.style.background="#f6f8fa",onMouseLeave:He=>He.currentTarget.style.background="",children:[T.jsx("img",{src:De.profileImage||"/default-profile.png",alt:De.name,style:{width:46,height:46,borderRadius:8,objectFit:"cover"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("strong",{style:{display:"block",marginBottom:4},children:De.name}),T.jsxs("p",{style:{margin:0,fontSize:13,color:"#555",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:[De.count," new message",De.count>1&&"s"]})]})]},we))]})]})})]}),T.jsxs("div",{className:"icon-circle",style:{position:"relative",cursor:"pointer"},onClick:()=>I("/all-chat"),children:[T.jsx(vc,{}),Object.values(v||{}).reduce((we,De)=>we+(De.count||0),0)>0&&T.jsx("span",{className:"badge",children:Object.values(v||{}).reduce((we,De)=>we+(De.count||0),0)})]}),T.jsx(gr,{className:"icon-circle",to:"/settings",children:T.jsx(_c,{})}),T.jsx("img",{src:A.profileImage||"/default-profile.png",alt:"admin",className:"profile-img"})]})]}),T.jsxs("div",{className:"google-dashboard",children:[T.jsxs("div",{className:"google-sidebar",style:{width:"220px",padding:"10px"},children:[T.jsxs("div",{className:"sidebar-profile",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6,paddingBottom:6},children:[T.jsx("div",{className:"sidebar-img-circle",style:{width:48,height:48,borderRadius:"50%",overflow:"hidden",border:"2px solid #e6eefc"},children:T.jsx("img",{src:(A==null?void 0:A.profileImage)||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover"}})}),T.jsx("h3",{style:{margin:0,fontSize:14,fontWeight:700},children:(A==null?void 0:A.name)||"Admin Name"}),T.jsx("p",{style:{margin:0,fontSize:12,color:"#6b7280"},children:(A==null?void 0:A.adminId)||"username"})]}),T.jsxs("div",{className:"sidebar-menu",style:{display:"flex",flexDirection:"column",gap:6,marginTop:8},children:[T.jsxs(gr,{className:"sidebar-btn",to:"/dashboard",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(xc,{style:{width:18,height:18}})," Home"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/my-posts",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Ca,{style:{width:18,height:18}})," My Posts"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/teachers",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Teachers"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/students",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Students"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/schedule",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(sl,{style:{width:18,height:18}})," Schedule"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/parents",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13,backgroundColor:"#4b6cb7",color:"#fff",borderRadius:8},children:[T.jsx(Pn,{style:{width:18,height:18}})," Parents"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/registration-form",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Registration Form"]}),T.jsxs("button",{className:"sidebar-btn logout-btn",onClick:()=>{localStorage.removeItem("admin"),window.location.href="/login"},style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Sc,{style:{width:18,height:18}})," Logout"]})]})]}),T.jsxs("main",{className:"main-content",style:Ne,children:[T.jsx("h2",{style:{marginBottom:"6px",textAlign:Z?"center":"left",marginTop:"-8px",fontSize:"20px",marginLeft:Z?0:64},children:"Parents"}),T.jsx("div",{style:{display:"flex",justifyContent:Z?"center":"flex-start",marginBottom:"10px",paddingLeft:Z?0:64},children:T.jsxs("div",{style:{width:"min(580px, 100%)",display:"flex",alignItems:"center",gap:"8px",background:"#fff",borderRadius:"10px",padding:"6px 10px",border:"1px solid #e5e7eb",boxShadow:"0 2px 6px rgba(0,0,0,0.06)"},children:[T.jsx(jv,{style:{color:"#64748b",fontSize:"12px"}}),T.jsx("input",{type:"text",value:s,onChange:we=>o(we.target.value),placeholder:"Search parents by name, email, phone",style:{border:"none",outline:"none",width:"100%",fontSize:"12px",color:"#111827",background:"transparent"}})]})}),n?T.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:Z?"center":"flex-start",gap:"10px",marginLeft:Z?0:"165px"},children:Array.from({length:6}).map((we,De)=>T.jsx("div",{style:{width:Z?"92%":"400px",height:"72px",borderRadius:"12px",padding:"10px",background:"#fff",border:"1px solid #eee",boxShadow:"0 4px 10px rgba(0,0,0,0.04)"},children:T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[T.jsx("div",{style:{width:36,height:36,borderRadius:10,background:"#f1f5f9"}}),T.jsx("div",{style:{width:48,height:48,borderRadius:"50%",background:"#f1f5f9"}}),T.jsxs("div",{style:{flex:1},children:[T.jsx("div",{style:{width:"55%",height:12,background:"#f1f5f9",borderRadius:6,marginBottom:8}}),T.jsx("div",{style:{width:"45%",height:10,background:"#f1f5f9",borderRadius:6}})]})]})},De))}):ke.length===0?T.jsx("p",{style:{textAlign:"center",color:"#555"},children:"No parents found."}):T.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:Z?"center":"flex-start",gap:"10px",marginLeft:Z?0:"165px"},children:ke.map((we,De)=>T.jsxs("div",{onClick:()=>{L(we),_(!0)},style:{...ze,width:Z?"92%":"400px",background:(P==null?void 0:P.userId)===we.userId?"#e0e7ff":"#fff",border:(P==null?void 0:P.userId)===we.userId?"2px solid #4b6cb7":"1px solid #ddd",boxShadow:(P==null?void 0:P.userId)===we.userId?"0 6px 15px rgba(75,108,183,0.3)":"0 4px 10px rgba(0,0,0,0.1)"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[T.jsx("div",{style:{width:36,height:36,borderRadius:10,background:"#eef2ff",color:"#2563eb",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800,fontSize:13,flex:"0 0 auto"},children:De+1}),T.jsx("img",{src:we.profileImage,alt:we.name,style:{width:48,height:48,borderRadius:"50%",objectFit:"cover",border:(P==null?void 0:P.userId)===we.userId?"3px solid #4b6cb7":"3px solid red",transition:"all 0.3s ease"}}),T.jsx("h3",{style:{marginTop:"-24px",fontSize:"14px",marginBottom:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:we.name})]}),T.jsx("div",{style:{marginLeft:Z?"78px":"104px",marginTop:"-16px",color:"#555",fontSize:"11px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:we.email&&we.email!=="N/A"?we.email:` ${we.childRelationship||"N/A"}: ${we.childName||"N/A"}`})]},we.userId))})]}),P&&C&&T.jsxs("aside",{className:"parent-info-sidebar",style:{width:ue?"100%":"30%",position:"fixed",left:ue?0:"auto",right:0,top:ue?0:"55px",height:ue?"100vh":"calc(100vh - 55px)",background:"#ffffff",boxShadow:"0 0 18px rgba(0,0,0,0.08)",borderLeft:ue?"none":"1px solid #e5e7eb",zIndex:300,display:"flex",flexDirection:"column",fontSize:"10px"},children:[T.jsx("div",{style:{position:"absolute",top:0,left:22,zIndex:999},children:T.jsx("button",{onClick:()=>_(!1),"aria-label":"Close sidebar",style:{background:"none",border:"none",fontSize:28,fontWeight:700,color:"#3647b7",cursor:"pointer",padding:2,lineHeight:1},children:""})}),T.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"12px"},children:[T.jsxs("div",{style:{background:"#e0e7ff",margin:"-12px -12px 10px",padding:"14px 10px",textAlign:"center"},children:[T.jsx("div",{style:{width:"70px",height:"70px",margin:"0 auto 10px",borderRadius:"50%",overflow:"hidden",border:"3px solid #4b6cb7"},children:T.jsx("img",{src:P.profileImage,alt:P.name,style:{width:"100%",height:"100%",objectFit:"cover"}})}),T.jsx("h2",{style:{margin:0,color:"#111827",fontSize:14},children:P.name}),T.jsx("p",{style:{margin:"4px 0",color:"#6b7280",fontSize:"10px"},children:P.email})]}),T.jsx("div",{style:{display:"flex",borderBottom:"1px solid #e5e7eb",marginBottom:"10px"},children:[{key:"Details",label:"DETAILS"},{key:"Children",label:"CHILDREN"},{key:"Status",label:"STATUS"}].map(we=>T.jsx("button",{onClick:()=>c(we.key),style:{flex:1,padding:"6px",background:"none",border:"none",cursor:"pointer",fontWeight:600,color:l===we.key?"#4b6cb7":"#6b7280",fontSize:"10px",borderBottom:l===we.key?"3px solid #4b6cb7":"3px solid transparent"},children:we.label},we.key))}),T.jsxs("div",{style:{paddingBottom:40},children:[l==="Details"&&P&&T.jsxs("div",{style:{padding:"12px",background:"#ffffff",borderRadius:12,border:"1px solid #e5e7eb",boxShadow:"0 8px 20px rgba(15,23,42,0.06)",margin:"0 auto",maxWidth:380},children:[T.jsx("h3",{style:{margin:0,marginBottom:6,color:"#0f172a",fontWeight:800,letterSpacing:"0.1px",fontSize:12,textAlign:"left"},children:"Parent Profile"}),T.jsxs("div",{style:{color:"#64748b",fontSize:9,textAlign:"left",marginBottom:10},children:["ID: ",T.jsx("b",{style:{color:"#111827"},children:P.userId})]}),T.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[{label:"Email",value:P.email||"N/A"},{label:"Phone",value:P.phone||"N/A"},{label:"Age",value:P.age||""},{label:"City",value:P.city||(P.address&&typeof P.address=="object"?P.address.city:P.city)||""},{label:"Citizenship",value:P.citizenship||""},{label:"Job",value:P.job||""},{label:"Status",value:P.status?P.status.charAt(0).toUpperCase()+P.status.slice(1):""},{label:"Address",value:(typeof P.address=="string"?P.address:P.address&&(P.address.street||P.address.city||JSON.stringify(P.address)))||""}].map(we=>T.jsx("div",{style:{alignItems:"center",justifyContent:"flex-start",display:"flex",background:"#ffffff",padding:"8px",borderRadius:10,border:"1px solid #eef2f7",minHeight:36},children:T.jsxs("div",{children:[T.jsx("div",{style:{fontSize:"9px",fontWeight:700,letterSpacing:"0.4px",color:"#64748b",textTransform:"uppercase"},children:we.label}),T.jsx("div",{style:{fontSize:10,fontWeight:600,color:we.label==="Status"?we.value&&String(we.value).toLowerCase()==="active"?"#16a34a":"#991b1b":"#111",marginTop:2,wordBreak:"break-word"},children:we.value||T.jsx("span",{style:{color:"#d1d5db"},children:"N/A"})})]})},we.label))})]}),l==="Children"&&T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:g.length===0?T.jsx("div",{style:{padding:10,borderRadius:12,border:"1px solid #e5e7eb",background:"#fff",color:"#6b7280"},children:"No children found."}):g.map(we=>T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"10px",borderRadius:12,border:"1px solid #e5e7eb",background:"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.06)"},children:[T.jsx("img",{src:we.profileImage,alt:we.name,style:{width:44,height:44,borderRadius:22,objectFit:"cover",border:"2px solid #4b6cb7"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("div",{style:{fontSize:11,fontWeight:800,color:"#111827",marginBottom:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:we.name}),T.jsxs("div",{style:{fontSize:10,color:"#6b7280"},children:["Grade ",we.grade,we.section?`  ${we.section}`:"",`  Relation: ${we.relationship||"N/A"}`]})]})]},we.studentId))}),l==="Status"&&T.jsx("div",{style:{padding:"12px",borderRadius:12,border:"1px solid #e5e7eb",background:"#fff"},children:T.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[{label:"Status",value:P.status||"Active"},{label:"Created",value:P.createdAt?new Date(P.createdAt).toLocaleString():""}].map(we=>T.jsxs("div",{style:{padding:8,borderRadius:10,border:"1px solid #eef2f7",background:"#fff"},children:[T.jsx("div",{style:{fontSize:"9px",fontWeight:700,letterSpacing:"0.4px",color:"#64748b",textTransform:"uppercase"},children:we.label}),T.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#111827",marginTop:2,wordBreak:"break-word"},children:we.value})]},we.label))})})]}),!a&&T.jsx("div",{onClick:()=>u(!0),style:{position:"fixed",bottom:"20px",right:"20px",width:"56px",height:"56px",background:"#4b6cb7",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",zIndex:1e3,boxShadow:"0 8px 18px rgba(0,0,0,0.20)",transition:"transform 0.2s ease"},children:T.jsx(Nv,{size:30})}),a&&P&&T.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",width:"360px",height:"480px",background:"#fff",borderRadius:"16px",boxShadow:"0 12px 30px rgba(0,0,0,0.25)",zIndex:2e3,display:"flex",flexDirection:"column",overflow:"hidden"},children:[T.jsxs("div",{style:{padding:"14px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",background:"#e0e7ff"},children:[T.jsxs("div",{style:{display:"flex",flexDirection:"column",lineHeight:1.1},children:[T.jsx("strong",{children:P.name}),w&&String(w)===String(P.userId)&&T.jsx("small",{style:{color:"#0b78f6",marginTop:4},children:"Typing"})]}),T.jsxs("div",{style:{display:"flex",gap:10},children:[T.jsx("button",{onClick:()=>{u(!1),I("/all-chat",{state:{user:P,tab:"parent"}})},style:{background:"none",border:"none",cursor:"pointer",fontSize:"18px"},children:""}),T.jsx("button",{onClick:()=>u(!1),style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:""})]})]}),T.jsxs("div",{style:{flex:1,padding:"12px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"6px",background:"#f8fafc"},children:[k.length===0?T.jsxs("p",{style:{textAlign:"center",color:"#aaa"},children:["Start chatting with ",P.name]}):k.map(we=>{const De=String(we.senderId)===String(A.userId);return T.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:De?"flex-end":"flex-start",marginBottom:10},children:T.jsxs("div",{style:{maxWidth:"70%",background:De?"#4b6cb7":"#fff",color:De?"#fff":"#111827",padding:"10px 14px",borderRadius:18,borderTopRightRadius:De?0:18,borderTopLeftRadius:De?18:0,boxShadow:"0 1px 3px rgba(0,0,0,0.10)",wordBreak:"break-word",cursor:"default",position:"relative",border:De?"none":"1px solid #e5e7eb"},children:[we.text," ",we.edited&&T.jsx("small",{style:{fontSize:10},children:" (edited)"}),T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:6,marginTop:6,fontSize:11,color:De?"#fff":"#888"},children:[T.jsx("span",{style:{marginRight:6,fontSize:11,opacity:.9},children:X(we.timeStamp)}),T.jsx("span",{children:D(we.timeStamp)}),De&&!we.deleted&&T.jsxs("span",{style:{display:"flex",gap:0,alignItems:"center"},children:[T.jsx(vh,{size:10,color:De?"#fff":"#888",style:{opacity:.9,marginLeft:2}}),we.seen&&T.jsx(vh,{size:10,color:De?"#f3f7f8":"#ccc",style:{marginLeft:-6,opacity:.95}})]})]})]})},we.messageId||we.id)}),T.jsx("div",{ref:V})]}),T.jsxs("div",{style:{padding:"10px",borderTop:"1px solid #e5e7eb",display:"flex",gap:"8px",background:"#fff"},children:[T.jsx("input",{value:d,onChange:we=>{f(we.target.value),re(we.target.value)},placeholder:"Type a message...",style:{flex:1,padding:"10px 14px",borderRadius:"25px",border:"1px solid #ccc",outline:"none"},onKeyDown:we=>{we.key==="Enter"&&ie(d)}}),T.jsx("button",{onClick:()=>ie(d),style:{width:45,height:45,borderRadius:"50%",background:"#4b6cb7",border:"none",color:"#fff",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:T.jsx(gg,{})})]})]})]})]})]})]})}function BW(){const[r,e]=me.useState(localStorage.getItem("darkMode")==="true");return me.useEffect(()=>{r?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),localStorage.setItem("darkMode",r)},[r]),[r,()=>e(n=>!n)]}function zW(){const r=`${Io}/api`,[e,t]=me.useState(JSON.parse(localStorage.getItem("admin"))||{}),[n,i]=me.useState(null),[s,o]=me.useState(e.profileImage||"/default-profile.png"),[l,c]=BW(),[a,u]=me.useState(e.name||""),[d,f]=me.useState(e.username||""),[h,m]=me.useState(""),[g,p]=me.useState(""),y=Bs(),[b,v]=me.useState([]),[E,M]=me.useState(!1),[W,$]=me.useState([]),[N,j]=me.useState(!1),F=e.userId,P=async()=>{if(F)try{const I=await qe.get(`${r}/get_post_notifications/${F}`);let z=Array.isArray(I.data)?I.data:Object.values(I.data||{});if(z.length===0){$([]);return}const[A,H]=await Promise.all([qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json"),qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/School_Admins.json")]),K=A.data||{},J=H.data||{},V=D=>{const O=J[D];return O?Object.values(K).find(G=>G.userId===O.userId):null},X=z.map(D=>{const O=V(D.adminId);return{...D,notificationId:D.notificationId||D.id||`${D.postId}_${D.adminId}`,adminName:(O==null?void 0:O.name)||"Unknown Admin",adminProfile:(O==null?void 0:O.profileImage)||"/default-profile.png"}});$(X)}catch(I){console.error("Post notification fetch failed",I),$([])}};me.useEffect(()=>{if(!F)return;P();const I=setInterval(P,5e3);return()=>clearInterval(I)},[F]),me.useEffect(()=>{var I;(I=location.state)!=null&&I.postId&&$([])},[]),me.useEffect(()=>{const I=z=>{!z.target.closest(".icon-circle")&&!z.target.closest(".notification-dropdown")&&j(!1)};return document.addEventListener("click",I),()=>document.removeEventListener("click",I)},[]);const L=I=>i(I.target.files[0]),k=async()=>{if(!n)return alert("Select an image first.");try{const I=new FileReader;I.readAsDataURL(n),I.onloadend=async()=>{const z=I.result;await qe.patch(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users/${e.userId}.json`,{profileImage:z});const A={...e,profileImage:z};localStorage.setItem("admin",JSON.stringify(A)),o(z),i(null),alert("Profile image updated!")}}catch(I){console.error("Error updating profile image:",I)}},R=async()=>{if(!a||!d)return alert("Name and Username required!");try{await qe.patch(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users/${e.userId}.json`,{name:a,username:d});const I={...e,name:a,username:d};localStorage.setItem("admin",JSON.stringify(I)),t(I),alert("Profile info updated!")}catch(I){console.error("Error updating info:",I)}},C=async()=>{if(!h||!g)return alert("Fill both password fields.");if(h!==g)return alert("Passwords do not match!");try{await qe.patch(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users/${e.userId}.json`,{password:h}),m(""),p(""),alert("Password updated successfully!")}catch(I){console.error("Error updating password:",I)}};me.useEffect(()=>{const I=z=>{M(!1)};return document.addEventListener("click",I),()=>document.removeEventListener("click",I)},[]),me.useEffect(()=>{(async()=>{try{const A=await(await fetch("/api/unreadSenders")).json();v(A)}catch{}})()},[]);const _=async()=>{if(!e.userId)return;const I={};try{const A=(await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json")).data||{},H=D=>Object.values(A).find(O=>O.userId===D),K=async D=>{const O=`${e.userId}_${D}`,G=`${D}_${e.userId}`,[Z,ue]=await Promise.all([qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${O}/messages.json`),qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${G}/messages.json`)]);return[...Object.values(Z.data||{}),...Object.values(ue.data||{})].filter(oe=>oe.receiverId===e.userId&&!oe.seen).length},J=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json");for(const D in J.data||{}){const O=J.data[D],G=await K(O.userId);if(G>0){const Z=H(O.userId);I[O.userId]={type:"teacher",name:(Z==null?void 0:Z.name)||"Teacher",profileImage:(Z==null?void 0:Z.profileImage)||"/default-profile.png",count:G}}}const V=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Students.json");for(const D in V.data||{}){const O=V.data[D],G=await K(O.userId);if(G>0){const Z=H(O.userId);I[O.userId]={type:"student",name:(Z==null?void 0:Z.name)||O.name||"Student",profileImage:(Z==null?void 0:Z.profileImage)||O.profileImage||"/default-profile.png",count:G}}}const X=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Parents.json");for(const D in X.data||{}){const O=X.data[D],G=await K(O.userId);if(G>0){const Z=H(O.userId);I[O.userId]={type:"parent",name:(Z==null?void 0:Z.name)||O.name||"Parent",profileImage:(Z==null?void 0:Z.profileImage)||O.profileImage||"/default-profile.png",count:G}}}v(I)}catch(z){console.error("Unread fetch failed:",z)}};me.useEffect(()=>{const I=z=>{!z.target.closest(".icon-circle")&&!z.target.closest(".messenger-dropdown")&&M(!1)};return document.addEventListener("click",I),()=>document.removeEventListener("click",I)},[]),me.useEffect(()=>{if(!e.userId)return;_();const I=setInterval(_,5e3);return()=>clearInterval(I)},[e.userId]);const x=async I=>{const z=`${e.userId}_${I}`,A=`${I}_${e.userId}`,[H,K]=await Promise.all([qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${z}/messages.json`),qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${A}/messages.json`)]),J={},V=(X,D)=>{Object.entries(X||{}).forEach(([O,G])=>{G.receiverId===e.userId&&!G.seen&&(J[`${D}/${O}/seen`]=!0)})};V(H.data,`Chats/${z}/messages`),V(K.data,`Chats/${A}/messages`),Object.keys(J).length>0&&await qe.patch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/.json",J)},w=Object.values(b||{}).reduce((I,z)=>I+(z.count||0),0),S=((W==null?void 0:W.length)||0)+w;return T.jsxs("div",{className:"dashboard-page",children:[T.jsxs("nav",{className:"top-navbar",children:[T.jsx("h2",{children:"Gojo Dashboard"}),T.jsxs("div",{className:"nav-right",children:[T.jsxs("div",{className:"icon-circle",style:{position:"relative",cursor:"pointer"},onClick:I=>{I.stopPropagation(),j(z=>!z)},children:[T.jsx(wc,{}),S>0&&T.jsx("span",{className:"badge",children:S}),N&&T.jsx("div",{className:"notification-dropdown",onClick:I=>I.stopPropagation(),style:{position:"absolute",top:"45px",right:"0",width:"360px",maxHeight:"420px",overflowY:"auto",background:"#fff",borderRadius:10,boxShadow:"0 6px 20px rgba(0,0,0,0.12)",zIndex:1e3,padding:6},children:S===0?T.jsx("p",{className:"muted",children:"No new notifications"}):T.jsxs("div",{children:[W.length>0&&T.jsxs("div",{children:[T.jsx("div",{className:"notification-section-title",children:"Posts"}),W.map(I=>T.jsxs("div",{className:"notification-row",onClick:async()=>{try{await qe.post(`${r}/mark_post_notification_read`,{notificationId:I.notificationId})}catch(z){console.warn("Failed to mark notification:",z)}$(z=>z.filter(A=>A.notificationId!==I.notificationId)),j(!1),y("/dashboard",{state:{postId:I.postId,posterName:I.adminName,posterProfile:I.adminProfile}})},style:{padding:10,display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:"1px solid #f0f0f0",transition:"background 120ms ease"},onMouseEnter:z=>z.currentTarget.style.background="#f6f8fa",onMouseLeave:z=>z.currentTarget.style.background="",children:[T.jsx("img",{src:I.adminProfile||"/default-profile.png",alt:I.adminName,style:{width:46,height:46,borderRadius:8,objectFit:"cover"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("strong",{style:{display:"block",marginBottom:4},children:I.adminName}),T.jsx("p",{style:{margin:0,fontSize:13,color:"#555",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:I.message})]}),T.jsx("div",{style:{fontSize:12,color:"#888",marginLeft:8},children:new Date(I.time||I.createdAt||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},I.notificationId))]}),w>0&&T.jsxs("div",{children:[T.jsx("div",{className:"notification-section-title",style:{padding:"8px 10px",color:"#333",fontWeight:700,background:"#fafafa",borderRadius:6,margin:"8px 6px"},children:"Messages"}),Object.entries(b||{}).map(([I,z])=>T.jsxs("div",{className:"notification-row",onClick:async()=>{await x(I),v(A=>{const H={...A};return delete H[I],H}),j(!1),y("/all-chat",{state:{user:{userId:I,name:z.name,profileImage:z.profileImage,type:z.type}}})},style:{padding:10,display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:"1px solid #f0f0f0",transition:"background 120ms ease"},onMouseEnter:A=>A.currentTarget.style.background="#f6f8fa",onMouseLeave:A=>A.currentTarget.style.background="",children:[T.jsx("img",{src:z.profileImage||"/default-profile.png",alt:z.name,style:{width:46,height:46,borderRadius:8,objectFit:"cover"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("strong",{style:{display:"block",marginBottom:4},children:z.name}),T.jsxs("p",{style:{margin:0,fontSize:13,color:"#555",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:[z.count," new message",z.count>1&&"s"]})]})]},I))]})]})})]}),T.jsxs("div",{className:"icon-circle",style:{position:"relative",cursor:"pointer"},onClick:()=>y("/all-chat"),children:[T.jsx(vc,{}),w>0&&T.jsx("span",{className:"badge",children:w})]}),T.jsx(gr,{className:"icon-circle",to:"/settings",children:T.jsx(_c,{})}),T.jsx("img",{src:e.profileImage||"/default-profile.png",alt:"admin",className:"profile-img"})]})]}),T.jsxs("div",{className:"google-dashboard",style:{background:l?"#2c2c2c":"#f1f1f1"},children:[T.jsxs("div",{className:"google-sidebar",style:{background:l?"#1a1a1a":"#fff"},children:[T.jsxs("div",{className:"sidebar-profile",children:[T.jsx("div",{className:"sidebar-img-circle",children:T.jsx("img",{src:e.profileImage||"/default-profile.png",alt:"profile"})}),T.jsx("h3",{children:e.name}),T.jsx("p",{children:(e==null?void 0:e.adminId)||"username"})]}),T.jsxs("div",{className:"sidebar-menu",children:[T.jsxs(gr,{className:"sidebar-btn",to:"/dashboard",children:[T.jsx(xc,{style:{width:"28px",height:"28px"}})," Home"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/my-posts",children:[T.jsx(Ca,{})," My Posts"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/teachers",children:[T.jsx(Pn,{})," Teachers"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/students",children:[T.jsx(Pn,{})," Students"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/schedule",children:[T.jsx(sl,{})," Schedule"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/parents",children:[T.jsx(Pn,{})," Parents"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/registration-form",children:[T.jsx(Pn,{})," Registration Form"]}),T.jsxs("button",{className:"sidebar-btn logout-btn",onClick:()=>{localStorage.removeItem("admin"),window.location.href="/login"},children:[T.jsx(Sc,{})," Logout"]})]})]}),T.jsxs("div",{className:"main-content",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"50px",width:"100%",gap:"30px"},children:[T.jsx("h2",{children:"Settings"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"30px",borderRadius:"12px",background:l?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[T.jsx("img",{src:s,alt:"profile",style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",marginBottom:"15px",border:"3px solid #4b6cb7"}}),T.jsx("input",{type:"file",onChange:L}),T.jsx("button",{onClick:k,style:{marginTop:"15px",padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Update Profile Image"})]}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"30px",borderRadius:"12px",background:l?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[T.jsx("input",{type:"text",placeholder:"Name",value:a,onChange:I=>u(I.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),T.jsx("input",{type:"text",placeholder:"Username",value:d,onChange:I=>f(I.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),T.jsx("button",{onClick:R,style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Update Info"})]}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"30px",borderRadius:"12px",background:l?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[T.jsx("input",{type:"password",placeholder:"New Password",value:h,onChange:I=>m(I.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),T.jsx("input",{type:"password",placeholder:"Confirm Password",value:g,onChange:I=>p(I.target.value),style:{padding:"10px",borderRadius:"6px",border:"1px solid #ccc"}}),T.jsx("button",{onClick:C,style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"#4b6cb7",color:"#fff",cursor:"pointer"},children:"Change Password"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",padding:"20px",borderRadius:"12px",background:l?"#3a3a3a":"#fff",boxShadow:"0 4px 10px rgba(0,0,0,0.1)"},children:[T.jsx("label",{style:{fontSize:"18px",fontWeight:"500"},children:"Dark Mode"}),T.jsx("input",{type:"checkbox",checked:l,onChange:c})]})]})]})]})}function UW(){var O;const r=bc(),e=Bs(),n=(JSON.parse(localStorage.getItem("admin"))||{}).userId,i=(G,Z)=>[G,Z].sort().join("_"),s=(G,Z)=>`${G}_${Z}`,o=(G,Z)=>`${Z}_${G}`,l=async G=>{var oe,re,be,ie;if(!n||!G)return i(n,G);const Z=i(n,G),ue=s(n,G),te=o(n,G);try{const[le,ae,Se]=await Promise.all([Ps(dn(Mn,`Chats/${Z}`)).catch(()=>null),Ps(dn(Mn,`Chats/${ue}`)).catch(()=>null),Ps(dn(Mn,`Chats/${te}`)).catch(()=>null)]),ve=[{key:Z,snap:le},{key:ue,snap:ae},{key:te,snap:Se}].filter(ze=>ze.snap&&ze.snap.exists());if(!ve.length)return Z;let ke=ve[0],Ne=Number(((re=(oe=ke.snap.val())==null?void 0:oe.lastMessage)==null?void 0:re.timeStamp)||0);for(const ze of ve.slice(1)){const we=Number(((ie=(be=ze.snap.val())==null?void 0:be.lastMessage)==null?void 0:ie.timeStamp)||0);we>Ne&&(ke=ze,Ne=we)}return ke.key}catch{return Z}},c=async(G,Z)=>{if(!(!G||!n||!Z))try{const ue=await Ps(dn(Mn,`Chats/${G}/unread`)).catch(()=>null),te=ue!=null&&ue.exists()?ue.val()||{}:{};Number((te==null?void 0:te[n])||0)!==0&&await Il(dn(Mn,`Chats/${G}`),{unread:{...te,[n]:0}}).catch(()=>{});const oe=await Ps(dn(Mn,`Chats/${G}/messages`)).catch(()=>null);if(!(oe!=null&&oe.exists()))return;const re={};Object.entries(oe.val()||{}).forEach(([be,ie])=>{String(ie==null?void 0:ie.receiverId)===String(n)&&(ie==null?void 0:ie.seen)===!1&&(re[`Chats/${G}/messages/${be}/seen`]=!0)}),Object.keys(re).length&&(await Il(dn(Mn),re).catch(()=>{}),await Il(dn(Mn,`Chats/${G}/lastMessage`),{seen:!0}).catch(()=>{}))}catch{}},{userId:a,userType:u,name:d,profileImage:f}=r.state||{},h=((O=r.state)==null?void 0:O.user)||null,[m,g]=me.useState([]),[p,y]=me.useState([]),[b,v]=me.useState([]),[E,M]=me.useState("teacher"),[W,$]=me.useState(h),[N,j]=me.useState([]),[F,P]=me.useState(""),[L,k]=me.useState(null),[R,C]=me.useState(null),[_,x]=me.useState(!1),[w,S]=me.useState(null),[I,z]=me.useState(""),A=me.useRef(null),H=me.useRef(null);me.useEffect(()=>{(async()=>{try{const[Z,ue,te,oe,re]=await Promise.all([fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json").then(Se=>Se.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Students.json").then(Se=>Se.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Parents.json").then(Se=>Se.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json").then(Se=>Se.json()),fetch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats.json").then(Se=>Se.json())]),be=oe||{},ie=re||{},le=Se=>{const ve=i(n,Se),ke=s(n,Se),Ne=o(n,Se),ze=[{key:ve,rec:ie==null?void 0:ie[ve]},{key:ke,rec:ie==null?void 0:ie[ke]},{key:Ne,rec:ie==null?void 0:ie[Ne]}].filter(we=>we.rec);return ze.length?ze.reduce((we,De)=>{var et,St,lt,At;const He=Number(((St=(et=we==null?void 0:we.rec)==null?void 0:et.lastMessage)==null?void 0:St.timeStamp)||0);return Number(((At=(lt=De==null?void 0:De.rec)==null?void 0:lt.lastMessage)==null?void 0:At.timeStamp)||0)>He?De:we},ze[0]):{key:ve,rec:null}},ae=Se=>Object.keys(Se||{}).map(ve=>{var He,We,et,St;const ke=(He=Se[ve])==null?void 0:He.userId,Ne=(be==null?void 0:be[ke])||{},ze=le(ke),we=((et=(We=ze==null?void 0:ze.rec)==null?void 0:We.unread)==null?void 0:et[n])||0,De=((St=ze==null?void 0:ze.rec)==null?void 0:St.lastMessage)||null;return{id:ve,userId:ke,name:Ne.name||"No Name",profileImage:Ne.profileImage||"/default-profile.png",lastMsgTime:(De==null?void 0:De.timeStamp)||0,lastMsgText:(De==null?void 0:De.text)||"",lastSeen:Ne.lastSeen||null,unread:we,chatKey:(ze==null?void 0:ze.key)||i(n,ke)}}).sort((ve,ke)=>ke.lastMsgTime-ve.lastMsgTime);g(ae(Z)),y(ae(ue)),v(ae(te))}catch(Z){console.error("Error fetching users:",Z)}})()},[n]),me.useEffect(()=>{if(!W){const G=m[0]||p[0]||b[0]||null;$(G)}},[m,p,b]),me.useEffect(()=>{if(!W||!n)return;const G=Ih();let Z=()=>{},ue=()=>{},te=()=>{},oe=!0;return(async()=>{const re=await l(W.userId);if(!oe)return;const be=dn(G,`Chats/${re}/messages`),ie=dn(G,`Chats/${re}/typing`),le=dn(G,`Users/${W.userId}/lastSeen`);Z=el(be,ae=>{const Se=ae.val(),ve=Se?Object.entries(Se).map(([ke,Ne])=>({...Ne,id:ke,sender:Ne.senderId===n?"admin":"user"})):[];j(ve.sort((ke,Ne)=>ke.timeStamp-Ne.timeStamp))}),ue=el(ie,ae=>{const Se=ae.val();x(W.userId===(Se==null?void 0:Se.userId))}),te=el(le,ae=>{S(ae.val())}),await c(re,W.userId)})(),()=>{oe=!1;try{Z()}catch{}try{ue()}catch{}try{te()}catch{}}},[W==null?void 0:W.userId,n]);const K=async()=>{var oe;if(!F.trim()||!W)return;const G=await l(W.userId),Z=dn(Mn,`Chats/${G}/messages`),ue=dn(Mn,`Chats/${G}`),te={senderId:n,receiverId:W.userId,type:"text",text:F,imageUrl:null,replyTo:null,seen:!1,edited:!1,deleted:!1,timeStamp:Date.now()};if(L){await Il(dn(Mn,`Chats/${G}/messages/${L}`),{text:F,edited:!0});try{const re=await Ps(dn(Mn,`Chats/${G}/lastMessage`));re.exists()&&((oe=re.val())==null?void 0:oe.messageId)===L&&await Il(dn(Mn,`Chats/${G}/lastMessage`),{text:F,edited:!0})}catch{}k(null)}else{const re=Gy(Z);await eh(re,te);const be=await Ps(dn(Mn,`Chats/${G}/unread`)).catch(()=>null),ie=be!=null&&be.exists()?be.val()||{}:{},le=Number((ie==null?void 0:ie[W.userId])||0);await Il(ue,{lastMessage:{...te,messageId:re.key},participants:{[n]:!0,[W.userId]:!0},unread:{...ie,[n]:0,[W.userId]:le+1}})}P("")},J=async G=>{if(!W)return;const Z=await l(W.userId),ue=dn(Mn,`Chats/${Z}/messages/${G}`);await Il(ue,{deleted:!0});const te=await Ps(dn(Mn,`Chats/${Z}/lastMessage`));if(te.exists()&&te.val().messageId===G){const oe=await Ps(dn(Mn,`Chats/${Z}/messages`)),be=(oe.exists()?Object.entries(oe.val()).map(([ie,le])=>({...le,id:ie})):[]).filter(ie=>!ie.deleted).sort((ie,le)=>le.timeStamp-ie.timeStamp)[0]||null;await Il(dn(Mn,`Chats/${Z}`),{lastMessage:be?{...be,messageId:be.id}:null})}},V=async G=>{if(P(G.target.value),!W)return;const Z=await l(W.userId),ue=dn(Mn,`Chats/${Z}/typing`);await eh(ue,{userId:n}),H.current&&clearTimeout(H.current),H.current=setTimeout(async()=>{await eh(ue,{userId:null})},2e3)};me.useEffect(()=>{var G;(G=A.current)==null||G.scrollIntoView({behavior:"smooth"})},[N,_]);const X=G=>G?new Date(Number(G)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",D=G=>G.filter(Z=>Z.name.toLowerCase().includes(I.toLowerCase())).map(Z=>{var ue;return T.jsxs("div",{onClick:()=>$(Z),style:{display:"flex",alignItems:"center",gap:10,padding:10,borderRadius:8,background:(W==null?void 0:W.userId)===Z.userId?"#d0e6ff":"#fff",cursor:"pointer",marginBottom:8,position:"relative",transition:"0.2s all"},children:[Z.unread>0&&T.jsx("span",{style:{marginRight:7,minWidth:22,height:22,background:"#f44336",color:"#fff",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:13,boxShadow:"0 1px 8px rgba(255,0,0,0.11)"},children:Z.unread>99?"99+":Z.unread}),T.jsx("img",{src:Z.profileImage,alt:Z.name,style:{width:40,height:40,borderRadius:"50%"}}),T.jsxs("div",{style:{flex:1},children:[T.jsx("div",{style:{fontWeight:500},children:Z.name}),T.jsxs("div",{style:{fontSize:12,color:"#888"},children:[(ue=Z.lastMsgText)==null?void 0:ue.slice(0,30),"..."]})]}),T.jsx("span",{style:{minWidth:10,height:10,borderRadius:"50%",background:Z.lastSeen&&Date.now()-Z.lastSeen<6e4?"green":"gray"}})]},Z.userId)});return T.jsxs("div",{style:{display:"flex",height:"100vh",background:"#e5ddd5"},children:[T.jsxs("div",{style:{width:300,background:"#fff",borderRight:"1px solid #ddd",overflowY:"auto",padding:15},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:15},children:[T.jsx("button",{onClick:()=>e(-1),style:{background:"#0084ff",color:"#fff",border:"none",padding:"6px 10px",borderRadius:6,cursor:"pointer",marginRight:10},children:T.jsx(kR,{})}),T.jsx("input",{type:"text",placeholder:"Search...",value:I,onChange:G=>z(G.target.value),style:{flex:1,padding:8,borderRadius:20,border:"1px solid #ccc",outline:"none"}})]}),T.jsx("div",{style:{display:"flex",marginBottom:15,gap:5},children:["teacher","student","parent"].map(G=>T.jsx("button",{onClick:()=>M(G),style:{flex:1,padding:8,borderRadius:20,border:"none",cursor:"pointer",background:E===G?"#0084ff":"#f0f0f0",color:E===G?"#fff":"#000"},children:G.charAt(0).toUpperCase()+G.slice(1)},G))}),E==="teacher"&&D(m),E==="student"&&D(p),E==="parent"&&D(b)]}),T.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:15},children:W?T.jsxs(T.Fragment,{children:[T.jsxs("div",{style:{padding:10,borderBottom:"1px solid #ddd",display:"flex",alignItems:"center",gap:10,background:"#f0f2f5",borderRadius:10,marginBottom:10},children:[T.jsx("img",{src:W.profileImage,alt:W.name,style:{width:40,height:40,borderRadius:"50%"}}),T.jsxs("div",{children:[T.jsx("strong",{children:W.name}),T.jsx("div",{style:{fontSize:12,color:"#666"},children:_?"Typing...":w?`Last seen: ${new Date(w).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:""})]})]}),T.jsxs("div",{style:{flex:1,overflowY:"auto",padding:15,display:"flex",flexDirection:"column",gap:10,background:"#e5ddd5",borderRadius:10},children:[N.length===0?T.jsxs("p",{style:{color:"#888",textAlign:"center",marginTop:20},children:["Start chatting with ",W.name,"..."]}):N.map(G=>{const Z=G.sender==="admin",ue=R===G.id;return G.deleted?null:T.jsxs("div",{onClick:()=>C(G.id),style:{display:"flex",flexDirection:"column",alignItems:Z?"flex-end":"flex-start",marginBottom:12},children:[T.jsxs("div",{style:{background:Z?"#0084ff":"#e4e6eb",color:Z?"#fff":"#000",padding:"8px 12px",borderRadius:16,borderTopRightRadius:Z?0:16,borderTopLeftRadius:Z?16:0,maxWidth:"45%",wordBreak:"break-word",display:"flex",flexDirection:"column"},children:[T.jsx("div",{children:G.text}),G.edited&&T.jsx("div",{style:{fontSize:10,opacity:.6,marginTop:2},children:"edited"}),T.jsxs("div",{style:{fontSize:10,opacity:.7,display:"flex",justifyContent:"flex-end",gap:6,marginTop:4},children:[T.jsx("span",{children:X(G.timeStamp)}),Z&&T.jsx("span",{children:G.seen?"":""})]})]}),ue&&Z&&T.jsxs("div",{style:{display:"flex",gap:4,marginTop:4},children:[T.jsx("button",{onClick:()=>{P(G.text),k(G.id)},style:{fontSize:12},children:"Edit"}),T.jsx("button",{onClick:()=>J(G.id),style:{fontSize:12,color:"red"},children:"Delete"})]})]},G.id)}),T.jsx("div",{ref:A})]}),T.jsxs("div",{style:{display:"flex",gap:8,paddingTop:10,borderTop:"1px solid #ddd"},children:[T.jsx("input",{value:F,onChange:V,onKeyDown:G=>G.key==="Enter"&&K(),placeholder:"Type a message...",style:{flex:1,padding:"12px 16px",borderRadius:30,border:"1px solid #ccc",outline:"none",background:"#fff"}}),T.jsx("button",{onClick:K,style:{background:"#0084ff",border:"none",color:"#fff",borderRadius:"50%",width:45,height:45,display:"flex",justifyContent:"center",alignItems:"center"},children:T.jsx(gg,{})})]})]}):T.jsx("p",{style:{color:"#555",textAlign:"center",marginTop:"50%"},children:"Select a user to start chatting..."})})]})}function VW(){const r=bc(),e=Bs(),{studentId:t}=r.state||{},[n,i]=me.useState([]),[s,o]=me.useState(null),[l,c]=me.useState([]),[a,u]=me.useState(""),d=JSON.parse(localStorage.getItem("admin"))||{};me.useEffect(()=>{(async()=>{try{const m=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Students.json"),g=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json"),p=m.data||{},y=g.data||{},b=Object.keys(p).map(v=>{const E=p[v],M=y[E.userId]||{};return{studentId:v,name:M.name||M.username||"No Name",profileImage:M.profileImage||"/default-profile.png"}});if(i(b),t){const v=b.find(E=>E.studentId===t);v&&o(v)}}catch(m){console.error("Error fetching students:",m)}})()},[t]),me.useEffect(()=>{(async()=>{if(s)try{const g=(await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/StudentMessages.json")).data||{},p=Object.values(g).filter(y=>y.studentId===s.studentId&&y.adminId===d.adminId||y.studentId===d.adminId&&y.adminId===s.studentId);c(p)}catch(m){console.error("Error fetching messages:",m)}})()},[s,d.adminId]);const f=async()=>{if(!a.trim()||!s)return;const h={studentId:s.studentId,adminId:d.adminId,content:a,timestamp:new Date().toISOString()};try{await qe.post("https://ethiostore-17d9f-default-rtdb.firebaseio.com/StudentMessages.json",h),c(m=>[...m,h]),u("")}catch(m){console.error("Error sending message:",m)}};return T.jsxs("div",{style:{display:"flex",height:"100vh",background:"#f1f4f8"},children:[T.jsxs("div",{style:{width:"280px",background:"#fff",borderRight:"1px solid #ddd",overflowY:"auto"},children:[T.jsxs("div",{style:{padding:"15px",borderBottom:"1px solid #ddd",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("strong",{children:"Students"}),T.jsx("button",{onClick:()=>e("/students"),style:{cursor:"pointer",fontSize:"16px",background:"none",border:"none"},children:" Back"})]}),n.map(h=>T.jsxs("div",{onClick:()=>o(h),style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px",cursor:"pointer",background:(s==null?void 0:s.studentId)===h.studentId?"#e0e7ff":"#fff",borderBottom:"1px solid #eee"},children:[T.jsx("img",{src:h.profileImage,alt:h.name,style:{width:"40px",height:"40px",borderRadius:"50%"}}),T.jsx("span",{children:h.name})]},h.studentId))]}),T.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:s?T.jsxs(T.Fragment,{children:[T.jsxs("div",{style:{padding:"15px",borderBottom:"1px solid #ddd",display:"flex",alignItems:"center",gap:"15px"},children:[T.jsx("img",{src:s.profileImage,alt:s.name,style:{width:"50px",height:"50px",borderRadius:"50%"}}),T.jsx("strong",{children:s.name})]}),T.jsx("div",{style:{flex:1,padding:"15px",overflowY:"auto"},children:l.map((h,m)=>T.jsx("div",{style:{marginBottom:"10px",display:"flex",justifyContent:h.adminId===d.adminId?"flex-end":"flex-start"},children:T.jsx("div",{style:{background:h.adminId===d.adminId?"#4b6cb7":"#e0e7ff",color:h.adminId===d.adminId?"#fff":"#000",padding:"10px 15px",borderRadius:"12px",maxWidth:"70%"},children:h.content})},m))}),T.jsxs("div",{style:{display:"flex",padding:"15px",gap:"10px",borderTop:"1px solid #ddd"},children:[T.jsx("input",{type:"text",value:a,onChange:h=>u(h.target.value),placeholder:"Type a message...",style:{flex:1,padding:"10px",borderRadius:"8px",border:"1px solid #ccc"}}),T.jsx("button",{onClick:f,style:{background:"#4b6cb7",color:"#fff",padding:"10px 15px",borderRadius:"8px",border:"none",cursor:"pointer"},children:"Send"})]})]}):T.jsx("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",color:"#555"},children:"Select a student to start chatting"})})]})}function hm(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wC={exports:{}};/*! ExcelJS 19-10-2023 */(function(r,e){(function(t){r.exports=t()})(function(){return function t(n,i,s){function o(a,u){if(!i[a]){if(!n[a]){var d=typeof hm=="function"&&hm;if(!u&&d)return d(a,!0);if(l)return l(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var h=i[a]={exports:{}};n[a][0].call(h.exports,function(m){return o(n[a][1][m]||m)},h,h.exports,t,n,i,s)}return i[a].exports}for(var l=typeof hm=="function"&&hm,c=0;c<s.length;c++)o(s[c]);return o}({1:[function(t,n,i){const s=t("fs"),o=t("fast-csv"),l=t("dayjs/plugin/customParseFormat"),c=t("dayjs/plugin/utc"),a=t("dayjs").extend(l).extend(c),u=t("../utils/stream-buf"),{fs:{exists:d}}=t("../utils/utils"),f={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};n.exports=class{constructor(h){this.workbook=h,this.worksheet=null}async readFile(h,m){if(m=m||{},!await d(h))throw new Error("File not found: "+h);const g=s.createReadStream(h),p=await this.read(g,m);return g.close(),p}read(h,m){return m=m||{},new Promise((g,p)=>{const y=this.workbook.addWorksheet(m.sheetName),b=m.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],v=m.map||function(M){if(M==="")return null;const W=Number(M);if(!Number.isNaN(W)&&W!==1/0)return W;const $=b.reduce((j,F)=>{if(j)return j;const P=a(M,F,!0);return P.isValid()?P:null},null);if($)return new Date($.valueOf());const N=f[M];return N!==void 0?N:M},E=o.parse(m.parserOptions).on("data",M=>{y.addRow(M.map(v))}).on("end",()=>{E.emit("worksheet",y)});E.on("worksheet",g).on("error",p),h.pipe(E)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(h,m){return new Promise((g,p)=>{m=m||{};const y=this.workbook.getWorksheet(m.sheetName||m.sheetId),b=o.format(m.formatterOptions);h.on("finish",()=>{g()}),b.on("error",p),b.pipe(h);const{dateFormat:v,dateUTC:E}=m,M=m.map||(N=>{if(N){if(N.text||N.hyperlink)return N.hyperlink||N.text||"";if(N.formula||N.result)return N.result||"";if(N instanceof Date)return v?E?a.utc(N).format(v):a(N).format(v):E?a.utc(N).format():a(N).format();if(N.error)return N.error;if(typeof N=="object")return JSON.stringify(N)}return N}),W=m.includeEmptyRows===void 0||m.includeEmptyRows;let $=1;y&&y.eachRow((N,j)=>{if(W)for(;$++<j-1;)b.write([]);const{values:F}=N;F.shift(),b.write(F.map(M)),$=j}),b.end()})}writeFile(h,m){const g={encoding:(m=m||{}).encoding||"utf8"},p=s.createWriteStream(h,g);return this.write(p,m)}async writeBuffer(h){const m=new u;return await this.write(m,h),m.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(t,n,i){const s=t("../utils/col-cache");class o{constructor(c,a){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=c,a)if(typeof a=="string"){const d=s.decodeAddress(a);this.nativeCol=d.col+u,this.nativeColOff=0,this.nativeRow=d.row+u,this.nativeRowOff=0}else a.nativeCol!==void 0?(this.nativeCol=a.nativeCol||0,this.nativeColOff=a.nativeColOff||0,this.nativeRow=a.nativeRow||0,this.nativeRowOff=a.nativeRowOff||0):a.col!==void 0?(this.col=a.col+u,this.row=a.row+u):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(c){return c instanceof o||c==null?c:new o(c)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(c){this.nativeCol=Math.floor(c),this.nativeColOff=Math.floor((c-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(c){this.nativeRow=Math.floor(c),this.nativeRowOff=Math.floor((c-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(c){this.nativeCol=c.nativeCol,this.nativeColOff=c.nativeColOff,this.nativeRow=c.nativeRow,this.nativeRowOff=c.nativeRowOff}}n.exports=o},{"../utils/col-cache":19}],3:[function(t,n,i){const s=t("../utils/col-cache"),o=t("../utils/under-dash"),l=t("./enums"),{slideFormula:c}=t("../utils/shared-formula"),a=t("./note");class u{constructor(h,m,g){if(!h||!m)throw new Error("A Cell needs a Row");this._row=h,this._column=m,s.validateAddress(g),this._address=g,this._value=d.create(u.Types.Null,this),this.style=this._mergeStyle(h.style,m.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(h){this.style.numFmt=h}get font(){return this.style.font}set font(h){this.style.font=h}get alignment(){return this.style.alignment}set alignment(h){this.style.alignment=h}get border(){return this.style.border}set border(h){this.style.border=h}get fill(){return this.style.fill}set fill(h){this.style.fill=h}get protection(){return this.style.protection}set protection(h){this.style.protection=h}_mergeStyle(h,m,g){const p=h&&h.numFmt||m&&m.numFmt;p&&(g.numFmt=p);const y=h&&h.font||m&&m.font;y&&(g.font=y);const b=h&&h.alignment||m&&m.alignment;b&&(g.alignment=b);const v=h&&h.border||m&&m.border;v&&(g.border=v);const E=h&&h.fill||m&&m.fill;E&&(g.fill=E);const M=h&&h.protection||m&&m.protection;return M&&(g.protection=M),g}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===u.Types.Merge}merge(h,m){this._value.release(),this._value=d.create(u.Types.Merge,this,h),m||(this.style=h.style)}unmerge(){this.type===u.Types.Merge&&(this._value.release(),this._value=d.create(u.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(h){return this._value.type===u.Types.Merge&&this._value.isMergedTo(h)}get master(){return this.type===u.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===u.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(h){this.type!==u.Types.Merge?(this._value.release(),this._value=d.create(d.getType(h),this,h)):this._value.master.value=h}get note(){return this._comment&&this._comment.note}set note(h){this._comment=new a(h)}get text(){return this._value.toString()}get html(){return o.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(h){this.type===u.Types.String&&(this._value=d.create(u.Types.Hyperlink,this,{text:this._value.value,hyperlink:h}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){const{worksheet:h}=this._row;return{sheetName:h.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(h){this.names=[h]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(h){const{definedNames:m}=this.workbook;m.removeAllNames(this.fullAddress),h.forEach(g=>{m.addEx(this.fullAddress,g)})}addName(h){this.workbook.definedNames.addEx(this.fullAddress,h)}removeName(h){this.workbook.definedNames.removeEx(this.fullAddress,h)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(h){this._dataValidations.add(this.address,h)}get model(){const{model:h}=this._value;return h.style=this.style,this._comment&&(h.comment=this._comment.model),h}set model(h){if(this._value.release(),this._value=d.create(h.type,this),this._value.model=h,h.comment)switch(h.comment.type){case"note":this._comment=a.fromModel(h.comment)}h.style?this.style=h.style:this.style={}}}u.Types=l.ValueType;const d={getType:f=>f==null?u.Types.Null:f instanceof String||typeof f=="string"?u.Types.String:typeof f=="number"?u.Types.Number:typeof f=="boolean"?u.Types.Boolean:f instanceof Date?u.Types.Date:f.text&&f.hyperlink?u.Types.Hyperlink:f.formula||f.sharedFormula?u.Types.Formula:f.richText?u.Types.RichText:f.sharedString?u.Types.SharedString:f.error?u.Types.Error:u.Types.JSON,types:[{t:u.Types.Null,f:class{constructor(f){this.model={address:f.address,type:u.Types.Null}}get value(){return null}set value(f){}get type(){return u.Types.Null}get effectiveType(){return u.Types.Null}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return""}release(){}toString(){return""}}},{t:u.Types.Number,f:class{constructor(f,h){this.model={address:f.address,type:u.Types.Number,value:h}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return u.Types.Number}get effectiveType(){return u.Types.Number}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.String,f:class{constructor(f,h){this.model={address:f.address,type:u.Types.String,value:h}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return u.Types.String}get effectiveType(){return u.Types.String}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:u.Types.Date,f:class{constructor(f,h){this.model={address:f.address,type:u.Types.Date,value:h}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return u.Types.Date}get effectiveType(){return u.Types.Date}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.Hyperlink,f:class{constructor(f,h){this.model={address:f.address,type:u.Types.Hyperlink,text:h?h.text:void 0,hyperlink:h?h.hyperlink:void 0},h&&h.tooltip&&(this.model.tooltip=h.tooltip)}get value(){const f={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(f.tooltip=this.model.tooltip),f}set value(f){this.model={text:f.text,hyperlink:f.hyperlink},f.tooltip&&(this.model.tooltip=f.tooltip)}get text(){return this.model.text}set text(f){this.model.text=f}get hyperlink(){return this.model.hyperlink}set hyperlink(f){this.model.hyperlink=f}get type(){return u.Types.Hyperlink}get effectiveType(){return u.Types.Hyperlink}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:u.Types.Formula,f:class{constructor(f,h){this.cell=f,this.model={address:f.address,type:u.Types.Formula,shareType:h?h.shareType:void 0,ref:h?h.ref:void 0,formula:h?h.formula:void 0,sharedFormula:h?h.sharedFormula:void 0,result:h?h.result:void 0}}_copyModel(f){const h={},m=g=>{const p=f[g];p&&(h[g]=p)};return m("formula"),m("result"),m("ref"),m("shareType"),m("sharedFormula"),h}get value(){return this._copyModel(this.model)}set value(f){this.model=this._copyModel(f)}validate(f){switch(d.getType(f)){case u.Types.Null:case u.Types.String:case u.Types.Number:case u.Types.Date:break;case u.Types.Hyperlink:case u.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(f){this.model.formula=f}get formulaType(){return this.model.formula?l.FormulaType.Master:this.model.sharedFormula?l.FormulaType.Shared:l.FormulaType.None}get result(){return this.model.result}set result(f){this.model.result=f}get type(){return u.Types.Formula}get effectiveType(){const f=this.model.result;return f==null?l.ValueType.Null:f instanceof String||typeof f=="string"?l.ValueType.String:typeof f=="number"?l.ValueType.Number:f instanceof Date?l.ValueType.Date:f.text&&f.hyperlink?l.ValueType.Hyperlink:f.formula?l.ValueType.Formula:l.ValueType.Null}get address(){return this.model.address}set address(f){this.model.address=f}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){const{worksheet:f}=this.cell,h=f.findCell(this.model.sharedFormula);this._translatedFormula=h&&c(h.formula,h.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:u.Types.Merge,f:class{constructor(f,h){this.model={address:f.address,type:u.Types.Merge,master:h?h.address:void 0},this._master=h,h&&h.addMergeRef()}get value(){return this._master.value}set value(f){f instanceof u?(this._master&&this._master.releaseMergeRef(),f.addMergeRef(),this._master=f):this._master.value=f}isMergedTo(f){return f===this._master}get master(){return this._master}get type(){return u.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:u.Types.JSON,f:class{constructor(f,h){this.model={address:f.address,type:u.Types.String,value:JSON.stringify(h),rawValue:h}}get value(){return this.model.rawValue}set value(f){this.model.rawValue=f,this.model.value=JSON.stringify(f)}get type(){return u.Types.String}get effectiveType(){return u.Types.String}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:u.Types.SharedString,f:class{constructor(f,h){this.model={address:f.address,type:u.Types.SharedString,value:h}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return u.Types.SharedString}get effectiveType(){return u.Types.SharedString}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.RichText,f:class{constructor(f,h){this.model={address:f.address,type:u.Types.String,value:h}}get value(){return this.model.value}set value(f){this.model.value=f}toString(){return this.model.value.richText.map(f=>f.text).join("")}get type(){return u.Types.RichText}get effectiveType(){return u.Types.RichText}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:u.Types.Boolean,f:class{constructor(f,h){this.model={address:f.address,type:u.Types.Boolean,value:h}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return u.Types.Boolean}get effectiveType(){return u.Types.Boolean}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:u.Types.Error,f:class{constructor(f,h){this.model={address:f.address,type:u.Types.Error,value:h}}get value(){return this.model.value}set value(f){this.model.value=f}get type(){return u.Types.Error}get effectiveType(){return u.Types.Error}get address(){return this.model.address}set address(f){this.model.address=f}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((f,h)=>(f[h.t]=h.f,f),[]),create(f,h,m){const g=this.types[f];if(!g)throw new Error("Could not create Value of type "+f);return new g(h,m)}};n.exports=u},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(t,n,i){const s=t("../utils/under-dash"),o=t("./enums"),l=t("../utils/col-cache");class c{constructor(u,d,f){this._worksheet=u,this._number=d,f!==!1&&(this.defn=f)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return l.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(u){u?(this.key=u.key,this.width=u.width!==void 0?u.width:9,this.outlineLevel=u.outlineLevel,u.style?this.style=u.style:this.style={},this.header=u.header,this._hidden=!!u.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(u){u!==void 0?(this._header=u,this.headers.forEach((d,f)=>{this._worksheet.getCell(f+1,this.number).value=d})):this._header=void 0}get key(){return this._key}set key(u){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=u,u&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(u){this._hidden=u}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(u){this._outlineLevel=u}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(u){return this.width===u.width&&this.hidden===u.hidden&&this.outlineLevel===u.outlineLevel&&s.isEqual(this.style,u.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;const u=this.style;return!u||!(u.font||u.numFmt||u.alignment||u.border||u.fill||u.protection)}get headerCount(){return this.headers.length}eachCell(u,d){const f=this.number;d||(d=u,u=null),this._worksheet.eachRow(u,(h,m)=>{d(h.getCell(f),m)})}get values(){const u=[];return this.eachCell((d,f)=>{d&&d.type!==o.ValueType.Null&&(u[f]=d.value)}),u}set values(u){if(!u)return;const d=this.number;let f=0;u.hasOwnProperty("0")&&(f=1),u.forEach((h,m)=>{this._worksheet.getCell(m+f,d).value=h})}_applyStyle(u,d){return this.style[u]=d,this.eachCell(f=>{f[u]=d}),d}get numFmt(){return this.style.numFmt}set numFmt(u){this._applyStyle("numFmt",u)}get font(){return this.style.font}set font(u){this._applyStyle("font",u)}get alignment(){return this.style.alignment}set alignment(u){this._applyStyle("alignment",u)}get protection(){return this.style.protection}set protection(u){this._applyStyle("protection",u)}get border(){return this.style.border}set border(u){this._applyStyle("border",u)}get fill(){return this.style.fill}set fill(u){this._applyStyle("fill",u)}static toModel(u){const d=[];let f=null;return u&&u.forEach((h,m)=>{h.isDefault?f&&(f=null):f&&h.equivalentTo(f)?f.max=m+1:(f={min:m+1,max:m+1,width:h.width!==void 0?h.width:9,style:h.style,isCustomWidth:h.isCustomWidth,hidden:h.hidden,outlineLevel:h.outlineLevel,collapsed:h.collapsed},d.push(f))}),d.length?d:void 0}static fromModel(u,d){const f=[];let h=1,m=0;for(d=(d=d||[]).sort(function(g,p){return g.min-p.min});m<d.length;){const g=d[m++];for(;h<g.min;)f.push(new c(u,h++));for(;h<=g.max;)f.push(new c(u,h++,g))}return f.length?f:null}}n.exports=c},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(t,n,i){n.exports=class{constructor(s){this.model=s||{}}add(s,o){return this.model[s]=o}find(s){return this.model[s]}remove(s){this.model[s]=void 0}}},{}],6:[function(t,n,i){const s=t("../utils/under-dash"),o=t("../utils/col-cache"),l=t("../utils/cell-matrix"),c=t("./range"),a=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;n.exports=class{constructor(){this.matrixMap={}}getMatrix(u){return this.matrixMap[u]||(this.matrixMap[u]=new l)}add(u,d){const f=o.decodeEx(u);this.addEx(f,d)}addEx(u,d){const f=this.getMatrix(d);if(u.top)for(let h=u.left;h<=u.right;h++)for(let m=u.top;m<=u.bottom;m++){const g={sheetName:u.sheetName,address:o.n2l(h)+m,row:m,col:h};f.addCellEx(g)}else f.addCellEx(u)}remove(u,d){const f=o.decodeEx(u);this.removeEx(f,d)}removeEx(u,d){this.getMatrix(d).removeCellEx(u)}removeAllNames(u){s.each(this.matrixMap,d=>{d.removeCellEx(u)})}forEach(u){s.each(this.matrixMap,(d,f)=>{d.forEach(h=>{u(f,h)})})}getNames(u){return this.getNamesEx(o.decodeEx(u))}getNamesEx(u){return s.map(this.matrixMap,(d,f)=>d.findCellEx(u)&&f).filter(Boolean)}_explore(u,d){d.mark=!1;const{sheetName:f}=d,h=new c(d.row,d.col,d.row,d.col,f);let m,g;function p(b,v){const E=u.findCellAt(f,b,d.col);return!(!E||!E.mark)&&(h[v]=b,E.mark=!1,!0)}for(g=d.row-1;p(g,"top");g--);for(g=d.row+1;p(g,"bottom");g++);function y(b,v){const E=[];for(g=h.top;g<=h.bottom;g++){const M=u.findCellAt(f,g,b);if(!M||!M.mark)return!1;E.push(M)}h[v]=b;for(let M=0;M<E.length;M++)E[M].mark=!1;return!0}for(m=d.col-1;y(m,"left");m--);for(m=d.col+1;y(m,"right");m++);return h}getRanges(u,d){return(d=d||this.matrixMap[u])?(d.forEach(f=>{f.mark=!0}),{name:u,ranges:d.map(f=>f.mark&&this._explore(d,f)).filter(Boolean).map(f=>f.$shortRange)}):{name:u,ranges:[]}}normaliseMatrix(u,d){u.forEachInSheet(d,(f,h,m)=>{f&&(f.row===h&&f.col===m||(f.row=h,f.col=m,f.address=o.n2l(m)+h))})}spliceRows(u,d,f,h){s.each(this.matrixMap,m=>{m.spliceRows(u,d,f,h),this.normaliseMatrix(m,u)})}spliceColumns(u,d,f,h){s.each(this.matrixMap,m=>{m.spliceColumns(u,d,f,h),this.normaliseMatrix(m,u)})}get model(){return s.map(this.matrixMap,(u,d)=>this.getRanges(d,u)).filter(u=>u.ranges.length)}set model(u){const d=this.matrixMap={};u.forEach(f=>{const h=d[f.name]=new l;f.ranges.forEach(m=>{a.test(m.split("!").pop()||"")&&h.addCell(m)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(t,n,i){n.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(t,n,i){const s=t("../utils/col-cache"),o=t("./anchor");n.exports=class{constructor(l,c){this.worksheet=l,this.model=c}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(l){let{type:c,imageId:a,range:u,hyperlinks:d}=l;if(this.type=c,this.imageId=a,c==="image")if(typeof u=="string"){const f=s.decode(u);this.range={tl:new o(this.worksheet,{col:f.left,row:f.top},-1),br:new o(this.worksheet,{col:f.right,row:f.bottom},0),editAs:"oneCell"}}else this.range={tl:new o(this.worksheet,u.tl,0),br:u.br&&new o(this.worksheet,u.br,0),ext:u.ext,editAs:u.editAs,hyperlinks:d||u.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(t,n,i){const s=t("../utils/under-dash");class o{constructor(c){this.note=c}get model(){let c=null;switch(typeof this.note){case"string":c={type:"note",note:{texts:[{text:this.note}]}};break;default:c={type:"note",note:this.note}}return s.deepMerge({},o.DEFAULT_CONFIGS,c)}set model(c){const{note:a}=c,{texts:u}=a;u.length===1&&Object.keys(u[0]).length===1?this.note=u[0].text:this.note=a}static fromModel(c){const a=new o;return a.model=c,a}}o.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},n.exports=o},{"../utils/under-dash":26}],10:[function(t,n,i){const s=t("../utils/col-cache");class o{constructor(){this.decode(arguments)}setTLBR(c,a,u,d,f){if(arguments.length<4){const h=s.decodeAddress(c),m=s.decodeAddress(a);this.model={top:Math.min(h.row,m.row),left:Math.min(h.col,m.col),bottom:Math.max(h.row,m.row),right:Math.max(h.col,m.col),sheetName:u},this.setTLBR(h.row,h.col,m.row,m.col,f)}else this.model={top:Math.min(c,u),left:Math.min(a,d),bottom:Math.max(c,u),right:Math.max(a,d),sheetName:f}}decode(c){switch(c.length){case 5:this.setTLBR(c[0],c[1],c[2],c[3],c[4]);break;case 4:this.setTLBR(c[0],c[1],c[2],c[3]);break;case 3:this.setTLBR(c[0],c[1],c[2]);break;case 2:this.setTLBR(c[0],c[1]);break;case 1:{const a=c[0];if(a instanceof o)this.model={top:a.model.top,left:a.model.left,bottom:a.model.bottom,right:a.model.right,sheetName:a.sheetName};else if(a instanceof Array)this.decode(a);else if(a.top&&a.left&&a.bottom&&a.right)this.model={top:a.top,left:a.left,bottom:a.bottom,right:a.right,sheetName:a.sheetName};else{const u=s.decodeEx(a);u.top?this.model={top:u.top,left:u.left,bottom:u.bottom,right:u.right,sheetName:u.sheetName}:this.model={top:u.row,left:u.col,bottom:u.row,right:u.col,sheetName:u.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+c.length)}}get top(){return this.model.top||1}set top(c){this.model.top=c}get left(){return this.model.left||1}set left(c){this.model.left=c}get bottom(){return this.model.bottom||1}set bottom(c){this.model.bottom=c}get right(){return this.model.right||1}set right(c){this.model.right=c}get sheetName(){return this.model.sheetName}set sheetName(c){this.model.sheetName=c}get _serialisedSheetName(){const{sheetName:c}=this.model;return c?/^[a-zA-Z0-9]*$/.test(c)?c+"!":`'${c}'!`:""}expand(c,a,u,d){(!this.model.top||c<this.top)&&(this.top=c),(!this.model.left||a<this.left)&&(this.left=a),(!this.model.bottom||u>this.bottom)&&(this.bottom=u),(!this.model.right||d>this.right)&&(this.right=d)}expandRow(c){if(c){const{dimensions:a,number:u}=c;a&&this.expand(u,a.min,u,a.max)}}expandToAddress(c){const a=s.decodeEx(c);this.expand(a.row,a.col,a.row,a.col)}get tl(){return s.n2l(this.left)+this.top}get $t$l(){return`$${s.n2l(this.left)}$${this.top}`}get br(){return s.n2l(this.right)+this.bottom}get $b$r(){return`$${s.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(c){return(!c.sheetName||!this.sheetName||c.sheetName===this.sheetName)&&!(c.bottom<this.top)&&!(c.top>this.bottom)&&!(c.right<this.left)&&!(c.left>this.right)}contains(c){const a=s.decodeEx(c);return this.containsEx(a)}containsEx(c){return(!c.sheetName||!this.sheetName||c.sheetName===this.sheetName)&&c.row>=this.top&&c.row<=this.bottom&&c.col>=this.left&&c.col<=this.right}forEachAddress(c){for(let a=this.left;a<=this.right;a++)for(let u=this.top;u<=this.bottom;u++)c(s.encodeAddress(u,a),u,a)}}n.exports=o},{"../utils/col-cache":19}],11:[function(t,n,i){const s=t("../utils/under-dash"),o=t("./enums"),l=t("../utils/col-cache"),c=t("./cell");n.exports=class{constructor(a,u){this._worksheet=a,this._number=u,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(a){return this._cells[a-1]}getCellEx(a){let u=this._cells[a.col-1];if(!u){const d=this._worksheet.getColumn(a.col);u=new c(this,d,a.address),this._cells[a.col-1]=u}return u}getCell(a){if(typeof a=="string"){const u=this._worksheet.getColumnKey(a);a=u?u.number:l.l2n(a)}return this._cells[a-1]||this.getCellEx({address:l.encodeAddress(this._number,a),row:this._number,col:a})}splice(a,u){const d=a+u;for(var f=arguments.length,h=new Array(f>2?f-2:0),m=2;m<f;m++)h[m-2]=arguments[m];const g=h.length-u,p=this._cells.length;let y,b,v;if(g<0)for(y=a+h.length;y<=p;y++)v=this._cells[y-1],b=this._cells[y-g-1],b?(v=this.getCell(y),v.value=b.value,v.style=b.style,v._comment=b._comment):v&&(v.value=null,v.style={},v._comment=void 0);else if(g>0)for(y=p;y>=d;y--)b=this._cells[y-1],b?(v=this.getCell(y+g),v.value=b.value,v.style=b.style,v._comment=b._comment):this._cells[y+g-1]=void 0;for(y=0;y<h.length;y++)v=this.getCell(a+y),v.value=h[y],v.style={},v._comment=void 0}eachCell(a,u){if(u||(u=a,a=null),a&&a.includeEmpty){const d=this._cells.length;for(let f=1;f<=d;f++)u(this.getCell(f),f)}else this._cells.forEach((d,f)=>{d&&d.type!==o.ValueType.Null&&u(d,f+1)})}addPageBreak(a,u){const d=this._worksheet,f=Math.max(0,a-1)||0,h=Math.max(0,u-1)||16838,m={id:this._number,max:h,man:1};f&&(m.min=f),d.rowBreaks.push(m)}get values(){const a=[];return this._cells.forEach(u=>{u&&u.type!==o.ValueType.Null&&(a[u.col]=u.value)}),a}set values(a){if(this._cells=[],a)if(a instanceof Array){let u=0;a.hasOwnProperty("0")&&(u=1),a.forEach((d,f)=>{d!==void 0&&(this.getCellEx({address:l.encodeAddress(this._number,f+u),row:this._number,col:f+u}).value=d)})}else this._worksheet.eachColumnKey((u,d)=>{a[d]!==void 0&&(this.getCellEx({address:l.encodeAddress(this._number,u.number),row:this._number,col:u.number}).value=a[d])})}get hasValues(){return s.some(this._cells,a=>a&&a.type!==o.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let a=0;return this.eachCell(()=>{a++}),a}get dimensions(){let a=0,u=0;return this._cells.forEach(d=>{d&&d.type!==o.ValueType.Null&&((!a||a>d.col)&&(a=d.col),u<d.col&&(u=d.col))}),a>0?{min:a,max:u}:null}_applyStyle(a,u){return this.style[a]=u,this._cells.forEach(d=>{d&&(d[a]=u)}),u}get numFmt(){return this.style.numFmt}set numFmt(a){this._applyStyle("numFmt",a)}get font(){return this.style.font}set font(a){this._applyStyle("font",a)}get alignment(){return this.style.alignment}set alignment(a){this._applyStyle("alignment",a)}get protection(){return this.style.protection}set protection(a){this._applyStyle("protection",a)}get border(){return this.style.border}set border(a){this._applyStyle("border",a)}get fill(){return this.style.fill}set fill(a){this._applyStyle("fill",a)}get hidden(){return!!this._hidden}set hidden(a){this._hidden=a}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(a){this._outlineLevel=a}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){const a=[];let u=0,d=0;return this._cells.forEach(f=>{if(f){const h=f.model;h&&((!u||u>f.col)&&(u=f.col),d<f.col&&(d=f.col),a.push(h))}}),this.height||a.length?{cells:a,number:this.number,min:u,max:d,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(a){if(a.number!==this._number)throw new Error("Invalid row number in model");let u;this._cells=[],a.cells.forEach(d=>{switch(d.type){case c.Types.Merge:break;default:{let f;if(d.address)f=l.decodeAddress(d.address);else if(u){const{row:h}=u,m=u.col+1;f={row:h,col:m,address:l.encodeAddress(h,m),$col$row:`$${l.n2l(m)}$${h}`}}u=f,this.getCellEx(f).model=d;break}}}),a.height?this.height=a.height:delete this.height,this.hidden=a.hidden,this.outlineLevel=a.outlineLevel||0,this.style=a.style&&JSON.parse(JSON.stringify(a.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(t,n,i){const s=t("../utils/col-cache");class o{constructor(c,a,u){this.table=c,this.column=a,this.index=u}_set(c,a){this.table.cacheState(),this.column[c]=a}get name(){return this.column.name}set name(c){this._set("name",c)}get filterButton(){return this.column.filterButton}set filterButton(c){this.column.filterButton=c}get style(){return this.column.style}set style(c){this.column.style=c}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(c){this._set("totalsRowLabel",c)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(c){this._set("totalsRowFunction",c)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(c){this._set("totalsRowResult",c)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(c){this._set("totalsRowFormula",c)}}n.exports=class{constructor(l,c){this.worksheet=l,c&&(this.table=c,this.validate(),this.store())}getFormula(l){switch(l.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${l.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${l.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${l.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${l.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${l.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${l.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${l.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${l.name}])`;case"custom":return l.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+l.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){const{table:l}=this,c=(g,p,y)=>{g[p]===void 0&&(g[p]=y)};c(l,"headerRow",!0),c(l,"totalsRow",!1),c(l,"style",{}),c(l.style,"theme","TableStyleMedium2"),c(l.style,"showFirstColumn",!1),c(l.style,"showLastColumn",!1),c(l.style,"showRowStripes",!1),c(l.style,"showColumnStripes",!1);const a=(g,p)=>{if(!g)throw new Error(p)};a(l.ref,"Table must have ref"),a(l.columns,"Table must have column definitions"),a(l.rows,"Table must have row definitions"),l.tl=s.decodeAddress(l.ref);const{row:u,col:d}=l.tl;a(u>0,"Table must be on valid row"),a(d>0,"Table must be on valid col");const{width:f,filterHeight:h,tableHeight:m}=this;l.autoFilterRef=s.encode(u,d,u+h-1,d+f-1),l.tableRef=s.encode(u,d,u+m-1,d+f-1),l.columns.forEach((g,p)=>{a(g.name,`Column ${p} must have a name`),p===0?c(g,"totalsRowLabel","Total"):(c(g,"totalsRowFunction","none"),g.totalsRowFormula=this.getFormula(g))})}store(){const l=(h,m)=>{m&&Object.keys(m).forEach(g=>{h[g]=m[g]})},{worksheet:c,table:a}=this,{row:u,col:d}=a.tl;let f=0;if(a.headerRow){const h=c.getRow(u+f++);a.columns.forEach((m,g)=>{const{style:p,name:y}=m,b=h.getCell(d+g);b.value=y,l(b,p)})}if(a.rows.forEach(h=>{const m=c.getRow(u+f++);h.forEach((g,p)=>{const y=m.getCell(d+p);y.value=g,l(y,a.columns[p].style)})}),a.totalsRow){const h=c.getRow(u+f++);a.columns.forEach((m,g)=>{const p=h.getCell(d+g);if(g===0)p.value=m.totalsRowLabel;else{const y=this.getFormula(m);p.value=y?{formula:m.totalsRowFormula,result:m.totalsRowResult}:null}l(p,m.style)})}}load(l){const{table:c}=this,{row:a,col:u}=c.tl;let d=0;if(c.headerRow){const f=l.getRow(a+d++);c.columns.forEach((h,m)=>{f.getCell(u+m).value=h.name})}if(c.rows.forEach(f=>{const h=l.getRow(a+d++);f.forEach((m,g)=>{h.getCell(u+g).value=m})}),c.totalsRow){const f=l.getRow(a+d++);c.columns.forEach((h,m)=>{const g=f.getCell(u+m);m===0?g.value=h.totalsRowLabel:this.getFormula(h)&&(g.value={formula:h.totalsRowFormula,result:h.totalsRowResult})})}}get model(){return this.table}set model(l){this.table=l}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();const l=s.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let c=0;c<this._cache.tableHeight;c++){const a=this.worksheet.getRow(l.row+c);for(let u=0;u<this._cache.width;u++)a.getCell(l.col+u).value=null}else{for(let c=this.tableHeight;c<this._cache.tableHeight;c++){const a=this.worksheet.getRow(l.row+c);for(let u=0;u<this._cache.width;u++)a.getCell(l.col+u).value=null}for(let c=0;c<this.tableHeight;c++){const a=this.worksheet.getRow(l.row+c);for(let u=this.width;u<this._cache.width;u++)a.getCell(l.col+u).value=null}}this.store()}addRow(l,c){this.cacheState(),c===void 0?this.table.rows.push(l):this.table.rows.splice(c,0,l)}removeRows(l){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(l,c)}getColumn(l){const c=this.table.columns[l];return new o(this,c,l)}addColumn(l,c,a){this.cacheState(),a===void 0?(this.table.columns.push(l),this.table.rows.forEach((u,d)=>{u.push(c[d])})):(this.table.columns.splice(a,0,l),this.table.rows.forEach((u,d)=>{u.splice(a,0,c[d])}))}removeColumns(l){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(l,c),this.table.rows.forEach(a=>{a.splice(l,c)})}_assign(l,c,a){this.cacheState(),l[c]=a}get ref(){return this.table.ref}set ref(l){this._assign(this.table,"ref",l)}get name(){return this.table.name}set name(l){this.table.name=l}get displayName(){return this.table.displyName||this.table.name}set displayNamename(l){this.table.displayName=l}get headerRow(){return this.table.headerRow}set headerRow(l){this._assign(this.table,"headerRow",l)}get totalsRow(){return this.table.totalsRow}set totalsRow(l){this._assign(this.table,"totalsRow",l)}get theme(){return this.table.style.name}set theme(l){this.table.style.name=l}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(l){this.table.style.showFirstColumn=l}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(l){this.table.style.showLastColumn=l}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(l){this.table.style.showRowStripes=l}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(l){this.table.style.showColumnStripes=l}}},{"../utils/col-cache":19}],13:[function(t,n,i){const s=t("./worksheet"),o=t("./defined-names"),l=t("../xlsx/xlsx"),c=t("../csv/csv");n.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new o}get xlsx(){return this._xlsx||(this._xlsx=new l(this)),this._xlsx}get csv(){return this._csv||(this._csv=new c(this)),this._csv}get nextId(){for(let a=1;a<this._worksheets.length;a++)if(!this._worksheets[a])return a;return this._worksheets.length||1}addWorksheet(a,u){const d=this.nextId;u&&(typeof u=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),u={properties:{tabColor:{argb:u}}}):(u.argb||u.theme||u.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),u={properties:{tabColor:u}}));const f=this._worksheets.reduce((g,p)=>(p&&p.orderNo)>g?p.orderNo:g,0),h=Object.assign({},u,{id:d,name:a,orderNo:f+1,workbook:this}),m=new s(h);return this._worksheets[d]=m,m}removeWorksheetEx(a){delete this._worksheets[a.id]}removeWorksheet(a){const u=this.getWorksheet(a);u&&u.destroy()}getWorksheet(a){return a===void 0?this._worksheets.find(Boolean):typeof a=="number"?this._worksheets[a]:typeof a=="string"?this._worksheets.find(u=>u&&u.name===a):void 0}get worksheets(){return this._worksheets.slice(1).sort((a,u)=>a.orderNo-u.orderNo).filter(Boolean)}eachSheet(a){this.worksheets.forEach(u=>{a(u,u.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(a){const u=this.media.length;return this.media.push(Object.assign({},a,{type:"image"})),u}getImage(a){return this.media[a]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(a=>a.model),sheets:this.worksheets.map(a=>a.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(a){this.creator=a.creator,this.lastModifiedBy=a.lastModifiedBy,this.lastPrinted=a.lastPrinted,this.created=a.created,this.modified=a.modified,this.company=a.company,this.manager=a.manager,this.title=a.title,this.subject=a.subject,this.keywords=a.keywords,this.category=a.category,this.description=a.description,this.language=a.language,this.revision=a.revision,this.contentStatus=a.contentStatus,this.properties=a.properties,this.calcProperties=a.calcProperties,this._worksheets=[],a.worksheets.forEach(u=>{const{id:d,name:f,state:h}=u,m=a.sheets&&a.sheets.findIndex(g=>g.id===d);(this._worksheets[d]=new s({id:d,name:f,orderNo:m,state:h,workbook:this})).model=u}),this._definedNames.model=a.definedNames,this.views=a.views,this._themes=a.themes,this.media=a.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(t,n,i){const s=t("../utils/under-dash"),o=t("../utils/col-cache"),l=t("./range"),c=t("./row"),a=t("./column"),u=t("./enums"),d=t("./image"),f=t("./table"),h=t("./data-validations"),m=t("../utils/encryptor"),{copyStyle:g}=t("../utils/copy-style");n.exports=class{constructor(p){p=p||{},this._workbook=p.workbook,this.id=p.id,this.orderNo=p.orderNo,this.name=p.name,this.state=p.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},p.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!p.pageSetup||!p.pageSetup.fitToWidth&&!p.pageSetup.fitToHeight||p.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},p.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},p.headerFooter),this.dataValidations=new h,this.views=p.views||[],this.autoFilter=p.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(p){if(p===void 0&&(p="sheet"+this.id),this._name!==p){if(typeof p!="string")throw new Error("The name has to be a string.");if(p==="")throw new Error("The name can't be empty.");if(p==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(p))throw new Error(`Worksheet name ${p} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(p))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+p);if(p&&p.length>31&&(console.warn(`Worksheet name ${p} exceeds 31 chars. This will be truncated`),p=p.substring(0,31)),this._workbook._worksheets.find(y=>y&&y.name.toLowerCase()===p.toLowerCase()))throw new Error("Worksheet name already exists: "+p);this._name=p}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){const p=new l;return this._rows.forEach(y=>{if(y){const b=y.dimensions;b&&p.expand(y.number,b.min,y.number,b.max)}}),p}get columns(){return this._columns}set columns(p){this._headerRowCount=p.reduce((v,E)=>{const M=(E.header?1:E.headers&&E.headers.length)||0;return Math.max(v,M)},0);let y=1;const b=this._columns=[];p.forEach(v=>{const E=new a(this,y++,!1);b.push(E),E.defn=v})}getColumnKey(p){return this._keys[p]}setColumnKey(p,y){this._keys[p]=y}deleteColumnKey(p){delete this._keys[p]}eachColumnKey(p){s.each(this._keys,p)}getColumn(p){if(typeof p=="string"){const y=this._keys[p];if(y)return y;p=o.l2n(p)}if(this._columns||(this._columns=[]),p>this._columns.length){let y=this._columns.length+1;for(;y<=p;)this._columns.push(new a(this,y++))}return this._columns[p-1]}spliceColumns(p,y){const b=this._rows.length;for(var v=arguments.length,E=new Array(v>2?v-2:0),M=2;M<v;M++)E[M-2]=arguments[M];if(E.length>0)for(let j=0;j<b;j++){const F=[p,y];E.forEach(L=>{F.push(L[j]||null)});const P=this.getRow(j+1);P.splice.apply(P,F)}else this._rows.forEach(j=>{j&&j.splice(p,y)});const W=E.length-y,$=p+y,N=this._columns.length;if(W<0)for(let j=p+E.length;j<=N;j++)this.getColumn(j).defn=this.getColumn(j-W).defn;else if(W>0)for(let j=N;j>=$;j--)this.getColumn(j+W).defn=this.getColumn(j).defn;for(let j=p;j<p+E.length;j++)this.getColumn(j).defn=null;this.workbook.definedNames.spliceColumns(this.name,p,y,E.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let p=0;return this.eachRow(y=>{p=Math.max(p,y.cellCount)}),p}get actualColumnCount(){const p=[];let y=0;return this.eachRow(b=>{b.eachCell(v=>{let{col:E}=v;p[E]||(p[E]=!0,y++)})}),y}_commitRow(){}get _lastRowNumber(){const p=this._rows;let y=p.length;for(;y>0&&p[y-1]===void 0;)y--;return y}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(p){return this._rows[p-1]}findRows(p,y){return this._rows.slice(p-1,p-1+y)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let p=0;return this.eachRow(()=>{p++}),p}getRow(p){let y=this._rows[p-1];return y||(y=this._rows[p-1]=new c(this,p)),y}getRows(p,y){if(y<1)return;const b=[];for(let v=p;v<p+y;v++)b.push(this.getRow(v));return b}addRow(p){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const b=this._nextRow,v=this.getRow(b);return v.values=p,this._setStyleOption(b,y[0]==="i"?y:"n"),v}addRows(p){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const b=[];return p.forEach(v=>{b.push(this.addRow(v,y))}),b}insertRow(p,y){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(p,0,y),this._setStyleOption(p,b),this.getRow(p)}insertRows(p,y){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(p,0,...y),b!=="n")for(let v=0;v<y.length;v++)b[0]==="o"&&this.findRow(y.length+p+v)!==void 0?this._copyStyle(y.length+p+v,p+v,b[1]==="+"):b[0]==="i"&&this.findRow(p-1)!==void 0&&this._copyStyle(p-1,p+v,b[1]==="+");return this.getRows(p,y.length)}_setStyleOption(p){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";y[0]==="o"&&this.findRow(p+1)!==void 0?this._copyStyle(p+1,p,y[1]==="+"):y[0]==="i"&&this.findRow(p-1)!==void 0&&this._copyStyle(p-1,p,y[1]==="+")}_copyStyle(p,y){let b=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const v=this.getRow(p),E=this.getRow(y);E.style=g(v.style),v.eachCell({includeEmpty:b},(M,W)=>{E.getCell(W).style=g(M.style)}),E.height=v.height}duplicateRow(p,y){let b=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const v=this._rows[p-1],E=new Array(y).fill(v.values);this.spliceRows(p+1,b?0:y,...E);for(let M=0;M<y;M++){const W=this._rows[p+M];W.style=v.style,W.height=v.height,v.eachCell({includeEmpty:!0},($,N)=>{W.getCell(N).style=$.style})}}spliceRows(p,y){const b=p+y;for(var v=arguments.length,E=new Array(v>2?v-2:0),M=2;M<v;M++)E[M-2]=arguments[M];const W=E.length,$=W-y,N=this._rows.length;let j,F;if($<0)for(p===N&&(this._rows[N-1]=void 0),j=b;j<=N;j++)if(F=this._rows[j-1],F){const P=this.getRow(j+$);P.values=F.values,P.style=F.style,P.height=F.height,F.eachCell({includeEmpty:!0},(L,k)=>{P.getCell(k).style=L.style}),this._rows[j-1]=void 0}else this._rows[j+$-1]=void 0;else if($>0)for(j=N;j>=b;j--)if(F=this._rows[j-1],F){const P=this.getRow(j+$);P.values=F.values,P.style=F.style,P.height=F.height,F.eachCell({includeEmpty:!0},(L,k)=>{if(P.getCell(k).style=L.style,L._value.constructor.name==="MergeValue"){const R=this.getRow(L._row._number+W).getCell(k),C=L._value._master,_=this.getRow(C._row._number+W).getCell(C._column._number);R.merge(_)}})}else this._rows[j+$-1]=void 0;for(j=0;j<W;j++){const P=this.getRow(p+j);P.style={},P.values=E[j]}this.workbook.definedNames.spliceRows(this.name,p,y,W)}eachRow(p,y){if(y||(y=p,p=void 0),p&&p.includeEmpty){const b=this._rows.length;for(let v=1;v<=b;v++)y(this.getRow(v),v)}else this._rows.forEach(b=>{b&&b.hasValues&&y(b,b.number)})}getSheetValues(){const p=[];return this._rows.forEach(y=>{y&&(p[y.number]=y.values)}),p}findCell(p,y){const b=o.getAddress(p,y),v=this._rows[b.row-1];return v?v.findCell(b.col):void 0}getCell(p,y){const b=o.getAddress(p,y);return this.getRow(b.row).getCellEx(b)}mergeCells(){for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];const v=new l(y);this._mergeCellsInternal(v)}mergeCellsWithoutStyle(){for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];const v=new l(y);this._mergeCellsInternal(v,!0)}_mergeCellsInternal(p,y){s.each(this._merges,v=>{if(v.intersects(p))throw new Error("Cannot merge already merged cells")});const b=this.getCell(p.top,p.left);for(let v=p.top;v<=p.bottom;v++)for(let E=p.left;E<=p.right;E++)(v>p.top||E>p.left)&&this.getCell(v,E).merge(b,y);this._merges[b.address]=p}_unMergeMaster(p){const y=this._merges[p.address];if(y){for(let b=y.top;b<=y.bottom;b++)for(let v=y.left;v<=y.right;v++)this.getCell(b,v).unmerge();delete this._merges[p.address]}}get hasMerges(){return s.some(this._merges,Boolean)}unMergeCells(){for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];const v=new l(y);for(let E=v.top;E<=v.bottom;E++)for(let M=v.left;M<=v.right;M++){const W=this.findCell(E,M);W&&(W.type===u.ValueType.Merge?this._unMergeMaster(W.master):this._merges[W.address]&&this._unMergeMaster(W))}}fillFormula(p,y,b){let v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared";const E=o.decode(p),{top:M,left:W,bottom:$,right:N}=E,j=N-W+1,F=o.encodeAddress(M,W),P=v==="shared";let L;L=typeof b=="function"?b:Array.isArray(b)?Array.isArray(b[0])?(R,C)=>b[R-M][C-W]:(R,C)=>b[(R-M)*j+(C-W)]:()=>{};let k=!0;for(let R=M;R<=$;R++)for(let C=W;C<=N;C++)k?(this.getCell(R,C).value={shareType:v,formula:y,ref:p,result:L(R,C)},k=!1):this.getCell(R,C).value=P?{sharedFormula:F,result:L(R,C)}:L(R,C)}addImage(p,y){const b={type:"image",imageId:p,range:y};this._media.push(new d(this,b))}getImages(){return this._media.filter(p=>p.type==="image")}addBackgroundImage(p){const y={type:"background",imageId:p};this._media.push(new d(this,y))}getBackgroundImageId(){const p=this._media.find(y=>y.type==="background");return p&&p.imageId}protect(p,y){return new Promise(b=>{this.sheetProtection={sheet:!0},y&&"spinCount"in y&&(y.spinCount=Number.isFinite(y.spinCount)?Math.round(Math.max(0,y.spinCount)):1e5),p&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=m.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=y&&"spinCount"in y?y.spinCount:1e5,this.sheetProtection.hashValue=m.convertPasswordToHash(p,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),y&&(this.sheetProtection=Object.assign(this.sheetProtection,y),!p&&"spinCount"in y&&delete this.sheetProtection.spinCount),b()})}unprotect(){this.sheetProtection=null}addTable(p){const y=new f(this,p);return this.tables[p.name]=y,y}getTable(p){return this.tables[p]}removeTable(p){delete this.tables[p]}getTables(){return Object.values(this.tables)}addConditionalFormatting(p){this.conditionalFormattings.push(p)}removeConditionalFormatting(p){typeof p=="number"?this.conditionalFormattings.splice(p,1):this.conditionalFormattings=p instanceof Function?this.conditionalFormattings.filter(p):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(p){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=p}get model(){const p={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(v=>v.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(v=>v.model),conditionalFormattings:this.conditionalFormattings};p.cols=a.toModel(this.columns);const y=p.rows=[],b=p.dimensions=new l;return this._rows.forEach(v=>{const E=v&&v.model;E&&(b.expand(E.number,E.min,E.number,E.max),y.push(E))}),p.merges=[],s.each(this._merges,v=>{p.merges.push(v.range)}),p}_parseRows(p){this._rows=[],p.rows.forEach(y=>{const b=new c(this,y.number);this._rows[b.number-1]=b,b.model=y})}_parseMergeCells(p){s.each(p.mergeCells,y=>{this.mergeCellsWithoutStyle(y)})}set model(p){this.name=p.name,this._columns=a.fromModel(this,p.cols),this._parseRows(p),this._parseMergeCells(p),this.dataValidations=new h(p.dataValidations),this.properties=p.properties,this.pageSetup=p.pageSetup,this.headerFooter=p.headerFooter,this.views=p.views,this.autoFilter=p.autoFilter,this._media=p.media.map(y=>new d(this,y)),this.sheetProtection=p.sheetProtection,this.tables=p.tables.reduce((y,b)=>{const v=new f;return v.model=b,y[b.name]=v,y},{}),this.conditionalFormattings=p.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(t,n,i){t("core-js/modules/es.promise"),t("core-js/modules/es.promise.finally"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.values"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.async-iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.find"),t("core-js/modules/es.string.from-code-point"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.number.is-nan"),t("regenerator-runtime/runtime");const s={Workbook:t("./doc/workbook")},o=t("./doc/enums");Object.keys(o).forEach(l=>{s[l]=o[l]}),n.exports=s},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(t,n,i){const s=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");i.bufferToString=function(o){return typeof o=="string"?o:s?s.decode(o):o.toString()}},{}],17:[function(t,n,i){const s=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:o}=t("buffer");i.stringToBuffer=function(l){return typeof l!="string"?l:s?o.from(s.encode(l).buffer):o.from(l)}},{buffer:220}],18:[function(t,n,i){const s=t("./under-dash"),o=t("./col-cache");n.exports=class{constructor(l){this.template=l,this.sheets={}}addCell(l){this.addCellEx(o.decodeEx(l))}getCell(l){return this.findCellEx(o.decodeEx(l),!0)}findCell(l){return this.findCellEx(o.decodeEx(l),!1)}findCellAt(l,c,a){const u=this.sheets[l],d=u&&u[c];return d&&d[a]}addCellEx(l){if(l.top)for(let c=l.top;c<=l.bottom;c++)for(let a=l.left;a<=l.right;a++)this.getCellAt(l.sheetName,c,a);else this.findCellEx(l,!0)}getCellEx(l){return this.findCellEx(l,!0)}findCellEx(l,c){const a=this.findSheet(l,c),u=this.findSheetRow(a,l,c);return this.findRowCell(u,l,c)}getCellAt(l,c,a){const u=this.sheets[l]||(this.sheets[l]=[]),d=u[c]||(u[c]=[]);return d[a]||(d[a]={sheetName:l,address:o.n2l(a)+c,row:c,col:a})}removeCellEx(l){const c=this.findSheet(l);if(!c)return;const a=this.findSheetRow(c,l);a&&delete a[l.col]}forEachInSheet(l,c){const a=this.sheets[l];a&&a.forEach((u,d)=>{u&&u.forEach((f,h)=>{f&&c(f,d,h)})})}forEach(l){s.each(this.sheets,(c,a)=>{this.forEachInSheet(a,l)})}map(l){const c=[];return this.forEach(a=>{c.push(l(a))}),c}findSheet(l,c){const a=l.sheetName;return this.sheets[a]?this.sheets[a]:c?this.sheets[a]=[]:void 0}findSheetRow(l,c,a){const{row:u}=c;return l&&l[u]?l[u]:a?l[u]=[]:void 0}findRowCell(l,c,a){const{col:u}=c;return l&&l[u]?l[u]:a?l[u]=this.template?Object.assign(c,JSON.parse(JSON.stringify(this.template))):c:void 0}spliceRows(l,c,a,u){const d=this.sheets[l];if(d){const f=[];for(let h=0;h<u;h++)f.push([]);d.splice(c,a,...f)}}spliceColumns(l,c,a,u){const d=this.sheets[l];if(d){const f=[];for(let h=0;h<u;h++)f.push(null);s.each(d,h=>{h.splice(c,a,...f)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(t,n,i){const s=/^[A-Z]+\d+$/,o={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:l=>l<=26?1:l<=676?2:3,_fill(l){let c,a,u,d,f,h=1;if(l>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&l>=1){for(;h<=26;)c=this._dictionary[h-1],this._n2l[h]=c,this._l2n[c]=h,h++;this._l2nFill=1}if(this._l2nFill<2&&l>=2){for(h=27;h<=702;)a=h-27,u=a%26,d=Math.floor(a/26),c=this._dictionary[d]+this._dictionary[u],this._n2l[h]=c,this._l2n[c]=h,h++;this._l2nFill=2}if(this._l2nFill<3&&l>=3){for(h=703;h<=16384;)a=h-703,u=a%26,d=Math.floor(a/26)%26,f=Math.floor(a/676),c=this._dictionary[f]+this._dictionary[d]+this._dictionary[u],this._n2l[h]=c,this._l2n[c]=h,h++;this._l2nFill=3}},l2n(l){if(this._l2n[l]||this._fill(l.length),!this._l2n[l])throw new Error("Out of bounds. Invalid column letter: "+l);return this._l2n[l]},n2l(l){if(l<1||l>16384)throw new Error(l+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[l]||this._fill(this._level(l)),this._n2l[l]},_hash:{},validateAddress(l){if(!s.test(l))throw new Error("Invalid Address: "+l);return!0},decodeAddress(l){const c=l.length<5&&this._hash[l];if(c)return c;let a=!1,u="",d=0,f=!1,h="",m=0;for(let p,y=0;y<l.length;y++)if(p=l.charCodeAt(y),!f&&p>=65&&p<=90)a=!0,u+=l[y],d=26*d+p-64;else if(p>=48&&p<=57)f=!0,h+=l[y],m=10*m+p-48;else if(f&&a&&p!==36)break;if(a){if(d>16384)throw new Error("Out of bounds. Invalid column letter: "+u)}else d=void 0;f||(m=void 0);const g={address:l=u+h,col:d,row:m,$col$row:`$${u}$${h}`};return d<=100&&m<=100&&(this._hash[l]=g,this._hash[g.$col$row]=g),g},getAddress(l,c){if(c){const a=this.n2l(c)+l;return this.decodeAddress(a)}return this.decodeAddress(l)},decode(l){const c=l.split(":");if(c.length===2){const a=this.decodeAddress(c[0]),u=this.decodeAddress(c[1]),d={top:Math.min(a.row,u.row),left:Math.min(a.col,u.col),bottom:Math.max(a.row,u.row),right:Math.max(a.col,u.col)};return d.tl=this.n2l(d.left)+d.top,d.br=this.n2l(d.right)+d.bottom,d.dimensions=`${d.tl}:${d.br}`,d}return this.decodeAddress(l)},decodeEx(l){const c=l.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),a=c[1]||c[2],u=c[3],d=u.split(":");if(d.length>1){let h=this.decodeAddress(d[0]),m=this.decodeAddress(d[1]);const g=Math.min(h.row,m.row),p=Math.min(h.col,m.col),y=Math.max(h.row,m.row),b=Math.max(h.col,m.col);return h=this.n2l(p)+g,m=this.n2l(b)+y,{top:g,left:p,bottom:y,right:b,sheetName:a,tl:{address:h,col:p,row:g,$col$row:`$${this.n2l(p)}$${g}`,sheetName:a},br:{address:m,col:b,row:y,$col$row:`$${this.n2l(b)}$${y}`,sheetName:a},dimensions:`${h}:${m}`}}if(u.startsWith("#"))return a?{sheetName:a,error:u}:{error:u};const f=this.decodeAddress(u);return a?{sheetName:a,...f}:f},encodeAddress:(l,c)=>o.n2l(c)+l,encode(){switch(arguments.length){case 2:return o.encodeAddress(arguments[0],arguments[1]);case 4:return`${o.encodeAddress(arguments[0],arguments[1])}:${o.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(l,c){const[a,u,,d,f]=l,[h,m]=c;return h>=a&&h<=d&&m>=u&&m<=f}};n.exports=o},{}],20:[function(t,n,i){const s=(l,c)=>({...l,...c.reduce((a,u)=>(l[u]&&(a[u]={...l[u]}),a),{})}),o=function(l,c,a){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];l[a]&&(c[a]=s(l[a],u))};i.copyStyle=l=>{if(!l)return l;if(c=l,Object.keys(c).length===0)return{};var c;const a={...l};return o(l,a,"font",["color"]),o(l,a,"alignment"),o(l,a,"protection"),l.border&&(o(l,a,"border"),o(l.border,a.border,"top",["color"]),o(l.border,a.border,"left",["color"]),o(l.border,a.border,"bottom",["color"]),o(l.border,a.border,"right",["color"]),o(l.border,a.border,"diagonal",["color"])),l.fill&&(o(l,a,"fill",["fgColor","bgColor","center"]),l.fill.stops&&(a.fill.stops=l.fill.stops.map(u=>s(u,["color"])))),a}},{}],21:[function(t,n,i){(function(s){(function(){const o=t("crypto"),l={hash(c){const a=o.createHash(c);for(var u=arguments.length,d=new Array(u>1?u-1:0),f=1;f<u;f++)d[f-1]=arguments[f];return a.update(s.concat(d)),a.digest()},convertPasswordToHash(c,a,u,d){if(a=a.toLowerCase(),o.getHashes().indexOf(a)<0)throw new Error(`Hash algorithm '${a}' not supported!`);const f=s.from(c,"utf16le");let h=this.hash(a,s.from(u,"base64"),f);for(let m=0;m<d;m++){const g=s.alloc(4);g.writeUInt32LE(m,0),h=this.hash(a,h,g)}return h.toString("base64")},randomBytes:c=>o.randomBytes(c)};n.exports=l}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(t,n,i){const{SaxesParser:s}=t("saxes"),{PassThrough:o}=t("readable-stream"),{bufferToString:l}=t("./browser-buffer-decode");n.exports=async function*(c){c.pipe&&!c[Symbol.asyncIterator]&&(c=c.pipe(new o));const a=new s;let u;a.on("error",f=>{u=f});let d=[];a.on("opentag",f=>d.push({eventType:"opentag",value:f})),a.on("text",f=>d.push({eventType:"text",value:f})),a.on("closetag",f=>d.push({eventType:"closetag",value:f}));for await(const f of c){if(a.write(l(f)),u)throw u;yield d,d=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(t,n,i){const s=t("./col-cache"),o=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,l=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;n.exports={slideFormula:function(c,a,u){const d=s.decode(a),f=s.decode(u);return c.replace(o,(h,m,g,p,y)=>{if(y)return h;const b=l.exec(p);if(b){const v=b[1],E=b[2].toUpperCase(),M=b[3],W=b[4];if(E.length>3||E.length===3&&E>"XFD")return h;let $=s.l2n(E),N=parseInt(W,10);return v||($+=f.col-d.col),M||(N+=f.row-d.row),(m||"")+(v||"")+s.n2l($)+(M||"")+N}return h})}}},{"./col-cache":19}],24:[function(t,n,i){(function(s,o){(function(){const l=t("readable-stream"),c=t("./utils"),a=t("./string-buf");class u{constructor(p,y){this._data=p,this._encoding=y}get length(){return this.toBuffer().length}copy(p,y,b,v){return this.toBuffer().copy(p,y,b,v)}toBuffer(){return this._buffer||(this._buffer=o.from(this._data,this._encoding)),this._buffer}}class d{constructor(p){this._data=p}get length(){return this._data.length}copy(p,y,b,v){return this._data._buf.copy(p,y,b,v)}toBuffer(){return this._data.toBuffer()}}class f{constructor(p){this._data=p}get length(){return this._data.length}copy(p,y,b,v){this._data.copy(p,y,b,v)}toBuffer(){return this._data}}class h{constructor(p){this.size=p,this.buffer=o.alloc(p),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;const p=o.alloc(this.iWrite-this.iRead);return this.buffer.copy(p,0,this.iRead,this.iWrite),p}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(p){let y;return p===0?null:p===void 0||p>=this.length?(y=this.toBuffer(),this.iRead=this.iWrite,y):(y=o.alloc(p),this.buffer.copy(y,0,this.iRead,p),this.iRead+=p,y)}write(p,y,b){const v=Math.min(b,this.size-this.iWrite);return p.copy(this.buffer,this.iWrite,y,y+v),this.iWrite+=v,v}}const m=function(g){g=g||{},this.bufSize=g.bufSize||1048576,this.buffers=[],this.batch=g.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};c.inherits(m,l.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return o.concat(this.buffers.map(g=>g.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){const p=this.buffers[this.buffers.length-1];if(!p.full)return p}const g=new h(this.bufSize);return this.buffers.push(g),g},async _pipe(g){await Promise.all(this.pipes.map(function(p){return new Promise(y=>{p.write(g.toBuffer(),()=>{y()})})}))},_writeToBuffers(g){let p=0;const y=g.length;for(;p<y;)p+=this._getWritableBuffer().write(g,p,y-p)},async write(g,p,y){let b;if(p instanceof Function&&(y=p,p="utf8"),y=y||c.nop,g instanceof a)b=new d(g);else if(g instanceof o)b=new f(g);else{if(!(typeof g=="string"||g instanceof String||g instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");b=new u(g,p)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(b);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(b),s.nextTick(y)):(await this._pipe(b),y());else this.paused||this.emit("data",b.toBuffer()),this._writeToBuffers(b),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(g,p,y){const b=v=>{v?y(v):(this._flush(),this.pipes.forEach(E=>{E.end()}),this.emit("finish"))};g?this.write(g,p,b):b()},read(g){let p;if(g){for(p=[];g&&this.buffers.length&&!this.buffers[0].eod;){const y=this.buffers[0],b=y.read(g);g-=b.length,p.push(b),y.eod&&y.full&&this.buffers.shift()}return o.concat(p)}return p=this.buffers.map(y=>y.toBuffer()).filter(Boolean),this.buffers=[],o.concat(p)},setEncoding(g){this.encoding=g},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(g){this.pipes.push(g),!this.paused&&this.buffers.length&&this.end()},unpipe(g){this.pipes=this.pipes.filter(p=>p!==g)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),n.exports=m}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(t,n,i){(function(s){(function(){n.exports=class{constructor(o){this._buf=s.alloc(o&&o.size||16384),this._encoding=o&&o.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=s.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(o){o=o||0,this._buffer=void 0,this._inPos=o}_grow(o){let l=2*this._buf.length;for(;l<o;)l*=2;const c=s.alloc(l);this._buf.copy(c,0),this._buf=c}addText(o){this._buffer=void 0;let l=this._inPos+this._buf.write(o,this._inPos,this._encoding);for(;l>=this._buf.length-4;)this._grow(this._inPos+o.length),l=this._inPos+this._buf.write(o,this._inPos,this._encoding);this._inPos=l}addStringBuf(o){o.length&&(this._buffer=void 0,this.length+o.length>this.capacity&&this._grow(this.length+o.length),o._buf.copy(this._buf,this._inPos,0,o.length),this._inPos+=o.length)}}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220}],26:[function(t,n,i){const{toString:s}=Object.prototype,o=/["&<>]/,l={each:function(c,a){c&&(Array.isArray(c)?c.forEach(a):Object.keys(c).forEach(u=>{a(c[u],u)}))},some:function(c,a){return!!c&&(Array.isArray(c)?c.some(a):Object.keys(c).some(u=>a(c[u],u)))},every:function(c,a){return!c||(Array.isArray(c)?c.every(a):Object.keys(c).every(u=>a(c[u],u)))},map:function(c,a){return c?Array.isArray(c)?c.map(a):Object.keys(c).map(u=>a(c[u],u)):[]},keyBy:(c,a)=>c.reduce((u,d)=>(u[d[a]]=d,u),{}),isEqual:function(c,a){const u=typeof c,d=typeof a,f=Array.isArray(c),h=Array.isArray(a);let m;if(u!==d)return!1;switch(typeof c){case"object":if(f||h)return!(!f||!h)&&c.length===a.length&&c.every((g,p)=>{const y=a[p];return l.isEqual(g,y)});if(c===null||a===null)return c===a;if(m=Object.keys(c),Object.keys(a).length!==m.length)return!1;for(const g of m)if(!a.hasOwnProperty(g))return!1;return l.every(c,(g,p)=>{const y=a[p];return l.isEqual(g,y)});default:return c===a}},escapeHtml(c){const a=o.exec(c);if(!a)return c;let u="",d="",f=0,h=a.index;for(;h<c.length;h++){switch(c.charAt(h)){case'"':d="&quot;";break;case"&":d="&amp;";break;case"'":d="&apos;";break;case"<":d="&lt;";break;case">":d="&gt;";break;default:continue}f!==h&&(u+=c.substring(f,h)),f=h+1,u+=d}return f!==h?u+c.substring(f,h):u},strcmp:(c,a)=>c<a?-1:c>a?1:0,isUndefined:c=>s.call(c)==="[object Undefined]",isObject:c=>s.call(c)==="[object Object]",deepMerge(){const c=arguments[0]||{},{length:a}=arguments;let u,d,f;function h(m,g){u=c[g],f=Array.isArray(m),l.isObject(m)||f?(f?(f=!1,d=u&&Array.isArray(u)?u:[]):d=u&&l.isObject(u)?u:{},c[g]=l.deepMerge(d,m)):l.isUndefined(m)||(c[g]=m)}for(let m=0;m<a;m++)l.each(arguments[m],h);return c}};n.exports=l},{}],27:[function(t,n,i){(function(s,o){(function(){const l=t("fs"),c=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,a={nop(){},promiseImmediate:u=>new Promise(d=>{s.setImmediate?o(()=>{d(u)}):setTimeout(()=>{d(u)},1)}),inherits:function(u,d,f,h){u.super_=d,h||(h=f,f=null),f&&Object.keys(f).forEach(g=>{Object.defineProperty(u,g,Object.getOwnPropertyDescriptor(f,g))});const m={constructor:{value:u,enumerable:!1,writable:!1,configurable:!0}};h&&Object.keys(h).forEach(g=>{m[g]=Object.getOwnPropertyDescriptor(h,g)}),u.prototype=Object.create(d.prototype,m)},dateToExcel:(u,d)=>25569+u.getTime()/864e5-(d?1462:0),excelToDate(u,d){const f=Math.round(24*(u-25569+(d?1462:0))*3600*1e3);return new Date(f)},parsePath(u){const d=u.lastIndexOf("/");return{path:u.substring(0,d),name:u.substring(d+1)}},getRelsPath(u){const d=a.parsePath(u);return`${d.path}/_rels/${d.name}.rels`},xmlEncode(u){const d=c.exec(u);if(!d)return u;let f="",h="",m=0,g=d.index;for(;g<u.length;g++){const p=u.charCodeAt(g);switch(p){case 34:h="&quot;";break;case 38:h="&amp;";break;case 39:h="&apos;";break;case 60:h="&lt;";break;case 62:h="&gt;";break;case 127:h="";break;default:if(p<=31&&(p<=8||p>=11&&p!==13)){h="";break}continue}m!==g&&(f+=u.substring(m,g)),m=g+1,h&&(f+=h)}return m!==g?f+u.substring(m,g):f},xmlDecode:u=>u.replace(/&([a-z]*);/g,d=>{switch(d){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return d}}),validInt(u){const d=parseInt(u,10);return Number.isNaN(d)?0:d},isDateFmt(u){return u?(u=(u=u.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:u=>new Promise(d=>{l.access(u,l.constants.F_OK,f=>{d(!f)})})},toIsoDateString:u=>u.toIsoString().subsstr(0,10),parseBoolean:u=>u===!0||u==="true"||u===1||u==="1"};n.exports=a}).call(this)}).call(this,typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{fs:216,timers:523}],28:[function(t,n,i){const s=t("./under-dash"),o=t("./utils");function l(u,d,f){u.push(` ${d}="${o.xmlEncode(f.toString())}"`)}function c(u,d){if(d){const f=[];s.each(d,(h,m)=>{h!==void 0&&l(f,m,h)}),u.push(f.join(""))}}class a{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(d){const f=this._xml;f.push("<?xml"),c(f,d),f.push(`?>
`)}openNode(d,f){const h=this.tos,m=this._xml;h&&this.open&&m.push(">"),this._stack.push(d),m.push("<"),m.push(d),c(m,f),this.leaf=!0,this.open=!0}addAttribute(d,f){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");f!==void 0&&l(this._xml,d,f)}addAttributes(d){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");c(this._xml,d)}writeText(d){const f=this._xml;this.open&&(f.push(">"),this.open=!1),this.leaf=!1,f.push(o.xmlEncode(d.toString()))}writeXml(d){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(d)}closeNode(){const d=this._stack.pop(),f=this._xml;this.leaf?f.push("/>"):(f.push("</"),f.push(d),f.push(">")),this.open=!1,this.leaf=!1}leafNode(d,f,h){this.openNode(d,f),h!==void 0&&this.writeText(h),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){const d=this._rollbacks.pop();this._xml.length>d.xml&&this._xml.splice(d.xml,this._xml.length-d.xml),this._stack.length>d.stack&&this._stack.splice(d.stack,this._stack.length-d.stack),this.leaf=d.leaf,this.open=d.open}get xml(){return this.closeAll(),this._xml.join("")}}a.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},n.exports=a},{"./under-dash":26,"./utils":27}],29:[function(t,n,i){(function(s){(function(){const o=t("events"),l=t("jszip"),c=t("./stream-buf"),{stringToBuffer:a}=t("./browser-buffer-encode");class u extends o.EventEmitter{constructor(f){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},f),this.zip=new l,this.stream=new c}append(f,h){h.hasOwnProperty("base64")&&h.base64?this.zip.file(h.name,f,{base64:!0}):(s.browser&&typeof f=="string"&&(f=a(f)),this.zip.file(h.name,f))}async finalize(){const f=await this.zip.generateAsync(this.options);this.stream.end(f),this.emit("finish")}read(f){return this.stream.read(f)}setEncoding(f){return this.stream.setEncoding(f)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(f,h){return this.stream.pipe(f,h)}unpipe(f){return this.stream.unpipe(f)}unshift(f){return this.stream.unshift(f)}wrap(f){return this.stream.wrap(f)}}n.exports={ZipWriter:u}}).call(this)}).call(this,t("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(t,n,i){n.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},28:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy""m""d""',"zh-cn":'yyyy""m""d""',"ja-jp":'yyyy""m""d""',"ko-kr":'yyyy"" mm"" dd""'},32:{"zh-tw":'hh""mm""',"zh-cn":'h""mm""',"ja-jp":'h""mm""',"ko-kr":'h"" mm""'},33:{"zh-tw":'hh""mm""ss""',"zh-cn":'h""mm""ss""',"ja-jp":'h""mm""ss""',"ko-kr":'h"" mm"" ss""'},34:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},51:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},52:{"zh-tw":'/ hh""mm""',"zh-cn":'yyyy""m""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'m""d""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},55:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},58:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(t,n,i){n.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(t,n,i){const s=t("../../utils/parse-sax"),o=t("../../utils/xml-stream");class l{prepare(){}render(){}parseOpen(a){}parseText(a){}parseClose(a){}reconcile(a,u){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(a=>{a instanceof l?a.reset():a.xform&&a.xform.reset()})}mergeModel(a){this.model=Object.assign(this.model||{},a)}async parse(a){for await(const u of a)for(const{eventType:d,value:f}of u)if(d==="opentag")this.parseOpen(f);else if(d==="text")this.parseText(f);else if(d==="closetag"&&!this.parseClose(f.name))return this.model;return this.model}async parseStream(a){return this.parse(s(a))}get xml(){return this.toXml(this.model)}toXml(a){const u=new o;return this.render(u,a),u.xml}static toAttribute(a,u){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(a===void 0){if(d)return u}else if(d||a!==u)return a.toString()}static toStringAttribute(a,u){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return l.toAttribute(a,u,d)}static toStringValue(a,u){return a===void 0?u:a}static toBoolAttribute(a,u){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(a===void 0){if(d)return u}else if(d||a!==u)return a?"1":"0"}static toBoolValue(a,u){return a===void 0?u:a==="1"}static toIntAttribute(a,u){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return l.toAttribute(a,u,d)}static toIntValue(a,u){return a===void 0?u:parseInt(a,10)}static toFloatAttribute(a,u){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return l.toAttribute(a,u,d)}static toFloatValue(a,u){return a===void 0?u:parseFloat(a)}}n.exports=l},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(t,n,i){const s=t("../base-xform"),o=t("../../../utils/col-cache");function l(a){try{return o.decodeEx(a),!0}catch{return!1}}function c(a){const u=[];let d=!1,f="";return a.split(",").forEach(h=>{if(!h)return;const m=(h.match(/'/g)||[]).length;if(!m)return void(d?f+=h+",":l(h)&&u.push(h));const g=m%2==0;!d&&g&&l(h)?u.push(h):d&&!g?(d=!1,l(f+h)&&u.push(f+h),f=""):(d=!0,f+=h+",")}),u}n.exports=class extends s{render(a,u){a.openNode("definedName",{name:u.name,localSheetId:u.localSheetId}),a.writeText(u.ranges.join(",")),a.closeNode()}parseOpen(a){switch(a.name){case"definedName":return this._parsedName=a.attributes.name,this._parsedLocalSheetId=a.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(a){this._parsedText.push(a)}parseClose(){return this.model={name:this._parsedName,ranges:c(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(t,n,i){const s=t("../../../utils/utils"),o=t("../base-xform");n.exports=class extends o{render(l,c){l.leafNode("sheet",{sheetId:c.id,name:c.name,state:c.state,"r:id":c.rId})}parseOpen(l){return l.name==="sheet"&&(this.model={name:s.xmlDecode(l.attributes.name),id:parseInt(l.attributes.sheetId,10),state:l.attributes.state,rId:l.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{render(o,l){o.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:l.fullCalcOnLoad?1:void 0})}parseOpen(o){return o.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{render(o,l){o.leafNode("workbookPr",{date1904:l.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(o){return o.name==="workbookPr"&&(this.model={date1904:o.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{render(o,l){const c={xWindow:l.x||0,yWindow:l.y||0,windowWidth:l.width||12e3,windowHeight:l.height||24e3,firstSheet:l.firstSheet,activeTab:l.activeTab};l.visibility&&l.visibility!=="visible"&&(c.visibility=l.visibility),o.leafNode("workbookView",c)}parseOpen(o){if(o.name==="workbookView"){const l=this.model={},c=function(u,d,f){const h=d!==void 0?l[u]=d:f;h!==void 0&&(l[u]=h)},a=function(u,d,f){const h=d!==void 0?l[u]=parseInt(d,10):f;h!==void 0&&(l[u]=h)};return a("x",o.attributes.xWindow,0),a("y",o.attributes.yWindow,0),a("width",o.attributes.windowWidth,25e3),a("height",o.attributes.windowHeight,1e4),c("visibility",o.attributes.visibility,"visible"),a("activeTab",o.attributes.activeTab,void 0),a("firstSheet",o.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(t,n,i){const s=t("../../../utils/under-dash"),o=t("../../../utils/col-cache"),l=t("../../../utils/xml-stream"),c=t("../base-xform"),a=t("../static-xform"),u=t("../list-xform"),d=t("./defined-name-xform"),f=t("./sheet-xform"),h=t("./workbook-view-xform"),m=t("./workbook-properties-xform"),g=t("./workbook-calc-properties-xform");class p extends c{constructor(){super(),this.map={fileVersion:p.STATIC_XFORMS.fileVersion,workbookPr:new m,bookViews:new u({tag:"bookViews",count:!1,childXform:new h}),sheets:new u({tag:"sheets",count:!1,childXform:new f}),definedNames:new u({tag:"definedNames",count:!1,childXform:new d}),calcPr:new g}}prepare(b){b.sheets=b.worksheets;const v=[];let E=0;b.sheets.forEach(M=>{if(M.pageSetup&&M.pageSetup.printArea&&M.pageSetup.printArea.split("&&").forEach(W=>{const $=W.split(":"),N={name:"_xlnm.Print_Area",ranges:[`'${M.name}'!$${$[0]}:$${$[1]}`],localSheetId:E};v.push(N)}),M.pageSetup&&(M.pageSetup.printTitlesRow||M.pageSetup.printTitlesColumn)){const W=[];if(M.pageSetup.printTitlesColumn){const N=M.pageSetup.printTitlesColumn.split(":");W.push(`'${M.name}'!$${N[0]}:$${N[1]}`)}if(M.pageSetup.printTitlesRow){const N=M.pageSetup.printTitlesRow.split(":");W.push(`'${M.name}'!$${N[0]}:$${N[1]}`)}const $={name:"_xlnm.Print_Titles",ranges:W,localSheetId:E};v.push($)}E++}),v.length&&(b.definedNames=b.definedNames.concat(v)),(b.media||[]).forEach((M,W)=>{M.name=M.type+(W+1)})}render(b,v){b.openXml(l.StdDocAttributes),b.openNode("workbook",p.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(b),this.map.workbookPr.render(b,v.properties),this.map.bookViews.render(b,v.views),this.map.sheets.render(b,v.sheets),this.map.definedNames.render(b,v.definedNames),this.map.calcPr.render(b,v.calcProperties),b.closeNode()}parseOpen(b){if(this.parser)return this.parser.parseOpen(b),!0;switch(b.name){case"workbook":return!0;default:return this.parser=this.map[b.name],this.parser&&this.parser.parseOpen(b),!0}}parseText(b){this.parser&&this.parser.parseText(b)}parseClose(b){if(this.parser)return this.parser.parseClose(b)||(this.parser=void 0),!0;switch(b){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(b){const v=(b.workbookRels||[]).reduce((N,j)=>(N[j.Id]=j,N),{}),E=[];let M,W=0;(b.sheets||[]).forEach(N=>{const j=v[N.rId];j&&(M=b.worksheetHash["xl/"+j.Target.replace(/^(\s|\/xl\/)+/,"")],M&&(M.name=N.name,M.id=N.id,M.state=N.state,E[W++]=M))});const $=[];s.each(b.definedNames,N=>{if(N.name==="_xlnm.Print_Area"){if(M=E[N.localSheetId],M){M.pageSetup||(M.pageSetup={});const j=o.decodeEx(N.ranges[0]);M.pageSetup.printArea=M.pageSetup.printArea?`${M.pageSetup.printArea}&&${j.dimensions}`:j.dimensions}}else if(N.name==="_xlnm.Print_Titles"){if(M=E[N.localSheetId],M){M.pageSetup||(M.pageSetup={});const j=N.ranges.join(","),F=/\$/g,P=/\$\d+:\$\d+/,L=j.match(P);if(L&&L.length){const C=L[0];M.pageSetup.printTitlesRow=C.replace(F,"")}const k=/\$[A-Z]+:\$[A-Z]+/,R=j.match(k);if(R&&R.length){const C=R[0];M.pageSetup.printTitlesColumn=C.replace(F,"")}}}else $.push(N)}),b.definedNames=$,b.media.forEach((N,j)=>{N.index=j})}}p.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},p.STATIC_XFORMS={fileVersion:new a({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},n.exports=p},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(t,n,i){const s=t("../strings/rich-text-xform"),o=t("../../../utils/utils"),l=t("../base-xform"),c=n.exports=function(a){this.model=a};o.inherits(c,l,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new s),this._richTextXform},render(a,u){u=u||this.model,a.openNode("comment",{ref:u.ref,authorId:0}),a.openNode("text"),u&&u.note&&u.note.texts&&u.note.texts.forEach(d=>{this.richTextXform.render(a,d)}),a.closeNode(),a.closeNode()},parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"comment":return this.model={type:"note",note:{texts:[]},...a.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(a),!0;default:return!1}},parseText(a){this.parser&&this.parser.parseText(a)},parseClose(a){switch(a){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(a),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(t,n,i){const s=t("../../../utils/xml-stream"),o=t("../../../utils/utils"),l=t("../base-xform"),c=t("./comment-xform"),a=n.exports=function(){this.map={comment:new c}};o.inherits(a,l,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(u,d){d=d||this.model,u.openXml(s.StdDocAttributes),u.openNode("comments",a.COMMENTS_ATTRIBUTES),u.openNode("authors"),u.leafNode("author",null,"Author"),u.closeNode(),u.openNode("commentList"),d.comments.forEach(f=>{this.map.comment.render(u,f)}),u.closeNode(),u.closeNode()},parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(u),!0;default:return!1}},parseText(u){this.parser&&this.parser.parseText(u)},parseClose(u){switch(u){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(u),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(t,n,i){const s=t("../../base-xform");n.exports=class extends s{constructor(o){super(),this._model=o}get tag(){return this._model&&this._model.tag}render(o,l,c){(l===c[2]||this.tag==="x:SizeWithCells"&&l===c[1])&&o.leafNode(this.tag)}parseOpen(o){switch(o.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(t,n,i){const s=t("../../base-xform");n.exports=class extends s{constructor(o){super(),this._model=o}get tag(){return this._model&&this._model.tag}render(o,l){o.leafNode(this.tag,null,l)}parseOpen(o){switch(o.name){case this.tag:return this.text="",!0;default:return!1}}parseText(o){this.text=o}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"x:Anchor"}getAnchorRect(o){const l=Math.floor(o.left),c=Math.floor(68*(o.left-l)),a=Math.floor(o.top),u=Math.floor(18*(o.top-a)),d=Math.floor(o.right),f=Math.floor(68*(o.right-d)),h=Math.floor(o.bottom);return[l,c,a,u,d,f,h,Math.floor(18*(o.bottom-h))]}getDefaultRect(o){const l=o.col,c=Math.max(o.row-2,0);return[l,6,c,14,l+2,2,c+4,16]}render(o,l){const c=l.anchor?this.getAnchorRect(l.anchor):this.getDefaultRect(l.refAddress);o.leafNode("x:Anchor",null,c.join(", "))}parseOpen(o){switch(o.name){case this.tag:return this.text="",!0;default:return!1}}parseText(o){this.text=o}parseClose(){return!1}}},{"../base-xform":32}],44:[function(t,n,i){const s=t("../base-xform"),o=t("./vml-anchor-xform"),l=t("./style/vml-protection-xform"),c=t("./style/vml-position-xform"),a=["twoCells","oneCells","absolute"];n.exports=class extends s{constructor(){super(),this.map={"x:Anchor":new o,"x:Locked":new l({tag:"x:Locked"}),"x:LockText":new l({tag:"x:LockText"}),"x:SizeWithCells":new c({tag:"x:SizeWithCells"}),"x:MoveWithCells":new c({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(u,d){const{protection:f,editAs:h}=d.note;u.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(u,h,a),this.map["x:SizeWithCells"].render(u,h,a),this.map["x:Anchor"].render(u,d),this.map["x:Locked"].render(u,f.locked),u.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(u,f.lockText),u.leafNode("x:Row",null,d.refAddress.row-1),u.leafNode("x:Column",null,d.refAddress.col-1),u.closeNode()}parseOpen(u){switch(u.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){const u=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),d=Object.keys(u).length;this.model.editAs=a[d],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(t,n,i){const s=t("../../../utils/xml-stream"),o=t("../base-xform"),l=t("./vml-shape-xform");class c extends o{constructor(){super(),this.map={"v:shape":new l}}get tag(){return"xml"}render(u,d){u.openXml(s.StdDocAttributes),u.openNode(this.tag,c.DRAWING_ATTRIBUTES),u.openNode("o:shapelayout",{"v:ext":"edit"}),u.leafNode("o:idmap",{"v:ext":"edit",data:1}),u.closeNode(),u.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),u.leafNode("v:stroke",{joinstyle:"miter"}),u.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),u.closeNode(),d.comments.forEach((f,h)=>{this.map["v:shape"].render(u,f,h)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(u){case this.tag:return!1;default:return!0}}reconcile(u,d){u.anchors.forEach(f=>{f.br?this.map["xdr:twoCellAnchor"].reconcile(f,d):this.map["xdr:oneCellAnchor"].reconcile(f,d)})}}c.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},n.exports=c},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(t,n,i){const s=t("../base-xform"),o=t("./vml-textbox-xform"),l=t("./vml-client-data-xform");class c extends s{constructor(){super(),this.map={"v:textbox":new o,"x:ClientData":new l}}get tag(){return"v:shape"}render(u,d,f){u.openNode("v:shape",c.V_SHAPE_ATTRIBUTES(d,f)),u.leafNode("v:fill",{color2:"infoBackground [80]"}),u.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),u.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(u,d),this.map["x:ClientData"].render(u,d),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset(),this.model={margins:{insetmode:u.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}c.V_SHAPE_ATTRIBUTES=(a,u)=>({id:"_x0000_s"+(1025+u),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":a.note.margins&&a.note.margins.insetmode}),n.exports=c},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"v:textbox"}conversionUnit(o,l,c){return`${parseFloat(o)*l.toFixed(2)}${c}`}reverseConversionUnit(o){return(o||"").split(",").map(l=>Number(parseFloat(this.conversionUnit(parseFloat(l),.1,"")).toFixed(2)))}render(o,l){const c={style:"mso-direction-alt:auto"};if(l&&l.note){let{inset:a}=l.note&&l.note.margins;Array.isArray(a)&&(a=a.map(u=>this.conversionUnit(u,10,"mm")).join(",")),a&&(c.inset=a)}o.openNode("v:textbox",c),o.leafNode("div",{style:"text-align:left"}),o.closeNode()}parseOpen(o){switch(o.name){case this.tag:return this.model={inset:this.reverseConversionUnit(o.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(o){switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(t,n,i){const s=t("./base-xform");n.exports=class extends s{createNewModel(o){return{}}parseOpen(o){return this.parser=this.parser||this.map[o.name],this.parser?(this.parser.parseOpen(o),!0):o.name===this.tag&&(this.model=this.createNewModel(o),!0)}parseText(o){this.parser&&this.parser.parseText(o)}onParserClose(o,l){this.model[o]=l.model}parseClose(o){return this.parser?(this.parser.parseClose(o)||(this.onParserClose(o,this.parser),this.parser=void 0),!0):o!==this.tag}}},{"./base-xform":32}],49:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{render(o,l){o.openNode("HeadingPairs"),o.openNode("vt:vector",{size:2,baseType:"variant"}),o.openNode("vt:variant"),o.leafNode("vt:lpstr",void 0,"Worksheets"),o.closeNode(),o.openNode("vt:variant"),o.leafNode("vt:i4",void 0,l.length),o.closeNode(),o.closeNode(),o.closeNode()}parseOpen(o){return o.name==="HeadingPairs"}parseText(){}parseClose(o){return o!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{render(o,l){o.openNode("TitlesOfParts"),o.openNode("vt:vector",{size:l.length,baseType:"lpstr"}),l.forEach(c=>{o.leafNode("vt:lpstr",void 0,c.name)}),o.closeNode(),o.closeNode()}parseOpen(o){return o.name==="TitlesOfParts"}parseText(){}parseClose(o){return o!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(t,n,i){const s=t("../../../utils/xml-stream"),o=t("../base-xform"),l=t("../simple/string-xform"),c=t("./app-heading-pairs-xform"),a=t("./app-titles-of-parts-xform");class u extends o{constructor(){super(),this.map={Company:new l({tag:"Company"}),Manager:new l({tag:"Manager"}),HeadingPairs:new c,TitleOfParts:new a}}render(f,h){f.openXml(s.StdDocAttributes),f.openNode("Properties",u.PROPERTY_ATTRIBUTES),f.leafNode("Application",void 0,"Microsoft Excel"),f.leafNode("DocSecurity",void 0,"0"),f.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(f,h.worksheets),this.map.TitleOfParts.render(f,h.worksheets),this.map.Company.render(f,h.company||""),this.map.Manager.render(f,h.manager),f.leafNode("LinksUpToDate",void 0,"false"),f.leafNode("SharedDoc",void 0,"false"),f.leafNode("HyperlinksChanged",void 0,"false"),f.leafNode("AppVersion",void 0,"16.0300"),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"Properties":return!0;default:return this.parser=this.map[f.name],!!this.parser&&(this.parser.parseOpen(f),!0)}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.parser=void 0),!0;switch(f){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}u.DateFormat=function(d){return d.toISOString().replace(/[.]\d{3,6}/,"")},u.DateAttrs={"xsi:type":"dcterms:W3CDTF"},u.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},n.exports=u},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(t,n,i){const s=t("../../../utils/xml-stream"),o=t("../base-xform");class l extends o{render(a,u){a.openXml(s.StdDocAttributes),a.openNode("Types",l.PROPERTY_ATTRIBUTES);const d={};(u.media||[]).forEach(f=>{if(f.type==="image"){const h=f.extension;d[h]||(d[h]=!0,a.leafNode("Default",{Extension:h,ContentType:"image/"+h}))}}),a.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),a.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),a.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),u.worksheets.forEach(f=>{const h=`/xl/worksheets/sheet${f.id}.xml`;a.leafNode("Override",{PartName:h,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),a.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),a.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),u.sharedStrings&&u.sharedStrings.count&&a.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),u.tables&&u.tables.forEach(f=>{a.leafNode("Override",{PartName:"/xl/tables/"+f.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),u.drawings&&u.drawings.forEach(f=>{a.leafNode("Override",{PartName:`/xl/drawings/${f.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),u.commentRefs&&(a.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),u.commentRefs.forEach(f=>{let{commentName:h}=f;a.leafNode("Override",{PartName:`/xl/${h}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),a.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),a.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),a.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}l.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},n.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(t,n,i){const s=t("../../../utils/xml-stream"),o=t("../base-xform"),l=t("../simple/date-xform"),c=t("../simple/string-xform"),a=t("../simple/integer-xform");class u extends o{constructor(){super(),this.map={"dc:creator":new c({tag:"dc:creator"}),"dc:title":new c({tag:"dc:title"}),"dc:subject":new c({tag:"dc:subject"}),"dc:description":new c({tag:"dc:description"}),"dc:identifier":new c({tag:"dc:identifier"}),"dc:language":new c({tag:"dc:language"}),"cp:keywords":new c({tag:"cp:keywords"}),"cp:category":new c({tag:"cp:category"}),"cp:lastModifiedBy":new c({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new l({tag:"cp:lastPrinted",format:u.DateFormat}),"cp:revision":new a({tag:"cp:revision"}),"cp:version":new c({tag:"cp:version"}),"cp:contentStatus":new c({tag:"cp:contentStatus"}),"cp:contentType":new c({tag:"cp:contentType"}),"dcterms:created":new l({tag:"dcterms:created",attrs:u.DateAttrs,format:u.DateFormat}),"dcterms:modified":new l({tag:"dcterms:modified",attrs:u.DateAttrs,format:u.DateFormat})}}render(f,h){f.openXml(s.StdDocAttributes),f.openNode("cp:coreProperties",u.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(f,h.creator),this.map["dc:title"].render(f,h.title),this.map["dc:subject"].render(f,h.subject),this.map["dc:description"].render(f,h.description),this.map["dc:identifier"].render(f,h.identifier),this.map["dc:language"].render(f,h.language),this.map["cp:keywords"].render(f,h.keywords),this.map["cp:category"].render(f,h.category),this.map["cp:lastModifiedBy"].render(f,h.lastModifiedBy),this.map["cp:lastPrinted"].render(f,h.lastPrinted),this.map["cp:revision"].render(f,h.revision),this.map["cp:version"].render(f,h.version),this.map["cp:contentStatus"].render(f,h.contentStatus),this.map["cp:contentType"].render(f,h.contentType),this.map["dcterms:created"].render(f,h.created),this.map["dcterms:modified"].render(f,h.modified),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[f.name],this.parser)return this.parser.parseOpen(f),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(f))}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.parser=void 0),!0;switch(f){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+f)}}}u.DateFormat=function(d){return d.toISOString().replace(/[.]\d{3}/,"")},u.DateAttrs={"xsi:type":"dcterms:W3CDTF"},u.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},n.exports=u},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{render(o,l){o.leafNode("Relationship",l)}parseOpen(o){switch(o.name){case"Relationship":return this.model=o.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(t,n,i){const s=t("../../../utils/xml-stream"),o=t("../base-xform"),l=t("./relationship-xform");class c extends o{constructor(){super(),this.map={Relationship:new l}}render(u,d){d=d||this._values,u.openXml(s.StdDocAttributes),u.openNode("Relationships",c.RELATIONSHIPS_ATTRIBUTES),d.forEach(f=>{this.map.Relationship.render(u,f)}),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[u.name],this.parser)return this.parser.parseOpen(u),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(u))}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(u){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+u)}}}c.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},n.exports=c},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:this.reset(),this.model={range:{editAs:o.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[o.name],this.parser&&this.parser.parseOpen(o)}return!0}parseText(o){this.parser&&this.parser.parseText(o)}reconcilePicture(o,l){if(o&&o.rId){const c=l.rels[o.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(c){const a=c[1],u=l.mediaIndex[a];return l.media[u]}}}}},{"../base-xform":32}],57:[function(t,n,i){const s=t("../base-xform"),o=t("./blip-xform");n.exports=class extends s{constructor(){super(),this.map={"a:blip":new o}}get tag(){return"xdr:blipFill"}render(l,c){l.openNode(this.tag),this.map["a:blip"].render(l,c),l.openNode("a:stretch"),l.leafNode("a:fillRect"),l.closeNode(),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(){}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"a:blip"}render(o,l){o.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":l.rId,cstate:"print"})}parseOpen(o){switch(o.name){case this.tag:return this.model={rId:o.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(o){switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"xdr:cNvPicPr"}render(o){o.openNode(this.tag),o.leafNode("a:picLocks",{noChangeAspect:"1"}),o.closeNode()}parseOpen(o){switch(o.name){case this.tag:default:return!0}}parseText(){}parseClose(o){switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(t,n,i){const s=t("../base-xform"),o=t("./hlink-click-xform"),l=t("./ext-lst-xform");n.exports=class extends s{constructor(){super(),this.map={"a:hlinkClick":new o,"a:extLst":new l}}get tag(){return"xdr:cNvPr"}render(c,a){c.openNode(this.tag,{id:a.index,name:"Picture "+a.index}),this.map["a:hlinkClick"].render(c,a),this.map["a:extLst"].render(c,a),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset();break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(){}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(t,n,i){const s=t("../base-xform"),o=t("../simple/integer-xform");n.exports=class extends s{constructor(l){super(),this.tag=l.tag,this.map={"xdr:col":new o({tag:"xdr:col",zero:!0}),"xdr:colOff":new o({tag:"xdr:colOff",zero:!0}),"xdr:row":new o({tag:"xdr:row",zero:!0}),"xdr:rowOff":new o({tag:"xdr:rowOff",zero:!0})}}render(l,c){l.openNode(this.tag),this.map["xdr:col"].render(l,c.nativeCol),this.map["xdr:colOff"].render(l,c.nativeColOff),this.map["xdr:row"].render(l,c.nativeRow),this.map["xdr:rowOff"].render(l,c.nativeRowOff),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(t,n,i){const s=t("../../../utils/col-cache"),o=t("../../../utils/xml-stream"),l=t("../base-xform"),c=t("./two-cell-anchor-xform"),a=t("./one-cell-anchor-xform");class u extends l{constructor(){super(),this.map={"xdr:twoCellAnchor":new c,"xdr:oneCellAnchor":new a}}prepare(f){f.anchors.forEach((h,m)=>{h.anchorType=function(g){return(typeof g.range=="string"?s.decode(g.range):g.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"}(h),this.map[h.anchorType].prepare(h,{index:m})})}get tag(){return"xdr:wsDr"}render(f,h){f.openXml(o.StdDocAttributes),f.openNode(this.tag,u.DRAWING_ATTRIBUTES),h.anchors.forEach(m=>{this.map[m.anchorType].render(f,m)}),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[f.name],this.parser&&this.parser.parseOpen(f)}return!0}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(f){case this.tag:return!1;default:return!0}}reconcile(f,h){f.anchors.forEach(m=>{m.br?this.map["xdr:twoCellAnchor"].reconcile(m,h):this.map["xdr:oneCellAnchor"].reconcile(m,h)})}}u.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},n.exports=u},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"a:extLst"}render(o){o.openNode(this.tag),o.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),o.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),o.closeNode(),o.closeNode()}parseOpen(o){switch(o.name){case this.tag:default:return!0}}parseText(){}parseClose(o){switch(o){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{constructor(o){super(),this.tag=o.tag,this.map={}}render(o,l){o.openNode(this.tag);const c=Math.floor(9525*l.width),a=Math.floor(9525*l.height);o.addAttribute("cx",c),o.addAttribute("cy",a),o.closeNode()}parseOpen(o){return o.name===this.tag&&(this.model={width:parseInt(o.attributes.cx||"0",10)/9525,height:parseInt(o.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"a:hlinkClick"}render(o,l){l.hyperlinks&&l.hyperlinks.rId&&o.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":l.hyperlinks.rId,tooltip:l.hyperlinks.tooltip})}parseOpen(o){switch(o.name){case this.tag:return this.model={hyperlinks:{rId:o.attributes["r:id"],tooltip:o.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(t,n,i){const s=t("../base-xform"),o=t("./c-nv-pr-xform"),l=t("./c-nv-pic-pr-xform");n.exports=class extends s{constructor(){super(),this.map={"xdr:cNvPr":new o,"xdr:cNvPicPr":new l}}get tag(){return"xdr:nvPicPr"}render(c,a){c.openNode(this.tag),this.map["xdr:cNvPr"].render(c,a),this.map["xdr:cNvPicPr"].render(c,a),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset();break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(){}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(t,n,i){const s=t("./base-cell-anchor-xform"),o=t("../static-xform"),l=t("./cell-position-xform"),c=t("./ext-xform"),a=t("./pic-xform");n.exports=class extends s{constructor(){super(),this.map={"xdr:from":new l({tag:"xdr:from"}),"xdr:ext":new c({tag:"xdr:ext"}),"xdr:pic":new a,"xdr:clientData":new o({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(u,d){this.map["xdr:pic"].prepare(u.picture,d)}render(u,d){u.openNode(this.tag,{editAs:d.range.editAs||"oneCell"}),this.map["xdr:from"].render(u,d.range.tl),this.map["xdr:ext"].render(u,d.range.ext),this.map["xdr:pic"].render(u,d.picture),this.map["xdr:clientData"].render(u,{}),u.closeNode()}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.parser=void 0),!0;switch(u){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(u,d){u.medium=this.reconcilePicture(u.picture,d)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(t,n,i){const s=t("../base-xform"),o=t("../static-xform"),l=t("./blip-fill-xform"),c=t("./nv-pic-pr-xform"),a=t("./sp-pr");n.exports=class extends s{constructor(){super(),this.map={"xdr:nvPicPr":new c,"xdr:blipFill":new l,"xdr:spPr":new o(a)}}get tag(){return"xdr:pic"}prepare(u,d){u.index=d.index+1}render(u,d){u.openNode(this.tag),this.map["xdr:nvPicPr"].render(u,d),this.map["xdr:blipFill"].render(u,d),this.map["xdr:spPr"].render(u,d),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.tag:this.reset();break;default:this.parser=this.map[u.name],this.parser&&this.parser.parseOpen(u)}return!0}parseText(){}parseClose(u){if(this.parser)return this.parser.parseClose(u)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(u){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(t,n,i){n.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(t,n,i){const s=t("./base-cell-anchor-xform"),o=t("../static-xform"),l=t("./cell-position-xform"),c=t("./pic-xform");n.exports=class extends s{constructor(){super(),this.map={"xdr:from":new l({tag:"xdr:from"}),"xdr:to":new l({tag:"xdr:to"}),"xdr:pic":new c,"xdr:clientData":new o({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(a,u){this.map["xdr:pic"].prepare(a.picture,u)}render(a,u){a.openNode(this.tag,{editAs:u.range.editAs||"oneCell"}),this.map["xdr:from"].render(a,u.range.tl),this.map["xdr:to"].render(a,u.range.br),this.map["xdr:pic"].render(a,u.picture),this.map["xdr:clientData"].render(a,{}),a.closeNode()}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(a,u){a.medium=this.reconcilePicture(a.picture,u)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(t,n,i){const s=t("./base-xform");n.exports=class extends s{constructor(o){super(),this.tag=o.tag,this.always=!!o.always,this.count=o.count,this.empty=o.empty,this.$count=o.$count||"count",this.$=o.$,this.childXform=o.childXform,this.maxItems=o.maxItems}prepare(o,l){const{childXform:c}=this;o&&o.forEach((a,u)=>{l.index=u,c.prepare(a,l)})}render(o,l){if(this.always||l&&l.length){o.openNode(this.tag,this.$),this.count&&o.addAttribute(this.$count,l&&l.length||0);const{childXform:c}=this;(l||[]).forEach((a,u)=>{c.render(o,a,u)}),o.closeNode()}else this.empty&&o.leafNode(this.tag)}parseOpen(o){if(this.parser)return this.parser.parseOpen(o),!0;switch(o.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(o)&&(this.parser=this.childXform,!0)}}parseText(o){this.parser&&this.parser.parseText(o)}parseClose(o){if(this.parser){if(!this.parser.parseClose(o)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(o,l){if(o){const{childXform:c}=this;o.forEach(a=>{c.reconcile(a,l)})}}}},{"./base-xform":32}],72:[function(t,n,i){const s=t("../../../utils/col-cache"),o=t("../base-xform");n.exports=class extends o{get tag(){return"autoFilter"}render(l,c){if(c)if(typeof c=="string")l.leafNode("autoFilter",{ref:c});else{const a=function(f){return typeof f=="string"?f:s.getAddress(f.row,f.column).address},u=a(c.from),d=a(c.to);u&&d&&l.leafNode("autoFilter",{ref:`${u}:${d}`})}}parseOpen(l){l.name==="autoFilter"&&(this.model=l.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(t,n,i){const s=t("../../../utils/utils"),o=t("../base-xform"),l=t("../../../doc/range"),c=t("../../../doc/enums"),a=t("../strings/rich-text-xform");function u(d){if(d==null)return c.ValueType.Null;if(d instanceof String||typeof d=="string")return c.ValueType.String;if(typeof d=="number")return c.ValueType.Number;if(typeof d=="boolean")return c.ValueType.Boolean;if(d instanceof Date)return c.ValueType.Date;if(d.text&&d.hyperlink)return c.ValueType.Hyperlink;if(d.formula)return c.ValueType.Formula;if(d.error)return c.ValueType.Error;throw new Error("I could not understand type of value")}n.exports=class extends o{constructor(){super(),this.richTextXForm=new a}get tag(){return"c"}prepare(d,f){const h=f.styles.addStyleModel(d.style||{},function(m){switch(m.type){case c.ValueType.Formula:return u(m.result);default:return m.type}}(d));switch(h&&(d.styleId=h),d.comment&&f.comments.push({...d.comment,ref:d.address}),d.type){case c.ValueType.String:case c.ValueType.RichText:f.sharedStrings&&(d.ssId=f.sharedStrings.add(d.value));break;case c.ValueType.Date:f.date1904&&(d.date1904=!0);break;case c.ValueType.Hyperlink:f.sharedStrings&&d.text!==void 0&&d.text!==null&&(d.ssId=f.sharedStrings.add(d.text)),f.hyperlinks.push({address:d.address,target:d.hyperlink,tooltip:d.tooltip});break;case c.ValueType.Merge:f.merges.add(d);break;case c.ValueType.Formula:if(f.date1904&&(d.date1904=!0),d.shareType==="shared"&&(d.si=f.siFormulae++),d.formula)f.formulae[d.address]=d;else if(d.sharedFormula){const m=f.formulae[d.sharedFormula];if(!m)throw new Error("Shared Formula master must exist above and or left of clone for cell "+d.address);m.si===void 0?(m.shareType="shared",m.si=f.siFormulae++,m.range=new l(m.address,d.address)):m.range&&m.range.expandToAddress(d.address),d.si=m.si}}}renderFormula(d,f){let h=null;switch(f.shareType){case"shared":h={t:"shared",ref:f.ref||f.range.range,si:f.si};break;case"array":h={t:"array",ref:f.ref};break;default:f.si!==void 0&&(h={t:"shared",si:f.si})}switch(u(f.result)){case c.ValueType.Null:d.leafNode("f",h,f.formula);break;case c.ValueType.String:d.addAttribute("t","str"),d.leafNode("f",h,f.formula),d.leafNode("v",null,f.result);break;case c.ValueType.Number:d.leafNode("f",h,f.formula),d.leafNode("v",null,f.result);break;case c.ValueType.Boolean:d.addAttribute("t","b"),d.leafNode("f",h,f.formula),d.leafNode("v",null,f.result?1:0);break;case c.ValueType.Error:d.addAttribute("t","e"),d.leafNode("f",h,f.formula),d.leafNode("v",null,f.result.error);break;case c.ValueType.Date:d.leafNode("f",h,f.formula),d.leafNode("v",null,s.dateToExcel(f.result,f.date1904));break;default:throw new Error("I could not understand type of value")}}render(d,f){if(f.type!==c.ValueType.Null||f.styleId){switch(d.openNode("c"),d.addAttribute("r",f.address),f.styleId&&d.addAttribute("s",f.styleId),f.type){case c.ValueType.Null:break;case c.ValueType.Number:d.leafNode("v",null,f.value);break;case c.ValueType.Boolean:d.addAttribute("t","b"),d.leafNode("v",null,f.value?"1":"0");break;case c.ValueType.Error:d.addAttribute("t","e"),d.leafNode("v",null,f.value.error);break;case c.ValueType.String:case c.ValueType.RichText:f.ssId!==void 0?(d.addAttribute("t","s"),d.leafNode("v",null,f.ssId)):f.value&&f.value.richText?(d.addAttribute("t","inlineStr"),d.openNode("is"),f.value.richText.forEach(h=>{this.richTextXForm.render(d,h)}),d.closeNode("is")):(d.addAttribute("t","str"),d.leafNode("v",null,f.value));break;case c.ValueType.Date:d.leafNode("v",null,s.dateToExcel(f.value,f.date1904));break;case c.ValueType.Hyperlink:f.ssId!==void 0?(d.addAttribute("t","s"),d.leafNode("v",null,f.ssId)):(d.addAttribute("t","str"),d.leafNode("v",null,f.text));break;case c.ValueType.Formula:this.renderFormula(d,f);break;case c.ValueType.Merge:}d.closeNode()}}parseOpen(d){if(this.parser)return this.parser.parseOpen(d),!0;switch(d.name){case"c":return this.model={address:d.attributes.r},this.t=d.attributes.t,d.attributes.s&&(this.model.styleId=parseInt(d.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=d.attributes.si,this.model.shareType=d.attributes.t,this.model.ref=d.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(d),!0;default:return!1}}parseText(d){if(this.parser)this.parser.parseText(d);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+d:d;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+d:d:this.model.value=this.model.value?this.model.value+d:d}}parseClose(d){switch(d){case"c":{const{model:f}=this;if(f.formula||f.shareType)f.type=c.ValueType.Formula,f.value&&(this.t==="str"?f.result=s.xmlDecode(f.value):this.t==="b"?f.result=parseInt(f.value,10)!==0:this.t==="e"?f.result={error:f.value}:f.result=parseFloat(f.value),f.value=void 0);else if(f.value!==void 0)switch(this.t){case"s":f.type=c.ValueType.String,f.value=parseInt(f.value,10);break;case"str":f.type=c.ValueType.String,f.value=s.xmlDecode(f.value);break;case"inlineStr":f.type=c.ValueType.String;break;case"b":f.type=c.ValueType.Boolean,f.value=parseInt(f.value,10)!==0;break;case"e":f.type=c.ValueType.Error,f.value={error:f.value};break;default:f.type=c.ValueType.Number,f.value=parseFloat(f.value)}else f.styleId?f.type=c.ValueType.Null:f.type=c.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(d),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(d),!0)}}reconcile(d,f){const h=d.styleId&&f.styles&&f.styles.getStyleModel(d.styleId);switch(h&&(d.style=h),d.styleId!==void 0&&(d.styleId=void 0),d.type){case c.ValueType.String:typeof d.value=="number"&&f.sharedStrings&&(d.value=f.sharedStrings.getString(d.value)),d.value.richText&&(d.type=c.ValueType.RichText);break;case c.ValueType.Number:h&&s.isDateFmt(h.numFmt)&&(d.type=c.ValueType.Date,d.value=s.excelToDate(d.value,f.date1904));break;case c.ValueType.Formula:d.result!==void 0&&h&&s.isDateFmt(h.numFmt)&&(d.result=s.excelToDate(d.result,f.date1904)),d.shareType==="shared"&&(d.ref?f.formulae[d.si]=d.address:(d.sharedFormula=f.formulae[d.si],delete d.shareType),delete d.si)}const m=f.hyperlinkMap[d.address];m&&(d.type===c.ValueType.Formula?(d.text=d.result,d.result=void 0):(d.text=d.value,d.value=void 0),d.type=c.ValueType.Hyperlink,d.hyperlink=m);const g=f.commentsMap&&f.commentsMap[d.address];g&&(d.comment=g)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(t,n,i){const s=t("../../base-xform");n.exports=class extends s{get tag(){return"x14:cfIcon"}render(o,l){o.leafNode(this.tag,{iconSet:l.iconSet,iconId:l.iconId})}parseOpen(o){let{attributes:l}=o;this.model={iconSet:l.iconSet,iconId:s.toIntValue(l.iconId)}}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],75:[function(t,n,i){const{v4:s}=t("uuid"),o=t("../../base-xform"),l=t("../../composite-xform"),c=t("./databar-ext-xform"),a=t("./icon-set-ext-xform"),u={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class d extends l{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new c,"x14:iconSet":this.iconSetXform=new a}}get tag(){return"x14:cfRule"}static isExt(h){return h.type==="dataBar"?c.isExt(h):!(h.type!=="iconSet"||!h.custom&&!u[h.iconSet])}prepare(h){d.isExt(h)&&(h.x14Id=`{${s()}}`.toUpperCase())}render(h,m){if(d.isExt(m))switch(m.type){case"dataBar":this.renderDataBar(h,m);break;case"iconSet":this.renderIconSet(h,m)}}renderDataBar(h,m){h.openNode(this.tag,{type:"dataBar",id:m.x14Id}),this.databarXform.render(h,m),h.closeNode()}renderIconSet(h,m){h.openNode(this.tag,{type:"iconSet",priority:m.priority,id:m.x14Id||`{${s()}}`}),this.iconSetXform.render(h,m),h.closeNode()}createNewModel(h){let{attributes:m}=h;return{type:m.type,x14Id:m.id,priority:o.toIntValue(m.priority)}}onParserClose(h,m){Object.assign(this.model,m.model)}}n.exports=d},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(t,n,i){const s=t("../../composite-xform"),o=t("./f-ext-xform");n.exports=class extends s{constructor(){super(),this.map={"xm:f":this.fExtXform=new o}}get tag(){return"x14:cfvo"}render(l,c){l.openNode(this.tag,{type:c.type}),c.value!==void 0&&this.fExtXform.render(l,c.value),l.closeNode()}createNewModel(l){return{type:l.attributes.type}}onParserClose(l,c){switch(l){case"xm:f":this.model.value=c.model?parseFloat(c.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(t,n,i){const s=t("../../composite-xform"),o=t("./sqref-ext-xform"),l=t("./cf-rule-ext-xform");n.exports=class extends s{constructor(){super(),this.map={"xm:sqref":this.sqRef=new o,"x14:cfRule":this.cfRule=new l}}get tag(){return"x14:conditionalFormatting"}prepare(c,a){c.rules.forEach(u=>{this.cfRule.prepare(u,a)})}render(c,a){a.rules.some(l.isExt)&&(c.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),a.rules.filter(l.isExt).forEach(u=>this.cfRule.render(c,u)),this.sqRef.render(c,a.ref),c.closeNode())}createNewModel(){return{rules:[]}}onParserClose(c,a){switch(c){case"xm:sqref":this.model.ref=a.model;break;case"x14:cfRule":this.model.rules.push(a.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(t,n,i){const s=t("../../composite-xform"),o=t("./cf-rule-ext-xform"),l=t("./conditional-formatting-ext-xform");n.exports=class extends s{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new l}}get tag(){return"x14:conditionalFormattings"}hasContent(c){return c.hasExtContent===void 0&&(c.hasExtContent=c.some(a=>a.rules.some(o.isExt))),c.hasExtContent}prepare(c,a){c.forEach(u=>{this.cfXform.prepare(u,a)})}render(c,a){this.hasContent(a)&&(c.openNode(this.tag),a.forEach(u=>this.cfXform.render(c,u)),c.closeNode())}createNewModel(){return[]}onParserClose(c,a){this.model.push(a.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(t,n,i){const s=t("../../base-xform"),o=t("../../composite-xform"),l=t("../../style/color-xform"),c=t("./cfvo-ext-xform");n.exports=class extends o{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new c,"x14:borderColor":this.borderColorXform=new l("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new l("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new l("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new l("x14:axisColor")}}static isExt(a){return!a.gradient}get tag(){return"x14:dataBar"}render(a,u){a.openNode(this.tag,{minLength:s.toIntAttribute(u.minLength,0,!0),maxLength:s.toIntAttribute(u.maxLength,100,!0),border:s.toBoolAttribute(u.border,!1),gradient:s.toBoolAttribute(u.gradient,!0),negativeBarColorSameAsPositive:s.toBoolAttribute(u.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:s.toBoolAttribute(u.negativeBarBorderColorSameAsPositive,!0),axisPosition:s.toAttribute(u.axisPosition,"auto"),direction:s.toAttribute(u.direction,"leftToRight")}),u.cfvo.forEach(d=>{this.cfvoXform.render(a,d)}),this.borderColorXform.render(a,u.borderColor),this.negativeBorderColorXform.render(a,u.negativeBorderColor),this.negativeFillColorXform.render(a,u.negativeFillColor),this.axisColorXform.render(a,u.axisColor),a.closeNode()}createNewModel(a){let{attributes:u}=a;return{cfvo:[],minLength:s.toIntValue(u.minLength,0),maxLength:s.toIntValue(u.maxLength,100),border:s.toBoolValue(u.border,!1),gradient:s.toBoolValue(u.gradient,!0),negativeBarColorSameAsPositive:s.toBoolValue(u.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:s.toBoolValue(u.negativeBarBorderColorSameAsPositive,!0),axisPosition:s.toStringValue(u.axisPosition,"auto"),direction:s.toStringValue(u.direction,"leftToRight")}}onParserClose(a,u){const[,d]=a.split(":");switch(d){case"cfvo":this.model.cfvo.push(u.model);break;default:this.model[d]=u.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(t,n,i){const s=t("../../base-xform");n.exports=class extends s{get tag(){return"xm:f"}render(o,l){o.leafNode(this.tag,null,l)}parseOpen(){this.model=""}parseText(o){this.model+=o}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],81:[function(t,n,i){const s=t("../../base-xform"),o=t("../../composite-xform"),l=t("./cfvo-ext-xform"),c=t("./cf-icon-ext-xform");n.exports=class extends o{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new l,"x14:cfIcon":this.cfIconXform=new c}}get tag(){return"x14:iconSet"}render(a,u){a.openNode(this.tag,{iconSet:s.toStringAttribute(u.iconSet),reverse:s.toBoolAttribute(u.reverse,!1),showValue:s.toBoolAttribute(u.showValue,!0),custom:s.toBoolAttribute(u.icons,!1)}),u.cfvo.forEach(d=>{this.cfvoXform.render(a,d)}),u.icons&&u.icons.forEach((d,f)=>{d.iconId=f,this.cfIconXform.render(a,d)}),a.closeNode()}createNewModel(a){let{attributes:u}=a;return{cfvo:[],iconSet:s.toStringValue(u.iconSet,"3TrafficLights"),reverse:s.toBoolValue(u.reverse,!1),showValue:s.toBoolValue(u.showValue,!0)}}onParserClose(a,u){const[,d]=a.split(":");switch(d){case"cfvo":this.model.cfvo.push(u.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(u.model);break;default:this.model[d]=u.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(t,n,i){const s=t("../../base-xform");n.exports=class extends s{get tag(){return"xm:sqref"}render(o,l){o.leafNode(this.tag,null,l)}parseOpen(){this.model=""}parseText(o){this.model+=o}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],83:[function(t,n,i){const s=t("../../base-xform"),o=t("../../composite-xform"),l=t("../../../../doc/range"),c=t("./databar-xform"),a=t("./ext-lst-ref-xform"),u=t("./formula-xform"),d=t("./color-scale-xform"),f=t("./icon-set-xform"),h={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},m=p=>{const{type:y,operator:b}=p;switch(y){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:y};default:return{type:y,operator:b}}};class g extends o{constructor(){super(),this.map={dataBar:this.databarXform=new c,extLst:this.extLstRefXform=new a,formula:this.formulaXform=new u,colorScale:this.colorScaleXform=new d,iconSet:this.iconSetXform=new f}}get tag(){return"cfRule"}static isPrimitive(y){return y.type!=="iconSet"||!y.custom&&!h[y.iconSet]}render(y,b){switch(b.type){case"expression":this.renderExpression(y,b);break;case"cellIs":this.renderCellIs(y,b);break;case"top10":this.renderTop10(y,b);break;case"aboveAverage":this.renderAboveAverage(y,b);break;case"dataBar":this.renderDataBar(y,b);break;case"colorScale":this.renderColorScale(y,b);break;case"iconSet":this.renderIconSet(y,b);break;case"containsText":this.renderText(y,b);break;case"timePeriod":this.renderTimePeriod(y,b)}}renderExpression(y,b){y.openNode(this.tag,{type:"expression",dxfId:b.dxfId,priority:b.priority}),this.formulaXform.render(y,b.formulae[0]),y.closeNode()}renderCellIs(y,b){y.openNode(this.tag,{type:"cellIs",dxfId:b.dxfId,priority:b.priority,operator:b.operator}),b.formulae.forEach(v=>{this.formulaXform.render(y,v)}),y.closeNode()}renderTop10(y,b){y.leafNode(this.tag,{type:"top10",dxfId:b.dxfId,priority:b.priority,percent:s.toBoolAttribute(b.percent,!1),bottom:s.toBoolAttribute(b.bottom,!1),rank:s.toIntValue(b.rank,10,!0)})}renderAboveAverage(y,b){y.leafNode(this.tag,{type:"aboveAverage",dxfId:b.dxfId,priority:b.priority,aboveAverage:s.toBoolAttribute(b.aboveAverage,!0)})}renderDataBar(y,b){y.openNode(this.tag,{type:"dataBar",priority:b.priority}),this.databarXform.render(y,b),this.extLstRefXform.render(y,b),y.closeNode()}renderColorScale(y,b){y.openNode(this.tag,{type:"colorScale",priority:b.priority}),this.colorScaleXform.render(y,b),y.closeNode()}renderIconSet(y,b){g.isPrimitive(b)&&(y.openNode(this.tag,{type:"iconSet",priority:b.priority}),this.iconSetXform.render(y,b),y.closeNode())}renderText(y,b){y.openNode(this.tag,{type:b.operator,dxfId:b.dxfId,priority:b.priority,operator:s.toStringAttribute(b.operator,"containsText")});const v=(E=>{if(E.formulae&&E.formulae[0])return E.formulae[0];const M=new l(E.ref),{tl:W}=M;switch(E.operator){case"containsText":return`NOT(ISERROR(SEARCH("${E.text}",${W})))`;case"containsBlanks":return`LEN(TRIM(${W}))=0`;case"notContainsBlanks":return`LEN(TRIM(${W}))>0`;case"containsErrors":return`ISERROR(${W})`;case"notContainsErrors":return`NOT(ISERROR(${W}))`;default:return}})(b);v&&this.formulaXform.render(y,v),y.closeNode()}renderTimePeriod(y,b){y.openNode(this.tag,{type:"timePeriod",dxfId:b.dxfId,priority:b.priority,timePeriod:b.timePeriod});const v=(E=>{if(E.formulae&&E.formulae[0])return E.formulae[0];const M=new l(E.ref),{tl:W}=M;switch(E.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${W},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${W},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${W},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${W},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${W},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${W},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${W},1)=TODAY()-1`;case"today":return`FLOOR(${W},1)=TODAY()`;case"tomorrow":return`FLOOR(${W},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${W},1)<=6,FLOOR(${W},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${W})=MONTH(EDATE(TODAY(),0-1)),YEAR(${W})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${W})=MONTH(TODAY()),YEAR(${W})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${W})=MONTH(EDATE(TODAY(),0+1)),YEAR(${W})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(b);v&&this.formulaXform.render(y,v),y.closeNode()}createNewModel(y){let{attributes:b}=y;return{...m(b),dxfId:s.toIntValue(b.dxfId),priority:s.toIntValue(b.priority),timePeriod:b.timePeriod,percent:s.toBoolValue(b.percent),bottom:s.toBoolValue(b.bottom),rank:s.toIntValue(b.rank),aboveAverage:s.toBoolValue(b.aboveAverage)}}onParserClose(y,b){switch(y){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,b.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(b.model)}}}n.exports=g},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(t,n,i){const s=t("../../base-xform");n.exports=class extends s{get tag(){return"cfvo"}render(o,l){o.leafNode(this.tag,{type:l.type,val:l.value})}parseOpen(o){this.model={type:o.attributes.type,value:s.toFloatValue(o.attributes.val)}}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],85:[function(t,n,i){const s=t("../../composite-xform"),o=t("../../style/color-xform"),l=t("./cfvo-xform");n.exports=class extends s{constructor(){super(),this.map={cfvo:this.cfvoXform=new l,color:this.colorXform=new o}}get tag(){return"colorScale"}render(c,a){c.openNode(this.tag),a.cfvo.forEach(u=>{this.cfvoXform.render(c,u)}),a.color.forEach(u=>{this.colorXform.render(c,u)}),c.closeNode()}createNewModel(c){return{cfvo:[],color:[]}}onParserClose(c,a){this.model[c].push(a.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(t,n,i){const s=t("../../composite-xform"),o=t("./cf-rule-xform");n.exports=class extends s{constructor(){super(),this.map={cfRule:new o}}get tag(){return"conditionalFormatting"}render(l,c){c.rules.some(o.isPrimitive)&&(l.openNode(this.tag,{sqref:c.ref}),c.rules.forEach(a=>{o.isPrimitive(a)&&(a.ref=c.ref,this.map.cfRule.render(l,a))}),l.closeNode())}createNewModel(l){let{attributes:c}=l;return{ref:c.sqref,rules:[]}}onParserClose(l,c){this.model.rules.push(c.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(t,n,i){const s=t("../../base-xform"),o=t("./conditional-formatting-xform");n.exports=class extends s{constructor(){super(),this.cfXform=new o}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(l,c){let a=l.reduce((u,d)=>Math.max(u,...d.rules.map(f=>f.priority||0)),1);l.forEach(u=>{u.rules.forEach(d=>{d.priority||(d.priority=a++),d.style&&(d.dxfId=c.styles.addDxfStyle(d.style))})})}render(l,c){c.forEach(a=>{this.cfXform.render(l,a)})}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(l),!0;default:return!1}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){return!!this.parser&&(!!this.parser.parseClose(l)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(l,c){l.forEach(a=>{a.rules.forEach(u=>{u.dxfId!==void 0&&(u.style=c.styles.getDxfStyle(u.dxfId),delete u.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(t,n,i){const s=t("../../composite-xform"),o=t("../../style/color-xform"),l=t("./cfvo-xform");n.exports=class extends s{constructor(){super(),this.map={cfvo:this.cfvoXform=new l,color:this.colorXform=new o}}get tag(){return"dataBar"}render(c,a){c.openNode(this.tag),a.cfvo.forEach(u=>{this.cfvoXform.render(c,u)}),this.colorXform.render(c,a.color),c.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(c,a){switch(c){case"cfvo":this.model.cfvo.push(a.model);break;case"color":this.model.color=a.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(t,n,i){const s=t("../../base-xform"),o=t("../../composite-xform");class l extends s{get tag(){return"x14:id"}render(u,d){u.leafNode(this.tag,null,d)}parseOpen(){this.model=""}parseText(u){this.model+=u}parseClose(u){return u!==this.tag}}class c extends o{constructor(){super(),this.map={"x14:id":this.idXform=new l}}get tag(){return"ext"}render(u,d){u.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(u,d.x14Id),u.closeNode()}createNewModel(){return{}}onParserClose(u,d){this.model.x14Id=d.model}}n.exports=class extends o{constructor(){super(),this.map={ext:new c}}get tag(){return"extLst"}render(a,u){a.openNode(this.tag),this.map.ext.render(a,u),a.closeNode()}createNewModel(){return{}}onParserClose(a,u){Object.assign(this.model,u.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(t,n,i){const s=t("../../base-xform");n.exports=class extends s{get tag(){return"formula"}render(o,l){o.leafNode(this.tag,null,l)}parseOpen(){this.model=""}parseText(o){this.model+=o}parseClose(o){return o!==this.tag}}},{"../../base-xform":32}],91:[function(t,n,i){const s=t("../../base-xform"),o=t("../../composite-xform"),l=t("./cfvo-xform");n.exports=class extends o{constructor(){super(),this.map={cfvo:this.cfvoXform=new l}}get tag(){return"iconSet"}render(c,a){c.openNode(this.tag,{iconSet:s.toStringAttribute(a.iconSet,"3TrafficLights"),reverse:s.toBoolAttribute(a.reverse,!1),showValue:s.toBoolAttribute(a.showValue,!0)}),a.cfvo.forEach(u=>{this.cfvoXform.render(c,u)}),c.closeNode()}createNewModel(c){let{attributes:a}=c;return{iconSet:s.toStringValue(a.iconSet,"3TrafficLights"),reverse:s.toBoolValue(a.reverse),showValue:s.toBoolValue(a.showValue),cfvo:[]}}onParserClose(c,a){this.model[c].push(a.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(t,n,i){const s=t("../../../utils/utils"),o=t("../base-xform");n.exports=class extends o{get tag(){return"col"}prepare(l,c){const a=c.styles.addStyleModel(l.style||{});a&&(l.styleId=a)}render(l,c){l.openNode("col"),l.addAttribute("min",c.min),l.addAttribute("max",c.max),c.width&&l.addAttribute("width",c.width),c.styleId&&l.addAttribute("style",c.styleId),c.hidden&&l.addAttribute("hidden","1"),c.bestFit&&l.addAttribute("bestFit","1"),c.outlineLevel&&l.addAttribute("outlineLevel",c.outlineLevel),c.collapsed&&l.addAttribute("collapsed","1"),l.addAttribute("customWidth","1"),l.closeNode()}parseOpen(l){if(l.name==="col"){const c=this.model={min:parseInt(l.attributes.min||"0",10),max:parseInt(l.attributes.max||"0",10),width:l.attributes.width===void 0?void 0:parseFloat(l.attributes.width||"0")};return l.attributes.style&&(c.styleId=parseInt(l.attributes.style,10)),s.parseBoolean(l.attributes.hidden)&&(c.hidden=!0),s.parseBoolean(l.attributes.bestFit)&&(c.bestFit=!0),l.attributes.outlineLevel&&(c.outlineLevel=parseInt(l.attributes.outlineLevel,10)),s.parseBoolean(l.attributes.collapsed)&&(c.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(l,c){l.styleId&&(l.style=c.styles.getStyleModel(l.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(t,n,i){const s=t("../../../utils/under-dash"),o=t("../../../utils/utils"),l=t("../../../utils/col-cache"),c=t("../base-xform"),a=t("../../../doc/range");function u(f,h,m,g){const p=h[m];p!==void 0?f[m]=p:g!==void 0&&(f[m]=g)}function d(f,h,m,g){const p=h[m];p!==void 0&&(f[m]=o.parseBoolean(p))}n.exports=class extends c{get tag(){return"dataValidations"}render(f,h){const m=function(g){const p=s.map(g,(v,E)=>({address:E,dataValidation:v,marked:!1})).sort((v,E)=>s.strcmp(v.address,E.address)),y=s.keyBy(p,"address"),b=(v,E,M)=>{for(let W=0;W<E;W++){const $=l.encodeAddress(v.row+W,M);if(!g[$]||!s.isEqual(g[v.address],g[$]))return!1}return!0};return p.map(v=>{if(!v.marked){const E=l.decodeEx(v.address);if(E.dimensions)return y[E.dimensions].marked=!0,{...v.dataValidation,sqref:v.address};let M=1,W=l.encodeAddress(E.row+M,E.col);for(;g[W]&&s.isEqual(v.dataValidation,g[W]);)M++,W=l.encodeAddress(E.row+M,E.col);let $=1;for(;b(E,M,E.col+$);)$++;for(let N=0;N<M;N++)for(let j=0;j<$;j++)W=l.encodeAddress(E.row+N,E.col+j),y[W].marked=!0;if(M>1||$>1){const N=E.row+(M-1),j=E.col+($-1);return{...v.dataValidation,sqref:`${v.address}:${l.encodeAddress(N,j)}`}}return{...v.dataValidation,sqref:v.address}}return null}).filter(Boolean)}(h);m.length&&(f.openNode("dataValidations",{count:m.length}),m.forEach(g=>{f.openNode("dataValidation"),g.type!=="any"&&(f.addAttribute("type",g.type),g.operator&&g.type!=="list"&&g.operator!=="between"&&f.addAttribute("operator",g.operator),g.allowBlank&&f.addAttribute("allowBlank","1")),g.showInputMessage&&f.addAttribute("showInputMessage","1"),g.promptTitle&&f.addAttribute("promptTitle",g.promptTitle),g.prompt&&f.addAttribute("prompt",g.prompt),g.showErrorMessage&&f.addAttribute("showErrorMessage","1"),g.errorStyle&&f.addAttribute("errorStyle",g.errorStyle),g.errorTitle&&f.addAttribute("errorTitle",g.errorTitle),g.error&&f.addAttribute("error",g.error),f.addAttribute("sqref",g.sqref),(g.formulae||[]).forEach((p,y)=>{f.openNode("formula"+(y+1)),g.type==="date"?f.writeText(o.dateToExcel(new Date(p))):f.writeText(p),f.closeNode()}),f.closeNode()}),f.closeNode())}parseOpen(f){switch(f.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=f.attributes.sqref;const h={type:f.attributes.type||"any",formulae:[]};switch(f.attributes.type&&d(h,f.attributes,"allowBlank"),d(h,f.attributes,"showInputMessage"),d(h,f.attributes,"showErrorMessage"),h.type){case"any":case"list":case"custom":break;default:u(h,f.attributes,"operator","between")}return u(h,f.attributes,"promptTitle"),u(h,f.attributes,"prompt"),u(h,f.attributes,"errorStyle"),u(h,f.attributes,"errorTitle"),u(h,f.attributes,"error"),this._dataValidation=h,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(f){this._formula&&this._formula.push(f)}parseClose(f){switch(f){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(h=>{h.includes(":")?new a(h).forEachAddress(m=>{this.model[m]=this._dataValidation}):this.model[h]=this._dataValidation}),!0;case"formula1":case"formula2":{let h=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":h=parseInt(h,10);break;case"decimal":h=parseFloat(h);break;case"date":h=o.excelToDate(parseFloat(h))}return this._dataValidation.formulae.push(h),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"dimension"}render(o,l){l&&o.leafNode("dimension",{ref:l})}parseOpen(o){return o.name==="dimension"&&(this.model=o.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"drawing"}render(o,l){l&&o.leafNode(this.tag,{"r:id":l.rId})}parseOpen(o){switch(o.name){case this.tag:return this.model={rId:o.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(t,n,i){const s=t("../composite-xform"),o=t("./cf-ext/conditional-formattings-ext-xform");class l extends s{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new o}}get tag(){return"ext"}hasContent(a){return this.conditionalFormattings.hasContent(a.conditionalFormattings)}prepare(a,u){this.conditionalFormattings.prepare(a.conditionalFormattings,u)}render(a,u){a.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(a,u.conditionalFormattings),a.closeNode()}createNewModel(){return{}}onParserClose(a,u){this.model[a]=u.model}}n.exports=class extends s{constructor(){super(),this.map={ext:this.ext=new l}}get tag(){return"extLst"}prepare(c,a){this.ext.prepare(c,a)}hasContent(c){return this.ext.hasContent(c)}render(c,a){this.hasContent(a)&&(c.openNode("extLst"),this.ext.render(c,a),c.closeNode())}createNewModel(){return{}}onParserClose(c,a){Object.assign(this.model,a.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"headerFooter"}render(o,l){if(l){o.addRollback();let c=!1;o.openNode("headerFooter"),l.differentFirst&&(o.addAttribute("differentFirst","1"),c=!0),l.differentOddEven&&(o.addAttribute("differentOddEven","1"),c=!0),l.oddHeader&&typeof l.oddHeader=="string"&&(o.leafNode("oddHeader",null,l.oddHeader),c=!0),l.oddFooter&&typeof l.oddFooter=="string"&&(o.leafNode("oddFooter",null,l.oddFooter),c=!0),l.evenHeader&&typeof l.evenHeader=="string"&&(o.leafNode("evenHeader",null,l.evenHeader),c=!0),l.evenFooter&&typeof l.evenFooter=="string"&&(o.leafNode("evenFooter",null,l.evenFooter),c=!0),l.firstHeader&&typeof l.firstHeader=="string"&&(o.leafNode("firstHeader",null,l.firstHeader),c=!0),l.firstFooter&&typeof l.firstFooter=="string"&&(o.leafNode("firstFooter",null,l.firstFooter),c=!0),c?(o.closeNode(),o.commit()):o.rollback()}}parseOpen(o){switch(o.name){case"headerFooter":return this.model={},o.attributes.differentFirst&&(this.model.differentFirst=parseInt(o.attributes.differentFirst,0)===1),o.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(o.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(o){switch(this.currentNode){case"oddHeader":this.model.oddHeader=o;break;case"oddFooter":this.model.oddFooter=o;break;case"evenHeader":this.model.evenHeader=o;break;case"evenFooter":this.model.evenFooter=o;break;case"firstHeader":this.model.firstHeader=o;break;case"firstFooter":this.model.firstFooter=o}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"hyperlink"}render(o,l){this.isInternalLink(l)?o.leafNode("hyperlink",{ref:l.address,"r:id":l.rId,tooltip:l.tooltip,location:l.target}):o.leafNode("hyperlink",{ref:l.address,"r:id":l.rId,tooltip:l.tooltip})}parseOpen(o){return o.name==="hyperlink"&&(this.model={address:o.attributes.ref,rId:o.attributes["r:id"],tooltip:o.attributes.tooltip},o.attributes.location&&(this.model.target=o.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(o){return o.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(o.target)}}},{"../base-xform":32}],99:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"mergeCell"}render(o,l){o.leafNode("mergeCell",{ref:l})}parseOpen(o){return o.name==="mergeCell"&&(this.model=o.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(t,n,i){const s=t("../../../utils/under-dash"),o=t("../../../doc/range"),l=t("../../../utils/col-cache"),c=t("../../../doc/enums");n.exports=class{constructor(){this.merges={}}add(a){if(this.merges[a.master])this.merges[a.master].expandToAddress(a.address);else{const u=`${a.master}:${a.address}`;this.merges[a.master]=new o(u)}}get mergeCells(){return s.map(this.merges,a=>a.range)}reconcile(a,u){s.each(a,d=>{const f=l.decode(d);for(let h=f.top;h<=f.bottom;h++){const m=u[h-1];for(let g=f.left;g<=f.right;g++){const p=m.cells[g-1];p?p.type===c.ValueType.Merge&&(p.master=f.tl):m.cells[g]={type:c.ValueType.Null,address:l.encodeAddress(h,g)}}}})}getMasterAddress(a){const u=this.hash[a];return u&&u.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(t,n,i){const s=t("../base-xform"),o=l=>l!==void 0;n.exports=class extends s{get tag(){return"outlinePr"}render(l,c){return!(!c||!o(c.summaryBelow)&&!o(c.summaryRight))&&(l.leafNode(this.tag,{summaryBelow:o(c.summaryBelow)?Number(c.summaryBelow):void 0,summaryRight:o(c.summaryRight)?Number(c.summaryRight):void 0}),!0)}parseOpen(l){return l.name===this.tag&&(this.model={summaryBelow:o(l.attributes.summaryBelow)?!!Number(l.attributes.summaryBelow):void 0,summaryRight:o(l.attributes.summaryRight)?!!Number(l.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"brk"}render(o,l){o.leafNode("brk",l)}parseOpen(o){return o.name==="brk"&&(this.model=o.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(t,n,i){const s=t("../../../utils/under-dash"),o=t("../base-xform");n.exports=class extends o{get tag(){return"pageMargins"}render(l,c){if(c){const a={left:c.left,right:c.right,top:c.top,bottom:c.bottom,header:c.header,footer:c.footer};s.some(a,u=>u!==void 0)&&l.leafNode(this.tag,a)}}parseOpen(l){switch(l.name){case this.tag:return this.model={left:parseFloat(l.attributes.left||.7),right:parseFloat(l.attributes.right||.7),top:parseFloat(l.attributes.top||.75),bottom:parseFloat(l.attributes.bottom||.75),header:parseFloat(l.attributes.header||.3),footer:parseFloat(l.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"pageSetUpPr"}render(o,l){return!(!l||!l.fitToPage)&&(o.leafNode(this.tag,{fitToPage:l.fitToPage?"1":void 0}),!0)}parseOpen(o){return o.name===this.tag&&(this.model={fitToPage:o.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(t,n,i){const s=t("../../../utils/under-dash"),o=t("../base-xform");function l(d){return d?"1":void 0}function c(d){switch(d){case"overThenDown":return d;default:return}}function a(d){switch(d){case"atEnd":case"asDisplyed":return d;default:return}}function u(d){switch(d){case"dash":case"blank":case"NA":return d;default:return}}n.exports=class extends o{get tag(){return"pageSetup"}render(d,f){if(f){const h={paperSize:f.paperSize,orientation:f.orientation,horizontalDpi:f.horizontalDpi,verticalDpi:f.verticalDpi,pageOrder:c(f.pageOrder),blackAndWhite:l(f.blackAndWhite),draft:l(f.draft),cellComments:a(f.cellComments),errors:u(f.errors),scale:f.scale,fitToWidth:f.fitToWidth,fitToHeight:f.fitToHeight,firstPageNumber:f.firstPageNumber,useFirstPageNumber:l(f.firstPageNumber),usePrinterDefaults:l(f.usePrinterDefaults),copies:f.copies};s.some(h,m=>m!==void 0)&&d.leafNode(this.tag,h)}}parseOpen(d){switch(d.name){case this.tag:return this.model={paperSize:(f=d.attributes.paperSize,f!==void 0?parseInt(f,10):void 0),orientation:d.attributes.orientation||"portrait",horizontalDpi:parseInt(d.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(d.attributes.verticalDpi||"4294967295",10),pageOrder:d.attributes.pageOrder||"downThenOver",blackAndWhite:d.attributes.blackAndWhite==="1",draft:d.attributes.draft==="1",cellComments:d.attributes.cellComments||"None",errors:d.attributes.errors||"displayed",scale:parseInt(d.attributes.scale||"100",10),fitToWidth:parseInt(d.attributes.fitToWidth||"1",10),fitToHeight:parseInt(d.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(d.attributes.firstPageNumber||"1",10),useFirstPageNumber:d.attributes.useFirstPageNumber==="1",usePrinterDefaults:d.attributes.usePrinterDefaults==="1",copies:parseInt(d.attributes.copies||"1",10)},!0;default:return!1}var f}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"picture"}render(o,l){l&&o.leafNode(this.tag,{"r:id":l.rId})}parseOpen(o){switch(o.name){case this.tag:return this.model={rId:o.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(t,n,i){const s=t("../../../utils/under-dash"),o=t("../base-xform");function l(c){return c?"1":void 0}n.exports=class extends o{get tag(){return"printOptions"}render(c,a){if(a){const u={headings:l(a.showRowColHeaders),gridLines:l(a.showGridLines),horizontalCentered:l(a.horizontalCentered),verticalCentered:l(a.verticalCentered)};s.some(u,d=>d!==void 0)&&c.leafNode(this.tag,u)}}parseOpen(c){switch(c.name){case this.tag:return this.model={showRowColHeaders:c.attributes.headings==="1",showGridLines:c.attributes.gridLines==="1",horizontalCentered:c.attributes.horizontalCentered==="1",verticalCentered:c.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(t,n,i){const s=t("./page-breaks-xform"),o=t("../list-xform");n.exports=class extends o{constructor(){super({tag:"rowBreaks",count:!0,childXform:new s})}render(l,c){if(c&&c.length){l.openNode(this.tag,this.$),this.count&&(l.addAttribute(this.$count,c.length),l.addAttribute("manualBreakCount",c.length));const{childXform:a}=this;c.forEach(u=>{a.render(l,u)}),l.closeNode()}else this.empty&&l.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(t,n,i){const s=t("../base-xform"),o=t("../../../utils/utils"),l=t("./cell-xform");n.exports=class extends s{constructor(c){super(),this.maxItems=c&&c.maxItems,this.map={c:new l}}get tag(){return"row"}prepare(c,a){const u=a.styles.addStyleModel(c.style);u&&(c.styleId=u);const d=this.map.c;c.cells.forEach(f=>{d.prepare(f,a)})}render(c,a,u){c.openNode("row"),c.addAttribute("r",a.number),a.height&&(c.addAttribute("ht",a.height),c.addAttribute("customHeight","1")),a.hidden&&c.addAttribute("hidden","1"),a.min>0&&a.max>0&&a.min<=a.max&&c.addAttribute("spans",`${a.min}:${a.max}`),a.styleId&&(c.addAttribute("s",a.styleId),c.addAttribute("customFormat","1")),c.addAttribute("x14ac:dyDescent","0.25"),a.outlineLevel&&c.addAttribute("outlineLevel",a.outlineLevel),a.collapsed&&c.addAttribute("collapsed","1");const d=this.map.c;a.cells.forEach(f=>{d.render(c,f,u)}),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;if(c.name==="row"){this.numRowsSeen+=1;const a=c.attributes.spans?c.attributes.spans.split(":").map(d=>parseInt(d,10)):[void 0,void 0],u=this.model={number:parseInt(c.attributes.r,10),min:a[0],max:a[1],cells:[]};return c.attributes.s&&(u.styleId=parseInt(c.attributes.s,10)),o.parseBoolean(c.attributes.hidden)&&(u.hidden=!0),o.parseBoolean(c.attributes.bestFit)&&(u.bestFit=!0),c.attributes.ht&&(u.height=parseFloat(c.attributes.ht)),c.attributes.outlineLevel&&(u.outlineLevel=parseInt(c.attributes.outlineLevel,10)),o.parseBoolean(c.attributes.collapsed)&&(u.collapsed=!0),!0}return this.parser=this.map[c.name],!!this.parser&&(this.parser.parseOpen(c),!0)}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser){if(!this.parser.parseClose(c)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(c,a){c.style=c.styleId?a.styles.getStyleModel(c.styleId):{},c.styleId!==void 0&&(c.styleId=void 0);const u=this.map.c;c.cells.forEach(d=>{u.reconcile(d,a)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(t,n,i){const s=t("../../../utils/under-dash"),o=t("../base-xform");n.exports=class extends o{get tag(){return"sheetFormatPr"}render(l,c){if(c){const a={defaultRowHeight:c.defaultRowHeight,outlineLevelRow:c.outlineLevelRow,outlineLevelCol:c.outlineLevelCol,"x14ac:dyDescent":c.dyDescent};c.defaultColWidth&&(a.defaultColWidth=c.defaultColWidth),c.defaultRowHeight&&c.defaultRowHeight===15||(a.customHeight="1"),s.some(a,u=>u!==void 0)&&l.leafNode("sheetFormatPr",a)}}parseOpen(l){return l.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(l.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(l.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(l.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(l.attributes.outlineLevelCol||"0",10)},l.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(l.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(t,n,i){const s=t("../base-xform"),o=t("../style/color-xform"),l=t("./page-setup-properties-xform"),c=t("./outline-properties-xform");n.exports=class extends s{constructor(){super(),this.map={tabColor:new o("tabColor"),pageSetUpPr:new l,outlinePr:new c}}get tag(){return"sheetPr"}render(a,u){if(u){a.addRollback(),a.openNode("sheetPr");let d=!1;d=this.map.tabColor.render(a,u.tabColor)||d,d=this.map.pageSetUpPr.render(a,u.pageSetup)||d,d=this.map.outlinePr.render(a,u.outlineProperties)||d,d?(a.closeNode(),a.commit()):a.rollback()}}parseOpen(a){return this.parser?(this.parser.parseOpen(a),!0):a.name===this.tag?(this.reset(),!0):!!this.map[a.name]&&(this.parser=this.map[a.name],this.parser.parseOpen(a),!0)}parseText(a){return!!this.parser&&(this.parser.parseText(a),!0)}parseClose(a){return this.parser?(this.parser.parseClose(a)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(t,n,i){const s=t("../../../utils/under-dash"),o=t("../base-xform");function l(a,u){return a?u:void 0}function c(a,u){return a===u||void 0}n.exports=class extends o{get tag(){return"sheetProtection"}render(a,u){if(u){const d={sheet:l(u.sheet,"1"),selectLockedCells:u.selectLockedCells===!1?"1":void 0,selectUnlockedCells:u.selectUnlockedCells===!1?"1":void 0,formatCells:l(u.formatCells,"0"),formatColumns:l(u.formatColumns,"0"),formatRows:l(u.formatRows,"0"),insertColumns:l(u.insertColumns,"0"),insertRows:l(u.insertRows,"0"),insertHyperlinks:l(u.insertHyperlinks,"0"),deleteColumns:l(u.deleteColumns,"0"),deleteRows:l(u.deleteRows,"0"),sort:l(u.sort,"0"),autoFilter:l(u.autoFilter,"0"),pivotTables:l(u.pivotTables,"0")};u.sheet&&(d.algorithmName=u.algorithmName,d.hashValue=u.hashValue,d.saltValue=u.saltValue,d.spinCount=u.spinCount,d.objects=l(u.objects===!1,"1"),d.scenarios=l(u.scenarios===!1,"1")),s.some(d,f=>f!==void 0)&&a.leafNode(this.tag,d)}}parseOpen(a){switch(a.name){case this.tag:return this.model={sheet:c(a.attributes.sheet,"1"),objects:a.attributes.objects!=="1"&&void 0,scenarios:a.attributes.scenarios!=="1"&&void 0,selectLockedCells:a.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:a.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:c(a.attributes.formatCells,"0"),formatColumns:c(a.attributes.formatColumns,"0"),formatRows:c(a.attributes.formatRows,"0"),insertColumns:c(a.attributes.insertColumns,"0"),insertRows:c(a.attributes.insertRows,"0"),insertHyperlinks:c(a.attributes.insertHyperlinks,"0"),deleteColumns:c(a.attributes.deleteColumns,"0"),deleteRows:c(a.attributes.deleteRows,"0"),sort:c(a.attributes.sort,"0"),autoFilter:c(a.attributes.autoFilter,"0"),pivotTables:c(a.attributes.pivotTables,"0")},a.attributes.algorithmName&&(this.model.algorithmName=a.attributes.algorithmName,this.model.hashValue=a.attributes.hashValue,this.model.saltValue=a.attributes.saltValue,this.model.spinCount=parseInt(a.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(t,n,i){const s=t("../../../utils/col-cache"),o=t("../base-xform"),l={frozen:"frozen",frozenSplit:"frozen",split:"split"};n.exports=class extends o{get tag(){return"sheetView"}prepare(c){switch(c.state){case"frozen":case"split":break;default:c.state="normal"}}render(c,a){c.openNode("sheetView",{workbookViewId:a.workbookViewId||0});const u=function(g,p,y){y&&c.addAttribute(g,p)};let d,f,h,m;switch(u("rightToLeft","1",a.rightToLeft===!0),u("tabSelected","1",a.tabSelected),u("showRuler","0",a.showRuler===!1),u("showRowColHeaders","0",a.showRowColHeaders===!1),u("showGridLines","0",a.showGridLines===!1),u("zoomScale",a.zoomScale,a.zoomScale),u("zoomScaleNormal",a.zoomScaleNormal,a.zoomScaleNormal),u("view",a.style,a.style),a.state){case"frozen":f=a.xSplit||0,h=a.ySplit||0,d=a.topLeftCell||s.getAddress(h+1,f+1).address,m=(a.xSplit&&a.ySplit?"bottomRight":a.xSplit&&"topRight")||"bottomLeft",c.leafNode("pane",{xSplit:a.xSplit||void 0,ySplit:a.ySplit||void 0,topLeftCell:d,activePane:m,state:"frozen"}),c.leafNode("selection",{pane:m,activeCell:a.activeCell,sqref:a.activeCell});break;case"split":a.activePane==="topLeft"&&(a.activePane=void 0),c.leafNode("pane",{xSplit:a.xSplit||void 0,ySplit:a.ySplit||void 0,topLeftCell:a.topLeftCell,activePane:a.activePane}),c.leafNode("selection",{pane:a.activePane,activeCell:a.activeCell,sqref:a.activeCell});break;case"normal":a.activeCell&&c.leafNode("selection",{activeCell:a.activeCell,sqref:a.activeCell})}c.closeNode()}parseOpen(c){switch(c.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(c.attributes.workbookViewId,10),rightToLeft:c.attributes.rightToLeft==="1",tabSelected:c.attributes.tabSelected==="1",showRuler:c.attributes.showRuler!=="0",showRowColHeaders:c.attributes.showRowColHeaders!=="0",showGridLines:c.attributes.showGridLines!=="0",zoomScale:parseInt(c.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(c.attributes.zoomScaleNormal||"100",10),style:c.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(c.attributes.xSplit||"0",10),ySplit:parseInt(c.attributes.ySplit||"0",10),topLeftCell:c.attributes.topLeftCell,activePane:c.attributes.activePane||"topLeft",state:c.attributes.state},!0;case"selection":{const a=c.attributes.pane||"topLeft";return this.selections[a]={pane:a,activeCell:c.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(c){let a,u;switch(c){case"sheetView":return this.sheetView&&this.pane?(a=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:l[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(a.activePane=this.pane.activePane),u=this.selections[this.pane.activePane],u&&u.activeCell&&(a.activeCell=u.activeCell),this.sheetView.style&&(a.style=this.sheetView.style)):(a=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},u=this.selections.topLeft,u&&u.activeCell&&(a.activeCell=u.activeCell),this.sheetView.style&&(a.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"tablePart"}render(o,l){l&&o.leafNode(this.tag,{"r:id":l.rId})}parseOpen(o){switch(o.name){case this.tag:return this.model={rId:o.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(t,n,i){const s=t("../../../utils/under-dash"),o=t("../../../utils/col-cache"),l=t("../../../utils/xml-stream"),c=t("../../rel-type"),a=t("./merges"),u=t("../base-xform"),d=t("../list-xform"),f=t("./row-xform"),h=t("./col-xform"),m=t("./dimension-xform"),g=t("./hyperlink-xform"),p=t("./merge-cell-xform"),y=t("./data-validations-xform"),b=t("./sheet-properties-xform"),v=t("./sheet-format-properties-xform"),E=t("./sheet-view-xform"),M=t("./sheet-protection-xform"),W=t("./page-margins-xform"),$=t("./page-setup-xform"),N=t("./print-options-xform"),j=t("./auto-filter-xform"),F=t("./picture-xform"),P=t("./drawing-xform"),L=t("./table-part-xform"),k=t("./row-breaks-xform"),R=t("./header-footer-xform"),C=t("./cf/conditional-formattings-xform"),_=t("./ext-lst-xform"),x=(S,I)=>{if(!I||!I.length)return S;if(!S||!S.length)return I;const z={},A={};return S.forEach(H=>{z[H.ref]=H,H.rules.forEach(K=>{const{x14Id:J}=K;J&&(A[J]=K)})}),I.forEach(H=>{H.rules.forEach(K=>{const J=A[K.x14Id];J?((V,X)=>{Object.keys(X).forEach(D=>{const O=V[D],G=X[D];O===void 0&&G!==void 0&&(V[D]=G)})})(J,K):z[H.ref]?z[H.ref].rules.push(K):S.push({ref:H.ref,rules:[K]})})}),S};class w extends u{constructor(I){super();const{maxRows:z,maxCols:A,ignoreNodes:H}=I||{};this.ignoreNodes=H||[],this.map={sheetPr:new b,dimension:new m,sheetViews:new d({tag:"sheetViews",count:!1,childXform:new E}),sheetFormatPr:new v,cols:new d({tag:"cols",count:!1,childXform:new h}),sheetData:new d({tag:"sheetData",count:!1,empty:!0,childXform:new f({maxItems:A}),maxItems:z}),autoFilter:new j,mergeCells:new d({tag:"mergeCells",count:!0,childXform:new p}),rowBreaks:new k,hyperlinks:new d({tag:"hyperlinks",count:!1,childXform:new g}),pageMargins:new W,dataValidations:new y,pageSetup:new $,headerFooter:new R,printOptions:new N,picture:new F,drawing:new P,sheetProtection:new M,tableParts:new d({tag:"tableParts",count:!0,childXform:new L}),conditionalFormatting:new C,extLst:new _}}prepare(I,z){z.merges=new a,I.hyperlinks=z.hyperlinks=[],I.comments=z.comments=[],z.formulae={},z.siFormulae=0,this.map.cols.prepare(I.cols,z),this.map.sheetData.prepare(I.rows,z),this.map.conditionalFormatting.prepare(I.conditionalFormattings,z),I.mergeCells=z.merges.mergeCells;const A=I.rels=[];function H(V){return"rId"+(V.length+1)}if(I.hyperlinks.forEach(V=>{const X=H(A);V.rId=X,A.push({Id:X,Type:c.Hyperlink,Target:V.target,TargetMode:"External"})}),I.comments.length>0){const V={Id:H(A),Type:c.Comments,Target:`../comments${I.id}.xml`};A.push(V);const X={Id:H(A),Type:c.VmlDrawing,Target:`../drawings/vmlDrawing${I.id}.vml`};A.push(X),I.comments.forEach(D=>{D.refAddress=o.decodeAddress(D.ref)}),z.commentRefs.push({commentName:"comments"+I.id,vmlDrawing:"vmlDrawing"+I.id})}const K=[];let J;I.media.forEach(V=>{if(V.type==="background"){const X=H(A);J=z.media[V.imageId],A.push({Id:X,Type:c.Image,Target:`../media/${J.name}.${J.extension}`}),I.background={rId:X},I.image=z.media[V.imageId]}else if(V.type==="image"){let{drawing:X}=I;J=z.media[V.imageId],X||(X=I.drawing={rId:H(A),name:"drawing"+ ++z.drawingsCount,anchors:[],rels:[]},z.drawings.push(X),A.push({Id:X.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${X.name}.xml`}));let D=this.preImageId===V.imageId?K[V.imageId]:K[X.rels.length];D||(D=H(X.rels),K[X.rels.length]=D,X.rels.push({Id:D,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${J.name}.${J.extension}`}));const O={picture:{rId:D},range:V.range};if(V.hyperlinks&&V.hyperlinks.hyperlink){const G=H(X.rels);K[X.rels.length]=G,O.picture.hyperlinks={tooltip:V.hyperlinks.tooltip,rId:G},X.rels.push({Id:G,Type:c.Hyperlink,Target:V.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=V.imageId,X.anchors.push(O)}}),I.tables.forEach(V=>{const X=H(A);V.rId=X,A.push({Id:X,Type:c.Table,Target:"../tables/"+V.target}),V.columns.forEach(D=>{const{style:O}=D;O&&(D.dxfId=z.styles.addDxfStyle(O))})}),this.map.extLst.prepare(I,z)}render(I,z){I.openXml(l.StdDocAttributes),I.openNode("worksheet",w.WORKSHEET_ATTRIBUTES);const A=z.properties?{defaultRowHeight:z.properties.defaultRowHeight,dyDescent:z.properties.dyDescent,outlineLevelCol:z.properties.outlineLevelCol,outlineLevelRow:z.properties.outlineLevelRow}:void 0;z.properties&&z.properties.defaultColWidth&&(A.defaultColWidth=z.properties.defaultColWidth);const H={outlineProperties:z.properties&&z.properties.outlineProperties,tabColor:z.properties&&z.properties.tabColor,pageSetup:z.pageSetup&&z.pageSetup.fitToPage?{fitToPage:z.pageSetup.fitToPage}:void 0},K=z.pageSetup&&z.pageSetup.margins,J={showRowColHeaders:z.pageSetup&&z.pageSetup.showRowColHeaders,showGridLines:z.pageSetup&&z.pageSetup.showGridLines,horizontalCentered:z.pageSetup&&z.pageSetup.horizontalCentered,verticalCentered:z.pageSetup&&z.pageSetup.verticalCentered},V=z.sheetProtection;this.map.sheetPr.render(I,H),this.map.dimension.render(I,z.dimensions),this.map.sheetViews.render(I,z.views),this.map.sheetFormatPr.render(I,A),this.map.cols.render(I,z.cols),this.map.sheetData.render(I,z.rows),this.map.sheetProtection.render(I,V),this.map.autoFilter.render(I,z.autoFilter),this.map.mergeCells.render(I,z.mergeCells),this.map.conditionalFormatting.render(I,z.conditionalFormattings),this.map.dataValidations.render(I,z.dataValidations),this.map.hyperlinks.render(I,z.hyperlinks),this.map.printOptions.render(I,J),this.map.pageMargins.render(I,K),this.map.pageSetup.render(I,z.pageSetup),this.map.headerFooter.render(I,z.headerFooter),this.map.rowBreaks.render(I,z.rowBreaks),this.map.drawing.render(I,z.drawing),this.map.picture.render(I,z.background),this.map.tableParts.render(I,z.tables),this.map.extLst.render(I,z),z.rels&&z.rels.forEach(X=>{X.Type===c.VmlDrawing&&I.leafNode("legacyDrawing",{"r:id":X.Id})}),I.closeNode()}parseOpen(I){return this.parser?(this.parser.parseOpen(I),!0):I.name==="worksheet"?(s.each(this.map,z=>{z.reset()}),!0):(this.map[I.name]&&!this.ignoreNodes.includes(I.name)&&(this.parser=this.map[I.name],this.parser.parseOpen(I)),!0)}parseText(I){this.parser&&this.parser.parseText(I)}parseClose(I){if(this.parser)return this.parser.parseClose(I)||(this.parser=void 0),!0;switch(I){case"worksheet":{const z=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(z.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(z.outlineProperties=this.map.sheetPr.model.outlineProperties);const A={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},H=Object.assign(A,this.map.pageSetup.model,this.map.printOptions.model),K=x(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:z,views:this.map.sheetViews.model,pageSetup:H,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:K},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(I,z){const A=(I.relationships||[]).reduce((K,J)=>{if(K[J.Id]=J,J.Type===c.Comments&&(I.comments=z.comments[J.Target].comments),J.Type===c.VmlDrawing&&I.comments&&I.comments.length){const V=z.vmlDrawings[J.Target].comments;I.comments.forEach((X,D)=>{X.note=Object.assign({},X.note,V[D])})}return K},{});if(z.commentsMap=(I.comments||[]).reduce((K,J)=>(J.ref&&(K[J.ref]=J),K),{}),z.hyperlinkMap=(I.hyperlinks||[]).reduce((K,J)=>(J.rId&&(K[J.address]=A[J.rId].Target),K),{}),z.formulae={},I.rows=I.rows&&I.rows.filter(Boolean)||[],I.rows.forEach(K=>{K.cells=K.cells&&K.cells.filter(Boolean)||[]}),this.map.cols.reconcile(I.cols,z),this.map.sheetData.reconcile(I.rows,z),this.map.conditionalFormatting.reconcile(I.conditionalFormattings,z),I.media=[],I.drawing){const K=A[I.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(K){const J=K[1];z.drawings[J].anchors.forEach(V=>{if(V.medium){const X={type:"image",imageId:V.medium.index,range:V.range,hyperlinks:V.picture.hyperlinks};I.media.push(X)}})}}const H=I.background&&A[I.background.rId];if(H){const K=H.Target.split("/media/")[1],J=z.mediaIndex&&z.mediaIndex[K];J!==void 0&&I.media.push({type:"background",imageId:J})}I.tables=(I.tables||[]).map(K=>{const J=A[K.rId];return z.tables[J.Target]}),delete I.relationships,delete I.hyperlinks,delete I.comments}}w.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},n.exports=w},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{constructor(o){super(),this.tag=o.tag,this.attr=o.attr}render(o,l){l&&(o.openNode(this.tag),o.closeNode())}parseOpen(o){o.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{constructor(o){super(),this.tag=o.tag,this.attr=o.attr,this.attrs=o.attrs,this._format=o.format||function(l){try{return Number.isNaN(l.getTime())?"":l.toISOString()}catch{return""}},this._parse=o.parse||function(l){return new Date(l)}}render(o,l){l&&(o.openNode(this.tag),this.attrs&&o.addAttributes(this.attrs),this.attr?o.addAttribute(this.attr,this._format(l)):o.writeText(this._format(l)),o.closeNode())}parseOpen(o){o.name===this.tag&&(this.attr?this.model=this._parse(o.attributes[this.attr]):this.text=[])}parseText(o){this.attr||this.text.push(o)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{constructor(o){super(),this.tag=o.tag,this.attr=o.attr,this.attrs=o.attrs,this.zero=o.zero}render(o,l){(l||this.zero)&&(o.openNode(this.tag),this.attrs&&o.addAttributes(this.attrs),this.attr?o.addAttribute(this.attr,l):o.writeText(l),o.closeNode())}parseOpen(o){return o.name===this.tag&&(this.attr?this.model=parseInt(o.attributes[this.attr],10):this.text=[],!0)}parseText(o){this.attr||this.text.push(o)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{constructor(o){super(),this.tag=o.tag,this.attr=o.attr,this.attrs=o.attrs}render(o,l){l!==void 0&&(o.openNode(this.tag),this.attrs&&o.addAttributes(this.attrs),this.attr?o.addAttribute(this.attr,l):o.writeText(l),o.closeNode())}parseOpen(o){o.name===this.tag&&(this.attr?this.model=o.attributes[this.attr]:this.text=[])}parseText(o){this.attr||this.text.push(o)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(t,n,i){const s=t("./base-xform"),o=t("../../utils/xml-stream");n.exports=class extends s{constructor(l){super(),this._model=l}render(l){if(!this._xml){const c=new o;(function a(u,d){u.openNode(d.tag,d.$),d.c&&d.c.forEach(f=>{a(u,f)}),d.t&&u.writeText(d.t),u.closeNode()})(c,this._model),this._xml=c.xml}l.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(l){switch(l){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(t,n,i){const s=t("./text-xform"),o=t("./rich-text-xform"),l=t("../base-xform");n.exports=class extends l{constructor(){super(),this.map={r:new o,t:new s}}get tag(){return"rPh"}render(c,a){if(c.openNode(this.tag,{sb:a.sb||0,eb:a.eb||0}),a&&a.hasOwnProperty("richText")&&a.richText){const{r:u}=this.map;a.richText.forEach(d=>{u.render(c,d)})}else a&&this.map.t.render(c,a.text);c.closeNode()}parseOpen(c){const{name:a}=c;return this.parser?(this.parser.parseOpen(c),!0):a===this.tag?(this.model={sb:parseInt(c.attributes.sb,10),eb:parseInt(c.attributes.eb,10)},!0):(this.parser=this.map[a],!!this.parser&&(this.parser.parseOpen(c),!0))}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser){if(!this.parser.parseClose(c)){switch(c){case"r":{let a=this.model.richText;a||(a=this.model.richText=[]),a.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(c){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(t,n,i){const s=t("./text-xform"),o=t("../style/font-xform"),l=t("../base-xform");class c extends l{constructor(u){super(),this.model=u}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new s)}get fontXform(){return this._fontXform||(this._fontXform=new o(c.FONT_OPTIONS))}render(u,d){d=d||this.model,u.openNode("r"),d.font&&this.fontXform.render(u,d.font),this.textXform.render(u,d.text),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(u),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){switch(u){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(u),!0}}}c.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},n.exports=c},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(t,n,i){const s=t("./text-xform"),o=t("./rich-text-xform"),l=t("./phonetic-text-xform"),c=t("../base-xform");n.exports=class extends c{constructor(a){super(),this.model=a,this.map={r:new o,t:new s,rPh:new l}}get tag(){return"si"}render(a,u){a.openNode(this.tag),u&&u.hasOwnProperty("richText")&&u.richText?u.richText.length?u.richText.forEach(d=>{this.map.r.render(a,d)}):this.map.t.render(a,""):u!=null&&this.map.t.render(a,u),a.closeNode()}parseOpen(a){const{name:u}=a;return this.parser?(this.parser.parseOpen(a),!0):u===this.tag?(this.model={},!0):(this.parser=this.map[u],!!this.parser&&(this.parser.parseOpen(a),!0))}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser){if(!this.parser.parseClose(a)){switch(a){case"r":{let u=this.model.richText;u||(u=this.model.richText=[]),u.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(a){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(t,n,i){const s=t("../../../utils/xml-stream"),o=t("../base-xform"),l=t("./shared-string-xform");n.exports=class extends o{constructor(c){super(),this.model=c||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new l)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(c){return this.model.values[c]}add(c){return c.richText?this.addRichText(c):this.addText(c)}addText(c){let a=this.hash[c];return a===void 0&&(a=this.hash[c]=this.model.values.length,this.model.values.push(c)),this.model.count++,a}addRichText(c){const a=this.sharedStringXform.toXml(c);let u=this.rich[a];return u===void 0&&(u=this.rich[a]=this.model.values.length,this.model.values.push(c)),this.model.count++,u}render(c,a){a=a||this._values,c.openXml(s.StdDocAttributes),c.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:a.count,uniqueCount:a.values.length});const u=this.sharedStringXform;a.values.forEach(d=>{u.render(c,d)}),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(c),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(c))}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(c){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+c)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"t"}render(o,l){o.openNode("t"),/^\s|\n|\s$/.test(l)&&o.addAttribute("xml:space","preserve"),o.writeText(l),o.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(o,l)=>String.fromCharCode(parseInt(l,16)))}parseOpen(o){switch(o.name){case"t":return this._text=[],!0;default:return!1}}parseText(o){this._text.push(o)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(t,n,i){const s=t("../../../doc/enums"),o=t("../../../utils/utils"),l=t("../base-xform"),c={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((u,d)=>(u[d]=!0,u),{}),horizontal(u){return this.horizontalValues[u]?u:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((u,d)=>(u[d]=!0,u),{}),vertical(u){return u==="middle"?"center":this.verticalValues[u]?u:void 0},wrapText:u=>!!u||void 0,shrinkToFit:u=>!!u||void 0,textRotation(u){switch(u){case"vertical":return u;default:return(u=o.validInt(u))>=-90&&u<=90?u:void 0}},indent:u=>(u=o.validInt(u),Math.max(0,u)),readingOrder(u){switch(u){case"ltr":return s.ReadingOrder.LeftToRight;case"rtl":return s.ReadingOrder.RightToLeft;default:return}}},a={toXml(u){if(u=c.textRotation(u)){if(u==="vertical")return 255;const d=Math.round(u);if(d>=0&&d<=90)return d;if(d<0&&d>=-90)return 90-d}},toModel(u){const d=o.validInt(u);if(d!==void 0){if(d===255)return"vertical";if(d>=0&&d<=90)return d;if(d>90&&d<=180)return 90-d}}};n.exports=class extends l{get tag(){return"alignment"}render(u,d){u.addRollback(),u.openNode("alignment");let f=!1;function h(m,g){g&&(u.addAttribute(m,g),f=!0)}h("horizontal",c.horizontal(d.horizontal)),h("vertical",c.vertical(d.vertical)),h("wrapText",!!c.wrapText(d.wrapText)&&"1"),h("shrinkToFit",!!c.shrinkToFit(d.shrinkToFit)&&"1"),h("indent",c.indent(d.indent)),h("textRotation",a.toXml(d.textRotation)),h("readingOrder",c.readingOrder(d.readingOrder)),u.closeNode(),f?u.commit():u.rollback()}parseOpen(u){const d={};let f=!1;function h(m,g,p){m&&(d[g]=p,f=!0)}h(u.attributes.horizontal,"horizontal",u.attributes.horizontal),h(u.attributes.vertical,"vertical",u.attributes.vertical==="center"?"middle":u.attributes.vertical),h(u.attributes.wrapText,"wrapText",o.parseBoolean(u.attributes.wrapText)),h(u.attributes.shrinkToFit,"shrinkToFit",o.parseBoolean(u.attributes.shrinkToFit)),h(u.attributes.indent,"indent",parseInt(u.attributes.indent,10)),h(u.attributes.textRotation,"textRotation",a.toModel(u.attributes.textRotation)),h(u.attributes.readingOrder,"readingOrder",u.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=f?d:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(t,n,i){const s=t("../base-xform"),o=t("../../../utils/utils"),l=t("./color-xform");class c extends s{constructor(u){super(),this.name=u,this.map={color:new l}}get tag(){return this.name}render(u,d,f){const h=d&&d.color||f||this.defaultColor;u.openNode(this.name),d&&d.style&&(u.addAttribute("style",d.style),h&&this.map.color.render(u,h)),u.closeNode()}parseOpen(u){if(this.parser)return this.parser.parseOpen(u),!0;switch(u.name){case this.name:{const{style:d}=u.attributes;return this.model=d?{style:d}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(u),!0;default:return!1}}parseText(u){this.parser&&this.parser.parseText(u)}parseClose(u){return this.parser?(this.parser.parseClose(u)||(this.parser=void 0),!0):(u===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(u){return c.validStyleValues[u]}}c.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((a,u)=>(a[u]=!0,a),{}),n.exports=class extends s{constructor(){super(),this.map={top:new c("top"),left:new c("left"),bottom:new c("bottom"),right:new c("right"),diagonal:new c("diagonal")}}render(a,u){const{color:d}=u;function f(h,m){h&&!h.color&&u.color&&(h={...h,color:u.color}),m.render(a,h,d)}a.openNode("border"),u.diagonal&&u.diagonal.style&&(u.diagonal.up&&a.addAttribute("diagonalUp","1"),u.diagonal.down&&a.addAttribute("diagonalDown","1")),f(u.left,this.map.left),f(u.right,this.map.right),f(u.top,this.map.top),f(u.bottom,this.map.bottom),f(u.diagonal,this.map.diagonal),a.closeNode()}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;switch(a.name){case"border":return this.reset(),this.diagonalUp=o.parseBoolean(a.attributes.diagonalUp),this.diagonalDown=o.parseBoolean(a.attributes.diagonalDown),!0;default:return this.parser=this.map[a.name],!!this.parser&&(this.parser.parseOpen(a),!0)}}parseText(a){this.parser&&this.parser.parseText(a)}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;if(a==="border"){const u=this.model={},d=function(f,h,m){h&&(m&&Object.assign(h,m),u[f]=h)};d("left",this.map.left.model),d("right",this.map.right.model),d("top",this.map.top.model),d("bottom",this.map.bottom.model),d("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{constructor(o){super(),this.name=o||"color"}get tag(){return this.name}render(o,l){return!!l&&(o.openNode(this.name),l.argb?o.addAttribute("rgb",l.argb):l.theme!==void 0?(o.addAttribute("theme",l.theme),l.tint!==void 0&&o.addAttribute("tint",l.tint)):l.indexed!==void 0?o.addAttribute("indexed",l.indexed):o.addAttribute("auto","1"),o.closeNode(),!0)}parseOpen(o){return o.name===this.name&&(o.attributes.rgb?this.model={argb:o.attributes.rgb}:o.attributes.theme?(this.model={theme:parseInt(o.attributes.theme,10)},o.attributes.tint&&(this.model.tint=parseFloat(o.attributes.tint))):o.attributes.indexed?this.model={indexed:parseInt(o.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(t,n,i){const s=t("../base-xform"),o=t("./alignment-xform"),l=t("./border-xform"),c=t("./fill-xform"),a=t("./font-xform"),u=t("./numfmt-xform"),d=t("./protection-xform");n.exports=class extends s{constructor(){super(),this.map={alignment:new o,border:new l,fill:new c,font:new a,numFmt:new u,protection:new d}}get tag(){return"dxf"}render(f,h){if(f.openNode(this.tag),h.font&&this.map.font.render(f,h.font),h.numFmt&&h.numFmtId){const m={id:h.numFmtId,formatCode:h.numFmt};this.map.numFmt.render(f,m)}h.fill&&this.map.fill.render(f,h.fill),h.alignment&&this.map.alignment.render(f,h.alignment),h.border&&this.map.border.render(f,h.border),h.protection&&this.map.protection.render(f,h.protection),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[f.name],this.parser&&this.parser.parseOpen(f),!0}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){return this.parser?(this.parser.parseClose(f)||(this.parser=void 0),!0):f!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(t,n,i){const s=t("../base-xform"),o=t("./color-xform");class l extends s{constructor(){super(),this.map={color:new o}}get tag(){return"stop"}render(f,h){f.openNode("stop"),f.addAttribute("position",h.position),this.map.color.render(f,h.color),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"stop":return this.model={position:parseFloat(f.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(f),!0;default:return!1}}parseText(){}parseClose(f){return!!this.parser&&(this.parser.parseClose(f)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class c extends s{constructor(){super(),this.map={fgColor:new o("fgColor"),bgColor:new o("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(f,h){f.openNode("patternFill"),f.addAttribute("patternType",h.pattern),h.fgColor&&this.map.fgColor.render(f,h.fgColor),h.bgColor&&this.map.bgColor.render(f,h.bgColor),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"patternFill":return this.model={type:"pattern",pattern:f.attributes.patternType},!0;default:return this.parser=this.map[f.name],!!this.parser&&(this.parser.parseOpen(f),!0)}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){return!!this.parser&&(this.parser.parseClose(f)||(this.parser.model&&(this.model[f]=this.parser.model),this.parser=void 0),!0)}}class a extends s{constructor(){super(),this.map={stop:new l}}get name(){return"gradient"}get tag(){return"gradientFill"}render(f,h){switch(f.openNode("gradientFill"),h.gradient){case"angle":f.addAttribute("degree",h.degree);break;case"path":f.addAttribute("type","path"),h.center.left&&(f.addAttribute("left",h.center.left),h.center.right===void 0&&f.addAttribute("right",h.center.left)),h.center.right&&f.addAttribute("right",h.center.right),h.center.top&&(f.addAttribute("top",h.center.top),h.center.bottom===void 0&&f.addAttribute("bottom",h.center.top)),h.center.bottom&&f.addAttribute("bottom",h.center.bottom)}const m=this.map.stop;h.stops.forEach(g=>{m.render(f,g)}),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"gradientFill":{const h=this.model={stops:[]};return f.attributes.degree?(h.gradient="angle",h.degree=parseInt(f.attributes.degree,10)):f.attributes.type==="path"&&(h.gradient="path",h.center={left:f.attributes.left?parseFloat(f.attributes.left):0,top:f.attributes.top?parseFloat(f.attributes.top):0},f.attributes.right!==f.attributes.left&&(h.center.right=f.attributes.right?parseFloat(f.attributes.right):0),f.attributes.bottom!==f.attributes.top&&(h.center.bottom=f.attributes.bottom?parseFloat(f.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(f),!0;default:return!1}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){return!!this.parser&&(this.parser.parseClose(f)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class u extends s{constructor(){super(),this.map={patternFill:new c,gradientFill:new a}}get tag(){return"fill"}render(f,h){switch(f.addRollback(),f.openNode("fill"),h.type){case"pattern":this.map.patternFill.render(f,h);break;case"gradient":this.map.gradientFill.render(f,h);break;default:return void f.rollback()}f.closeNode(),f.commit()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"fill":return this.model={},!0;default:return this.parser=this.map[f.name],!!this.parser&&(this.parser.parseOpen(f),!0)}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){return!!this.parser&&(this.parser.parseClose(f)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(f){return u.validPatternValues[f]}}u.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((d,f)=>(d[f]=!0,d),{}),u.StopXform=l,u.PatternFillXform=c,u.GradientFillXform=a,n.exports=u},{"../base-xform":32,"./color-xform":128}],131:[function(t,n,i){const s=t("./color-xform"),o=t("../simple/boolean-xform"),l=t("../simple/integer-xform"),c=t("../simple/string-xform"),a=t("./underline-xform"),u=t("../../../utils/under-dash"),d=t("../base-xform");class f extends d{constructor(m){super(),this.options=m||f.OPTIONS,this.map={b:{prop:"bold",xform:new o({tag:"b",attr:"val"})},i:{prop:"italic",xform:new o({tag:"i",attr:"val"})},u:{prop:"underline",xform:new a},charset:{prop:"charset",xform:new l({tag:"charset",attr:"val"})},color:{prop:"color",xform:new s},condense:{prop:"condense",xform:new o({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new o({tag:"extend",attr:"val"})},family:{prop:"family",xform:new l({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new o({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new c({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new c({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new o({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new o({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new l({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new c({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(m,g){const{map:p}=this;m.openNode(this.options.tagName),u.each(this.map,(y,b)=>{p[b].xform.render(m,g[y.prop])}),m.closeNode()}parseOpen(m){if(this.parser)return this.parser.parseOpen(m),!0;if(this.map[m.name])return this.parser=this.map[m.name].xform,this.parser.parseOpen(m);switch(m.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(m){this.parser&&this.parser.parseText(m)}parseClose(m){if(this.parser&&!this.parser.parseClose(m)){const g=this.map[m];return this.parser.model&&(this.model[g.prop]=this.parser.model),this.parser=void 0,!0}switch(m){case this.options.tagName:return!1;default:return!0}}}f.OPTIONS={tagName:"font",fontNameTag:"name"},n.exports=f},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(t,n,i){const s=t("../../../utils/under-dash"),o=t("../../defaultnumformats"),l=t("../base-xform"),c=function(){const u={};return s.each(o,(d,f)=>{d.f&&(u[d.f]=parseInt(f,10))}),u}();class a extends l{constructor(d,f){super(),this.id=d,this.formatCode=f}get tag(){return"numFmt"}render(d,f){d.leafNode("numFmt",{numFmtId:f.id,formatCode:f.formatCode})}parseOpen(d){switch(d.name){case"numFmt":return this.model={id:parseInt(d.attributes.numFmtId,10),formatCode:d.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}a.getDefaultFmtId=function(u){return c[u]},a.getDefaultFmtCode=function(u){return o[u]&&o[u].f},n.exports=a},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(t,n,i){const s=t("../base-xform"),o={boolean:(l,c)=>l===void 0?c:l};n.exports=class extends s{get tag(){return"protection"}render(l,c){l.addRollback(),l.openNode("protection");let a=!1;function u(d,f){f!==void 0&&(l.addAttribute(d,f),a=!0)}u("locked",o.boolean(c.locked,!0)?void 0:"0"),u("hidden",o.boolean(c.hidden,!1)?"1":void 0),l.closeNode(),a?l.commit():l.rollback()}parseOpen(l){const c={locked:l.attributes.locked!=="0",hidden:l.attributes.hidden==="1"},a=!c.locked||c.hidden;this.model=a?c:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(t,n,i){const s=t("../base-xform"),o=t("./alignment-xform"),l=t("./protection-xform");n.exports=class extends s{constructor(c){super(),this.xfId=!(!c||!c.xfId),this.map={alignment:new o,protection:new l}}get tag(){return"xf"}render(c,a){c.openNode("xf",{numFmtId:a.numFmtId||0,fontId:a.fontId||0,fillId:a.fillId||0,borderId:a.borderId||0}),this.xfId&&c.addAttribute("xfId",a.xfId||0),a.numFmtId&&c.addAttribute("applyNumberFormat","1"),a.fontId&&c.addAttribute("applyFont","1"),a.fillId&&c.addAttribute("applyFill","1"),a.borderId&&c.addAttribute("applyBorder","1"),a.alignment&&c.addAttribute("applyAlignment","1"),a.protection&&c.addAttribute("applyProtection","1"),a.alignment&&this.map.alignment.render(c,a.alignment),a.protection&&this.map.protection.render(c,a.protection),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"xf":return this.model={numFmtId:parseInt(c.attributes.numFmtId,10),fontId:parseInt(c.attributes.fontId,10),fillId:parseInt(c.attributes.fillId,10),borderId:parseInt(c.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(c.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(c),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(c),!0;default:return!1}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){return this.parser?(this.parser.parseClose(c)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):c!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(t,n,i){const s=t("../../../doc/enums"),o=t("../../../utils/xml-stream"),l=t("../base-xform"),c=t("../static-xform"),a=t("../list-xform"),u=t("./font-xform"),d=t("./fill-xform"),f=t("./border-xform"),h=t("./numfmt-xform"),m=t("./style-xform"),g=t("./dxf-xform");class p extends l{constructor(b){super(),this.map={numFmts:new a({tag:"numFmts",count:!0,childXform:new h}),fonts:new a({tag:"fonts",count:!0,childXform:new u,$:{"x14ac:knownFonts":1}}),fills:new a({tag:"fills",count:!0,childXform:new d}),borders:new a({tag:"borders",count:!0,childXform:new f}),cellStyleXfs:new a({tag:"cellStyleXfs",count:!0,childXform:new m}),cellXfs:new a({tag:"cellXfs",count:!0,childXform:new m({xfId:!0})}),dxfs:new a({tag:"dxfs",always:!0,count:!0,childXform:new g}),numFmt:new h,font:new u,fill:new d,border:new f,style:new m({xfId:!0}),cellStyles:p.STATIC_XFORMS.cellStyles,tableStyles:p.STATIC_XFORMS.tableStyles,extLst:p.STATIC_XFORMS.extLst},b&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(b,v){v=v||this.model,b.openXml(o.StdDocAttributes),b.openNode("styleSheet",p.STYLESHEET_ATTRIBUTES),this.index?(v.numFmts&&v.numFmts.length&&(b.openNode("numFmts",{count:v.numFmts.length}),v.numFmts.forEach(E=>{b.writeXml(E)}),b.closeNode()),v.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),b.openNode("fonts",{count:v.fonts.length,"x14ac:knownFonts":1}),v.fonts.forEach(E=>{b.writeXml(E)}),b.closeNode(),b.openNode("fills",{count:v.fills.length}),v.fills.forEach(E=>{b.writeXml(E)}),b.closeNode(),b.openNode("borders",{count:v.borders.length}),v.borders.forEach(E=>{b.writeXml(E)}),b.closeNode(),this.map.cellStyleXfs.render(b,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),b.openNode("cellXfs",{count:v.styles.length}),v.styles.forEach(E=>{b.writeXml(E)}),b.closeNode()):(this.map.numFmts.render(b,v.numFmts),this.map.fonts.render(b,v.fonts),this.map.fills.render(b,v.fills),this.map.borders.render(b,v.borders),this.map.cellStyleXfs.render(b,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(b,v.styles)),p.STATIC_XFORMS.cellStyles.render(b),this.map.dxfs.render(b,v.dxfs),p.STATIC_XFORMS.tableStyles.render(b),p.STATIC_XFORMS.extLst.render(b),b.closeNode()}parseOpen(b){if(this.parser)return this.parser.parseOpen(b),!0;switch(b.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[b.name],this.parser&&this.parser.parseOpen(b),!0}}parseText(b){this.parser&&this.parser.parseText(b)}parseClose(b){if(this.parser)return this.parser.parseClose(b)||(this.parser=void 0),!0;switch(b){case"styleSheet":{this.model={};const v=(E,M)=>{M.model&&M.model.length&&(this.model[E]=M.model)};if(v("numFmts",this.map.numFmts),v("fonts",this.map.fonts),v("fills",this.map.fills),v("borders",this.map.borders),v("styles",this.map.cellXfs),v("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){const E=this.index.numFmt;this.model.numFmts.forEach(M=>{E[M.id]=M.formatCode})}return!1}default:return!0}}addStyleModel(b,v){if(!b)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(b))return this.weakMap.get(b);const E={};if(v=v||s.ValueType.Number,b.numFmt)E.numFmtId=this._addNumFmtStr(b.numFmt);else switch(v){case s.ValueType.Number:E.numFmtId=this._addNumFmtStr("General");break;case s.ValueType.Date:E.numFmtId=this._addNumFmtStr("mm-dd-yy")}b.font&&(E.fontId=this._addFont(b.font)),b.border&&(E.borderId=this._addBorder(b.border)),b.fill&&(E.fillId=this._addFill(b.fill)),b.alignment&&(E.alignment=b.alignment),b.protection&&(E.protection=b.protection);const M=this._addStyle(E);return this.weakMap&&this.weakMap.set(b,M),M}getStyleModel(b){const v=this.model.styles[b];if(!v)return null;let E=this.index.model[b];if(E)return E;if(E=this.index.model[b]={},v.numFmtId){const W=this.index.numFmt[v.numFmtId]||h.getDefaultFmtCode(v.numFmtId);W&&(E.numFmt=W)}function M(W,$,N){if(N||N===0){const j=$[N];j&&(E[W]=j)}}return M("font",this.model.fonts,v.fontId),M("border",this.model.borders,v.borderId),M("fill",this.model.fills,v.fillId),v.alignment&&(E.alignment=v.alignment),v.protection&&(E.protection=v.protection),E}addDxfStyle(b){return b.numFmt&&(b.numFmtId=this._addNumFmtStr(b.numFmt)),this.model.dxfs.push(b),this.model.dxfs.length-1}getDxfStyle(b){return this.model.dxfs[b]}_addStyle(b){const v=this.map.style.toXml(b);let E=this.index.style[v];return E===void 0&&(E=this.index.style[v]=this.model.styles.length,this.model.styles.push(v)),E}_addNumFmtStr(b){let v=h.getDefaultFmtId(b);if(v!==void 0||(v=this.index.numFmt[b],v!==void 0))return v;v=this.index.numFmt[b]=164+this.model.numFmts.length;const E=this.map.numFmt.toXml({id:v,formatCode:b});return this.model.numFmts.push(E),v}_addFont(b){const v=this.map.font.toXml(b);let E=this.index.font[v];return E===void 0&&(E=this.index.font[v]=this.model.fonts.length,this.model.fonts.push(v)),E}_addBorder(b){const v=this.map.border.toXml(b);let E=this.index.border[v];return E===void 0&&(E=this.index.border[v]=this.model.borders.length,this.model.borders.push(v)),E}_addFill(b){const v=this.map.fill.toXml(b);let E=this.index.fill[v];return E===void 0&&(E=this.index.fill[v]=this.model.fills.length,this.model.fills.push(v)),E}}p.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},p.STATIC_XFORMS={cellStyles:new c({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new c({tag:"dxfs",$:{count:0}}),tableStyles:new c({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new c({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},p.Mock=class extends p{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(y){return y.autodrain(),Promise.resolve()}addStyleModel(y,b){switch(b){case s.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){const y={numFmtId:h.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(y)}return this._dateStyleId}getStyleModel(){return{}}},n.exports=p},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(t,n,i){const s=t("../base-xform");class o extends s{constructor(c){super(),this.model=c}get tag(){return"u"}render(c,a){if((a=a||this.model)===!0)c.leafNode("u");else{const u=o.Attributes[a];u&&c.leafNode("u",u)}}parseOpen(c){c.name==="u"&&(this.model=c.attributes.val||!0)}parseText(){}parseClose(){return!1}}o.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},n.exports=o},{"../base-xform":32}],137:[function(t,n,i){const s=t("../base-xform"),o=t("./filter-column-xform");n.exports=class extends s{constructor(){super(),this.map={filterColumn:new o}}get tag(){return"autoFilter"}prepare(l){l.columns.forEach((c,a)=>{this.map.filterColumn.prepare(c,{index:a})})}render(l,c){return l.openNode(this.tag,{ref:c.autoFilterRef}),c.columns.forEach(a=>{this.map.filterColumn.render(l,a)}),l.closeNode(),!0}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:return this.model={autoFilterRef:l.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[l.name],this.parser)return this.parseOpen(l),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(l))}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(l){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+l)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"customFilter"}render(o,l){o.leafNode(this.tag,{val:l.val,operator:l.operator})}parseOpen(o){return o.name===this.tag&&(this.model={val:o.attributes.val,operator:o.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(t,n,i){const s=t("../base-xform"),o=t("../list-xform"),l=t("./custom-filter-xform"),c=t("./filter-xform");n.exports=class extends s{constructor(){super(),this.map={customFilters:new o({tag:"customFilters",count:!1,empty:!0,childXform:new l}),filters:new o({tag:"filters",count:!1,empty:!0,childXform:new c})}}get tag(){return"filterColumn"}prepare(a,u){a.colId=u.index.toString()}render(a,u){return u.customFilters?(a.openNode(this.tag,{colId:u.colId,hiddenButton:u.filterButton?"0":"1"}),this.map.customFilters.render(a,u.customFilters),a.closeNode(),!0):(a.leafNode(this.tag,{colId:u.colId,hiddenButton:u.filterButton?"0":"1"}),!0)}parseOpen(a){if(this.parser)return this.parser.parseOpen(a),!0;const{attributes:u}=a;switch(a.name){case this.tag:return this.model={filterButton:u.hiddenButton==="0"},!0;default:if(this.parser=this.map[a.name],this.parser)return this.parseOpen(a),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(a))}}parseText(){}parseClose(a){if(this.parser)return this.parser.parseClose(a)||(this.parser=void 0),!0;switch(a){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"filter"}render(o,l){o.leafNode(this.tag,{val:l.val})}parseOpen(o){return o.name===this.tag&&(this.model={val:o.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"tableColumn"}prepare(o,l){o.id=l.index+1}render(o,l){return o.leafNode(this.tag,{id:l.id.toString(),name:l.name,totalsRowLabel:l.totalsRowLabel,totalsRowFunction:l.totalsRowFunction,dxfId:l.dxfId}),!0}parseOpen(o){if(o.name===this.tag){const{attributes:l}=o;return this.model={name:l.name,totalsRowLabel:l.totalsRowLabel,totalsRowFunction:l.totalsRowFunction,dxfId:l.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(t,n,i){const s=t("../base-xform");n.exports=class extends s{get tag(){return"tableStyleInfo"}render(o,l){return o.leafNode(this.tag,{name:l.theme?l.theme:void 0,showFirstColumn:l.showFirstColumn?"1":"0",showLastColumn:l.showLastColumn?"1":"0",showRowStripes:l.showRowStripes?"1":"0",showColumnStripes:l.showColumnStripes?"1":"0"}),!0}parseOpen(o){if(o.name===this.tag){const{attributes:l}=o;return this.model={theme:l.name?l.name:null,showFirstColumn:l.showFirstColumn==="1",showLastColumn:l.showLastColumn==="1",showRowStripes:l.showRowStripes==="1",showColumnStripes:l.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(t,n,i){const s=t("../../../utils/xml-stream"),o=t("../base-xform"),l=t("../list-xform"),c=t("./auto-filter-xform"),a=t("./table-column-xform"),u=t("./table-style-info-xform");class d extends o{constructor(){super(),this.map={autoFilter:new c,tableColumns:new l({tag:"tableColumns",count:!0,empty:!0,childXform:new a}),tableStyleInfo:new u}}prepare(h,m){this.map.autoFilter.prepare(h),this.map.tableColumns.prepare(h.columns,m)}get tag(){return"table"}render(h,m){h.openXml(s.StdDocAttributes),h.openNode(this.tag,{...d.TABLE_ATTRIBUTES,id:m.id,name:m.name,displayName:m.displayName||m.name,ref:m.tableRef,totalsRowCount:m.totalsRow?"1":void 0,totalsRowShown:m.totalsRow?void 0:"1",headerRowCount:m.headerRow?"1":"0"}),this.map.autoFilter.render(h,m),this.map.tableColumns.render(h,m.columns),this.map.tableStyleInfo.render(h,m.style),h.closeNode()}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;const{name:m,attributes:g}=h;switch(m){case this.tag:this.reset(),this.model={name:g.name,displayName:g.displayName||g.name,tableRef:g.ref,totalsRow:g.totalsRowCount==="1",headerRow:g.headerRowCount==="1"};break;default:this.parser=this.map[h.name],this.parser&&this.parser.parseOpen(h)}return!0}parseText(h){this.parser&&this.parser.parseText(h)}parseClose(h){if(this.parser)return this.parser.parseClose(h)||(this.parser=void 0),!0;switch(h){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((m,g)=>{this.model.columns[g].filterButton=m.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(h,m){h.columns.forEach(g=>{g.dxfId!==void 0&&(g.style=m.styles.getDxfStyle(g.dxfId))})}}d.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},n.exports=d},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(t,n,i){(function(s,o){(function(){const l=t("fs"),c=t("jszip"),{PassThrough:a}=t("readable-stream"),u=t("../utils/zip-stream"),d=t("../utils/stream-buf"),f=t("../utils/utils"),h=t("../utils/xml-stream"),{bufferToString:m}=t("../utils/browser-buffer-decode"),g=t("./xform/style/styles-xform"),p=t("./xform/core/core-xform"),y=t("./xform/strings/shared-strings-xform"),b=t("./xform/core/relationships-xform"),v=t("./xform/core/content-types-xform"),E=t("./xform/core/app-xform"),M=t("./xform/book/workbook-xform"),W=t("./xform/sheet/worksheet-xform"),$=t("./xform/drawing/drawing-xform"),N=t("./xform/table/table-xform"),j=t("./xform/comment/comments-xform"),F=t("./xform/comment/vml-notes-xform"),P=t("./xml/theme1");class L{constructor(R){this.workbook=R}async readFile(R,C){if(!await f.fs.exists(R))throw new Error("File not found: "+R);const _=l.createReadStream(R);try{const x=await this.read(_,C);return _.close(),x}catch(x){throw _.close(),x}}parseRels(R){return new b().parseStream(R)}parseWorkbook(R){return new M().parseStream(R)}parseSharedStrings(R){return new y().parseStream(R)}reconcile(R,C){const _=new M,x=new W(C),w=new $,S=new N;_.reconcile(R);const I={media:R.media,mediaIndex:R.mediaIndex};Object.keys(R.drawings).forEach(H=>{const K=R.drawings[H],J=R.drawingRels[H];J&&(I.rels=J.reduce((V,X)=>(V[X.Id]=X,V),{}),(K.anchors||[]).forEach(V=>{const X=V.picture&&V.picture.hyperlinks;X&&I.rels[X.rId]&&(X.hyperlink=I.rels[X.rId].Target,delete X.rId)}),w.reconcile(K,I))});const z={styles:R.styles};Object.values(R.tables).forEach(H=>{S.reconcile(H,z)});const A={styles:R.styles,sharedStrings:R.sharedStrings,media:R.media,mediaIndex:R.mediaIndex,date1904:R.properties&&R.properties.date1904,drawings:R.drawings,comments:R.comments,tables:R.tables,vmlDrawings:R.vmlDrawings};R.worksheets.forEach(H=>{H.relationships=R.worksheetRels[H.sheetNo],x.reconcile(H,A)}),delete R.worksheetHash,delete R.worksheetRels,delete R.globalRels,delete R.sharedStrings,delete R.workbookRels,delete R.sheetDefs,delete R.styles,delete R.mediaIndex,delete R.drawings,delete R.drawingRels,delete R.vmlDrawings}async _processWorksheetEntry(R,C,_,x,w){const S=new W(x),I=await S.parseStream(R);I.sheetNo=_,C.worksheetHash[w]=I,C.worksheets.push(I)}async _processCommentEntry(R,C,_){const x=new j,w=await x.parseStream(R);C.comments[`../${_}.xml`]=w}async _processTableEntry(R,C,_){const x=new N,w=await x.parseStream(R);C.tables[`../tables/${_}.xml`]=w}async _processWorksheetRelsEntry(R,C,_){const x=new b,w=await x.parseStream(R);C.worksheetRels[_]=w}async _processMediaEntry(R,C,_){const x=_.lastIndexOf(".");if(x>=1){const w=_.substr(x+1),S=_.substr(0,x);await new Promise((I,z)=>{const A=new d;A.on("finish",()=>{C.mediaIndex[_]=C.media.length,C.mediaIndex[S]=C.media.length;const H={type:"image",name:S,extension:w,buffer:A.toBuffer()};C.media.push(H),I()}),R.on("error",H=>{z(H)}),R.pipe(A)})}}async _processDrawingEntry(R,C,_){const x=new $,w=await x.parseStream(R);C.drawings[_]=w}async _processDrawingRelsEntry(R,C,_){const x=new b,w=await x.parseStream(R);C.drawingRels[_]=w}async _processVmlDrawingEntry(R,C,_){const x=new F,w=await x.parseStream(R);C.vmlDrawings[`../drawings/${_}.vml`]=w}async _processThemeEntry(R,C,_){await new Promise((x,w)=>{const S=new d;R.on("error",w),S.on("error",w),S.on("finish",()=>{C.themes[_]=S.read().toString(),x()}),R.pipe(S)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(R,C){!R[Symbol.asyncIterator]&&R.pipe&&(R=R.pipe(new a));const _=[];for await(const x of R)_.push(x);return this.load(o.concat(_),C)}async load(R,C){let _;_=C&&C.base64?o.from(R.toString(),"base64"):R;const x={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},w=await c.loadAsync(_);for(const S of Object.values(w.files))if(!S.dir){let I,z=S.name;if(z[0]==="/"&&(z=z.substr(1)),z.match(/xl\/media\//)||z.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))I=new a,I.write(await S.async("nodebuffer"));else{let A;I=new a({writableObjectMode:!0,readableObjectMode:!0}),A=s.browser?m(await S.async("nodebuffer")):await S.async("string");const H=16384;for(let K=0;K<A.length;K+=H)I.write(A.substring(K,K+H))}switch(I.end(),z){case"_rels/.rels":x.globalRels=await this.parseRels(I);break;case"xl/workbook.xml":{const A=await this.parseWorkbook(I);x.sheets=A.sheets,x.definedNames=A.definedNames,x.views=A.views,x.properties=A.properties,x.calcProperties=A.calcProperties;break}case"xl/_rels/workbook.xml.rels":x.workbookRels=await this.parseRels(I);break;case"xl/sharedStrings.xml":x.sharedStrings=new y,await x.sharedStrings.parseStream(I);break;case"xl/styles.xml":x.styles=new g,await x.styles.parseStream(I);break;case"docProps/app.xml":{const A=new E,H=await A.parseStream(I);x.company=H.company,x.manager=H.manager;break}case"docProps/core.xml":{const A=new p,H=await A.parseStream(I);Object.assign(x,H);break}default:{let A=z.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(A){await this._processWorksheetEntry(I,x,A[1],C,z);break}if(A=z.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),A){await this._processWorksheetRelsEntry(I,x,A[1]);break}if(A=z.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),A){await this._processThemeEntry(I,x,A[1]);break}if(A=z.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),A){await this._processMediaEntry(I,x,A[1]);break}if(A=z.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),A){await this._processDrawingEntry(I,x,A[1]);break}if(A=z.match(/xl\/(comments\d+)[.]xml/),A){await this._processCommentEntry(I,x,A[1]);break}if(A=z.match(/xl\/tables\/(table\d+)[.]xml/),A){await this._processTableEntry(I,x,A[1]);break}if(A=z.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),A){await this._processDrawingRelsEntry(I,x,A[1]);break}if(A=z.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),A){await this._processVmlDrawingEntry(I,x,A[1]);break}}}}return this.reconcile(x,C),this.workbook.model=x,this.workbook}async addMedia(R,C){await Promise.all(C.media.map(async _=>{if(_.type==="image"){const x=`xl/media/${_.name}.${_.extension}`;if(_.filename){const w=await function(S,I){return new Promise((z,A)=>{l.readFile(S,I,(H,K)=>{H?A(H):z(K)})})}(_.filename);return R.append(w,{name:x})}if(_.buffer)return R.append(_.buffer,{name:x});if(_.base64){const w=_.base64,S=w.substring(w.indexOf(",")+1);return R.append(S,{name:x,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(R,C){const _=new $,x=new b;C.worksheets.forEach(w=>{const{drawing:S}=w;if(S){_.prepare(S,{});let I=_.toXml(S);R.append(I,{name:`xl/drawings/${S.name}.xml`}),I=x.toXml(S.rels),R.append(I,{name:`xl/drawings/_rels/${S.name}.xml.rels`})}})}addTables(R,C){const _=new N;C.worksheets.forEach(x=>{const{tables:w}=x;w.forEach(S=>{_.prepare(S,{});const I=_.toXml(S);R.append(I,{name:"xl/tables/"+S.target})})})}async addContentTypes(R,C){const _=new v().toXml(C);R.append(_,{name:"[Content_Types].xml"})}async addApp(R,C){const _=new E().toXml(C);R.append(_,{name:"docProps/app.xml"})}async addCore(R,C){const _=new p;R.append(_.toXml(C),{name:"docProps/core.xml"})}async addThemes(R,C){const _=C.themes||{theme1:P};Object.keys(_).forEach(x=>{const w=_[x],S=`xl/theme/${x}.xml`;R.append(w,{name:S})})}async addOfficeRels(R){const C=new b().toXml([{Id:"rId1",Type:L.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:L.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:L.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);R.append(C,{name:"_rels/.rels"})}async addWorkbookRels(R,C){let _=1;const x=[{Id:"rId"+_++,Type:L.RelType.Styles,Target:"styles.xml"},{Id:"rId"+_++,Type:L.RelType.Theme,Target:"theme/theme1.xml"}];C.sharedStrings.count&&x.push({Id:"rId"+_++,Type:L.RelType.SharedStrings,Target:"sharedStrings.xml"}),C.worksheets.forEach(S=>{S.rId="rId"+_++,x.push({Id:S.rId,Type:L.RelType.Worksheet,Target:`worksheets/sheet${S.id}.xml`})});const w=new b().toXml(x);R.append(w,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(R,C){C.sharedStrings&&C.sharedStrings.count&&R.append(C.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(R,C){const{xml:_}=C.styles;_&&R.append(_,{name:"xl/styles.xml"})}async addWorkbook(R,C){const _=new M;R.append(_.toXml(C),{name:"xl/workbook.xml"})}async addWorksheets(R,C){const _=new W,x=new b,w=new j,S=new F;C.worksheets.forEach(I=>{let z=new h;_.render(z,I),R.append(z.xml,{name:`xl/worksheets/sheet${I.id}.xml`}),I.rels&&I.rels.length&&(z=new h,x.render(z,I.rels),R.append(z.xml,{name:`xl/worksheets/_rels/sheet${I.id}.xml.rels`})),I.comments.length>0&&(z=new h,w.render(z,I),R.append(z.xml,{name:`xl/comments${I.id}.xml`}),z=new h,S.render(z,I),R.append(z.xml,{name:`xl/drawings/vmlDrawing${I.id}.vml`}))})}_finalize(R){return new Promise((C,_)=>{R.on("finish",()=>{C(this)}),R.on("error",_),R.finalize()})}prepareModel(R,C){R.creator=R.creator||"ExcelJS",R.lastModifiedBy=R.lastModifiedBy||"ExcelJS",R.created=R.created||new Date,R.modified=R.modified||new Date,R.useSharedStrings=C.useSharedStrings===void 0||C.useSharedStrings,R.useStyles=C.useStyles===void 0||C.useStyles,R.sharedStrings=new y,R.styles=R.useStyles?new g(!0):new g.Mock;const _=new M,x=new W;_.prepare(R);const w={sharedStrings:R.sharedStrings,styles:R.styles,date1904:R.properties.date1904,drawingsCount:0,media:R.media};w.drawings=R.drawings=[],w.commentRefs=R.commentRefs=[];let S=0;R.tables=[],R.worksheets.forEach(I=>{I.tables.forEach(z=>{S++,z.target=`table${S}.xml`,z.id=S,R.tables.push(z)}),x.prepare(I,w)})}async write(R,C){C=C||{};const{model:_}=this.workbook,x=new u.ZipWriter(C.zip);return x.pipe(R),this.prepareModel(_,C),await this.addContentTypes(x,_),await this.addOfficeRels(x,_),await this.addWorkbookRels(x,_),await this.addWorksheets(x,_),await this.addSharedStrings(x,_),await this.addDrawings(x,_),await this.addTables(x,_),await Promise.all([this.addThemes(x,_),this.addStyles(x,_)]),await this.addMedia(x,_),await Promise.all([this.addApp(x,_),this.addCore(x,_)]),await this.addWorkbook(x,_),this._finalize(x)}writeFile(R,C){const _=l.createWriteStream(R);return new Promise((x,w)=>{_.on("finish",()=>{x()}),_.on("error",S=>{w(S)}),this.write(_,C).then(()=>{_.end()}).catch(S=>{w(S)})})}async writeBuffer(R){const C=new d;return await this.write(C,R),C.read()}}L.RelType=t("./rel-type"),n.exports=L}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(t,n,i){n.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(t,n,i){(function(s){(function(){Object.defineProperty(i,"__esModule",{value:!0}),i.CsvFormatterStream=void 0;const o=t("stream"),l=t("./formatter");class c extends o.Transform{constructor(u){super({writableObjectMode:u.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=u,this.rowFormatter=new l.RowFormatter(u),this.hasWrittenBOM=!u.writeBOM}transform(u){return this.rowFormatter.rowTransform=u,this}_transform(u,d,f){let h=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(u,(m,g)=>m?(h=!0,f(m)):(g&&g.forEach(p=>{this.push(s.from(p,"utf8"))}),h=!0,f()))}catch(m){if(h)throw m;f(m)}}_flush(u){this.rowFormatter.finish((d,f)=>d?u(d):(f&&f.forEach(h=>{this.push(s.from(h,"utf8"))}),u()))}}i.CsvFormatterStream=c}).call(this)}).call(this,t("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.FormatterOptions=void 0,i.FormatterOptions=class{constructor(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var o;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,s||{}),(s==null?void 0:s.quoteHeaders)===void 0&&(this.quoteHeaders=this.quoteColumns),(s==null?void 0:s.quote)===!0?this.quote='"':(s==null?void 0:s.quote)===!1&&(this.quote=""),typeof(s==null?void 0:s.escape)!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((o=s.writeHeaders)===null||o===void 0||o),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(t,n,i){var s=function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(i,"__esModule",{value:!0}),i.FieldFormatter=void 0;const o=s(t("lodash.isboolean")),l=s(t("lodash.isnil")),c=s(t("lodash.escaperegexp"));i.FieldFormatter=class{constructor(a){this._headers=null,this.formatterOptions=a,a.headers!==null&&(this.headers=a.headers),this.REPLACE_REGEXP=new RegExp(a.quote,"g");const u=`[${a.delimiter}${c.default(a.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(u)}set headers(a){this._headers=a}shouldQuote(a,u){const d=u?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return o.default(d)?d:Array.isArray(d)?d[a]:this._headers!==null&&d[this._headers[a]]}format(a,u,d){const f=(""+(l.default(a)?"":a)).replace(/\0/g,""),{formatterOptions:h}=this;return h.quote!==""&&f.indexOf(h.quote)!==-1?this.quoteField(f.replace(this.REPLACE_REGEXP,h.escapedQuote)):f.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(u,d)?this.quoteField(f):f}quoteField(a){const{quote:u}=this.formatterOptions;return`${u}${a}${u}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(t,n,i){var s=function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(i,"__esModule",{value:!0}),i.RowFormatter=void 0;const o=s(t("lodash.isfunction")),l=s(t("lodash.isequal")),c=t("./FieldFormatter"),a=t("../types");class u{constructor(f){this.rowCount=0,this.formatterOptions=f,this.fieldFormatter=new c.FieldFormatter(f),this.headers=f.headers,this.shouldWriteHeaders=f.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),f.transform&&(this.rowTransform=f.transform)}static isRowHashArray(f){return!!Array.isArray(f)&&Array.isArray(f[0])&&f[0].length===2}static isRowArray(f){return Array.isArray(f)&&!this.isRowHashArray(f)}static gatherHeaders(f){return u.isRowHashArray(f)?f.map(h=>h[0]):Array.isArray(f)?f:Object.keys(f)}static createTransform(f){return a.isSyncTransform(f)?(h,m)=>{let g=null;try{g=f(h)}catch(p){return m(p)}return m(null,g)}:(h,m)=>{f(h,m)}}set rowTransform(f){if(!o.default(f))throw new TypeError("The transform should be a function");this._rowTransform=u.createTransform(f)}format(f,h){this.callTransformer(f,(m,g)=>{if(m)return h(m);if(!f)return h(null);const p=[];if(g){const{shouldFormatColumns:y,headers:b}=this.checkHeaders(g);if(this.shouldWriteHeaders&&b&&!this.hasWrittenHeaders&&(p.push(this.formatColumns(b,!0)),this.hasWrittenHeaders=!0),y){const v=this.gatherColumns(g);p.push(this.formatColumns(v,!1))}}return h(null,p)})}finish(f){const h=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return f(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));h.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&h.push(this.formatterOptions.rowDelimiter),f(null,h)}checkHeaders(f){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};const h=u.gatherHeaders(f);return this.headers=h,this.fieldFormatter.headers=h,this.shouldWriteHeaders?{shouldFormatColumns:!l.default(h,f),headers:h}:{shouldFormatColumns:!0,headers:null}}gatherColumns(f){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(f)?u.isRowHashArray(f)?this.headers.map((h,m)=>{const g=f[m];return g?g[1]:""}):u.isRowArray(f)&&!this.shouldWriteHeaders?f:this.headers.map((h,m)=>f[m]):this.headers.map(h=>f[h])}callTransformer(f,h){return this._rowTransform?this._rowTransform(f,h):h(null,f)}formatColumns(f,h){const m=f.map((p,y)=>this.fieldFormatter.format(p,y,h)).join(this.formatterOptions.delimiter),{rowCount:g}=this;return this.rowCount+=1,g?[this.formatterOptions.rowDelimiter,m].join(""):m}}i.RowFormatter=u},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.FieldFormatter=i.RowFormatter=void 0;var s=t("./RowFormatter");Object.defineProperty(i,"RowFormatter",{enumerable:!0,get:function(){return s.RowFormatter}});var o=t("./FieldFormatter");Object.defineProperty(i,"FieldFormatter",{enumerable:!0,get:function(){return o.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(t,n,i){(function(s){(function(){var o=Object.create?function(y,b,v,E){E===void 0&&(E=v),Object.defineProperty(y,E,{enumerable:!0,get:function(){return b[v]}})}:function(y,b,v,E){E===void 0&&(E=v),y[E]=b[v]},l=Object.create?function(y,b){Object.defineProperty(y,"default",{enumerable:!0,value:b})}:function(y,b){y.default=b},c=function(y){if(y&&y.__esModule)return y;var b={};if(y!=null)for(var v in y)v!=="default"&&Object.prototype.hasOwnProperty.call(y,v)&&o(b,y,v);return l(b,y),b},a=function(y,b){for(var v in y)v==="default"||Object.prototype.hasOwnProperty.call(b,v)||o(b,y,v)};Object.defineProperty(i,"__esModule",{value:!0}),i.writeToPath=i.writeToString=i.writeToBuffer=i.writeToStream=i.write=i.format=i.FormatterOptions=i.CsvFormatterStream=void 0;const u=t("util"),d=t("stream"),f=c(t("fs")),h=t("./FormatterOptions"),m=t("./CsvFormatterStream");a(t("./types"),i);var g=t("./CsvFormatterStream");Object.defineProperty(i,"CsvFormatterStream",{enumerable:!0,get:function(){return g.CsvFormatterStream}});var p=t("./FormatterOptions");Object.defineProperty(i,"FormatterOptions",{enumerable:!0,get:function(){return p.FormatterOptions}}),i.format=y=>new m.CsvFormatterStream(new h.FormatterOptions(y)),i.write=(y,b)=>{const v=i.format(b),E=u.promisify((M,W)=>{v.write(M,void 0,W)});return y.reduce((M,W)=>M.then(()=>E(W)),Promise.resolve()).then(()=>v.end()).catch(M=>{v.emit("error",M)}),v},i.writeToStream=(y,b,v)=>i.write(b,v).pipe(y),i.writeToBuffer=function(y){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const v=[],E=new d.Writable({write(M,W,$){v.push(M),$()}});return new Promise((M,W)=>{E.on("error",W).on("finish",()=>M(s.concat(v))),i.write(y,b).pipe(E)})},i.writeToString=(y,b)=>i.writeToBuffer(y,b).then(v=>v.toString()),i.writeToPath=(y,b,v)=>{const E=f.createWriteStream(y,{encoding:"utf8"});return i.write(b,v).pipe(E)}}).call(this)}).call(this,t("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.isSyncTransform=void 0,i.isSyncTransform=s=>s.length===1},{}],153:[function(t,n,i){(function(s){(function(){Object.defineProperty(i,"__esModule",{value:!0}),i.CsvParserStream=void 0;const o=t("string_decoder"),l=t("stream"),c=t("./transforms"),a=t("./parser");class u extends l.Transform{constructor(f){super({objectMode:f.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=f,this.parser=new a.Parser(f),this.headerTransformer=new c.HeaderTransformer(f),this.decoder=new o.StringDecoder(f.encoding),this.rowTransformerValidator=new c.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(f){return this.rowTransformerValidator.rowTransform=f,this}validate(f){return this.rowTransformerValidator.rowValidator=f,this}emit(f){if(f==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var h=arguments.length,m=new Array(h>1?h-1:0),g=1;g<h;g++)m[g-1]=arguments[g];return super.emit(f,...m)}_transform(f,h,m){if(this.hasHitRowLimit)return m();const g=u.wrapDoneCallback(m);try{const{lines:p}=this,y=p+this.decoder.write(f),b=this.parse(y,!0);return this.processRows(b,g)}catch(p){return g(p)}}_flush(f){const h=u.wrapDoneCallback(f);if(this.hasHitRowLimit)return h();try{const m=this.lines+this.decoder.end(),g=this.parse(m,!1);return this.processRows(g,h)}catch(m){return h(m)}}parse(f,h){if(!f)return[];const{line:m,rows:g}=this.parser.parse(f,h);return this.lines=m,g}processRows(f,h){const m=f.length,g=p=>{const y=E=>E?h(E):p%100!=0?g(p+1):void s(()=>g(p+1));if(this.checkAndEmitHeaders(),p>=m||this.hasHitRowLimit)return h();if(this.parsedLineCount+=1,this.shouldSkipLine)return y();const b=f[p];this.rowCount+=1,this.parsedRowCount+=1;const v=this.rowCount;return this.transformRow(b,(E,M)=>{if(E)return this.rowCount-=1,y(E);if(!M)return y(new Error("expected transform result"));if(M.isValid){if(M.row)return this.pushRow(M.row,y)}else this.emit("data-invalid",M.row,v,M.reason);return y()})};g(0)}transformRow(f,h){try{this.headerTransformer.transform(f,(m,g)=>m?h(m):g?g.isValid?g.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(g.row,h):this.skipRow(h):(this.rowCount-=1,this.parsedRowCount-=1,h(null,{row:null,isValid:!0})):this.shouldEmitRows?h(null,{isValid:!1,row:f}):this.skipRow(h):h(new Error("Expected result from header transform")))}catch(m){h(m)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(f){return this.rowCount-=1,f(null,{row:null,isValid:!0})}pushRow(f,h){try{this.parserOptions.objectMode?this.push(f):this.push(JSON.stringify(f)),h()}catch(m){h(m)}}static wrapDoneCallback(f){let h=!1;return function(m){if(m){if(h)throw m;return h=!0,void f(m)}for(var g=arguments.length,p=new Array(g>1?g-1:0),y=1;y<g;y++)p[y-1]=arguments[y];f(...p)}}}i.CsvParserStream=u}).call(this)}).call(this,t("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(t,n,i){var s=function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(i,"__esModule",{value:!0}),i.ParserOptions=void 0;const o=s(t("lodash.escaperegexp")),l=s(t("lodash.isnil"));i.ParserOptions=class{constructor(c){var a;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,c||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=o.default(this.delimiter),this.escapeChar=(a=this.escape)!==null&&a!==void 0?a:this.quote,this.supportsComments=!l.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(t,n,i){var s=Object.create?function(g,p,y,b){b===void 0&&(b=y),Object.defineProperty(g,b,{enumerable:!0,get:function(){return p[y]}})}:function(g,p,y,b){b===void 0&&(b=y),g[b]=p[y]},o=Object.create?function(g,p){Object.defineProperty(g,"default",{enumerable:!0,value:p})}:function(g,p){g.default=p},l=function(g){if(g&&g.__esModule)return g;var p={};if(g!=null)for(var y in g)y!=="default"&&Object.prototype.hasOwnProperty.call(g,y)&&s(p,g,y);return o(p,g),p},c=function(g,p){for(var y in g)y==="default"||Object.prototype.hasOwnProperty.call(p,y)||s(p,g,y)};Object.defineProperty(i,"__esModule",{value:!0}),i.parseString=i.parseFile=i.parseStream=i.parse=i.ParserOptions=i.CsvParserStream=void 0;const a=l(t("fs")),u=t("stream"),d=t("./ParserOptions"),f=t("./CsvParserStream");c(t("./types"),i);var h=t("./CsvParserStream");Object.defineProperty(i,"CsvParserStream",{enumerable:!0,get:function(){return h.CsvParserStream}});var m=t("./ParserOptions");Object.defineProperty(i,"ParserOptions",{enumerable:!0,get:function(){return m.ParserOptions}}),i.parse=g=>new f.CsvParserStream(new d.ParserOptions(g)),i.parseStream=(g,p)=>g.pipe(new f.CsvParserStream(new d.ParserOptions(p))),i.parseFile=function(g){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a.createReadStream(g).pipe(new f.CsvParserStream(new d.ParserOptions(p)))},i.parseString=(g,p)=>{const y=new u.Readable;return y.push(g),y.push(null),y.pipe(new f.CsvParserStream(new d.ParserOptions(p)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.Parser=void 0;const s=t("./Scanner"),o=t("./RowParser"),l=t("./Token");class c{constructor(u){this.parserOptions=u,this.rowParser=new o.RowParser(this.parserOptions)}static removeBOM(u){return u&&u.charCodeAt(0)===65279?u.slice(1):u}parse(u,d){const f=new s.Scanner({line:c.removeBOM(u),parserOptions:this.parserOptions,hasMoreData:d});return this.parserOptions.supportsComments?this.parseWithComments(f):this.parseWithoutComments(f)}parseWithoutComments(u){const d=[];let f=!0;for(;f;)f=this.parseRow(u,d);return{line:u.line,rows:d}}parseWithComments(u){const{parserOptions:d}=this,f=[];for(let h=u.nextCharacterToken;h!==null;h=u.nextCharacterToken)if(l.Token.isTokenComment(h,d)){if(u.advancePastLine()===null)return{line:u.lineFromCursor,rows:f};if(!u.hasMoreCharacters)return{line:u.lineFromCursor,rows:f};u.truncateToCursor()}else if(!this.parseRow(u,f))break;return{line:u.line,rows:f}}parseRow(u,d){if(!u.nextNonSpaceToken)return!1;const f=this.rowParser.parse(u);return f!==null&&(this.parserOptions.ignoreEmpty&&o.RowParser.isEmptyRow(f)||d.push(f),!0)}}i.Parser=c},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.RowParser=void 0;const s=t("./column"),o=t("./Token");i.RowParser=class{constructor(l){this.parserOptions=l,this.columnParser=new s.ColumnParser(l)}static isEmptyRow(l){return l.join("").replace(/\s+/g,"")===""}parse(l){const{parserOptions:c}=this,{hasMoreData:a}=l,u=l,d=[];let f=this.getStartToken(u,d);for(;f;){if(o.Token.isTokenRowDelimiter(f))return u.advancePastToken(f),!u.hasMoreCharacters&&o.Token.isTokenCarriageReturn(f,c)&&a?null:(u.truncateToCursor(),d);if(!this.shouldSkipColumnParse(u,f,d)){const h=this.columnParser.parse(u);if(h===null)return null;d.push(h)}f=u.nextNonSpaceToken}return a?null:(u.truncateToCursor(),d)}getStartToken(l,c){const a=l.nextNonSpaceToken;return a!==null&&o.Token.isTokenDelimiter(a,this.parserOptions)?(c.push(""),l.nextNonSpaceToken):a}shouldSkipColumnParse(l,c,a){const{parserOptions:u}=this;if(o.Token.isTokenDelimiter(c,u)){l.advancePastToken(c);const d=l.nextCharacterToken;if(!l.hasMoreCharacters||d!==null&&o.Token.isTokenRowDelimiter(d)||d!==null&&o.Token.isTokenDelimiter(d,u))return a.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.Scanner=void 0;const s=t("./Token"),o=/((?:\r\n)|\n|\r)/;i.Scanner=class{constructor(l){this.cursor=0,this.line=l.line,this.lineLength=this.line.length,this.parserOptions=l.parserOptions,this.hasMoreData=l.hasMoreData,this.cursor=l.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){const{lineFromCursor:l}=this,c=this.parserOptions.NEXT_TOKEN_REGEXP;if(l.search(c)===-1)return null;const a=c.exec(l);if(a==null)return null;const u=a[1],d=this.cursor+(a.index||0);return new s.Token({token:u,startCursor:d,endCursor:d+u.length-1})}get nextCharacterToken(){const{cursor:l,lineLength:c}=this;return c<=l?null:new s.Token({token:this.line[l],startCursor:l,endCursor:l})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){const l=o.exec(this.lineFromCursor);return l?(this.cursor+=(l.index||0)+l[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(l){return this.cursor=l,this}advanceToToken(l){return this.cursor=l.startCursor,this}advancePastToken(l){return this.cursor=l.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.Token=void 0,i.Token=class{constructor(s){this.token=s.token,this.startCursor=s.startCursor,this.endCursor=s.endCursor}static isTokenRowDelimiter(s){const o=s.token;return o==="\r"||o===`
`||o===`\r
`}static isTokenCarriageReturn(s,o){return s.token===o.carriageReturn}static isTokenComment(s,o){return o.supportsComments&&!!s&&s.token===o.comment}static isTokenEscapeCharacter(s,o){return s.token===o.escapeChar}static isTokenQuote(s,o){return s.token===o.quote}static isTokenDelimiter(s,o){return s.token===o.delimiter}}},{}],160:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.ColumnFormatter=void 0,i.ColumnFormatter=class{constructor(s){s.trim?this.format=o=>o.trim():s.ltrim?this.format=o=>o.trimLeft():s.rtrim?this.format=o=>o.trimRight():this.format=o=>o}}},{}],161:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.ColumnParser=void 0;const s=t("./NonQuotedColumnParser"),o=t("./QuotedColumnParser"),l=t("../Token");i.ColumnParser=class{constructor(c){this.parserOptions=c,this.quotedColumnParser=new o.QuotedColumnParser(c),this.nonQuotedColumnParser=new s.NonQuotedColumnParser(c)}parse(c){const{nextNonSpaceToken:a}=c;return a!==null&&l.Token.isTokenQuote(a,this.parserOptions)?(c.advanceToToken(a),this.quotedColumnParser.parse(c)):this.nonQuotedColumnParser.parse(c)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.NonQuotedColumnParser=void 0;const s=t("./ColumnFormatter"),o=t("../Token");i.NonQuotedColumnParser=class{constructor(l){this.parserOptions=l,this.columnFormatter=new s.ColumnFormatter(l)}parse(l){if(!l.hasMoreCharacters)return null;const{parserOptions:c}=this,a=[];let u=l.nextCharacterToken;for(;u&&!o.Token.isTokenDelimiter(u,c)&&!o.Token.isTokenRowDelimiter(u);u=l.nextCharacterToken)a.push(u.token),l.advancePastToken(u);return this.columnFormatter.format(a.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.QuotedColumnParser=void 0;const s=t("./ColumnFormatter"),o=t("../Token");i.QuotedColumnParser=class{constructor(l){this.parserOptions=l,this.columnFormatter=new s.ColumnFormatter(l)}parse(l){if(!l.hasMoreCharacters)return null;const c=l.cursor,{foundClosingQuote:a,col:u}=this.gatherDataBetweenQuotes(l);if(!a){if(l.advanceTo(c),!l.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${l.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(l),u}gatherDataBetweenQuotes(l){const{parserOptions:c}=this;let a=!1,u=!1;const d=[];let f=l.nextCharacterToken;for(;!u&&f!==null;f=l.nextCharacterToken){const h=o.Token.isTokenQuote(f,c);if(!a&&h)a=!0;else if(a)if(o.Token.isTokenEscapeCharacter(f,c)){l.advancePastToken(f);const m=l.nextCharacterToken;m!==null&&(o.Token.isTokenQuote(m,c)||o.Token.isTokenEscapeCharacter(m,c))?(d.push(m.token),f=m):h?u=!0:d.push(f.token)}else h?u=!0:d.push(f.token);l.advancePastToken(f)}return{col:this.columnFormatter.format(d.join("")),foundClosingQuote:u}}checkForMalformedColumn(l){const{parserOptions:c}=this,{nextNonSpaceToken:a}=l;if(a){const u=o.Token.isTokenDelimiter(a,c),d=o.Token.isTokenRowDelimiter(a);if(!u&&!d){const f=l.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${c.escapedDelimiter}' OR new line got: '${a.token}'. at '${f}`)}l.advanceToToken(a)}else l.hasMoreData||l.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.ColumnFormatter=i.QuotedColumnParser=i.NonQuotedColumnParser=i.ColumnParser=void 0;var s=t("./ColumnParser");Object.defineProperty(i,"ColumnParser",{enumerable:!0,get:function(){return s.ColumnParser}});var o=t("./NonQuotedColumnParser");Object.defineProperty(i,"NonQuotedColumnParser",{enumerable:!0,get:function(){return o.NonQuotedColumnParser}});var l=t("./QuotedColumnParser");Object.defineProperty(i,"QuotedColumnParser",{enumerable:!0,get:function(){return l.QuotedColumnParser}});var c=t("./ColumnFormatter");Object.defineProperty(i,"ColumnFormatter",{enumerable:!0,get:function(){return c.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.QuotedColumnParser=i.NonQuotedColumnParser=i.ColumnParser=i.Token=i.Scanner=i.RowParser=i.Parser=void 0;var s=t("./Parser");Object.defineProperty(i,"Parser",{enumerable:!0,get:function(){return s.Parser}});var o=t("./RowParser");Object.defineProperty(i,"RowParser",{enumerable:!0,get:function(){return o.RowParser}});var l=t("./Scanner");Object.defineProperty(i,"Scanner",{enumerable:!0,get:function(){return l.Scanner}});var c=t("./Token");Object.defineProperty(i,"Token",{enumerable:!0,get:function(){return c.Token}});var a=t("./column");Object.defineProperty(i,"ColumnParser",{enumerable:!0,get:function(){return a.ColumnParser}}),Object.defineProperty(i,"NonQuotedColumnParser",{enumerable:!0,get:function(){return a.NonQuotedColumnParser}}),Object.defineProperty(i,"QuotedColumnParser",{enumerable:!0,get:function(){return a.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(t,n,i){var s=function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(i,"__esModule",{value:!0}),i.HeaderTransformer=void 0;const o=s(t("lodash.isundefined")),l=s(t("lodash.isfunction")),c=s(t("lodash.uniq")),a=s(t("lodash.groupby"));i.HeaderTransformer=class{constructor(u){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=u,u.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(u.headers)?this.setHeaders(u.headers):l.default(u.headers)&&(this.headersTransform=u.headers)}transform(u,d){return this.shouldMapRow(u)?d(null,this.processRow(u)):d(null,{row:null,isValid:!0})}shouldMapRow(u){const{parserOptions:d}=this;if(!this.headersTransform&&d.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(u)){if(this.headersTransform)this.setHeaders(this.headersTransform(u));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(u)}return!1}return!0}processRow(u){if(!this.headers)return{row:u,isValid:!0};const{parserOptions:d}=this;if(!d.discardUnmappedColumns&&u.length>this.headersLength){if(!d.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${u.length}`);return{row:u,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${u.length}`}}return d.strictColumnHandling&&u.length<this.headersLength?{row:u,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${u.length}`}:{row:this.mapHeaders(u),isValid:!0}}mapHeaders(u){const d={},{headers:f,headersLength:h}=this;for(let m=0;m<h;m+=1){const g=f[m];if(!o.default(g)){const p=u[m];o.default(p)?d[g]="":d[g]=p}}return d}setHeaders(u){var d;const f=u.filter(h=>!!h);if(c.default(f).length!==f.length){const h=a.default(f),m=Object.keys(h).filter(g=>h[g].length>1);throw new Error("Duplicate headers found "+JSON.stringify(m))}this.headers=u,this.receivedHeaders=!0,this.headersLength=((d=this.headers)===null||d===void 0?void 0:d.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(t,n,i){var s=function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(i,"__esModule",{value:!0}),i.RowTransformerValidator=void 0;const o=s(t("lodash.isfunction")),l=t("../types");class c{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(u){return l.isSyncTransform(u)?(d,f)=>{let h=null;try{h=u(d)}catch(m){return f(m)}return f(null,h)}:u}static createValidator(u){return l.isSyncValidate(u)?(d,f)=>{f(null,{row:d,isValid:u(d)})}:(d,f)=>{u(d,(h,m,g)=>h?f(h):f(null,m?{row:d,isValid:m,reason:g}:{row:d,isValid:!1,reason:g}))}}set rowTransform(u){if(!o.default(u))throw new TypeError("The transform should be a function");this._rowTransform=c.createTransform(u)}set rowValidator(u){if(!o.default(u))throw new TypeError("The validate should be a function");this._rowValidator=c.createValidator(u)}transformAndValidate(u,d){return this.callTransformer(u,(f,h)=>f?d(f):h?this.callValidator(h,(m,g)=>m?d(m):g&&!g.isValid?d(null,{row:h,isValid:!1,reason:g.reason}):d(null,{row:h,isValid:!0})):d(null,{row:null,isValid:!0}))}callTransformer(u,d){return this._rowTransform?this._rowTransform(u,d):d(null,u)}callValidator(u,d){return this._rowValidator?this._rowValidator(u,d):d(null,{row:u,isValid:!0})}}i.RowTransformerValidator=c},{"../types":169,"lodash.isfunction":446}],168:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.HeaderTransformer=i.RowTransformerValidator=void 0;var s=t("./RowTransformerValidator");Object.defineProperty(i,"RowTransformerValidator",{enumerable:!0,get:function(){return s.RowTransformerValidator}});var o=t("./HeaderTransformer");Object.defineProperty(i,"HeaderTransformer",{enumerable:!0,get:function(){return o.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.isSyncValidate=i.isSyncTransform=void 0,i.isSyncTransform=s=>s.length===1,i.isSyncValidate=s=>s.length===1},{}],170:[function(t,n,i){const s=i;s.bignum=t("bn.js"),s.define=t("./asn1/api").define,s.base=t("./asn1/base"),s.constants=t("./asn1/constants"),s.decoders=t("./asn1/decoders"),s.encoders=t("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(t,n,i){const s=t("./encoders"),o=t("./decoders"),l=t("inherits");function c(a,u){this.name=a,this.body=u,this.decoders={},this.encoders={}}i.define=function(a,u){return new c(a,u)},c.prototype._createNamed=function(a){const u=this.name;function d(f){this._initNamed(f,u)}return l(d,a),d.prototype._initNamed=function(f,h){a.call(this,f,h)},new d(this)},c.prototype._getDecoder=function(a){return a=a||"der",this.decoders.hasOwnProperty(a)||(this.decoders[a]=this._createNamed(o[a])),this.decoders[a]},c.prototype.decode=function(a,u,d){return this._getDecoder(u).decode(a,d)},c.prototype._getEncoder=function(a){return a=a||"der",this.encoders.hasOwnProperty(a)||(this.encoders[a]=this._createNamed(s[a])),this.encoders[a]},c.prototype.encode=function(a,u,d){return this._getEncoder(u).encode(a,d)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(t,n,i){const s=t("inherits"),o=t("../base/reporter").Reporter,l=t("safer-buffer").Buffer;function c(u,d){o.call(this,d),l.isBuffer(u)?(this.base=u,this.offset=0,this.length=u.length):this.error("Input not Buffer")}function a(u,d){if(Array.isArray(u))this.length=0,this.value=u.map(function(f){return a.isEncoderBuffer(f)||(f=new a(f,d)),this.length+=f.length,f},this);else if(typeof u=="number"){if(!(0<=u&&u<=255))return d.error("non-byte EncoderBuffer value");this.value=u,this.length=1}else if(typeof u=="string")this.value=u,this.length=l.byteLength(u);else{if(!l.isBuffer(u))return d.error("Unsupported type: "+typeof u);this.value=u,this.length=u.length}}s(c,o),i.DecoderBuffer=c,c.isDecoderBuffer=function(u){return u instanceof c?!0:typeof u=="object"&&l.isBuffer(u.base)&&u.constructor.name==="DecoderBuffer"&&typeof u.offset=="number"&&typeof u.length=="number"&&typeof u.save=="function"&&typeof u.restore=="function"&&typeof u.isEmpty=="function"&&typeof u.readUInt8=="function"&&typeof u.skip=="function"&&typeof u.raw=="function"},c.prototype.save=function(){return{offset:this.offset,reporter:o.prototype.save.call(this)}},c.prototype.restore=function(u){const d=new c(this.base);return d.offset=u.offset,d.length=this.offset,this.offset=u.offset,o.prototype.restore.call(this,u.reporter),d},c.prototype.isEmpty=function(){return this.offset===this.length},c.prototype.readUInt8=function(u){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(u||"DecoderBuffer overrun")},c.prototype.skip=function(u,d){if(!(this.offset+u<=this.length))return this.error(d||"DecoderBuffer overrun");const f=new c(this.base);return f._reporterState=this._reporterState,f.offset=this.offset,f.length=this.offset+u,this.offset+=u,f},c.prototype.raw=function(u){return this.base.slice(u?u.offset:this.offset,this.length)},i.EncoderBuffer=a,a.isEncoderBuffer=function(u){return u instanceof a?!0:typeof u=="object"&&u.constructor.name==="EncoderBuffer"&&typeof u.length=="number"&&typeof u.join=="function"},a.prototype.join=function(u,d){return u||(u=l.alloc(this.length)),d||(d=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(f){f.join(u,d),d+=f.length}):(typeof this.value=="number"?u[d]=this.value:typeof this.value=="string"?u.write(this.value,d):l.isBuffer(this.value)&&this.value.copy(u,d),d+=this.length)),u}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(t,n,i){const s=i;s.Reporter=t("./reporter").Reporter,s.DecoderBuffer=t("./buffer").DecoderBuffer,s.EncoderBuffer=t("./buffer").EncoderBuffer,s.Node=t("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(t,n,i){const s=t("../base/reporter").Reporter,o=t("../base/buffer").EncoderBuffer,l=t("../base/buffer").DecoderBuffer,c=t("minimalistic-assert"),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function d(h,m,g){const p={};this._baseState=p,p.name=g,p.enc=h,p.parent=m||null,p.children=null,p.tag=null,p.args=null,p.reverseArgs=null,p.choice=null,p.optional=!1,p.any=!1,p.obj=!1,p.use=null,p.useDecoder=null,p.key=null,p.default=null,p.explicit=null,p.implicit=null,p.contains=null,p.parent||(p.children=[],this._wrap())}n.exports=d;const f=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];d.prototype.clone=function(){const h=this._baseState,m={};f.forEach(function(p){m[p]=h[p]});const g=new this.constructor(m.parent);return g._baseState=m,g},d.prototype._wrap=function(){const h=this._baseState;u.forEach(function(m){this[m]=function(){const g=new this.constructor(this);return h.children.push(g),g[m].apply(g,arguments)}},this)},d.prototype._init=function(h){const m=this._baseState;c(m.parent===null),h.call(this),m.children=m.children.filter(function(g){return g._baseState.parent===this},this),c.equal(m.children.length,1,"Root node can have only one child")},d.prototype._useArgs=function(h){const m=this._baseState,g=h.filter(function(p){return p instanceof this.constructor},this);h=h.filter(function(p){return!(p instanceof this.constructor)},this),g.length!==0&&(c(m.children===null),m.children=g,g.forEach(function(p){p._baseState.parent=this},this)),h.length!==0&&(c(m.args===null),m.args=h,m.reverseArgs=h.map(function(p){if(typeof p!="object"||p.constructor!==Object)return p;const y={};return Object.keys(p).forEach(function(b){b==(0|b)&&(b|=0);const v=p[b];y[v]=b}),y}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(h){d.prototype[h]=function(){const m=this._baseState;throw new Error(h+" not implemented for encoding: "+m.enc)}}),a.forEach(function(h){d.prototype[h]=function(){const m=this._baseState,g=Array.prototype.slice.call(arguments);return c(m.tag===null),m.tag=h,this._useArgs(g),this}}),d.prototype.use=function(h){c(h);const m=this._baseState;return c(m.use===null),m.use=h,this},d.prototype.optional=function(){return this._baseState.optional=!0,this},d.prototype.def=function(h){const m=this._baseState;return c(m.default===null),m.default=h,m.optional=!0,this},d.prototype.explicit=function(h){const m=this._baseState;return c(m.explicit===null&&m.implicit===null),m.explicit=h,this},d.prototype.implicit=function(h){const m=this._baseState;return c(m.explicit===null&&m.implicit===null),m.implicit=h,this},d.prototype.obj=function(){const h=this._baseState,m=Array.prototype.slice.call(arguments);return h.obj=!0,m.length!==0&&this._useArgs(m),this},d.prototype.key=function(h){const m=this._baseState;return c(m.key===null),m.key=h,this},d.prototype.any=function(){return this._baseState.any=!0,this},d.prototype.choice=function(h){const m=this._baseState;return c(m.choice===null),m.choice=h,this._useArgs(Object.keys(h).map(function(g){return h[g]})),this},d.prototype.contains=function(h){const m=this._baseState;return c(m.use===null),m.contains=h,this},d.prototype._decode=function(h,m){const g=this._baseState;if(g.parent===null)return h.wrapResult(g.children[0]._decode(h,m));let p,y=g.default,b=!0,v=null;if(g.key!==null&&(v=h.enterKey(g.key)),g.optional){let E=null;if(g.explicit!==null?E=g.explicit:g.implicit!==null?E=g.implicit:g.tag!==null&&(E=g.tag),E!==null||g.any){if(b=this._peekTag(h,E,g.any),h.isError(b))return b}else{const M=h.save();try{g.choice===null?this._decodeGeneric(g.tag,h,m):this._decodeChoice(h,m),b=!0}catch{b=!1}h.restore(M)}}if(g.obj&&b&&(p=h.enterObject()),b){if(g.explicit!==null){const M=this._decodeTag(h,g.explicit);if(h.isError(M))return M;h=M}const E=h.offset;if(g.use===null&&g.choice===null){let M;g.any&&(M=h.save());const W=this._decodeTag(h,g.implicit!==null?g.implicit:g.tag,g.any);if(h.isError(W))return W;g.any?y=h.raw(M):h=W}if(m&&m.track&&g.tag!==null&&m.track(h.path(),E,h.length,"tagged"),m&&m.track&&g.tag!==null&&m.track(h.path(),h.offset,h.length,"content"),g.any||(y=g.choice===null?this._decodeGeneric(g.tag,h,m):this._decodeChoice(h,m)),h.isError(y))return y;if(g.any||g.choice!==null||g.children===null||g.children.forEach(function(M){M._decode(h,m)}),g.contains&&(g.tag==="octstr"||g.tag==="bitstr")){const M=new l(y);y=this._getUse(g.contains,h._reporterState.obj)._decode(M,m)}}return g.obj&&b&&(y=h.leaveObject(p)),g.key===null||y===null&&b!==!0?v!==null&&h.exitKey(v):h.leaveKey(v,g.key,y),y},d.prototype._decodeGeneric=function(h,m,g){const p=this._baseState;return h==="seq"||h==="set"?null:h==="seqof"||h==="setof"?this._decodeList(m,h,p.args[0],g):/str$/.test(h)?this._decodeStr(m,h,g):h==="objid"&&p.args?this._decodeObjid(m,p.args[0],p.args[1],g):h==="objid"?this._decodeObjid(m,null,null,g):h==="gentime"||h==="utctime"?this._decodeTime(m,h,g):h==="null_"?this._decodeNull(m,g):h==="bool"?this._decodeBool(m,g):h==="objDesc"?this._decodeStr(m,h,g):h==="int"||h==="enum"?this._decodeInt(m,p.args&&p.args[0],g):p.use!==null?this._getUse(p.use,m._reporterState.obj)._decode(m,g):m.error("unknown tag: "+h)},d.prototype._getUse=function(h,m){const g=this._baseState;return g.useDecoder=this._use(h,m),c(g.useDecoder._baseState.parent===null),g.useDecoder=g.useDecoder._baseState.children[0],g.implicit!==g.useDecoder._baseState.implicit&&(g.useDecoder=g.useDecoder.clone(),g.useDecoder._baseState.implicit=g.implicit),g.useDecoder},d.prototype._decodeChoice=function(h,m){const g=this._baseState;let p=null,y=!1;return Object.keys(g.choice).some(function(b){const v=h.save(),E=g.choice[b];try{const M=E._decode(h,m);if(h.isError(M))return!1;p={type:b,value:M},y=!0}catch{return h.restore(v),!1}return!0},this),y?p:h.error("Choice not matched")},d.prototype._createEncoderBuffer=function(h){return new o(h,this.reporter)},d.prototype._encode=function(h,m,g){const p=this._baseState;if(p.default!==null&&p.default===h)return;const y=this._encodeValue(h,m,g);return y===void 0||this._skipDefault(y,m,g)?void 0:y},d.prototype._encodeValue=function(h,m,g){const p=this._baseState;if(p.parent===null)return p.children[0]._encode(h,m||new s);let y=null;if(this.reporter=m,p.optional&&h===void 0){if(p.default===null)return;h=p.default}let b=null,v=!1;if(p.any)y=this._createEncoderBuffer(h);else if(p.choice)y=this._encodeChoice(h,m);else if(p.contains)b=this._getUse(p.contains,g)._encode(h,m),v=!0;else if(p.children)b=p.children.map(function(E){if(E._baseState.tag==="null_")return E._encode(null,m,h);if(E._baseState.key===null)return m.error("Child should have a key");const M=m.enterKey(E._baseState.key);if(typeof h!="object")return m.error("Child expected, but input is not object");const W=E._encode(h[E._baseState.key],m,h);return m.leaveKey(M),W},this).filter(function(E){return E}),b=this._createEncoderBuffer(b);else if(p.tag==="seqof"||p.tag==="setof"){if(!p.args||p.args.length!==1)return m.error("Too many args for : "+p.tag);if(!Array.isArray(h))return m.error("seqof/setof, but data is not Array");const E=this.clone();E._baseState.implicit=null,b=this._createEncoderBuffer(h.map(function(M){const W=this._baseState;return this._getUse(W.args[0],h)._encode(M,m)},E))}else p.use!==null?y=this._getUse(p.use,g)._encode(h,m):(b=this._encodePrimitive(p.tag,h),v=!0);if(!p.any&&p.choice===null){const E=p.implicit!==null?p.implicit:p.tag,M=p.implicit===null?"universal":"context";E===null?p.use===null&&m.error("Tag could be omitted only for .use()"):p.use===null&&(y=this._encodeComposite(E,v,M,b))}return p.explicit!==null&&(y=this._encodeComposite(p.explicit,!1,"context",y)),y},d.prototype._encodeChoice=function(h,m){const g=this._baseState,p=g.choice[h.type];return p||c(!1,h.type+" not found in "+JSON.stringify(Object.keys(g.choice))),p._encode(h.value,m)},d.prototype._encodePrimitive=function(h,m){const g=this._baseState;if(/str$/.test(h))return this._encodeStr(m,h);if(h==="objid"&&g.args)return this._encodeObjid(m,g.reverseArgs[0],g.args[1]);if(h==="objid")return this._encodeObjid(m,null,null);if(h==="gentime"||h==="utctime")return this._encodeTime(m,h);if(h==="null_")return this._encodeNull();if(h==="int"||h==="enum")return this._encodeInt(m,g.args&&g.reverseArgs[0]);if(h==="bool")return this._encodeBool(m);if(h==="objDesc")return this._encodeStr(m,h);throw new Error("Unsupported tag: "+h)},d.prototype._isNumstr=function(h){return/^[0-9 ]*$/.test(h)},d.prototype._isPrintstr=function(h){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(h)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(t,n,i){const s=t("inherits");function o(c){this._reporterState={obj:null,path:[],options:c||{},errors:[]}}function l(c,a){this.path=c,this.rethrow(a)}i.Reporter=o,o.prototype.isError=function(c){return c instanceof l},o.prototype.save=function(){const c=this._reporterState;return{obj:c.obj,pathLen:c.path.length}},o.prototype.restore=function(c){const a=this._reporterState;a.obj=c.obj,a.path=a.path.slice(0,c.pathLen)},o.prototype.enterKey=function(c){return this._reporterState.path.push(c)},o.prototype.exitKey=function(c){const a=this._reporterState;a.path=a.path.slice(0,c-1)},o.prototype.leaveKey=function(c,a,u){const d=this._reporterState;this.exitKey(c),d.obj!==null&&(d.obj[a]=u)},o.prototype.path=function(){return this._reporterState.path.join("/")},o.prototype.enterObject=function(){const c=this._reporterState,a=c.obj;return c.obj={},a},o.prototype.leaveObject=function(c){const a=this._reporterState,u=a.obj;return a.obj=c,u},o.prototype.error=function(c){let a;const u=this._reporterState,d=c instanceof l;if(a=d?c:new l(u.path.map(function(f){return"["+JSON.stringify(f)+"]"}).join(""),c.message||c,c.stack),!u.options.partial)throw a;return d||u.errors.push(a),a},o.prototype.wrapResult=function(c){const a=this._reporterState;return a.options.partial?{result:this.isError(c)?null:c,errors:a.errors}:c},s(l,Error),l.prototype.rethrow=function(c){if(this.message=c+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,l),!this.stack)try{throw new Error(this.message)}catch(a){this.stack=a.stack}return this}},{inherits:440}],176:[function(t,n,i){function s(o){const l={};return Object.keys(o).forEach(function(c){(0|c)==c&&(c|=0);const a=o[c];l[a]=c}),l}i.tagClass={0:"universal",1:"application",2:"context",3:"private"},i.tagClassByName=s(i.tagClass),i.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},i.tagByName=s(i.tag)},{}],177:[function(t,n,i){const s=i;s._reverse=function(o){const l={};return Object.keys(o).forEach(function(c){(0|c)==c&&(c|=0);const a=o[c];l[a]=c}),l},s.der=t("./der")},{"./der":176}],178:[function(t,n,i){const s=t("inherits"),o=t("bn.js"),l=t("../base/buffer").DecoderBuffer,c=t("../base/node"),a=t("../constants/der");function u(m){this.enc="der",this.name=m.name,this.entity=m,this.tree=new d,this.tree._init(m.body)}function d(m){c.call(this,"der",m)}function f(m,g){let p=m.readUInt8(g);if(m.isError(p))return p;const y=a.tagClass[p>>6],b=(32&p)==0;if((31&p)==31){let v=p;for(p=0;(128&v)==128;){if(v=m.readUInt8(g),m.isError(v))return v;p<<=7,p|=127&v}}else p&=31;return{cls:y,primitive:b,tag:p,tagStr:a.tag[p]}}function h(m,g,p){let y=m.readUInt8(p);if(m.isError(y))return y;if(!g&&y===128)return null;if(!(128&y))return y;const b=127&y;if(b>4)return m.error("length octect is too long");y=0;for(let v=0;v<b;v++){y<<=8;const E=m.readUInt8(p);if(m.isError(E))return E;y|=E}return y}n.exports=u,u.prototype.decode=function(m,g){return l.isDecoderBuffer(m)||(m=new l(m,g)),this.tree._decode(m,g)},s(d,c),d.prototype._peekTag=function(m,g,p){if(m.isEmpty())return!1;const y=m.save(),b=f(m,'Failed to peek tag: "'+g+'"');return m.isError(b)?b:(m.restore(y),b.tag===g||b.tagStr===g||b.tagStr+"of"===g||p)},d.prototype._decodeTag=function(m,g,p){const y=f(m,'Failed to decode tag of "'+g+'"');if(m.isError(y))return y;let b=h(m,y.primitive,'Failed to get length of "'+g+'"');if(m.isError(b))return b;if(!p&&y.tag!==g&&y.tagStr!==g&&y.tagStr+"of"!==g)return m.error('Failed to match tag: "'+g+'"');if(y.primitive||b!==null)return m.skip(b,'Failed to match body of: "'+g+'"');const v=m.save(),E=this._skipUntilEnd(m,'Failed to skip indefinite length body: "'+this.tag+'"');return m.isError(E)?E:(b=m.offset-v.offset,m.restore(v),m.skip(b,'Failed to match body of: "'+g+'"'))},d.prototype._skipUntilEnd=function(m,g){for(;;){const p=f(m,g);if(m.isError(p))return p;const y=h(m,p.primitive,g);if(m.isError(y))return y;let b;if(b=p.primitive||y!==null?m.skip(y):this._skipUntilEnd(m,g),m.isError(b))return b;if(p.tagStr==="end")break}},d.prototype._decodeList=function(m,g,p,y){const b=[];for(;!m.isEmpty();){const v=this._peekTag(m,"end");if(m.isError(v))return v;const E=p.decode(m,"der",y);if(m.isError(E)&&v)break;b.push(E)}return b},d.prototype._decodeStr=function(m,g){if(g==="bitstr"){const p=m.readUInt8();return m.isError(p)?p:{unused:p,data:m.raw()}}if(g==="bmpstr"){const p=m.raw();if(p.length%2==1)return m.error("Decoding of string type: bmpstr length mismatch");let y="";for(let b=0;b<p.length/2;b++)y+=String.fromCharCode(p.readUInt16BE(2*b));return y}if(g==="numstr"){const p=m.raw().toString("ascii");return this._isNumstr(p)?p:m.error("Decoding of string type: numstr unsupported characters")}if(g==="octstr"||g==="objDesc")return m.raw();if(g==="printstr"){const p=m.raw().toString("ascii");return this._isPrintstr(p)?p:m.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(g)?m.raw().toString():m.error("Decoding of string type: "+g+" unsupported")},d.prototype._decodeObjid=function(m,g,p){let y;const b=[];let v=0,E=0;for(;!m.isEmpty();)E=m.readUInt8(),v<<=7,v|=127&E,!(128&E)&&(b.push(v),v=0);128&E&&b.push(v);const M=b[0]/40|0,W=b[0]%40;if(y=p?b:[M,W].concat(b.slice(1)),g){let $=g[y.join(" ")];$===void 0&&($=g[y.join(".")]),$!==void 0&&(y=$)}return y},d.prototype._decodeTime=function(m,g){const p=m.raw().toString();let y,b,v,E,M,W;if(g==="gentime")y=0|p.slice(0,4),b=0|p.slice(4,6),v=0|p.slice(6,8),E=0|p.slice(8,10),M=0|p.slice(10,12),W=0|p.slice(12,14);else{if(g!=="utctime")return m.error("Decoding "+g+" time is not supported yet");y=0|p.slice(0,2),b=0|p.slice(2,4),v=0|p.slice(4,6),E=0|p.slice(6,8),M=0|p.slice(8,10),W=0|p.slice(10,12),y=y<70?2e3+y:1900+y}return Date.UTC(y,b-1,v,E,M,W,0)},d.prototype._decodeNull=function(){return null},d.prototype._decodeBool=function(m){const g=m.readUInt8();return m.isError(g)?g:g!==0},d.prototype._decodeInt=function(m,g){const p=m.raw();let y=new o(p);return g&&(y=g[y.toString(10)]||y),y},d.prototype._use=function(m,g){return typeof m=="function"&&(m=m(g)),m._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(t,n,i){const s=i;s.der=t("./der"),s.pem=t("./pem")},{"./der":178,"./pem":180}],180:[function(t,n,i){const s=t("inherits"),o=t("safer-buffer").Buffer,l=t("./der");function c(a){l.call(this,a),this.enc="pem"}s(c,l),n.exports=c,c.prototype.decode=function(a,u){const d=a.toString().split(/[\r\n]+/g),f=u.label.toUpperCase(),h=/^-----(BEGIN|END) ([^-]+)-----$/;let m=-1,g=-1;for(let b=0;b<d.length;b++){const v=d[b].match(h);if(v!==null&&v[2]===f){if(m!==-1){if(v[1]!=="END")break;g=b;break}if(v[1]!=="BEGIN")break;m=b}}if(m===-1||g===-1)throw new Error("PEM section not found for: "+f);const p=d.slice(m+1,g).join("");p.replace(/[^a-z0-9+/=]+/gi,"");const y=o.from(p,"base64");return l.prototype.decode.call(this,y,u)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(t,n,i){const s=t("inherits"),o=t("safer-buffer").Buffer,l=t("../base/node"),c=t("../constants/der");function a(f){this.enc="der",this.name=f.name,this.entity=f,this.tree=new u,this.tree._init(f.body)}function u(f){l.call(this,"der",f)}function d(f){return f<10?"0"+f:f}n.exports=a,a.prototype.encode=function(f,h){return this.tree._encode(f,h).join()},s(u,l),u.prototype._encodeComposite=function(f,h,m,g){const p=function(v,E,M,W){let $;if(v==="seqof"?v="seq":v==="setof"&&(v="set"),c.tagByName.hasOwnProperty(v))$=c.tagByName[v];else{if(typeof v!="number"||(0|v)!==v)return W.error("Unknown tag: "+v);$=v}return $>=31?W.error("Multi-octet tag encoding unsupported"):(E||($|=32),$|=c.tagClassByName[M||"universal"]<<6,$)}(f,h,m,this.reporter);if(g.length<128){const v=o.alloc(2);return v[0]=p,v[1]=g.length,this._createEncoderBuffer([v,g])}let y=1;for(let v=g.length;v>=256;v>>=8)y++;const b=o.alloc(2+y);b[0]=p,b[1]=128|y;for(let v=1+y,E=g.length;E>0;v--,E>>=8)b[v]=255&E;return this._createEncoderBuffer([b,g])},u.prototype._encodeStr=function(f,h){if(h==="bitstr")return this._createEncoderBuffer([0|f.unused,f.data]);if(h==="bmpstr"){const m=o.alloc(2*f.length);for(let g=0;g<f.length;g++)m.writeUInt16BE(f.charCodeAt(g),2*g);return this._createEncoderBuffer(m)}return h==="numstr"?this._isNumstr(f)?this._createEncoderBuffer(f):this.reporter.error("Encoding of string type: numstr supports only digits and space"):h==="printstr"?this._isPrintstr(f)?this._createEncoderBuffer(f):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(h)||h==="objDesc"?this._createEncoderBuffer(f):this.reporter.error("Encoding of string type: "+h+" unsupported")},u.prototype._encodeObjid=function(f,h,m){if(typeof f=="string"){if(!h)return this.reporter.error("string objid given, but no values map found");if(!h.hasOwnProperty(f))return this.reporter.error("objid not found in values map");f=h[f].split(/[\s.]+/g);for(let b=0;b<f.length;b++)f[b]|=0}else if(Array.isArray(f)){f=f.slice();for(let b=0;b<f.length;b++)f[b]|=0}if(!Array.isArray(f))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(f));if(!m){if(f[1]>=40)return this.reporter.error("Second objid identifier OOB");f.splice(0,2,40*f[0]+f[1])}let g=0;for(let b=0;b<f.length;b++){let v=f[b];for(g++;v>=128;v>>=7)g++}const p=o.alloc(g);let y=p.length-1;for(let b=f.length-1;b>=0;b--){let v=f[b];for(p[y--]=127&v;(v>>=7)>0;)p[y--]=128|127&v}return this._createEncoderBuffer(p)},u.prototype._encodeTime=function(f,h){let m;const g=new Date(f);return h==="gentime"?m=[d(g.getUTCFullYear()),d(g.getUTCMonth()+1),d(g.getUTCDate()),d(g.getUTCHours()),d(g.getUTCMinutes()),d(g.getUTCSeconds()),"Z"].join(""):h==="utctime"?m=[d(g.getUTCFullYear()%100),d(g.getUTCMonth()+1),d(g.getUTCDate()),d(g.getUTCHours()),d(g.getUTCMinutes()),d(g.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+h+" time is not supported yet"),this._encodeStr(m,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(f,h){if(typeof f=="string"){if(!h)return this.reporter.error("String int or enum given, but no values map");if(!h.hasOwnProperty(f))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(f));f=h[f]}if(typeof f!="number"&&!o.isBuffer(f)){const p=f.toArray();!f.sign&&128&p[0]&&p.unshift(0),f=o.from(p)}if(o.isBuffer(f)){let p=f.length;f.length===0&&p++;const y=o.alloc(p);return f.copy(y),f.length===0&&(y[0]=0),this._createEncoderBuffer(y)}if(f<128)return this._createEncoderBuffer(f);if(f<256)return this._createEncoderBuffer([0,f]);let m=1;for(let p=f;p>=256;p>>=8)m++;const g=new Array(m);for(let p=g.length-1;p>=0;p--)g[p]=255&f,f>>=8;return 128&g[0]&&g.unshift(0),this._createEncoderBuffer(o.from(g))},u.prototype._encodeBool=function(f){return this._createEncoderBuffer(f?255:0)},u.prototype._use=function(f,h){return typeof f=="function"&&(f=f(h)),f._getEncoder("der").tree},u.prototype._skipDefault=function(f,h,m){const g=this._baseState;let p;if(g.default===null)return!1;const y=f.join();if(g.defaultBuffer===void 0&&(g.defaultBuffer=this._encodeValue(g.default,h,m).join()),y.length!==g.defaultBuffer.length)return!1;for(p=0;p<y.length;p++)if(y[p]!==g.defaultBuffer[p])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(t,n,i){const s=i;s.der=t("./der"),s.pem=t("./pem")},{"./der":181,"./pem":183}],183:[function(t,n,i){const s=t("inherits"),o=t("./der");function l(c){o.call(this,c),this.enc="pem"}s(l,o),n.exports=l,l.prototype.encode=function(c,a){const u=o.prototype.encode.call(this,c).toString("base64"),d=["-----BEGIN "+a.label+"-----"];for(let f=0;f<u.length;f+=64)d.push(u.slice(f,f+64));return d.push("-----END "+a.label+"-----"),d.join(`
`)}},{"./der":181,inherits:440}],184:[function(t,n,i){(function(s,o){function l(k,R){if(!k)throw new Error(R||"Assertion failed")}function c(k,R){k.super_=R;var C=function(){};C.prototype=R.prototype,k.prototype=new C,k.prototype.constructor=k}function a(k,R,C){if(a.isBN(k))return k;this.negative=0,this.words=null,this.length=0,this.red=null,k!==null&&(R!=="le"&&R!=="be"||(C=R,R=10),this._init(k||0,R||10,C||"be"))}var u;typeof s=="object"?s.exports=a:(void 0).BN=a,a.BN=a,a.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t("buffer").Buffer}catch{}function d(k,R){var C=k.charCodeAt(R);return C>=65&&C<=70?C-55:C>=97&&C<=102?C-87:C-48&15}function f(k,R,C){var _=d(k,C);return C-1>=R&&(_|=d(k,C-1)<<4),_}function h(k,R,C,_){for(var x=0,w=Math.min(k.length,C),S=R;S<w;S++){var I=k.charCodeAt(S)-48;x*=_,x+=I>=49?I-49+10:I>=17?I-17+10:I}return x}a.isBN=function(k){return k instanceof a||k!==null&&typeof k=="object"&&k.constructor.wordSize===a.wordSize&&Array.isArray(k.words)},a.max=function(k,R){return k.cmp(R)>0?k:R},a.min=function(k,R){return k.cmp(R)<0?k:R},a.prototype._init=function(k,R,C){if(typeof k=="number")return this._initNumber(k,R,C);if(typeof k=="object")return this._initArray(k,R,C);R==="hex"&&(R=16),l(R===(0|R)&&R>=2&&R<=36);var _=0;(k=k.toString().replace(/\s+/g,""))[0]==="-"&&(_++,this.negative=1),_<k.length&&(R===16?this._parseHex(k,_,C):(this._parseBase(k,R,_),C==="le"&&this._initArray(this.toArray(),R,C)))},a.prototype._initNumber=function(k,R,C){k<0&&(this.negative=1,k=-k),k<67108864?(this.words=[67108863&k],this.length=1):k<4503599627370496?(this.words=[67108863&k,k/67108864&67108863],this.length=2):(l(k<9007199254740992),this.words=[67108863&k,k/67108864&67108863,1],this.length=3),C==="le"&&this._initArray(this.toArray(),R,C)},a.prototype._initArray=function(k,R,C){if(l(typeof k.length=="number"),k.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(k.length/3),this.words=new Array(this.length);for(var _=0;_<this.length;_++)this.words[_]=0;var x,w,S=0;if(C==="be")for(_=k.length-1,x=0;_>=0;_-=3)w=k[_]|k[_-1]<<8|k[_-2]<<16,this.words[x]|=w<<S&67108863,this.words[x+1]=w>>>26-S&67108863,(S+=24)>=26&&(S-=26,x++);else if(C==="le")for(_=0,x=0;_<k.length;_+=3)w=k[_]|k[_+1]<<8|k[_+2]<<16,this.words[x]|=w<<S&67108863,this.words[x+1]=w>>>26-S&67108863,(S+=24)>=26&&(S-=26,x++);return this.strip()},a.prototype._parseHex=function(k,R,C){this.length=Math.ceil((k.length-R)/6),this.words=new Array(this.length);for(var _=0;_<this.length;_++)this.words[_]=0;var x,w=0,S=0;if(C==="be")for(_=k.length-1;_>=R;_-=2)x=f(k,R,_)<<w,this.words[S]|=67108863&x,w>=18?(w-=18,S+=1,this.words[S]|=x>>>26):w+=8;else for(_=(k.length-R)%2==0?R+1:R;_<k.length;_+=2)x=f(k,R,_)<<w,this.words[S]|=67108863&x,w>=18?(w-=18,S+=1,this.words[S]|=x>>>26):w+=8;this.strip()},a.prototype._parseBase=function(k,R,C){this.words=[0],this.length=1;for(var _=0,x=1;x<=67108863;x*=R)_++;_--,x=x/R|0;for(var w=k.length-C,S=w%_,I=Math.min(w,w-S)+C,z=0,A=C;A<I;A+=_)z=h(k,A,A+_,R),this.imuln(x),this.words[0]+z<67108864?this.words[0]+=z:this._iaddn(z);if(S!==0){var H=1;for(z=h(k,A,k.length,R),A=0;A<S;A++)H*=R;this.imuln(H),this.words[0]+z<67108864?this.words[0]+=z:this._iaddn(z)}this.strip()},a.prototype.copy=function(k){k.words=new Array(this.length);for(var R=0;R<this.length;R++)k.words[R]=this.words[R];k.length=this.length,k.negative=this.negative,k.red=this.red},a.prototype.clone=function(){var k=new a(null);return this.copy(k),k},a.prototype._expand=function(k){for(;this.length<k;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function y(k,R,C){C.negative=R.negative^k.negative;var _=k.length+R.length|0;C.length=_,_=_-1|0;var x=0|k.words[0],w=0|R.words[0],S=x*w,I=67108863&S,z=S/67108864|0;C.words[0]=I;for(var A=1;A<_;A++){for(var H=z>>>26,K=67108863&z,J=Math.min(A,R.length-1),V=Math.max(0,A-k.length+1);V<=J;V++){var X=A-V|0;H+=(S=(x=0|k.words[X])*(w=0|R.words[V])+K)/67108864|0,K=67108863&S}C.words[A]=0|K,z=0|H}return z!==0?C.words[A]=0|z:C.length--,C.strip()}a.prototype.toString=function(k,R){var C;if(R=0|R||1,(k=k||10)===16||k==="hex"){C="";for(var _=0,x=0,w=0;w<this.length;w++){var S=this.words[w],I=(16777215&(S<<_|x)).toString(16);C=(x=S>>>24-_&16777215)!==0||w!==this.length-1?m[6-I.length]+I+C:I+C,(_+=2)>=26&&(_-=26,w--)}for(x!==0&&(C=x.toString(16)+C);C.length%R!=0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}if(k===(0|k)&&k>=2&&k<=36){var z=g[k],A=p[k];C="";var H=this.clone();for(H.negative=0;!H.isZero();){var K=H.modn(A).toString(k);C=(H=H.idivn(A)).isZero()?K+C:m[z-K.length]+K+C}for(this.isZero()&&(C="0"+C);C.length%R!=0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}l(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var k=this.words[0];return this.length===2?k+=67108864*this.words[1]:this.length===3&&this.words[2]===1?k+=4503599627370496+67108864*this.words[1]:this.length>2&&l(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-k:k},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(k,R){return l(u!==void 0),this.toArrayLike(u,k,R)},a.prototype.toArray=function(k,R){return this.toArrayLike(Array,k,R)},a.prototype.toArrayLike=function(k,R,C){var _=this.byteLength(),x=C||Math.max(1,_);l(_<=x,"byte array longer than desired length"),l(x>0,"Requested array length <= 0"),this.strip();var w,S,I=R==="le",z=new k(x),A=this.clone();if(I){for(S=0;!A.isZero();S++)w=A.andln(255),A.iushrn(8),z[S]=w;for(;S<x;S++)z[S]=0}else{for(S=0;S<x-_;S++)z[S]=0;for(S=0;!A.isZero();S++)w=A.andln(255),A.iushrn(8),z[x-S-1]=w}return z},Math.clz32?a.prototype._countBits=function(k){return 32-Math.clz32(k)}:a.prototype._countBits=function(k){var R=k,C=0;return R>=4096&&(C+=13,R>>>=13),R>=64&&(C+=7,R>>>=7),R>=8&&(C+=4,R>>>=4),R>=2&&(C+=2,R>>>=2),C+R},a.prototype._zeroBits=function(k){if(k===0)return 26;var R=k,C=0;return!(8191&R)&&(C+=13,R>>>=13),!(127&R)&&(C+=7,R>>>=7),!(15&R)&&(C+=4,R>>>=4),!(3&R)&&(C+=2,R>>>=2),!(1&R)&&C++,C},a.prototype.bitLength=function(){var k=this.words[this.length-1],R=this._countBits(k);return 26*(this.length-1)+R},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var k=0,R=0;R<this.length;R++){var C=this._zeroBits(this.words[R]);if(k+=C,C!==26)break}return k},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(k){return this.negative!==0?this.abs().inotn(k).iaddn(1):this.clone()},a.prototype.fromTwos=function(k){return this.testn(k-1)?this.notn(k).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(k){for(;this.length<k.length;)this.words[this.length++]=0;for(var R=0;R<k.length;R++)this.words[R]=this.words[R]|k.words[R];return this.strip()},a.prototype.ior=function(k){return l((this.negative|k.negative)==0),this.iuor(k)},a.prototype.or=function(k){return this.length>k.length?this.clone().ior(k):k.clone().ior(this)},a.prototype.uor=function(k){return this.length>k.length?this.clone().iuor(k):k.clone().iuor(this)},a.prototype.iuand=function(k){var R;R=this.length>k.length?k:this;for(var C=0;C<R.length;C++)this.words[C]=this.words[C]&k.words[C];return this.length=R.length,this.strip()},a.prototype.iand=function(k){return l((this.negative|k.negative)==0),this.iuand(k)},a.prototype.and=function(k){return this.length>k.length?this.clone().iand(k):k.clone().iand(this)},a.prototype.uand=function(k){return this.length>k.length?this.clone().iuand(k):k.clone().iuand(this)},a.prototype.iuxor=function(k){var R,C;this.length>k.length?(R=this,C=k):(R=k,C=this);for(var _=0;_<C.length;_++)this.words[_]=R.words[_]^C.words[_];if(this!==R)for(;_<R.length;_++)this.words[_]=R.words[_];return this.length=R.length,this.strip()},a.prototype.ixor=function(k){return l((this.negative|k.negative)==0),this.iuxor(k)},a.prototype.xor=function(k){return this.length>k.length?this.clone().ixor(k):k.clone().ixor(this)},a.prototype.uxor=function(k){return this.length>k.length?this.clone().iuxor(k):k.clone().iuxor(this)},a.prototype.inotn=function(k){l(typeof k=="number"&&k>=0);var R=0|Math.ceil(k/26),C=k%26;this._expand(R),C>0&&R--;for(var _=0;_<R;_++)this.words[_]=67108863&~this.words[_];return C>0&&(this.words[_]=~this.words[_]&67108863>>26-C),this.strip()},a.prototype.notn=function(k){return this.clone().inotn(k)},a.prototype.setn=function(k,R){l(typeof k=="number"&&k>=0);var C=k/26|0,_=k%26;return this._expand(C+1),this.words[C]=R?this.words[C]|1<<_:this.words[C]&~(1<<_),this.strip()},a.prototype.iadd=function(k){var R,C,_;if(this.negative!==0&&k.negative===0)return this.negative=0,R=this.isub(k),this.negative^=1,this._normSign();if(this.negative===0&&k.negative!==0)return k.negative=0,R=this.isub(k),k.negative=1,R._normSign();this.length>k.length?(C=this,_=k):(C=k,_=this);for(var x=0,w=0;w<_.length;w++)R=(0|C.words[w])+(0|_.words[w])+x,this.words[w]=67108863&R,x=R>>>26;for(;x!==0&&w<C.length;w++)R=(0|C.words[w])+x,this.words[w]=67108863&R,x=R>>>26;if(this.length=C.length,x!==0)this.words[this.length]=x,this.length++;else if(C!==this)for(;w<C.length;w++)this.words[w]=C.words[w];return this},a.prototype.add=function(k){var R;return k.negative!==0&&this.negative===0?(k.negative=0,R=this.sub(k),k.negative^=1,R):k.negative===0&&this.negative!==0?(this.negative=0,R=k.sub(this),this.negative=1,R):this.length>k.length?this.clone().iadd(k):k.clone().iadd(this)},a.prototype.isub=function(k){if(k.negative!==0){k.negative=0;var R=this.iadd(k);return k.negative=1,R._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(k),this.negative=1,this._normSign();var C,_,x=this.cmp(k);if(x===0)return this.negative=0,this.length=1,this.words[0]=0,this;x>0?(C=this,_=k):(C=k,_=this);for(var w=0,S=0;S<_.length;S++)w=(R=(0|C.words[S])-(0|_.words[S])+w)>>26,this.words[S]=67108863&R;for(;w!==0&&S<C.length;S++)w=(R=(0|C.words[S])+w)>>26,this.words[S]=67108863&R;if(w===0&&S<C.length&&C!==this)for(;S<C.length;S++)this.words[S]=C.words[S];return this.length=Math.max(this.length,S),C!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(k){return this.clone().isub(k)};var b=function(k,R,C){var _,x,w,S=k.words,I=R.words,z=C.words,A=0,H=0|S[0],K=8191&H,J=H>>>13,V=0|S[1],X=8191&V,D=V>>>13,O=0|S[2],G=8191&O,Z=O>>>13,ue=0|S[3],te=8191&ue,oe=ue>>>13,re=0|S[4],be=8191&re,ie=re>>>13,le=0|S[5],ae=8191&le,Se=le>>>13,ve=0|S[6],ke=8191&ve,Ne=ve>>>13,ze=0|S[7],we=8191&ze,De=ze>>>13,He=0|S[8],We=8191&He,et=He>>>13,St=0|S[9],lt=8191&St,At=St>>>13,ct=0|I[0],at=8191&ct,wt=ct>>>13,ot=0|I[1],nt=8191&ot,zt=ot>>>13,Lt=0|I[2],Ct=8191&Lt,Ht=Lt>>>13,jt=0|I[3],Mt=8191&jt,Qt=jt>>>13,Sr=0|I[4],lr=8191&Sr,pr=Sr>>>13,jr=0|I[5],Ft=8191&jr,zr=jr>>>13,Rr=0|I[6],mr=8191&Rr,Ue=Rr>>>13,Ye=0|I[7],Xe=8191&Ye,Le=Ye>>>13,Fe=0|I[8],Ke=8191&Fe,pe=Fe>>>13,Te=0|I[9],Ze=8191&Te,ut=Te>>>13;C.negative=k.negative^R.negative,C.length=19;var he=(A+(_=Math.imul(K,at))|0)+((8191&(x=(x=Math.imul(K,wt))+Math.imul(J,at)|0))<<13)|0;A=((w=Math.imul(J,wt))+(x>>>13)|0)+(he>>>26)|0,he&=67108863,_=Math.imul(X,at),x=(x=Math.imul(X,wt))+Math.imul(D,at)|0,w=Math.imul(D,wt);var Ce=(A+(_=_+Math.imul(K,nt)|0)|0)+((8191&(x=(x=x+Math.imul(K,zt)|0)+Math.imul(J,nt)|0))<<13)|0;A=((w=w+Math.imul(J,zt)|0)+(x>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,_=Math.imul(G,at),x=(x=Math.imul(G,wt))+Math.imul(Z,at)|0,w=Math.imul(Z,wt),_=_+Math.imul(X,nt)|0,x=(x=x+Math.imul(X,zt)|0)+Math.imul(D,nt)|0,w=w+Math.imul(D,zt)|0;var Ve=(A+(_=_+Math.imul(K,Ct)|0)|0)+((8191&(x=(x=x+Math.imul(K,Ht)|0)+Math.imul(J,Ct)|0))<<13)|0;A=((w=w+Math.imul(J,Ht)|0)+(x>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,_=Math.imul(te,at),x=(x=Math.imul(te,wt))+Math.imul(oe,at)|0,w=Math.imul(oe,wt),_=_+Math.imul(G,nt)|0,x=(x=x+Math.imul(G,zt)|0)+Math.imul(Z,nt)|0,w=w+Math.imul(Z,zt)|0,_=_+Math.imul(X,Ct)|0,x=(x=x+Math.imul(X,Ht)|0)+Math.imul(D,Ct)|0,w=w+Math.imul(D,Ht)|0;var Be=(A+(_=_+Math.imul(K,Mt)|0)|0)+((8191&(x=(x=x+Math.imul(K,Qt)|0)+Math.imul(J,Mt)|0))<<13)|0;A=((w=w+Math.imul(J,Qt)|0)+(x>>>13)|0)+(Be>>>26)|0,Be&=67108863,_=Math.imul(be,at),x=(x=Math.imul(be,wt))+Math.imul(ie,at)|0,w=Math.imul(ie,wt),_=_+Math.imul(te,nt)|0,x=(x=x+Math.imul(te,zt)|0)+Math.imul(oe,nt)|0,w=w+Math.imul(oe,zt)|0,_=_+Math.imul(G,Ct)|0,x=(x=x+Math.imul(G,Ht)|0)+Math.imul(Z,Ct)|0,w=w+Math.imul(Z,Ht)|0,_=_+Math.imul(X,Mt)|0,x=(x=x+Math.imul(X,Qt)|0)+Math.imul(D,Mt)|0,w=w+Math.imul(D,Qt)|0;var st=(A+(_=_+Math.imul(K,lr)|0)|0)+((8191&(x=(x=x+Math.imul(K,pr)|0)+Math.imul(J,lr)|0))<<13)|0;A=((w=w+Math.imul(J,pr)|0)+(x>>>13)|0)+(st>>>26)|0,st&=67108863,_=Math.imul(ae,at),x=(x=Math.imul(ae,wt))+Math.imul(Se,at)|0,w=Math.imul(Se,wt),_=_+Math.imul(be,nt)|0,x=(x=x+Math.imul(be,zt)|0)+Math.imul(ie,nt)|0,w=w+Math.imul(ie,zt)|0,_=_+Math.imul(te,Ct)|0,x=(x=x+Math.imul(te,Ht)|0)+Math.imul(oe,Ct)|0,w=w+Math.imul(oe,Ht)|0,_=_+Math.imul(G,Mt)|0,x=(x=x+Math.imul(G,Qt)|0)+Math.imul(Z,Mt)|0,w=w+Math.imul(Z,Qt)|0,_=_+Math.imul(X,lr)|0,x=(x=x+Math.imul(X,pr)|0)+Math.imul(D,lr)|0,w=w+Math.imul(D,pr)|0;var Ge=(A+(_=_+Math.imul(K,Ft)|0)|0)+((8191&(x=(x=x+Math.imul(K,zr)|0)+Math.imul(J,Ft)|0))<<13)|0;A=((w=w+Math.imul(J,zr)|0)+(x>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,_=Math.imul(ke,at),x=(x=Math.imul(ke,wt))+Math.imul(Ne,at)|0,w=Math.imul(Ne,wt),_=_+Math.imul(ae,nt)|0,x=(x=x+Math.imul(ae,zt)|0)+Math.imul(Se,nt)|0,w=w+Math.imul(Se,zt)|0,_=_+Math.imul(be,Ct)|0,x=(x=x+Math.imul(be,Ht)|0)+Math.imul(ie,Ct)|0,w=w+Math.imul(ie,Ht)|0,_=_+Math.imul(te,Mt)|0,x=(x=x+Math.imul(te,Qt)|0)+Math.imul(oe,Mt)|0,w=w+Math.imul(oe,Qt)|0,_=_+Math.imul(G,lr)|0,x=(x=x+Math.imul(G,pr)|0)+Math.imul(Z,lr)|0,w=w+Math.imul(Z,pr)|0,_=_+Math.imul(X,Ft)|0,x=(x=x+Math.imul(X,zr)|0)+Math.imul(D,Ft)|0,w=w+Math.imul(D,zr)|0;var pt=(A+(_=_+Math.imul(K,mr)|0)|0)+((8191&(x=(x=x+Math.imul(K,Ue)|0)+Math.imul(J,mr)|0))<<13)|0;A=((w=w+Math.imul(J,Ue)|0)+(x>>>13)|0)+(pt>>>26)|0,pt&=67108863,_=Math.imul(we,at),x=(x=Math.imul(we,wt))+Math.imul(De,at)|0,w=Math.imul(De,wt),_=_+Math.imul(ke,nt)|0,x=(x=x+Math.imul(ke,zt)|0)+Math.imul(Ne,nt)|0,w=w+Math.imul(Ne,zt)|0,_=_+Math.imul(ae,Ct)|0,x=(x=x+Math.imul(ae,Ht)|0)+Math.imul(Se,Ct)|0,w=w+Math.imul(Se,Ht)|0,_=_+Math.imul(be,Mt)|0,x=(x=x+Math.imul(be,Qt)|0)+Math.imul(ie,Mt)|0,w=w+Math.imul(ie,Qt)|0,_=_+Math.imul(te,lr)|0,x=(x=x+Math.imul(te,pr)|0)+Math.imul(oe,lr)|0,w=w+Math.imul(oe,pr)|0,_=_+Math.imul(G,Ft)|0,x=(x=x+Math.imul(G,zr)|0)+Math.imul(Z,Ft)|0,w=w+Math.imul(Z,zr)|0,_=_+Math.imul(X,mr)|0,x=(x=x+Math.imul(X,Ue)|0)+Math.imul(D,mr)|0,w=w+Math.imul(D,Ue)|0;var de=(A+(_=_+Math.imul(K,Xe)|0)|0)+((8191&(x=(x=x+Math.imul(K,Le)|0)+Math.imul(J,Xe)|0))<<13)|0;A=((w=w+Math.imul(J,Le)|0)+(x>>>13)|0)+(de>>>26)|0,de&=67108863,_=Math.imul(We,at),x=(x=Math.imul(We,wt))+Math.imul(et,at)|0,w=Math.imul(et,wt),_=_+Math.imul(we,nt)|0,x=(x=x+Math.imul(we,zt)|0)+Math.imul(De,nt)|0,w=w+Math.imul(De,zt)|0,_=_+Math.imul(ke,Ct)|0,x=(x=x+Math.imul(ke,Ht)|0)+Math.imul(Ne,Ct)|0,w=w+Math.imul(Ne,Ht)|0,_=_+Math.imul(ae,Mt)|0,x=(x=x+Math.imul(ae,Qt)|0)+Math.imul(Se,Mt)|0,w=w+Math.imul(Se,Qt)|0,_=_+Math.imul(be,lr)|0,x=(x=x+Math.imul(be,pr)|0)+Math.imul(ie,lr)|0,w=w+Math.imul(ie,pr)|0,_=_+Math.imul(te,Ft)|0,x=(x=x+Math.imul(te,zr)|0)+Math.imul(oe,Ft)|0,w=w+Math.imul(oe,zr)|0,_=_+Math.imul(G,mr)|0,x=(x=x+Math.imul(G,Ue)|0)+Math.imul(Z,mr)|0,w=w+Math.imul(Z,Ue)|0,_=_+Math.imul(X,Xe)|0,x=(x=x+Math.imul(X,Le)|0)+Math.imul(D,Xe)|0,w=w+Math.imul(D,Le)|0;var Me=(A+(_=_+Math.imul(K,Ke)|0)|0)+((8191&(x=(x=x+Math.imul(K,pe)|0)+Math.imul(J,Ke)|0))<<13)|0;A=((w=w+Math.imul(J,pe)|0)+(x>>>13)|0)+(Me>>>26)|0,Me&=67108863,_=Math.imul(lt,at),x=(x=Math.imul(lt,wt))+Math.imul(At,at)|0,w=Math.imul(At,wt),_=_+Math.imul(We,nt)|0,x=(x=x+Math.imul(We,zt)|0)+Math.imul(et,nt)|0,w=w+Math.imul(et,zt)|0,_=_+Math.imul(we,Ct)|0,x=(x=x+Math.imul(we,Ht)|0)+Math.imul(De,Ct)|0,w=w+Math.imul(De,Ht)|0,_=_+Math.imul(ke,Mt)|0,x=(x=x+Math.imul(ke,Qt)|0)+Math.imul(Ne,Mt)|0,w=w+Math.imul(Ne,Qt)|0,_=_+Math.imul(ae,lr)|0,x=(x=x+Math.imul(ae,pr)|0)+Math.imul(Se,lr)|0,w=w+Math.imul(Se,pr)|0,_=_+Math.imul(be,Ft)|0,x=(x=x+Math.imul(be,zr)|0)+Math.imul(ie,Ft)|0,w=w+Math.imul(ie,zr)|0,_=_+Math.imul(te,mr)|0,x=(x=x+Math.imul(te,Ue)|0)+Math.imul(oe,mr)|0,w=w+Math.imul(oe,Ue)|0,_=_+Math.imul(G,Xe)|0,x=(x=x+Math.imul(G,Le)|0)+Math.imul(Z,Xe)|0,w=w+Math.imul(Z,Le)|0,_=_+Math.imul(X,Ke)|0,x=(x=x+Math.imul(X,pe)|0)+Math.imul(D,Ke)|0,w=w+Math.imul(D,pe)|0;var Oe=(A+(_=_+Math.imul(K,Ze)|0)|0)+((8191&(x=(x=x+Math.imul(K,ut)|0)+Math.imul(J,Ze)|0))<<13)|0;A=((w=w+Math.imul(J,ut)|0)+(x>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,_=Math.imul(lt,nt),x=(x=Math.imul(lt,zt))+Math.imul(At,nt)|0,w=Math.imul(At,zt),_=_+Math.imul(We,Ct)|0,x=(x=x+Math.imul(We,Ht)|0)+Math.imul(et,Ct)|0,w=w+Math.imul(et,Ht)|0,_=_+Math.imul(we,Mt)|0,x=(x=x+Math.imul(we,Qt)|0)+Math.imul(De,Mt)|0,w=w+Math.imul(De,Qt)|0,_=_+Math.imul(ke,lr)|0,x=(x=x+Math.imul(ke,pr)|0)+Math.imul(Ne,lr)|0,w=w+Math.imul(Ne,pr)|0,_=_+Math.imul(ae,Ft)|0,x=(x=x+Math.imul(ae,zr)|0)+Math.imul(Se,Ft)|0,w=w+Math.imul(Se,zr)|0,_=_+Math.imul(be,mr)|0,x=(x=x+Math.imul(be,Ue)|0)+Math.imul(ie,mr)|0,w=w+Math.imul(ie,Ue)|0,_=_+Math.imul(te,Xe)|0,x=(x=x+Math.imul(te,Le)|0)+Math.imul(oe,Xe)|0,w=w+Math.imul(oe,Le)|0,_=_+Math.imul(G,Ke)|0,x=(x=x+Math.imul(G,pe)|0)+Math.imul(Z,Ke)|0,w=w+Math.imul(Z,pe)|0;var it=(A+(_=_+Math.imul(X,Ze)|0)|0)+((8191&(x=(x=x+Math.imul(X,ut)|0)+Math.imul(D,Ze)|0))<<13)|0;A=((w=w+Math.imul(D,ut)|0)+(x>>>13)|0)+(it>>>26)|0,it&=67108863,_=Math.imul(lt,Ct),x=(x=Math.imul(lt,Ht))+Math.imul(At,Ct)|0,w=Math.imul(At,Ht),_=_+Math.imul(We,Mt)|0,x=(x=x+Math.imul(We,Qt)|0)+Math.imul(et,Mt)|0,w=w+Math.imul(et,Qt)|0,_=_+Math.imul(we,lr)|0,x=(x=x+Math.imul(we,pr)|0)+Math.imul(De,lr)|0,w=w+Math.imul(De,pr)|0,_=_+Math.imul(ke,Ft)|0,x=(x=x+Math.imul(ke,zr)|0)+Math.imul(Ne,Ft)|0,w=w+Math.imul(Ne,zr)|0,_=_+Math.imul(ae,mr)|0,x=(x=x+Math.imul(ae,Ue)|0)+Math.imul(Se,mr)|0,w=w+Math.imul(Se,Ue)|0,_=_+Math.imul(be,Xe)|0,x=(x=x+Math.imul(be,Le)|0)+Math.imul(ie,Xe)|0,w=w+Math.imul(ie,Le)|0,_=_+Math.imul(te,Ke)|0,x=(x=x+Math.imul(te,pe)|0)+Math.imul(oe,Ke)|0,w=w+Math.imul(oe,pe)|0;var vt=(A+(_=_+Math.imul(G,Ze)|0)|0)+((8191&(x=(x=x+Math.imul(G,ut)|0)+Math.imul(Z,Ze)|0))<<13)|0;A=((w=w+Math.imul(Z,ut)|0)+(x>>>13)|0)+(vt>>>26)|0,vt&=67108863,_=Math.imul(lt,Mt),x=(x=Math.imul(lt,Qt))+Math.imul(At,Mt)|0,w=Math.imul(At,Qt),_=_+Math.imul(We,lr)|0,x=(x=x+Math.imul(We,pr)|0)+Math.imul(et,lr)|0,w=w+Math.imul(et,pr)|0,_=_+Math.imul(we,Ft)|0,x=(x=x+Math.imul(we,zr)|0)+Math.imul(De,Ft)|0,w=w+Math.imul(De,zr)|0,_=_+Math.imul(ke,mr)|0,x=(x=x+Math.imul(ke,Ue)|0)+Math.imul(Ne,mr)|0,w=w+Math.imul(Ne,Ue)|0,_=_+Math.imul(ae,Xe)|0,x=(x=x+Math.imul(ae,Le)|0)+Math.imul(Se,Xe)|0,w=w+Math.imul(Se,Le)|0,_=_+Math.imul(be,Ke)|0,x=(x=x+Math.imul(be,pe)|0)+Math.imul(ie,Ke)|0,w=w+Math.imul(ie,pe)|0;var It=(A+(_=_+Math.imul(te,Ze)|0)|0)+((8191&(x=(x=x+Math.imul(te,ut)|0)+Math.imul(oe,Ze)|0))<<13)|0;A=((w=w+Math.imul(oe,ut)|0)+(x>>>13)|0)+(It>>>26)|0,It&=67108863,_=Math.imul(lt,lr),x=(x=Math.imul(lt,pr))+Math.imul(At,lr)|0,w=Math.imul(At,pr),_=_+Math.imul(We,Ft)|0,x=(x=x+Math.imul(We,zr)|0)+Math.imul(et,Ft)|0,w=w+Math.imul(et,zr)|0,_=_+Math.imul(we,mr)|0,x=(x=x+Math.imul(we,Ue)|0)+Math.imul(De,mr)|0,w=w+Math.imul(De,Ue)|0,_=_+Math.imul(ke,Xe)|0,x=(x=x+Math.imul(ke,Le)|0)+Math.imul(Ne,Xe)|0,w=w+Math.imul(Ne,Le)|0,_=_+Math.imul(ae,Ke)|0,x=(x=x+Math.imul(ae,pe)|0)+Math.imul(Se,Ke)|0,w=w+Math.imul(Se,pe)|0;var kt=(A+(_=_+Math.imul(be,Ze)|0)|0)+((8191&(x=(x=x+Math.imul(be,ut)|0)+Math.imul(ie,Ze)|0))<<13)|0;A=((w=w+Math.imul(ie,ut)|0)+(x>>>13)|0)+(kt>>>26)|0,kt&=67108863,_=Math.imul(lt,Ft),x=(x=Math.imul(lt,zr))+Math.imul(At,Ft)|0,w=Math.imul(At,zr),_=_+Math.imul(We,mr)|0,x=(x=x+Math.imul(We,Ue)|0)+Math.imul(et,mr)|0,w=w+Math.imul(et,Ue)|0,_=_+Math.imul(we,Xe)|0,x=(x=x+Math.imul(we,Le)|0)+Math.imul(De,Xe)|0,w=w+Math.imul(De,Le)|0,_=_+Math.imul(ke,Ke)|0,x=(x=x+Math.imul(ke,pe)|0)+Math.imul(Ne,Ke)|0,w=w+Math.imul(Ne,pe)|0;var ir=(A+(_=_+Math.imul(ae,Ze)|0)|0)+((8191&(x=(x=x+Math.imul(ae,ut)|0)+Math.imul(Se,Ze)|0))<<13)|0;A=((w=w+Math.imul(Se,ut)|0)+(x>>>13)|0)+(ir>>>26)|0,ir&=67108863,_=Math.imul(lt,mr),x=(x=Math.imul(lt,Ue))+Math.imul(At,mr)|0,w=Math.imul(At,Ue),_=_+Math.imul(We,Xe)|0,x=(x=x+Math.imul(We,Le)|0)+Math.imul(et,Xe)|0,w=w+Math.imul(et,Le)|0,_=_+Math.imul(we,Ke)|0,x=(x=x+Math.imul(we,pe)|0)+Math.imul(De,Ke)|0,w=w+Math.imul(De,pe)|0;var Zt=(A+(_=_+Math.imul(ke,Ze)|0)|0)+((8191&(x=(x=x+Math.imul(ke,ut)|0)+Math.imul(Ne,Ze)|0))<<13)|0;A=((w=w+Math.imul(Ne,ut)|0)+(x>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,_=Math.imul(lt,Xe),x=(x=Math.imul(lt,Le))+Math.imul(At,Xe)|0,w=Math.imul(At,Le),_=_+Math.imul(We,Ke)|0,x=(x=x+Math.imul(We,pe)|0)+Math.imul(et,Ke)|0,w=w+Math.imul(et,pe)|0;var qt=(A+(_=_+Math.imul(we,Ze)|0)|0)+((8191&(x=(x=x+Math.imul(we,ut)|0)+Math.imul(De,Ze)|0))<<13)|0;A=((w=w+Math.imul(De,ut)|0)+(x>>>13)|0)+(qt>>>26)|0,qt&=67108863,_=Math.imul(lt,Ke),x=(x=Math.imul(lt,pe))+Math.imul(At,Ke)|0,w=Math.imul(At,pe);var Ut=(A+(_=_+Math.imul(We,Ze)|0)|0)+((8191&(x=(x=x+Math.imul(We,ut)|0)+Math.imul(et,Ze)|0))<<13)|0;A=((w=w+Math.imul(et,ut)|0)+(x>>>13)|0)+(Ut>>>26)|0,Ut&=67108863;var sr=(A+(_=Math.imul(lt,Ze))|0)+((8191&(x=(x=Math.imul(lt,ut))+Math.imul(At,Ze)|0))<<13)|0;return A=((w=Math.imul(At,ut))+(x>>>13)|0)+(sr>>>26)|0,sr&=67108863,z[0]=he,z[1]=Ce,z[2]=Ve,z[3]=Be,z[4]=st,z[5]=Ge,z[6]=pt,z[7]=de,z[8]=Me,z[9]=Oe,z[10]=it,z[11]=vt,z[12]=It,z[13]=kt,z[14]=ir,z[15]=Zt,z[16]=qt,z[17]=Ut,z[18]=sr,A!==0&&(z[19]=A,C.length++),C};function v(k,R,C){return new E().mulp(k,R,C)}function E(k,R){this.x=k,this.y=R}Math.imul||(b=y),a.prototype.mulTo=function(k,R){var C=this.length+k.length;return this.length===10&&k.length===10?b(this,k,R):C<63?y(this,k,R):C<1024?function(_,x,w){w.negative=x.negative^_.negative,w.length=_.length+x.length;for(var S=0,I=0,z=0;z<w.length-1;z++){var A=I;I=0;for(var H=67108863&S,K=Math.min(z,x.length-1),J=Math.max(0,z-_.length+1);J<=K;J++){var V=z-J,X=(0|_.words[V])*(0|x.words[J]),D=67108863&X;H=67108863&(D=D+H|0),I+=(A=(A=A+(X/67108864|0)|0)+(D>>>26)|0)>>>26,A&=67108863}w.words[z]=H,S=A,A=I}return S!==0?w.words[z]=S:w.length--,w.strip()}(this,k,R):v(this,k,R)},E.prototype.makeRBT=function(k){for(var R=new Array(k),C=a.prototype._countBits(k)-1,_=0;_<k;_++)R[_]=this.revBin(_,C,k);return R},E.prototype.revBin=function(k,R,C){if(k===0||k===C-1)return k;for(var _=0,x=0;x<R;x++)_|=(1&k)<<R-x-1,k>>=1;return _},E.prototype.permute=function(k,R,C,_,x,w){for(var S=0;S<w;S++)_[S]=R[k[S]],x[S]=C[k[S]]},E.prototype.transform=function(k,R,C,_,x,w){this.permute(w,k,R,C,_,x);for(var S=1;S<x;S<<=1)for(var I=S<<1,z=Math.cos(2*Math.PI/I),A=Math.sin(2*Math.PI/I),H=0;H<x;H+=I)for(var K=z,J=A,V=0;V<S;V++){var X=C[H+V],D=_[H+V],O=C[H+V+S],G=_[H+V+S],Z=K*O-J*G;G=K*G+J*O,O=Z,C[H+V]=X+O,_[H+V]=D+G,C[H+V+S]=X-O,_[H+V+S]=D-G,V!==I&&(Z=z*K-A*J,J=z*J+A*K,K=Z)}},E.prototype.guessLen13b=function(k,R){var C=1|Math.max(R,k),_=1&C,x=0;for(C=C/2|0;C;C>>>=1)x++;return 1<<x+1+_},E.prototype.conjugate=function(k,R,C){if(!(C<=1))for(var _=0;_<C/2;_++){var x=k[_];k[_]=k[C-_-1],k[C-_-1]=x,x=R[_],R[_]=-R[C-_-1],R[C-_-1]=-x}},E.prototype.normalize13b=function(k,R){for(var C=0,_=0;_<R/2;_++){var x=8192*Math.round(k[2*_+1]/R)+Math.round(k[2*_]/R)+C;k[_]=67108863&x,C=x<67108864?0:x/67108864|0}return k},E.prototype.convert13b=function(k,R,C,_){for(var x=0,w=0;w<R;w++)x+=0|k[w],C[2*w]=8191&x,x>>>=13,C[2*w+1]=8191&x,x>>>=13;for(w=2*R;w<_;++w)C[w]=0;l(x===0),l((-8192&x)==0)},E.prototype.stub=function(k){for(var R=new Array(k),C=0;C<k;C++)R[C]=0;return R},E.prototype.mulp=function(k,R,C){var _=2*this.guessLen13b(k.length,R.length),x=this.makeRBT(_),w=this.stub(_),S=new Array(_),I=new Array(_),z=new Array(_),A=new Array(_),H=new Array(_),K=new Array(_),J=C.words;J.length=_,this.convert13b(k.words,k.length,S,_),this.convert13b(R.words,R.length,A,_),this.transform(S,w,I,z,_,x),this.transform(A,w,H,K,_,x);for(var V=0;V<_;V++){var X=I[V]*H[V]-z[V]*K[V];z[V]=I[V]*K[V]+z[V]*H[V],I[V]=X}return this.conjugate(I,z,_),this.transform(I,z,J,w,_,x),this.conjugate(J,w,_),this.normalize13b(J,_),C.negative=k.negative^R.negative,C.length=k.length+R.length,C.strip()},a.prototype.mul=function(k){var R=new a(null);return R.words=new Array(this.length+k.length),this.mulTo(k,R)},a.prototype.mulf=function(k){var R=new a(null);return R.words=new Array(this.length+k.length),v(this,k,R)},a.prototype.imul=function(k){return this.clone().mulTo(k,this)},a.prototype.imuln=function(k){l(typeof k=="number"),l(k<67108864);for(var R=0,C=0;C<this.length;C++){var _=(0|this.words[C])*k,x=(67108863&_)+(67108863&R);R>>=26,R+=_/67108864|0,R+=x>>>26,this.words[C]=67108863&x}return R!==0&&(this.words[C]=R,this.length++),this},a.prototype.muln=function(k){return this.clone().imuln(k)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(k){var R=function(w){for(var S=new Array(w.bitLength()),I=0;I<S.length;I++){var z=I/26|0,A=I%26;S[I]=(w.words[z]&1<<A)>>>A}return S}(k);if(R.length===0)return new a(1);for(var C=this,_=0;_<R.length&&R[_]===0;_++,C=C.sqr());if(++_<R.length)for(var x=C.sqr();_<R.length;_++,x=x.sqr())R[_]!==0&&(C=C.mul(x));return C},a.prototype.iushln=function(k){l(typeof k=="number"&&k>=0);var R,C=k%26,_=(k-C)/26,x=67108863>>>26-C<<26-C;if(C!==0){var w=0;for(R=0;R<this.length;R++){var S=this.words[R]&x,I=(0|this.words[R])-S<<C;this.words[R]=I|w,w=S>>>26-C}w&&(this.words[R]=w,this.length++)}if(_!==0){for(R=this.length-1;R>=0;R--)this.words[R+_]=this.words[R];for(R=0;R<_;R++)this.words[R]=0;this.length+=_}return this.strip()},a.prototype.ishln=function(k){return l(this.negative===0),this.iushln(k)},a.prototype.iushrn=function(k,R,C){var _;l(typeof k=="number"&&k>=0),_=R?(R-R%26)/26:0;var x=k%26,w=Math.min((k-x)/26,this.length),S=67108863^67108863>>>x<<x,I=C;if(_-=w,_=Math.max(0,_),I){for(var z=0;z<w;z++)I.words[z]=this.words[z];I.length=w}if(w!==0)if(this.length>w)for(this.length-=w,z=0;z<this.length;z++)this.words[z]=this.words[z+w];else this.words[0]=0,this.length=1;var A=0;for(z=this.length-1;z>=0&&(A!==0||z>=_);z--){var H=0|this.words[z];this.words[z]=A<<26-x|H>>>x,A=H&S}return I&&A!==0&&(I.words[I.length++]=A),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(k,R,C){return l(this.negative===0),this.iushrn(k,R,C)},a.prototype.shln=function(k){return this.clone().ishln(k)},a.prototype.ushln=function(k){return this.clone().iushln(k)},a.prototype.shrn=function(k){return this.clone().ishrn(k)},a.prototype.ushrn=function(k){return this.clone().iushrn(k)},a.prototype.testn=function(k){l(typeof k=="number"&&k>=0);var R=k%26,C=(k-R)/26,_=1<<R;return!(this.length<=C)&&!!(this.words[C]&_)},a.prototype.imaskn=function(k){l(typeof k=="number"&&k>=0);var R=k%26,C=(k-R)/26;if(l(this.negative===0,"imaskn works only with positive numbers"),this.length<=C)return this;if(R!==0&&C++,this.length=Math.min(C,this.length),R!==0){var _=67108863^67108863>>>R<<R;this.words[this.length-1]&=_}return this.strip()},a.prototype.maskn=function(k){return this.clone().imaskn(k)},a.prototype.iaddn=function(k){return l(typeof k=="number"),l(k<67108864),k<0?this.isubn(-k):this.negative!==0?this.length===1&&(0|this.words[0])<k?(this.words[0]=k-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(k),this.negative=1,this):this._iaddn(k)},a.prototype._iaddn=function(k){this.words[0]+=k;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},a.prototype.isubn=function(k){if(l(typeof k=="number"),l(k<67108864),k<0)return this.iaddn(-k);if(this.negative!==0)return this.negative=0,this.iaddn(k),this.negative=1,this;if(this.words[0]-=k,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this.strip()},a.prototype.addn=function(k){return this.clone().iaddn(k)},a.prototype.subn=function(k){return this.clone().isubn(k)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(k,R,C){var _,x,w=k.length+C;this._expand(w);var S=0;for(_=0;_<k.length;_++){x=(0|this.words[_+C])+S;var I=(0|k.words[_])*R;S=((x-=67108863&I)>>26)-(I/67108864|0),this.words[_+C]=67108863&x}for(;_<this.length-C;_++)S=(x=(0|this.words[_+C])+S)>>26,this.words[_+C]=67108863&x;if(S===0)return this.strip();for(l(S===-1),S=0,_=0;_<this.length;_++)S=(x=-(0|this.words[_])+S)>>26,this.words[_]=67108863&x;return this.negative=1,this.strip()},a.prototype._wordDiv=function(k,R){var C=(this.length,k.length),_=this.clone(),x=k,w=0|x.words[x.length-1];(C=26-this._countBits(w))!==0&&(x=x.ushln(C),_.iushln(C),w=0|x.words[x.length-1]);var S,I=_.length-x.length;if(R!=="mod"){(S=new a(null)).length=I+1,S.words=new Array(S.length);for(var z=0;z<S.length;z++)S.words[z]=0}var A=_.clone()._ishlnsubmul(x,1,I);A.negative===0&&(_=A,S&&(S.words[I]=1));for(var H=I-1;H>=0;H--){var K=67108864*(0|_.words[x.length+H])+(0|_.words[x.length+H-1]);for(K=Math.min(K/w|0,67108863),_._ishlnsubmul(x,K,H);_.negative!==0;)K--,_.negative=0,_._ishlnsubmul(x,1,H),_.isZero()||(_.negative^=1);S&&(S.words[H]=K)}return S&&S.strip(),_.strip(),R!=="div"&&C!==0&&_.iushrn(C),{div:S||null,mod:_}},a.prototype.divmod=function(k,R,C){return l(!k.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:this.negative!==0&&k.negative===0?(w=this.neg().divmod(k,R),R!=="mod"&&(_=w.div.neg()),R!=="div"&&(x=w.mod.neg(),C&&x.negative!==0&&x.iadd(k)),{div:_,mod:x}):this.negative===0&&k.negative!==0?(w=this.divmod(k.neg(),R),R!=="mod"&&(_=w.div.neg()),{div:_,mod:w.mod}):this.negative&k.negative?(w=this.neg().divmod(k.neg(),R),R!=="div"&&(x=w.mod.neg(),C&&x.negative!==0&&x.isub(k)),{div:w.div,mod:x}):k.length>this.length||this.cmp(k)<0?{div:new a(0),mod:this}:k.length===1?R==="div"?{div:this.divn(k.words[0]),mod:null}:R==="mod"?{div:null,mod:new a(this.modn(k.words[0]))}:{div:this.divn(k.words[0]),mod:new a(this.modn(k.words[0]))}:this._wordDiv(k,R);var _,x,w},a.prototype.div=function(k){return this.divmod(k,"div",!1).div},a.prototype.mod=function(k){return this.divmod(k,"mod",!1).mod},a.prototype.umod=function(k){return this.divmod(k,"mod",!0).mod},a.prototype.divRound=function(k){var R=this.divmod(k);if(R.mod.isZero())return R.div;var C=R.div.negative!==0?R.mod.isub(k):R.mod,_=k.ushrn(1),x=k.andln(1),w=C.cmp(_);return w<0||x===1&&w===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},a.prototype.modn=function(k){l(k<=67108863);for(var R=(1<<26)%k,C=0,_=this.length-1;_>=0;_--)C=(R*C+(0|this.words[_]))%k;return C},a.prototype.idivn=function(k){l(k<=67108863);for(var R=0,C=this.length-1;C>=0;C--){var _=(0|this.words[C])+67108864*R;this.words[C]=_/k|0,R=_%k}return this.strip()},a.prototype.divn=function(k){return this.clone().idivn(k)},a.prototype.egcd=function(k){l(k.negative===0),l(!k.isZero());var R=this,C=k.clone();R=R.negative!==0?R.umod(k):R.clone();for(var _=new a(1),x=new a(0),w=new a(0),S=new a(1),I=0;R.isEven()&&C.isEven();)R.iushrn(1),C.iushrn(1),++I;for(var z=C.clone(),A=R.clone();!R.isZero();){for(var H=0,K=1;!(R.words[0]&K)&&H<26;++H,K<<=1);if(H>0)for(R.iushrn(H);H-- >0;)(_.isOdd()||x.isOdd())&&(_.iadd(z),x.isub(A)),_.iushrn(1),x.iushrn(1);for(var J=0,V=1;!(C.words[0]&V)&&J<26;++J,V<<=1);if(J>0)for(C.iushrn(J);J-- >0;)(w.isOdd()||S.isOdd())&&(w.iadd(z),S.isub(A)),w.iushrn(1),S.iushrn(1);R.cmp(C)>=0?(R.isub(C),_.isub(w),x.isub(S)):(C.isub(R),w.isub(_),S.isub(x))}return{a:w,b:S,gcd:C.iushln(I)}},a.prototype._invmp=function(k){l(k.negative===0),l(!k.isZero());var R=this,C=k.clone();R=R.negative!==0?R.umod(k):R.clone();for(var _,x=new a(1),w=new a(0),S=C.clone();R.cmpn(1)>0&&C.cmpn(1)>0;){for(var I=0,z=1;!(R.words[0]&z)&&I<26;++I,z<<=1);if(I>0)for(R.iushrn(I);I-- >0;)x.isOdd()&&x.iadd(S),x.iushrn(1);for(var A=0,H=1;!(C.words[0]&H)&&A<26;++A,H<<=1);if(A>0)for(C.iushrn(A);A-- >0;)w.isOdd()&&w.iadd(S),w.iushrn(1);R.cmp(C)>=0?(R.isub(C),x.isub(w)):(C.isub(R),w.isub(x))}return(_=R.cmpn(1)===0?x:w).cmpn(0)<0&&_.iadd(k),_},a.prototype.gcd=function(k){if(this.isZero())return k.abs();if(k.isZero())return this.abs();var R=this.clone(),C=k.clone();R.negative=0,C.negative=0;for(var _=0;R.isEven()&&C.isEven();_++)R.iushrn(1),C.iushrn(1);for(;;){for(;R.isEven();)R.iushrn(1);for(;C.isEven();)C.iushrn(1);var x=R.cmp(C);if(x<0){var w=R;R=C,C=w}else if(x===0||C.cmpn(1)===0)break;R.isub(C)}return C.iushln(_)},a.prototype.invm=function(k){return this.egcd(k).a.umod(k)},a.prototype.isEven=function(){return(1&this.words[0])==0},a.prototype.isOdd=function(){return(1&this.words[0])==1},a.prototype.andln=function(k){return this.words[0]&k},a.prototype.bincn=function(k){l(typeof k=="number");var R=k%26,C=(k-R)/26,_=1<<R;if(this.length<=C)return this._expand(C+1),this.words[C]|=_,this;for(var x=_,w=C;x!==0&&w<this.length;w++){var S=0|this.words[w];x=(S+=x)>>>26,S&=67108863,this.words[w]=S}return x!==0&&(this.words[w]=x,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(k){var R,C=k<0;if(this.negative!==0&&!C)return-1;if(this.negative===0&&C)return 1;if(this.strip(),this.length>1)R=1;else{C&&(k=-k),l(k<=67108863,"Number is too big");var _=0|this.words[0];R=_===k?0:_<k?-1:1}return this.negative!==0?0|-R:R},a.prototype.cmp=function(k){if(this.negative!==0&&k.negative===0)return-1;if(this.negative===0&&k.negative!==0)return 1;var R=this.ucmp(k);return this.negative!==0?0|-R:R},a.prototype.ucmp=function(k){if(this.length>k.length)return 1;if(this.length<k.length)return-1;for(var R=0,C=this.length-1;C>=0;C--){var _=0|this.words[C],x=0|k.words[C];if(_!==x){_<x?R=-1:_>x&&(R=1);break}}return R},a.prototype.gtn=function(k){return this.cmpn(k)===1},a.prototype.gt=function(k){return this.cmp(k)===1},a.prototype.gten=function(k){return this.cmpn(k)>=0},a.prototype.gte=function(k){return this.cmp(k)>=0},a.prototype.ltn=function(k){return this.cmpn(k)===-1},a.prototype.lt=function(k){return this.cmp(k)===-1},a.prototype.lten=function(k){return this.cmpn(k)<=0},a.prototype.lte=function(k){return this.cmp(k)<=0},a.prototype.eqn=function(k){return this.cmpn(k)===0},a.prototype.eq=function(k){return this.cmp(k)===0},a.red=function(k){return new P(k)},a.prototype.toRed=function(k){return l(!this.red,"Already a number in reduction context"),l(this.negative===0,"red works only with positives"),k.convertTo(this)._forceRed(k)},a.prototype.fromRed=function(){return l(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(k){return this.red=k,this},a.prototype.forceRed=function(k){return l(!this.red,"Already a number in reduction context"),this._forceRed(k)},a.prototype.redAdd=function(k){return l(this.red,"redAdd works only with red numbers"),this.red.add(this,k)},a.prototype.redIAdd=function(k){return l(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,k)},a.prototype.redSub=function(k){return l(this.red,"redSub works only with red numbers"),this.red.sub(this,k)},a.prototype.redISub=function(k){return l(this.red,"redISub works only with red numbers"),this.red.isub(this,k)},a.prototype.redShl=function(k){return l(this.red,"redShl works only with red numbers"),this.red.shl(this,k)},a.prototype.redMul=function(k){return l(this.red,"redMul works only with red numbers"),this.red._verify2(this,k),this.red.mul(this,k)},a.prototype.redIMul=function(k){return l(this.red,"redMul works only with red numbers"),this.red._verify2(this,k),this.red.imul(this,k)},a.prototype.redSqr=function(){return l(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return l(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return l(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return l(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return l(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(k){return l(this.red&&!k.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,k)};var M={k256:null,p224:null,p192:null,p25519:null};function W(k,R){this.name=k,this.p=new a(R,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function $(){W.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function N(){W.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function j(){W.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function F(){W.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function P(k){if(typeof k=="string"){var R=a._prime(k);this.m=R.p,this.prime=R}else l(k.gtn(1),"modulus must be greater than 1"),this.m=k,this.prime=null}function L(k){P.call(this,k),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}W.prototype._tmp=function(){var k=new a(null);return k.words=new Array(Math.ceil(this.n/13)),k},W.prototype.ireduce=function(k){var R,C=k;do this.split(C,this.tmp),R=(C=(C=this.imulK(C)).iadd(this.tmp)).bitLength();while(R>this.n);var _=R<this.n?-1:C.ucmp(this.p);return _===0?(C.words[0]=0,C.length=1):_>0?C.isub(this.p):C.strip!==void 0?C.strip():C._strip(),C},W.prototype.split=function(k,R){k.iushrn(this.n,0,R)},W.prototype.imulK=function(k){return k.imul(this.k)},c($,W),$.prototype.split=function(k,R){for(var C=Math.min(k.length,9),_=0;_<C;_++)R.words[_]=k.words[_];if(R.length=C,k.length<=9)return k.words[0]=0,void(k.length=1);var x=k.words[9];for(R.words[R.length++]=4194303&x,_=10;_<k.length;_++){var w=0|k.words[_];k.words[_-10]=(4194303&w)<<4|x>>>22,x=w}x>>>=22,k.words[_-10]=x,x===0&&k.length>10?k.length-=10:k.length-=9},$.prototype.imulK=function(k){k.words[k.length]=0,k.words[k.length+1]=0,k.length+=2;for(var R=0,C=0;C<k.length;C++){var _=0|k.words[C];R+=977*_,k.words[C]=67108863&R,R=64*_+(R/67108864|0)}return k.words[k.length-1]===0&&(k.length--,k.words[k.length-1]===0&&k.length--),k},c(N,W),c(j,W),c(F,W),F.prototype.imulK=function(k){for(var R=0,C=0;C<k.length;C++){var _=19*(0|k.words[C])+R,x=67108863&_;_>>>=26,k.words[C]=x,R=_}return R!==0&&(k.words[k.length++]=R),k},a._prime=function(k){if(M[k])return M[k];var R;if(k==="k256")R=new $;else if(k==="p224")R=new N;else if(k==="p192")R=new j;else{if(k!=="p25519")throw new Error("Unknown prime "+k);R=new F}return M[k]=R,R},P.prototype._verify1=function(k){l(k.negative===0,"red works only with positives"),l(k.red,"red works only with red numbers")},P.prototype._verify2=function(k,R){l((k.negative|R.negative)==0,"red works only with positives"),l(k.red&&k.red===R.red,"red works only with red numbers")},P.prototype.imod=function(k){return this.prime?this.prime.ireduce(k)._forceRed(this):k.umod(this.m)._forceRed(this)},P.prototype.neg=function(k){return k.isZero()?k.clone():this.m.sub(k)._forceRed(this)},P.prototype.add=function(k,R){this._verify2(k,R);var C=k.add(R);return C.cmp(this.m)>=0&&C.isub(this.m),C._forceRed(this)},P.prototype.iadd=function(k,R){this._verify2(k,R);var C=k.iadd(R);return C.cmp(this.m)>=0&&C.isub(this.m),C},P.prototype.sub=function(k,R){this._verify2(k,R);var C=k.sub(R);return C.cmpn(0)<0&&C.iadd(this.m),C._forceRed(this)},P.prototype.isub=function(k,R){this._verify2(k,R);var C=k.isub(R);return C.cmpn(0)<0&&C.iadd(this.m),C},P.prototype.shl=function(k,R){return this._verify1(k),this.imod(k.ushln(R))},P.prototype.imul=function(k,R){return this._verify2(k,R),this.imod(k.imul(R))},P.prototype.mul=function(k,R){return this._verify2(k,R),this.imod(k.mul(R))},P.prototype.isqr=function(k){return this.imul(k,k.clone())},P.prototype.sqr=function(k){return this.mul(k,k)},P.prototype.sqrt=function(k){if(k.isZero())return k.clone();var R=this.m.andln(3);if(l(R%2==1),R===3){var C=this.m.add(new a(1)).iushrn(2);return this.pow(k,C)}for(var _=this.m.subn(1),x=0;!_.isZero()&&_.andln(1)===0;)x++,_.iushrn(1);l(!_.isZero());var w=new a(1).toRed(this),S=w.redNeg(),I=this.m.subn(1).iushrn(1),z=this.m.bitLength();for(z=new a(2*z*z).toRed(this);this.pow(z,I).cmp(S)!==0;)z.redIAdd(S);for(var A=this.pow(z,_),H=this.pow(k,_.addn(1).iushrn(1)),K=this.pow(k,_),J=x;K.cmp(w)!==0;){for(var V=K,X=0;V.cmp(w)!==0;X++)V=V.redSqr();l(X<J);var D=this.pow(A,new a(1).iushln(J-X-1));H=H.redMul(D),A=D.redSqr(),K=K.redMul(A),J=X}return H},P.prototype.invm=function(k){var R=k._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},P.prototype.pow=function(k,R){if(R.isZero())return new a(1).toRed(this);if(R.cmpn(1)===0)return k.clone();var C=new Array(16);C[0]=new a(1).toRed(this),C[1]=k;for(var _=2;_<C.length;_++)C[_]=this.mul(C[_-1],k);var x=C[0],w=0,S=0,I=R.bitLength()%26;for(I===0&&(I=26),_=R.length-1;_>=0;_--){for(var z=R.words[_],A=I-1;A>=0;A--){var H=z>>A&1;x!==C[0]&&(x=this.sqr(x)),H!==0||w!==0?(w<<=1,w|=H,(++S===4||_===0&&A===0)&&(x=this.mul(x,C[w]),S=0,w=0)):S=0}I=26}return x},P.prototype.convertTo=function(k){var R=k.umod(this.m);return R===k?R.clone():R},P.prototype.convertFrom=function(k){var R=k.clone();return R.red=null,R},a.mont=function(k){return new L(k)},c(L,P),L.prototype.convertTo=function(k){return this.imod(k.ushln(this.shift))},L.prototype.convertFrom=function(k){var R=this.imod(k.mul(this.rinv));return R.red=null,R},L.prototype.imul=function(k,R){if(k.isZero()||R.isZero())return k.words[0]=0,k.length=1,k;var C=k.imul(R),_=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=C.isub(_).iushrn(this.shift),w=x;return x.cmp(this.m)>=0?w=x.isub(this.m):x.cmpn(0)<0&&(w=x.iadd(this.m)),w._forceRed(this)},L.prototype.mul=function(k,R){if(k.isZero()||R.isZero())return new a(0)._forceRed(this);var C=k.mul(R),_=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=C.isub(_).iushrn(this.shift),w=x;return x.cmp(this.m)>=0?w=x.isub(this.m):x.cmpn(0)<0&&(w=x.iadd(this.m)),w._forceRed(this)},L.prototype.invm=function(k){return this.imod(k._invmp(this.m).mul(this.r2))._forceRed(this)}})(n===void 0||n)},{buffer:188}],185:[function(t,n,i){i.byteLength=function(h){var m=d(h),g=m[0],p=m[1];return 3*(g+p)/4-p},i.toByteArray=function(h){var m,g,p=d(h),y=p[0],b=p[1],v=new l(function(W,$,N){return 3*($+N)/4-N}(0,y,b)),E=0,M=b>0?y-4:y;for(g=0;g<M;g+=4)m=o[h.charCodeAt(g)]<<18|o[h.charCodeAt(g+1)]<<12|o[h.charCodeAt(g+2)]<<6|o[h.charCodeAt(g+3)],v[E++]=m>>16&255,v[E++]=m>>8&255,v[E++]=255&m;return b===2&&(m=o[h.charCodeAt(g)]<<2|o[h.charCodeAt(g+1)]>>4,v[E++]=255&m),b===1&&(m=o[h.charCodeAt(g)]<<10|o[h.charCodeAt(g+1)]<<4|o[h.charCodeAt(g+2)]>>2,v[E++]=m>>8&255,v[E++]=255&m),v},i.fromByteArray=function(h){for(var m,g=h.length,p=g%3,y=[],b=0,v=g-p;b<v;b+=16383)y.push(f(h,b,b+16383>v?v:b+16383));return p===1?(m=h[g-1],y.push(s[m>>2]+s[m<<4&63]+"==")):p===2&&(m=(h[g-2]<<8)+h[g-1],y.push(s[m>>10]+s[m>>4&63]+s[m<<2&63]+"=")),y.join("")};for(var s=[],o=[],l=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=c.length;a<u;++a)s[a]=c[a],o[c.charCodeAt(a)]=a;function d(h){var m=h.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=h.indexOf("=");return g===-1&&(g=m),[g,g===m?0:4-g%4]}function f(h,m,g){for(var p,y,b=[],v=m;v<g;v+=3)p=(h[v]<<16&16711680)+(h[v+1]<<8&65280)+(255&h[v+2]),b.push(s[(y=p)>>18&63]+s[y>>12&63]+s[y>>6&63]+s[63&y]);return b.join("")}o[45]=62,o[95]=63},{}],186:[function(t,n,i){(function(s,o){function l(C,_){if(!C)throw new Error(_||"Assertion failed")}function c(C,_){C.super_=_;var x=function(){};x.prototype=_.prototype,C.prototype=new x,C.prototype.constructor=C}function a(C,_,x){if(a.isBN(C))return C;this.negative=0,this.words=null,this.length=0,this.red=null,C!==null&&(_!=="le"&&_!=="be"||(x=_,_=10),this._init(C||0,_||10,x||"be"))}var u;typeof s=="object"?s.exports=a:(void 0).BN=a,a.BN=a,a.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t("buffer").Buffer}catch{}function d(C,_){var x=C.charCodeAt(_);return x>=48&&x<=57?x-48:x>=65&&x<=70?x-55:x>=97&&x<=102?x-87:void l(!1,"Invalid character in "+C)}function f(C,_,x){var w=d(C,x);return x-1>=_&&(w|=d(C,x-1)<<4),w}function h(C,_,x,w){for(var S=0,I=0,z=Math.min(C.length,x),A=_;A<z;A++){var H=C.charCodeAt(A)-48;S*=w,I=H>=49?H-49+10:H>=17?H-17+10:H,l(H>=0&&I<w,"Invalid character"),S+=I}return S}function m(C,_){C.words=_.words,C.length=_.length,C.negative=_.negative,C.red=_.red}if(a.isBN=function(C){return C instanceof a||C!==null&&typeof C=="object"&&C.constructor.wordSize===a.wordSize&&Array.isArray(C.words)},a.max=function(C,_){return C.cmp(_)>0?C:_},a.min=function(C,_){return C.cmp(_)<0?C:_},a.prototype._init=function(C,_,x){if(typeof C=="number")return this._initNumber(C,_,x);if(typeof C=="object")return this._initArray(C,_,x);_==="hex"&&(_=16),l(_===(0|_)&&_>=2&&_<=36);var w=0;(C=C.toString().replace(/\s+/g,""))[0]==="-"&&(w++,this.negative=1),w<C.length&&(_===16?this._parseHex(C,w,x):(this._parseBase(C,_,w),x==="le"&&this._initArray(this.toArray(),_,x)))},a.prototype._initNumber=function(C,_,x){C<0&&(this.negative=1,C=-C),C<67108864?(this.words=[67108863&C],this.length=1):C<4503599627370496?(this.words=[67108863&C,C/67108864&67108863],this.length=2):(l(C<9007199254740992),this.words=[67108863&C,C/67108864&67108863,1],this.length=3),x==="le"&&this._initArray(this.toArray(),_,x)},a.prototype._initArray=function(C,_,x){if(l(typeof C.length=="number"),C.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(C.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var S,I,z=0;if(x==="be")for(w=C.length-1,S=0;w>=0;w-=3)I=C[w]|C[w-1]<<8|C[w-2]<<16,this.words[S]|=I<<z&67108863,this.words[S+1]=I>>>26-z&67108863,(z+=24)>=26&&(z-=26,S++);else if(x==="le")for(w=0,S=0;w<C.length;w+=3)I=C[w]|C[w+1]<<8|C[w+2]<<16,this.words[S]|=I<<z&67108863,this.words[S+1]=I>>>26-z&67108863,(z+=24)>=26&&(z-=26,S++);return this._strip()},a.prototype._parseHex=function(C,_,x){this.length=Math.ceil((C.length-_)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var S,I=0,z=0;if(x==="be")for(w=C.length-1;w>=_;w-=2)S=f(C,_,w)<<I,this.words[z]|=67108863&S,I>=18?(I-=18,z+=1,this.words[z]|=S>>>26):I+=8;else for(w=(C.length-_)%2==0?_+1:_;w<C.length;w+=2)S=f(C,_,w)<<I,this.words[z]|=67108863&S,I>=18?(I-=18,z+=1,this.words[z]|=S>>>26):I+=8;this._strip()},a.prototype._parseBase=function(C,_,x){this.words=[0],this.length=1;for(var w=0,S=1;S<=67108863;S*=_)w++;w--,S=S/_|0;for(var I=C.length-x,z=I%w,A=Math.min(I,I-z)+x,H=0,K=x;K<A;K+=w)H=h(C,K,K+w,_),this.imuln(S),this.words[0]+H<67108864?this.words[0]+=H:this._iaddn(H);if(z!==0){var J=1;for(H=h(C,K,C.length,_),K=0;K<z;K++)J*=_;this.imuln(J),this.words[0]+H<67108864?this.words[0]+=H:this._iaddn(H)}this._strip()},a.prototype.copy=function(C){C.words=new Array(this.length);for(var _=0;_<this.length;_++)C.words[_]=this.words[_];C.length=this.length,C.negative=this.negative,C.red=this.red},a.prototype._move=function(C){m(C,this)},a.prototype.clone=function(){var C=new a(null);return this.copy(C),C},a.prototype._expand=function(C){for(;this.length<C;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=g}catch{a.prototype.inspect=g}else a.prototype.inspect=g;function g(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(C,_){var x;if(_=0|_||1,(C=C||10)===16||C==="hex"){x="";for(var w=0,S=0,I=0;I<this.length;I++){var z=this.words[I],A=(16777215&(z<<w|S)).toString(16);S=z>>>24-w&16777215,(w+=2)>=26&&(w-=26,I--),x=S!==0||I!==this.length-1?p[6-A.length]+A+x:A+x}for(S!==0&&(x=S.toString(16)+x);x.length%_!=0;)x="0"+x;return this.negative!==0&&(x="-"+x),x}if(C===(0|C)&&C>=2&&C<=36){var H=y[C],K=b[C];x="";var J=this.clone();for(J.negative=0;!J.isZero();){var V=J.modrn(K).toString(C);x=(J=J.idivn(K)).isZero()?V+x:p[H-V.length]+V+x}for(this.isZero()&&(x="0"+x);x.length%_!=0;)x="0"+x;return this.negative!==0&&(x="-"+x),x}l(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var C=this.words[0];return this.length===2?C+=67108864*this.words[1]:this.length===3&&this.words[2]===1?C+=4503599627370496+67108864*this.words[1]:this.length>2&&l(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-C:C},a.prototype.toJSON=function(){return this.toString(16,2)},u&&(a.prototype.toBuffer=function(C,_){return this.toArrayLike(u,C,_)}),a.prototype.toArray=function(C,_){return this.toArrayLike(Array,C,_)};function v(C,_,x){x.negative=_.negative^C.negative;var w=C.length+_.length|0;x.length=w,w=w-1|0;var S=0|C.words[0],I=0|_.words[0],z=S*I,A=67108863&z,H=z/67108864|0;x.words[0]=A;for(var K=1;K<w;K++){for(var J=H>>>26,V=67108863&H,X=Math.min(K,_.length-1),D=Math.max(0,K-C.length+1);D<=X;D++){var O=K-D|0;J+=(z=(S=0|C.words[O])*(I=0|_.words[D])+V)/67108864|0,V=67108863&z}x.words[K]=0|V,H=0|J}return H!==0?x.words[K]=0|H:x.length--,x._strip()}a.prototype.toArrayLike=function(C,_,x){this._strip();var w=this.byteLength(),S=x||Math.max(1,w);l(w<=S,"byte array longer than desired length"),l(S>0,"Requested array length <= 0");var I=function(z,A){return z.allocUnsafe?z.allocUnsafe(A):new z(A)}(C,S);return this["_toArrayLike"+(_==="le"?"LE":"BE")](I,w),I},a.prototype._toArrayLikeLE=function(C,_){for(var x=0,w=0,S=0,I=0;S<this.length;S++){var z=this.words[S]<<I|w;C[x++]=255&z,x<C.length&&(C[x++]=z>>8&255),x<C.length&&(C[x++]=z>>16&255),I===6?(x<C.length&&(C[x++]=z>>24&255),w=0,I=0):(w=z>>>24,I+=2)}if(x<C.length)for(C[x++]=w;x<C.length;)C[x++]=0},a.prototype._toArrayLikeBE=function(C,_){for(var x=C.length-1,w=0,S=0,I=0;S<this.length;S++){var z=this.words[S]<<I|w;C[x--]=255&z,x>=0&&(C[x--]=z>>8&255),x>=0&&(C[x--]=z>>16&255),I===6?(x>=0&&(C[x--]=z>>24&255),w=0,I=0):(w=z>>>24,I+=2)}if(x>=0)for(C[x--]=w;x>=0;)C[x--]=0},Math.clz32?a.prototype._countBits=function(C){return 32-Math.clz32(C)}:a.prototype._countBits=function(C){var _=C,x=0;return _>=4096&&(x+=13,_>>>=13),_>=64&&(x+=7,_>>>=7),_>=8&&(x+=4,_>>>=4),_>=2&&(x+=2,_>>>=2),x+_},a.prototype._zeroBits=function(C){if(C===0)return 26;var _=C,x=0;return!(8191&_)&&(x+=13,_>>>=13),!(127&_)&&(x+=7,_>>>=7),!(15&_)&&(x+=4,_>>>=4),!(3&_)&&(x+=2,_>>>=2),!(1&_)&&x++,x},a.prototype.bitLength=function(){var C=this.words[this.length-1],_=this._countBits(C);return 26*(this.length-1)+_},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var C=0,_=0;_<this.length;_++){var x=this._zeroBits(this.words[_]);if(C+=x,x!==26)break}return C},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(C){return this.negative!==0?this.abs().inotn(C).iaddn(1):this.clone()},a.prototype.fromTwos=function(C){return this.testn(C-1)?this.notn(C).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(C){for(;this.length<C.length;)this.words[this.length++]=0;for(var _=0;_<C.length;_++)this.words[_]=this.words[_]|C.words[_];return this._strip()},a.prototype.ior=function(C){return l((this.negative|C.negative)==0),this.iuor(C)},a.prototype.or=function(C){return this.length>C.length?this.clone().ior(C):C.clone().ior(this)},a.prototype.uor=function(C){return this.length>C.length?this.clone().iuor(C):C.clone().iuor(this)},a.prototype.iuand=function(C){var _;_=this.length>C.length?C:this;for(var x=0;x<_.length;x++)this.words[x]=this.words[x]&C.words[x];return this.length=_.length,this._strip()},a.prototype.iand=function(C){return l((this.negative|C.negative)==0),this.iuand(C)},a.prototype.and=function(C){return this.length>C.length?this.clone().iand(C):C.clone().iand(this)},a.prototype.uand=function(C){return this.length>C.length?this.clone().iuand(C):C.clone().iuand(this)},a.prototype.iuxor=function(C){var _,x;this.length>C.length?(_=this,x=C):(_=C,x=this);for(var w=0;w<x.length;w++)this.words[w]=_.words[w]^x.words[w];if(this!==_)for(;w<_.length;w++)this.words[w]=_.words[w];return this.length=_.length,this._strip()},a.prototype.ixor=function(C){return l((this.negative|C.negative)==0),this.iuxor(C)},a.prototype.xor=function(C){return this.length>C.length?this.clone().ixor(C):C.clone().ixor(this)},a.prototype.uxor=function(C){return this.length>C.length?this.clone().iuxor(C):C.clone().iuxor(this)},a.prototype.inotn=function(C){l(typeof C=="number"&&C>=0);var _=0|Math.ceil(C/26),x=C%26;this._expand(_),x>0&&_--;for(var w=0;w<_;w++)this.words[w]=67108863&~this.words[w];return x>0&&(this.words[w]=~this.words[w]&67108863>>26-x),this._strip()},a.prototype.notn=function(C){return this.clone().inotn(C)},a.prototype.setn=function(C,_){l(typeof C=="number"&&C>=0);var x=C/26|0,w=C%26;return this._expand(x+1),this.words[x]=_?this.words[x]|1<<w:this.words[x]&~(1<<w),this._strip()},a.prototype.iadd=function(C){var _,x,w;if(this.negative!==0&&C.negative===0)return this.negative=0,_=this.isub(C),this.negative^=1,this._normSign();if(this.negative===0&&C.negative!==0)return C.negative=0,_=this.isub(C),C.negative=1,_._normSign();this.length>C.length?(x=this,w=C):(x=C,w=this);for(var S=0,I=0;I<w.length;I++)_=(0|x.words[I])+(0|w.words[I])+S,this.words[I]=67108863&_,S=_>>>26;for(;S!==0&&I<x.length;I++)_=(0|x.words[I])+S,this.words[I]=67108863&_,S=_>>>26;if(this.length=x.length,S!==0)this.words[this.length]=S,this.length++;else if(x!==this)for(;I<x.length;I++)this.words[I]=x.words[I];return this},a.prototype.add=function(C){var _;return C.negative!==0&&this.negative===0?(C.negative=0,_=this.sub(C),C.negative^=1,_):C.negative===0&&this.negative!==0?(this.negative=0,_=C.sub(this),this.negative=1,_):this.length>C.length?this.clone().iadd(C):C.clone().iadd(this)},a.prototype.isub=function(C){if(C.negative!==0){C.negative=0;var _=this.iadd(C);return C.negative=1,_._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(C),this.negative=1,this._normSign();var x,w,S=this.cmp(C);if(S===0)return this.negative=0,this.length=1,this.words[0]=0,this;S>0?(x=this,w=C):(x=C,w=this);for(var I=0,z=0;z<w.length;z++)I=(_=(0|x.words[z])-(0|w.words[z])+I)>>26,this.words[z]=67108863&_;for(;I!==0&&z<x.length;z++)I=(_=(0|x.words[z])+I)>>26,this.words[z]=67108863&_;if(I===0&&z<x.length&&x!==this)for(;z<x.length;z++)this.words[z]=x.words[z];return this.length=Math.max(this.length,z),x!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(C){return this.clone().isub(C)};var E=function(C,_,x){var w,S,I,z=C.words,A=_.words,H=x.words,K=0,J=0|z[0],V=8191&J,X=J>>>13,D=0|z[1],O=8191&D,G=D>>>13,Z=0|z[2],ue=8191&Z,te=Z>>>13,oe=0|z[3],re=8191&oe,be=oe>>>13,ie=0|z[4],le=8191&ie,ae=ie>>>13,Se=0|z[5],ve=8191&Se,ke=Se>>>13,Ne=0|z[6],ze=8191&Ne,we=Ne>>>13,De=0|z[7],He=8191&De,We=De>>>13,et=0|z[8],St=8191&et,lt=et>>>13,At=0|z[9],ct=8191&At,at=At>>>13,wt=0|A[0],ot=8191&wt,nt=wt>>>13,zt=0|A[1],Lt=8191&zt,Ct=zt>>>13,Ht=0|A[2],jt=8191&Ht,Mt=Ht>>>13,Qt=0|A[3],Sr=8191&Qt,lr=Qt>>>13,pr=0|A[4],jr=8191&pr,Ft=pr>>>13,zr=0|A[5],Rr=8191&zr,mr=zr>>>13,Ue=0|A[6],Ye=8191&Ue,Xe=Ue>>>13,Le=0|A[7],Fe=8191&Le,Ke=Le>>>13,pe=0|A[8],Te=8191&pe,Ze=pe>>>13,ut=0|A[9],he=8191&ut,Ce=ut>>>13;x.negative=C.negative^_.negative,x.length=19;var Ve=(K+(w=Math.imul(V,ot))|0)+((8191&(S=(S=Math.imul(V,nt))+Math.imul(X,ot)|0))<<13)|0;K=((I=Math.imul(X,nt))+(S>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,w=Math.imul(O,ot),S=(S=Math.imul(O,nt))+Math.imul(G,ot)|0,I=Math.imul(G,nt);var Be=(K+(w=w+Math.imul(V,Lt)|0)|0)+((8191&(S=(S=S+Math.imul(V,Ct)|0)+Math.imul(X,Lt)|0))<<13)|0;K=((I=I+Math.imul(X,Ct)|0)+(S>>>13)|0)+(Be>>>26)|0,Be&=67108863,w=Math.imul(ue,ot),S=(S=Math.imul(ue,nt))+Math.imul(te,ot)|0,I=Math.imul(te,nt),w=w+Math.imul(O,Lt)|0,S=(S=S+Math.imul(O,Ct)|0)+Math.imul(G,Lt)|0,I=I+Math.imul(G,Ct)|0;var st=(K+(w=w+Math.imul(V,jt)|0)|0)+((8191&(S=(S=S+Math.imul(V,Mt)|0)+Math.imul(X,jt)|0))<<13)|0;K=((I=I+Math.imul(X,Mt)|0)+(S>>>13)|0)+(st>>>26)|0,st&=67108863,w=Math.imul(re,ot),S=(S=Math.imul(re,nt))+Math.imul(be,ot)|0,I=Math.imul(be,nt),w=w+Math.imul(ue,Lt)|0,S=(S=S+Math.imul(ue,Ct)|0)+Math.imul(te,Lt)|0,I=I+Math.imul(te,Ct)|0,w=w+Math.imul(O,jt)|0,S=(S=S+Math.imul(O,Mt)|0)+Math.imul(G,jt)|0,I=I+Math.imul(G,Mt)|0;var Ge=(K+(w=w+Math.imul(V,Sr)|0)|0)+((8191&(S=(S=S+Math.imul(V,lr)|0)+Math.imul(X,Sr)|0))<<13)|0;K=((I=I+Math.imul(X,lr)|0)+(S>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,w=Math.imul(le,ot),S=(S=Math.imul(le,nt))+Math.imul(ae,ot)|0,I=Math.imul(ae,nt),w=w+Math.imul(re,Lt)|0,S=(S=S+Math.imul(re,Ct)|0)+Math.imul(be,Lt)|0,I=I+Math.imul(be,Ct)|0,w=w+Math.imul(ue,jt)|0,S=(S=S+Math.imul(ue,Mt)|0)+Math.imul(te,jt)|0,I=I+Math.imul(te,Mt)|0,w=w+Math.imul(O,Sr)|0,S=(S=S+Math.imul(O,lr)|0)+Math.imul(G,Sr)|0,I=I+Math.imul(G,lr)|0;var pt=(K+(w=w+Math.imul(V,jr)|0)|0)+((8191&(S=(S=S+Math.imul(V,Ft)|0)+Math.imul(X,jr)|0))<<13)|0;K=((I=I+Math.imul(X,Ft)|0)+(S>>>13)|0)+(pt>>>26)|0,pt&=67108863,w=Math.imul(ve,ot),S=(S=Math.imul(ve,nt))+Math.imul(ke,ot)|0,I=Math.imul(ke,nt),w=w+Math.imul(le,Lt)|0,S=(S=S+Math.imul(le,Ct)|0)+Math.imul(ae,Lt)|0,I=I+Math.imul(ae,Ct)|0,w=w+Math.imul(re,jt)|0,S=(S=S+Math.imul(re,Mt)|0)+Math.imul(be,jt)|0,I=I+Math.imul(be,Mt)|0,w=w+Math.imul(ue,Sr)|0,S=(S=S+Math.imul(ue,lr)|0)+Math.imul(te,Sr)|0,I=I+Math.imul(te,lr)|0,w=w+Math.imul(O,jr)|0,S=(S=S+Math.imul(O,Ft)|0)+Math.imul(G,jr)|0,I=I+Math.imul(G,Ft)|0;var de=(K+(w=w+Math.imul(V,Rr)|0)|0)+((8191&(S=(S=S+Math.imul(V,mr)|0)+Math.imul(X,Rr)|0))<<13)|0;K=((I=I+Math.imul(X,mr)|0)+(S>>>13)|0)+(de>>>26)|0,de&=67108863,w=Math.imul(ze,ot),S=(S=Math.imul(ze,nt))+Math.imul(we,ot)|0,I=Math.imul(we,nt),w=w+Math.imul(ve,Lt)|0,S=(S=S+Math.imul(ve,Ct)|0)+Math.imul(ke,Lt)|0,I=I+Math.imul(ke,Ct)|0,w=w+Math.imul(le,jt)|0,S=(S=S+Math.imul(le,Mt)|0)+Math.imul(ae,jt)|0,I=I+Math.imul(ae,Mt)|0,w=w+Math.imul(re,Sr)|0,S=(S=S+Math.imul(re,lr)|0)+Math.imul(be,Sr)|0,I=I+Math.imul(be,lr)|0,w=w+Math.imul(ue,jr)|0,S=(S=S+Math.imul(ue,Ft)|0)+Math.imul(te,jr)|0,I=I+Math.imul(te,Ft)|0,w=w+Math.imul(O,Rr)|0,S=(S=S+Math.imul(O,mr)|0)+Math.imul(G,Rr)|0,I=I+Math.imul(G,mr)|0;var Me=(K+(w=w+Math.imul(V,Ye)|0)|0)+((8191&(S=(S=S+Math.imul(V,Xe)|0)+Math.imul(X,Ye)|0))<<13)|0;K=((I=I+Math.imul(X,Xe)|0)+(S>>>13)|0)+(Me>>>26)|0,Me&=67108863,w=Math.imul(He,ot),S=(S=Math.imul(He,nt))+Math.imul(We,ot)|0,I=Math.imul(We,nt),w=w+Math.imul(ze,Lt)|0,S=(S=S+Math.imul(ze,Ct)|0)+Math.imul(we,Lt)|0,I=I+Math.imul(we,Ct)|0,w=w+Math.imul(ve,jt)|0,S=(S=S+Math.imul(ve,Mt)|0)+Math.imul(ke,jt)|0,I=I+Math.imul(ke,Mt)|0,w=w+Math.imul(le,Sr)|0,S=(S=S+Math.imul(le,lr)|0)+Math.imul(ae,Sr)|0,I=I+Math.imul(ae,lr)|0,w=w+Math.imul(re,jr)|0,S=(S=S+Math.imul(re,Ft)|0)+Math.imul(be,jr)|0,I=I+Math.imul(be,Ft)|0,w=w+Math.imul(ue,Rr)|0,S=(S=S+Math.imul(ue,mr)|0)+Math.imul(te,Rr)|0,I=I+Math.imul(te,mr)|0,w=w+Math.imul(O,Ye)|0,S=(S=S+Math.imul(O,Xe)|0)+Math.imul(G,Ye)|0,I=I+Math.imul(G,Xe)|0;var Oe=(K+(w=w+Math.imul(V,Fe)|0)|0)+((8191&(S=(S=S+Math.imul(V,Ke)|0)+Math.imul(X,Fe)|0))<<13)|0;K=((I=I+Math.imul(X,Ke)|0)+(S>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,w=Math.imul(St,ot),S=(S=Math.imul(St,nt))+Math.imul(lt,ot)|0,I=Math.imul(lt,nt),w=w+Math.imul(He,Lt)|0,S=(S=S+Math.imul(He,Ct)|0)+Math.imul(We,Lt)|0,I=I+Math.imul(We,Ct)|0,w=w+Math.imul(ze,jt)|0,S=(S=S+Math.imul(ze,Mt)|0)+Math.imul(we,jt)|0,I=I+Math.imul(we,Mt)|0,w=w+Math.imul(ve,Sr)|0,S=(S=S+Math.imul(ve,lr)|0)+Math.imul(ke,Sr)|0,I=I+Math.imul(ke,lr)|0,w=w+Math.imul(le,jr)|0,S=(S=S+Math.imul(le,Ft)|0)+Math.imul(ae,jr)|0,I=I+Math.imul(ae,Ft)|0,w=w+Math.imul(re,Rr)|0,S=(S=S+Math.imul(re,mr)|0)+Math.imul(be,Rr)|0,I=I+Math.imul(be,mr)|0,w=w+Math.imul(ue,Ye)|0,S=(S=S+Math.imul(ue,Xe)|0)+Math.imul(te,Ye)|0,I=I+Math.imul(te,Xe)|0,w=w+Math.imul(O,Fe)|0,S=(S=S+Math.imul(O,Ke)|0)+Math.imul(G,Fe)|0,I=I+Math.imul(G,Ke)|0;var it=(K+(w=w+Math.imul(V,Te)|0)|0)+((8191&(S=(S=S+Math.imul(V,Ze)|0)+Math.imul(X,Te)|0))<<13)|0;K=((I=I+Math.imul(X,Ze)|0)+(S>>>13)|0)+(it>>>26)|0,it&=67108863,w=Math.imul(ct,ot),S=(S=Math.imul(ct,nt))+Math.imul(at,ot)|0,I=Math.imul(at,nt),w=w+Math.imul(St,Lt)|0,S=(S=S+Math.imul(St,Ct)|0)+Math.imul(lt,Lt)|0,I=I+Math.imul(lt,Ct)|0,w=w+Math.imul(He,jt)|0,S=(S=S+Math.imul(He,Mt)|0)+Math.imul(We,jt)|0,I=I+Math.imul(We,Mt)|0,w=w+Math.imul(ze,Sr)|0,S=(S=S+Math.imul(ze,lr)|0)+Math.imul(we,Sr)|0,I=I+Math.imul(we,lr)|0,w=w+Math.imul(ve,jr)|0,S=(S=S+Math.imul(ve,Ft)|0)+Math.imul(ke,jr)|0,I=I+Math.imul(ke,Ft)|0,w=w+Math.imul(le,Rr)|0,S=(S=S+Math.imul(le,mr)|0)+Math.imul(ae,Rr)|0,I=I+Math.imul(ae,mr)|0,w=w+Math.imul(re,Ye)|0,S=(S=S+Math.imul(re,Xe)|0)+Math.imul(be,Ye)|0,I=I+Math.imul(be,Xe)|0,w=w+Math.imul(ue,Fe)|0,S=(S=S+Math.imul(ue,Ke)|0)+Math.imul(te,Fe)|0,I=I+Math.imul(te,Ke)|0,w=w+Math.imul(O,Te)|0,S=(S=S+Math.imul(O,Ze)|0)+Math.imul(G,Te)|0,I=I+Math.imul(G,Ze)|0;var vt=(K+(w=w+Math.imul(V,he)|0)|0)+((8191&(S=(S=S+Math.imul(V,Ce)|0)+Math.imul(X,he)|0))<<13)|0;K=((I=I+Math.imul(X,Ce)|0)+(S>>>13)|0)+(vt>>>26)|0,vt&=67108863,w=Math.imul(ct,Lt),S=(S=Math.imul(ct,Ct))+Math.imul(at,Lt)|0,I=Math.imul(at,Ct),w=w+Math.imul(St,jt)|0,S=(S=S+Math.imul(St,Mt)|0)+Math.imul(lt,jt)|0,I=I+Math.imul(lt,Mt)|0,w=w+Math.imul(He,Sr)|0,S=(S=S+Math.imul(He,lr)|0)+Math.imul(We,Sr)|0,I=I+Math.imul(We,lr)|0,w=w+Math.imul(ze,jr)|0,S=(S=S+Math.imul(ze,Ft)|0)+Math.imul(we,jr)|0,I=I+Math.imul(we,Ft)|0,w=w+Math.imul(ve,Rr)|0,S=(S=S+Math.imul(ve,mr)|0)+Math.imul(ke,Rr)|0,I=I+Math.imul(ke,mr)|0,w=w+Math.imul(le,Ye)|0,S=(S=S+Math.imul(le,Xe)|0)+Math.imul(ae,Ye)|0,I=I+Math.imul(ae,Xe)|0,w=w+Math.imul(re,Fe)|0,S=(S=S+Math.imul(re,Ke)|0)+Math.imul(be,Fe)|0,I=I+Math.imul(be,Ke)|0,w=w+Math.imul(ue,Te)|0,S=(S=S+Math.imul(ue,Ze)|0)+Math.imul(te,Te)|0,I=I+Math.imul(te,Ze)|0;var It=(K+(w=w+Math.imul(O,he)|0)|0)+((8191&(S=(S=S+Math.imul(O,Ce)|0)+Math.imul(G,he)|0))<<13)|0;K=((I=I+Math.imul(G,Ce)|0)+(S>>>13)|0)+(It>>>26)|0,It&=67108863,w=Math.imul(ct,jt),S=(S=Math.imul(ct,Mt))+Math.imul(at,jt)|0,I=Math.imul(at,Mt),w=w+Math.imul(St,Sr)|0,S=(S=S+Math.imul(St,lr)|0)+Math.imul(lt,Sr)|0,I=I+Math.imul(lt,lr)|0,w=w+Math.imul(He,jr)|0,S=(S=S+Math.imul(He,Ft)|0)+Math.imul(We,jr)|0,I=I+Math.imul(We,Ft)|0,w=w+Math.imul(ze,Rr)|0,S=(S=S+Math.imul(ze,mr)|0)+Math.imul(we,Rr)|0,I=I+Math.imul(we,mr)|0,w=w+Math.imul(ve,Ye)|0,S=(S=S+Math.imul(ve,Xe)|0)+Math.imul(ke,Ye)|0,I=I+Math.imul(ke,Xe)|0,w=w+Math.imul(le,Fe)|0,S=(S=S+Math.imul(le,Ke)|0)+Math.imul(ae,Fe)|0,I=I+Math.imul(ae,Ke)|0,w=w+Math.imul(re,Te)|0,S=(S=S+Math.imul(re,Ze)|0)+Math.imul(be,Te)|0,I=I+Math.imul(be,Ze)|0;var kt=(K+(w=w+Math.imul(ue,he)|0)|0)+((8191&(S=(S=S+Math.imul(ue,Ce)|0)+Math.imul(te,he)|0))<<13)|0;K=((I=I+Math.imul(te,Ce)|0)+(S>>>13)|0)+(kt>>>26)|0,kt&=67108863,w=Math.imul(ct,Sr),S=(S=Math.imul(ct,lr))+Math.imul(at,Sr)|0,I=Math.imul(at,lr),w=w+Math.imul(St,jr)|0,S=(S=S+Math.imul(St,Ft)|0)+Math.imul(lt,jr)|0,I=I+Math.imul(lt,Ft)|0,w=w+Math.imul(He,Rr)|0,S=(S=S+Math.imul(He,mr)|0)+Math.imul(We,Rr)|0,I=I+Math.imul(We,mr)|0,w=w+Math.imul(ze,Ye)|0,S=(S=S+Math.imul(ze,Xe)|0)+Math.imul(we,Ye)|0,I=I+Math.imul(we,Xe)|0,w=w+Math.imul(ve,Fe)|0,S=(S=S+Math.imul(ve,Ke)|0)+Math.imul(ke,Fe)|0,I=I+Math.imul(ke,Ke)|0,w=w+Math.imul(le,Te)|0,S=(S=S+Math.imul(le,Ze)|0)+Math.imul(ae,Te)|0,I=I+Math.imul(ae,Ze)|0;var ir=(K+(w=w+Math.imul(re,he)|0)|0)+((8191&(S=(S=S+Math.imul(re,Ce)|0)+Math.imul(be,he)|0))<<13)|0;K=((I=I+Math.imul(be,Ce)|0)+(S>>>13)|0)+(ir>>>26)|0,ir&=67108863,w=Math.imul(ct,jr),S=(S=Math.imul(ct,Ft))+Math.imul(at,jr)|0,I=Math.imul(at,Ft),w=w+Math.imul(St,Rr)|0,S=(S=S+Math.imul(St,mr)|0)+Math.imul(lt,Rr)|0,I=I+Math.imul(lt,mr)|0,w=w+Math.imul(He,Ye)|0,S=(S=S+Math.imul(He,Xe)|0)+Math.imul(We,Ye)|0,I=I+Math.imul(We,Xe)|0,w=w+Math.imul(ze,Fe)|0,S=(S=S+Math.imul(ze,Ke)|0)+Math.imul(we,Fe)|0,I=I+Math.imul(we,Ke)|0,w=w+Math.imul(ve,Te)|0,S=(S=S+Math.imul(ve,Ze)|0)+Math.imul(ke,Te)|0,I=I+Math.imul(ke,Ze)|0;var Zt=(K+(w=w+Math.imul(le,he)|0)|0)+((8191&(S=(S=S+Math.imul(le,Ce)|0)+Math.imul(ae,he)|0))<<13)|0;K=((I=I+Math.imul(ae,Ce)|0)+(S>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,w=Math.imul(ct,Rr),S=(S=Math.imul(ct,mr))+Math.imul(at,Rr)|0,I=Math.imul(at,mr),w=w+Math.imul(St,Ye)|0,S=(S=S+Math.imul(St,Xe)|0)+Math.imul(lt,Ye)|0,I=I+Math.imul(lt,Xe)|0,w=w+Math.imul(He,Fe)|0,S=(S=S+Math.imul(He,Ke)|0)+Math.imul(We,Fe)|0,I=I+Math.imul(We,Ke)|0,w=w+Math.imul(ze,Te)|0,S=(S=S+Math.imul(ze,Ze)|0)+Math.imul(we,Te)|0,I=I+Math.imul(we,Ze)|0;var qt=(K+(w=w+Math.imul(ve,he)|0)|0)+((8191&(S=(S=S+Math.imul(ve,Ce)|0)+Math.imul(ke,he)|0))<<13)|0;K=((I=I+Math.imul(ke,Ce)|0)+(S>>>13)|0)+(qt>>>26)|0,qt&=67108863,w=Math.imul(ct,Ye),S=(S=Math.imul(ct,Xe))+Math.imul(at,Ye)|0,I=Math.imul(at,Xe),w=w+Math.imul(St,Fe)|0,S=(S=S+Math.imul(St,Ke)|0)+Math.imul(lt,Fe)|0,I=I+Math.imul(lt,Ke)|0,w=w+Math.imul(He,Te)|0,S=(S=S+Math.imul(He,Ze)|0)+Math.imul(We,Te)|0,I=I+Math.imul(We,Ze)|0;var Ut=(K+(w=w+Math.imul(ze,he)|0)|0)+((8191&(S=(S=S+Math.imul(ze,Ce)|0)+Math.imul(we,he)|0))<<13)|0;K=((I=I+Math.imul(we,Ce)|0)+(S>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,w=Math.imul(ct,Fe),S=(S=Math.imul(ct,Ke))+Math.imul(at,Fe)|0,I=Math.imul(at,Ke),w=w+Math.imul(St,Te)|0,S=(S=S+Math.imul(St,Ze)|0)+Math.imul(lt,Te)|0,I=I+Math.imul(lt,Ze)|0;var sr=(K+(w=w+Math.imul(He,he)|0)|0)+((8191&(S=(S=S+Math.imul(He,Ce)|0)+Math.imul(We,he)|0))<<13)|0;K=((I=I+Math.imul(We,Ce)|0)+(S>>>13)|0)+(sr>>>26)|0,sr&=67108863,w=Math.imul(ct,Te),S=(S=Math.imul(ct,Ze))+Math.imul(at,Te)|0,I=Math.imul(at,Ze);var rr=(K+(w=w+Math.imul(St,he)|0)|0)+((8191&(S=(S=S+Math.imul(St,Ce)|0)+Math.imul(lt,he)|0))<<13)|0;K=((I=I+Math.imul(lt,Ce)|0)+(S>>>13)|0)+(rr>>>26)|0,rr&=67108863;var ur=(K+(w=Math.imul(ct,he))|0)+((8191&(S=(S=Math.imul(ct,Ce))+Math.imul(at,he)|0))<<13)|0;return K=((I=Math.imul(at,Ce))+(S>>>13)|0)+(ur>>>26)|0,ur&=67108863,H[0]=Ve,H[1]=Be,H[2]=st,H[3]=Ge,H[4]=pt,H[5]=de,H[6]=Me,H[7]=Oe,H[8]=it,H[9]=vt,H[10]=It,H[11]=kt,H[12]=ir,H[13]=Zt,H[14]=qt,H[15]=Ut,H[16]=sr,H[17]=rr,H[18]=ur,K!==0&&(H[19]=K,x.length++),x};function M(C,_,x){x.negative=_.negative^C.negative,x.length=C.length+_.length;for(var w=0,S=0,I=0;I<x.length-1;I++){var z=S;S=0;for(var A=67108863&w,H=Math.min(I,_.length-1),K=Math.max(0,I-C.length+1);K<=H;K++){var J=I-K,V=(0|C.words[J])*(0|_.words[K]),X=67108863&V;A=67108863&(X=X+A|0),S+=(z=(z=z+(V/67108864|0)|0)+(X>>>26)|0)>>>26,z&=67108863}x.words[I]=A,w=z,z=S}return w!==0?x.words[I]=w:x.length--,x._strip()}function W(C,_,x){return M(C,_,x)}Math.imul||(E=v),a.prototype.mulTo=function(C,_){var x=this.length+C.length;return this.length===10&&C.length===10?E(this,C,_):x<63?v(this,C,_):x<1024?M(this,C,_):W(this,C,_)},a.prototype.mul=function(C){var _=new a(null);return _.words=new Array(this.length+C.length),this.mulTo(C,_)},a.prototype.mulf=function(C){var _=new a(null);return _.words=new Array(this.length+C.length),W(this,C,_)},a.prototype.imul=function(C){return this.clone().mulTo(C,this)},a.prototype.imuln=function(C){var _=C<0;_&&(C=-C),l(typeof C=="number"),l(C<67108864);for(var x=0,w=0;w<this.length;w++){var S=(0|this.words[w])*C,I=(67108863&S)+(67108863&x);x>>=26,x+=S/67108864|0,x+=I>>>26,this.words[w]=67108863&I}return x!==0&&(this.words[w]=x,this.length++),_?this.ineg():this},a.prototype.muln=function(C){return this.clone().imuln(C)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(C){var _=function(I){for(var z=new Array(I.bitLength()),A=0;A<z.length;A++){var H=A/26|0,K=A%26;z[A]=I.words[H]>>>K&1}return z}(C);if(_.length===0)return new a(1);for(var x=this,w=0;w<_.length&&_[w]===0;w++,x=x.sqr());if(++w<_.length)for(var S=x.sqr();w<_.length;w++,S=S.sqr())_[w]!==0&&(x=x.mul(S));return x},a.prototype.iushln=function(C){l(typeof C=="number"&&C>=0);var _,x=C%26,w=(C-x)/26,S=67108863>>>26-x<<26-x;if(x!==0){var I=0;for(_=0;_<this.length;_++){var z=this.words[_]&S,A=(0|this.words[_])-z<<x;this.words[_]=A|I,I=z>>>26-x}I&&(this.words[_]=I,this.length++)}if(w!==0){for(_=this.length-1;_>=0;_--)this.words[_+w]=this.words[_];for(_=0;_<w;_++)this.words[_]=0;this.length+=w}return this._strip()},a.prototype.ishln=function(C){return l(this.negative===0),this.iushln(C)},a.prototype.iushrn=function(C,_,x){var w;l(typeof C=="number"&&C>=0),w=_?(_-_%26)/26:0;var S=C%26,I=Math.min((C-S)/26,this.length),z=67108863^67108863>>>S<<S,A=x;if(w-=I,w=Math.max(0,w),A){for(var H=0;H<I;H++)A.words[H]=this.words[H];A.length=I}if(I!==0)if(this.length>I)for(this.length-=I,H=0;H<this.length;H++)this.words[H]=this.words[H+I];else this.words[0]=0,this.length=1;var K=0;for(H=this.length-1;H>=0&&(K!==0||H>=w);H--){var J=0|this.words[H];this.words[H]=K<<26-S|J>>>S,K=J&z}return A&&K!==0&&(A.words[A.length++]=K),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(C,_,x){return l(this.negative===0),this.iushrn(C,_,x)},a.prototype.shln=function(C){return this.clone().ishln(C)},a.prototype.ushln=function(C){return this.clone().iushln(C)},a.prototype.shrn=function(C){return this.clone().ishrn(C)},a.prototype.ushrn=function(C){return this.clone().iushrn(C)},a.prototype.testn=function(C){l(typeof C=="number"&&C>=0);var _=C%26,x=(C-_)/26,w=1<<_;return!(this.length<=x)&&!!(this.words[x]&w)},a.prototype.imaskn=function(C){l(typeof C=="number"&&C>=0);var _=C%26,x=(C-_)/26;if(l(this.negative===0,"imaskn works only with positive numbers"),this.length<=x)return this;if(_!==0&&x++,this.length=Math.min(x,this.length),_!==0){var w=67108863^67108863>>>_<<_;this.words[this.length-1]&=w}return this._strip()},a.prototype.maskn=function(C){return this.clone().imaskn(C)},a.prototype.iaddn=function(C){return l(typeof C=="number"),l(C<67108864),C<0?this.isubn(-C):this.negative!==0?this.length===1&&(0|this.words[0])<=C?(this.words[0]=C-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(C),this.negative=1,this):this._iaddn(C)},a.prototype._iaddn=function(C){this.words[0]+=C;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},a.prototype.isubn=function(C){if(l(typeof C=="number"),l(C<67108864),C<0)return this.iaddn(-C);if(this.negative!==0)return this.negative=0,this.iaddn(C),this.negative=1,this;if(this.words[0]-=C,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this._strip()},a.prototype.addn=function(C){return this.clone().iaddn(C)},a.prototype.subn=function(C){return this.clone().isubn(C)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(C,_,x){var w,S,I=C.length+x;this._expand(I);var z=0;for(w=0;w<C.length;w++){S=(0|this.words[w+x])+z;var A=(0|C.words[w])*_;z=((S-=67108863&A)>>26)-(A/67108864|0),this.words[w+x]=67108863&S}for(;w<this.length-x;w++)z=(S=(0|this.words[w+x])+z)>>26,this.words[w+x]=67108863&S;if(z===0)return this._strip();for(l(z===-1),z=0,w=0;w<this.length;w++)z=(S=-(0|this.words[w])+z)>>26,this.words[w]=67108863&S;return this.negative=1,this._strip()},a.prototype._wordDiv=function(C,_){var x=(this.length,C.length),w=this.clone(),S=C,I=0|S.words[S.length-1];(x=26-this._countBits(I))!==0&&(S=S.ushln(x),w.iushln(x),I=0|S.words[S.length-1]);var z,A=w.length-S.length;if(_!=="mod"){(z=new a(null)).length=A+1,z.words=new Array(z.length);for(var H=0;H<z.length;H++)z.words[H]=0}var K=w.clone()._ishlnsubmul(S,1,A);K.negative===0&&(w=K,z&&(z.words[A]=1));for(var J=A-1;J>=0;J--){var V=67108864*(0|w.words[S.length+J])+(0|w.words[S.length+J-1]);for(V=Math.min(V/I|0,67108863),w._ishlnsubmul(S,V,J);w.negative!==0;)V--,w.negative=0,w._ishlnsubmul(S,1,J),w.isZero()||(w.negative^=1);z&&(z.words[J]=V)}return z&&z._strip(),w._strip(),_!=="div"&&x!==0&&w.iushrn(x),{div:z||null,mod:w}},a.prototype.divmod=function(C,_,x){return l(!C.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:this.negative!==0&&C.negative===0?(I=this.neg().divmod(C,_),_!=="mod"&&(w=I.div.neg()),_!=="div"&&(S=I.mod.neg(),x&&S.negative!==0&&S.iadd(C)),{div:w,mod:S}):this.negative===0&&C.negative!==0?(I=this.divmod(C.neg(),_),_!=="mod"&&(w=I.div.neg()),{div:w,mod:I.mod}):this.negative&C.negative?(I=this.neg().divmod(C.neg(),_),_!=="div"&&(S=I.mod.neg(),x&&S.negative!==0&&S.isub(C)),{div:I.div,mod:S}):C.length>this.length||this.cmp(C)<0?{div:new a(0),mod:this}:C.length===1?_==="div"?{div:this.divn(C.words[0]),mod:null}:_==="mod"?{div:null,mod:new a(this.modrn(C.words[0]))}:{div:this.divn(C.words[0]),mod:new a(this.modrn(C.words[0]))}:this._wordDiv(C,_);var w,S,I},a.prototype.div=function(C){return this.divmod(C,"div",!1).div},a.prototype.mod=function(C){return this.divmod(C,"mod",!1).mod},a.prototype.umod=function(C){return this.divmod(C,"mod",!0).mod},a.prototype.divRound=function(C){var _=this.divmod(C);if(_.mod.isZero())return _.div;var x=_.div.negative!==0?_.mod.isub(C):_.mod,w=C.ushrn(1),S=C.andln(1),I=x.cmp(w);return I<0||S===1&&I===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},a.prototype.modrn=function(C){var _=C<0;_&&(C=-C),l(C<=67108863);for(var x=(1<<26)%C,w=0,S=this.length-1;S>=0;S--)w=(x*w+(0|this.words[S]))%C;return _?-w:w},a.prototype.modn=function(C){return this.modrn(C)},a.prototype.idivn=function(C){var _=C<0;_&&(C=-C),l(C<=67108863);for(var x=0,w=this.length-1;w>=0;w--){var S=(0|this.words[w])+67108864*x;this.words[w]=S/C|0,x=S%C}return this._strip(),_?this.ineg():this},a.prototype.divn=function(C){return this.clone().idivn(C)},a.prototype.egcd=function(C){l(C.negative===0),l(!C.isZero());var _=this,x=C.clone();_=_.negative!==0?_.umod(C):_.clone();for(var w=new a(1),S=new a(0),I=new a(0),z=new a(1),A=0;_.isEven()&&x.isEven();)_.iushrn(1),x.iushrn(1),++A;for(var H=x.clone(),K=_.clone();!_.isZero();){for(var J=0,V=1;!(_.words[0]&V)&&J<26;++J,V<<=1);if(J>0)for(_.iushrn(J);J-- >0;)(w.isOdd()||S.isOdd())&&(w.iadd(H),S.isub(K)),w.iushrn(1),S.iushrn(1);for(var X=0,D=1;!(x.words[0]&D)&&X<26;++X,D<<=1);if(X>0)for(x.iushrn(X);X-- >0;)(I.isOdd()||z.isOdd())&&(I.iadd(H),z.isub(K)),I.iushrn(1),z.iushrn(1);_.cmp(x)>=0?(_.isub(x),w.isub(I),S.isub(z)):(x.isub(_),I.isub(w),z.isub(S))}return{a:I,b:z,gcd:x.iushln(A)}},a.prototype._invmp=function(C){l(C.negative===0),l(!C.isZero());var _=this,x=C.clone();_=_.negative!==0?_.umod(C):_.clone();for(var w,S=new a(1),I=new a(0),z=x.clone();_.cmpn(1)>0&&x.cmpn(1)>0;){for(var A=0,H=1;!(_.words[0]&H)&&A<26;++A,H<<=1);if(A>0)for(_.iushrn(A);A-- >0;)S.isOdd()&&S.iadd(z),S.iushrn(1);for(var K=0,J=1;!(x.words[0]&J)&&K<26;++K,J<<=1);if(K>0)for(x.iushrn(K);K-- >0;)I.isOdd()&&I.iadd(z),I.iushrn(1);_.cmp(x)>=0?(_.isub(x),S.isub(I)):(x.isub(_),I.isub(S))}return(w=_.cmpn(1)===0?S:I).cmpn(0)<0&&w.iadd(C),w},a.prototype.gcd=function(C){if(this.isZero())return C.abs();if(C.isZero())return this.abs();var _=this.clone(),x=C.clone();_.negative=0,x.negative=0;for(var w=0;_.isEven()&&x.isEven();w++)_.iushrn(1),x.iushrn(1);for(;;){for(;_.isEven();)_.iushrn(1);for(;x.isEven();)x.iushrn(1);var S=_.cmp(x);if(S<0){var I=_;_=x,x=I}else if(S===0||x.cmpn(1)===0)break;_.isub(x)}return x.iushln(w)},a.prototype.invm=function(C){return this.egcd(C).a.umod(C)},a.prototype.isEven=function(){return(1&this.words[0])==0},a.prototype.isOdd=function(){return(1&this.words[0])==1},a.prototype.andln=function(C){return this.words[0]&C},a.prototype.bincn=function(C){l(typeof C=="number");var _=C%26,x=(C-_)/26,w=1<<_;if(this.length<=x)return this._expand(x+1),this.words[x]|=w,this;for(var S=w,I=x;S!==0&&I<this.length;I++){var z=0|this.words[I];S=(z+=S)>>>26,z&=67108863,this.words[I]=z}return S!==0&&(this.words[I]=S,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(C){var _,x=C<0;if(this.negative!==0&&!x)return-1;if(this.negative===0&&x)return 1;if(this._strip(),this.length>1)_=1;else{x&&(C=-C),l(C<=67108863,"Number is too big");var w=0|this.words[0];_=w===C?0:w<C?-1:1}return this.negative!==0?0|-_:_},a.prototype.cmp=function(C){if(this.negative!==0&&C.negative===0)return-1;if(this.negative===0&&C.negative!==0)return 1;var _=this.ucmp(C);return this.negative!==0?0|-_:_},a.prototype.ucmp=function(C){if(this.length>C.length)return 1;if(this.length<C.length)return-1;for(var _=0,x=this.length-1;x>=0;x--){var w=0|this.words[x],S=0|C.words[x];if(w!==S){w<S?_=-1:w>S&&(_=1);break}}return _},a.prototype.gtn=function(C){return this.cmpn(C)===1},a.prototype.gt=function(C){return this.cmp(C)===1},a.prototype.gten=function(C){return this.cmpn(C)>=0},a.prototype.gte=function(C){return this.cmp(C)>=0},a.prototype.ltn=function(C){return this.cmpn(C)===-1},a.prototype.lt=function(C){return this.cmp(C)===-1},a.prototype.lten=function(C){return this.cmpn(C)<=0},a.prototype.lte=function(C){return this.cmp(C)<=0},a.prototype.eqn=function(C){return this.cmpn(C)===0},a.prototype.eq=function(C){return this.cmp(C)===0},a.red=function(C){return new k(C)},a.prototype.toRed=function(C){return l(!this.red,"Already a number in reduction context"),l(this.negative===0,"red works only with positives"),C.convertTo(this)._forceRed(C)},a.prototype.fromRed=function(){return l(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(C){return this.red=C,this},a.prototype.forceRed=function(C){return l(!this.red,"Already a number in reduction context"),this._forceRed(C)},a.prototype.redAdd=function(C){return l(this.red,"redAdd works only with red numbers"),this.red.add(this,C)},a.prototype.redIAdd=function(C){return l(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,C)},a.prototype.redSub=function(C){return l(this.red,"redSub works only with red numbers"),this.red.sub(this,C)},a.prototype.redISub=function(C){return l(this.red,"redISub works only with red numbers"),this.red.isub(this,C)},a.prototype.redShl=function(C){return l(this.red,"redShl works only with red numbers"),this.red.shl(this,C)},a.prototype.redMul=function(C){return l(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.mul(this,C)},a.prototype.redIMul=function(C){return l(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.imul(this,C)},a.prototype.redSqr=function(){return l(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return l(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return l(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return l(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return l(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(C){return l(this.red&&!C.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,C)};var $={k256:null,p224:null,p192:null,p25519:null};function N(C,_){this.name=C,this.p=new a(_,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function j(){N.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function F(){N.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P(){N.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function L(){N.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(C){if(typeof C=="string"){var _=a._prime(C);this.m=_.p,this.prime=_}else l(C.gtn(1),"modulus must be greater than 1"),this.m=C,this.prime=null}function R(C){k.call(this,C),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}N.prototype._tmp=function(){var C=new a(null);return C.words=new Array(Math.ceil(this.n/13)),C},N.prototype.ireduce=function(C){var _,x=C;do this.split(x,this.tmp),_=(x=(x=this.imulK(x)).iadd(this.tmp)).bitLength();while(_>this.n);var w=_<this.n?-1:x.ucmp(this.p);return w===0?(x.words[0]=0,x.length=1):w>0?x.isub(this.p):x.strip!==void 0?x.strip():x._strip(),x},N.prototype.split=function(C,_){C.iushrn(this.n,0,_)},N.prototype.imulK=function(C){return C.imul(this.k)},c(j,N),j.prototype.split=function(C,_){for(var x=Math.min(C.length,9),w=0;w<x;w++)_.words[w]=C.words[w];if(_.length=x,C.length<=9)return C.words[0]=0,void(C.length=1);var S=C.words[9];for(_.words[_.length++]=4194303&S,w=10;w<C.length;w++){var I=0|C.words[w];C.words[w-10]=(4194303&I)<<4|S>>>22,S=I}S>>>=22,C.words[w-10]=S,S===0&&C.length>10?C.length-=10:C.length-=9},j.prototype.imulK=function(C){C.words[C.length]=0,C.words[C.length+1]=0,C.length+=2;for(var _=0,x=0;x<C.length;x++){var w=0|C.words[x];_+=977*w,C.words[x]=67108863&_,_=64*w+(_/67108864|0)}return C.words[C.length-1]===0&&(C.length--,C.words[C.length-1]===0&&C.length--),C},c(F,N),c(P,N),c(L,N),L.prototype.imulK=function(C){for(var _=0,x=0;x<C.length;x++){var w=19*(0|C.words[x])+_,S=67108863&w;w>>>=26,C.words[x]=S,_=w}return _!==0&&(C.words[C.length++]=_),C},a._prime=function(C){if($[C])return $[C];var _;if(C==="k256")_=new j;else if(C==="p224")_=new F;else if(C==="p192")_=new P;else{if(C!=="p25519")throw new Error("Unknown prime "+C);_=new L}return $[C]=_,_},k.prototype._verify1=function(C){l(C.negative===0,"red works only with positives"),l(C.red,"red works only with red numbers")},k.prototype._verify2=function(C,_){l((C.negative|_.negative)==0,"red works only with positives"),l(C.red&&C.red===_.red,"red works only with red numbers")},k.prototype.imod=function(C){return this.prime?this.prime.ireduce(C)._forceRed(this):(m(C,C.umod(this.m)._forceRed(this)),C)},k.prototype.neg=function(C){return C.isZero()?C.clone():this.m.sub(C)._forceRed(this)},k.prototype.add=function(C,_){this._verify2(C,_);var x=C.add(_);return x.cmp(this.m)>=0&&x.isub(this.m),x._forceRed(this)},k.prototype.iadd=function(C,_){this._verify2(C,_);var x=C.iadd(_);return x.cmp(this.m)>=0&&x.isub(this.m),x},k.prototype.sub=function(C,_){this._verify2(C,_);var x=C.sub(_);return x.cmpn(0)<0&&x.iadd(this.m),x._forceRed(this)},k.prototype.isub=function(C,_){this._verify2(C,_);var x=C.isub(_);return x.cmpn(0)<0&&x.iadd(this.m),x},k.prototype.shl=function(C,_){return this._verify1(C),this.imod(C.ushln(_))},k.prototype.imul=function(C,_){return this._verify2(C,_),this.imod(C.imul(_))},k.prototype.mul=function(C,_){return this._verify2(C,_),this.imod(C.mul(_))},k.prototype.isqr=function(C){return this.imul(C,C.clone())},k.prototype.sqr=function(C){return this.mul(C,C)},k.prototype.sqrt=function(C){if(C.isZero())return C.clone();var _=this.m.andln(3);if(l(_%2==1),_===3){var x=this.m.add(new a(1)).iushrn(2);return this.pow(C,x)}for(var w=this.m.subn(1),S=0;!w.isZero()&&w.andln(1)===0;)S++,w.iushrn(1);l(!w.isZero());var I=new a(1).toRed(this),z=I.redNeg(),A=this.m.subn(1).iushrn(1),H=this.m.bitLength();for(H=new a(2*H*H).toRed(this);this.pow(H,A).cmp(z)!==0;)H.redIAdd(z);for(var K=this.pow(H,w),J=this.pow(C,w.addn(1).iushrn(1)),V=this.pow(C,w),X=S;V.cmp(I)!==0;){for(var D=V,O=0;D.cmp(I)!==0;O++)D=D.redSqr();l(O<X);var G=this.pow(K,new a(1).iushln(X-O-1));J=J.redMul(G),K=G.redSqr(),V=V.redMul(K),X=O}return J},k.prototype.invm=function(C){var _=C._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},k.prototype.pow=function(C,_){if(_.isZero())return new a(1).toRed(this);if(_.cmpn(1)===0)return C.clone();var x=new Array(16);x[0]=new a(1).toRed(this),x[1]=C;for(var w=2;w<x.length;w++)x[w]=this.mul(x[w-1],C);var S=x[0],I=0,z=0,A=_.bitLength()%26;for(A===0&&(A=26),w=_.length-1;w>=0;w--){for(var H=_.words[w],K=A-1;K>=0;K--){var J=H>>K&1;S!==x[0]&&(S=this.sqr(S)),J!==0||I!==0?(I<<=1,I|=J,(++z===4||w===0&&K===0)&&(S=this.mul(S,x[I]),z=0,I=0)):z=0}A=26}return S},k.prototype.convertTo=function(C){var _=C.umod(this.m);return _===C?_.clone():_},k.prototype.convertFrom=function(C){var _=C.clone();return _.red=null,_},a.mont=function(C){return new R(C)},c(R,k),R.prototype.convertTo=function(C){return this.imod(C.ushln(this.shift))},R.prototype.convertFrom=function(C){var _=this.imod(C.mul(this.rinv));return _.red=null,_},R.prototype.imul=function(C,_){if(C.isZero()||_.isZero())return C.words[0]=0,C.length=1,C;var x=C.imul(_),w=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=x.isub(w).iushrn(this.shift),I=S;return S.cmp(this.m)>=0?I=S.isub(this.m):S.cmpn(0)<0&&(I=S.iadd(this.m)),I._forceRed(this)},R.prototype.mul=function(C,_){if(C.isZero()||_.isZero())return new a(0)._forceRed(this);var x=C.mul(_),w=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=x.isub(w).iushrn(this.shift),I=S;return S.cmp(this.m)>=0?I=S.isub(this.m):S.cmpn(0)<0&&(I=S.iadd(this.m)),I._forceRed(this)},R.prototype.invm=function(C){return this.imod(C._invmp(this.m).mul(this.r2))._forceRed(this)}})(n===void 0||n)},{buffer:188}],187:[function(t,n,i){var s;function o(c){this.rand=c}if(n.exports=function(c){return s||(s=new o(null)),s.generate(c)},n.exports.Rand=o,o.prototype.generate=function(c){return this._rand(c)},o.prototype._rand=function(c){if(this.rand.getBytes)return this.rand.getBytes(c);for(var a=new Uint8Array(c),u=0;u<a.length;u++)a[u]=this.rand.getByte();return a},typeof self=="object")self.crypto&&self.crypto.getRandomValues?o.prototype._rand=function(c){var a=new Uint8Array(c);return self.crypto.getRandomValues(a),a}:self.msCrypto&&self.msCrypto.getRandomValues?o.prototype._rand=function(c){var a=new Uint8Array(c);return self.msCrypto.getRandomValues(a),a}:typeof window=="object"&&(o.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var l=t("crypto");if(typeof l.randomBytes!="function")throw new Error("Not supported");o.prototype._rand=function(c){return l.randomBytes(c)}}catch{}},{crypto:188}],188:[function(t,n,i){},{}],189:[function(t,n,i){var s=t("safe-buffer").Buffer;function o(f){s.isBuffer(f)||(f=s.from(f));for(var h=f.length/4|0,m=new Array(h),g=0;g<h;g++)m[g]=f.readUInt32BE(4*g);return m}function l(f){for(;0<f.length;f++)f[0]=0}function c(f,h,m,g,p){for(var y,b,v,E,M=m[0],W=m[1],$=m[2],N=m[3],j=f[0]^h[0],F=f[1]^h[1],P=f[2]^h[2],L=f[3]^h[3],k=4,R=1;R<p;R++)y=M[j>>>24]^W[F>>>16&255]^$[P>>>8&255]^N[255&L]^h[k++],b=M[F>>>24]^W[P>>>16&255]^$[L>>>8&255]^N[255&j]^h[k++],v=M[P>>>24]^W[L>>>16&255]^$[j>>>8&255]^N[255&F]^h[k++],E=M[L>>>24]^W[j>>>16&255]^$[F>>>8&255]^N[255&P]^h[k++],j=y,F=b,P=v,L=E;return y=(g[j>>>24]<<24|g[F>>>16&255]<<16|g[P>>>8&255]<<8|g[255&L])^h[k++],b=(g[F>>>24]<<24|g[P>>>16&255]<<16|g[L>>>8&255]<<8|g[255&j])^h[k++],v=(g[P>>>24]<<24|g[L>>>16&255]<<16|g[j>>>8&255]<<8|g[255&F])^h[k++],E=(g[L>>>24]<<24|g[j>>>16&255]<<16|g[F>>>8&255]<<8|g[255&P])^h[k++],[y>>>=0,b>>>=0,v>>>=0,E>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var f=new Array(256),h=0;h<256;h++)f[h]=h<128?h<<1:h<<1^283;for(var m=[],g=[],p=[[],[],[],[]],y=[[],[],[],[]],b=0,v=0,E=0;E<256;++E){var M=v^v<<1^v<<2^v<<3^v<<4;M=M>>>8^255&M^99,m[b]=M,g[M]=b;var W=f[b],$=f[W],N=f[$],j=257*f[M]^16843008*M;p[0][b]=j<<24|j>>>8,p[1][b]=j<<16|j>>>16,p[2][b]=j<<8|j>>>24,p[3][b]=j,j=16843009*N^65537*$^257*W^16843008*b,y[0][M]=j<<24|j>>>8,y[1][M]=j<<16|j>>>16,y[2][M]=j<<8|j>>>24,y[3][M]=j,b===0?b=v=1:(b=W^f[f[f[N^W]]],v^=f[f[v]])}return{SBOX:m,INV_SBOX:g,SUB_MIX:p,INV_SUB_MIX:y}}();function d(f){this._key=o(f),this._reset()}d.blockSize=16,d.keySize=32,d.prototype.blockSize=d.blockSize,d.prototype.keySize=d.keySize,d.prototype._reset=function(){for(var f=this._key,h=f.length,m=h+6,g=4*(m+1),p=[],y=0;y<h;y++)p[y]=f[y];for(y=h;y<g;y++){var b=p[y-1];y%h==0?(b=b<<8|b>>>24,b=u.SBOX[b>>>24]<<24|u.SBOX[b>>>16&255]<<16|u.SBOX[b>>>8&255]<<8|u.SBOX[255&b],b^=a[y/h|0]<<24):h>6&&y%h==4&&(b=u.SBOX[b>>>24]<<24|u.SBOX[b>>>16&255]<<16|u.SBOX[b>>>8&255]<<8|u.SBOX[255&b]),p[y]=p[y-h]^b}for(var v=[],E=0;E<g;E++){var M=g-E,W=p[M-(E%4?0:4)];v[E]=E<4||M<=4?W:u.INV_SUB_MIX[0][u.SBOX[W>>>24]]^u.INV_SUB_MIX[1][u.SBOX[W>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[W>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&W]]}this._nRounds=m,this._keySchedule=p,this._invKeySchedule=v},d.prototype.encryptBlockRaw=function(f){return c(f=o(f),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},d.prototype.encryptBlock=function(f){var h=this.encryptBlockRaw(f),m=s.allocUnsafe(16);return m.writeUInt32BE(h[0],0),m.writeUInt32BE(h[1],4),m.writeUInt32BE(h[2],8),m.writeUInt32BE(h[3],12),m},d.prototype.decryptBlock=function(f){var h=(f=o(f))[1];f[1]=f[3],f[3]=h;var m=c(f,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),g=s.allocUnsafe(16);return g.writeUInt32BE(m[0],0),g.writeUInt32BE(m[3],4),g.writeUInt32BE(m[2],8),g.writeUInt32BE(m[1],12),g},d.prototype.scrub=function(){l(this._keySchedule),l(this._invKeySchedule),l(this._key)},n.exports.AES=d},{"safe-buffer":494}],190:[function(t,n,i){var s=t("./aes"),o=t("safe-buffer").Buffer,l=t("cipher-base"),c=t("inherits"),a=t("./ghash"),u=t("buffer-xor"),d=t("./incr32");function f(h,m,g,p){l.call(this);var y=o.alloc(4,0);this._cipher=new s.AES(m);var b=this._cipher.encryptBlock(y);this._ghash=new a(b),g=function(v,E,M){if(E.length===12)return v._finID=o.concat([E,o.from([0,0,0,1])]),o.concat([E,o.from([0,0,0,2])]);var W=new a(M),$=E.length,N=$%16;W.update(E),N&&(N=16-N,W.update(o.alloc(N,0))),W.update(o.alloc(8,0));var j=8*$,F=o.alloc(8);F.writeUIntBE(j,0,8),W.update(F),v._finID=W.state;var P=o.from(v._finID);return d(P),P}(this,g,b),this._prev=o.from(g),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=p,this._alen=0,this._len=0,this._mode=h,this._authTag=null,this._called=!1}c(f,l),f.prototype._update=function(h){if(!this._called&&this._alen){var m=16-this._alen%16;m<16&&(m=o.alloc(m,0),this._ghash.update(m))}this._called=!0;var g=this._mode.encrypt(this,h);return this._decrypt?this._ghash.update(h):this._ghash.update(g),this._len+=h.length,g},f.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var h=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(m,g){var p=0;m.length!==g.length&&p++;for(var y=Math.min(m.length,g.length),b=0;b<y;++b)p+=m[b]^g[b];return p}(h,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=h,this._cipher.scrub()},f.prototype.getAuthTag=function(){if(this._decrypt||!o.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},f.prototype.setAuthTag=function(h){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=h},f.prototype.setAAD=function(h){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(h),this._alen+=h.length},n.exports=f},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(t,n,i){var s=t("./encrypter"),o=t("./decrypter"),l=t("./modes/list.json");i.createCipher=i.Cipher=s.createCipher,i.createCipheriv=i.Cipheriv=s.createCipheriv,i.createDecipher=i.Decipher=o.createDecipher,i.createDecipheriv=i.Decipheriv=o.createDecipheriv,i.listCiphers=i.getCiphers=function(){return Object.keys(l)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(t,n,i){var s=t("./authCipher"),o=t("safe-buffer").Buffer,l=t("./modes"),c=t("./streamCipher"),a=t("cipher-base"),u=t("./aes"),d=t("evp_bytestokey");function f(g,p,y){a.call(this),this._cache=new h,this._last=void 0,this._cipher=new u.AES(p),this._prev=o.from(y),this._mode=g,this._autopadding=!0}function h(){this.cache=o.allocUnsafe(0)}function m(g,p,y){var b=l[g.toLowerCase()];if(!b)throw new TypeError("invalid suite type");if(typeof y=="string"&&(y=o.from(y)),b.mode!=="GCM"&&y.length!==b.iv)throw new TypeError("invalid iv length "+y.length);if(typeof p=="string"&&(p=o.from(p)),p.length!==b.key/8)throw new TypeError("invalid key length "+p.length);return b.type==="stream"?new c(b.module,p,y,!0):b.type==="auth"?new s(b.module,p,y,!0):new f(b.module,p,y)}t("inherits")(f,a),f.prototype._update=function(g){var p,y;this._cache.add(g);for(var b=[];p=this._cache.get(this._autopadding);)y=this._mode.decrypt(this,p),b.push(y);return o.concat(b)},f.prototype._final=function(){var g=this._cache.flush();if(this._autopadding)return function(p){var y=p[15];if(y<1||y>16)throw new Error("unable to decrypt data");for(var b=-1;++b<y;)if(p[b+(16-y)]!==y)throw new Error("unable to decrypt data");if(y!==16)return p.slice(0,16-y)}(this._mode.decrypt(this,g));if(g)throw new Error("data not multiple of block length")},f.prototype.setAutoPadding=function(g){return this._autopadding=!!g,this},h.prototype.add=function(g){this.cache=o.concat([this.cache,g])},h.prototype.get=function(g){var p;if(g){if(this.cache.length>16)return p=this.cache.slice(0,16),this.cache=this.cache.slice(16),p}else if(this.cache.length>=16)return p=this.cache.slice(0,16),this.cache=this.cache.slice(16),p;return null},h.prototype.flush=function(){if(this.cache.length)return this.cache},i.createDecipher=function(g,p){var y=l[g.toLowerCase()];if(!y)throw new TypeError("invalid suite type");var b=d(p,!1,y.key,y.iv);return m(g,b.key,b.iv)},i.createDecipheriv=m},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(t,n,i){var s=t("./modes"),o=t("./authCipher"),l=t("safe-buffer").Buffer,c=t("./streamCipher"),a=t("cipher-base"),u=t("./aes"),d=t("evp_bytestokey");function f(p,y,b){a.call(this),this._cache=new m,this._cipher=new u.AES(y),this._prev=l.from(b),this._mode=p,this._autopadding=!0}t("inherits")(f,a),f.prototype._update=function(p){var y,b;this._cache.add(p);for(var v=[];y=this._cache.get();)b=this._mode.encrypt(this,y),v.push(b);return l.concat(v)};var h=l.alloc(16,16);function m(){this.cache=l.allocUnsafe(0)}function g(p,y,b){var v=s[p.toLowerCase()];if(!v)throw new TypeError("invalid suite type");if(typeof y=="string"&&(y=l.from(y)),y.length!==v.key/8)throw new TypeError("invalid key length "+y.length);if(typeof b=="string"&&(b=l.from(b)),v.mode!=="GCM"&&b.length!==v.iv)throw new TypeError("invalid iv length "+b.length);return v.type==="stream"?new c(v.module,y,b):v.type==="auth"?new o(v.module,y,b):new f(v.module,y,b)}f.prototype._final=function(){var p=this._cache.flush();if(this._autopadding)return p=this._mode.encrypt(this,p),this._cipher.scrub(),p;if(!p.equals(h))throw this._cipher.scrub(),new Error("data not multiple of block length")},f.prototype.setAutoPadding=function(p){return this._autopadding=!!p,this},m.prototype.add=function(p){this.cache=l.concat([this.cache,p])},m.prototype.get=function(){if(this.cache.length>15){var p=this.cache.slice(0,16);return this.cache=this.cache.slice(16),p}return null},m.prototype.flush=function(){for(var p=16-this.cache.length,y=l.allocUnsafe(p),b=-1;++b<p;)y.writeUInt8(p,b);return l.concat([this.cache,y])},i.createCipheriv=g,i.createCipher=function(p,y){var b=s[p.toLowerCase()];if(!b)throw new TypeError("invalid suite type");var v=d(y,!1,b.key,b.iv);return g(p,v.key,v.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(t,n,i){var s=t("safe-buffer").Buffer,o=s.alloc(16,0);function l(a){var u=s.allocUnsafe(16);return u.writeUInt32BE(a[0]>>>0,0),u.writeUInt32BE(a[1]>>>0,4),u.writeUInt32BE(a[2]>>>0,8),u.writeUInt32BE(a[3]>>>0,12),u}function c(a){this.h=a,this.state=s.alloc(16,0),this.cache=s.allocUnsafe(0)}c.prototype.ghash=function(a){for(var u=-1;++u<a.length;)this.state[u]^=a[u];this._multiply()},c.prototype._multiply=function(){for(var a,u,d,f=[(a=this.h).readUInt32BE(0),a.readUInt32BE(4),a.readUInt32BE(8),a.readUInt32BE(12)],h=[0,0,0,0],m=-1;++m<128;){for(this.state[~~(m/8)]&1<<7-m%8&&(h[0]^=f[0],h[1]^=f[1],h[2]^=f[2],h[3]^=f[3]),d=(1&f[3])!=0,u=3;u>0;u--)f[u]=f[u]>>>1|(1&f[u-1])<<31;f[0]=f[0]>>>1,d&&(f[0]=f[0]^225<<24)}this.state=l(h)},c.prototype.update=function(a){var u;for(this.cache=s.concat([this.cache,a]);this.cache.length>=16;)u=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(u)},c.prototype.final=function(a,u){return this.cache.length&&this.ghash(s.concat([this.cache,o],16)),this.ghash(l([0,a,0,u])),this.state},n.exports=c},{"safe-buffer":494}],195:[function(t,n,i){n.exports=function(s){for(var o,l=s.length;l--;){if((o=s.readUInt8(l))!==255){o++,s.writeUInt8(o,l);break}s.writeUInt8(0,l)}}},{}],196:[function(t,n,i){var s=t("buffer-xor");i.encrypt=function(o,l){var c=s(l,o._prev);return o._prev=o._cipher.encryptBlock(c),o._prev},i.decrypt=function(o,l){var c=o._prev;o._prev=l;var a=o._cipher.decryptBlock(l);return s(a,c)}},{"buffer-xor":219}],197:[function(t,n,i){var s=t("safe-buffer").Buffer,o=t("buffer-xor");function l(c,a,u){var d=a.length,f=o(a,c._cache);return c._cache=c._cache.slice(d),c._prev=s.concat([c._prev,u?a:f]),f}i.encrypt=function(c,a,u){for(var d,f=s.allocUnsafe(0);a.length;){if(c._cache.length===0&&(c._cache=c._cipher.encryptBlock(c._prev),c._prev=s.allocUnsafe(0)),!(c._cache.length<=a.length)){f=s.concat([f,l(c,a,u)]);break}d=c._cache.length,f=s.concat([f,l(c,a.slice(0,d),u)]),a=a.slice(d)}return f}},{"buffer-xor":219,"safe-buffer":494}],198:[function(t,n,i){var s=t("safe-buffer").Buffer;function o(c,a,u){for(var d,f,h=-1,m=0;++h<8;)d=a&1<<7-h?128:0,m+=(128&(f=c._cipher.encryptBlock(c._prev)[0]^d))>>h%8,c._prev=l(c._prev,u?d:f);return m}function l(c,a){var u=c.length,d=-1,f=s.allocUnsafe(c.length);for(c=s.concat([c,s.from([a])]);++d<u;)f[d]=c[d]<<1|c[d+1]>>7;return f}i.encrypt=function(c,a,u){for(var d=a.length,f=s.allocUnsafe(d),h=-1;++h<d;)f[h]=o(c,a[h],u);return f}},{"safe-buffer":494}],199:[function(t,n,i){var s=t("safe-buffer").Buffer;function o(l,c,a){var u=l._cipher.encryptBlock(l._prev)[0]^c;return l._prev=s.concat([l._prev.slice(1),s.from([a?c:u])]),u}i.encrypt=function(l,c,a){for(var u=c.length,d=s.allocUnsafe(u),f=-1;++f<u;)d[f]=o(l,c[f],a);return d}},{"safe-buffer":494}],200:[function(t,n,i){var s=t("buffer-xor"),o=t("safe-buffer").Buffer,l=t("../incr32");function c(a){var u=a._cipher.encryptBlockRaw(a._prev);return l(a._prev),u}i.encrypt=function(a,u){var d=Math.ceil(u.length/16),f=a._cache.length;a._cache=o.concat([a._cache,o.allocUnsafe(16*d)]);for(var h=0;h<d;h++){var m=c(a),g=f+16*h;a._cache.writeUInt32BE(m[0],g+0),a._cache.writeUInt32BE(m[1],g+4),a._cache.writeUInt32BE(m[2],g+8),a._cache.writeUInt32BE(m[3],g+12)}var p=a._cache.slice(0,u.length);return a._cache=a._cache.slice(u.length),s(u,p)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(t,n,i){i.encrypt=function(s,o){return s._cipher.encryptBlock(o)},i.decrypt=function(s,o){return s._cipher.decryptBlock(o)}},{}],202:[function(t,n,i){var s={ECB:t("./ecb"),CBC:t("./cbc"),CFB:t("./cfb"),CFB8:t("./cfb8"),CFB1:t("./cfb1"),OFB:t("./ofb"),CTR:t("./ctr"),GCM:t("./ctr")},o=t("./list.json");for(var l in o)o[l].module=s[o[l].mode];n.exports=o},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(t,n,i){n.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(t,n,i){(function(s){(function(){var o=t("buffer-xor");function l(c){return c._prev=c._cipher.encryptBlock(c._prev),c._prev}i.encrypt=function(c,a){for(;c._cache.length<a.length;)c._cache=s.concat([c._cache,l(c)]);var u=c._cache.slice(0,a.length);return c._cache=c._cache.slice(a.length),o(a,u)}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(t,n,i){var s=t("./aes"),o=t("safe-buffer").Buffer,l=t("cipher-base");function c(a,u,d,f){l.call(this),this._cipher=new s.AES(u),this._prev=o.from(d),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=f,this._mode=a}t("inherits")(c,l),c.prototype._update=function(a){return this._mode.encrypt(this,a,this._decrypt)},c.prototype._final=function(){this._cipher.scrub()},n.exports=c},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(t,n,i){var s=t("browserify-des"),o=t("browserify-aes/browser"),l=t("browserify-aes/modes"),c=t("browserify-des/modes"),a=t("evp_bytestokey");function u(f,h,m){if(f=f.toLowerCase(),l[f])return o.createCipheriv(f,h,m);if(c[f])return new s({key:h,iv:m,mode:f});throw new TypeError("invalid suite type")}function d(f,h,m){if(f=f.toLowerCase(),l[f])return o.createDecipheriv(f,h,m);if(c[f])return new s({key:h,iv:m,mode:f,decrypt:!0});throw new TypeError("invalid suite type")}i.createCipher=i.Cipher=function(f,h){var m,g;if(f=f.toLowerCase(),l[f])m=l[f].key,g=l[f].iv;else{if(!c[f])throw new TypeError("invalid suite type");m=8*c[f].key,g=c[f].iv}var p=a(h,!1,m,g);return u(f,p.key,p.iv)},i.createCipheriv=i.Cipheriv=u,i.createDecipher=i.Decipher=function(f,h){var m,g;if(f=f.toLowerCase(),l[f])m=l[f].key,g=l[f].iv;else{if(!c[f])throw new TypeError("invalid suite type");m=8*c[f].key,g=c[f].iv}var p=a(h,!1,m,g);return d(f,p.key,p.iv)},i.createDecipheriv=i.Decipheriv=d,i.listCiphers=i.getCiphers=function(){return Object.keys(c).concat(o.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(t,n,i){var s=t("cipher-base"),o=t("des.js"),l=t("inherits"),c=t("safe-buffer").Buffer,a={"des-ede3-cbc":o.CBC.instantiate(o.EDE),"des-ede3":o.EDE,"des-ede-cbc":o.CBC.instantiate(o.EDE),"des-ede":o.EDE,"des-cbc":o.CBC.instantiate(o.DES),"des-ecb":o.DES};function u(d){s.call(this);var f,h=d.mode.toLowerCase(),m=a[h];f=d.decrypt?"decrypt":"encrypt";var g=d.key;c.isBuffer(g)||(g=c.from(g)),h!=="des-ede"&&h!=="des-ede-cbc"||(g=c.concat([g,g.slice(0,8)]));var p=d.iv;c.isBuffer(p)||(p=c.from(p)),this._des=m.create({key:g,iv:p,type:f})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],n.exports=u,l(u,s),u.prototype._update=function(d){return c.from(this._des.update(d))},u.prototype._final=function(){return c.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(t,n,i){i["des-ecb"]={key:8,iv:0},i["des-cbc"]=i.des={key:8,iv:8},i["des-ede3-cbc"]=i.des3={key:24,iv:8},i["des-ede3"]={key:24,iv:0},i["des-ede-cbc"]={key:16,iv:8},i["des-ede"]={key:16,iv:0}},{}],209:[function(t,n,i){(function(s){(function(){var o=t("bn.js"),l=t("randombytes");function c(u){var d,f=u.modulus.byteLength();do d=new o(l(f));while(d.cmp(u.modulus)>=0||!d.umod(u.prime1)||!d.umod(u.prime2));return d}function a(u,d){var f=function($){var N=c($);return{blinder:N.toRed(o.mont($.modulus)).redPow(new o($.publicExponent)).fromRed(),unblinder:N.invm($.modulus)}}(d),h=d.modulus.byteLength(),m=new o(u).mul(f.blinder).umod(d.modulus),g=m.toRed(o.mont(d.prime1)),p=m.toRed(o.mont(d.prime2)),y=d.coefficient,b=d.prime1,v=d.prime2,E=g.redPow(d.exponent1).fromRed(),M=p.redPow(d.exponent2).fromRed(),W=E.isub(M).imul(y).umod(b).imul(v);return M.iadd(W).imul(f.unblinder).umod(d.modulus).toArrayLike(s,"be",h)}a.getr=c,n.exports=a}).call(this)}).call(this,t("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(t,n,i){n.exports=t("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(t,n,i){n.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(t,n,i){n.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(t,n,i){var s=t("safe-buffer").Buffer,o=t("create-hash"),l=t("readable-stream"),c=t("inherits"),a=t("./sign"),u=t("./verify"),d=t("./algorithms.json");function f(p){l.Writable.call(this);var y=d[p];if(!y)throw new Error("Unknown message digest");this._hashType=y.hash,this._hash=o(y.hash),this._tag=y.id,this._signType=y.sign}function h(p){l.Writable.call(this);var y=d[p];if(!y)throw new Error("Unknown message digest");this._hash=o(y.hash),this._tag=y.id,this._signType=y.sign}function m(p){return new f(p)}function g(p){return new h(p)}Object.keys(d).forEach(function(p){d[p].id=s.from(d[p].id,"hex"),d[p.toLowerCase()]=d[p]}),c(f,l.Writable),f.prototype._write=function(p,y,b){this._hash.update(p),b()},f.prototype.update=function(p,y){return typeof p=="string"&&(p=s.from(p,y)),this._hash.update(p),this},f.prototype.sign=function(p,y){this.end();var b=this._hash.digest(),v=a(b,p,this._hashType,this._signType,this._tag);return y?v.toString(y):v},c(h,l.Writable),h.prototype._write=function(p,y,b){this._hash.update(p),b()},h.prototype.update=function(p,y){return typeof p=="string"&&(p=s.from(p,y)),this._hash.update(p),this},h.prototype.verify=function(p,y,b){typeof y=="string"&&(y=s.from(y,b)),this.end();var v=this._hash.digest();return u(y,v,p,this._signType,this._tag)},n.exports={Sign:m,Verify:g,createSign:m,createVerify:g}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(t,n,i){var s=t("safe-buffer").Buffer,o=t("create-hmac"),l=t("browserify-rsa"),c=t("elliptic").ec,a=t("bn.js"),u=t("parse-asn1"),d=t("./curves.json");function f(p,y,b,v){if((p=s.from(p.toArray())).length<y.byteLength()){var E=s.alloc(y.byteLength()-p.length);p=s.concat([E,p])}var M=b.length,W=function(j,F){j=(j=h(j,F)).mod(F);var P=s.from(j.toArray());if(P.length<F.byteLength()){var L=s.alloc(F.byteLength()-P.length);P=s.concat([L,P])}return P}(b,y),$=s.alloc(M);$.fill(1);var N=s.alloc(M);return N=o(v,N).update($).update(s.from([0])).update(p).update(W).digest(),$=o(v,N).update($).digest(),{k:N=o(v,N).update($).update(s.from([1])).update(p).update(W).digest(),v:$=o(v,N).update($).digest()}}function h(p,y){var b=new a(p),v=(p.length<<3)-y.bitLength();return v>0&&b.ishrn(v),b}function m(p,y,b){var v,E;do{for(v=s.alloc(0);8*v.length<p.bitLength();)y.v=o(b,y.k).update(y.v).digest(),v=s.concat([v,y.v]);E=h(v,p),y.k=o(b,y.k).update(y.v).update(s.from([0])).digest(),y.v=o(b,y.k).update(y.v).digest()}while(E.cmp(p)!==-1);return E}function g(p,y,b,v){return p.toRed(a.mont(b)).redPow(y).fromRed().mod(v)}n.exports=function(p,y,b,v,E){var M=u(y);if(M.curve){if(v!=="ecdsa"&&v!=="ecdsa/rsa")throw new Error("wrong private key type");return function(j,F){var P=d[F.curve.join(".")];if(!P)throw new Error("unknown curve "+F.curve.join("."));var L=new c(P).keyFromPrivate(F.privateKey).sign(j);return s.from(L.toDER())}(p,M)}if(M.type==="dsa"){if(v!=="dsa")throw new Error("wrong private key type");return function(j,F,P){for(var L,k=F.params.priv_key,R=F.params.p,C=F.params.q,_=F.params.g,x=new a(0),w=h(j,C).mod(C),S=!1,I=f(k,C,j,P);S===!1;)L=m(C,I,P),x=g(_,L,R,C),(S=L.invm(C).imul(w.add(k.mul(x))).mod(C)).cmpn(0)===0&&(S=!1,x=new a(0));return function(z,A){z=z.toArray(),A=A.toArray(),128&z[0]&&(z=[0].concat(z)),128&A[0]&&(A=[0].concat(A));var H=[48,z.length+A.length+4,2,z.length];return H=H.concat(z,[2,A.length],A),s.from(H)}(x,S)}(p,M,b)}if(v!=="rsa"&&v!=="ecdsa/rsa")throw new Error("wrong private key type");p=s.concat([E,p]);for(var W=M.modulus.byteLength(),$=[0,1];p.length+$.length+1<W;)$.push(255);$.push(0);for(var N=-1;++N<p.length;)$.push(p[N]);return l($,M)},n.exports.getKey=f,n.exports.makeKey=m},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(t,n,i){var s=t("safe-buffer").Buffer,o=t("bn.js"),l=t("elliptic").ec,c=t("parse-asn1"),a=t("./curves.json");function u(d,f){if(d.cmpn(0)<=0)throw new Error("invalid sig");if(d.cmp(f)>=f)throw new Error("invalid sig")}n.exports=function(d,f,h,m,g){var p=c(h);if(p.type==="ec"){if(m!=="ecdsa"&&m!=="ecdsa/rsa")throw new Error("wrong public key type");return function($,N,j){var F=a[j.data.algorithm.curve.join(".")];if(!F)throw new Error("unknown curve "+j.data.algorithm.curve.join("."));var P=new l(F),L=j.data.subjectPrivateKey.data;return P.verify(N,$,L)}(d,f,p)}if(p.type==="dsa"){if(m!=="dsa")throw new Error("wrong public key type");return function($,N,j){var F=j.data.p,P=j.data.q,L=j.data.g,k=j.data.pub_key,R=c.signature.decode($,"der"),C=R.s,_=R.r;u(C,P),u(_,P);var x=o.mont(F),w=C.invm(P);return L.toRed(x).redPow(new o(N).mul(w).mod(P)).fromRed().mul(k.toRed(x).redPow(_.mul(w).mod(P)).fromRed()).mod(F).mod(P).cmp(_)===0}(d,f,p)}if(m!=="rsa"&&m!=="ecdsa/rsa")throw new Error("wrong public key type");f=s.concat([g,f]);for(var y=p.modulus.byteLength(),b=[1],v=0;f.length+b.length+2<y;)b.push(255),v++;b.push(0);for(var E=-1;++E<f.length;)b.push(f[E]);b=s.from(b);var M=o.mont(p.modulus);d=(d=new o(d).toRed(M)).redPow(new o(p.publicExponent)),d=s.from(d.fromRed().toArray());var W=v<8?1:0;for(y=Math.min(d.length,b.length),d.length!==b.length&&(W=1),E=-1;++E<y;)W|=d[E]^b[E];return W===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(t,n,i){},{}],217:[function(t,n,i){var s=t("buffer"),o=s.Buffer;function l(a,u){for(var d in a)u[d]=a[d]}function c(a,u,d){return o(a,u,d)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?n.exports=s:(l(s,i),i.Buffer=c),l(o,c),c.from=function(a,u,d){if(typeof a=="number")throw new TypeError("Argument must not be a number");return o(a,u,d)},c.alloc=function(a,u,d){if(typeof a!="number")throw new TypeError("Argument must be a number");var f=o(a);return u!==void 0?typeof d=="string"?f.fill(u,d):f.fill(u):f.fill(0),f},c.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return o(a)},c.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(a)}},{buffer:220}],218:[function(t,n,i){var s=t("safe-buffer").Buffer,o=s.isEncoding||function(p){switch((p=""+p)&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(p){var y;switch(this.encoding=function(b){var v=function(E){if(!E)return"utf8";for(var M;;)switch(E){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return E;default:if(M)return;E=(""+E).toLowerCase(),M=!0}}(b);if(typeof v!="string"&&(s.isEncoding===o||!o(b)))throw new Error("Unknown encoding: "+b);return v||b}(p),this.encoding){case"utf16le":this.text=u,this.end=d,y=4;break;case"utf8":this.fillLast=a,y=4;break;case"base64":this.text=f,this.end=h,y=3;break;default:return this.write=m,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(y)}function c(p){return p<=127?0:p>>5==6?2:p>>4==14?3:p>>3==30?4:p>>6==2?-1:-2}function a(p){var y=this.lastTotal-this.lastNeed,b=function(v,E,M){if((192&E[0])!=128)return v.lastNeed=0,"";if(v.lastNeed>1&&E.length>1){if((192&E[1])!=128)return v.lastNeed=1,"";if(v.lastNeed>2&&E.length>2&&(192&E[2])!=128)return v.lastNeed=2,""}}(this,p);return b!==void 0?b:this.lastNeed<=p.length?(p.copy(this.lastChar,y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(p.copy(this.lastChar,y,0,p.length),void(this.lastNeed-=p.length))}function u(p,y){if((p.length-y)%2==0){var b=p.toString("utf16le",y);if(b){var v=b.charCodeAt(b.length-1);if(v>=55296&&v<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",y,p.length-1)}function d(p){var y=p&&p.length?this.write(p):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return y+this.lastChar.toString("utf16le",0,b)}return y}function f(p,y){var b=(p.length-y)%3;return b===0?p.toString("base64",y):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",y,p.length-b))}function h(p){var y=p&&p.length?this.write(p):"";return this.lastNeed?y+this.lastChar.toString("base64",0,3-this.lastNeed):y}function m(p){return p.toString(this.encoding)}function g(p){return p&&p.length?this.write(p):""}i.StringDecoder=l,l.prototype.write=function(p){if(p.length===0)return"";var y,b;if(this.lastNeed){if((y=this.fillLast(p))===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<p.length?y?y+this.text(p,b):this.text(p,b):y||""},l.prototype.end=function(p){var y=p&&p.length?this.write(p):"";return this.lastNeed?y+"":y},l.prototype.text=function(p,y){var b=function(E,M,W){var $=M.length-1;if($<W)return 0;var N=c(M[$]);return N>=0?(N>0&&(E.lastNeed=N-1),N):--$<W||N===-2?0:(N=c(M[$]))>=0?(N>0&&(E.lastNeed=N-2),N):--$<W||N===-2?0:(N=c(M[$]))>=0?(N>0&&(N===2?N=0:E.lastNeed=N-3),N):0}(this,p,y);if(!this.lastNeed)return p.toString("utf8",y);this.lastTotal=b;var v=p.length-(b-this.lastNeed);return p.copy(this.lastChar,0,v),p.toString("utf8",y,v)},l.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length}},{"safe-buffer":217}],219:[function(t,n,i){(function(s){(function(){n.exports=function(o,l){for(var c=Math.min(o.length,l.length),a=new s(c),u=0;u<c;++u)a[u]=o[u]^l[u];return a}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220}],220:[function(t,n,i){(function(s){(function(){var o=t("base64-js"),l=t("ieee754");i.Buffer=a,i.SlowBuffer=function(D){return+D!=D&&(D=0),a.alloc(+D)},i.INSPECT_MAX_BYTES=50;function c(D){if(D>2147483647)throw new RangeError('The value "'+D+'" is invalid for option "size"');var O=new Uint8Array(D);return O.__proto__=a.prototype,O}function a(D,O,G){if(typeof D=="number"){if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(D)}return u(D,O,G)}function u(D,O,G){if(typeof D=="string")return function(te,oe){if(typeof oe=="string"&&oe!==""||(oe="utf8"),!a.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);var re=0|g(te,oe),be=c(re),ie=be.write(te,oe);return ie!==re&&(be=be.slice(0,ie)),be}(D,O);if(ArrayBuffer.isView(D))return h(D);if(D==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof D);if(V(D,ArrayBuffer)||D&&V(D.buffer,ArrayBuffer))return function(te,oe,re){if(oe<0||te.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(te.byteLength<oe+(re||0))throw new RangeError('"length" is outside of buffer bounds');var be;return be=oe===void 0&&re===void 0?new Uint8Array(te):re===void 0?new Uint8Array(te,oe):new Uint8Array(te,oe,re),be.__proto__=a.prototype,be}(D,O,G);if(typeof D=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Z=D.valueOf&&D.valueOf();if(Z!=null&&Z!==D)return a.from(Z,O,G);var ue=function(te){if(a.isBuffer(te)){var oe=0|m(te.length),re=c(oe);return re.length===0||te.copy(re,0,0,oe),re}if(te.length!==void 0)return typeof te.length!="number"||X(te.length)?c(0):h(te);if(te.type==="Buffer"&&Array.isArray(te.data))return h(te.data)}(D);if(ue)return ue;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof D[Symbol.toPrimitive]=="function")return a.from(D[Symbol.toPrimitive]("string"),O,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof D)}function d(D){if(typeof D!="number")throw new TypeError('"size" argument must be of type number');if(D<0)throw new RangeError('The value "'+D+'" is invalid for option "size"')}function f(D){return d(D),c(D<0?0:0|m(D))}function h(D){for(var O=D.length<0?0:0|m(D.length),G=c(O),Z=0;Z<O;Z+=1)G[Z]=255&D[Z];return G}function m(D){if(D>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|D}function g(D,O){if(a.isBuffer(D))return D.length;if(ArrayBuffer.isView(D)||V(D,ArrayBuffer))return D.byteLength;if(typeof D!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof D);var G=D.length,Z=arguments.length>2&&arguments[2]===!0;if(!Z&&G===0)return 0;for(var ue=!1;;)switch(O){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return H(D).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*G;case"hex":return G>>>1;case"base64":return K(D).length;default:if(ue)return Z?-1:H(D).length;O=(""+O).toLowerCase(),ue=!0}}function p(D,O,G){var Z=!1;if((O===void 0||O<0)&&(O=0),O>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0)<=(O>>>=0))return"";for(D||(D="utf8");;)switch(D){case"hex":return R(this,O,G);case"utf8":case"utf-8":return P(this,O,G);case"ascii":return L(this,O,G);case"latin1":case"binary":return k(this,O,G);case"base64":return F(this,O,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,O,G);default:if(Z)throw new TypeError("Unknown encoding: "+D);D=(D+"").toLowerCase(),Z=!0}}function y(D,O,G){var Z=D[O];D[O]=D[G],D[G]=Z}function b(D,O,G,Z,ue){if(D.length===0)return-1;if(typeof G=="string"?(Z=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),X(G=+G)&&(G=ue?0:D.length-1),G<0&&(G=D.length+G),G>=D.length){if(ue)return-1;G=D.length-1}else if(G<0){if(!ue)return-1;G=0}if(typeof O=="string"&&(O=a.from(O,Z)),a.isBuffer(O))return O.length===0?-1:v(D,O,G,Z,ue);if(typeof O=="number")return O&=255,typeof Uint8Array.prototype.indexOf=="function"?ue?Uint8Array.prototype.indexOf.call(D,O,G):Uint8Array.prototype.lastIndexOf.call(D,O,G):v(D,[O],G,Z,ue);throw new TypeError("val must be string, number or Buffer")}function v(D,O,G,Z,ue){var te,oe=1,re=D.length,be=O.length;if(Z!==void 0&&((Z=String(Z).toLowerCase())==="ucs2"||Z==="ucs-2"||Z==="utf16le"||Z==="utf-16le")){if(D.length<2||O.length<2)return-1;oe=2,re/=2,be/=2,G/=2}function ie(ve,ke){return oe===1?ve[ke]:ve.readUInt16BE(ke*oe)}if(ue){var le=-1;for(te=G;te<re;te++)if(ie(D,te)===ie(O,le===-1?0:te-le)){if(le===-1&&(le=te),te-le+1===be)return le*oe}else le!==-1&&(te-=te-le),le=-1}else for(G+be>re&&(G=re-be),te=G;te>=0;te--){for(var ae=!0,Se=0;Se<be;Se++)if(ie(D,te+Se)!==ie(O,Se)){ae=!1;break}if(ae)return te}return-1}function E(D,O,G,Z){G=Number(G)||0;var ue=D.length-G;Z?(Z=Number(Z))>ue&&(Z=ue):Z=ue;var te=O.length;Z>te/2&&(Z=te/2);for(var oe=0;oe<Z;++oe){var re=parseInt(O.substr(2*oe,2),16);if(X(re))return oe;D[G+oe]=re}return oe}function M(D,O,G,Z){return J(H(O,D.length-G),D,G,Z)}function W(D,O,G,Z){return J(function(ue){for(var te=[],oe=0;oe<ue.length;++oe)te.push(255&ue.charCodeAt(oe));return te}(O),D,G,Z)}function $(D,O,G,Z){return W(D,O,G,Z)}function N(D,O,G,Z){return J(K(O),D,G,Z)}function j(D,O,G,Z){return J(function(ue,te){for(var oe,re,be,ie=[],le=0;le<ue.length&&!((te-=2)<0);++le)oe=ue.charCodeAt(le),re=oe>>8,be=oe%256,ie.push(be),ie.push(re);return ie}(O,D.length-G),D,G,Z)}function F(D,O,G){return O===0&&G===D.length?o.fromByteArray(D):o.fromByteArray(D.slice(O,G))}function P(D,O,G){G=Math.min(D.length,G);for(var Z=[],ue=O;ue<G;){var te,oe,re,be,ie=D[ue],le=null,ae=ie>239?4:ie>223?3:ie>191?2:1;if(ue+ae<=G)switch(ae){case 1:ie<128&&(le=ie);break;case 2:(192&(te=D[ue+1]))==128&&(be=(31&ie)<<6|63&te)>127&&(le=be);break;case 3:te=D[ue+1],oe=D[ue+2],(192&te)==128&&(192&oe)==128&&(be=(15&ie)<<12|(63&te)<<6|63&oe)>2047&&(be<55296||be>57343)&&(le=be);break;case 4:te=D[ue+1],oe=D[ue+2],re=D[ue+3],(192&te)==128&&(192&oe)==128&&(192&re)==128&&(be=(15&ie)<<18|(63&te)<<12|(63&oe)<<6|63&re)>65535&&be<1114112&&(le=be)}le===null?(le=65533,ae=1):le>65535&&(le-=65536,Z.push(le>>>10&1023|55296),le=56320|1023&le),Z.push(le),ue+=ae}return function(Se){var ve=Se.length;if(ve<=4096)return String.fromCharCode.apply(String,Se);for(var ke="",Ne=0;Ne<ve;)ke+=String.fromCharCode.apply(String,Se.slice(Ne,Ne+=4096));return ke}(Z)}i.kMaxLength=2147483647,a.TYPED_ARRAY_SUPPORT=function(){try{var D=new Uint8Array(1);return D.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},D.foo()===42}catch{return!1}}(),a.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(D,O,G){return u(D,O,G)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(D,O,G){return function(Z,ue,te){return d(Z),Z<=0?c(Z):ue!==void 0?typeof te=="string"?c(Z).fill(ue,te):c(Z).fill(ue):c(Z)}(D,O,G)},a.allocUnsafe=function(D){return f(D)},a.allocUnsafeSlow=function(D){return f(D)},a.isBuffer=function(D){return D!=null&&D._isBuffer===!0&&D!==a.prototype},a.compare=function(D,O){if(V(D,Uint8Array)&&(D=a.from(D,D.offset,D.byteLength)),V(O,Uint8Array)&&(O=a.from(O,O.offset,O.byteLength)),!a.isBuffer(D)||!a.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(D===O)return 0;for(var G=D.length,Z=O.length,ue=0,te=Math.min(G,Z);ue<te;++ue)if(D[ue]!==O[ue]){G=D[ue],Z=O[ue];break}return G<Z?-1:Z<G?1:0},a.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(D,O){if(!Array.isArray(D))throw new TypeError('"list" argument must be an Array of Buffers');if(D.length===0)return a.alloc(0);var G;if(O===void 0)for(O=0,G=0;G<D.length;++G)O+=D[G].length;var Z=a.allocUnsafe(O),ue=0;for(G=0;G<D.length;++G){var te=D[G];if(V(te,Uint8Array)&&(te=a.from(te)),!a.isBuffer(te))throw new TypeError('"list" argument must be an Array of Buffers');te.copy(Z,ue),ue+=te.length}return Z},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var D=this.length;if(D%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<D;O+=2)y(this,O,O+1);return this},a.prototype.swap32=function(){var D=this.length;if(D%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<D;O+=4)y(this,O,O+3),y(this,O+1,O+2);return this},a.prototype.swap64=function(){var D=this.length;if(D%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<D;O+=8)y(this,O,O+7),y(this,O+1,O+6),y(this,O+2,O+5),y(this,O+3,O+4);return this},a.prototype.toString=function(){var D=this.length;return D===0?"":arguments.length===0?P(this,0,D):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(D){if(!a.isBuffer(D))throw new TypeError("Argument must be a Buffer");return this===D||a.compare(this,D)===0},a.prototype.inspect=function(){var D="",O=i.INSPECT_MAX_BYTES;return D=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(D+=" ... "),"<Buffer "+D+">"},a.prototype.compare=function(D,O,G,Z,ue){if(V(D,Uint8Array)&&(D=a.from(D,D.offset,D.byteLength)),!a.isBuffer(D))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof D);if(O===void 0&&(O=0),G===void 0&&(G=D?D.length:0),Z===void 0&&(Z=0),ue===void 0&&(ue=this.length),O<0||G>D.length||Z<0||ue>this.length)throw new RangeError("out of range index");if(Z>=ue&&O>=G)return 0;if(Z>=ue)return-1;if(O>=G)return 1;if(this===D)return 0;for(var te=(ue>>>=0)-(Z>>>=0),oe=(G>>>=0)-(O>>>=0),re=Math.min(te,oe),be=this.slice(Z,ue),ie=D.slice(O,G),le=0;le<re;++le)if(be[le]!==ie[le]){te=be[le],oe=ie[le];break}return te<oe?-1:oe<te?1:0},a.prototype.includes=function(D,O,G){return this.indexOf(D,O,G)!==-1},a.prototype.indexOf=function(D,O,G){return b(this,D,O,G,!0)},a.prototype.lastIndexOf=function(D,O,G){return b(this,D,O,G,!1)},a.prototype.write=function(D,O,G,Z){if(O===void 0)Z="utf8",G=this.length,O=0;else if(G===void 0&&typeof O=="string")Z=O,G=this.length,O=0;else{if(!isFinite(O))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");O>>>=0,isFinite(G)?(G>>>=0,Z===void 0&&(Z="utf8")):(Z=G,G=void 0)}var ue=this.length-O;if((G===void 0||G>ue)&&(G=ue),D.length>0&&(G<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");Z||(Z="utf8");for(var te=!1;;)switch(Z){case"hex":return E(this,D,O,G);case"utf8":case"utf-8":return M(this,D,O,G);case"ascii":return W(this,D,O,G);case"latin1":case"binary":return $(this,D,O,G);case"base64":return N(this,D,O,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,D,O,G);default:if(te)throw new TypeError("Unknown encoding: "+Z);Z=(""+Z).toLowerCase(),te=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(D,O,G){var Z="";G=Math.min(D.length,G);for(var ue=O;ue<G;++ue)Z+=String.fromCharCode(127&D[ue]);return Z}function k(D,O,G){var Z="";G=Math.min(D.length,G);for(var ue=O;ue<G;++ue)Z+=String.fromCharCode(D[ue]);return Z}function R(D,O,G){var Z=D.length;(!O||O<0)&&(O=0),(!G||G<0||G>Z)&&(G=Z);for(var ue="",te=O;te<G;++te)ue+=A(D[te]);return ue}function C(D,O,G){for(var Z=D.slice(O,G),ue="",te=0;te<Z.length;te+=2)ue+=String.fromCharCode(Z[te]+256*Z[te+1]);return ue}function _(D,O,G){if(D%1!=0||D<0)throw new RangeError("offset is not uint");if(D+O>G)throw new RangeError("Trying to access beyond buffer length")}function x(D,O,G,Z,ue,te){if(!a.isBuffer(D))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>ue||O<te)throw new RangeError('"value" argument is out of bounds');if(G+Z>D.length)throw new RangeError("Index out of range")}function w(D,O,G,Z,ue,te){if(G+Z>D.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function S(D,O,G,Z,ue){return O=+O,G>>>=0,ue||w(D,0,G,4),l.write(D,O,G,Z,23,4),G+4}function I(D,O,G,Z,ue){return O=+O,G>>>=0,ue||w(D,0,G,8),l.write(D,O,G,Z,52,8),G+8}a.prototype.slice=function(D,O){var G=this.length;(D=~~D)<0?(D+=G)<0&&(D=0):D>G&&(D=G),(O=O===void 0?G:~~O)<0?(O+=G)<0&&(O=0):O>G&&(O=G),O<D&&(O=D);var Z=this.subarray(D,O);return Z.__proto__=a.prototype,Z},a.prototype.readUIntLE=function(D,O,G){D>>>=0,O>>>=0,G||_(D,O,this.length);for(var Z=this[D],ue=1,te=0;++te<O&&(ue*=256);)Z+=this[D+te]*ue;return Z},a.prototype.readUIntBE=function(D,O,G){D>>>=0,O>>>=0,G||_(D,O,this.length);for(var Z=this[D+--O],ue=1;O>0&&(ue*=256);)Z+=this[D+--O]*ue;return Z},a.prototype.readUInt8=function(D,O){return D>>>=0,O||_(D,1,this.length),this[D]},a.prototype.readUInt16LE=function(D,O){return D>>>=0,O||_(D,2,this.length),this[D]|this[D+1]<<8},a.prototype.readUInt16BE=function(D,O){return D>>>=0,O||_(D,2,this.length),this[D]<<8|this[D+1]},a.prototype.readUInt32LE=function(D,O){return D>>>=0,O||_(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+16777216*this[D+3]},a.prototype.readUInt32BE=function(D,O){return D>>>=0,O||_(D,4,this.length),16777216*this[D]+(this[D+1]<<16|this[D+2]<<8|this[D+3])},a.prototype.readIntLE=function(D,O,G){D>>>=0,O>>>=0,G||_(D,O,this.length);for(var Z=this[D],ue=1,te=0;++te<O&&(ue*=256);)Z+=this[D+te]*ue;return Z>=(ue*=128)&&(Z-=Math.pow(2,8*O)),Z},a.prototype.readIntBE=function(D,O,G){D>>>=0,O>>>=0,G||_(D,O,this.length);for(var Z=O,ue=1,te=this[D+--Z];Z>0&&(ue*=256);)te+=this[D+--Z]*ue;return te>=(ue*=128)&&(te-=Math.pow(2,8*O)),te},a.prototype.readInt8=function(D,O){return D>>>=0,O||_(D,1,this.length),128&this[D]?-1*(255-this[D]+1):this[D]},a.prototype.readInt16LE=function(D,O){D>>>=0,O||_(D,2,this.length);var G=this[D]|this[D+1]<<8;return 32768&G?4294901760|G:G},a.prototype.readInt16BE=function(D,O){D>>>=0,O||_(D,2,this.length);var G=this[D+1]|this[D]<<8;return 32768&G?4294901760|G:G},a.prototype.readInt32LE=function(D,O){return D>>>=0,O||_(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},a.prototype.readInt32BE=function(D,O){return D>>>=0,O||_(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},a.prototype.readFloatLE=function(D,O){return D>>>=0,O||_(D,4,this.length),l.read(this,D,!0,23,4)},a.prototype.readFloatBE=function(D,O){return D>>>=0,O||_(D,4,this.length),l.read(this,D,!1,23,4)},a.prototype.readDoubleLE=function(D,O){return D>>>=0,O||_(D,8,this.length),l.read(this,D,!0,52,8)},a.prototype.readDoubleBE=function(D,O){return D>>>=0,O||_(D,8,this.length),l.read(this,D,!1,52,8)},a.prototype.writeUIntLE=function(D,O,G,Z){D=+D,O>>>=0,G>>>=0,Z||x(this,D,O,G,Math.pow(2,8*G)-1,0);var ue=1,te=0;for(this[O]=255&D;++te<G&&(ue*=256);)this[O+te]=D/ue&255;return O+G},a.prototype.writeUIntBE=function(D,O,G,Z){D=+D,O>>>=0,G>>>=0,Z||x(this,D,O,G,Math.pow(2,8*G)-1,0);var ue=G-1,te=1;for(this[O+ue]=255&D;--ue>=0&&(te*=256);)this[O+ue]=D/te&255;return O+G},a.prototype.writeUInt8=function(D,O,G){return D=+D,O>>>=0,G||x(this,D,O,1,255,0),this[O]=255&D,O+1},a.prototype.writeUInt16LE=function(D,O,G){return D=+D,O>>>=0,G||x(this,D,O,2,65535,0),this[O]=255&D,this[O+1]=D>>>8,O+2},a.prototype.writeUInt16BE=function(D,O,G){return D=+D,O>>>=0,G||x(this,D,O,2,65535,0),this[O]=D>>>8,this[O+1]=255&D,O+2},a.prototype.writeUInt32LE=function(D,O,G){return D=+D,O>>>=0,G||x(this,D,O,4,4294967295,0),this[O+3]=D>>>24,this[O+2]=D>>>16,this[O+1]=D>>>8,this[O]=255&D,O+4},a.prototype.writeUInt32BE=function(D,O,G){return D=+D,O>>>=0,G||x(this,D,O,4,4294967295,0),this[O]=D>>>24,this[O+1]=D>>>16,this[O+2]=D>>>8,this[O+3]=255&D,O+4},a.prototype.writeIntLE=function(D,O,G,Z){if(D=+D,O>>>=0,!Z){var ue=Math.pow(2,8*G-1);x(this,D,O,G,ue-1,-ue)}var te=0,oe=1,re=0;for(this[O]=255&D;++te<G&&(oe*=256);)D<0&&re===0&&this[O+te-1]!==0&&(re=1),this[O+te]=(D/oe>>0)-re&255;return O+G},a.prototype.writeIntBE=function(D,O,G,Z){if(D=+D,O>>>=0,!Z){var ue=Math.pow(2,8*G-1);x(this,D,O,G,ue-1,-ue)}var te=G-1,oe=1,re=0;for(this[O+te]=255&D;--te>=0&&(oe*=256);)D<0&&re===0&&this[O+te+1]!==0&&(re=1),this[O+te]=(D/oe>>0)-re&255;return O+G},a.prototype.writeInt8=function(D,O,G){return D=+D,O>>>=0,G||x(this,D,O,1,127,-128),D<0&&(D=255+D+1),this[O]=255&D,O+1},a.prototype.writeInt16LE=function(D,O,G){return D=+D,O>>>=0,G||x(this,D,O,2,32767,-32768),this[O]=255&D,this[O+1]=D>>>8,O+2},a.prototype.writeInt16BE=function(D,O,G){return D=+D,O>>>=0,G||x(this,D,O,2,32767,-32768),this[O]=D>>>8,this[O+1]=255&D,O+2},a.prototype.writeInt32LE=function(D,O,G){return D=+D,O>>>=0,G||x(this,D,O,4,2147483647,-2147483648),this[O]=255&D,this[O+1]=D>>>8,this[O+2]=D>>>16,this[O+3]=D>>>24,O+4},a.prototype.writeInt32BE=function(D,O,G){return D=+D,O>>>=0,G||x(this,D,O,4,2147483647,-2147483648),D<0&&(D=4294967295+D+1),this[O]=D>>>24,this[O+1]=D>>>16,this[O+2]=D>>>8,this[O+3]=255&D,O+4},a.prototype.writeFloatLE=function(D,O,G){return S(this,D,O,!0,G)},a.prototype.writeFloatBE=function(D,O,G){return S(this,D,O,!1,G)},a.prototype.writeDoubleLE=function(D,O,G){return I(this,D,O,!0,G)},a.prototype.writeDoubleBE=function(D,O,G){return I(this,D,O,!1,G)},a.prototype.copy=function(D,O,G,Z){if(!a.isBuffer(D))throw new TypeError("argument should be a Buffer");if(G||(G=0),Z||Z===0||(Z=this.length),O>=D.length&&(O=D.length),O||(O=0),Z>0&&Z<G&&(Z=G),Z===G||D.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("sourceEnd out of bounds");Z>this.length&&(Z=this.length),D.length-O<Z-G&&(Z=D.length-O+G);var ue=Z-G;if(this===D&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,G,Z);else if(this===D&&G<O&&O<Z)for(var te=ue-1;te>=0;--te)D[te+O]=this[te+G];else Uint8Array.prototype.set.call(D,this.subarray(G,Z),O);return ue},a.prototype.fill=function(D,O,G,Z){if(typeof D=="string"){if(typeof O=="string"?(Z=O,O=0,G=this.length):typeof G=="string"&&(Z=G,G=this.length),Z!==void 0&&typeof Z!="string")throw new TypeError("encoding must be a string");if(typeof Z=="string"&&!a.isEncoding(Z))throw new TypeError("Unknown encoding: "+Z);if(D.length===1){var ue=D.charCodeAt(0);(Z==="utf8"&&ue<128||Z==="latin1")&&(D=ue)}}else typeof D=="number"&&(D&=255);if(O<0||this.length<O||this.length<G)throw new RangeError("Out of range index");if(G<=O)return this;var te;if(O>>>=0,G=G===void 0?this.length:G>>>0,D||(D=0),typeof D=="number")for(te=O;te<G;++te)this[te]=D;else{var oe=a.isBuffer(D)?D:a.from(D,Z),re=oe.length;if(re===0)throw new TypeError('The value "'+D+'" is invalid for argument "value"');for(te=0;te<G-O;++te)this[te+O]=oe[te%re]}return this};var z=/[^+/0-9A-Za-z-_]/g;function A(D){return D<16?"0"+D.toString(16):D.toString(16)}function H(D,O){var G;O=O||1/0;for(var Z=D.length,ue=null,te=[],oe=0;oe<Z;++oe){if((G=D.charCodeAt(oe))>55295&&G<57344){if(!ue){if(G>56319){(O-=3)>-1&&te.push(239,191,189);continue}if(oe+1===Z){(O-=3)>-1&&te.push(239,191,189);continue}ue=G;continue}if(G<56320){(O-=3)>-1&&te.push(239,191,189),ue=G;continue}G=65536+(ue-55296<<10|G-56320)}else ue&&(O-=3)>-1&&te.push(239,191,189);if(ue=null,G<128){if((O-=1)<0)break;te.push(G)}else if(G<2048){if((O-=2)<0)break;te.push(G>>6|192,63&G|128)}else if(G<65536){if((O-=3)<0)break;te.push(G>>12|224,G>>6&63|128,63&G|128)}else{if(!(G<1114112))throw new Error("Invalid code point");if((O-=4)<0)break;te.push(G>>18|240,G>>12&63|128,G>>6&63|128,63&G|128)}}return te}function K(D){return o.toByteArray(function(O){if((O=(O=O.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;O.length%4!=0;)O+="=";return O}(D))}function J(D,O,G,Z){for(var ue=0;ue<Z&&!(ue+G>=O.length||ue>=D.length);++ue)O[ue+G]=D[ue];return ue}function V(D,O){return D instanceof O||D!=null&&D.constructor!=null&&D.constructor.name!=null&&D.constructor.name===O.name}function X(D){return D!=D}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(t,n,i){var s=t("safe-buffer").Buffer,o=t("stream").Transform,l=t("string_decoder").StringDecoder;function c(a){o.call(this),this.hashMode=typeof a=="string",this.hashMode?this[a]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}t("inherits")(c,o),c.prototype.update=function(a,u,d){typeof a=="string"&&(a=s.from(a,u));var f=this._update(a);return this.hashMode?this:(d&&(f=this._toString(f,d)),f)},c.prototype.setAutoPadding=function(){},c.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},c.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},c.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},c.prototype._transform=function(a,u,d){var f;try{this.hashMode?this._update(a):this.push(this._update(a))}catch(h){f=h}finally{d(f)}},c.prototype._flush=function(a){var u;try{this.push(this.__final())}catch(d){u=d}a(u)},c.prototype._finalOrDigest=function(a){var u=this.__final()||s.alloc(0);return a&&(u=this._toString(u,a,!0)),u},c.prototype._toString=function(a,u,d){if(this._decoder||(this._decoder=new l(u),this._encoding=u),this._encoding!==u)throw new Error("can't switch encodings");var f=this._decoder.write(a);return d&&(f+=this._decoder.end()),f},n.exports=c},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(t,n,i){var s=t("../internals/is-callable"),o=t("../internals/try-to-string"),l=TypeError;n.exports=function(c){if(s(c))return c;throw new l(o(c)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(t,n,i){var s=t("../internals/is-constructor"),o=t("../internals/try-to-string"),l=TypeError;n.exports=function(c){if(s(c))return c;throw new l(o(c)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(t,n,i){var s=t("../internals/is-callable"),o=String,l=TypeError;n.exports=function(c){if(typeof c=="object"||s(c))return c;throw new l("Can't set "+o(c)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(t,n,i){var s=t("../internals/well-known-symbol"),o=t("../internals/object-create"),l=t("../internals/object-define-property").f,c=s("unscopables"),a=Array.prototype;a[c]===void 0&&l(a,c,{configurable:!0,value:o(null)}),n.exports=function(u){a[c][u]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(t,n,i){var s=t("../internals/object-is-prototype-of"),o=TypeError;n.exports=function(l,c){if(s(c,l))return l;throw new o("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(t,n,i){var s=t("../internals/is-object"),o=String,l=TypeError;n.exports=function(c){if(s(c))return c;throw new l(o(c)+" is not an object")}},{"../internals/is-object":289}],228:[function(t,n,i){var s=t("../internals/to-indexed-object"),o=t("../internals/to-absolute-index"),l=t("../internals/length-of-array-like"),c=function(a){return function(u,d,f){var h,m=s(u),g=l(m),p=o(f,g);if(a&&d!=d){for(;g>p;)if((h=m[p++])!=h)return!0}else for(;g>p;p++)if((a||p in m)&&m[p]===d)return a||p||0;return!a&&-1}};n.exports={includes:c(!0),indexOf:c(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(t,n,i){var s=t("../internals/function-bind-context"),o=t("../internals/function-uncurry-this"),l=t("../internals/indexed-object"),c=t("../internals/to-object"),a=t("../internals/length-of-array-like"),u=t("../internals/array-species-create"),d=o([].push),f=function(h){var m=h===1,g=h===2,p=h===3,y=h===4,b=h===6,v=h===7,E=h===5||b;return function(M,W,$,N){for(var j,F,P=c(M),L=l(P),k=s(W,$),R=a(L),C=0,_=N||u,x=m?_(M,R):g||v?_(M,0):void 0;R>C;C++)if((E||C in L)&&(F=k(j=L[C],C,P),h))if(m)x[C]=F;else if(F)switch(h){case 3:return!0;case 5:return j;case 6:return C;case 2:d(x,j)}else switch(h){case 4:return!1;case 7:d(x,j)}return b?-1:p||y?y:x}};n.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(t,n,i){var s=t("../internals/to-absolute-index"),o=t("../internals/length-of-array-like"),l=t("../internals/create-property"),c=Array,a=Math.max;n.exports=function(u,d,f){for(var h=o(u),m=s(d,h),g=s(f===void 0?h:f,h),p=c(a(g-m,0)),y=0;m<g;m++,y++)l(p,y,u[m]);return p.length=y,p}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(t,n,i){var s=t("../internals/function-uncurry-this");n.exports=s([].slice)},{"../internals/function-uncurry-this":268}],232:[function(t,n,i){var s=t("../internals/is-array"),o=t("../internals/is-constructor"),l=t("../internals/is-object"),c=t("../internals/well-known-symbol")("species"),a=Array;n.exports=function(u){var d;return s(u)&&(d=u.constructor,(o(d)&&(d===a||s(d.prototype))||l(d)&&(d=d[c])===null)&&(d=void 0)),d===void 0?a:d}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(t,n,i){var s=t("../internals/array-species-constructor");n.exports=function(o,l){return new(s(o))(l===0?0:l)}},{"../internals/array-species-constructor":232}],234:[function(t,n,i){var s=t("../internals/well-known-symbol")("iterator"),o=!1;try{var l=0,c={next:function(){return{done:!!l++}},return:function(){o=!0}};c[s]=function(){return this},Array.from(c,function(){throw 2})}catch{}n.exports=function(a,u){try{if(!u&&!o)return!1}catch{return!1}var d=!1;try{var f={};f[s]=function(){return{next:function(){return{done:d=!0}}}},a(f)}catch{}return d}},{"../internals/well-known-symbol":357}],235:[function(t,n,i){var s=t("../internals/function-uncurry-this"),o=s({}.toString),l=s("".slice);n.exports=function(c){return l(o(c),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(t,n,i){var s=t("../internals/to-string-tag-support"),o=t("../internals/is-callable"),l=t("../internals/classof-raw"),c=t("../internals/well-known-symbol")("toStringTag"),a=Object,u=l(function(){return arguments}())==="Arguments";n.exports=s?l:function(d){var f,h,m;return d===void 0?"Undefined":d===null?"Null":typeof(h=function(g,p){try{return g[p]}catch{}}(f=a(d),c))=="string"?h:u?l(f):(m=l(f))==="Object"&&o(f.callee)?"Arguments":m}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(t,n,i){var s=t("../internals/has-own-property"),o=t("../internals/own-keys"),l=t("../internals/object-get-own-property-descriptor"),c=t("../internals/object-define-property");n.exports=function(a,u,d){for(var f=o(u),h=c.f,m=l.f,g=0;g<f.length;g++){var p=f[g];s(a,p)||d&&s(d,p)||h(a,p,m(u,p))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(t,n,i){var s=t("../internals/well-known-symbol")("match");n.exports=function(o){var l=/./;try{"/./"[o](l)}catch{try{return l[s]=!1,"/./"[o](l)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(t,n,i){var s=t("../internals/fails");n.exports=!s(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},{"../internals/fails":260}],240:[function(t,n,i){n.exports=function(s,o){return{value:s,done:o}}},{}],241:[function(t,n,i){var s=t("../internals/descriptors"),o=t("../internals/object-define-property"),l=t("../internals/create-property-descriptor");n.exports=s?function(c,a,u){return o.f(c,a,l(1,u))}:function(c,a,u){return c[a]=u,c}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(t,n,i){n.exports=function(s,o){return{enumerable:!(1&s),configurable:!(2&s),writable:!(4&s),value:o}}},{}],243:[function(t,n,i){var s=t("../internals/to-property-key"),o=t("../internals/object-define-property"),l=t("../internals/create-property-descriptor");n.exports=function(c,a,u){var d=s(a);d in c?o.f(c,d,l(0,u)):c[d]=u}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(t,n,i){var s=t("../internals/make-built-in"),o=t("../internals/object-define-property");n.exports=function(l,c,a){return a.get&&s(a.get,c,{getter:!0}),a.set&&s(a.set,c,{setter:!0}),o.f(l,c,a)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(t,n,i){var s=t("../internals/is-callable"),o=t("../internals/object-define-property"),l=t("../internals/make-built-in"),c=t("../internals/define-global-property");n.exports=function(a,u,d,f){f||(f={});var h=f.enumerable,m=f.name!==void 0?f.name:u;if(s(d)&&l(d,m,f),f.global)h?a[u]=d:c(u,d);else{try{f.unsafe?a[u]&&(h=!0):delete a[u]}catch{}h?a[u]=d:o.f(a,u,{value:d,enumerable:!1,configurable:!f.nonConfigurable,writable:!f.nonWritable})}return a}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(t,n,i){var s=t("../internals/global"),o=Object.defineProperty;n.exports=function(l,c){try{o(s,l,{value:c,configurable:!0,writable:!0})}catch{s[l]=c}return c}},{"../internals/global":274}],247:[function(t,n,i){var s=t("../internals/fails");n.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},{"../internals/fails":260}],248:[function(t,n,i){var s=typeof document=="object"&&document.all,o=s===void 0&&s!==void 0;n.exports={all:s,IS_HTMLDDA:o}},{}],249:[function(t,n,i){var s=t("../internals/global"),o=t("../internals/is-object"),l=s.document,c=o(l)&&o(l.createElement);n.exports=function(a){return c?l.createElement(a):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(t,n,i){var s=t("../internals/engine-is-deno"),o=t("../internals/engine-is-node");n.exports=!s&&!o&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(t,n,i){n.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(t,n,i){var s=t("../internals/engine-user-agent");n.exports=/ipad|iphone|ipod/i.test(s)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(t,n,i){var s=t("../internals/engine-user-agent");n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(s)},{"../internals/engine-user-agent":256}],254:[function(t,n,i){var s=t("../internals/global"),o=t("../internals/classof-raw");n.exports=o(s.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(t,n,i){var s=t("../internals/engine-user-agent");n.exports=/web0s(?!.*chrome)/i.test(s)},{"../internals/engine-user-agent":256}],256:[function(t,n,i){n.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(t,n,i){var s,o,l=t("../internals/global"),c=t("../internals/engine-user-agent"),a=l.process,u=l.Deno,d=a&&a.versions||u&&u.version,f=d&&d.v8;f&&(o=(s=f.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!o&&c&&(!(s=c.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=c.match(/Chrome\/(\d+)/))&&(o=+s[1]),n.exports=o},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(t,n,i){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(t,n,i){var s=t("../internals/global"),o=t("../internals/object-get-own-property-descriptor").f,l=t("../internals/create-non-enumerable-property"),c=t("../internals/define-built-in"),a=t("../internals/define-global-property"),u=t("../internals/copy-constructor-properties"),d=t("../internals/is-forced");n.exports=function(f,h){var m,g,p,y,b,v=f.target,E=f.global,M=f.stat;if(m=E?s:M?s[v]||a(v,{}):(s[v]||{}).prototype)for(g in h){if(y=h[g],p=f.dontCallGetSet?(b=o(m,g))&&b.value:m[g],!d(E?g:v+(M?".":"#")+g,f.forced)&&p!==void 0){if(typeof y==typeof p)continue;u(y,p)}(f.sham||p&&p.sham)&&l(y,"sham",!0),c(m,g,y,f)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(t,n,i){n.exports=function(s){try{return!!s()}catch{return!0}}},{}],261:[function(t,n,i){var s=t("../internals/function-bind-native"),o=Function.prototype,l=o.apply,c=o.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(s?c.bind(l):function(){return c.apply(l,arguments)})},{"../internals/function-bind-native":263}],262:[function(t,n,i){var s=t("../internals/function-uncurry-this-clause"),o=t("../internals/a-callable"),l=t("../internals/function-bind-native"),c=s(s.bind);n.exports=function(a,u){return o(a),u===void 0?a:l?c(a,u):function(){return a.apply(u,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(t,n,i){var s=t("../internals/fails");n.exports=!s(function(){var o=(function(){}).bind();return typeof o!="function"||o.hasOwnProperty("prototype")})},{"../internals/fails":260}],264:[function(t,n,i){var s=t("../internals/function-bind-native"),o=Function.prototype.call;n.exports=s?o.bind(o):function(){return o.apply(o,arguments)}},{"../internals/function-bind-native":263}],265:[function(t,n,i){var s=t("../internals/descriptors"),o=t("../internals/has-own-property"),l=Function.prototype,c=s&&Object.getOwnPropertyDescriptor,a=o(l,"name"),u=a&&(function(){}).name==="something",d=a&&(!s||s&&c(l,"name").configurable);n.exports={EXISTS:a,PROPER:u,CONFIGURABLE:d}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(t,n,i){var s=t("../internals/function-uncurry-this"),o=t("../internals/a-callable");n.exports=function(l,c,a){try{return s(o(Object.getOwnPropertyDescriptor(l,c)[a]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(t,n,i){var s=t("../internals/classof-raw"),o=t("../internals/function-uncurry-this");n.exports=function(l){if(s(l)==="Function")return o(l)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(t,n,i){var s=t("../internals/function-bind-native"),o=Function.prototype,l=o.call,c=s&&o.bind.bind(l,l);n.exports=s?c:function(a){return function(){return l.apply(a,arguments)}}},{"../internals/function-bind-native":263}],269:[function(t,n,i){var s=t("../internals/global"),o=t("../internals/is-callable"),l=function(c){return o(c)?c:void 0};n.exports=function(c,a){return arguments.length<2?l(s[c]):s[c]&&s[c][a]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(t,n,i){var s=t("../internals/classof"),o=t("../internals/get-method"),l=t("../internals/is-null-or-undefined"),c=t("../internals/iterators"),a=t("../internals/well-known-symbol")("iterator");n.exports=function(u){if(!l(u))return o(u,a)||o(u,"@@iterator")||c[s(u)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(t,n,i){var s=t("../internals/function-call"),o=t("../internals/a-callable"),l=t("../internals/an-object"),c=t("../internals/try-to-string"),a=t("../internals/get-iterator-method"),u=TypeError;n.exports=function(d,f){var h=arguments.length<2?a(d):f;if(o(h))return l(s(h,d));throw new u(c(d)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(t,n,i){var s=t("../internals/function-uncurry-this"),o=t("../internals/is-array"),l=t("../internals/is-callable"),c=t("../internals/classof-raw"),a=t("../internals/to-string"),u=s([].push);n.exports=function(d){if(l(d))return d;if(o(d)){for(var f=d.length,h=[],m=0;m<f;m++){var g=d[m];typeof g=="string"?u(h,g):typeof g!="number"&&c(g)!=="Number"&&c(g)!=="String"||u(h,a(g))}var p=h.length,y=!0;return function(b,v){if(y)return y=!1,v;if(o(this))return v;for(var E=0;E<p;E++)if(h[E]===b)return v}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(t,n,i){var s=t("../internals/a-callable"),o=t("../internals/is-null-or-undefined");n.exports=function(l,c){var a=l[c];return o(a)?void 0:s(a)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(t,n,i){(function(s){(function(){var o=function(l){return l&&l.Math===Math&&l};n.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof s=="object"&&s)||function(){return this}()||this||Function("return this")()}).call(this)}).call(this,typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(t,n,i){var s=t("../internals/function-uncurry-this"),o=t("../internals/to-object"),l=s({}.hasOwnProperty);n.exports=Object.hasOwn||function(c,a){return l(o(c),a)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(t,n,i){n.exports={}},{}],277:[function(t,n,i){n.exports=function(s,o){try{arguments.length===1?console.error(s):console.error(s,o)}catch{}}},{}],278:[function(t,n,i){var s=t("../internals/get-built-in");n.exports=s("document","documentElement")},{"../internals/get-built-in":269}],279:[function(t,n,i){var s=t("../internals/descriptors"),o=t("../internals/fails"),l=t("../internals/document-create-element");n.exports=!s&&!o(function(){return Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a!==7})},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(t,n,i){var s=t("../internals/function-uncurry-this"),o=t("../internals/fails"),l=t("../internals/classof-raw"),c=Object,a=s("".split);n.exports=o(function(){return!c("z").propertyIsEnumerable(0)})?function(u){return l(u)==="String"?a(u,""):c(u)}:c},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(t,n,i){var s=t("../internals/function-uncurry-this"),o=t("../internals/is-callable"),l=t("../internals/shared-store"),c=s(Function.toString);o(l.inspectSource)||(l.inspectSource=function(a){return c(a)}),n.exports=l.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(t,n,i){var s,o,l,c=t("../internals/weak-map-basic-detection"),a=t("../internals/global"),u=t("../internals/is-object"),d=t("../internals/create-non-enumerable-property"),f=t("../internals/has-own-property"),h=t("../internals/shared-store"),m=t("../internals/shared-key"),g=t("../internals/hidden-keys"),p=a.TypeError,y=a.WeakMap;if(c||h.state){var b=h.state||(h.state=new y);b.get=b.get,b.has=b.has,b.set=b.set,s=function(E,M){if(b.has(E))throw new p("Object already initialized");return M.facade=E,b.set(E,M),M},o=function(E){return b.get(E)||{}},l=function(E){return b.has(E)}}else{var v=m("state");g[v]=!0,s=function(E,M){if(f(E,v))throw new p("Object already initialized");return M.facade=E,d(E,v,M),M},o=function(E){return f(E,v)?E[v]:{}},l=function(E){return f(E,v)}}n.exports={set:s,get:o,has:l,enforce:function(E){return l(E)?o(E):s(E,{})},getterFor:function(E){return function(M){var W;if(!u(M)||(W=o(M)).type!==E)throw new p("Incompatible receiver, "+E+" required");return W}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(t,n,i){var s=t("../internals/well-known-symbol"),o=t("../internals/iterators"),l=s("iterator"),c=Array.prototype;n.exports=function(a){return a!==void 0&&(o.Array===a||c[l]===a)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(t,n,i){var s=t("../internals/classof-raw");n.exports=Array.isArray||function(o){return s(o)==="Array"}},{"../internals/classof-raw":235}],285:[function(t,n,i){var s=t("../internals/document-all"),o=s.all;n.exports=s.IS_HTMLDDA?function(l){return typeof l=="function"||l===o}:function(l){return typeof l=="function"}},{"../internals/document-all":248}],286:[function(t,n,i){var s=t("../internals/function-uncurry-this"),o=t("../internals/fails"),l=t("../internals/is-callable"),c=t("../internals/classof"),a=t("../internals/get-built-in"),u=t("../internals/inspect-source"),d=function(){},f=[],h=a("Reflect","construct"),m=/^\s*(?:class|function)\b/,g=s(m.exec),p=!m.test(d),y=function(v){if(!l(v))return!1;try{return h(d,f,v),!0}catch{return!1}},b=function(v){if(!l(v))return!1;switch(c(v)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!g(m,u(v))}catch{return!0}};b.sham=!0,n.exports=!h||o(function(){var v;return y(y.call)||!y(Object)||!y(function(){v=!0})||v})?b:y},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(t,n,i){var s=t("../internals/fails"),o=t("../internals/is-callable"),l=/#|\.prototype\./,c=function(h,m){var g=u[a(h)];return g===f||g!==d&&(o(m)?s(m):!!m)},a=c.normalize=function(h){return String(h).replace(l,".").toLowerCase()},u=c.data={},d=c.NATIVE="N",f=c.POLYFILL="P";n.exports=c},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(t,n,i){n.exports=function(s){return s==null}},{}],289:[function(t,n,i){var s=t("../internals/is-callable"),o=t("../internals/document-all"),l=o.all;n.exports=o.IS_HTMLDDA?function(c){return typeof c=="object"?c!==null:s(c)||c===l}:function(c){return typeof c=="object"?c!==null:s(c)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(t,n,i){n.exports=!1},{}],291:[function(t,n,i){var s=t("../internals/is-object"),o=t("../internals/classof-raw"),l=t("../internals/well-known-symbol")("match");n.exports=function(c){var a;return s(c)&&((a=c[l])!==void 0?!!a:o(c)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(t,n,i){var s=t("../internals/get-built-in"),o=t("../internals/is-callable"),l=t("../internals/object-is-prototype-of"),c=t("../internals/use-symbol-as-uid"),a=Object;n.exports=c?function(u){return typeof u=="symbol"}:function(u){var d=s("Symbol");return o(d)&&l(d.prototype,a(u))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(t,n,i){var s=t("../internals/function-bind-context"),o=t("../internals/function-call"),l=t("../internals/an-object"),c=t("../internals/try-to-string"),a=t("../internals/is-array-iterator-method"),u=t("../internals/length-of-array-like"),d=t("../internals/object-is-prototype-of"),f=t("../internals/get-iterator"),h=t("../internals/get-iterator-method"),m=t("../internals/iterator-close"),g=TypeError,p=function(b,v){this.stopped=b,this.result=v},y=p.prototype;n.exports=function(b,v,E){var M,W,$,N,j,F,P,L=E&&E.that,k=!(!E||!E.AS_ENTRIES),R=!(!E||!E.IS_RECORD),C=!(!E||!E.IS_ITERATOR),_=!(!E||!E.INTERRUPTED),x=s(v,L),w=function(I){return M&&m(M,"normal",I),new p(!0,I)},S=function(I){return k?(l(I),_?x(I[0],I[1],w):x(I[0],I[1])):_?x(I,w):x(I)};if(R)M=b.iterator;else if(C)M=b;else{if(!(W=h(b)))throw new g(c(b)+" is not iterable");if(a(W)){for($=0,N=u(b);N>$;$++)if((j=S(b[$]))&&d(y,j))return j;return new p(!1)}M=f(b,W)}for(F=R?b.next:M.next;!(P=o(F,M)).done;){try{j=S(P.value)}catch(I){m(M,"throw",I)}if(typeof j=="object"&&j&&d(y,j))return j}return new p(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(t,n,i){var s=t("../internals/function-call"),o=t("../internals/an-object"),l=t("../internals/get-method");n.exports=function(c,a,u){var d,f;o(c);try{if(!(d=l(c,"return"))){if(a==="throw")throw u;return u}d=s(d,c)}catch(h){f=!0,d=h}if(a==="throw")throw u;if(f)throw d;return o(d),u}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(t,n,i){var s=t("../internals/iterators-core").IteratorPrototype,o=t("../internals/object-create"),l=t("../internals/create-property-descriptor"),c=t("../internals/set-to-string-tag"),a=t("../internals/iterators"),u=function(){return this};n.exports=function(d,f,h,m){var g=f+" Iterator";return d.prototype=o(s,{next:l(+!m,h)}),c(d,g,!1,!0),a[g]=u,d}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/function-call"),l=t("../internals/is-pure"),c=t("../internals/function-name"),a=t("../internals/is-callable"),u=t("../internals/iterator-create-constructor"),d=t("../internals/object-get-prototype-of"),f=t("../internals/object-set-prototype-of"),h=t("../internals/set-to-string-tag"),m=t("../internals/create-non-enumerable-property"),g=t("../internals/define-built-in"),p=t("../internals/well-known-symbol"),y=t("../internals/iterators"),b=t("../internals/iterators-core"),v=c.PROPER,E=c.CONFIGURABLE,M=b.IteratorPrototype,W=b.BUGGY_SAFARI_ITERATORS,$=p("iterator"),N=function(){return this};n.exports=function(j,F,P,L,k,R,C){u(P,F,L);var _,x,w,S=function(V){if(V===k&&K)return K;if(!W&&V&&V in A)return A[V];switch(V){case"keys":case"values":case"entries":return function(){return new P(this,V)}}return function(){return new P(this)}},I=F+" Iterator",z=!1,A=j.prototype,H=A[$]||A["@@iterator"]||k&&A[k],K=!W&&H||S(k),J=F==="Array"&&A.entries||H;if(J&&(_=d(J.call(new j)))!==Object.prototype&&_.next&&(l||d(_)===M||(f?f(_,M):a(_[$])||g(_,$,N)),h(_,I,!0,!0),l&&(y[I]=N)),v&&k==="values"&&H&&H.name!=="values"&&(!l&&E?m(A,"name","values"):(z=!0,K=function(){return o(H,this)})),k)if(x={values:S("values"),keys:R?K:S("keys"),entries:S("entries")},C)for(w in x)(W||z||!(w in A))&&g(A,w,x[w]);else s({target:F,proto:!0,forced:W||z},x);return l&&!C||A[$]===K||g(A,$,K,{name:k}),y[F]=K,x}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(t,n,i){var s,o,l,c=t("../internals/fails"),a=t("../internals/is-callable"),u=t("../internals/is-object"),d=t("../internals/object-create"),f=t("../internals/object-get-prototype-of"),h=t("../internals/define-built-in"),m=t("../internals/well-known-symbol"),g=t("../internals/is-pure"),p=m("iterator"),y=!1;[].keys&&("next"in(l=[].keys())?(o=f(f(l)))!==Object.prototype&&(s=o):y=!0),!u(s)||c(function(){var b={};return s[p].call(b)!==b})?s={}:g&&(s=d(s)),a(s[p])||h(s,p,function(){return this}),n.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:y}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(t,n,i){arguments[4][276][0].apply(i,arguments)},{dup:276}],299:[function(t,n,i){var s=t("../internals/to-length");n.exports=function(o){return s(o.length)}},{"../internals/to-length":343}],300:[function(t,n,i){var s=t("../internals/function-uncurry-this"),o=t("../internals/fails"),l=t("../internals/is-callable"),c=t("../internals/has-own-property"),a=t("../internals/descriptors"),u=t("../internals/function-name").CONFIGURABLE,d=t("../internals/inspect-source"),f=t("../internals/internal-state"),h=f.enforce,m=f.get,g=String,p=Object.defineProperty,y=s("".slice),b=s("".replace),v=s([].join),E=a&&!o(function(){return p(function(){},"length",{value:8}).length!==8}),M=String(String).split("String"),W=n.exports=function($,N,j){y(g(N),0,7)==="Symbol("&&(N="["+b(g(N),/^Symbol\(([^)]*)\)/,"$1")+"]"),j&&j.getter&&(N="get "+N),j&&j.setter&&(N="set "+N),(!c($,"name")||u&&$.name!==N)&&(a?p($,"name",{value:N,configurable:!0}):$.name=N),E&&j&&c(j,"arity")&&$.length!==j.arity&&p($,"length",{value:j.arity});try{j&&c(j,"constructor")&&j.constructor?a&&p($,"prototype",{writable:!1}):$.prototype&&($.prototype=void 0)}catch{}var F=h($);return c(F,"source")||(F.source=v(M,typeof N=="string"?N:"")),$};Function.prototype.toString=W(function(){return l(this)&&m(this).source||d(this)},"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(t,n,i){var s=Math.ceil,o=Math.floor;n.exports=Math.trunc||function(l){var c=+l;return(c>0?o:s)(c)}},{}],302:[function(t,n,i){var s,o,l,c,a,u=t("../internals/global"),d=t("../internals/function-bind-context"),f=t("../internals/object-get-own-property-descriptor").f,h=t("../internals/task").set,m=t("../internals/queue"),g=t("../internals/engine-is-ios"),p=t("../internals/engine-is-ios-pebble"),y=t("../internals/engine-is-webos-webkit"),b=t("../internals/engine-is-node"),v=u.MutationObserver||u.WebKitMutationObserver,E=u.document,M=u.process,W=u.Promise,$=f(u,"queueMicrotask"),N=$&&$.value;if(!N){var j=new m,F=function(){var P,L;for(b&&(P=M.domain)&&P.exit();L=j.get();)try{L()}catch(k){throw j.head&&s(),k}P&&P.enter()};g||b||y||!v||!E?!p&&W&&W.resolve?((c=W.resolve(void 0)).constructor=W,a=d(c.then,c),s=function(){a(F)}):b?s=function(){M.nextTick(F)}:(h=d(h,u),s=function(){h(F)}):(o=!0,l=E.createTextNode(""),new v(F).observe(l,{characterData:!0}),s=function(){l.data=o=!o}),N=function(P){j.head||s(),j.add(P)}}n.exports=N},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(t,n,i){var s=t("../internals/a-callable"),o=TypeError,l=function(c){var a,u;this.promise=new c(function(d,f){if(a!==void 0||u!==void 0)throw new o("Bad Promise constructor");a=d,u=f}),this.resolve=s(a),this.reject=s(u)};n.exports.f=function(c){return new l(c)}},{"../internals/a-callable":222}],304:[function(t,n,i){var s=t("../internals/is-regexp"),o=TypeError;n.exports=function(l){if(s(l))throw new o("The method doesn't accept regular expressions");return l}},{"../internals/is-regexp":291}],305:[function(t,n,i){var s=t("../internals/descriptors"),o=t("../internals/function-uncurry-this"),l=t("../internals/function-call"),c=t("../internals/fails"),a=t("../internals/object-keys"),u=t("../internals/object-get-own-property-symbols"),d=t("../internals/object-property-is-enumerable"),f=t("../internals/to-object"),h=t("../internals/indexed-object"),m=Object.assign,g=Object.defineProperty,p=o([].concat);n.exports=!m||c(function(){if(s&&m({b:1},m(g({},"a",{enumerable:!0,get:function(){g(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var y={},b={},v=Symbol("assign detection");return y[v]=7,"abcdefghijklmnopqrst".split("").forEach(function(E){b[E]=E}),m({},y)[v]!==7||a(m({},b)).join("")!=="abcdefghijklmnopqrst"})?function(y,b){for(var v=f(y),E=arguments.length,M=1,W=u.f,$=d.f;E>M;)for(var N,j=h(arguments[M++]),F=W?p(a(j),W(j)):a(j),P=F.length,L=0;P>L;)N=F[L++],s&&!l($,j,N)||(v[N]=j[N]);return v}:m},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(t,n,i){var s,o=t("../internals/an-object"),l=t("../internals/object-define-properties"),c=t("../internals/enum-bug-keys"),a=t("../internals/hidden-keys"),u=t("../internals/html"),d=t("../internals/document-create-element"),f=t("../internals/shared-key"),h=f("IE_PROTO"),m=function(){},g=function(b){return"<script>"+b+"<\/script>"},p=function(b){b.write(g("")),b.close();var v=b.parentWindow.Object;return b=null,v},y=function(){try{s=new ActiveXObject("htmlfile")}catch{}var b,v;y=typeof document<"u"?document.domain&&s?p(s):((v=d("iframe")).style.display="none",u.appendChild(v),v.src="javascript:",(b=v.contentWindow.document).open(),b.write(g("document.F=Object")),b.close(),b.F):p(s);for(var E=c.length;E--;)delete y.prototype[c[E]];return y()};a[h]=!0,n.exports=Object.create||function(b,v){var E;return b!==null?(m.prototype=o(b),E=new m,m.prototype=null,E[h]=b):E=y(),v===void 0?E:l.f(E,v)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(t,n,i){var s=t("../internals/descriptors"),o=t("../internals/v8-prototype-define-bug"),l=t("../internals/object-define-property"),c=t("../internals/an-object"),a=t("../internals/to-indexed-object"),u=t("../internals/object-keys");i.f=s&&!o?Object.defineProperties:function(d,f){c(d);for(var h,m=a(f),g=u(f),p=g.length,y=0;p>y;)l.f(d,h=g[y++],m[h]);return d}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(t,n,i){var s=t("../internals/descriptors"),o=t("../internals/ie8-dom-define"),l=t("../internals/v8-prototype-define-bug"),c=t("../internals/an-object"),a=t("../internals/to-property-key"),u=TypeError,d=Object.defineProperty,f=Object.getOwnPropertyDescriptor;i.f=s?l?function(h,m,g){if(c(h),m=a(m),c(g),typeof h=="function"&&m==="prototype"&&"value"in g&&"writable"in g&&!g.writable){var p=f(h,m);p&&p.writable&&(h[m]=g.value,g={configurable:"configurable"in g?g.configurable:p.configurable,enumerable:"enumerable"in g?g.enumerable:p.enumerable,writable:!1})}return d(h,m,g)}:d:function(h,m,g){if(c(h),m=a(m),c(g),o)try{return d(h,m,g)}catch{}if("get"in g||"set"in g)throw new u("Accessors not supported");return"value"in g&&(h[m]=g.value),h}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(t,n,i){var s=t("../internals/descriptors"),o=t("../internals/function-call"),l=t("../internals/object-property-is-enumerable"),c=t("../internals/create-property-descriptor"),a=t("../internals/to-indexed-object"),u=t("../internals/to-property-key"),d=t("../internals/has-own-property"),f=t("../internals/ie8-dom-define"),h=Object.getOwnPropertyDescriptor;i.f=s?h:function(m,g){if(m=a(m),g=u(g),f)try{return h(m,g)}catch{}if(d(m,g))return c(!o(l.f,m,g),m[g])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(t,n,i){var s=t("../internals/classof-raw"),o=t("../internals/to-indexed-object"),l=t("../internals/object-get-own-property-names").f,c=t("../internals/array-slice-simple"),a=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(u){return a&&s(u)==="Window"?function(d){try{return l(d)}catch{return c(a)}}(u):l(o(u))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(t,n,i){var s=t("../internals/object-keys-internal"),o=t("../internals/enum-bug-keys").concat("length","prototype");i.f=Object.getOwnPropertyNames||function(l){return s(l,o)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(t,n,i){i.f=Object.getOwnPropertySymbols},{}],313:[function(t,n,i){var s=t("../internals/has-own-property"),o=t("../internals/is-callable"),l=t("../internals/to-object"),c=t("../internals/shared-key"),a=t("../internals/correct-prototype-getter"),u=c("IE_PROTO"),d=Object,f=d.prototype;n.exports=a?d.getPrototypeOf:function(h){var m=l(h);if(s(m,u))return m[u];var g=m.constructor;return o(g)&&m instanceof g?g.prototype:m instanceof d?f:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(t,n,i){var s=t("../internals/function-uncurry-this");n.exports=s({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(t,n,i){var s=t("../internals/function-uncurry-this"),o=t("../internals/has-own-property"),l=t("../internals/to-indexed-object"),c=t("../internals/array-includes").indexOf,a=t("../internals/hidden-keys"),u=s([].push);n.exports=function(d,f){var h,m=l(d),g=0,p=[];for(h in m)!o(a,h)&&o(m,h)&&u(p,h);for(;f.length>g;)o(m,h=f[g++])&&(~c(p,h)||u(p,h));return p}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(t,n,i){var s=t("../internals/object-keys-internal"),o=t("../internals/enum-bug-keys");n.exports=Object.keys||function(l){return s(l,o)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(t,n,i){var s={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,l=o&&!s.call({1:2},1);i.f=l?function(c){var a=o(this,c);return!!a&&a.enumerable}:s},{}],318:[function(t,n,i){var s=t("../internals/function-uncurry-this-accessor"),o=t("../internals/an-object"),l=t("../internals/a-possible-prototype");n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c,a=!1,u={};try{(c=s(Object.prototype,"__proto__","set"))(u,[]),a=u instanceof Array}catch{}return function(d,f){return o(d),l(f),a?c(d,f):d.__proto__=f,d}}():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(t,n,i){var s=t("../internals/descriptors"),o=t("../internals/fails"),l=t("../internals/function-uncurry-this"),c=t("../internals/object-get-prototype-of"),a=t("../internals/object-keys"),u=t("../internals/to-indexed-object"),d=l(t("../internals/object-property-is-enumerable").f),f=l([].push),h=s&&o(function(){var g=Object.create(null);return g[2]=2,!d(g,2)}),m=function(g){return function(p){for(var y,b=u(p),v=a(b),E=h&&c(b)===null,M=v.length,W=0,$=[];M>W;)y=v[W++],s&&!(E?y in b:d(b,y))||f($,g?[y,b[y]]:b[y]);return $}};n.exports={entries:m(!0),values:m(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(t,n,i){var s=t("../internals/function-call"),o=t("../internals/is-callable"),l=t("../internals/is-object"),c=TypeError;n.exports=function(a,u){var d,f;if(u==="string"&&o(d=a.toString)&&!l(f=s(d,a))||o(d=a.valueOf)&&!l(f=s(d,a))||u!=="string"&&o(d=a.toString)&&!l(f=s(d,a)))return f;throw new c("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(t,n,i){var s=t("../internals/get-built-in"),o=t("../internals/function-uncurry-this"),l=t("../internals/object-get-own-property-names"),c=t("../internals/object-get-own-property-symbols"),a=t("../internals/an-object"),u=o([].concat);n.exports=s("Reflect","ownKeys")||function(d){var f=l.f(a(d)),h=c.f;return h?u(f,h(d)):f}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(t,n,i){var s=t("../internals/global");n.exports=s},{"../internals/global":274}],323:[function(t,n,i){n.exports=function(s){try{return{error:!1,value:s()}}catch(o){return{error:!0,value:o}}}},{}],324:[function(t,n,i){var s=t("../internals/global"),o=t("../internals/promise-native-constructor"),l=t("../internals/is-callable"),c=t("../internals/is-forced"),a=t("../internals/inspect-source"),u=t("../internals/well-known-symbol"),d=t("../internals/engine-is-browser"),f=t("../internals/engine-is-deno"),h=t("../internals/is-pure"),m=t("../internals/engine-v8-version"),g=o&&o.prototype,p=u("species"),y=!1,b=l(s.PromiseRejectionEvent),v=c("Promise",function(){var E=a(o),M=E!==String(o);if(!M&&m===66||h&&(!g.catch||!g.finally))return!0;if(!m||m<51||!/native code/.test(E)){var W=new o(function(N){N(1)}),$=function(N){N(function(){},function(){})};if((W.constructor={})[p]=$,!(y=W.then(function(){})instanceof $))return!0}return!M&&(d||f)&&!b});n.exports={CONSTRUCTOR:v,REJECTION_EVENT:b,SUBCLASSING:y}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(t,n,i){var s=t("../internals/global");n.exports=s.Promise},{"../internals/global":274}],326:[function(t,n,i){var s=t("../internals/an-object"),o=t("../internals/is-object"),l=t("../internals/new-promise-capability");n.exports=function(c,a){if(s(c),o(a)&&a.constructor===c)return a;var u=l.f(c);return(0,u.resolve)(a),u.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(t,n,i){var s=t("../internals/promise-native-constructor"),o=t("../internals/check-correctness-of-iteration"),l=t("../internals/promise-constructor-detection").CONSTRUCTOR;n.exports=l||!o(function(c){s.all(c).then(void 0,function(){})})},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(t,n,i){var s=function(){this.head=null,this.tail=null};s.prototype={add:function(o){var l={item:o,next:null},c=this.tail;c?c.next=l:this.head=l,this.tail=l},get:function(){var o=this.head;if(o)return(this.head=o.next)===null&&(this.tail=null),o.item}},n.exports=s},{}],329:[function(t,n,i){var s=t("../internals/is-null-or-undefined"),o=TypeError;n.exports=function(l){if(s(l))throw new o("Can't call method on "+l);return l}},{"../internals/is-null-or-undefined":288}],330:[function(t,n,i){var s=t("../internals/get-built-in"),o=t("../internals/define-built-in-accessor"),l=t("../internals/well-known-symbol"),c=t("../internals/descriptors"),a=l("species");n.exports=function(u){var d=s(u);c&&d&&!d[a]&&o(d,a,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(t,n,i){var s=t("../internals/object-define-property").f,o=t("../internals/has-own-property"),l=t("../internals/well-known-symbol")("toStringTag");n.exports=function(c,a,u){c&&!u&&(c=c.prototype),c&&!o(c,l)&&s(c,l,{configurable:!0,value:a})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(t,n,i){var s=t("../internals/shared"),o=t("../internals/uid"),l=s("keys");n.exports=function(c){return l[c]||(l[c]=o(c))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(t,n,i){var s=t("../internals/global"),o=t("../internals/define-global-property"),l=s["__core-js_shared__"]||o("__core-js_shared__",{});n.exports=l},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(t,n,i){var s=t("../internals/is-pure"),o=t("../internals/shared-store");(n.exports=function(l,c){return o[l]||(o[l]=c!==void 0?c:{})})("versions",[]).push({version:"3.33.0",mode:s?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(t,n,i){var s=t("../internals/an-object"),o=t("../internals/a-constructor"),l=t("../internals/is-null-or-undefined"),c=t("../internals/well-known-symbol")("species");n.exports=function(a,u){var d,f=s(a).constructor;return f===void 0||l(d=s(f)[c])?u:o(d)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(t,n,i){var s=t("../internals/engine-v8-version"),o=t("../internals/fails"),l=t("../internals/global").String;n.exports=!!Object.getOwnPropertySymbols&&!o(function(){var c=Symbol("symbol detection");return!l(c)||!(Object(c)instanceof Symbol)||!Symbol.sham&&s&&s<41})},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(t,n,i){var s=t("../internals/function-call"),o=t("../internals/get-built-in"),l=t("../internals/well-known-symbol"),c=t("../internals/define-built-in");n.exports=function(){var a=o("Symbol"),u=a&&a.prototype,d=u&&u.valueOf,f=l("toPrimitive");u&&!u[f]&&c(u,f,function(h){return s(d,this)},{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(t,n,i){var s=t("../internals/symbol-constructor-detection");n.exports=s&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(t,n,i){var s,o,l,c,a=t("../internals/global"),u=t("../internals/function-apply"),d=t("../internals/function-bind-context"),f=t("../internals/is-callable"),h=t("../internals/has-own-property"),m=t("../internals/fails"),g=t("../internals/html"),p=t("../internals/array-slice"),y=t("../internals/document-create-element"),b=t("../internals/validate-arguments-length"),v=t("../internals/engine-is-ios"),E=t("../internals/engine-is-node"),M=a.setImmediate,W=a.clearImmediate,$=a.process,N=a.Dispatch,j=a.Function,F=a.MessageChannel,P=a.String,L=0,k={};m(function(){s=a.location});var R=function(w){if(h(k,w)){var S=k[w];delete k[w],S()}},C=function(w){return function(){R(w)}},_=function(w){R(w.data)},x=function(w){a.postMessage(P(w),s.protocol+"//"+s.host)};M&&W||(M=function(w){b(arguments.length,1);var S=f(w)?w:j(w),I=p(arguments,1);return k[++L]=function(){u(S,void 0,I)},o(L),L},W=function(w){delete k[w]},E?o=function(w){$.nextTick(C(w))}:N&&N.now?o=function(w){N.now(C(w))}:F&&!v?(c=(l=new F).port2,l.port1.onmessage=_,o=d(c.postMessage,c)):a.addEventListener&&f(a.postMessage)&&!a.importScripts&&s&&s.protocol!=="file:"&&!m(x)?(o=x,a.addEventListener("message",_,!1)):o="onreadystatechange"in y("script")?function(w){g.appendChild(y("script")).onreadystatechange=function(){g.removeChild(this),R(w)}}:function(w){setTimeout(C(w),0)}),n.exports={set:M,clear:W}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(t,n,i){var s=t("../internals/to-integer-or-infinity"),o=Math.max,l=Math.min;n.exports=function(c,a){var u=s(c);return u<0?o(u+a,0):l(u,a)}},{"../internals/to-integer-or-infinity":342}],341:[function(t,n,i){var s=t("../internals/indexed-object"),o=t("../internals/require-object-coercible");n.exports=function(l){return s(o(l))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(t,n,i){var s=t("../internals/math-trunc");n.exports=function(o){var l=+o;return l!=l||l===0?0:s(l)}},{"../internals/math-trunc":301}],343:[function(t,n,i){var s=t("../internals/to-integer-or-infinity"),o=Math.min;n.exports=function(l){return l>0?o(s(l),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(t,n,i){var s=t("../internals/require-object-coercible"),o=Object;n.exports=function(l){return o(s(l))}},{"../internals/require-object-coercible":329}],345:[function(t,n,i){var s=t("../internals/function-call"),o=t("../internals/is-object"),l=t("../internals/is-symbol"),c=t("../internals/get-method"),a=t("../internals/ordinary-to-primitive"),u=t("../internals/well-known-symbol"),d=TypeError,f=u("toPrimitive");n.exports=function(h,m){if(!o(h)||l(h))return h;var g,p=c(h,f);if(p){if(m===void 0&&(m="default"),g=s(p,h,m),!o(g)||l(g))return g;throw new d("Can't convert object to primitive value")}return m===void 0&&(m="number"),a(h,m)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(t,n,i){var s=t("../internals/to-primitive"),o=t("../internals/is-symbol");n.exports=function(l){var c=s(l,"string");return o(c)?c:c+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(t,n,i){var s={};s[t("../internals/well-known-symbol")("toStringTag")]="z",n.exports=String(s)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(t,n,i){var s=t("../internals/classof"),o=String;n.exports=function(l){if(s(l)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return o(l)}},{"../internals/classof":236}],349:[function(t,n,i){var s=String;n.exports=function(o){try{return s(o)}catch{return"Object"}}},{}],350:[function(t,n,i){var s=t("../internals/function-uncurry-this"),o=0,l=Math.random(),c=s(1 .toString);n.exports=function(a){return"Symbol("+(a===void 0?"":a)+")_"+c(++o+l,36)}},{"../internals/function-uncurry-this":268}],351:[function(t,n,i){var s=t("../internals/symbol-constructor-detection");n.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(t,n,i){var s=t("../internals/descriptors"),o=t("../internals/fails");n.exports=s&&o(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(t,n,i){var s=TypeError;n.exports=function(o,l){if(o<l)throw new s("Not enough arguments");return o}},{}],354:[function(t,n,i){var s=t("../internals/global"),o=t("../internals/is-callable"),l=s.WeakMap;n.exports=o(l)&&/native code/.test(String(l))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(t,n,i){var s=t("../internals/path"),o=t("../internals/has-own-property"),l=t("../internals/well-known-symbol-wrapped"),c=t("../internals/object-define-property").f;n.exports=function(a){var u=s.Symbol||(s.Symbol={});o(u,a)||c(u,a,{value:l.f(a)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(t,n,i){var s=t("../internals/well-known-symbol");i.f=s},{"../internals/well-known-symbol":357}],357:[function(t,n,i){var s=t("../internals/global"),o=t("../internals/shared"),l=t("../internals/has-own-property"),c=t("../internals/uid"),a=t("../internals/symbol-constructor-detection"),u=t("../internals/use-symbol-as-uid"),d=s.Symbol,f=o("wks"),h=u?d.for||d:d&&d.withoutSetter||c;n.exports=function(m){return l(f,m)||(f[m]=a&&l(d,m)?d[m]:h("Symbol."+m)),f[m]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/array-iteration").findIndex,l=t("../internals/add-to-unscopables"),c=!0;"findIndex"in[]&&Array(1).findIndex(function(){c=!1}),s({target:"Array",proto:!0,forced:c},{findIndex:function(a){return o(this,a,arguments.length>1?arguments[1]:void 0)}}),l("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/array-iteration").find,l=t("../internals/add-to-unscopables"),c=!0;"find"in[]&&Array(1).find(function(){c=!1}),s({target:"Array",proto:!0,forced:c},{find:function(a){return o(this,a,arguments.length>1?arguments[1]:void 0)}}),l("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/array-includes").includes,l=t("../internals/fails"),c=t("../internals/add-to-unscopables");s({target:"Array",proto:!0,forced:l(function(){return!Array(1).includes()})},{includes:function(a){return o(this,a,arguments.length>1?arguments[1]:void 0)}}),c("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(t,n,i){var s=t("../internals/to-indexed-object"),o=t("../internals/add-to-unscopables"),l=t("../internals/iterators"),c=t("../internals/internal-state"),a=t("../internals/object-define-property").f,u=t("../internals/iterator-define"),d=t("../internals/create-iter-result-object"),f=t("../internals/is-pure"),h=t("../internals/descriptors"),m=c.set,g=c.getterFor("Array Iterator");n.exports=u(Array,"Array",function(y,b){m(this,{type:"Array Iterator",target:s(y),index:0,kind:b})},function(){var y=g(this),b=y.target,v=y.kind,E=y.index++;if(!b||E>=b.length)return y.target=void 0,d(void 0,!0);switch(v){case"keys":return d(E,!1);case"values":return d(b[E],!1)}return d([E,b[E]],!1)},"values");var p=l.Arguments=l.Array;if(o("keys"),o("values"),o("entries"),!f&&h&&p.name!=="values")try{a(p,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/get-built-in"),l=t("../internals/function-apply"),c=t("../internals/function-call"),a=t("../internals/function-uncurry-this"),u=t("../internals/fails"),d=t("../internals/is-callable"),f=t("../internals/is-symbol"),h=t("../internals/array-slice"),m=t("../internals/get-json-replacer-function"),g=t("../internals/symbol-constructor-detection"),p=String,y=o("JSON","stringify"),b=a(/./.exec),v=a("".charAt),E=a("".charCodeAt),M=a("".replace),W=a(1 .toString),$=/[\uD800-\uDFFF]/g,N=/^[\uD800-\uDBFF]$/,j=/^[\uDC00-\uDFFF]$/,F=!g||u(function(){var R=o("Symbol")("stringify detection");return y([R])!=="[null]"||y({a:R})!=="{}"||y(Object(R))!=="{}"}),P=u(function(){return y("\uDF06\uD834")!=='"\\udf06\\ud834"'||y("\uDEAD")!=='"\\udead"'}),L=function(R,C){var _=h(arguments),x=m(C);if(d(x)||R!==void 0&&!f(R))return _[1]=function(w,S){if(d(x)&&(S=c(x,this,p(w),S)),!f(S))return S},l(y,null,_)},k=function(R,C,_){var x=v(_,C-1),w=v(_,C+1);return b(N,R)&&!b(j,w)||b(j,R)&&!b(N,x)?"\\u"+W(E(R,0),16):R};y&&s({target:"JSON",stat:!0,arity:3,forced:F||P},{stringify:function(R,C,_){var x=h(arguments),w=l(F?L:y,null,x);return P&&typeof w=="string"?M(w,$,k):w}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(t,n,i){t("../internals/export")({target:"Number",stat:!0},{isNaN:function(s){return s!=s}})},{"../internals/export":259}],364:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/object-assign");s({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/symbol-constructor-detection"),l=t("../internals/fails"),c=t("../internals/object-get-own-property-symbols"),a=t("../internals/to-object");s({target:"Object",stat:!0,forced:!o||l(function(){c.f(1)})},{getOwnPropertySymbols:function(u){var d=c.f;return d?d(a(u)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/to-object"),l=t("../internals/object-keys");s({target:"Object",stat:!0,forced:t("../internals/fails")(function(){l(1)})},{keys:function(c){return l(o(c))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/object-to-array").values;s({target:"Object",stat:!0},{values:function(l){return o(l)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/function-call"),l=t("../internals/a-callable"),c=t("../internals/new-promise-capability"),a=t("../internals/perform"),u=t("../internals/iterate");s({target:"Promise",stat:!0,forced:t("../internals/promise-statics-incorrect-iteration")},{all:function(d){var f=this,h=c.f(f),m=h.resolve,g=h.reject,p=a(function(){var y=l(f.resolve),b=[],v=0,E=1;u(d,function(M){var W=v++,$=!1;E++,o(y,f,M).then(function(N){$||($=!0,b[W]=N,--E||m(b))},g)}),--E||m(b)});return p.error&&g(p.value),h.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/is-pure"),l=t("../internals/promise-constructor-detection").CONSTRUCTOR,c=t("../internals/promise-native-constructor"),a=t("../internals/get-built-in"),u=t("../internals/is-callable"),d=t("../internals/define-built-in"),f=c&&c.prototype;if(s({target:"Promise",proto:!0,forced:l,real:!0},{catch:function(m){return this.then(void 0,m)}}),!o&&u(c)){var h=a("Promise").prototype.catch;f.catch!==h&&d(f,"catch",h,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(t,n,i){var s,o,l,c=t("../internals/export"),a=t("../internals/is-pure"),u=t("../internals/engine-is-node"),d=t("../internals/global"),f=t("../internals/function-call"),h=t("../internals/define-built-in"),m=t("../internals/object-set-prototype-of"),g=t("../internals/set-to-string-tag"),p=t("../internals/set-species"),y=t("../internals/a-callable"),b=t("../internals/is-callable"),v=t("../internals/is-object"),E=t("../internals/an-instance"),M=t("../internals/species-constructor"),W=t("../internals/task").set,$=t("../internals/microtask"),N=t("../internals/host-report-errors"),j=t("../internals/perform"),F=t("../internals/queue"),P=t("../internals/internal-state"),L=t("../internals/promise-native-constructor"),k=t("../internals/promise-constructor-detection"),R=t("../internals/new-promise-capability"),C=k.CONSTRUCTOR,_=k.REJECTION_EVENT,x=k.SUBCLASSING,w=P.getterFor("Promise"),S=P.set,I=L&&L.prototype,z=L,A=I,H=d.TypeError,K=d.document,J=d.process,V=R.f,X=V,D=!!(K&&K.createEvent&&d.dispatchEvent),O=function(ae){var Se;return!(!v(ae)||!b(Se=ae.then))&&Se},G=function(ae,Se){var ve,ke,Ne,ze=Se.value,we=Se.state===1,De=we?ae.ok:ae.fail,He=ae.resolve,We=ae.reject,et=ae.domain;try{De?(we||(Se.rejection===2&&re(Se),Se.rejection=1),De===!0?ve=ze:(et&&et.enter(),ve=De(ze),et&&(et.exit(),Ne=!0)),ve===ae.promise?We(new H("Promise-chain cycle")):(ke=O(ve))?f(ke,ve,He,We):He(ve)):We(ze)}catch(St){et&&!Ne&&et.exit(),We(St)}},Z=function(ae,Se){ae.notified||(ae.notified=!0,$(function(){for(var ve,ke=ae.reactions;ve=ke.get();)G(ve,ae);ae.notified=!1,Se&&!ae.rejection&&te(ae)}))},ue=function(ae,Se,ve){var ke,Ne;D?((ke=K.createEvent("Event")).promise=Se,ke.reason=ve,ke.initEvent(ae,!1,!0),d.dispatchEvent(ke)):ke={promise:Se,reason:ve},!_&&(Ne=d["on"+ae])?Ne(ke):ae==="unhandledrejection"&&N("Unhandled promise rejection",ve)},te=function(ae){f(W,d,function(){var Se,ve=ae.facade,ke=ae.value;if(oe(ae)&&(Se=j(function(){u?J.emit("unhandledRejection",ke,ve):ue("unhandledrejection",ve,ke)}),ae.rejection=u||oe(ae)?2:1,Se.error))throw Se.value})},oe=function(ae){return ae.rejection!==1&&!ae.parent},re=function(ae){f(W,d,function(){var Se=ae.facade;u?J.emit("rejectionHandled",Se):ue("rejectionhandled",Se,ae.value)})},be=function(ae,Se,ve){return function(ke){ae(Se,ke,ve)}},ie=function(ae,Se,ve){ae.done||(ae.done=!0,ve&&(ae=ve),ae.value=Se,ae.state=2,Z(ae,!0))},le=function(ae,Se,ve){if(!ae.done){ae.done=!0,ve&&(ae=ve);try{if(ae.facade===Se)throw new H("Promise can't be resolved itself");var ke=O(Se);ke?$(function(){var Ne={done:!1};try{f(ke,Se,be(le,Ne,ae),be(ie,Ne,ae))}catch(ze){ie(Ne,ze,ae)}}):(ae.value=Se,ae.state=1,Z(ae,!1))}catch(Ne){ie({done:!1},Ne,ae)}}};if(C&&(A=(z=function(ae){E(this,A),y(ae),f(s,this);var Se=w(this);try{ae(be(le,Se),be(ie,Se))}catch(ve){ie(Se,ve)}}).prototype,(s=function(ae){S(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new F,rejection:!1,state:0,value:void 0})}).prototype=h(A,"then",function(ae,Se){var ve=w(this),ke=V(M(this,z));return ve.parent=!0,ke.ok=!b(ae)||ae,ke.fail=b(Se)&&Se,ke.domain=u?J.domain:void 0,ve.state===0?ve.reactions.add(ke):$(function(){G(ke,ve)}),ke.promise}),o=function(){var ae=new s,Se=w(ae);this.promise=ae,this.resolve=be(le,Se),this.reject=be(ie,Se)},R.f=V=function(ae){return ae===z||ae===void 0?new o(ae):X(ae)},!a&&b(L)&&I!==Object.prototype)){l=I.then,x||h(I,"then",function(ae,Se){var ve=this;return new z(function(ke,Ne){f(l,ve,ke,Ne)}).then(ae,Se)},{unsafe:!0});try{delete I.constructor}catch{}m&&m(I,A)}c({global:!0,constructor:!0,wrap:!0,forced:C},{Promise:z}),g(z,"Promise",!1,!0),p("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/is-pure"),l=t("../internals/promise-native-constructor"),c=t("../internals/fails"),a=t("../internals/get-built-in"),u=t("../internals/is-callable"),d=t("../internals/species-constructor"),f=t("../internals/promise-resolve"),h=t("../internals/define-built-in"),m=l&&l.prototype;if(s({target:"Promise",proto:!0,real:!0,forced:!!l&&c(function(){m.finally.call({then:function(){}},function(){})})},{finally:function(p){var y=d(this,a("Promise")),b=u(p);return this.then(b?function(v){return f(y,p()).then(function(){return v})}:p,b?function(v){return f(y,p()).then(function(){throw v})}:p)}}),!o&&u(l)){var g=a("Promise").prototype.finally;m.finally!==g&&h(m,"finally",g,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(t,n,i){t("../modules/es.promise.constructor"),t("../modules/es.promise.all"),t("../modules/es.promise.catch"),t("../modules/es.promise.race"),t("../modules/es.promise.reject"),t("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/function-call"),l=t("../internals/a-callable"),c=t("../internals/new-promise-capability"),a=t("../internals/perform"),u=t("../internals/iterate");s({target:"Promise",stat:!0,forced:t("../internals/promise-statics-incorrect-iteration")},{race:function(d){var f=this,h=c.f(f),m=h.reject,g=a(function(){var p=l(f.resolve);u(d,function(y){o(p,f,y).then(h.resolve,m)})});return g.error&&m(g.value),h.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/function-call"),l=t("../internals/new-promise-capability");s({target:"Promise",stat:!0,forced:t("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(c){var a=l.f(this);return o(a.reject,void 0,c),a.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/get-built-in"),l=t("../internals/is-pure"),c=t("../internals/promise-native-constructor"),a=t("../internals/promise-constructor-detection").CONSTRUCTOR,u=t("../internals/promise-resolve"),d=o("Promise"),f=l&&!a;s({target:"Promise",stat:!0,forced:l||a},{resolve:function(h){return u(f&&this===d?c:this,h)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/function-uncurry-this"),l=t("../internals/to-absolute-index"),c=RangeError,a=String.fromCharCode,u=String.fromCodePoint,d=o([].join);s({target:"String",stat:!0,arity:1,forced:!!u&&u.length!==1},{fromCodePoint:function(f){for(var h,m=[],g=arguments.length,p=0;g>p;){if(h=+arguments[p++],l(h,1114111)!==h)throw new c(h+" is not a valid code point");m[p]=h<65536?a(h):a(55296+((h-=65536)>>10),h%1024+56320)}return d(m,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/function-uncurry-this"),l=t("../internals/not-a-regexp"),c=t("../internals/require-object-coercible"),a=t("../internals/to-string"),u=t("../internals/correct-is-regexp-logic"),d=o("".indexOf);s({target:"String",proto:!0,forced:!u("includes")},{includes:function(f){return!!~d(a(c(this)),a(l(f)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(t,n,i){t("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/global"),l=t("../internals/function-call"),c=t("../internals/function-uncurry-this"),a=t("../internals/is-pure"),u=t("../internals/descriptors"),d=t("../internals/symbol-constructor-detection"),f=t("../internals/fails"),h=t("../internals/has-own-property"),m=t("../internals/object-is-prototype-of"),g=t("../internals/an-object"),p=t("../internals/to-indexed-object"),y=t("../internals/to-property-key"),b=t("../internals/to-string"),v=t("../internals/create-property-descriptor"),E=t("../internals/object-create"),M=t("../internals/object-keys"),W=t("../internals/object-get-own-property-names"),$=t("../internals/object-get-own-property-names-external"),N=t("../internals/object-get-own-property-symbols"),j=t("../internals/object-get-own-property-descriptor"),F=t("../internals/object-define-property"),P=t("../internals/object-define-properties"),L=t("../internals/object-property-is-enumerable"),k=t("../internals/define-built-in"),R=t("../internals/define-built-in-accessor"),C=t("../internals/shared"),_=t("../internals/shared-key"),x=t("../internals/hidden-keys"),w=t("../internals/uid"),S=t("../internals/well-known-symbol"),I=t("../internals/well-known-symbol-wrapped"),z=t("../internals/well-known-symbol-define"),A=t("../internals/symbol-define-to-primitive"),H=t("../internals/set-to-string-tag"),K=t("../internals/internal-state"),J=t("../internals/array-iteration").forEach,V=_("hidden"),X=K.set,D=K.getterFor("Symbol"),O=Object.prototype,G=o.Symbol,Z=G&&G.prototype,ue=o.RangeError,te=o.TypeError,oe=o.QObject,re=j.f,be=F.f,ie=$.f,le=L.f,ae=c([].push),Se=C("symbols"),ve=C("op-symbols"),ke=C("wks"),Ne=!oe||!oe.prototype||!oe.prototype.findChild,ze=function(ct,at,wt){var ot=re(O,at);ot&&delete O[at],be(ct,at,wt),ot&&ct!==O&&be(O,at,ot)},we=u&&f(function(){return E(be({},"a",{get:function(){return be(this,"a",{value:7}).a}})).a!==7})?ze:be,De=function(ct,at){var wt=Se[ct]=E(Z);return X(wt,{type:"Symbol",tag:ct,description:at}),u||(wt.description=at),wt},He=function(ct,at,wt){ct===O&&He(ve,at,wt),g(ct);var ot=y(at);return g(wt),h(Se,ot)?(wt.enumerable?(h(ct,V)&&ct[V][ot]&&(ct[V][ot]=!1),wt=E(wt,{enumerable:v(0,!1)})):(h(ct,V)||be(ct,V,v(1,{})),ct[V][ot]=!0),we(ct,ot,wt)):be(ct,ot,wt)},We=function(ct,at){g(ct);var wt=p(at),ot=M(wt).concat(At(wt));return J(ot,function(nt){u&&!l(et,wt,nt)||He(ct,nt,wt[nt])}),ct},et=function(ct){var at=y(ct),wt=l(le,this,at);return!(this===O&&h(Se,at)&&!h(ve,at))&&(!(wt||!h(this,at)||!h(Se,at)||h(this,V)&&this[V][at])||wt)},St=function(ct,at){var wt=p(ct),ot=y(at);if(wt!==O||!h(Se,ot)||h(ve,ot)){var nt=re(wt,ot);return!nt||!h(Se,ot)||h(wt,V)&&wt[V][ot]||(nt.enumerable=!0),nt}},lt=function(ct){var at=ie(p(ct)),wt=[];return J(at,function(ot){h(Se,ot)||h(x,ot)||ae(wt,ot)}),wt},At=function(ct){var at=ct===O,wt=ie(at?ve:p(ct)),ot=[];return J(wt,function(nt){!h(Se,nt)||at&&!h(O,nt)||ae(ot,Se[nt])}),ot};d||(k(Z=(G=function(){if(m(Z,this))throw new te("Symbol is not a constructor");var ct=arguments.length&&arguments[0]!==void 0?b(arguments[0]):void 0,at=w(ct),wt=function(ot){this===O&&l(wt,ve,ot),h(this,V)&&h(this[V],at)&&(this[V][at]=!1);var nt=v(1,ot);try{we(this,at,nt)}catch(zt){if(!(zt instanceof ue))throw zt;ze(this,at,nt)}};return u&&Ne&&we(O,at,{configurable:!0,set:wt}),De(at,ct)}).prototype,"toString",function(){return D(this).tag}),k(G,"withoutSetter",function(ct){return De(w(ct),ct)}),L.f=et,F.f=He,P.f=We,j.f=St,W.f=$.f=lt,N.f=At,I.f=function(ct){return De(S(ct),ct)},u&&(R(Z,"description",{configurable:!0,get:function(){return D(this).description}}),a||k(O,"propertyIsEnumerable",et,{unsafe:!0}))),s({global:!0,constructor:!0,wrap:!0,forced:!d,sham:!d},{Symbol:G}),J(M(ke),function(ct){z(ct)}),s({target:"Symbol",stat:!0,forced:!d},{useSetter:function(){Ne=!0},useSimple:function(){Ne=!1}}),s({target:"Object",stat:!0,forced:!d,sham:!u},{create:function(ct,at){return at===void 0?E(ct):We(E(ct),at)},defineProperty:He,defineProperties:We,getOwnPropertyDescriptor:St}),s({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:lt}),A(),H(G,"Symbol"),x[V]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/get-built-in"),l=t("../internals/has-own-property"),c=t("../internals/to-string"),a=t("../internals/shared"),u=t("../internals/symbol-registry-detection"),d=a("string-to-symbol-registry"),f=a("symbol-to-string-registry");s({target:"Symbol",stat:!0,forced:!u},{for:function(h){var m=c(h);if(l(d,m))return d[m];var g=o("Symbol")(m);return d[m]=g,f[g]=m,g}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(t,n,i){t("../modules/es.symbol.constructor"),t("../modules/es.symbol.for"),t("../modules/es.symbol.key-for"),t("../modules/es.json.stringify"),t("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(t,n,i){var s=t("../internals/export"),o=t("../internals/has-own-property"),l=t("../internals/is-symbol"),c=t("../internals/try-to-string"),a=t("../internals/shared"),u=t("../internals/symbol-registry-detection"),d=a("symbol-to-string-registry");s({target:"Symbol",stat:!0,forced:!u},{keyFor:function(f){if(!l(f))throw new TypeError(c(f)+" is not a symbol");if(o(d,f))return d[f]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(t,n,i){function s(o){return Object.prototype.toString.call(o)}i.isArray=function(o){return Array.isArray?Array.isArray(o):s(o)==="[object Array]"},i.isBoolean=function(o){return typeof o=="boolean"},i.isNull=function(o){return o===null},i.isNullOrUndefined=function(o){return o==null},i.isNumber=function(o){return typeof o=="number"},i.isString=function(o){return typeof o=="string"},i.isSymbol=function(o){return typeof o=="symbol"},i.isUndefined=function(o){return o===void 0},i.isRegExp=function(o){return s(o)==="[object RegExp]"},i.isObject=function(o){return typeof o=="object"&&o!==null},i.isDate=function(o){return s(o)==="[object Date]"},i.isError=function(o){return s(o)==="[object Error]"||o instanceof Error},i.isFunction=function(o){return typeof o=="function"},i.isPrimitive=function(o){return o===null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||typeof o=="symbol"||o===void 0},i.isBuffer=t("buffer").Buffer.isBuffer},{buffer:220}],384:[function(t,n,i){(function(s){(function(){var o=t("elliptic"),l=t("bn.js");n.exports=function(d){return new a(d)};var c={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(d){this.curveType=c[d],this.curveType||(this.curveType={name:d}),this.curve=new o.ec(this.curveType.name),this.keys=void 0}function u(d,f,h){Array.isArray(d)||(d=d.toArray());var m=new s(d);if(h&&m.length<h){var g=new s(h-m.length);g.fill(0),m=s.concat([g,m])}return f?m.toString(f):m}c.p224=c.secp224r1,c.p256=c.secp256r1=c.prime256v1,c.p192=c.secp192r1=c.prime192v1,c.p384=c.secp384r1,c.p521=c.secp521r1,a.prototype.generateKeys=function(d,f){return this.keys=this.curve.genKeyPair(),this.getPublicKey(d,f)},a.prototype.computeSecret=function(d,f,h){return f=f||"utf8",s.isBuffer(d)||(d=new s(d,f)),u(this.curve.keyFromPublic(d).getPublic().mul(this.keys.getPrivate()).getX(),h,this.curveType.byteLength)},a.prototype.getPublicKey=function(d,f){var h=this.keys.getPublic(f==="compressed",!0);return f==="hybrid"&&(h[h.length-1]%2?h[0]=7:h[0]=6),u(h,d)},a.prototype.getPrivateKey=function(d){return u(this.keys.getPrivate(),d)},a.prototype.setPublicKey=function(d,f){return f=f||"utf8",s.isBuffer(d)||(d=new s(d,f)),this.keys._importPublic(d),this},a.prototype.setPrivateKey=function(d,f){f=f||"utf8",s.isBuffer(d)||(d=new s(d,f));var h=new l(d);return h=h.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(h),this}}).call(this)}).call(this,t("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(t,n,i){arguments[4][184][0].apply(i,arguments)},{buffer:188,dup:184}],386:[function(t,n,i){var s=t("inherits"),o=t("md5.js"),l=t("ripemd160"),c=t("sha.js"),a=t("cipher-base");function u(d){a.call(this,"digest"),this._hash=d}s(u,a),u.prototype._update=function(d){this._hash.update(d)},u.prototype._final=function(){return this._hash.digest()},n.exports=function(d){return(d=d.toLowerCase())==="md5"?new o:d==="rmd160"||d==="ripemd160"?new l:new u(c(d))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(t,n,i){var s=t("md5.js");n.exports=function(o){return new s().update(o).digest()}},{"md5.js":450}],388:[function(t,n,i){var s=t("inherits"),o=t("./legacy"),l=t("cipher-base"),c=t("safe-buffer").Buffer,a=t("create-hash/md5"),u=t("ripemd160"),d=t("sha.js"),f=c.alloc(128);function h(m,g){l.call(this,"digest"),typeof g=="string"&&(g=c.from(g));var p=m==="sha512"||m==="sha384"?128:64;this._alg=m,this._key=g,g.length>p?g=(m==="rmd160"?new u:d(m)).update(g).digest():g.length<p&&(g=c.concat([g,f],p));for(var y=this._ipad=c.allocUnsafe(p),b=this._opad=c.allocUnsafe(p),v=0;v<p;v++)y[v]=54^g[v],b[v]=92^g[v];this._hash=m==="rmd160"?new u:d(m),this._hash.update(y)}s(h,l),h.prototype._update=function(m){this._hash.update(m)},h.prototype._final=function(){var m=this._hash.digest();return(this._alg==="rmd160"?new u:d(this._alg)).update(this._opad).update(m).digest()},n.exports=function(m,g){return(m=m.toLowerCase())==="rmd160"||m==="ripemd160"?new h("rmd160",g):m==="md5"?new o(a,g):new h(m,g)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(t,n,i){var s=t("inherits"),o=t("safe-buffer").Buffer,l=t("cipher-base"),c=o.alloc(128);function a(u,d){l.call(this,"digest"),typeof d=="string"&&(d=o.from(d)),this._alg=u,this._key=d,d.length>64?d=u(d):d.length<64&&(d=o.concat([d,c],64));for(var f=this._ipad=o.allocUnsafe(64),h=this._opad=o.allocUnsafe(64),m=0;m<64;m++)f[m]=54^d[m],h[m]=92^d[m];this._hash=[f]}s(a,l),a.prototype._update=function(u){this._hash.push(u)},a.prototype._final=function(){var u=this._alg(o.concat(this._hash));return this._alg(o.concat([this._opad,u]))},n.exports=a},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(t,n,i){i.randomBytes=i.rng=i.pseudoRandomBytes=i.prng=t("randombytes"),i.createHash=i.Hash=t("create-hash"),i.createHmac=i.Hmac=t("create-hmac");var s=t("browserify-sign/algos"),o=Object.keys(s),l=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(o);i.getHashes=function(){return l};var c=t("pbkdf2");i.pbkdf2=c.pbkdf2,i.pbkdf2Sync=c.pbkdf2Sync;var a=t("browserify-cipher");i.Cipher=a.Cipher,i.createCipher=a.createCipher,i.Cipheriv=a.Cipheriv,i.createCipheriv=a.createCipheriv,i.Decipher=a.Decipher,i.createDecipher=a.createDecipher,i.Decipheriv=a.Decipheriv,i.createDecipheriv=a.createDecipheriv,i.getCiphers=a.getCiphers,i.listCiphers=a.listCiphers;var u=t("diffie-hellman");i.DiffieHellmanGroup=u.DiffieHellmanGroup,i.createDiffieHellmanGroup=u.createDiffieHellmanGroup,i.getDiffieHellman=u.getDiffieHellman,i.createDiffieHellman=u.createDiffieHellman,i.DiffieHellman=u.DiffieHellman;var d=t("browserify-sign");i.createSign=d.createSign,i.Sign=d.Sign,i.createVerify=d.createVerify,i.Verify=d.Verify,i.createECDH=t("create-ecdh");var f=t("public-encrypt");i.publicEncrypt=f.publicEncrypt,i.privateEncrypt=f.privateEncrypt,i.publicDecrypt=f.publicDecrypt,i.privateDecrypt=f.privateDecrypt;var h=t("randomfill");i.randomFill=h.randomFill,i.randomFillSync=h.randomFillSync,i.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},i.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(t,n,i){(function(s,o){typeof i=="object"&&n!==void 0?n.exports=o():(s=typeof globalThis<"u"?globalThis:s||self).dayjs=o()})(void 0,function(){var s=6e4,o=36e5,l="millisecond",c="second",a="minute",u="hour",d="day",f="week",h="month",m="quarter",g="year",p="date",y="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(_){var x=["th","st","nd","rd"],w=_%100;return"["+_+(x[(w-20)%10]||x[w]||x[0])+"]"}},M=function(_,x,w){var S=String(_);return!S||S.length>=x?_:""+Array(x+1-S.length).join(w)+_},W={s:M,z:function(_){var x=-_.utcOffset(),w=Math.abs(x),S=Math.floor(w/60),I=w%60;return(x<=0?"+":"-")+M(S,2,"0")+":"+M(I,2,"0")},m:function _(x,w){if(x.date()<w.date())return-_(w,x);var S=12*(w.year()-x.year())+(w.month()-x.month()),I=x.clone().add(S,h),z=w-I<0,A=x.clone().add(S+(z?-1:1),h);return+(-(S+(w-I)/(z?I-A:A-I))||0)},a:function(_){return _<0?Math.ceil(_)||0:Math.floor(_)},p:function(_){return{M:h,y:g,w:f,d,D:p,h:u,m:a,s:c,ms:l,Q:m}[_]||String(_||"").toLowerCase().replace(/s$/,"")},u:function(_){return _===void 0}},$="en",N={};N[$]=E;var j="$isDayjsObject",F=function(_){return _ instanceof R||!(!_||!_[j])},P=function _(x,w,S){var I;if(!x)return $;if(typeof x=="string"){var z=x.toLowerCase();N[z]&&(I=z),w&&(N[z]=w,I=z);var A=x.split("-");if(!I&&A.length>1)return _(A[0])}else{var H=x.name;N[H]=x,I=H}return!S&&I&&($=I),I||!S&&$},L=function(_,x){if(F(_))return _.clone();var w=typeof x=="object"?x:{};return w.date=_,w.args=arguments,new R(w)},k=W;k.l=P,k.i=F,k.w=function(_,x){return L(_,{locale:x.$L,utc:x.$u,x:x.$x,$offset:x.$offset})};var R=function(){function _(w){this.$L=P(w.locale,null,!0),this.parse(w),this.$x=this.$x||w.x||{},this[j]=!0}var x=_.prototype;return x.parse=function(w){this.$d=function(S){var I=S.date,z=S.utc;if(I===null)return new Date(NaN);if(k.u(I))return new Date;if(I instanceof Date)return new Date(I);if(typeof I=="string"&&!/Z$/i.test(I)){var A=I.match(b);if(A){var H=A[2]-1||0,K=(A[7]||"0").substring(0,3);return z?new Date(Date.UTC(A[1],H,A[3]||1,A[4]||0,A[5]||0,A[6]||0,K)):new Date(A[1],H,A[3]||1,A[4]||0,A[5]||0,A[6]||0,K)}}return new Date(I)}(w),this.init()},x.init=function(){var w=this.$d;this.$y=w.getFullYear(),this.$M=w.getMonth(),this.$D=w.getDate(),this.$W=w.getDay(),this.$H=w.getHours(),this.$m=w.getMinutes(),this.$s=w.getSeconds(),this.$ms=w.getMilliseconds()},x.$utils=function(){return k},x.isValid=function(){return this.$d.toString()!==y},x.isSame=function(w,S){var I=L(w);return this.startOf(S)<=I&&I<=this.endOf(S)},x.isAfter=function(w,S){return L(w)<this.startOf(S)},x.isBefore=function(w,S){return this.endOf(S)<L(w)},x.$g=function(w,S,I){return k.u(w)?this[S]:this.set(I,w)},x.unix=function(){return Math.floor(this.valueOf()/1e3)},x.valueOf=function(){return this.$d.getTime()},x.startOf=function(w,S){var I=this,z=!!k.u(S)||S,A=k.p(w),H=function(Z,ue){var te=k.w(I.$u?Date.UTC(I.$y,ue,Z):new Date(I.$y,ue,Z),I);return z?te:te.endOf(d)},K=function(Z,ue){return k.w(I.toDate()[Z].apply(I.toDate("s"),(z?[0,0,0,0]:[23,59,59,999]).slice(ue)),I)},J=this.$W,V=this.$M,X=this.$D,D="set"+(this.$u?"UTC":"");switch(A){case g:return z?H(1,0):H(31,11);case h:return z?H(1,V):H(0,V+1);case f:var O=this.$locale().weekStart||0,G=(J<O?J+7:J)-O;return H(z?X-G:X+(6-G),V);case d:case p:return K(D+"Hours",0);case u:return K(D+"Minutes",1);case a:return K(D+"Seconds",2);case c:return K(D+"Milliseconds",3);default:return this.clone()}},x.endOf=function(w){return this.startOf(w,!1)},x.$set=function(w,S){var I,z=k.p(w),A="set"+(this.$u?"UTC":""),H=(I={},I[d]=A+"Date",I[p]=A+"Date",I[h]=A+"Month",I[g]=A+"FullYear",I[u]=A+"Hours",I[a]=A+"Minutes",I[c]=A+"Seconds",I[l]=A+"Milliseconds",I)[z],K=z===d?this.$D+(S-this.$W):S;if(z===h||z===g){var J=this.clone().set(p,1);J.$d[H](K),J.init(),this.$d=J.set(p,Math.min(this.$D,J.daysInMonth())).$d}else H&&this.$d[H](K);return this.init(),this},x.set=function(w,S){return this.clone().$set(w,S)},x.get=function(w){return this[k.p(w)]()},x.add=function(w,S){var I,z=this;w=Number(w);var A=k.p(S),H=function(V){var X=L(z);return k.w(X.date(X.date()+Math.round(V*w)),z)};if(A===h)return this.set(h,this.$M+w);if(A===g)return this.set(g,this.$y+w);if(A===d)return H(1);if(A===f)return H(7);var K=(I={},I[a]=s,I[u]=o,I[c]=1e3,I)[A]||1,J=this.$d.getTime()+w*K;return k.w(J,this)},x.subtract=function(w,S){return this.add(-1*w,S)},x.format=function(w){var S=this,I=this.$locale();if(!this.isValid())return I.invalidDate||y;var z=w||"YYYY-MM-DDTHH:mm:ssZ",A=k.z(this),H=this.$H,K=this.$m,J=this.$M,V=I.weekdays,X=I.months,D=I.meridiem,O=function(ue,te,oe,re){return ue&&(ue[te]||ue(S,z))||oe[te].slice(0,re)},G=function(ue){return k.s(H%12||12,ue,"0")},Z=D||function(ue,te,oe){var re=ue<12?"AM":"PM";return oe?re.toLowerCase():re};return z.replace(v,function(ue,te){return te||function(oe){switch(oe){case"YY":return String(S.$y).slice(-2);case"YYYY":return k.s(S.$y,4,"0");case"M":return J+1;case"MM":return k.s(J+1,2,"0");case"MMM":return O(I.monthsShort,J,X,3);case"MMMM":return O(X,J);case"D":return S.$D;case"DD":return k.s(S.$D,2,"0");case"d":return String(S.$W);case"dd":return O(I.weekdaysMin,S.$W,V,2);case"ddd":return O(I.weekdaysShort,S.$W,V,3);case"dddd":return V[S.$W];case"H":return String(H);case"HH":return k.s(H,2,"0");case"h":return G(1);case"hh":return G(2);case"a":return Z(H,K,!0);case"A":return Z(H,K,!1);case"m":return String(K);case"mm":return k.s(K,2,"0");case"s":return String(S.$s);case"ss":return k.s(S.$s,2,"0");case"SSS":return k.s(S.$ms,3,"0");case"Z":return A}return null}(ue)||A.replace(":","")})},x.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},x.diff=function(w,S,I){var z,A=this,H=k.p(S),K=L(w),J=(K.utcOffset()-this.utcOffset())*s,V=this-K,X=function(){return k.m(A,K)};switch(H){case g:z=X()/12;break;case h:z=X();break;case m:z=X()/3;break;case f:z=(V-J)/6048e5;break;case d:z=(V-J)/864e5;break;case u:z=V/o;break;case a:z=V/s;break;case c:z=V/1e3;break;default:z=V}return I?z:k.a(z)},x.daysInMonth=function(){return this.endOf(h).$D},x.$locale=function(){return N[this.$L]},x.locale=function(w,S){if(!w)return this.$L;var I=this.clone(),z=P(w,S,!0);return z&&(I.$L=z),I},x.clone=function(){return k.w(this.$d,this)},x.toDate=function(){return new Date(this.valueOf())},x.toJSON=function(){return this.isValid()?this.toISOString():null},x.toISOString=function(){return this.$d.toISOString()},x.toString=function(){return this.$d.toUTCString()},_}(),C=R.prototype;return L.prototype=C,[["$ms",l],["$s",c],["$m",a],["$H",u],["$W",d],["$M",h],["$y",g],["$D",p]].forEach(function(_){C[_[1]]=function(x){return this.$g(x,_[0],_[1])}}),L.extend=function(_,x){return _.$i||(_(x,R,L),_.$i=!0),L},L.locale=P,L.isDayjs=F,L.unix=function(_){return L(1e3*_)},L.en=N[$],L.Ls=N,L.p={},L})},{}],392:[function(t,n,i){(function(s,o){typeof i=="object"&&n!==void 0?n.exports=o():(s=typeof globalThis<"u"?globalThis:s||self).dayjs_plugin_customParseFormat=o()})(void 0,function(){var s={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},o=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,l=/\d\d/,c=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,u={},d=function(b){return(b=+b)+(b>68?1900:2e3)},f=function(b){return function(v){this[b]=+v}},h=[/[+-]\d\d:?(\d\d)?|Z/,function(b){(this.zone||(this.zone={})).offset=function(v){if(!v||v==="Z")return 0;var E=v.match(/([+-]|\d\d)/g),M=60*E[1]+(+E[2]||0);return M===0?0:E[0]==="+"?-M:M}(b)}],m=function(b){var v=u[b];return v&&(v.indexOf?v:v.s.concat(v.f))},g=function(b,v){var E,M=u.meridiem;if(M){for(var W=1;W<=24;W+=1)if(b.indexOf(M(W,0,v))>-1){E=W>12;break}}else E=b===(v?"pm":"PM");return E},p={A:[a,function(b){this.afternoon=g(b,!1)}],a:[a,function(b){this.afternoon=g(b,!0)}],S:[/\d/,function(b){this.milliseconds=100*+b}],SS:[l,function(b){this.milliseconds=10*+b}],SSS:[/\d{3}/,function(b){this.milliseconds=+b}],s:[c,f("seconds")],ss:[c,f("seconds")],m:[c,f("minutes")],mm:[c,f("minutes")],H:[c,f("hours")],h:[c,f("hours")],HH:[c,f("hours")],hh:[c,f("hours")],D:[c,f("day")],DD:[l,f("day")],Do:[a,function(b){var v=u.ordinal,E=b.match(/\d+/);if(this.day=E[0],v)for(var M=1;M<=31;M+=1)v(M).replace(/\[|\]/g,"")===b&&(this.day=M)}],M:[c,f("month")],MM:[l,f("month")],MMM:[a,function(b){var v=m("months"),E=(m("monthsShort")||v.map(function(M){return M.slice(0,3)})).indexOf(b)+1;if(E<1)throw new Error;this.month=E%12||E}],MMMM:[a,function(b){var v=m("months").indexOf(b)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,f("year")],YY:[l,function(b){this.year=d(b)}],YYYY:[/\d{4}/,f("year")],Z:h,ZZ:h};function y(b){var v,E;v=b,E=u&&u.formats;for(var M=(b=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(L,k,R){var C=R&&R.toUpperCase();return k||E[R]||s[R]||E[C].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(_,x,w){return x||w.slice(1)})})).match(o),W=M.length,$=0;$<W;$+=1){var N=M[$],j=p[N],F=j&&j[0],P=j&&j[1];M[$]=P?{regex:F,parser:P}:N.replace(/^\[|\]$/g,"")}return function(L){for(var k={},R=0,C=0;R<W;R+=1){var _=M[R];if(typeof _=="string")C+=_.length;else{var x=_.regex,w=_.parser,S=L.slice(C),I=x.exec(S)[0];w.call(k,I),L=L.replace(I,"")}}return function(z){var A=z.afternoon;if(A!==void 0){var H=z.hours;A?H<12&&(z.hours+=12):H===12&&(z.hours=0),delete z.afternoon}}(k),k}}return function(b,v,E){E.p.customParseFormat=!0,b&&b.parseTwoDigitYear&&(d=b.parseTwoDigitYear);var M=v.prototype,W=M.parse;M.parse=function($){var N=$.date,j=$.utc,F=$.args;this.$u=j;var P=F[1];if(typeof P=="string"){var L=F[2]===!0,k=F[3]===!0,R=L||k,C=F[2];k&&(C=F[2]),u=this.$locale(),!L&&C&&(u=E.Ls[C]),this.$d=function(S,I,z){try{if(["x","X"].indexOf(I)>-1)return new Date((I==="X"?1e3:1)*S);var A=y(I)(S),H=A.year,K=A.month,J=A.day,V=A.hours,X=A.minutes,D=A.seconds,O=A.milliseconds,G=A.zone,Z=new Date,ue=J||(H||K?1:Z.getDate()),te=H||Z.getFullYear(),oe=0;H&&!K||(oe=K>0?K-1:Z.getMonth());var re=V||0,be=X||0,ie=D||0,le=O||0;return G?new Date(Date.UTC(te,oe,ue,re,be,ie,le+60*G.offset*1e3)):z?new Date(Date.UTC(te,oe,ue,re,be,ie,le)):new Date(te,oe,ue,re,be,ie,le)}catch{return new Date("")}}(N,P,j),this.init(),C&&C!==!0&&(this.$L=this.locale(C).$L),R&&N!=this.format(P)&&(this.$d=new Date("")),u={}}else if(P instanceof Array)for(var _=P.length,x=1;x<=_;x+=1){F[1]=P[x-1];var w=E.apply(this,F);if(w.isValid()){this.$d=w.$d,this.$L=w.$L,this.init();break}x===_&&(this.$d=new Date(""))}else W.call(this,$)}}})},{}],393:[function(t,n,i){(function(s,o){typeof i=="object"&&n!==void 0?n.exports=o():(s=typeof globalThis<"u"?globalThis:s||self).dayjs_plugin_utc=o()})(void 0,function(){var s="minute",o=/[+-]\d\d(?::?\d\d)?/g,l=/([+-]|\d\d)/g;return function(c,a,u){var d=a.prototype;u.utc=function(b){var v={date:b,utc:!0,args:arguments};return new a(v)},d.utc=function(b){var v=u(this.toDate(),{locale:this.$L,utc:!0});return b?v.add(this.utcOffset(),s):v},d.local=function(){return u(this.toDate(),{locale:this.$L,utc:!1})};var f=d.parse;d.parse=function(b){b.utc&&(this.$u=!0),this.$utils().u(b.$offset)||(this.$offset=b.$offset),f.call(this,b)};var h=d.init;d.init=function(){if(this.$u){var b=this.$d;this.$y=b.getUTCFullYear(),this.$M=b.getUTCMonth(),this.$D=b.getUTCDate(),this.$W=b.getUTCDay(),this.$H=b.getUTCHours(),this.$m=b.getUTCMinutes(),this.$s=b.getUTCSeconds(),this.$ms=b.getUTCMilliseconds()}else h.call(this)};var m=d.utcOffset;d.utcOffset=function(b,v){var E=this.$utils().u;if(E(b))return this.$u?0:E(this.$offset)?m.call(this):this.$offset;if(typeof b=="string"&&(b=function(N){N===void 0&&(N="");var j=N.match(o);if(!j)return null;var F=(""+j[0]).match(l)||["-",0,0],P=F[0],L=60*+F[1]+ +F[2];return L===0?0:P==="+"?L:-L}(b))===null)return this;var M=Math.abs(b)<=16?60*b:b,W=this;if(v)return W.$offset=M,W.$u=b===0,W;if(b!==0){var $=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(W=this.local().add(M+$,s)).$offset=M,W.$x.$localOffset=$}else W=this.utc();return W};var g=d.format;d.format=function(b){var v=b||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,v)},d.valueOf=function(){var b=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*b},d.isUTC=function(){return!!this.$u},d.toISOString=function(){return this.toDate().toISOString()},d.toString=function(){return this.toDate().toUTCString()};var p=d.toDate;d.toDate=function(b){return b==="s"&&this.$offset?u(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():p.call(this)};var y=d.diff;d.diff=function(b,v,E){if(b&&this.$u===b.$u)return y.call(this,b,v,E);var M=this.local(),W=u(b).local();return y.call(M,W,v,E)}}})},{}],394:[function(t,n,i){i.utils=t("./des/utils"),i.Cipher=t("./des/cipher"),i.DES=t("./des/des"),i.CBC=t("./des/cbc"),i.EDE=t("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(t,n,i){var s=t("minimalistic-assert"),o=t("inherits"),l={};function c(a){s.equal(a.length,8,"Invalid IV length"),this.iv=new Array(8);for(var u=0;u<this.iv.length;u++)this.iv[u]=a[u]}i.instantiate=function(a){function u(m){a.call(this,m),this._cbcInit()}o(u,a);for(var d=Object.keys(l),f=0;f<d.length;f++){var h=d[f];u.prototype[h]=l[h]}return u.create=function(m){return new u(m)},u},l._cbcInit=function(){var a=new c(this.options.iv);this._cbcState=a},l._update=function(a,u,d,f){var h=this._cbcState,m=this.constructor.super_.prototype,g=h.iv;if(this.type==="encrypt"){for(var p=0;p<this.blockSize;p++)g[p]^=a[u+p];for(m._update.call(this,g,0,d,f),p=0;p<this.blockSize;p++)g[p]=d[f+p]}else{for(m._update.call(this,a,u,d,f),p=0;p<this.blockSize;p++)d[f+p]^=g[p];for(p=0;p<this.blockSize;p++)g[p]=a[u+p]}}},{inherits:440,"minimalistic-assert":453}],396:[function(t,n,i){var s=t("minimalistic-assert");function o(l){this.options=l,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=l.padding!==!1}n.exports=o,o.prototype._init=function(){},o.prototype.update=function(l){return l.length===0?[]:this.type==="decrypt"?this._updateDecrypt(l):this._updateEncrypt(l)},o.prototype._buffer=function(l,c){for(var a=Math.min(this.buffer.length-this.bufferOff,l.length-c),u=0;u<a;u++)this.buffer[this.bufferOff+u]=l[c+u];return this.bufferOff+=a,a},o.prototype._flushBuffer=function(l,c){return this._update(this.buffer,0,l,c),this.bufferOff=0,this.blockSize},o.prototype._updateEncrypt=function(l){var c=0,a=0,u=(this.bufferOff+l.length)/this.blockSize|0,d=new Array(u*this.blockSize);this.bufferOff!==0&&(c+=this._buffer(l,c),this.bufferOff===this.buffer.length&&(a+=this._flushBuffer(d,a)));for(var f=l.length-(l.length-c)%this.blockSize;c<f;c+=this.blockSize)this._update(l,c,d,a),a+=this.blockSize;for(;c<l.length;c++,this.bufferOff++)this.buffer[this.bufferOff]=l[c];return d},o.prototype._updateDecrypt=function(l){for(var c=0,a=0,u=Math.ceil((this.bufferOff+l.length)/this.blockSize)-1,d=new Array(u*this.blockSize);u>0;u--)c+=this._buffer(l,c),a+=this._flushBuffer(d,a);return c+=this._buffer(l,c),d},o.prototype.final=function(l){var c,a;return l&&(c=this.update(l)),a=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),c?c.concat(a):a},o.prototype._pad=function(l,c){if(c===0)return!1;for(;c<l.length;)l[c++]=0;return!0},o.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var l=new Array(this.blockSize);return this._update(this.buffer,0,l,0),l},o.prototype._unpad=function(l){return l},o.prototype._finalDecrypt=function(){s.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var l=new Array(this.blockSize);return this._flushBuffer(l,0),this._unpad(l)}},{"minimalistic-assert":453}],397:[function(t,n,i){var s=t("minimalistic-assert"),o=t("inherits"),l=t("./utils"),c=t("./cipher");function a(){this.tmp=new Array(2),this.keys=null}function u(f){c.call(this,f);var h=new a;this._desState=h,this.deriveKeys(h,f.key)}o(u,c),n.exports=u,u.create=function(f){return new u(f)};var d=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(f,h){f.keys=new Array(32),s.equal(h.length,this.blockSize,"Invalid key length");var m=l.readUInt32BE(h,0),g=l.readUInt32BE(h,4);l.pc1(m,g,f.tmp,0),m=f.tmp[0],g=f.tmp[1];for(var p=0;p<f.keys.length;p+=2){var y=d[p>>>1];m=l.r28shl(m,y),g=l.r28shl(g,y),l.pc2(m,g,f.keys,p)}},u.prototype._update=function(f,h,m,g){var p=this._desState,y=l.readUInt32BE(f,h),b=l.readUInt32BE(f,h+4);l.ip(y,b,p.tmp,0),y=p.tmp[0],b=p.tmp[1],this.type==="encrypt"?this._encrypt(p,y,b,p.tmp,0):this._decrypt(p,y,b,p.tmp,0),y=p.tmp[0],b=p.tmp[1],l.writeUInt32BE(m,y,g),l.writeUInt32BE(m,b,g+4)},u.prototype._pad=function(f,h){if(this.padding===!1)return!1;for(var m=f.length-h,g=h;g<f.length;g++)f[g]=m;return!0},u.prototype._unpad=function(f){if(this.padding===!1)return f;for(var h=f[f.length-1],m=f.length-h;m<f.length;m++)s.equal(f[m],h);return f.slice(0,f.length-h)},u.prototype._encrypt=function(f,h,m,g,p){for(var y=h,b=m,v=0;v<f.keys.length;v+=2){var E=f.keys[v],M=f.keys[v+1];l.expand(b,f.tmp,0),E^=f.tmp[0],M^=f.tmp[1];var W=l.substitute(E,M),$=b;b=(y^l.permute(W))>>>0,y=$}l.rip(b,y,g,p)},u.prototype._decrypt=function(f,h,m,g,p){for(var y=m,b=h,v=f.keys.length-2;v>=0;v-=2){var E=f.keys[v],M=f.keys[v+1];l.expand(y,f.tmp,0),E^=f.tmp[0],M^=f.tmp[1];var W=l.substitute(E,M),$=y;y=(b^l.permute(W))>>>0,b=$}l.rip(y,b,g,p)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(t,n,i){var s=t("minimalistic-assert"),o=t("inherits"),l=t("./cipher"),c=t("./des");function a(d,f){s.equal(f.length,24,"Invalid key length");var h=f.slice(0,8),m=f.slice(8,16),g=f.slice(16,24);this.ciphers=d==="encrypt"?[c.create({type:"encrypt",key:h}),c.create({type:"decrypt",key:m}),c.create({type:"encrypt",key:g})]:[c.create({type:"decrypt",key:g}),c.create({type:"encrypt",key:m}),c.create({type:"decrypt",key:h})]}function u(d){l.call(this,d);var f=new a(this.type,this.options.key);this._edeState=f}o(u,l),n.exports=u,u.create=function(d){return new u(d)},u.prototype._update=function(d,f,h,m){var g=this._edeState;g.ciphers[0]._update(d,f,h,m),g.ciphers[1]._update(h,m,h,m),g.ciphers[2]._update(h,m,h,m)},u.prototype._pad=c.prototype._pad,u.prototype._unpad=c.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(t,n,i){i.readUInt32BE=function(c,a){return(c[0+a]<<24|c[1+a]<<16|c[2+a]<<8|c[3+a])>>>0},i.writeUInt32BE=function(c,a,u){c[0+u]=a>>>24,c[1+u]=a>>>16&255,c[2+u]=a>>>8&255,c[3+u]=255&a},i.ip=function(c,a,u,d){for(var f=0,h=0,m=6;m>=0;m-=2){for(var g=0;g<=24;g+=8)f<<=1,f|=a>>>g+m&1;for(g=0;g<=24;g+=8)f<<=1,f|=c>>>g+m&1}for(m=6;m>=0;m-=2){for(g=1;g<=25;g+=8)h<<=1,h|=a>>>g+m&1;for(g=1;g<=25;g+=8)h<<=1,h|=c>>>g+m&1}u[d+0]=f>>>0,u[d+1]=h>>>0},i.rip=function(c,a,u,d){for(var f=0,h=0,m=0;m<4;m++)for(var g=24;g>=0;g-=8)f<<=1,f|=a>>>g+m&1,f<<=1,f|=c>>>g+m&1;for(m=4;m<8;m++)for(g=24;g>=0;g-=8)h<<=1,h|=a>>>g+m&1,h<<=1,h|=c>>>g+m&1;u[d+0]=f>>>0,u[d+1]=h>>>0},i.pc1=function(c,a,u,d){for(var f=0,h=0,m=7;m>=5;m--){for(var g=0;g<=24;g+=8)f<<=1,f|=a>>g+m&1;for(g=0;g<=24;g+=8)f<<=1,f|=c>>g+m&1}for(g=0;g<=24;g+=8)f<<=1,f|=a>>g+m&1;for(m=1;m<=3;m++){for(g=0;g<=24;g+=8)h<<=1,h|=a>>g+m&1;for(g=0;g<=24;g+=8)h<<=1,h|=c>>g+m&1}for(g=0;g<=24;g+=8)h<<=1,h|=c>>g+m&1;u[d+0]=f>>>0,u[d+1]=h>>>0},i.r28shl=function(c,a){return c<<a&268435455|c>>>28-a};var s=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];i.pc2=function(c,a,u,d){for(var f=0,h=0,m=s.length>>>1,g=0;g<m;g++)f<<=1,f|=c>>>s[g]&1;for(g=m;g<s.length;g++)h<<=1,h|=a>>>s[g]&1;u[d+0]=f>>>0,u[d+1]=h>>>0},i.expand=function(c,a,u){var d=0,f=0;d=(1&c)<<5|c>>>27;for(var h=23;h>=15;h-=4)d<<=6,d|=c>>>h&63;for(h=11;h>=3;h-=4)f|=c>>>h&63,f<<=6;f|=(31&c)<<1|c>>>31,a[u+0]=d>>>0,a[u+1]=f>>>0};var o=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];i.substitute=function(c,a){for(var u=0,d=0;d<4;d++)u<<=4,u|=o[64*d+(c>>>18-6*d&63)];for(d=0;d<4;d++)u<<=4,u|=o[256+64*d+(a>>>18-6*d&63)];return u>>>0};var l=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];i.permute=function(c){for(var a=0,u=0;u<l.length;u++)a<<=1,a|=c>>>l[u]&1;return a>>>0},i.padSplit=function(c,a,u){for(var d=c.toString(2);d.length<a;)d="0"+d;for(var f=[],h=0;h<a;h+=u)f.push(d.slice(h,h+u));return f.join(" ")}},{}],400:[function(t,n,i){(function(s){(function(){var o=t("./lib/generatePrime"),l=t("./lib/primes.json"),c=t("./lib/dh"),a={binary:!0,hex:!0,base64:!0};i.DiffieHellmanGroup=i.createDiffieHellmanGroup=i.getDiffieHellman=function(u){var d=new s(l[u].prime,"hex"),f=new s(l[u].gen,"hex");return new c(d,f)},i.createDiffieHellman=i.DiffieHellman=function u(d,f,h,m){return s.isBuffer(f)||a[f]===void 0?u(d,"binary",f,h):(f=f||"binary",m=m||"binary",h=h||new s([2]),s.isBuffer(h)||(h=new s(h,m)),typeof d=="number"?new c(o(d,h),h,!0):(s.isBuffer(d)||(d=new s(d,f)),new c(d,h,!0)))}}).call(this)}).call(this,t("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(t,n,i){(function(s){(function(){var o=t("bn.js"),l=new(t("miller-rabin")),c=new o(24),a=new o(11),u=new o(10),d=new o(3),f=new o(7),h=t("./generatePrime"),m=t("randombytes");function g(E,M){return M=M||"utf8",s.isBuffer(E)||(E=new s(E,M)),this._pub=new o(E),this}function p(E,M){return M=M||"utf8",s.isBuffer(E)||(E=new s(E,M)),this._priv=new o(E),this}n.exports=b;var y={};function b(E,M,W){this.setGenerator(M),this.__prime=new o(E),this._prime=o.mont(this.__prime),this._primeLen=E.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,W?(this.setPublicKey=g,this.setPrivateKey=p):this._primeCode=8}function v(E,M){var W=new s(E.toArray());return M?W.toString(M):W}Object.defineProperty(b.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=function(E,M){var W=M.toString("hex"),$=[W,E.toString(16)].join("_");if($ in y)return y[$];var N,j=0;if(E.isEven()||!h.simpleSieve||!h.fermatTest(E)||!l.test(E))return j+=1,j+=W==="02"||W==="05"?8:4,y[$]=j,j;switch(l.test(E.shrn(1))||(j+=2),W){case"02":E.mod(c).cmp(a)&&(j+=8);break;case"05":(N=E.mod(u)).cmp(d)&&N.cmp(f)&&(j+=8);break;default:j+=4}return y[$]=j,j}(this.__prime,this.__gen)),this._primeCode}}),b.prototype.generateKeys=function(){return this._priv||(this._priv=new o(m(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},b.prototype.computeSecret=function(E){var M=(E=(E=new o(E)).toRed(this._prime)).redPow(this._priv).fromRed(),W=new s(M.toArray()),$=this.getPrime();if(W.length<$.length){var N=new s($.length-W.length);N.fill(0),W=s.concat([N,W])}return W},b.prototype.getPublicKey=function(E){return v(this._pub,E)},b.prototype.getPrivateKey=function(E){return v(this._priv,E)},b.prototype.getPrime=function(E){return v(this.__prime,E)},b.prototype.getGenerator=function(E){return v(this._gen,E)},b.prototype.setGenerator=function(E,M){return M=M||"utf8",s.isBuffer(E)||(E=new s(E,M)),this.__gen=E,this._gen=new o(E),this}}).call(this)}).call(this,t("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(t,n,i){var s=t("randombytes");n.exports=E,E.simpleSieve=b,E.fermatTest=v;var o=t("bn.js"),l=new o(24),c=new(t("miller-rabin")),a=new o(1),u=new o(2),d=new o(5),f=(new o(16),new o(8),new o(10)),h=new o(3),m=(new o(7),new o(11)),g=new o(4),p=(new o(12),null);function y(){if(p!==null)return p;var M=[];M[0]=2;for(var W=1,$=3;$<1048576;$+=2){for(var N=Math.ceil(Math.sqrt($)),j=0;j<W&&M[j]<=N&&$%M[j]!=0;j++);W!==j&&M[j]<=N||(M[W++]=$)}return p=M,M}function b(M){for(var W=y(),$=0;$<W.length;$++)if(M.modn(W[$])===0)return M.cmpn(W[$])===0;return!0}function v(M){var W=o.mont(M);return u.toRed(W).redPow(M.subn(1)).fromRed().cmpn(1)===0}function E(M,W){if(M<16)return new o(W===2||W===5?[140,123]:[140,39]);var $,N;for(W=new o(W);;){for($=new o(s(Math.ceil(M/8)));$.bitLength()>M;)$.ishrn(1);if($.isEven()&&$.iadd(a),$.testn(1)||$.iadd(u),W.cmp(u)){if(!W.cmp(d))for(;$.mod(f).cmp(h);)$.iadd(g)}else for(;$.mod(l).cmp(m);)$.iadd(g);if(b(N=$.shrn(1))&&b($)&&v(N)&&v($)&&c.test(N)&&c.test($))return $}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(t,n,i){n.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(t,n,i){arguments[4][184][0].apply(i,arguments)},{buffer:188,dup:184}],405:[function(t,n,i){var s=i;s.version=t("../package.json").version,s.utils=t("./elliptic/utils"),s.rand=t("brorand"),s.curve=t("./elliptic/curve"),s.curves=t("./elliptic/curves"),s.ec=t("./elliptic/ec"),s.eddsa=t("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(t,n,i){var s=t("bn.js"),o=t("../utils"),l=o.getNAF,c=o.getJSF,a=o.assert;function u(f,h){this.type=f,this.p=new s(h.p,16),this.red=h.prime?s.red(h.prime):s.mont(this.p),this.zero=new s(0).toRed(this.red),this.one=new s(1).toRed(this.red),this.two=new s(2).toRed(this.red),this.n=h.n&&new s(h.n,16),this.g=h.g&&this.pointFromJSON(h.g,h.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var m=this.n&&this.p.div(this.n);!m||m.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function d(f,h){this.curve=f,this.type=h,this.precomputed=null}n.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(f,h){a(f.precomputed);var m=f._getDoubles(),g=l(h,1,this._bitLength),p=(1<<m.step+1)-(m.step%2==0?2:1);p/=3;var y,b,v=[];for(y=0;y<g.length;y+=m.step){b=0;for(var E=y+m.step-1;E>=y;E--)b=(b<<1)+g[E];v.push(b)}for(var M=this.jpoint(null,null,null),W=this.jpoint(null,null,null),$=p;$>0;$--){for(y=0;y<v.length;y++)(b=v[y])===$?W=W.mixedAdd(m.points[y]):b===-$&&(W=W.mixedAdd(m.points[y].neg()));M=M.add(W)}return M.toP()},u.prototype._wnafMul=function(f,h){var m=4,g=f._getNAFPoints(m);m=g.wnd;for(var p=g.points,y=l(h,m,this._bitLength),b=this.jpoint(null,null,null),v=y.length-1;v>=0;v--){for(var E=0;v>=0&&y[v]===0;v--)E++;if(v>=0&&E++,b=b.dblp(E),v<0)break;var M=y[v];a(M!==0),b=f.type==="affine"?M>0?b.mixedAdd(p[M-1>>1]):b.mixedAdd(p[-M-1>>1].neg()):M>0?b.add(p[M-1>>1]):b.add(p[-M-1>>1].neg())}return f.type==="affine"?b.toP():b},u.prototype._wnafMulAdd=function(f,h,m,g,p){var y,b,v,E=this._wnafT1,M=this._wnafT2,W=this._wnafT3,$=0;for(y=0;y<g;y++){var N=(v=h[y])._getNAFPoints(f);E[y]=N.wnd,M[y]=N.points}for(y=g-1;y>=1;y-=2){var j=y-1,F=y;if(E[j]===1&&E[F]===1){var P=[h[j],null,null,h[F]];h[j].y.cmp(h[F].y)===0?(P[1]=h[j].add(h[F]),P[2]=h[j].toJ().mixedAdd(h[F].neg())):h[j].y.cmp(h[F].y.redNeg())===0?(P[1]=h[j].toJ().mixedAdd(h[F]),P[2]=h[j].add(h[F].neg())):(P[1]=h[j].toJ().mixedAdd(h[F]),P[2]=h[j].toJ().mixedAdd(h[F].neg()));var L=[-3,-1,-5,-7,0,7,5,1,3],k=c(m[j],m[F]);for($=Math.max(k[0].length,$),W[j]=new Array($),W[F]=new Array($),b=0;b<$;b++){var R=0|k[0][b],C=0|k[1][b];W[j][b]=L[3*(R+1)+(C+1)],W[F][b]=0,M[j]=P}}else W[j]=l(m[j],E[j],this._bitLength),W[F]=l(m[F],E[F],this._bitLength),$=Math.max(W[j].length,$),$=Math.max(W[F].length,$)}var _=this.jpoint(null,null,null),x=this._wnafT4;for(y=$;y>=0;y--){for(var w=0;y>=0;){var S=!0;for(b=0;b<g;b++)x[b]=0|W[b][y],x[b]!==0&&(S=!1);if(!S)break;w++,y--}if(y>=0&&w++,_=_.dblp(w),y<0)break;for(b=0;b<g;b++){var I=x[b];I!==0&&(I>0?v=M[b][I-1>>1]:I<0&&(v=M[b][-I-1>>1].neg()),_=v.type==="affine"?_.mixedAdd(v):_.add(v))}}for(y=0;y<g;y++)M[y]=null;return p?_:_.toP()},u.BasePoint=d,d.prototype.eq=function(){throw new Error("Not implemented")},d.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(f,h){f=o.toArray(f,h);var m=this.p.byteLength();if((f[0]===4||f[0]===6||f[0]===7)&&f.length-1==2*m)return f[0]===6?a(f[f.length-1]%2==0):f[0]===7&&a(f[f.length-1]%2==1),this.point(f.slice(1,1+m),f.slice(1+m,1+2*m));if((f[0]===2||f[0]===3)&&f.length-1===m)return this.pointFromX(f.slice(1,1+m),f[0]===3);throw new Error("Unknown point format")},d.prototype.encodeCompressed=function(f){return this.encode(f,!0)},d.prototype._encode=function(f){var h=this.curve.p.byteLength(),m=this.getX().toArray("be",h);return f?[this.getY().isEven()?2:3].concat(m):[4].concat(m,this.getY().toArray("be",h))},d.prototype.encode=function(f,h){return o.encode(this._encode(h),f)},d.prototype.precompute=function(f){if(this.precomputed)return this;var h={doubles:null,naf:null,beta:null};return h.naf=this._getNAFPoints(8),h.doubles=this._getDoubles(4,f),h.beta=this._getBeta(),this.precomputed=h,this},d.prototype._hasDoubles=function(f){if(!this.precomputed)return!1;var h=this.precomputed.doubles;return!!h&&h.points.length>=Math.ceil((f.bitLength()+1)/h.step)},d.prototype._getDoubles=function(f,h){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var m=[this],g=this,p=0;p<h;p+=f){for(var y=0;y<f;y++)g=g.dbl();m.push(g)}return{step:f,points:m}},d.prototype._getNAFPoints=function(f){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var h=[this],m=(1<<f)-1,g=m===1?null:this.dbl(),p=1;p<m;p++)h[p]=h[p-1].add(g);return{wnd:f,points:h}},d.prototype._getBeta=function(){return null},d.prototype.dblp=function(f){for(var h=this,m=0;m<f;m++)h=h.dbl();return h}},{"../utils":419,"bn.js":420}],407:[function(t,n,i){var s=t("../utils"),o=t("bn.js"),l=t("inherits"),c=t("./base"),a=s.assert;function u(f){this.twisted=(0|f.a)!=1,this.mOneA=this.twisted&&(0|f.a)==-1,this.extended=this.mOneA,c.call(this,"edwards",f),this.a=new o(f.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new o(f.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new o(f.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|f.c)==1}function d(f,h,m,g,p){c.BasePoint.call(this,f,"projective"),h===null&&m===null&&g===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new o(h,16),this.y=new o(m,16),this.z=g?new o(g,16):this.curve.one,this.t=p&&new o(p,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}l(u,c),n.exports=u,u.prototype._mulA=function(f){return this.mOneA?f.redNeg():this.a.redMul(f)},u.prototype._mulC=function(f){return this.oneC?f:this.c.redMul(f)},u.prototype.jpoint=function(f,h,m,g){return this.point(f,h,m,g)},u.prototype.pointFromX=function(f,h){(f=new o(f,16)).red||(f=f.toRed(this.red));var m=f.redSqr(),g=this.c2.redSub(this.a.redMul(m)),p=this.one.redSub(this.c2.redMul(this.d).redMul(m)),y=g.redMul(p.redInvm()),b=y.redSqrt();if(b.redSqr().redSub(y).cmp(this.zero)!==0)throw new Error("invalid point");var v=b.fromRed().isOdd();return(h&&!v||!h&&v)&&(b=b.redNeg()),this.point(f,b)},u.prototype.pointFromY=function(f,h){(f=new o(f,16)).red||(f=f.toRed(this.red));var m=f.redSqr(),g=m.redSub(this.c2),p=m.redMul(this.d).redMul(this.c2).redSub(this.a),y=g.redMul(p.redInvm());if(y.cmp(this.zero)===0){if(h)throw new Error("invalid point");return this.point(this.zero,f)}var b=y.redSqrt();if(b.redSqr().redSub(y).cmp(this.zero)!==0)throw new Error("invalid point");return b.fromRed().isOdd()!==h&&(b=b.redNeg()),this.point(b,f)},u.prototype.validate=function(f){if(f.isInfinity())return!0;f.normalize();var h=f.x.redSqr(),m=f.y.redSqr(),g=h.redMul(this.a).redAdd(m),p=this.c2.redMul(this.one.redAdd(this.d.redMul(h).redMul(m)));return g.cmp(p)===0},l(d,c.BasePoint),u.prototype.pointFromJSON=function(f){return d.fromJSON(this,f)},u.prototype.point=function(f,h,m,g){return new d(this,f,h,m,g)},d.fromJSON=function(f,h){return new d(f,h[0],h[1],h[2])},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},d.prototype._extDbl=function(){var f=this.x.redSqr(),h=this.y.redSqr(),m=this.z.redSqr();m=m.redIAdd(m);var g=this.curve._mulA(f),p=this.x.redAdd(this.y).redSqr().redISub(f).redISub(h),y=g.redAdd(h),b=y.redSub(m),v=g.redSub(h),E=p.redMul(b),M=y.redMul(v),W=p.redMul(v),$=b.redMul(y);return this.curve.point(E,M,$,W)},d.prototype._projDbl=function(){var f,h,m,g,p,y,b=this.x.redAdd(this.y).redSqr(),v=this.x.redSqr(),E=this.y.redSqr();if(this.curve.twisted){var M=(g=this.curve._mulA(v)).redAdd(E);this.zOne?(f=b.redSub(v).redSub(E).redMul(M.redSub(this.curve.two)),h=M.redMul(g.redSub(E)),m=M.redSqr().redSub(M).redSub(M)):(p=this.z.redSqr(),y=M.redSub(p).redISub(p),f=b.redSub(v).redISub(E).redMul(y),h=M.redMul(g.redSub(E)),m=M.redMul(y))}else g=v.redAdd(E),p=this.curve._mulC(this.z).redSqr(),y=g.redSub(p).redSub(p),f=this.curve._mulC(b.redISub(g)).redMul(y),h=this.curve._mulC(g).redMul(v.redISub(E)),m=g.redMul(y);return this.curve.point(f,h,m)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},d.prototype._extAdd=function(f){var h=this.y.redSub(this.x).redMul(f.y.redSub(f.x)),m=this.y.redAdd(this.x).redMul(f.y.redAdd(f.x)),g=this.t.redMul(this.curve.dd).redMul(f.t),p=this.z.redMul(f.z.redAdd(f.z)),y=m.redSub(h),b=p.redSub(g),v=p.redAdd(g),E=m.redAdd(h),M=y.redMul(b),W=v.redMul(E),$=y.redMul(E),N=b.redMul(v);return this.curve.point(M,W,N,$)},d.prototype._projAdd=function(f){var h,m,g=this.z.redMul(f.z),p=g.redSqr(),y=this.x.redMul(f.x),b=this.y.redMul(f.y),v=this.curve.d.redMul(y).redMul(b),E=p.redSub(v),M=p.redAdd(v),W=this.x.redAdd(this.y).redMul(f.x.redAdd(f.y)).redISub(y).redISub(b),$=g.redMul(E).redMul(W);return this.curve.twisted?(h=g.redMul(M).redMul(b.redSub(this.curve._mulA(y))),m=E.redMul(M)):(h=g.redMul(M).redMul(b.redSub(y)),m=this.curve._mulC(E).redMul(M)),this.curve.point($,h,m)},d.prototype.add=function(f){return this.isInfinity()?f:f.isInfinity()?this:this.curve.extended?this._extAdd(f):this._projAdd(f)},d.prototype.mul=function(f){return this._hasDoubles(f)?this.curve._fixedNafMul(this,f):this.curve._wnafMul(this,f)},d.prototype.mulAdd=function(f,h,m){return this.curve._wnafMulAdd(1,[this,h],[f,m],2,!1)},d.prototype.jmulAdd=function(f,h,m){return this.curve._wnafMulAdd(1,[this,h],[f,m],2,!0)},d.prototype.normalize=function(){if(this.zOne)return this;var f=this.z.redInvm();return this.x=this.x.redMul(f),this.y=this.y.redMul(f),this.t&&(this.t=this.t.redMul(f)),this.z=this.curve.one,this.zOne=!0,this},d.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()},d.prototype.getY=function(){return this.normalize(),this.y.fromRed()},d.prototype.eq=function(f){return this===f||this.getX().cmp(f.getX())===0&&this.getY().cmp(f.getY())===0},d.prototype.eqXToP=function(f){var h=f.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(h)===0)return!0;for(var m=f.clone(),g=this.curve.redN.redMul(this.z);;){if(m.iadd(this.curve.n),m.cmp(this.curve.p)>=0)return!1;if(h.redIAdd(g),this.x.cmp(h)===0)return!0}},d.prototype.toP=d.prototype.normalize,d.prototype.mixedAdd=d.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(t,n,i){var s=i;s.base=t("./base"),s.short=t("./short"),s.mont=t("./mont"),s.edwards=t("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(t,n,i){var s=t("bn.js"),o=t("inherits"),l=t("./base"),c=t("../utils");function a(d){l.call(this,"mont",d),this.a=new s(d.a,16).toRed(this.red),this.b=new s(d.b,16).toRed(this.red),this.i4=new s(4).toRed(this.red).redInvm(),this.two=new s(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(d,f,h){l.BasePoint.call(this,d,"projective"),f===null&&h===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new s(f,16),this.z=new s(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}o(a,l),n.exports=a,a.prototype.validate=function(d){var f=d.normalize().x,h=f.redSqr(),m=h.redMul(f).redAdd(h.redMul(this.a)).redAdd(f);return m.redSqrt().redSqr().cmp(m)===0},o(u,l.BasePoint),a.prototype.decodePoint=function(d,f){return this.point(c.toArray(d,f),1)},a.prototype.point=function(d,f){return new u(this,d,f)},a.prototype.pointFromJSON=function(d){return u.fromJSON(this,d)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(d,f){return new u(d,f[0],f[1]||d.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.z.cmpn(0)===0},u.prototype.dbl=function(){var d=this.x.redAdd(this.z).redSqr(),f=this.x.redSub(this.z).redSqr(),h=d.redSub(f),m=d.redMul(f),g=h.redMul(f.redAdd(this.curve.a24.redMul(h)));return this.curve.point(m,g)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(d,f){var h=this.x.redAdd(this.z),m=this.x.redSub(this.z),g=d.x.redAdd(d.z),p=d.x.redSub(d.z).redMul(h),y=g.redMul(m),b=f.z.redMul(p.redAdd(y).redSqr()),v=f.x.redMul(p.redISub(y).redSqr());return this.curve.point(b,v)},u.prototype.mul=function(d){for(var f=d.clone(),h=this,m=this.curve.point(null,null),g=[];f.cmpn(0)!==0;f.iushrn(1))g.push(f.andln(1));for(var p=g.length-1;p>=0;p--)g[p]===0?(h=h.diffAdd(m,this),m=m.dbl()):(m=h.diffAdd(m,this),h=h.dbl());return m},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(d){return this.getX().cmp(d.getX())===0},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(t,n,i){var s=t("../utils"),o=t("bn.js"),l=t("inherits"),c=t("./base"),a=s.assert;function u(h){c.call(this,"short",h),this.a=new o(h.a,16).toRed(this.red),this.b=new o(h.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(h),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function d(h,m,g,p){c.BasePoint.call(this,h,"affine"),m===null&&g===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new o(m,16),this.y=new o(g,16),p&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function f(h,m,g,p){c.BasePoint.call(this,h,"jacobian"),m===null&&g===null&&p===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new o(0)):(this.x=new o(m,16),this.y=new o(g,16),this.z=new o(p,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}l(u,c),n.exports=u,u.prototype._getEndomorphism=function(h){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var m,g;if(h.beta)m=new o(h.beta,16).toRed(this.red);else{var p=this._getEndoRoots(this.p);m=(m=p[0].cmp(p[1])<0?p[0]:p[1]).toRed(this.red)}if(h.lambda)g=new o(h.lambda,16);else{var y=this._getEndoRoots(this.n);this.g.mul(y[0]).x.cmp(this.g.x.redMul(m))===0?g=y[0]:(g=y[1],a(this.g.mul(g).x.cmp(this.g.x.redMul(m))===0))}return{beta:m,lambda:g,basis:h.basis?h.basis.map(function(b){return{a:new o(b.a,16),b:new o(b.b,16)}}):this._getEndoBasis(g)}}},u.prototype._getEndoRoots=function(h){var m=h===this.p?this.red:o.mont(h),g=new o(2).toRed(m).redInvm(),p=g.redNeg(),y=new o(3).toRed(m).redNeg().redSqrt().redMul(g);return[p.redAdd(y).fromRed(),p.redSub(y).fromRed()]},u.prototype._getEndoBasis=function(h){for(var m,g,p,y,b,v,E,M,W,$=this.n.ushrn(Math.floor(this.n.bitLength()/2)),N=h,j=this.n.clone(),F=new o(1),P=new o(0),L=new o(0),k=new o(1),R=0;N.cmpn(0)!==0;){var C=j.div(N);M=j.sub(C.mul(N)),W=L.sub(C.mul(F));var _=k.sub(C.mul(P));if(!p&&M.cmp($)<0)m=E.neg(),g=F,p=M.neg(),y=W;else if(p&&++R==2)break;E=M,j=N,N=M,L=F,F=W,k=P,P=_}b=M.neg(),v=W;var x=p.sqr().add(y.sqr());return b.sqr().add(v.sqr()).cmp(x)>=0&&(b=m,v=g),p.negative&&(p=p.neg(),y=y.neg()),b.negative&&(b=b.neg(),v=v.neg()),[{a:p,b:y},{a:b,b:v}]},u.prototype._endoSplit=function(h){var m=this.endo.basis,g=m[0],p=m[1],y=p.b.mul(h).divRound(this.n),b=g.b.neg().mul(h).divRound(this.n),v=y.mul(g.a),E=b.mul(p.a),M=y.mul(g.b),W=b.mul(p.b);return{k1:h.sub(v).sub(E),k2:M.add(W).neg()}},u.prototype.pointFromX=function(h,m){(h=new o(h,16)).red||(h=h.toRed(this.red));var g=h.redSqr().redMul(h).redIAdd(h.redMul(this.a)).redIAdd(this.b),p=g.redSqrt();if(p.redSqr().redSub(g).cmp(this.zero)!==0)throw new Error("invalid point");var y=p.fromRed().isOdd();return(m&&!y||!m&&y)&&(p=p.redNeg()),this.point(h,p)},u.prototype.validate=function(h){if(h.inf)return!0;var m=h.x,g=h.y,p=this.a.redMul(m),y=m.redSqr().redMul(m).redIAdd(p).redIAdd(this.b);return g.redSqr().redISub(y).cmpn(0)===0},u.prototype._endoWnafMulAdd=function(h,m,g){for(var p=this._endoWnafT1,y=this._endoWnafT2,b=0;b<h.length;b++){var v=this._endoSplit(m[b]),E=h[b],M=E._getBeta();v.k1.negative&&(v.k1.ineg(),E=E.neg(!0)),v.k2.negative&&(v.k2.ineg(),M=M.neg(!0)),p[2*b]=E,p[2*b+1]=M,y[2*b]=v.k1,y[2*b+1]=v.k2}for(var W=this._wnafMulAdd(1,p,y,2*b,g),$=0;$<2*b;$++)p[$]=null,y[$]=null;return W},l(d,c.BasePoint),u.prototype.point=function(h,m,g){return new d(this,h,m,g)},u.prototype.pointFromJSON=function(h,m){return d.fromJSON(this,h,m)},d.prototype._getBeta=function(){if(this.curve.endo){var h=this.precomputed;if(h&&h.beta)return h.beta;var m=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(h){var g=this.curve,p=function(y){return g.point(y.x.redMul(g.endo.beta),y.y)};h.beta=m,m.precomputed={beta:null,naf:h.naf&&{wnd:h.naf.wnd,points:h.naf.points.map(p)},doubles:h.doubles&&{step:h.doubles.step,points:h.doubles.points.map(p)}}}return m}},d.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},d.fromJSON=function(h,m,g){typeof m=="string"&&(m=JSON.parse(m));var p=h.point(m[0],m[1],g);if(!m[2])return p;function y(v){return h.point(v[0],v[1],g)}var b=m[2];return p.precomputed={beta:null,doubles:b.doubles&&{step:b.doubles.step,points:[p].concat(b.doubles.points.map(y))},naf:b.naf&&{wnd:b.naf.wnd,points:[p].concat(b.naf.points.map(y))}},p},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.inf},d.prototype.add=function(h){if(this.inf)return h;if(h.inf)return this;if(this.eq(h))return this.dbl();if(this.neg().eq(h))return this.curve.point(null,null);if(this.x.cmp(h.x)===0)return this.curve.point(null,null);var m=this.y.redSub(h.y);m.cmpn(0)!==0&&(m=m.redMul(this.x.redSub(h.x).redInvm()));var g=m.redSqr().redISub(this.x).redISub(h.x),p=m.redMul(this.x.redSub(g)).redISub(this.y);return this.curve.point(g,p)},d.prototype.dbl=function(){if(this.inf)return this;var h=this.y.redAdd(this.y);if(h.cmpn(0)===0)return this.curve.point(null,null);var m=this.curve.a,g=this.x.redSqr(),p=h.redInvm(),y=g.redAdd(g).redIAdd(g).redIAdd(m).redMul(p),b=y.redSqr().redISub(this.x.redAdd(this.x)),v=y.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,v)},d.prototype.getX=function(){return this.x.fromRed()},d.prototype.getY=function(){return this.y.fromRed()},d.prototype.mul=function(h){return h=new o(h,16),this.isInfinity()?this:this._hasDoubles(h)?this.curve._fixedNafMul(this,h):this.curve.endo?this.curve._endoWnafMulAdd([this],[h]):this.curve._wnafMul(this,h)},d.prototype.mulAdd=function(h,m,g){var p=[this,m],y=[h,g];return this.curve.endo?this.curve._endoWnafMulAdd(p,y):this.curve._wnafMulAdd(1,p,y,2)},d.prototype.jmulAdd=function(h,m,g){var p=[this,m],y=[h,g];return this.curve.endo?this.curve._endoWnafMulAdd(p,y,!0):this.curve._wnafMulAdd(1,p,y,2,!0)},d.prototype.eq=function(h){return this===h||this.inf===h.inf&&(this.inf||this.x.cmp(h.x)===0&&this.y.cmp(h.y)===0)},d.prototype.neg=function(h){if(this.inf)return this;var m=this.curve.point(this.x,this.y.redNeg());if(h&&this.precomputed){var g=this.precomputed,p=function(y){return y.neg()};m.precomputed={naf:g.naf&&{wnd:g.naf.wnd,points:g.naf.points.map(p)},doubles:g.doubles&&{step:g.doubles.step,points:g.doubles.points.map(p)}}}return m},d.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},l(f,c.BasePoint),u.prototype.jpoint=function(h,m,g){return new f(this,h,m,g)},f.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var h=this.z.redInvm(),m=h.redSqr(),g=this.x.redMul(m),p=this.y.redMul(m).redMul(h);return this.curve.point(g,p)},f.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},f.prototype.add=function(h){if(this.isInfinity())return h;if(h.isInfinity())return this;var m=h.z.redSqr(),g=this.z.redSqr(),p=this.x.redMul(m),y=h.x.redMul(g),b=this.y.redMul(m.redMul(h.z)),v=h.y.redMul(g.redMul(this.z)),E=p.redSub(y),M=b.redSub(v);if(E.cmpn(0)===0)return M.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var W=E.redSqr(),$=W.redMul(E),N=p.redMul(W),j=M.redSqr().redIAdd($).redISub(N).redISub(N),F=M.redMul(N.redISub(j)).redISub(b.redMul($)),P=this.z.redMul(h.z).redMul(E);return this.curve.jpoint(j,F,P)},f.prototype.mixedAdd=function(h){if(this.isInfinity())return h.toJ();if(h.isInfinity())return this;var m=this.z.redSqr(),g=this.x,p=h.x.redMul(m),y=this.y,b=h.y.redMul(m).redMul(this.z),v=g.redSub(p),E=y.redSub(b);if(v.cmpn(0)===0)return E.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var M=v.redSqr(),W=M.redMul(v),$=g.redMul(M),N=E.redSqr().redIAdd(W).redISub($).redISub($),j=E.redMul($.redISub(N)).redISub(y.redMul(W)),F=this.z.redMul(v);return this.curve.jpoint(N,j,F)},f.prototype.dblp=function(h){if(h===0)return this;if(this.isInfinity())return this;if(!h)return this.dbl();var m;if(this.curve.zeroA||this.curve.threeA){var g=this;for(m=0;m<h;m++)g=g.dbl();return g}var p=this.curve.a,y=this.curve.tinv,b=this.x,v=this.y,E=this.z,M=E.redSqr().redSqr(),W=v.redAdd(v);for(m=0;m<h;m++){var $=b.redSqr(),N=W.redSqr(),j=N.redSqr(),F=$.redAdd($).redIAdd($).redIAdd(p.redMul(M)),P=b.redMul(N),L=F.redSqr().redISub(P.redAdd(P)),k=P.redISub(L),R=F.redMul(k);R=R.redIAdd(R).redISub(j);var C=W.redMul(E);m+1<h&&(M=M.redMul(j)),b=L,E=C,W=R}return this.curve.jpoint(b,W.redMul(y),E)},f.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},f.prototype._zeroDbl=function(){var h,m,g;if(this.zOne){var p=this.x.redSqr(),y=this.y.redSqr(),b=y.redSqr(),v=this.x.redAdd(y).redSqr().redISub(p).redISub(b);v=v.redIAdd(v);var E=p.redAdd(p).redIAdd(p),M=E.redSqr().redISub(v).redISub(v),W=b.redIAdd(b);W=(W=W.redIAdd(W)).redIAdd(W),h=M,m=E.redMul(v.redISub(M)).redISub(W),g=this.y.redAdd(this.y)}else{var $=this.x.redSqr(),N=this.y.redSqr(),j=N.redSqr(),F=this.x.redAdd(N).redSqr().redISub($).redISub(j);F=F.redIAdd(F);var P=$.redAdd($).redIAdd($),L=P.redSqr(),k=j.redIAdd(j);k=(k=k.redIAdd(k)).redIAdd(k),h=L.redISub(F).redISub(F),m=P.redMul(F.redISub(h)).redISub(k),g=(g=this.y.redMul(this.z)).redIAdd(g)}return this.curve.jpoint(h,m,g)},f.prototype._threeDbl=function(){var h,m,g;if(this.zOne){var p=this.x.redSqr(),y=this.y.redSqr(),b=y.redSqr(),v=this.x.redAdd(y).redSqr().redISub(p).redISub(b);v=v.redIAdd(v);var E=p.redAdd(p).redIAdd(p).redIAdd(this.curve.a),M=E.redSqr().redISub(v).redISub(v);h=M;var W=b.redIAdd(b);W=(W=W.redIAdd(W)).redIAdd(W),m=E.redMul(v.redISub(M)).redISub(W),g=this.y.redAdd(this.y)}else{var $=this.z.redSqr(),N=this.y.redSqr(),j=this.x.redMul(N),F=this.x.redSub($).redMul(this.x.redAdd($));F=F.redAdd(F).redIAdd(F);var P=j.redIAdd(j),L=(P=P.redIAdd(P)).redAdd(P);h=F.redSqr().redISub(L),g=this.y.redAdd(this.z).redSqr().redISub(N).redISub($);var k=N.redSqr();k=(k=(k=k.redIAdd(k)).redIAdd(k)).redIAdd(k),m=F.redMul(P.redISub(h)).redISub(k)}return this.curve.jpoint(h,m,g)},f.prototype._dbl=function(){var h=this.curve.a,m=this.x,g=this.y,p=this.z,y=p.redSqr().redSqr(),b=m.redSqr(),v=g.redSqr(),E=b.redAdd(b).redIAdd(b).redIAdd(h.redMul(y)),M=m.redAdd(m),W=(M=M.redIAdd(M)).redMul(v),$=E.redSqr().redISub(W.redAdd(W)),N=W.redISub($),j=v.redSqr();j=(j=(j=j.redIAdd(j)).redIAdd(j)).redIAdd(j);var F=E.redMul(N).redISub(j),P=g.redAdd(g).redMul(p);return this.curve.jpoint($,F,P)},f.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var h=this.x.redSqr(),m=this.y.redSqr(),g=this.z.redSqr(),p=m.redSqr(),y=h.redAdd(h).redIAdd(h),b=y.redSqr(),v=this.x.redAdd(m).redSqr().redISub(h).redISub(p),E=(v=(v=(v=v.redIAdd(v)).redAdd(v).redIAdd(v)).redISub(b)).redSqr(),M=p.redIAdd(p);M=(M=(M=M.redIAdd(M)).redIAdd(M)).redIAdd(M);var W=y.redIAdd(v).redSqr().redISub(b).redISub(E).redISub(M),$=m.redMul(W);$=($=$.redIAdd($)).redIAdd($);var N=this.x.redMul(E).redISub($);N=(N=N.redIAdd(N)).redIAdd(N);var j=this.y.redMul(W.redMul(M.redISub(W)).redISub(v.redMul(E)));j=(j=(j=j.redIAdd(j)).redIAdd(j)).redIAdd(j);var F=this.z.redAdd(v).redSqr().redISub(g).redISub(E);return this.curve.jpoint(N,j,F)},f.prototype.mul=function(h,m){return h=new o(h,m),this.curve._wnafMul(this,h)},f.prototype.eq=function(h){if(h.type==="affine")return this.eq(h.toJ());if(this===h)return!0;var m=this.z.redSqr(),g=h.z.redSqr();if(this.x.redMul(g).redISub(h.x.redMul(m)).cmpn(0)!==0)return!1;var p=m.redMul(this.z),y=g.redMul(h.z);return this.y.redMul(y).redISub(h.y.redMul(p)).cmpn(0)===0},f.prototype.eqXToP=function(h){var m=this.z.redSqr(),g=h.toRed(this.curve.red).redMul(m);if(this.x.cmp(g)===0)return!0;for(var p=h.clone(),y=this.curve.redN.redMul(m);;){if(p.iadd(this.curve.n),p.cmp(this.curve.p)>=0)return!1;if(g.redIAdd(y),this.x.cmp(g)===0)return!0}},f.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},f.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(t,n,i){var s,o=i,l=t("hash.js"),c=t("./curve"),a=t("./utils").assert;function u(f){f.type==="short"?this.curve=new c.short(f):f.type==="edwards"?this.curve=new c.edwards(f):this.curve=new c.mont(f),this.g=this.curve.g,this.n=this.curve.n,this.hash=f.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function d(f,h){Object.defineProperty(o,f,{configurable:!0,enumerable:!0,get:function(){var m=new u(h);return Object.defineProperty(o,f,{configurable:!0,enumerable:!0,value:m}),m}})}o.PresetCurve=u,d("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:l.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),d("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:l.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),d("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:l.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),d("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:l.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),d("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:l.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),d("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:l.sha256,gRed:!1,g:["9"]}),d("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:l.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{s=t("./precomputed/secp256k1")}catch{s=void 0}d("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:l.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",s]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(t,n,i){var s=t("bn.js"),o=t("hmac-drbg"),l=t("../utils"),c=t("../curves"),a=t("brorand"),u=l.assert,d=t("./key"),f=t("./signature");function h(m){if(!(this instanceof h))return new h(m);typeof m=="string"&&(u(Object.prototype.hasOwnProperty.call(c,m),"Unknown curve "+m),m=c[m]),m instanceof c.PresetCurve&&(m={curve:m}),this.curve=m.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=m.curve.g,this.g.precompute(m.curve.n.bitLength()+1),this.hash=m.hash||m.curve.hash}n.exports=h,h.prototype.keyPair=function(m){return new d(this,m)},h.prototype.keyFromPrivate=function(m,g){return d.fromPrivate(this,m,g)},h.prototype.keyFromPublic=function(m,g){return d.fromPublic(this,m,g)},h.prototype.genKeyPair=function(m){m||(m={});for(var g=new o({hash:this.hash,pers:m.pers,persEnc:m.persEnc||"utf8",entropy:m.entropy||a(this.hash.hmacStrength),entropyEnc:m.entropy&&m.entropyEnc||"utf8",nonce:this.n.toArray()}),p=this.n.byteLength(),y=this.n.sub(new s(2));;){var b=new s(g.generate(p));if(!(b.cmp(y)>0))return b.iaddn(1),this.keyFromPrivate(b)}},h.prototype._truncateToN=function(m,g){var p=8*m.byteLength()-this.n.bitLength();return p>0&&(m=m.ushrn(p)),!g&&m.cmp(this.n)>=0?m.sub(this.n):m},h.prototype.sign=function(m,g,p,y){typeof p=="object"&&(y=p,p=null),y||(y={}),g=this.keyFromPrivate(g,p),m=this._truncateToN(new s(m,16));for(var b=this.n.byteLength(),v=g.getPrivate().toArray("be",b),E=m.toArray("be",b),M=new o({hash:this.hash,entropy:v,nonce:E,pers:y.pers,persEnc:y.persEnc||"utf8"}),W=this.n.sub(new s(1)),$=0;;$++){var N=y.k?y.k($):new s(M.generate(this.n.byteLength()));if(!((N=this._truncateToN(N,!0)).cmpn(1)<=0||N.cmp(W)>=0)){var j=this.g.mul(N);if(!j.isInfinity()){var F=j.getX(),P=F.umod(this.n);if(P.cmpn(0)!==0){var L=N.invm(this.n).mul(P.mul(g.getPrivate()).iadd(m));if((L=L.umod(this.n)).cmpn(0)!==0){var k=(j.getY().isOdd()?1:0)|(F.cmp(P)!==0?2:0);return y.canonical&&L.cmp(this.nh)>0&&(L=this.n.sub(L),k^=1),new f({r:P,s:L,recoveryParam:k})}}}}}},h.prototype.verify=function(m,g,p,y){m=this._truncateToN(new s(m,16)),p=this.keyFromPublic(p,y);var b=(g=new f(g,"hex")).r,v=g.s;if(b.cmpn(1)<0||b.cmp(this.n)>=0||v.cmpn(1)<0||v.cmp(this.n)>=0)return!1;var E,M=v.invm(this.n),W=M.mul(m).umod(this.n),$=M.mul(b).umod(this.n);return this.curve._maxwellTrick?!(E=this.g.jmulAdd(W,p.getPublic(),$)).isInfinity()&&E.eqXToP(b):!(E=this.g.mulAdd(W,p.getPublic(),$)).isInfinity()&&E.getX().umod(this.n).cmp(b)===0},h.prototype.recoverPubKey=function(m,g,p,y){u((3&p)===p,"The recovery param is more than two bits"),g=new f(g,y);var b=this.n,v=new s(m),E=g.r,M=g.s,W=1&p,$=p>>1;if(E.cmp(this.curve.p.umod(this.curve.n))>=0&&$)throw new Error("Unable to find sencond key candinate");E=$?this.curve.pointFromX(E.add(this.curve.n),W):this.curve.pointFromX(E,W);var N=g.r.invm(b),j=b.sub(v).mul(N).umod(b),F=M.mul(N).umod(b);return this.g.mulAdd(j,E,F)},h.prototype.getKeyRecoveryParam=function(m,g,p,y){if((g=new f(g,y)).recoveryParam!==null)return g.recoveryParam;for(var b=0;b<4;b++){var v;try{v=this.recoverPubKey(m,g,b)}catch{continue}if(v.eq(p))return b}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(t,n,i){var s=t("bn.js"),o=t("../utils").assert;function l(c,a){this.ec=c,this.priv=null,this.pub=null,a.priv&&this._importPrivate(a.priv,a.privEnc),a.pub&&this._importPublic(a.pub,a.pubEnc)}n.exports=l,l.fromPublic=function(c,a,u){return a instanceof l?a:new l(c,{pub:a,pubEnc:u})},l.fromPrivate=function(c,a,u){return a instanceof l?a:new l(c,{priv:a,privEnc:u})},l.prototype.validate=function(){var c=this.getPublic();return c.isInfinity()?{result:!1,reason:"Invalid public key"}:c.validate()?c.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},l.prototype.getPublic=function(c,a){return typeof c=="string"&&(a=c,c=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),a?this.pub.encode(a,c):this.pub},l.prototype.getPrivate=function(c){return c==="hex"?this.priv.toString(16,2):this.priv},l.prototype._importPrivate=function(c,a){this.priv=new s(c,a||16),this.priv=this.priv.umod(this.ec.curve.n)},l.prototype._importPublic=function(c,a){if(c.x||c.y)return this.ec.curve.type==="mont"?o(c.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||o(c.x&&c.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(c.x,c.y));this.pub=this.ec.curve.decodePoint(c,a)},l.prototype.derive=function(c){return c.validate()||o(c.validate(),"public point not validated"),c.mul(this.priv).getX()},l.prototype.sign=function(c,a,u){return this.ec.sign(c,this,a,u)},l.prototype.verify=function(c,a){return this.ec.verify(c,a,this)},l.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(t,n,i){var s=t("bn.js"),o=t("../utils"),l=o.assert;function c(h,m){if(h instanceof c)return h;this._importDER(h,m)||(l(h.r&&h.s,"Signature without r or s"),this.r=new s(h.r,16),this.s=new s(h.s,16),h.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=h.recoveryParam)}function a(){this.place=0}function u(h,m){var g=h[m.place++];if(!(128&g))return g;var p=15&g;if(p===0||p>4)return!1;for(var y=0,b=0,v=m.place;b<p;b++,v++)y<<=8,y|=h[v],y>>>=0;return!(y<=127)&&(m.place=v,y)}function d(h){for(var m=0,g=h.length-1;!h[m]&&!(128&h[m+1])&&m<g;)m++;return m===0?h:h.slice(m)}function f(h,m){if(m<128)h.push(m);else{var g=1+(Math.log(m)/Math.LN2>>>3);for(h.push(128|g);--g;)h.push(m>>>(g<<3)&255);h.push(m)}}n.exports=c,c.prototype._importDER=function(h,m){h=o.toArray(h,m);var g=new a;if(h[g.place++]!==48)return!1;var p=u(h,g);if(p===!1||p+g.place!==h.length||h[g.place++]!==2)return!1;var y=u(h,g);if(y===!1)return!1;var b=h.slice(g.place,y+g.place);if(g.place+=y,h[g.place++]!==2)return!1;var v=u(h,g);if(v===!1||h.length!==v+g.place)return!1;var E=h.slice(g.place,v+g.place);if(b[0]===0){if(!(128&b[1]))return!1;b=b.slice(1)}if(E[0]===0){if(!(128&E[1]))return!1;E=E.slice(1)}return this.r=new s(b),this.s=new s(E),this.recoveryParam=null,!0},c.prototype.toDER=function(h){var m=this.r.toArray(),g=this.s.toArray();for(128&m[0]&&(m=[0].concat(m)),128&g[0]&&(g=[0].concat(g)),m=d(m),g=d(g);!(g[0]||128&g[1]);)g=g.slice(1);var p=[2];f(p,m.length),(p=p.concat(m)).push(2),f(p,g.length);var y=p.concat(g),b=[48];return f(b,y.length),b=b.concat(y),o.encode(b,h)}},{"../utils":419,"bn.js":420}],415:[function(t,n,i){var s=t("hash.js"),o=t("../curves"),l=t("../utils"),c=l.assert,a=l.parseBytes,u=t("./key"),d=t("./signature");function f(h){if(c(h==="ed25519","only tested with ed25519 so far"),!(this instanceof f))return new f(h);h=o[h].curve,this.curve=h,this.g=h.g,this.g.precompute(h.n.bitLength()+1),this.pointClass=h.point().constructor,this.encodingLength=Math.ceil(h.n.bitLength()/8),this.hash=s.sha512}n.exports=f,f.prototype.sign=function(h,m){h=a(h);var g=this.keyFromSecret(m),p=this.hashInt(g.messagePrefix(),h),y=this.g.mul(p),b=this.encodePoint(y),v=this.hashInt(b,g.pubBytes(),h).mul(g.priv()),E=p.add(v).umod(this.curve.n);return this.makeSignature({R:y,S:E,Rencoded:b})},f.prototype.verify=function(h,m,g){h=a(h),m=this.makeSignature(m);var p=this.keyFromPublic(g),y=this.hashInt(m.Rencoded(),p.pubBytes(),h),b=this.g.mul(m.S());return m.R().add(p.pub().mul(y)).eq(b)},f.prototype.hashInt=function(){for(var h=this.hash(),m=0;m<arguments.length;m++)h.update(arguments[m]);return l.intFromLE(h.digest()).umod(this.curve.n)},f.prototype.keyFromPublic=function(h){return u.fromPublic(this,h)},f.prototype.keyFromSecret=function(h){return u.fromSecret(this,h)},f.prototype.makeSignature=function(h){return h instanceof d?h:new d(this,h)},f.prototype.encodePoint=function(h){var m=h.getY().toArray("le",this.encodingLength);return m[this.encodingLength-1]|=h.getX().isOdd()?128:0,m},f.prototype.decodePoint=function(h){var m=(h=l.parseBytes(h)).length-1,g=h.slice(0,m).concat(-129&h[m]),p=(128&h[m])!=0,y=l.intFromLE(g);return this.curve.pointFromY(y,p)},f.prototype.encodeInt=function(h){return h.toArray("le",this.encodingLength)},f.prototype.decodeInt=function(h){return l.intFromLE(h)},f.prototype.isPoint=function(h){return h instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(t,n,i){var s=t("../utils"),o=s.assert,l=s.parseBytes,c=s.cachedProperty;function a(u,d){this.eddsa=u,this._secret=l(d.secret),u.isPoint(d.pub)?this._pub=d.pub:this._pubBytes=l(d.pub)}a.fromPublic=function(u,d){return d instanceof a?d:new a(u,{pub:d})},a.fromSecret=function(u,d){return d instanceof a?d:new a(u,{secret:d})},a.prototype.secret=function(){return this._secret},c(a,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),c(a,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),c(a,"privBytes",function(){var u=this.eddsa,d=this.hash(),f=u.encodingLength-1,h=d.slice(0,u.encodingLength);return h[0]&=248,h[f]&=127,h[f]|=64,h}),c(a,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),c(a,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),c(a,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),a.prototype.sign=function(u){return o(this._secret,"KeyPair can only verify"),this.eddsa.sign(u,this)},a.prototype.verify=function(u,d){return this.eddsa.verify(u,d,this)},a.prototype.getSecret=function(u){return o(this._secret,"KeyPair is public only"),s.encode(this.secret(),u)},a.prototype.getPublic=function(u){return s.encode(this.pubBytes(),u)},n.exports=a},{"../utils":419}],417:[function(t,n,i){var s=t("bn.js"),o=t("../utils"),l=o.assert,c=o.cachedProperty,a=o.parseBytes;function u(d,f){this.eddsa=d,typeof f!="object"&&(f=a(f)),Array.isArray(f)&&(f={R:f.slice(0,d.encodingLength),S:f.slice(d.encodingLength)}),l(f.R&&f.S,"Signature without R or S"),d.isPoint(f.R)&&(this._R=f.R),f.S instanceof s&&(this._S=f.S),this._Rencoded=Array.isArray(f.R)?f.R:f.Rencoded,this._Sencoded=Array.isArray(f.S)?f.S:f.Sencoded}c(u,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),c(u,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),c(u,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),c(u,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return o.encode(this.toBytes(),"hex").toUpperCase()},n.exports=u},{"../utils":419,"bn.js":420}],418:[function(t,n,i){n.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(t,n,i){var s=i,o=t("bn.js"),l=t("minimalistic-assert"),c=t("minimalistic-crypto-utils");s.assert=l,s.toArray=c.toArray,s.zero2=c.zero2,s.toHex=c.toHex,s.encode=c.encode,s.getNAF=function(a,u,d){var f=new Array(Math.max(a.bitLength(),d)+1);f.fill(0);for(var h=1<<u+1,m=a.clone(),g=0;g<f.length;g++){var p,y=m.andln(h-1);m.isOdd()?(p=y>(h>>1)-1?(h>>1)-y:y,m.isubn(p)):p=0,f[g]=p,m.iushrn(1)}return f},s.getJSF=function(a,u){var d=[[],[]];a=a.clone(),u=u.clone();for(var f,h=0,m=0;a.cmpn(-h)>0||u.cmpn(-m)>0;){var g,p,y=a.andln(3)+h&3,b=u.andln(3)+m&3;y===3&&(y=-1),b===3&&(b=-1),g=1&y?(f=a.andln(7)+h&7)!==3&&f!==5||b!==2?y:-y:0,d[0].push(g),p=1&b?(f=u.andln(7)+m&7)!==3&&f!==5||y!==2?b:-b:0,d[1].push(p),2*h===g+1&&(h=1-h),2*m===p+1&&(m=1-m),a.iushrn(1),u.iushrn(1)}return d},s.cachedProperty=function(a,u,d){var f="_"+u;a.prototype[u]=function(){return this[f]!==void 0?this[f]:this[f]=d.call(this)}},s.parseBytes=function(a){return typeof a=="string"?s.toArray(a,"hex"):a},s.intFromLE=function(a){return new o(a,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(t,n,i){arguments[4][184][0].apply(i,arguments)},{buffer:188,dup:184}],421:[function(t,n,i){n.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(t,n,i){var s=Object.create||function(N){var j=function(){};return j.prototype=N,new j},o=Object.keys||function(N){var j=[];for(var F in N)Object.prototype.hasOwnProperty.call(N,F)&&j.push(F);return F},l=Function.prototype.bind||function(N){var j=this;return function(){return j.apply(N,arguments)}};function c(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=s(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}n.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0;var a,u=10;try{var d={};Object.defineProperty&&Object.defineProperty(d,"x",{value:0}),a=d.x===0}catch{a=!1}function f(N){return N._maxListeners===void 0?c.defaultMaxListeners:N._maxListeners}function h(N,j,F){if(j)N.call(F);else for(var P=N.length,L=$(N,P),k=0;k<P;++k)L[k].call(F)}function m(N,j,F,P){if(j)N.call(F,P);else for(var L=N.length,k=$(N,L),R=0;R<L;++R)k[R].call(F,P)}function g(N,j,F,P,L){if(j)N.call(F,P,L);else for(var k=N.length,R=$(N,k),C=0;C<k;++C)R[C].call(F,P,L)}function p(N,j,F,P,L,k){if(j)N.call(F,P,L,k);else for(var R=N.length,C=$(N,R),_=0;_<R;++_)C[_].call(F,P,L,k)}function y(N,j,F,P){if(j)N.apply(F,P);else for(var L=N.length,k=$(N,L),R=0;R<L;++R)k[R].apply(F,P)}function b(N,j,F,P){var L,k,R;if(typeof F!="function")throw new TypeError('"listener" argument must be a function');if((k=N._events)?(k.newListener&&(N.emit("newListener",j,F.listener?F.listener:F),k=N._events),R=k[j]):(k=N._events=s(null),N._eventsCount=0),R){if(typeof R=="function"?R=k[j]=P?[F,R]:[R,F]:P?R.unshift(F):R.push(F),!R.warned&&(L=f(N))&&L>0&&R.length>L){R.warned=!0;var C=new Error("Possible EventEmitter memory leak detected. "+R.length+' "'+String(j)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');C.name="MaxListenersExceededWarning",C.emitter=N,C.type=j,C.count=R.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",C.name,C.message)}}else R=k[j]=F,++N._eventsCount;return N}function v(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var N=new Array(arguments.length),j=0;j<N.length;++j)N[j]=arguments[j];this.listener.apply(this.target,N)}}function E(N,j,F){var P={fired:!1,wrapFn:void 0,target:N,type:j,listener:F},L=l.call(v,P);return L.listener=F,P.wrapFn=L,L}function M(N,j,F){var P=N._events;if(!P)return[];var L=P[j];return L?typeof L=="function"?F?[L.listener||L]:[L]:F?function(k){for(var R=new Array(k.length),C=0;C<R.length;++C)R[C]=k[C].listener||k[C];return R}(L):$(L,L.length):[]}function W(N){var j=this._events;if(j){var F=j[N];if(typeof F=="function")return 1;if(F)return F.length}return 0}function $(N,j){for(var F=new Array(j),P=0;P<j;++P)F[P]=N[P];return F}a?Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(N){if(typeof N!="number"||N<0||N!=N)throw new TypeError('"defaultMaxListeners" must be a positive number');u=N}}):c.defaultMaxListeners=u,c.prototype.setMaxListeners=function(N){if(typeof N!="number"||N<0||isNaN(N))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=N,this},c.prototype.getMaxListeners=function(){return f(this)},c.prototype.emit=function(N){var j,F,P,L,k,R,C=N==="error";if(R=this._events)C=C&&R.error==null;else if(!C)return!1;if(C){if(arguments.length>1&&(j=arguments[1]),j instanceof Error)throw j;var _=new Error('Unhandled "error" event. ('+j+")");throw _.context=j,_}if(!(F=R[N]))return!1;var x=typeof F=="function";switch(P=arguments.length){case 1:h(F,x,this);break;case 2:m(F,x,this,arguments[1]);break;case 3:g(F,x,this,arguments[1],arguments[2]);break;case 4:p(F,x,this,arguments[1],arguments[2],arguments[3]);break;default:for(L=new Array(P-1),k=1;k<P;k++)L[k-1]=arguments[k];y(F,x,this,L)}return!0},c.prototype.addListener=function(N,j){return b(this,N,j,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(N,j){return b(this,N,j,!0)},c.prototype.once=function(N,j){if(typeof j!="function")throw new TypeError('"listener" argument must be a function');return this.on(N,E(this,N,j)),this},c.prototype.prependOnceListener=function(N,j){if(typeof j!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(N,E(this,N,j)),this},c.prototype.removeListener=function(N,j){var F,P,L,k,R;if(typeof j!="function")throw new TypeError('"listener" argument must be a function');if(!(P=this._events))return this;if(!(F=P[N]))return this;if(F===j||F.listener===j)--this._eventsCount==0?this._events=s(null):(delete P[N],P.removeListener&&this.emit("removeListener",N,F.listener||j));else if(typeof F!="function"){for(L=-1,k=F.length-1;k>=0;k--)if(F[k]===j||F[k].listener===j){R=F[k].listener,L=k;break}if(L<0)return this;L===0?F.shift():function(C,_){for(var x=_,w=x+1,S=C.length;w<S;x+=1,w+=1)C[x]=C[w];C.pop()}(F,L),F.length===1&&(P[N]=F[0]),P.removeListener&&this.emit("removeListener",N,R||j)}return this},c.prototype.removeAllListeners=function(N){var j,F,P;if(!(F=this._events))return this;if(!F.removeListener)return arguments.length===0?(this._events=s(null),this._eventsCount=0):F[N]&&(--this._eventsCount==0?this._events=s(null):delete F[N]),this;if(arguments.length===0){var L,k=o(F);for(P=0;P<k.length;++P)(L=k[P])!=="removeListener"&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=s(null),this._eventsCount=0,this}if(typeof(j=F[N])=="function")this.removeListener(N,j);else if(j)for(P=j.length-1;P>=0;P--)this.removeListener(N,j[P]);return this},c.prototype.listeners=function(N){return M(this,N,!0)},c.prototype.rawListeners=function(N){return M(this,N,!1)},c.listenerCount=function(N,j){return typeof N.listenerCount=="function"?N.listenerCount(j):W.call(N,j)},c.prototype.listenerCount=W,c.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(t,n,i){var s=t("safe-buffer").Buffer,o=t("md5.js");n.exports=function(l,c,a,u){if(s.isBuffer(l)||(l=s.from(l,"binary")),c&&(s.isBuffer(c)||(c=s.from(c,"binary")),c.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var d=a/8,f=s.alloc(d),h=s.alloc(u||0),m=s.alloc(0);d>0||u>0;){var g=new o;g.update(m),g.update(l),c&&g.update(c),m=g.digest();var p=0;if(d>0){var y=f.length-d;p=Math.min(d,m.length),m.copy(f,y,0,p),d-=p}if(p<m.length&&u>0){var b=h.length-u,v=Math.min(u,m.length-p);m.copy(h,b,p,p+v),u-=v}}return m.fill(0),{key:f,iv:h}}},{"md5.js":450,"safe-buffer":494}],424:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.CsvParserStream=i.ParserOptions=i.parseFile=i.parseStream=i.parseString=i.parse=i.FormatterOptions=i.CsvFormatterStream=i.writeToPath=i.writeToString=i.writeToBuffer=i.writeToStream=i.write=i.format=void 0;var s=t("@fast-csv/format");Object.defineProperty(i,"format",{enumerable:!0,get:function(){return s.format}}),Object.defineProperty(i,"write",{enumerable:!0,get:function(){return s.write}}),Object.defineProperty(i,"writeToStream",{enumerable:!0,get:function(){return s.writeToStream}}),Object.defineProperty(i,"writeToBuffer",{enumerable:!0,get:function(){return s.writeToBuffer}}),Object.defineProperty(i,"writeToString",{enumerable:!0,get:function(){return s.writeToString}}),Object.defineProperty(i,"writeToPath",{enumerable:!0,get:function(){return s.writeToPath}}),Object.defineProperty(i,"CsvFormatterStream",{enumerable:!0,get:function(){return s.CsvFormatterStream}}),Object.defineProperty(i,"FormatterOptions",{enumerable:!0,get:function(){return s.FormatterOptions}});var o=t("@fast-csv/parse");Object.defineProperty(i,"parse",{enumerable:!0,get:function(){return o.parse}}),Object.defineProperty(i,"parseString",{enumerable:!0,get:function(){return o.parseString}}),Object.defineProperty(i,"parseStream",{enumerable:!0,get:function(){return o.parseStream}}),Object.defineProperty(i,"parseFile",{enumerable:!0,get:function(){return o.parseFile}}),Object.defineProperty(i,"ParserOptions",{enumerable:!0,get:function(){return o.ParserOptions}}),Object.defineProperty(i,"CsvParserStream",{enumerable:!0,get:function(){return o.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(t,n,i){var s=t("safe-buffer").Buffer,o=t("readable-stream").Transform;function l(c){o.call(this),this._block=s.allocUnsafe(c),this._blockSize=c,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}t("inherits")(l,o),l.prototype._transform=function(c,a,u){var d=null;try{this.update(c,a)}catch(f){d=f}u(d)},l.prototype._flush=function(c){var a=null;try{this.push(this.digest())}catch(u){a=u}c(a)},l.prototype.update=function(c,a){if(function(g,p){if(!s.isBuffer(g)&&typeof g!="string")throw new TypeError(p+" must be a string or a buffer")}(c,"Data"),this._finalized)throw new Error("Digest already called");s.isBuffer(c)||(c=s.from(c,a));for(var u=this._block,d=0;this._blockOffset+c.length-d>=this._blockSize;){for(var f=this._blockOffset;f<this._blockSize;)u[f++]=c[d++];this._update(),this._blockOffset=0}for(;d<c.length;)u[this._blockOffset++]=c[d++];for(var h=0,m=8*c.length;m>0;++h)this._length[h]+=m,(m=this._length[h]/4294967296|0)>0&&(this._length[h]-=4294967296*m);return this},l.prototype._update=function(){throw new Error("_update is not implemented")},l.prototype.digest=function(c){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var a=this._digest();c!==void 0&&(a=a.toString(c)),this._block.fill(0),this._blockOffset=0;for(var u=0;u<4;++u)this._length[u]=0;return a},l.prototype._digest=function(){throw new Error("_digest is not implemented")},n.exports=l},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(t,n,i){var s=i;s.utils=t("./hash/utils"),s.common=t("./hash/common"),s.sha=t("./hash/sha"),s.ripemd=t("./hash/ripemd"),s.hmac=t("./hash/hmac"),s.sha1=s.sha.sha1,s.sha256=s.sha.sha256,s.sha224=s.sha.sha224,s.sha384=s.sha.sha384,s.sha512=s.sha.sha512,s.ripemd160=s.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(t,n,i){var s=t("./utils"),o=t("minimalistic-assert");function l(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}i.BlockHash=l,l.prototype.update=function(c,a){if(c=s.toArray(c,a),this.pending?this.pending=this.pending.concat(c):this.pending=c,this.pendingTotal+=c.length,this.pending.length>=this._delta8){var u=(c=this.pending).length%this._delta8;this.pending=c.slice(c.length-u,c.length),this.pending.length===0&&(this.pending=null),c=s.join32(c,0,c.length-u,this.endian);for(var d=0;d<c.length;d+=this._delta32)this._update(c,d,d+this._delta32)}return this},l.prototype.digest=function(c){return this.update(this._pad()),o(this.pending===null),this._digest(c)},l.prototype._pad=function(){var c=this.pendingTotal,a=this._delta8,u=a-(c+this.padLength)%a,d=new Array(u+this.padLength);d[0]=128;for(var f=1;f<u;f++)d[f]=0;if(c<<=3,this.endian==="big"){for(var h=8;h<this.padLength;h++)d[f++]=0;d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=c>>>24&255,d[f++]=c>>>16&255,d[f++]=c>>>8&255,d[f++]=255&c}else for(d[f++]=255&c,d[f++]=c>>>8&255,d[f++]=c>>>16&255,d[f++]=c>>>24&255,d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=0,h=8;h<this.padLength;h++)d[f++]=0;return d}},{"./utils":437,"minimalistic-assert":453}],428:[function(t,n,i){var s=t("./utils"),o=t("minimalistic-assert");function l(c,a,u){if(!(this instanceof l))return new l(c,a,u);this.Hash=c,this.blockSize=c.blockSize/8,this.outSize=c.outSize/8,this.inner=null,this.outer=null,this._init(s.toArray(a,u))}n.exports=l,l.prototype._init=function(c){c.length>this.blockSize&&(c=new this.Hash().update(c).digest()),o(c.length<=this.blockSize);for(var a=c.length;a<this.blockSize;a++)c.push(0);for(a=0;a<c.length;a++)c[a]^=54;for(this.inner=new this.Hash().update(c),a=0;a<c.length;a++)c[a]^=106;this.outer=new this.Hash().update(c)},l.prototype.update=function(c,a){return this.inner.update(c,a),this},l.prototype.digest=function(c){return this.outer.update(this.inner.digest()),this.outer.digest(c)}},{"./utils":437,"minimalistic-assert":453}],429:[function(t,n,i){var s=t("./utils"),o=t("./common"),l=s.rotl32,c=s.sum32,a=s.sum32_3,u=s.sum32_4,d=o.BlockHash;function f(){if(!(this instanceof f))return new f;d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(E,M,W,$){return E<=15?M^W^$:E<=31?M&W|~M&$:E<=47?(M|~W)^$:E<=63?M&$|W&~$:M^(W|~$)}function m(E){return E<=15?0:E<=31?1518500249:E<=47?1859775393:E<=63?2400959708:2840853838}function g(E){return E<=15?1352829926:E<=31?1548603684:E<=47?1836072691:E<=63?2053994217:0}s.inherits(f,d),i.ripemd160=f,f.blockSize=512,f.outSize=160,f.hmacStrength=192,f.padLength=64,f.prototype._update=function(E,M){for(var W=this.h[0],$=this.h[1],N=this.h[2],j=this.h[3],F=this.h[4],P=W,L=$,k=N,R=j,C=F,_=0;_<80;_++){var x=c(l(u(W,h(_,$,N,j),E[p[_]+M],m(_)),b[_]),F);W=F,F=j,j=l(N,10),N=$,$=x,x=c(l(u(P,h(79-_,L,k,R),E[y[_]+M],g(_)),v[_]),C),P=C,C=R,R=l(k,10),k=L,L=x}x=a(this.h[1],N,R),this.h[1]=a(this.h[2],j,C),this.h[2]=a(this.h[3],F,P),this.h[3]=a(this.h[4],W,L),this.h[4]=a(this.h[0],$,k),this.h[0]=x},f.prototype._digest=function(E){return E==="hex"?s.toHex32(this.h,"little"):s.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],b=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(t,n,i){i.sha1=t("./sha/1"),i.sha224=t("./sha/224"),i.sha256=t("./sha/256"),i.sha384=t("./sha/384"),i.sha512=t("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(t,n,i){var s=t("../utils"),o=t("../common"),l=t("./common"),c=s.rotl32,a=s.sum32,u=s.sum32_5,d=l.ft_1,f=o.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function m(){if(!(this instanceof m))return new m;f.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}s.inherits(m,f),n.exports=m,m.blockSize=512,m.outSize=160,m.hmacStrength=80,m.padLength=64,m.prototype._update=function(g,p){for(var y=this.W,b=0;b<16;b++)y[b]=g[p+b];for(;b<y.length;b++)y[b]=c(y[b-3]^y[b-8]^y[b-14]^y[b-16],1);var v=this.h[0],E=this.h[1],M=this.h[2],W=this.h[3],$=this.h[4];for(b=0;b<y.length;b++){var N=~~(b/20),j=u(c(v,5),d(N,E,M,W),$,y[b],h[N]);$=W,W=M,M=c(E,30),E=v,v=j}this.h[0]=a(this.h[0],v),this.h[1]=a(this.h[1],E),this.h[2]=a(this.h[2],M),this.h[3]=a(this.h[3],W),this.h[4]=a(this.h[4],$)},m.prototype._digest=function(g){return g==="hex"?s.toHex32(this.h,"big"):s.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(t,n,i){var s=t("../utils"),o=t("./256");function l(){if(!(this instanceof l))return new l;o.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}s.inherits(l,o),n.exports=l,l.blockSize=512,l.outSize=224,l.hmacStrength=192,l.padLength=64,l.prototype._digest=function(c){return c==="hex"?s.toHex32(this.h.slice(0,7),"big"):s.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(t,n,i){var s=t("../utils"),o=t("../common"),l=t("./common"),c=t("minimalistic-assert"),a=s.sum32,u=s.sum32_4,d=s.sum32_5,f=l.ch32,h=l.maj32,m=l.s0_256,g=l.s1_256,p=l.g0_256,y=l.g1_256,b=o.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function E(){if(!(this instanceof E))return new E;b.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}s.inherits(E,b),n.exports=E,E.blockSize=512,E.outSize=256,E.hmacStrength=192,E.padLength=64,E.prototype._update=function(M,W){for(var $=this.W,N=0;N<16;N++)$[N]=M[W+N];for(;N<$.length;N++)$[N]=u(y($[N-2]),$[N-7],p($[N-15]),$[N-16]);var j=this.h[0],F=this.h[1],P=this.h[2],L=this.h[3],k=this.h[4],R=this.h[5],C=this.h[6],_=this.h[7];for(c(this.k.length===$.length),N=0;N<$.length;N++){var x=d(_,g(k),f(k,R,C),this.k[N],$[N]),w=a(m(j),h(j,F,P));_=C,C=R,R=k,k=a(L,x),L=P,P=F,F=j,j=a(x,w)}this.h[0]=a(this.h[0],j),this.h[1]=a(this.h[1],F),this.h[2]=a(this.h[2],P),this.h[3]=a(this.h[3],L),this.h[4]=a(this.h[4],k),this.h[5]=a(this.h[5],R),this.h[6]=a(this.h[6],C),this.h[7]=a(this.h[7],_)},E.prototype._digest=function(M){return M==="hex"?s.toHex32(this.h,"big"):s.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(t,n,i){var s=t("../utils"),o=t("./512");function l(){if(!(this instanceof l))return new l;o.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}s.inherits(l,o),n.exports=l,l.blockSize=1024,l.outSize=384,l.hmacStrength=192,l.padLength=128,l.prototype._digest=function(c){return c==="hex"?s.toHex32(this.h.slice(0,12),"big"):s.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(t,n,i){var s=t("../utils"),o=t("../common"),l=t("minimalistic-assert"),c=s.rotr64_hi,a=s.rotr64_lo,u=s.shr64_hi,d=s.shr64_lo,f=s.sum64,h=s.sum64_hi,m=s.sum64_lo,g=s.sum64_4_hi,p=s.sum64_4_lo,y=s.sum64_5_hi,b=s.sum64_5_lo,v=o.BlockHash,E=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function M(){if(!(this instanceof M))return new M;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=E,this.W=new Array(160)}function W(w,S,I,z,A){var H=w&I^~w&A;return H<0&&(H+=4294967296),H}function $(w,S,I,z,A,H){var K=S&z^~S&H;return K<0&&(K+=4294967296),K}function N(w,S,I,z,A){var H=w&I^w&A^I&A;return H<0&&(H+=4294967296),H}function j(w,S,I,z,A,H){var K=S&z^S&H^z&H;return K<0&&(K+=4294967296),K}function F(w,S){var I=c(w,S,28)^c(S,w,2)^c(S,w,7);return I<0&&(I+=4294967296),I}function P(w,S){var I=a(w,S,28)^a(S,w,2)^a(S,w,7);return I<0&&(I+=4294967296),I}function L(w,S){var I=c(w,S,14)^c(w,S,18)^c(S,w,9);return I<0&&(I+=4294967296),I}function k(w,S){var I=a(w,S,14)^a(w,S,18)^a(S,w,9);return I<0&&(I+=4294967296),I}function R(w,S){var I=c(w,S,1)^c(w,S,8)^u(w,S,7);return I<0&&(I+=4294967296),I}function C(w,S){var I=a(w,S,1)^a(w,S,8)^d(w,S,7);return I<0&&(I+=4294967296),I}function _(w,S){var I=c(w,S,19)^c(S,w,29)^u(w,S,6);return I<0&&(I+=4294967296),I}function x(w,S){var I=a(w,S,19)^a(S,w,29)^d(w,S,6);return I<0&&(I+=4294967296),I}s.inherits(M,v),n.exports=M,M.blockSize=1024,M.outSize=512,M.hmacStrength=192,M.padLength=128,M.prototype._prepareBlock=function(w,S){for(var I=this.W,z=0;z<32;z++)I[z]=w[S+z];for(;z<I.length;z+=2){var A=_(I[z-4],I[z-3]),H=x(I[z-4],I[z-3]),K=I[z-14],J=I[z-13],V=R(I[z-30],I[z-29]),X=C(I[z-30],I[z-29]),D=I[z-32],O=I[z-31];I[z]=g(A,H,K,J,V,X,D,O),I[z+1]=p(A,H,K,J,V,X,D,O)}},M.prototype._update=function(w,S){this._prepareBlock(w,S);var I=this.W,z=this.h[0],A=this.h[1],H=this.h[2],K=this.h[3],J=this.h[4],V=this.h[5],X=this.h[6],D=this.h[7],O=this.h[8],G=this.h[9],Z=this.h[10],ue=this.h[11],te=this.h[12],oe=this.h[13],re=this.h[14],be=this.h[15];l(this.k.length===I.length);for(var ie=0;ie<I.length;ie+=2){var le=re,ae=be,Se=L(O,G),ve=k(O,G),ke=W(O,G,Z,ue,te),Ne=$(O,G,Z,ue,te,oe),ze=this.k[ie],we=this.k[ie+1],De=I[ie],He=I[ie+1],We=y(le,ae,Se,ve,ke,Ne,ze,we,De,He),et=b(le,ae,Se,ve,ke,Ne,ze,we,De,He);le=F(z,A),ae=P(z,A),Se=N(z,A,H,K,J),ve=j(z,A,H,K,J,V);var St=h(le,ae,Se,ve),lt=m(le,ae,Se,ve);re=te,be=oe,te=Z,oe=ue,Z=O,ue=G,O=h(X,D,We,et),G=m(D,D,We,et),X=J,D=V,J=H,V=K,H=z,K=A,z=h(We,et,St,lt),A=m(We,et,St,lt)}f(this.h,0,z,A),f(this.h,2,H,K),f(this.h,4,J,V),f(this.h,6,X,D),f(this.h,8,O,G),f(this.h,10,Z,ue),f(this.h,12,te,oe),f(this.h,14,re,be)},M.prototype._digest=function(w){return w==="hex"?s.toHex32(this.h,"big"):s.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(t,n,i){var s=t("../utils").rotr32;function o(a,u,d){return a&u^~a&d}function l(a,u,d){return a&u^a&d^u&d}function c(a,u,d){return a^u^d}i.ft_1=function(a,u,d,f){return a===0?o(u,d,f):a===1||a===3?c(u,d,f):a===2?l(u,d,f):void 0},i.ch32=o,i.maj32=l,i.p32=c,i.s0_256=function(a){return s(a,2)^s(a,13)^s(a,22)},i.s1_256=function(a){return s(a,6)^s(a,11)^s(a,25)},i.g0_256=function(a){return s(a,7)^s(a,18)^a>>>3},i.g1_256=function(a){return s(a,17)^s(a,19)^a>>>10}},{"../utils":437}],437:[function(t,n,i){var s=t("minimalistic-assert"),o=t("inherits");function l(d,f){return(64512&d.charCodeAt(f))==55296&&!(f<0||f+1>=d.length)&&(64512&d.charCodeAt(f+1))==56320}function c(d){return(d>>>24|d>>>8&65280|d<<8&16711680|(255&d)<<24)>>>0}function a(d){return d.length===1?"0"+d:d}function u(d){return d.length===7?"0"+d:d.length===6?"00"+d:d.length===5?"000"+d:d.length===4?"0000"+d:d.length===3?"00000"+d:d.length===2?"000000"+d:d.length===1?"0000000"+d:d}i.inherits=o,i.toArray=function(d,f){if(Array.isArray(d))return d.slice();if(!d)return[];var h=[];if(typeof d=="string")if(f){if(f==="hex")for((d=d.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(d="0"+d),g=0;g<d.length;g+=2)h.push(parseInt(d[g]+d[g+1],16))}else for(var m=0,g=0;g<d.length;g++){var p=d.charCodeAt(g);p<128?h[m++]=p:p<2048?(h[m++]=p>>6|192,h[m++]=63&p|128):l(d,g)?(p=65536+((1023&p)<<10)+(1023&d.charCodeAt(++g)),h[m++]=p>>18|240,h[m++]=p>>12&63|128,h[m++]=p>>6&63|128,h[m++]=63&p|128):(h[m++]=p>>12|224,h[m++]=p>>6&63|128,h[m++]=63&p|128)}else for(g=0;g<d.length;g++)h[g]=0|d[g];return h},i.toHex=function(d){for(var f="",h=0;h<d.length;h++)f+=a(d[h].toString(16));return f},i.htonl=c,i.toHex32=function(d,f){for(var h="",m=0;m<d.length;m++){var g=d[m];f==="little"&&(g=c(g)),h+=u(g.toString(16))}return h},i.zero2=a,i.zero8=u,i.join32=function(d,f,h,m){var g=h-f;s(g%4==0);for(var p=new Array(g/4),y=0,b=f;y<p.length;y++,b+=4){var v;v=m==="big"?d[b]<<24|d[b+1]<<16|d[b+2]<<8|d[b+3]:d[b+3]<<24|d[b+2]<<16|d[b+1]<<8|d[b],p[y]=v>>>0}return p},i.split32=function(d,f){for(var h=new Array(4*d.length),m=0,g=0;m<d.length;m++,g+=4){var p=d[m];f==="big"?(h[g]=p>>>24,h[g+1]=p>>>16&255,h[g+2]=p>>>8&255,h[g+3]=255&p):(h[g+3]=p>>>24,h[g+2]=p>>>16&255,h[g+1]=p>>>8&255,h[g]=255&p)}return h},i.rotr32=function(d,f){return d>>>f|d<<32-f},i.rotl32=function(d,f){return d<<f|d>>>32-f},i.sum32=function(d,f){return d+f>>>0},i.sum32_3=function(d,f,h){return d+f+h>>>0},i.sum32_4=function(d,f,h,m){return d+f+h+m>>>0},i.sum32_5=function(d,f,h,m,g){return d+f+h+m+g>>>0},i.sum64=function(d,f,h,m){var g=d[f],p=m+d[f+1]>>>0,y=(p<m?1:0)+h+g;d[f]=y>>>0,d[f+1]=p},i.sum64_hi=function(d,f,h,m){return(f+m>>>0<f?1:0)+d+h>>>0},i.sum64_lo=function(d,f,h,m){return f+m>>>0},i.sum64_4_hi=function(d,f,h,m,g,p,y,b){var v=0,E=f;return v+=(E=E+m>>>0)<f?1:0,v+=(E=E+p>>>0)<p?1:0,d+h+g+y+(v+=(E=E+b>>>0)<b?1:0)>>>0},i.sum64_4_lo=function(d,f,h,m,g,p,y,b){return f+m+p+b>>>0},i.sum64_5_hi=function(d,f,h,m,g,p,y,b,v,E){var M=0,W=f;return M+=(W=W+m>>>0)<f?1:0,M+=(W=W+p>>>0)<p?1:0,M+=(W=W+b>>>0)<b?1:0,d+h+g+y+v+(M+=(W=W+E>>>0)<E?1:0)>>>0},i.sum64_5_lo=function(d,f,h,m,g,p,y,b,v,E){return f+m+p+b+E>>>0},i.rotr64_hi=function(d,f,h){return(f<<32-h|d>>>h)>>>0},i.rotr64_lo=function(d,f,h){return(d<<32-h|f>>>h)>>>0},i.shr64_hi=function(d,f,h){return d>>>h},i.shr64_lo=function(d,f,h){return(d<<32-h|f>>>h)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(t,n,i){var s=t("hash.js"),o=t("minimalistic-crypto-utils"),l=t("minimalistic-assert");function c(a){if(!(this instanceof c))return new c(a);this.hash=a.hash,this.predResist=!!a.predResist,this.outLen=this.hash.outSize,this.minEntropy=a.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var u=o.toArray(a.entropy,a.entropyEnc||"hex"),d=o.toArray(a.nonce,a.nonceEnc||"hex"),f=o.toArray(a.pers,a.persEnc||"hex");l(u.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(u,d,f)}n.exports=c,c.prototype._init=function(a,u,d){var f=a.concat(u).concat(d);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var h=0;h<this.V.length;h++)this.K[h]=0,this.V[h]=1;this._update(f),this._reseed=1,this.reseedInterval=281474976710656},c.prototype._hmac=function(){return new s.hmac(this.hash,this.K)},c.prototype._update=function(a){var u=this._hmac().update(this.V).update([0]);a&&(u=u.update(a)),this.K=u.digest(),this.V=this._hmac().update(this.V).digest(),a&&(this.K=this._hmac().update(this.V).update([1]).update(a).digest(),this.V=this._hmac().update(this.V).digest())},c.prototype.reseed=function(a,u,d,f){typeof u!="string"&&(f=d,d=u,u=null),a=o.toArray(a,u),d=o.toArray(d,f),l(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(a.concat(d||[])),this._reseed=1},c.prototype.generate=function(a,u,d,f){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof u!="string"&&(f=d,d=u,u=null),d&&(d=o.toArray(d,f||"hex"),this._update(d));for(var h=[];h.length<a;)this.V=this._hmac().update(this.V).digest(),h=h.concat(this.V);var m=h.slice(0,a);return this._update(d),this._reseed++,o.encode(m,u)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(t,n,i){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */i.read=function(s,o,l,c,a){var u,d,f=8*a-c-1,h=(1<<f)-1,m=h>>1,g=-7,p=l?a-1:0,y=l?-1:1,b=s[o+p];for(p+=y,u=b&(1<<-g)-1,b>>=-g,g+=f;g>0;u=256*u+s[o+p],p+=y,g-=8);for(d=u&(1<<-g)-1,u>>=-g,g+=c;g>0;d=256*d+s[o+p],p+=y,g-=8);if(u===0)u=1-m;else{if(u===h)return d?NaN:1/0*(b?-1:1);d+=Math.pow(2,c),u-=m}return(b?-1:1)*d*Math.pow(2,u-c)},i.write=function(s,o,l,c,a,u){var d,f,h,m=8*u-a-1,g=(1<<m)-1,p=g>>1,y=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=c?0:u-1,v=c?1:-1,E=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(f=isNaN(o)?1:0,d=g):(d=Math.floor(Math.log(o)/Math.LN2),o*(h=Math.pow(2,-d))<1&&(d--,h*=2),(o+=d+p>=1?y/h:y*Math.pow(2,1-p))*h>=2&&(d++,h/=2),d+p>=g?(f=0,d=g):d+p>=1?(f=(o*h-1)*Math.pow(2,a),d+=p):(f=o*Math.pow(2,p-1)*Math.pow(2,a),d=0));a>=8;s[l+b]=255&f,b+=v,f/=256,a-=8);for(d=d<<a|f,m+=a;m>0;s[l+b]=255&d,b+=v,d/=256,m-=8);s[l+b-v]|=128*E}},{}],440:[function(t,n,i){typeof Object.create=="function"?n.exports=function(s,o){o&&(s.super_=o,s.prototype=Object.create(o.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(s,o){if(o){s.super_=o;var l=function(){};l.prototype=o.prototype,s.prototype=new l,s.prototype.constructor=s}}},{}],441:[function(t,n,i){(function(s,o,l,c,a,u,d,f){(function(){/*!

	JSZip v3.10.1 - A JavaScript class for generating and reading zip files
	<http://stuartk.com/jszip>

	(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
	Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

	JSZip uses the library pako released under the MIT license :
	https://github.com/nodeca/pako/blob/main/LICENSE
	*/(function(h){typeof i=="object"&&n!==void 0?n.exports=h():(typeof window<"u"?window:o!==void 0?o:typeof self<"u"?self:this).JSZip=h()})(function(){return function h(m,g,p){function y(E,M){if(!g[E]){if(!m[E]){var W=typeof t=="function"&&t;if(!M&&W)return W(E,!0);if(b)return b(E,!0);var $=new Error("Cannot find module '"+E+"'");throw $.code="MODULE_NOT_FOUND",$}var N=g[E]={exports:{}};m[E][0].call(N.exports,function(j){return y(m[E][1][j]||j)},N,N.exports,h,m,g,p)}return g[E].exports}for(var b=typeof t=="function"&&t,v=0;v<p.length;v++)y(p[v]);return y}({1:[function(h,m,g){var p=h("./utils"),y=h("./support"),b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";g.encode=function(v){for(var E,M,W,$,N,j,F,P=[],L=0,k=v.length,R=k,C=p.getTypeOf(v)!=="string";L<v.length;)R=k-L,W=C?(E=v[L++],M=L<k?v[L++]:0,L<k?v[L++]:0):(E=v.charCodeAt(L++),M=L<k?v.charCodeAt(L++):0,L<k?v.charCodeAt(L++):0),$=E>>2,N=(3&E)<<4|M>>4,j=1<R?(15&M)<<2|W>>6:64,F=2<R?63&W:64,P.push(b.charAt($)+b.charAt(N)+b.charAt(j)+b.charAt(F));return P.join("")},g.decode=function(v){var E,M,W,$,N,j,F=0,P=0,L="data:";if(v.substr(0,L.length)===L)throw new Error("Invalid base64 input, it looks like a data url.");var k,R=3*(v=v.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(v.charAt(v.length-1)===b.charAt(64)&&R--,v.charAt(v.length-2)===b.charAt(64)&&R--,R%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=y.uint8array?new Uint8Array(0|R):new Array(0|R);F<v.length;)E=b.indexOf(v.charAt(F++))<<2|($=b.indexOf(v.charAt(F++)))>>4,M=(15&$)<<4|(N=b.indexOf(v.charAt(F++)))>>2,W=(3&N)<<6|(j=b.indexOf(v.charAt(F++))),k[P++]=E,N!==64&&(k[P++]=M),j!==64&&(k[P++]=W);return k}},{"./support":30,"./utils":32}],2:[function(h,m,g){var p=h("./external"),y=h("./stream/DataWorker"),b=h("./stream/Crc32Probe"),v=h("./stream/DataLengthProbe");function E(M,W,$,N,j){this.compressedSize=M,this.uncompressedSize=W,this.crc32=$,this.compression=N,this.compressedContent=j}E.prototype={getContentWorker:function(){var M=new y(p.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new v("data_length")),W=this;return M.on("end",function(){if(this.streamInfo.data_length!==W.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),M},getCompressedWorker:function(){return new y(p.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},E.createWorkerFrom=function(M,W,$){return M.pipe(new b).pipe(new v("uncompressedSize")).pipe(W.compressWorker($)).pipe(new v("compressedSize")).withStreamInfo("compression",W)},m.exports=E},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(h,m,g){var p=h("./stream/GenericWorker");g.STORE={magic:"\0\0",compressWorker:function(){return new p("STORE compression")},uncompressWorker:function(){return new p("STORE decompression")}},g.DEFLATE=h("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(h,m,g){var p=h("./utils"),y=function(){for(var b,v=[],E=0;E<256;E++){b=E;for(var M=0;M<8;M++)b=1&b?3988292384^b>>>1:b>>>1;v[E]=b}return v}();m.exports=function(b,v){return b!==void 0&&b.length?p.getTypeOf(b)!=="string"?function(E,M,W,$){var N=y,j=0+W;E^=-1;for(var F=0;F<j;F++)E=E>>>8^N[255&(E^M[F])];return-1^E}(0|v,b,b.length):function(E,M,W,$){var N=y,j=0+W;E^=-1;for(var F=0;F<j;F++)E=E>>>8^N[255&(E^M.charCodeAt(F))];return-1^E}(0|v,b,b.length):0}},{"./utils":32}],5:[function(h,m,g){g.base64=!1,g.binary=!1,g.dir=!1,g.createFolders=!0,g.date=null,g.compression=null,g.compressionOptions=null,g.comment=null,g.unixPermissions=null,g.dosPermissions=null},{}],6:[function(h,m,g){var p;p=typeof Promise<"u"?Promise:h("lie"),m.exports={Promise:p}},{lie:37}],7:[function(h,m,g){var p=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",y=h("pako"),b=h("./utils"),v=h("./stream/GenericWorker"),E=p?"uint8array":"array";function M(W,$){v.call(this,"FlateWorker/"+W),this._pako=null,this._pakoAction=W,this._pakoOptions=$,this.meta={}}g.magic="\b\0",b.inherits(M,v),M.prototype.processChunk=function(W){this.meta=W.meta,this._pako===null&&this._createPako(),this._pako.push(b.transformTo(E,W.data),!1)},M.prototype.flush=function(){v.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},M.prototype.cleanUp=function(){v.prototype.cleanUp.call(this),this._pako=null},M.prototype._createPako=function(){this._pako=new y[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var W=this;this._pako.onData=function($){W.push({data:$,meta:W.meta})}},g.compressWorker=function(W){return new M("Deflate",W)},g.uncompressWorker=function(){return new M("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(h,m,g){function p(N,j){var F,P="";for(F=0;F<j;F++)P+=String.fromCharCode(255&N),N>>>=8;return P}function y(N,j,F,P,L,k){var R,C,_=N.file,x=N.compression,w=k!==E.utf8encode,S=b.transformTo("string",k(_.name)),I=b.transformTo("string",E.utf8encode(_.name)),z=_.comment,A=b.transformTo("string",k(z)),H=b.transformTo("string",E.utf8encode(z)),K=I.length!==_.name.length,J=H.length!==z.length,V="",X="",D="",O=_.dir,G=_.date,Z={crc32:0,compressedSize:0,uncompressedSize:0};j&&!F||(Z.crc32=N.crc32,Z.compressedSize=N.compressedSize,Z.uncompressedSize=N.uncompressedSize);var ue=0;j&&(ue|=8),w||!K&&!J||(ue|=2048);var te=0,oe=0;O&&(te|=16),L==="UNIX"?(oe=798,te|=function(be,ie){var le=be;return be||(le=ie?16893:33204),(65535&le)<<16}(_.unixPermissions,O)):(oe=20,te|=function(be){return 63&(be||0)}(_.dosPermissions)),R=G.getUTCHours(),R<<=6,R|=G.getUTCMinutes(),R<<=5,R|=G.getUTCSeconds()/2,C=G.getUTCFullYear()-1980,C<<=4,C|=G.getUTCMonth()+1,C<<=5,C|=G.getUTCDate(),K&&(X=p(1,1)+p(M(S),4)+I,V+="up"+p(X.length,2)+X),J&&(D=p(1,1)+p(M(A),4)+H,V+="uc"+p(D.length,2)+D);var re="";return re+=`
\0`,re+=p(ue,2),re+=x.magic,re+=p(R,2),re+=p(C,2),re+=p(Z.crc32,4),re+=p(Z.compressedSize,4),re+=p(Z.uncompressedSize,4),re+=p(S.length,2),re+=p(V.length,2),{fileRecord:W.LOCAL_FILE_HEADER+re+S+V,dirRecord:W.CENTRAL_FILE_HEADER+p(oe,2)+re+p(A.length,2)+"\0\0\0\0"+p(te,4)+p(P,4)+S+V+A}}var b=h("../utils"),v=h("../stream/GenericWorker"),E=h("../utf8"),M=h("../crc32"),W=h("../signature");function $(N,j,F,P){v.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=j,this.zipPlatform=F,this.encodeFileName=P,this.streamFiles=N,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}b.inherits($,v),$.prototype.push=function(N){var j=N.meta.percent||0,F=this.entriesCount,P=this._sources.length;this.accumulate?this.contentBuffer.push(N):(this.bytesWritten+=N.data.length,v.prototype.push.call(this,{data:N.data,meta:{currentFile:this.currentFile,percent:F?(j+100*(F-P-1))/F:100}}))},$.prototype.openedSource=function(N){this.currentSourceOffset=this.bytesWritten,this.currentFile=N.file.name;var j=this.streamFiles&&!N.file.dir;if(j){var F=y(N,j,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:F.fileRecord,meta:{percent:0}})}else this.accumulate=!0},$.prototype.closedSource=function(N){this.accumulate=!1;var j=this.streamFiles&&!N.file.dir,F=y(N,j,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(F.dirRecord),j)this.push({data:function(P){return W.DATA_DESCRIPTOR+p(P.crc32,4)+p(P.compressedSize,4)+p(P.uncompressedSize,4)}(N),meta:{percent:100}});else for(this.push({data:F.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},$.prototype.flush=function(){for(var N=this.bytesWritten,j=0;j<this.dirRecords.length;j++)this.push({data:this.dirRecords[j],meta:{percent:100}});var F=this.bytesWritten-N,P=function(L,k,R,C,_){var x=b.transformTo("string",_(C));return W.CENTRAL_DIRECTORY_END+"\0\0\0\0"+p(L,2)+p(L,2)+p(k,4)+p(R,4)+p(x.length,2)+x}(this.dirRecords.length,F,N,this.zipComment,this.encodeFileName);this.push({data:P,meta:{percent:100}})},$.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},$.prototype.registerPrevious=function(N){this._sources.push(N);var j=this;return N.on("data",function(F){j.processChunk(F)}),N.on("end",function(){j.closedSource(j.previous.streamInfo),j._sources.length?j.prepareNextSource():j.end()}),N.on("error",function(F){j.error(F)}),this},$.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},$.prototype.error=function(N){var j=this._sources;if(!v.prototype.error.call(this,N))return!1;for(var F=0;F<j.length;F++)try{j[F].error(N)}catch{}return!0},$.prototype.lock=function(){v.prototype.lock.call(this);for(var N=this._sources,j=0;j<N.length;j++)N[j].lock()},m.exports=$},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(h,m,g){var p=h("../compressions"),y=h("./ZipFileWorker");g.generateWorker=function(b,v,E){var M=new y(v.streamFiles,E,v.platform,v.encodeFileName),W=0;try{b.forEach(function($,N){W++;var j=function(k,R){var C=k||R,_=p[C];if(!_)throw new Error(C+" is not a valid compression method !");return _}(N.options.compression,v.compression),F=N.options.compressionOptions||v.compressionOptions||{},P=N.dir,L=N.date;N._compressWorker(j,F).withStreamInfo("file",{name:$,dir:P,date:L,comment:N.comment||"",unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions}).pipe(M)}),M.entriesCount=W}catch($){M.error($)}return M}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(h,m,g){function p(){if(!(this instanceof p))return new p;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var y=new p;for(var b in this)typeof this[b]!="function"&&(y[b]=this[b]);return y}}(p.prototype=h("./object")).loadAsync=h("./load"),p.support=h("./support"),p.defaults=h("./defaults"),p.version="3.10.1",p.loadAsync=function(y,b){return new p().loadAsync(y,b)},p.external=h("./external"),m.exports=p},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(h,m,g){var p=h("./utils"),y=h("./external"),b=h("./utf8"),v=h("./zipEntries"),E=h("./stream/Crc32Probe"),M=h("./nodejsUtils");function W($){return new y.Promise(function(N,j){var F=$.decompressed.getContentWorker().pipe(new E);F.on("error",function(P){j(P)}).on("end",function(){F.streamInfo.crc32!==$.decompressed.crc32?j(new Error("Corrupted zip : CRC32 mismatch")):N()}).resume()})}m.exports=function($,N){var j=this;return N=p.extend(N||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:b.utf8decode}),M.isNode&&M.isStream($)?y.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):p.prepareContent("the loaded zip file",$,!0,N.optimizedBinaryString,N.base64).then(function(F){var P=new v(N);return P.load(F),P}).then(function(F){var P=[y.Promise.resolve(F)],L=F.files;if(N.checkCRC32)for(var k=0;k<L.length;k++)P.push(W(L[k]));return y.Promise.all(P)}).then(function(F){for(var P=F.shift(),L=P.files,k=0;k<L.length;k++){var R=L[k],C=R.fileNameStr,_=p.resolve(R.fileNameStr);j.file(_,R.decompressed,{binary:!0,optimizedBinaryString:!0,date:R.date,dir:R.dir,comment:R.fileCommentStr.length?R.fileCommentStr:null,unixPermissions:R.unixPermissions,dosPermissions:R.dosPermissions,createFolders:N.createFolders}),R.dir||(j.file(_).unsafeOriginalName=C)}return P.zipComment.length&&(j.comment=P.zipComment),j})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(h,m,g){var p=h("../utils"),y=h("../stream/GenericWorker");function b(v,E){y.call(this,"Nodejs stream input adapter for "+v),this._upstreamEnded=!1,this._bindStream(E)}p.inherits(b,y),b.prototype._bindStream=function(v){var E=this;(this._stream=v).pause(),v.on("data",function(M){E.push({data:M,meta:{percent:0}})}).on("error",function(M){E.isPaused?this.generatedError=M:E.error(M)}).on("end",function(){E.isPaused?E._upstreamEnded=!0:E.end()})},b.prototype.pause=function(){return!!y.prototype.pause.call(this)&&(this._stream.pause(),!0)},b.prototype.resume=function(){return!!y.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},m.exports=b},{"../stream/GenericWorker":28,"../utils":32}],13:[function(h,m,g){var p=h("readable-stream").Readable;function y(b,v,E){p.call(this,v),this._helper=b;var M=this;b.on("data",function(W,$){M.push(W)||M._helper.pause(),E&&E($)}).on("error",function(W){M.emit("error",W)}).on("end",function(){M.push(null)})}h("../utils").inherits(y,p),y.prototype._read=function(){this._helper.resume()},m.exports=y},{"../utils":32,"readable-stream":16}],14:[function(h,m,g){m.exports={isNode:l!==void 0,newBufferFrom:function(p,y){if(l.from&&l.from!==Uint8Array.from)return l.from(p,y);if(typeof p=="number")throw new Error('The "data" argument must not be a number');return new l(p,y)},allocBuffer:function(p){if(l.alloc)return l.alloc(p);var y=new l(p);return y.fill(0),y},isBuffer:function(p){return l.isBuffer(p)},isStream:function(p){return p&&typeof p.on=="function"&&typeof p.pause=="function"&&typeof p.resume=="function"}}},{}],15:[function(h,m,g){function p(_,x,w){var S,I=b.getTypeOf(x),z=b.extend(w||{},M);z.date=z.date||new Date,z.compression!==null&&(z.compression=z.compression.toUpperCase()),typeof z.unixPermissions=="string"&&(z.unixPermissions=parseInt(z.unixPermissions,8)),z.unixPermissions&&16384&z.unixPermissions&&(z.dir=!0),z.dosPermissions&&16&z.dosPermissions&&(z.dir=!0),z.dir&&(_=L(_)),z.createFolders&&(S=P(_))&&k.call(this,S,!0);var A=I==="string"&&z.binary===!1&&z.base64===!1;w&&w.binary!==void 0||(z.binary=!A),(x instanceof W&&x.uncompressedSize===0||z.dir||!x||x.length===0)&&(z.base64=!1,z.binary=!0,x="",z.compression="STORE",I="string");var H;H=x instanceof W||x instanceof v?x:j.isNode&&j.isStream(x)?new F(_,x):b.prepareContent(_,x,z.binary,z.optimizedBinaryString,z.base64);var K=new $(_,H,z);this.files[_]=K}var y=h("./utf8"),b=h("./utils"),v=h("./stream/GenericWorker"),E=h("./stream/StreamHelper"),M=h("./defaults"),W=h("./compressedObject"),$=h("./zipObject"),N=h("./generate"),j=h("./nodejsUtils"),F=h("./nodejs/NodejsStreamInputAdapter"),P=function(_){_.slice(-1)==="/"&&(_=_.substring(0,_.length-1));var x=_.lastIndexOf("/");return 0<x?_.substring(0,x):""},L=function(_){return _.slice(-1)!=="/"&&(_+="/"),_},k=function(_,x){return x=x!==void 0?x:M.createFolders,_=L(_),this.files[_]||p.call(this,_,null,{dir:!0,createFolders:x}),this.files[_]};function R(_){return Object.prototype.toString.call(_)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(_){var x,w,S;for(x in this.files)S=this.files[x],(w=x.slice(this.root.length,x.length))&&x.slice(0,this.root.length)===this.root&&_(w,S)},filter:function(_){var x=[];return this.forEach(function(w,S){_(w,S)&&x.push(S)}),x},file:function(_,x,w){if(arguments.length!==1)return _=this.root+_,p.call(this,_,x,w),this;if(R(_)){var S=_;return this.filter(function(z,A){return!A.dir&&S.test(z)})}var I=this.files[this.root+_];return I&&!I.dir?I:null},folder:function(_){if(!_)return this;if(R(_))return this.filter(function(I,z){return z.dir&&_.test(I)});var x=this.root+_,w=k.call(this,x),S=this.clone();return S.root=w.name,S},remove:function(_){_=this.root+_;var x=this.files[_];if(x||(_.slice(-1)!=="/"&&(_+="/"),x=this.files[_]),x&&!x.dir)delete this.files[_];else for(var w=this.filter(function(I,z){return z.name.slice(0,_.length)===_}),S=0;S<w.length;S++)delete this.files[w[S].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(_){var x,w={};try{if((w=b.extend(_||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:y.utf8encode})).type=w.type.toLowerCase(),w.compression=w.compression.toUpperCase(),w.type==="binarystring"&&(w.type="string"),!w.type)throw new Error("No output type specified.");b.checkSupport(w.type),w.platform!=="darwin"&&w.platform!=="freebsd"&&w.platform!=="linux"&&w.platform!=="sunos"||(w.platform="UNIX"),w.platform==="win32"&&(w.platform="DOS");var S=w.comment||this.comment||"";x=N.generateWorker(this,w,S)}catch(I){(x=new v("error")).error(I)}return new E(x,w.type||"string",w.mimeType)},generateAsync:function(_,x){return this.generateInternalStream(_).accumulate(x)},generateNodeStream:function(_,x){return(_=_||{}).type||(_.type="nodebuffer"),this.generateInternalStream(_).toNodejsStream(x)}};m.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(h,m,g){m.exports=h("stream")},{stream:void 0}],17:[function(h,m,g){var p=h("./DataReader");function y(b){p.call(this,b);for(var v=0;v<this.data.length;v++)b[v]=255&b[v]}h("../utils").inherits(y,p),y.prototype.byteAt=function(b){return this.data[this.zero+b]},y.prototype.lastIndexOfSignature=function(b){for(var v=b.charCodeAt(0),E=b.charCodeAt(1),M=b.charCodeAt(2),W=b.charCodeAt(3),$=this.length-4;0<=$;--$)if(this.data[$]===v&&this.data[$+1]===E&&this.data[$+2]===M&&this.data[$+3]===W)return $-this.zero;return-1},y.prototype.readAndCheckSignature=function(b){var v=b.charCodeAt(0),E=b.charCodeAt(1),M=b.charCodeAt(2),W=b.charCodeAt(3),$=this.readData(4);return v===$[0]&&E===$[1]&&M===$[2]&&W===$[3]},y.prototype.readData=function(b){if(this.checkOffset(b),b===0)return[];var v=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,v},m.exports=y},{"../utils":32,"./DataReader":18}],18:[function(h,m,g){var p=h("../utils");function y(b){this.data=b,this.length=b.length,this.index=0,this.zero=0}y.prototype={checkOffset:function(b){this.checkIndex(this.index+b)},checkIndex:function(b){if(this.length<this.zero+b||b<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+b+"). Corrupted zip ?")},setIndex:function(b){this.checkIndex(b),this.index=b},skip:function(b){this.setIndex(this.index+b)},byteAt:function(){},readInt:function(b){var v,E=0;for(this.checkOffset(b),v=this.index+b-1;v>=this.index;v--)E=(E<<8)+this.byteAt(v);return this.index+=b,E},readString:function(b){return p.transformTo("string",this.readData(b))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var b=this.readInt(4);return new Date(Date.UTC(1980+(b>>25&127),(b>>21&15)-1,b>>16&31,b>>11&31,b>>5&63,(31&b)<<1))}},m.exports=y},{"../utils":32}],19:[function(h,m,g){var p=h("./Uint8ArrayReader");function y(b){p.call(this,b)}h("../utils").inherits(y,p),y.prototype.readData=function(b){this.checkOffset(b);var v=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,v},m.exports=y},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(h,m,g){var p=h("./DataReader");function y(b){p.call(this,b)}h("../utils").inherits(y,p),y.prototype.byteAt=function(b){return this.data.charCodeAt(this.zero+b)},y.prototype.lastIndexOfSignature=function(b){return this.data.lastIndexOf(b)-this.zero},y.prototype.readAndCheckSignature=function(b){return b===this.readData(4)},y.prototype.readData=function(b){this.checkOffset(b);var v=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,v},m.exports=y},{"../utils":32,"./DataReader":18}],21:[function(h,m,g){var p=h("./ArrayReader");function y(b){p.call(this,b)}h("../utils").inherits(y,p),y.prototype.readData=function(b){if(this.checkOffset(b),b===0)return new Uint8Array(0);var v=this.data.subarray(this.zero+this.index,this.zero+this.index+b);return this.index+=b,v},m.exports=y},{"../utils":32,"./ArrayReader":17}],22:[function(h,m,g){var p=h("../utils"),y=h("../support"),b=h("./ArrayReader"),v=h("./StringReader"),E=h("./NodeBufferReader"),M=h("./Uint8ArrayReader");m.exports=function(W){var $=p.getTypeOf(W);return p.checkSupport($),$!=="string"||y.uint8array?$==="nodebuffer"?new E(W):y.uint8array?new M(p.transformTo("uint8array",W)):new b(p.transformTo("array",W)):new v(W)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(h,m,g){g.LOCAL_FILE_HEADER="PK",g.CENTRAL_FILE_HEADER="PK",g.CENTRAL_DIRECTORY_END="PK",g.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",g.ZIP64_CENTRAL_DIRECTORY_END="PK",g.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(h,m,g){var p=h("./GenericWorker"),y=h("../utils");function b(v){p.call(this,"ConvertWorker to "+v),this.destType=v}y.inherits(b,p),b.prototype.processChunk=function(v){this.push({data:y.transformTo(this.destType,v.data),meta:v.meta})},m.exports=b},{"../utils":32,"./GenericWorker":28}],25:[function(h,m,g){var p=h("./GenericWorker"),y=h("../crc32");function b(){p.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}h("../utils").inherits(b,p),b.prototype.processChunk=function(v){this.streamInfo.crc32=y(v.data,this.streamInfo.crc32||0),this.push(v)},m.exports=b},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(h,m,g){var p=h("../utils"),y=h("./GenericWorker");function b(v){y.call(this,"DataLengthProbe for "+v),this.propName=v,this.withStreamInfo(v,0)}p.inherits(b,y),b.prototype.processChunk=function(v){if(v){var E=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=E+v.data.length}y.prototype.processChunk.call(this,v)},m.exports=b},{"../utils":32,"./GenericWorker":28}],27:[function(h,m,g){var p=h("../utils"),y=h("./GenericWorker");function b(v){y.call(this,"DataWorker");var E=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,v.then(function(M){E.dataIsReady=!0,E.data=M,E.max=M&&M.length||0,E.type=p.getTypeOf(M),E.isPaused||E._tickAndRepeat()},function(M){E.error(M)})}p.inherits(b,y),b.prototype.cleanUp=function(){y.prototype.cleanUp.call(this),this.data=null},b.prototype.resume=function(){return!!y.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,p.delay(this._tickAndRepeat,[],this)),!0)},b.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(p.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},b.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var v=null,E=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":v=this.data.substring(this.index,E);break;case"uint8array":v=this.data.subarray(this.index,E);break;case"array":case"nodebuffer":v=this.data.slice(this.index,E)}return this.index=E,this.push({data:v,meta:{percent:this.max?this.index/this.max*100:0}})},m.exports=b},{"../utils":32,"./GenericWorker":28}],28:[function(h,m,g){function p(y){this.name=y||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}p.prototype={push:function(y){this.emit("data",y)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(y){this.emit("error",y)}return!0},error:function(y){return!this.isFinished&&(this.isPaused?this.generatedError=y:(this.isFinished=!0,this.emit("error",y),this.previous&&this.previous.error(y),this.cleanUp()),!0)},on:function(y,b){return this._listeners[y].push(b),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(y,b){if(this._listeners[y])for(var v=0;v<this._listeners[y].length;v++)this._listeners[y][v].call(this,b)},pipe:function(y){return y.registerPrevious(this)},registerPrevious:function(y){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=y.streamInfo,this.mergeStreamInfo(),this.previous=y;var b=this;return y.on("data",function(v){b.processChunk(v)}),y.on("end",function(){b.end()}),y.on("error",function(v){b.error(v)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var y=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),y=!0),this.previous&&this.previous.resume(),!y},flush:function(){},processChunk:function(y){this.push(y)},withStreamInfo:function(y,b){return this.extraStreamInfo[y]=b,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var y in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,y)&&(this.streamInfo[y]=this.extraStreamInfo[y])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var y="Worker "+this.name;return this.previous?this.previous+" -> "+y:y}},m.exports=p},{}],29:[function(h,m,g){var p=h("../utils"),y=h("./ConvertWorker"),b=h("./GenericWorker"),v=h("../base64"),E=h("../support"),M=h("../external"),W=null;if(E.nodestream)try{W=h("../nodejs/NodejsStreamOutputAdapter")}catch{}function $(N,j,F){var P=j;switch(j){case"blob":case"arraybuffer":P="uint8array";break;case"base64":P="string"}try{this._internalType=P,this._outputType=j,this._mimeType=F,p.checkSupport(P),this._worker=N.pipe(new y(P)),N.lock()}catch(L){this._worker=new b("error"),this._worker.error(L)}}$.prototype={accumulate:function(N){return function(j,F){return new M.Promise(function(P,L){var k=[],R=j._internalType,C=j._outputType,_=j._mimeType;j.on("data",function(x,w){k.push(x),F&&F(w)}).on("error",function(x){k=[],L(x)}).on("end",function(){try{var x=function(w,S,I){switch(w){case"blob":return p.newBlob(p.transformTo("arraybuffer",S),I);case"base64":return v.encode(S);default:return p.transformTo(w,S)}}(C,function(w,S){var I,z=0,A=null,H=0;for(I=0;I<S.length;I++)H+=S[I].length;switch(w){case"string":return S.join("");case"array":return Array.prototype.concat.apply([],S);case"uint8array":for(A=new Uint8Array(H),I=0;I<S.length;I++)A.set(S[I],z),z+=S[I].length;return A;case"nodebuffer":return l.concat(S);default:throw new Error("concat : unsupported type '"+w+"'")}}(R,k),_);P(x)}catch(w){L(w)}k=[]}).resume()})}(this,N)},on:function(N,j){var F=this;return N==="data"?this._worker.on(N,function(P){j.call(F,P.data,P.meta)}):this._worker.on(N,function(){p.delay(j,arguments,F)}),this},resume:function(){return p.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(N){if(p.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new W(this,{objectMode:this._outputType!=="nodebuffer"},N)}},m.exports=$},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(h,m,g){if(g.base64=!0,g.array=!0,g.string=!0,g.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",g.nodebuffer=l!==void 0,g.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")g.blob=!1;else{var p=new ArrayBuffer(0);try{g.blob=new Blob([p],{type:"application/zip"}).size===0}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);y.append(p),g.blob=y.getBlob("application/zip").size===0}catch{g.blob=!1}}}try{g.nodestream=!!h("readable-stream").Readable}catch{g.nodestream=!1}},{"readable-stream":16}],31:[function(h,m,g){for(var p=h("./utils"),y=h("./support"),b=h("./nodejsUtils"),v=h("./stream/GenericWorker"),E=new Array(256),M=0;M<256;M++)E[M]=252<=M?6:248<=M?5:240<=M?4:224<=M?3:192<=M?2:1;function W(){v.call(this,"utf-8 decode"),this.leftOver=null}function $(){v.call(this,"utf-8 encode")}E[254]=E[254]=1,g.utf8encode=function(N){return y.nodebuffer?b.newBufferFrom(N,"utf-8"):function(j){var F,P,L,k,R,C=j.length,_=0;for(k=0;k<C;k++)(64512&(P=j.charCodeAt(k)))==55296&&k+1<C&&(64512&(L=j.charCodeAt(k+1)))==56320&&(P=65536+(P-55296<<10)+(L-56320),k++),_+=P<128?1:P<2048?2:P<65536?3:4;for(F=y.uint8array?new Uint8Array(_):new Array(_),k=R=0;R<_;k++)(64512&(P=j.charCodeAt(k)))==55296&&k+1<C&&(64512&(L=j.charCodeAt(k+1)))==56320&&(P=65536+(P-55296<<10)+(L-56320),k++),P<128?F[R++]=P:(P<2048?F[R++]=192|P>>>6:(P<65536?F[R++]=224|P>>>12:(F[R++]=240|P>>>18,F[R++]=128|P>>>12&63),F[R++]=128|P>>>6&63),F[R++]=128|63&P);return F}(N)},g.utf8decode=function(N){return y.nodebuffer?p.transformTo("nodebuffer",N).toString("utf-8"):function(j){var F,P,L,k,R=j.length,C=new Array(2*R);for(F=P=0;F<R;)if((L=j[F++])<128)C[P++]=L;else if(4<(k=E[L]))C[P++]=65533,F+=k-1;else{for(L&=k===2?31:k===3?15:7;1<k&&F<R;)L=L<<6|63&j[F++],k--;1<k?C[P++]=65533:L<65536?C[P++]=L:(L-=65536,C[P++]=55296|L>>10&1023,C[P++]=56320|1023&L)}return C.length!==P&&(C.subarray?C=C.subarray(0,P):C.length=P),p.applyFromCharCode(C)}(N=p.transformTo(y.uint8array?"uint8array":"array",N))},p.inherits(W,v),W.prototype.processChunk=function(N){var j=p.transformTo(y.uint8array?"uint8array":"array",N.data);if(this.leftOver&&this.leftOver.length){if(y.uint8array){var F=j;(j=new Uint8Array(F.length+this.leftOver.length)).set(this.leftOver,0),j.set(F,this.leftOver.length)}else j=this.leftOver.concat(j);this.leftOver=null}var P=function(k,R){var C;for((R=R||k.length)>k.length&&(R=k.length),C=R-1;0<=C&&(192&k[C])==128;)C--;return C<0||C===0?R:C+E[k[C]]>R?C:R}(j),L=j;P!==j.length&&(y.uint8array?(L=j.subarray(0,P),this.leftOver=j.subarray(P,j.length)):(L=j.slice(0,P),this.leftOver=j.slice(P,j.length))),this.push({data:g.utf8decode(L),meta:N.meta})},W.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:g.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},g.Utf8DecodeWorker=W,p.inherits($,v),$.prototype.processChunk=function(N){this.push({data:g.utf8encode(N.data),meta:N.meta})},g.Utf8EncodeWorker=$},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(h,m,g){var p=h("./support"),y=h("./base64"),b=h("./nodejsUtils"),v=h("./external");function E(F){return F}function M(F,P){for(var L=0;L<F.length;++L)P[L]=255&F.charCodeAt(L);return P}h("setimmediate"),g.newBlob=function(F,P){g.checkSupport("blob");try{return new Blob([F],{type:P})}catch{try{var L=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return L.append(F),L.getBlob(P)}catch{throw new Error("Bug : can't construct the Blob.")}}};var W={stringifyByChunk:function(F,P,L){var k=[],R=0,C=F.length;if(C<=L)return String.fromCharCode.apply(null,F);for(;R<C;)P==="array"||P==="nodebuffer"?k.push(String.fromCharCode.apply(null,F.slice(R,Math.min(R+L,C)))):k.push(String.fromCharCode.apply(null,F.subarray(R,Math.min(R+L,C)))),R+=L;return k.join("")},stringifyByChar:function(F){for(var P="",L=0;L<F.length;L++)P+=String.fromCharCode(F[L]);return P},applyCanBeUsed:{uint8array:function(){try{return p.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return p.nodebuffer&&String.fromCharCode.apply(null,b.allocBuffer(1)).length===1}catch{return!1}}()}};function $(F){var P=65536,L=g.getTypeOf(F),k=!0;if(L==="uint8array"?k=W.applyCanBeUsed.uint8array:L==="nodebuffer"&&(k=W.applyCanBeUsed.nodebuffer),k)for(;1<P;)try{return W.stringifyByChunk(F,L,P)}catch{P=Math.floor(P/2)}return W.stringifyByChar(F)}function N(F,P){for(var L=0;L<F.length;L++)P[L]=F[L];return P}g.applyFromCharCode=$;var j={};j.string={string:E,array:function(F){return M(F,new Array(F.length))},arraybuffer:function(F){return j.string.uint8array(F).buffer},uint8array:function(F){return M(F,new Uint8Array(F.length))},nodebuffer:function(F){return M(F,b.allocBuffer(F.length))}},j.array={string:$,array:E,arraybuffer:function(F){return new Uint8Array(F).buffer},uint8array:function(F){return new Uint8Array(F)},nodebuffer:function(F){return b.newBufferFrom(F)}},j.arraybuffer={string:function(F){return $(new Uint8Array(F))},array:function(F){return N(new Uint8Array(F),new Array(F.byteLength))},arraybuffer:E,uint8array:function(F){return new Uint8Array(F)},nodebuffer:function(F){return b.newBufferFrom(new Uint8Array(F))}},j.uint8array={string:$,array:function(F){return N(F,new Array(F.length))},arraybuffer:function(F){return F.buffer},uint8array:E,nodebuffer:function(F){return b.newBufferFrom(F)}},j.nodebuffer={string:$,array:function(F){return N(F,new Array(F.length))},arraybuffer:function(F){return j.nodebuffer.uint8array(F).buffer},uint8array:function(F){return N(F,new Uint8Array(F.length))},nodebuffer:E},g.transformTo=function(F,P){if(P=P||"",!F)return P;g.checkSupport(F);var L=g.getTypeOf(P);return j[L][F](P)},g.resolve=function(F){for(var P=F.split("/"),L=[],k=0;k<P.length;k++){var R=P[k];R==="."||R===""&&k!==0&&k!==P.length-1||(R===".."?L.pop():L.push(R))}return L.join("/")},g.getTypeOf=function(F){return typeof F=="string"?"string":Object.prototype.toString.call(F)==="[object Array]"?"array":p.nodebuffer&&b.isBuffer(F)?"nodebuffer":p.uint8array&&F instanceof Uint8Array?"uint8array":p.arraybuffer&&F instanceof ArrayBuffer?"arraybuffer":void 0},g.checkSupport=function(F){if(!p[F.toLowerCase()])throw new Error(F+" is not supported by this platform")},g.MAX_VALUE_16BITS=65535,g.MAX_VALUE_32BITS=-1,g.pretty=function(F){var P,L,k="";for(L=0;L<(F||"").length;L++)k+="\\x"+((P=F.charCodeAt(L))<16?"0":"")+P.toString(16).toUpperCase();return k},g.delay=function(F,P,L){f(function(){F.apply(L||null,P||[])})},g.inherits=function(F,P){function L(){}L.prototype=P.prototype,F.prototype=new L},g.extend=function(){var F,P,L={};for(F=0;F<arguments.length;F++)for(P in arguments[F])Object.prototype.hasOwnProperty.call(arguments[F],P)&&L[P]===void 0&&(L[P]=arguments[F][P]);return L},g.prepareContent=function(F,P,L,k,R){return v.Promise.resolve(P).then(function(C){return p.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new v.Promise(function(_,x){var w=new FileReader;w.onload=function(S){_(S.target.result)},w.onerror=function(S){x(S.target.error)},w.readAsArrayBuffer(C)}):C}).then(function(C){var _=g.getTypeOf(C);return _?(_==="arraybuffer"?C=g.transformTo("uint8array",C):_==="string"&&(R?C=y.decode(C):L&&k!==!0&&(C=function(x){return M(x,p.uint8array?new Uint8Array(x.length):new Array(x.length))}(C))),C):v.Promise.reject(new Error("Can't read the data of '"+F+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(h,m,g){var p=h("./reader/readerFor"),y=h("./utils"),b=h("./signature"),v=h("./zipEntry"),E=h("./support");function M(W){this.files=[],this.loadOptions=W}M.prototype={checkSignature:function(W){if(!this.reader.readAndCheckSignature(W)){this.reader.index-=4;var $=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+y.pretty($)+", expected "+y.pretty(W)+")")}},isSignature:function(W,$){var N=this.reader.index;this.reader.setIndex(W);var j=this.reader.readString(4)===$;return this.reader.setIndex(N),j},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var W=this.reader.readData(this.zipCommentLength),$=E.uint8array?"uint8array":"array",N=y.transformTo($,W);this.zipComment=this.loadOptions.decodeFileName(N)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var W,$,N,j=this.zip64EndOfCentralSize-44;0<j;)W=this.reader.readInt(2),$=this.reader.readInt(4),N=this.reader.readData($),this.zip64ExtensibleData[W]={id:W,length:$,value:N}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var W,$;for(W=0;W<this.files.length;W++)$=this.files[W],this.reader.setIndex($.localHeaderOffset),this.checkSignature(b.LOCAL_FILE_HEADER),$.readLocalPart(this.reader),$.handleUTF8(),$.processAttributes()},readCentralDir:function(){var W;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(b.CENTRAL_FILE_HEADER);)(W=new v({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(W);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var W=this.reader.lastIndexOfSignature(b.CENTRAL_DIRECTORY_END);if(W<0)throw this.isSignature(0,b.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(W);var $=W;if(this.checkSignature(b.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===y.MAX_VALUE_16BITS||this.diskWithCentralDirStart===y.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===y.MAX_VALUE_16BITS||this.centralDirRecords===y.MAX_VALUE_16BITS||this.centralDirSize===y.MAX_VALUE_32BITS||this.centralDirOffset===y.MAX_VALUE_32BITS){if(this.zip64=!0,(W=this.reader.lastIndexOfSignature(b.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(W),this.checkSignature(b.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,b.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(b.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(b.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var N=this.centralDirOffset+this.centralDirSize;this.zip64&&(N+=20,N+=12+this.zip64EndOfCentralSize);var j=$-N;if(0<j)this.isSignature($,b.CENTRAL_FILE_HEADER)||(this.reader.zero=j);else if(j<0)throw new Error("Corrupted zip: missing "+Math.abs(j)+" bytes.")},prepareReader:function(W){this.reader=p(W)},load:function(W){this.prepareReader(W),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},m.exports=M},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(h,m,g){var p=h("./reader/readerFor"),y=h("./utils"),b=h("./compressedObject"),v=h("./crc32"),E=h("./utf8"),M=h("./compressions"),W=h("./support");function $(N,j){this.options=N,this.loadOptions=j}$.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(N){var j,F;if(N.skip(22),this.fileNameLength=N.readInt(2),F=N.readInt(2),this.fileName=N.readData(this.fileNameLength),N.skip(F),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((j=function(P){for(var L in M)if(Object.prototype.hasOwnProperty.call(M,L)&&M[L].magic===P)return M[L];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+y.pretty(this.compressionMethod)+" unknown (inner file : "+y.transformTo("string",this.fileName)+")");this.decompressed=new b(this.compressedSize,this.uncompressedSize,this.crc32,j,N.readData(this.compressedSize))},readCentralPart:function(N){this.versionMadeBy=N.readInt(2),N.skip(2),this.bitFlag=N.readInt(2),this.compressionMethod=N.readString(2),this.date=N.readDate(),this.crc32=N.readInt(4),this.compressedSize=N.readInt(4),this.uncompressedSize=N.readInt(4);var j=N.readInt(2);if(this.extraFieldsLength=N.readInt(2),this.fileCommentLength=N.readInt(2),this.diskNumberStart=N.readInt(2),this.internalFileAttributes=N.readInt(2),this.externalFileAttributes=N.readInt(4),this.localHeaderOffset=N.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");N.skip(j),this.readExtraFields(N),this.parseZIP64ExtraField(N),this.fileComment=N.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var N=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),N==0&&(this.dosPermissions=63&this.externalFileAttributes),N==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var N=p(this.extraFields[1].value);this.uncompressedSize===y.MAX_VALUE_32BITS&&(this.uncompressedSize=N.readInt(8)),this.compressedSize===y.MAX_VALUE_32BITS&&(this.compressedSize=N.readInt(8)),this.localHeaderOffset===y.MAX_VALUE_32BITS&&(this.localHeaderOffset=N.readInt(8)),this.diskNumberStart===y.MAX_VALUE_32BITS&&(this.diskNumberStart=N.readInt(4))}},readExtraFields:function(N){var j,F,P,L=N.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});N.index+4<L;)j=N.readInt(2),F=N.readInt(2),P=N.readData(F),this.extraFields[j]={id:j,length:F,value:P};N.setIndex(L)},handleUTF8:function(){var N=W.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=E.utf8decode(this.fileName),this.fileCommentStr=E.utf8decode(this.fileComment);else{var j=this.findExtraFieldUnicodePath();if(j!==null)this.fileNameStr=j;else{var F=y.transformTo(N,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(F)}var P=this.findExtraFieldUnicodeComment();if(P!==null)this.fileCommentStr=P;else{var L=y.transformTo(N,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(L)}}},findExtraFieldUnicodePath:function(){var N=this.extraFields[28789];if(N){var j=p(N.value);return j.readInt(1)!==1||v(this.fileName)!==j.readInt(4)?null:E.utf8decode(j.readData(N.length-5))}return null},findExtraFieldUnicodeComment:function(){var N=this.extraFields[25461];if(N){var j=p(N.value);return j.readInt(1)!==1||v(this.fileComment)!==j.readInt(4)?null:E.utf8decode(j.readData(N.length-5))}return null}},m.exports=$},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(h,m,g){function p(j,F,P){this.name=j,this.dir=P.dir,this.date=P.date,this.comment=P.comment,this.unixPermissions=P.unixPermissions,this.dosPermissions=P.dosPermissions,this._data=F,this._dataBinary=P.binary,this.options={compression:P.compression,compressionOptions:P.compressionOptions}}var y=h("./stream/StreamHelper"),b=h("./stream/DataWorker"),v=h("./utf8"),E=h("./compressedObject"),M=h("./stream/GenericWorker");p.prototype={internalStream:function(j){var F=null,P="string";try{if(!j)throw new Error("No output type specified.");var L=(P=j.toLowerCase())==="string"||P==="text";P!=="binarystring"&&P!=="text"||(P="string"),F=this._decompressWorker();var k=!this._dataBinary;k&&!L&&(F=F.pipe(new v.Utf8EncodeWorker)),!k&&L&&(F=F.pipe(new v.Utf8DecodeWorker))}catch(R){(F=new M("error")).error(R)}return new y(F,P,"")},async:function(j,F){return this.internalStream(j).accumulate(F)},nodeStream:function(j,F){return this.internalStream(j||"nodebuffer").toNodejsStream(F)},_compressWorker:function(j,F){if(this._data instanceof E&&this._data.compression.magic===j.magic)return this._data.getCompressedWorker();var P=this._decompressWorker();return this._dataBinary||(P=P.pipe(new v.Utf8EncodeWorker)),E.createWorkerFrom(P,j,F)},_decompressWorker:function(){return this._data instanceof E?this._data.getContentWorker():this._data instanceof M?this._data:new b(this._data)}};for(var W=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],$=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},N=0;N<W.length;N++)p.prototype[W[N]]=$;m.exports=p},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(h,m,g){(function(p){var y,b,v=p.MutationObserver||p.WebKitMutationObserver;if(v){var E=0,M=new v(j),W=p.document.createTextNode("");M.observe(W,{characterData:!0}),y=function(){W.data=E=++E%2}}else if(p.setImmediate||p.MessageChannel===void 0)y="document"in p&&"onreadystatechange"in p.document.createElement("script")?function(){var F=p.document.createElement("script");F.onreadystatechange=function(){j(),F.onreadystatechange=null,F.parentNode.removeChild(F),F=null},p.document.documentElement.appendChild(F)}:function(){setTimeout(j,0)};else{var $=new p.MessageChannel;$.port1.onmessage=j,y=function(){$.port2.postMessage(0)}}var N=[];function j(){var F,P;b=!0;for(var L=N.length;L;){for(P=N,N=[],F=-1;++F<L;)P[F]();L=N.length}b=!1}m.exports=function(F){N.push(F)!==1||b||y()}}).call(this,o!==void 0?o:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(h,m,g){var p=h("immediate");function y(){}var b={},v=["REJECTED"],E=["FULFILLED"],M=["PENDING"];function W(L){if(typeof L!="function")throw new TypeError("resolver must be a function");this.state=M,this.queue=[],this.outcome=void 0,L!==y&&F(this,L)}function $(L,k,R){this.promise=L,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}function N(L,k,R){p(function(){var C;try{C=k(R)}catch(_){return b.reject(L,_)}C===L?b.reject(L,new TypeError("Cannot resolve promise with itself")):b.resolve(L,C)})}function j(L){var k=L&&L.then;if(L&&(typeof L=="object"||typeof L=="function")&&typeof k=="function")return function(){k.apply(L,arguments)}}function F(L,k){var R=!1;function C(w){R||(R=!0,b.reject(L,w))}function _(w){R||(R=!0,b.resolve(L,w))}var x=P(function(){k(_,C)});x.status==="error"&&C(x.value)}function P(L,k){var R={};try{R.value=L(k),R.status="success"}catch(C){R.status="error",R.value=C}return R}(m.exports=W).prototype.finally=function(L){if(typeof L!="function")return this;var k=this.constructor;return this.then(function(R){return k.resolve(L()).then(function(){return R})},function(R){return k.resolve(L()).then(function(){throw R})})},W.prototype.catch=function(L){return this.then(null,L)},W.prototype.then=function(L,k){if(typeof L!="function"&&this.state===E||typeof k!="function"&&this.state===v)return this;var R=new this.constructor(y);return this.state!==M?N(R,this.state===E?L:k,this.outcome):this.queue.push(new $(R,L,k)),R},$.prototype.callFulfilled=function(L){b.resolve(this.promise,L)},$.prototype.otherCallFulfilled=function(L){N(this.promise,this.onFulfilled,L)},$.prototype.callRejected=function(L){b.reject(this.promise,L)},$.prototype.otherCallRejected=function(L){N(this.promise,this.onRejected,L)},b.resolve=function(L,k){var R=P(j,k);if(R.status==="error")return b.reject(L,R.value);var C=R.value;if(C)F(L,C);else{L.state=E,L.outcome=k;for(var _=-1,x=L.queue.length;++_<x;)L.queue[_].callFulfilled(k)}return L},b.reject=function(L,k){L.state=v,L.outcome=k;for(var R=-1,C=L.queue.length;++R<C;)L.queue[R].callRejected(k);return L},W.resolve=function(L){return L instanceof this?L:b.resolve(new this(y),L)},W.reject=function(L){var k=new this(y);return b.reject(k,L)},W.all=function(L){var k=this;if(Object.prototype.toString.call(L)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=L.length,C=!1;if(!R)return this.resolve([]);for(var _=new Array(R),x=0,w=-1,S=new this(y);++w<R;)I(L[w],w);return S;function I(z,A){k.resolve(z).then(function(H){_[A]=H,++x!==R||C||(C=!0,b.resolve(S,_))},function(H){C||(C=!0,b.reject(S,H))})}},W.race=function(L){if(Object.prototype.toString.call(L)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=L.length,R=!1;if(!k)return this.resolve([]);for(var C,_=-1,x=new this(y);++_<k;)C=L[_],this.resolve(C).then(function(w){R||(R=!0,b.resolve(x,w))},function(w){R||(R=!0,b.reject(x,w))});return x}},{immediate:36}],38:[function(h,m,g){var p={};(0,h("./lib/utils/common").assign)(p,h("./lib/deflate"),h("./lib/inflate"),h("./lib/zlib/constants")),m.exports=p},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(h,m,g){var p=h("./zlib/deflate"),y=h("./utils/common"),b=h("./utils/strings"),v=h("./zlib/messages"),E=h("./zlib/zstream"),M=Object.prototype.toString;function W(N){if(!(this instanceof W))return new W(N);this.options=y.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},N||{});var j=this.options;j.raw&&0<j.windowBits?j.windowBits=-j.windowBits:j.gzip&&0<j.windowBits&&j.windowBits<16&&(j.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new E,this.strm.avail_out=0;var F=p.deflateInit2(this.strm,j.level,j.method,j.windowBits,j.memLevel,j.strategy);if(F!==0)throw new Error(v[F]);if(j.header&&p.deflateSetHeader(this.strm,j.header),j.dictionary){var P;if(P=typeof j.dictionary=="string"?b.string2buf(j.dictionary):M.call(j.dictionary)==="[object ArrayBuffer]"?new Uint8Array(j.dictionary):j.dictionary,(F=p.deflateSetDictionary(this.strm,P))!==0)throw new Error(v[F]);this._dict_set=!0}}function $(N,j){var F=new W(j);if(F.push(N,!0),F.err)throw F.msg||v[F.err];return F.result}W.prototype.push=function(N,j){var F,P,L=this.strm,k=this.options.chunkSize;if(this.ended)return!1;P=j===~~j?j:j===!0?4:0,typeof N=="string"?L.input=b.string2buf(N):M.call(N)==="[object ArrayBuffer]"?L.input=new Uint8Array(N):L.input=N,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new y.Buf8(k),L.next_out=0,L.avail_out=k),(F=p.deflate(L,P))!==1&&F!==0)return this.onEnd(F),!(this.ended=!0);L.avail_out!==0&&(L.avail_in!==0||P!==4&&P!==2)||(this.options.to==="string"?this.onData(b.buf2binstring(y.shrinkBuf(L.output,L.next_out))):this.onData(y.shrinkBuf(L.output,L.next_out)))}while((0<L.avail_in||L.avail_out===0)&&F!==1);return P===4?(F=p.deflateEnd(this.strm),this.onEnd(F),this.ended=!0,F===0):P!==2||(this.onEnd(0),!(L.avail_out=0))},W.prototype.onData=function(N){this.chunks.push(N)},W.prototype.onEnd=function(N){N===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=y.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg},g.Deflate=W,g.deflate=$,g.deflateRaw=function(N,j){return(j=j||{}).raw=!0,$(N,j)},g.gzip=function(N,j){return(j=j||{}).gzip=!0,$(N,j)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(h,m,g){var p=h("./zlib/inflate"),y=h("./utils/common"),b=h("./utils/strings"),v=h("./zlib/constants"),E=h("./zlib/messages"),M=h("./zlib/zstream"),W=h("./zlib/gzheader"),$=Object.prototype.toString;function N(F){if(!(this instanceof N))return new N(F);this.options=y.assign({chunkSize:16384,windowBits:0,to:""},F||{});var P=this.options;P.raw&&0<=P.windowBits&&P.windowBits<16&&(P.windowBits=-P.windowBits,P.windowBits===0&&(P.windowBits=-15)),!(0<=P.windowBits&&P.windowBits<16)||F&&F.windowBits||(P.windowBits+=32),15<P.windowBits&&P.windowBits<48&&!(15&P.windowBits)&&(P.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new M,this.strm.avail_out=0;var L=p.inflateInit2(this.strm,P.windowBits);if(L!==v.Z_OK)throw new Error(E[L]);this.header=new W,p.inflateGetHeader(this.strm,this.header)}function j(F,P){var L=new N(P);if(L.push(F,!0),L.err)throw L.msg||E[L.err];return L.result}N.prototype.push=function(F,P){var L,k,R,C,_,x,w=this.strm,S=this.options.chunkSize,I=this.options.dictionary,z=!1;if(this.ended)return!1;k=P===~~P?P:P===!0?v.Z_FINISH:v.Z_NO_FLUSH,typeof F=="string"?w.input=b.binstring2buf(F):$.call(F)==="[object ArrayBuffer]"?w.input=new Uint8Array(F):w.input=F,w.next_in=0,w.avail_in=w.input.length;do{if(w.avail_out===0&&(w.output=new y.Buf8(S),w.next_out=0,w.avail_out=S),(L=p.inflate(w,v.Z_NO_FLUSH))===v.Z_NEED_DICT&&I&&(x=typeof I=="string"?b.string2buf(I):$.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,L=p.inflateSetDictionary(this.strm,x)),L===v.Z_BUF_ERROR&&z===!0&&(L=v.Z_OK,z=!1),L!==v.Z_STREAM_END&&L!==v.Z_OK)return this.onEnd(L),!(this.ended=!0);w.next_out&&(w.avail_out!==0&&L!==v.Z_STREAM_END&&(w.avail_in!==0||k!==v.Z_FINISH&&k!==v.Z_SYNC_FLUSH)||(this.options.to==="string"?(R=b.utf8border(w.output,w.next_out),C=w.next_out-R,_=b.buf2string(w.output,R),w.next_out=C,w.avail_out=S-C,C&&y.arraySet(w.output,w.output,R,C,0),this.onData(_)):this.onData(y.shrinkBuf(w.output,w.next_out)))),w.avail_in===0&&w.avail_out===0&&(z=!0)}while((0<w.avail_in||w.avail_out===0)&&L!==v.Z_STREAM_END);return L===v.Z_STREAM_END&&(k=v.Z_FINISH),k===v.Z_FINISH?(L=p.inflateEnd(this.strm),this.onEnd(L),this.ended=!0,L===v.Z_OK):k!==v.Z_SYNC_FLUSH||(this.onEnd(v.Z_OK),!(w.avail_out=0))},N.prototype.onData=function(F){this.chunks.push(F)},N.prototype.onEnd=function(F){F===v.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=y.flattenChunks(this.chunks)),this.chunks=[],this.err=F,this.msg=this.strm.msg},g.Inflate=N,g.inflate=j,g.inflateRaw=function(F,P){return(P=P||{}).raw=!0,j(F,P)},g.ungzip=j},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(h,m,g){var p=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";g.assign=function(v){for(var E=Array.prototype.slice.call(arguments,1);E.length;){var M=E.shift();if(M){if(typeof M!="object")throw new TypeError(M+"must be non-object");for(var W in M)M.hasOwnProperty(W)&&(v[W]=M[W])}}return v},g.shrinkBuf=function(v,E){return v.length===E?v:v.subarray?v.subarray(0,E):(v.length=E,v)};var y={arraySet:function(v,E,M,W,$){if(E.subarray&&v.subarray)v.set(E.subarray(M,M+W),$);else for(var N=0;N<W;N++)v[$+N]=E[M+N]},flattenChunks:function(v){var E,M,W,$,N,j;for(E=W=0,M=v.length;E<M;E++)W+=v[E].length;for(j=new Uint8Array(W),E=$=0,M=v.length;E<M;E++)N=v[E],j.set(N,$),$+=N.length;return j}},b={arraySet:function(v,E,M,W,$){for(var N=0;N<W;N++)v[$+N]=E[M+N]},flattenChunks:function(v){return[].concat.apply([],v)}};g.setTyped=function(v){v?(g.Buf8=Uint8Array,g.Buf16=Uint16Array,g.Buf32=Int32Array,g.assign(g,y)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,b))},g.setTyped(p)},{}],42:[function(h,m,g){var p=h("./common"),y=!0,b=!0;try{String.fromCharCode.apply(null,[0])}catch{y=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{b=!1}for(var v=new p.Buf8(256),E=0;E<256;E++)v[E]=252<=E?6:248<=E?5:240<=E?4:224<=E?3:192<=E?2:1;function M(W,$){if($<65537&&(W.subarray&&b||!W.subarray&&y))return String.fromCharCode.apply(null,p.shrinkBuf(W,$));for(var N="",j=0;j<$;j++)N+=String.fromCharCode(W[j]);return N}v[254]=v[254]=1,g.string2buf=function(W){var $,N,j,F,P,L=W.length,k=0;for(F=0;F<L;F++)(64512&(N=W.charCodeAt(F)))==55296&&F+1<L&&(64512&(j=W.charCodeAt(F+1)))==56320&&(N=65536+(N-55296<<10)+(j-56320),F++),k+=N<128?1:N<2048?2:N<65536?3:4;for($=new p.Buf8(k),F=P=0;P<k;F++)(64512&(N=W.charCodeAt(F)))==55296&&F+1<L&&(64512&(j=W.charCodeAt(F+1)))==56320&&(N=65536+(N-55296<<10)+(j-56320),F++),N<128?$[P++]=N:(N<2048?$[P++]=192|N>>>6:(N<65536?$[P++]=224|N>>>12:($[P++]=240|N>>>18,$[P++]=128|N>>>12&63),$[P++]=128|N>>>6&63),$[P++]=128|63&N);return $},g.buf2binstring=function(W){return M(W,W.length)},g.binstring2buf=function(W){for(var $=new p.Buf8(W.length),N=0,j=$.length;N<j;N++)$[N]=W.charCodeAt(N);return $},g.buf2string=function(W,$){var N,j,F,P,L=$||W.length,k=new Array(2*L);for(N=j=0;N<L;)if((F=W[N++])<128)k[j++]=F;else if(4<(P=v[F]))k[j++]=65533,N+=P-1;else{for(F&=P===2?31:P===3?15:7;1<P&&N<L;)F=F<<6|63&W[N++],P--;1<P?k[j++]=65533:F<65536?k[j++]=F:(F-=65536,k[j++]=55296|F>>10&1023,k[j++]=56320|1023&F)}return M(k,j)},g.utf8border=function(W,$){var N;for(($=$||W.length)>W.length&&($=W.length),N=$-1;0<=N&&(192&W[N])==128;)N--;return N<0||N===0?$:N+v[W[N]]>$?N:$}},{"./common":41}],43:[function(h,m,g){m.exports=function(p,y,b,v){for(var E=65535&p|0,M=p>>>16&65535|0,W=0;b!==0;){for(b-=W=2e3<b?2e3:b;M=M+(E=E+y[v++]|0)|0,--W;);E%=65521,M%=65521}return E|M<<16|0}},{}],44:[function(h,m,g){m.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(h,m,g){var p=function(){for(var y,b=[],v=0;v<256;v++){y=v;for(var E=0;E<8;E++)y=1&y?3988292384^y>>>1:y>>>1;b[v]=y}return b}();m.exports=function(y,b,v,E){var M=p,W=E+v;y^=-1;for(var $=E;$<W;$++)y=y>>>8^M[255&(y^b[$])];return-1^y}},{}],46:[function(h,m,g){var p,y=h("../utils/common"),b=h("./trees"),v=h("./adler32"),E=h("./crc32"),M=h("./messages"),W=-2,$=258,N=262,j=113;function F(V,X){return V.msg=M[X],X}function P(V){return(V<<1)-(4<V?9:0)}function L(V){for(var X=V.length;0<=--X;)V[X]=0}function k(V){var X=V.state,D=X.pending;D>V.avail_out&&(D=V.avail_out),D!==0&&(y.arraySet(V.output,X.pending_buf,X.pending_out,D,V.next_out),V.next_out+=D,X.pending_out+=D,V.total_out+=D,V.avail_out-=D,X.pending-=D,X.pending===0&&(X.pending_out=0))}function R(V,X){b._tr_flush_block(V,0<=V.block_start?V.block_start:-1,V.strstart-V.block_start,X),V.block_start=V.strstart,k(V.strm)}function C(V,X){V.pending_buf[V.pending++]=X}function _(V,X){V.pending_buf[V.pending++]=X>>>8&255,V.pending_buf[V.pending++]=255&X}function x(V,X){var D,O,G=V.max_chain_length,Z=V.strstart,ue=V.prev_length,te=V.nice_match,oe=V.strstart>V.w_size-N?V.strstart-(V.w_size-N):0,re=V.window,be=V.w_mask,ie=V.prev,le=V.strstart+$,ae=re[Z+ue-1],Se=re[Z+ue];V.prev_length>=V.good_match&&(G>>=2),te>V.lookahead&&(te=V.lookahead);do if(re[(D=X)+ue]===Se&&re[D+ue-1]===ae&&re[D]===re[Z]&&re[++D]===re[Z+1]){Z+=2,D++;do;while(re[++Z]===re[++D]&&re[++Z]===re[++D]&&re[++Z]===re[++D]&&re[++Z]===re[++D]&&re[++Z]===re[++D]&&re[++Z]===re[++D]&&re[++Z]===re[++D]&&re[++Z]===re[++D]&&Z<le);if(O=$-(le-Z),Z=le-$,ue<O){if(V.match_start=X,te<=(ue=O))break;ae=re[Z+ue-1],Se=re[Z+ue]}}while((X=ie[X&be])>oe&&--G!=0);return ue<=V.lookahead?ue:V.lookahead}function w(V){var X,D,O,G,Z,ue,te,oe,re,be,ie=V.w_size;do{if(G=V.window_size-V.lookahead-V.strstart,V.strstart>=ie+(ie-N)){for(y.arraySet(V.window,V.window,ie,ie,0),V.match_start-=ie,V.strstart-=ie,V.block_start-=ie,X=D=V.hash_size;O=V.head[--X],V.head[X]=ie<=O?O-ie:0,--D;);for(X=D=ie;O=V.prev[--X],V.prev[X]=ie<=O?O-ie:0,--D;);G+=ie}if(V.strm.avail_in===0)break;if(ue=V.strm,te=V.window,oe=V.strstart+V.lookahead,be=void 0,(re=G)<(be=ue.avail_in)&&(be=re),D=be===0?0:(ue.avail_in-=be,y.arraySet(te,ue.input,ue.next_in,be,oe),ue.state.wrap===1?ue.adler=v(ue.adler,te,be,oe):ue.state.wrap===2&&(ue.adler=E(ue.adler,te,be,oe)),ue.next_in+=be,ue.total_in+=be,be),V.lookahead+=D,V.lookahead+V.insert>=3)for(Z=V.strstart-V.insert,V.ins_h=V.window[Z],V.ins_h=(V.ins_h<<V.hash_shift^V.window[Z+1])&V.hash_mask;V.insert&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[Z+3-1])&V.hash_mask,V.prev[Z&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=Z,Z++,V.insert--,!(V.lookahead+V.insert<3)););}while(V.lookahead<N&&V.strm.avail_in!==0)}function S(V,X){for(var D,O;;){if(V.lookahead<N){if(w(V),V.lookahead<N&&X===0)return 1;if(V.lookahead===0)break}if(D=0,V.lookahead>=3&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+3-1])&V.hash_mask,D=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),D!==0&&V.strstart-D<=V.w_size-N&&(V.match_length=x(V,D)),V.match_length>=3)if(O=b._tr_tally(V,V.strstart-V.match_start,V.match_length-3),V.lookahead-=V.match_length,V.match_length<=V.max_lazy_match&&V.lookahead>=3){for(V.match_length--;V.strstart++,V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+3-1])&V.hash_mask,D=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart,--V.match_length!=0;);V.strstart++}else V.strstart+=V.match_length,V.match_length=0,V.ins_h=V.window[V.strstart],V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+1])&V.hash_mask;else O=b._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++;if(O&&(R(V,!1),V.strm.avail_out===0))return 1}return V.insert=V.strstart<2?V.strstart:2,X===4?(R(V,!0),V.strm.avail_out===0?3:4):V.last_lit&&(R(V,!1),V.strm.avail_out===0)?1:2}function I(V,X){for(var D,O,G;;){if(V.lookahead<N){if(w(V),V.lookahead<N&&X===0)return 1;if(V.lookahead===0)break}if(D=0,V.lookahead>=3&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+3-1])&V.hash_mask,D=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),V.prev_length=V.match_length,V.prev_match=V.match_start,V.match_length=2,D!==0&&V.prev_length<V.max_lazy_match&&V.strstart-D<=V.w_size-N&&(V.match_length=x(V,D),V.match_length<=5&&(V.strategy===1||V.match_length===3&&4096<V.strstart-V.match_start)&&(V.match_length=2)),V.prev_length>=3&&V.match_length<=V.prev_length){for(G=V.strstart+V.lookahead-3,O=b._tr_tally(V,V.strstart-1-V.prev_match,V.prev_length-3),V.lookahead-=V.prev_length-1,V.prev_length-=2;++V.strstart<=G&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+3-1])&V.hash_mask,D=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),--V.prev_length!=0;);if(V.match_available=0,V.match_length=2,V.strstart++,O&&(R(V,!1),V.strm.avail_out===0))return 1}else if(V.match_available){if((O=b._tr_tally(V,0,V.window[V.strstart-1]))&&R(V,!1),V.strstart++,V.lookahead--,V.strm.avail_out===0)return 1}else V.match_available=1,V.strstart++,V.lookahead--}return V.match_available&&(O=b._tr_tally(V,0,V.window[V.strstart-1]),V.match_available=0),V.insert=V.strstart<2?V.strstart:2,X===4?(R(V,!0),V.strm.avail_out===0?3:4):V.last_lit&&(R(V,!1),V.strm.avail_out===0)?1:2}function z(V,X,D,O,G){this.good_length=V,this.max_lazy=X,this.nice_length=D,this.max_chain=O,this.func=G}function A(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new y.Buf16(1146),this.dyn_dtree=new y.Buf16(122),this.bl_tree=new y.Buf16(78),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new y.Buf16(16),this.heap=new y.Buf16(573),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new y.Buf16(573),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(V){var X;return V&&V.state?(V.total_in=V.total_out=0,V.data_type=2,(X=V.state).pending=0,X.pending_out=0,X.wrap<0&&(X.wrap=-X.wrap),X.status=X.wrap?42:j,V.adler=X.wrap===2?0:1,X.last_flush=0,b._tr_init(X),0):F(V,W)}function K(V){var X=H(V);return X===0&&function(D){D.window_size=2*D.w_size,L(D.head),D.max_lazy_match=p[D.level].max_lazy,D.good_match=p[D.level].good_length,D.nice_match=p[D.level].nice_length,D.max_chain_length=p[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=2,D.match_available=0,D.ins_h=0}(V.state),X}function J(V,X,D,O,G,Z){if(!V)return W;var ue=1;if(X===-1&&(X=6),O<0?(ue=0,O=-O):15<O&&(ue=2,O-=16),G<1||9<G||D!==8||O<8||15<O||X<0||9<X||Z<0||4<Z)return F(V,W);O===8&&(O=9);var te=new A;return(V.state=te).strm=V,te.wrap=ue,te.gzhead=null,te.w_bits=O,te.w_size=1<<te.w_bits,te.w_mask=te.w_size-1,te.hash_bits=G+7,te.hash_size=1<<te.hash_bits,te.hash_mask=te.hash_size-1,te.hash_shift=~~((te.hash_bits+3-1)/3),te.window=new y.Buf8(2*te.w_size),te.head=new y.Buf16(te.hash_size),te.prev=new y.Buf16(te.w_size),te.lit_bufsize=1<<G+6,te.pending_buf_size=4*te.lit_bufsize,te.pending_buf=new y.Buf8(te.pending_buf_size),te.d_buf=1*te.lit_bufsize,te.l_buf=3*te.lit_bufsize,te.level=X,te.strategy=Z,te.method=D,K(V)}p=[new z(0,0,0,0,function(V,X){var D=65535;for(D>V.pending_buf_size-5&&(D=V.pending_buf_size-5);;){if(V.lookahead<=1){if(w(V),V.lookahead===0&&X===0)return 1;if(V.lookahead===0)break}V.strstart+=V.lookahead,V.lookahead=0;var O=V.block_start+D;if((V.strstart===0||V.strstart>=O)&&(V.lookahead=V.strstart-O,V.strstart=O,R(V,!1),V.strm.avail_out===0)||V.strstart-V.block_start>=V.w_size-N&&(R(V,!1),V.strm.avail_out===0))return 1}return V.insert=0,X===4?(R(V,!0),V.strm.avail_out===0?3:4):(V.strstart>V.block_start&&(R(V,!1),V.strm.avail_out),1)}),new z(4,4,8,4,S),new z(4,5,16,8,S),new z(4,6,32,32,S),new z(4,4,16,16,I),new z(8,16,32,32,I),new z(8,16,128,128,I),new z(8,32,128,256,I),new z(32,128,258,1024,I),new z(32,258,258,4096,I)],g.deflateInit=function(V,X){return J(V,X,8,15,8,0)},g.deflateInit2=J,g.deflateReset=K,g.deflateResetKeep=H,g.deflateSetHeader=function(V,X){return V&&V.state?V.state.wrap!==2?W:(V.state.gzhead=X,0):W},g.deflate=function(V,X){var D,O,G,Z;if(!V||!V.state||5<X||X<0)return V?F(V,W):W;if(O=V.state,!V.output||!V.input&&V.avail_in!==0||O.status===666&&X!==4)return F(V,V.avail_out===0?-5:W);if(O.strm=V,D=O.last_flush,O.last_flush=X,O.status===42)if(O.wrap===2)V.adler=0,C(O,31),C(O,139),C(O,8),O.gzhead?(C(O,(O.gzhead.text?1:0)+(O.gzhead.hcrc?2:0)+(O.gzhead.extra?4:0)+(O.gzhead.name?8:0)+(O.gzhead.comment?16:0)),C(O,255&O.gzhead.time),C(O,O.gzhead.time>>8&255),C(O,O.gzhead.time>>16&255),C(O,O.gzhead.time>>24&255),C(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),C(O,255&O.gzhead.os),O.gzhead.extra&&O.gzhead.extra.length&&(C(O,255&O.gzhead.extra.length),C(O,O.gzhead.extra.length>>8&255)),O.gzhead.hcrc&&(V.adler=E(V.adler,O.pending_buf,O.pending,0)),O.gzindex=0,O.status=69):(C(O,0),C(O,0),C(O,0),C(O,0),C(O,0),C(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),C(O,3),O.status=j);else{var ue=8+(O.w_bits-8<<4)<<8;ue|=(2<=O.strategy||O.level<2?0:O.level<6?1:O.level===6?2:3)<<6,O.strstart!==0&&(ue|=32),ue+=31-ue%31,O.status=j,_(O,ue),O.strstart!==0&&(_(O,V.adler>>>16),_(O,65535&V.adler)),V.adler=1}if(O.status===69)if(O.gzhead.extra){for(G=O.pending;O.gzindex<(65535&O.gzhead.extra.length)&&(O.pending!==O.pending_buf_size||(O.gzhead.hcrc&&O.pending>G&&(V.adler=E(V.adler,O.pending_buf,O.pending-G,G)),k(V),G=O.pending,O.pending!==O.pending_buf_size));)C(O,255&O.gzhead.extra[O.gzindex]),O.gzindex++;O.gzhead.hcrc&&O.pending>G&&(V.adler=E(V.adler,O.pending_buf,O.pending-G,G)),O.gzindex===O.gzhead.extra.length&&(O.gzindex=0,O.status=73)}else O.status=73;if(O.status===73)if(O.gzhead.name){G=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>G&&(V.adler=E(V.adler,O.pending_buf,O.pending-G,G)),k(V),G=O.pending,O.pending===O.pending_buf_size)){Z=1;break}Z=O.gzindex<O.gzhead.name.length?255&O.gzhead.name.charCodeAt(O.gzindex++):0,C(O,Z)}while(Z!==0);O.gzhead.hcrc&&O.pending>G&&(V.adler=E(V.adler,O.pending_buf,O.pending-G,G)),Z===0&&(O.gzindex=0,O.status=91)}else O.status=91;if(O.status===91)if(O.gzhead.comment){G=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>G&&(V.adler=E(V.adler,O.pending_buf,O.pending-G,G)),k(V),G=O.pending,O.pending===O.pending_buf_size)){Z=1;break}Z=O.gzindex<O.gzhead.comment.length?255&O.gzhead.comment.charCodeAt(O.gzindex++):0,C(O,Z)}while(Z!==0);O.gzhead.hcrc&&O.pending>G&&(V.adler=E(V.adler,O.pending_buf,O.pending-G,G)),Z===0&&(O.status=103)}else O.status=103;if(O.status===103&&(O.gzhead.hcrc?(O.pending+2>O.pending_buf_size&&k(V),O.pending+2<=O.pending_buf_size&&(C(O,255&V.adler),C(O,V.adler>>8&255),V.adler=0,O.status=j)):O.status=j),O.pending!==0){if(k(V),V.avail_out===0)return O.last_flush=-1,0}else if(V.avail_in===0&&P(X)<=P(D)&&X!==4)return F(V,-5);if(O.status===666&&V.avail_in!==0)return F(V,-5);if(V.avail_in!==0||O.lookahead!==0||X!==0&&O.status!==666){var te=O.strategy===2?function(oe,re){for(var be;;){if(oe.lookahead===0&&(w(oe),oe.lookahead===0)){if(re===0)return 1;break}if(oe.match_length=0,be=b._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++,be&&(R(oe,!1),oe.strm.avail_out===0))return 1}return oe.insert=0,re===4?(R(oe,!0),oe.strm.avail_out===0?3:4):oe.last_lit&&(R(oe,!1),oe.strm.avail_out===0)?1:2}(O,X):O.strategy===3?function(oe,re){for(var be,ie,le,ae,Se=oe.window;;){if(oe.lookahead<=$){if(w(oe),oe.lookahead<=$&&re===0)return 1;if(oe.lookahead===0)break}if(oe.match_length=0,oe.lookahead>=3&&0<oe.strstart&&(ie=Se[le=oe.strstart-1])===Se[++le]&&ie===Se[++le]&&ie===Se[++le]){ae=oe.strstart+$;do;while(ie===Se[++le]&&ie===Se[++le]&&ie===Se[++le]&&ie===Se[++le]&&ie===Se[++le]&&ie===Se[++le]&&ie===Se[++le]&&ie===Se[++le]&&le<ae);oe.match_length=$-(ae-le),oe.match_length>oe.lookahead&&(oe.match_length=oe.lookahead)}if(oe.match_length>=3?(be=b._tr_tally(oe,1,oe.match_length-3),oe.lookahead-=oe.match_length,oe.strstart+=oe.match_length,oe.match_length=0):(be=b._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++),be&&(R(oe,!1),oe.strm.avail_out===0))return 1}return oe.insert=0,re===4?(R(oe,!0),oe.strm.avail_out===0?3:4):oe.last_lit&&(R(oe,!1),oe.strm.avail_out===0)?1:2}(O,X):p[O.level].func(O,X);if(te!==3&&te!==4||(O.status=666),te===1||te===3)return V.avail_out===0&&(O.last_flush=-1),0;if(te===2&&(X===1?b._tr_align(O):X!==5&&(b._tr_stored_block(O,0,0,!1),X===3&&(L(O.head),O.lookahead===0&&(O.strstart=0,O.block_start=0,O.insert=0))),k(V),V.avail_out===0))return O.last_flush=-1,0}return X!==4?0:O.wrap<=0?1:(O.wrap===2?(C(O,255&V.adler),C(O,V.adler>>8&255),C(O,V.adler>>16&255),C(O,V.adler>>24&255),C(O,255&V.total_in),C(O,V.total_in>>8&255),C(O,V.total_in>>16&255),C(O,V.total_in>>24&255)):(_(O,V.adler>>>16),_(O,65535&V.adler)),k(V),0<O.wrap&&(O.wrap=-O.wrap),O.pending!==0?0:1)},g.deflateEnd=function(V){var X;return V&&V.state?(X=V.state.status)!==42&&X!==69&&X!==73&&X!==91&&X!==103&&X!==j&&X!==666?F(V,W):(V.state=null,X===j?F(V,-3):0):W},g.deflateSetDictionary=function(V,X){var D,O,G,Z,ue,te,oe,re,be=X.length;if(!V||!V.state||(Z=(D=V.state).wrap)===2||Z===1&&D.status!==42||D.lookahead)return W;for(Z===1&&(V.adler=v(V.adler,X,be,0)),D.wrap=0,be>=D.w_size&&(Z===0&&(L(D.head),D.strstart=0,D.block_start=0,D.insert=0),re=new y.Buf8(D.w_size),y.arraySet(re,X,be-D.w_size,D.w_size,0),X=re,be=D.w_size),ue=V.avail_in,te=V.next_in,oe=V.input,V.avail_in=be,V.next_in=0,V.input=X,w(D);D.lookahead>=3;){for(O=D.strstart,G=D.lookahead-2;D.ins_h=(D.ins_h<<D.hash_shift^D.window[O+3-1])&D.hash_mask,D.prev[O&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=O,O++,--G;);D.strstart=O,D.lookahead=2,w(D)}return D.strstart+=D.lookahead,D.block_start=D.strstart,D.insert=D.lookahead,D.lookahead=0,D.match_length=D.prev_length=2,D.match_available=0,V.next_in=te,V.input=oe,V.avail_in=ue,D.wrap=Z,0},g.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(h,m,g){m.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(h,m,g){m.exports=function(p,y){var b,v,E,M,W,$,N,j,F,P,L,k,R,C,_,x,w,S,I,z,A,H,K,J,V;b=p.state,v=p.next_in,J=p.input,E=v+(p.avail_in-5),M=p.next_out,V=p.output,W=M-(y-p.avail_out),$=M+(p.avail_out-257),N=b.dmax,j=b.wsize,F=b.whave,P=b.wnext,L=b.window,k=b.hold,R=b.bits,C=b.lencode,_=b.distcode,x=(1<<b.lenbits)-1,w=(1<<b.distbits)-1;e:do{R<15&&(k+=J[v++]<<R,R+=8,k+=J[v++]<<R,R+=8),S=C[k&x];t:for(;;){if(k>>>=I=S>>>24,R-=I,(I=S>>>16&255)==0)V[M++]=65535&S;else{if(!(16&I)){if(!(64&I)){S=C[(65535&S)+(k&(1<<I)-1)];continue t}if(32&I){b.mode=12;break e}p.msg="invalid literal/length code",b.mode=30;break e}z=65535&S,(I&=15)&&(R<I&&(k+=J[v++]<<R,R+=8),z+=k&(1<<I)-1,k>>>=I,R-=I),R<15&&(k+=J[v++]<<R,R+=8,k+=J[v++]<<R,R+=8),S=_[k&w];r:for(;;){if(k>>>=I=S>>>24,R-=I,!(16&(I=S>>>16&255))){if(!(64&I)){S=_[(65535&S)+(k&(1<<I)-1)];continue r}p.msg="invalid distance code",b.mode=30;break e}if(A=65535&S,R<(I&=15)&&(k+=J[v++]<<R,(R+=8)<I&&(k+=J[v++]<<R,R+=8)),N<(A+=k&(1<<I)-1)){p.msg="invalid distance too far back",b.mode=30;break e}if(k>>>=I,R-=I,(I=M-W)<A){if(F<(I=A-I)&&b.sane){p.msg="invalid distance too far back",b.mode=30;break e}if(K=L,(H=0)===P){if(H+=j-I,I<z){for(z-=I;V[M++]=L[H++],--I;);H=M-A,K=V}}else if(P<I){if(H+=j+P-I,(I-=P)<z){for(z-=I;V[M++]=L[H++],--I;);if(H=0,P<z){for(z-=I=P;V[M++]=L[H++],--I;);H=M-A,K=V}}}else if(H+=P-I,I<z){for(z-=I;V[M++]=L[H++],--I;);H=M-A,K=V}for(;2<z;)V[M++]=K[H++],V[M++]=K[H++],V[M++]=K[H++],z-=3;z&&(V[M++]=K[H++],1<z&&(V[M++]=K[H++]))}else{for(H=M-A;V[M++]=V[H++],V[M++]=V[H++],V[M++]=V[H++],2<(z-=3););z&&(V[M++]=V[H++],1<z&&(V[M++]=V[H++]))}break}}break}}while(v<E&&M<$);v-=z=R>>3,k&=(1<<(R-=z<<3))-1,p.next_in=v,p.next_out=M,p.avail_in=v<E?E-v+5:5-(v-E),p.avail_out=M<$?$-M+257:257-(M-$),b.hold=k,b.bits=R}},{}],49:[function(h,m,g){var p=h("../utils/common"),y=h("./adler32"),b=h("./crc32"),v=h("./inffast"),E=h("./inftrees"),M=-2;function W(x){return(x>>>24&255)+(x>>>8&65280)+((65280&x)<<8)+((255&x)<<24)}function $(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new p.Buf16(320),this.work=new p.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(x){var w;return x&&x.state?(w=x.state,x.total_in=x.total_out=w.total=0,x.msg="",w.wrap&&(x.adler=1&w.wrap),w.mode=1,w.last=0,w.havedict=0,w.dmax=32768,w.head=null,w.hold=0,w.bits=0,w.lencode=w.lendyn=new p.Buf32(852),w.distcode=w.distdyn=new p.Buf32(592),w.sane=1,w.back=-1,0):M}function j(x){var w;return x&&x.state?((w=x.state).wsize=0,w.whave=0,w.wnext=0,N(x)):M}function F(x,w){var S,I;return x&&x.state?(I=x.state,w<0?(S=0,w=-w):(S=1+(w>>4),w<48&&(w&=15)),w&&(w<8||15<w)?M:(I.window!==null&&I.wbits!==w&&(I.window=null),I.wrap=S,I.wbits=w,j(x))):M}function P(x,w){var S,I;return x?(I=new $,(x.state=I).window=null,(S=F(x,w))!==0&&(x.state=null),S):M}var L,k,R=!0;function C(x){if(R){var w;for(L=new p.Buf32(512),k=new p.Buf32(32),w=0;w<144;)x.lens[w++]=8;for(;w<256;)x.lens[w++]=9;for(;w<280;)x.lens[w++]=7;for(;w<288;)x.lens[w++]=8;for(E(1,x.lens,0,288,L,0,x.work,{bits:9}),w=0;w<32;)x.lens[w++]=5;E(2,x.lens,0,32,k,0,x.work,{bits:5}),R=!1}x.lencode=L,x.lenbits=9,x.distcode=k,x.distbits=5}function _(x,w,S,I){var z,A=x.state;return A.window===null&&(A.wsize=1<<A.wbits,A.wnext=0,A.whave=0,A.window=new p.Buf8(A.wsize)),I>=A.wsize?(p.arraySet(A.window,w,S-A.wsize,A.wsize,0),A.wnext=0,A.whave=A.wsize):(I<(z=A.wsize-A.wnext)&&(z=I),p.arraySet(A.window,w,S-I,z,A.wnext),(I-=z)?(p.arraySet(A.window,w,S-I,I,0),A.wnext=I,A.whave=A.wsize):(A.wnext+=z,A.wnext===A.wsize&&(A.wnext=0),A.whave<A.wsize&&(A.whave+=z))),0}g.inflateReset=j,g.inflateReset2=F,g.inflateResetKeep=N,g.inflateInit=function(x){return P(x,15)},g.inflateInit2=P,g.inflate=function(x,w){var S,I,z,A,H,K,J,V,X,D,O,G,Z,ue,te,oe,re,be,ie,le,ae,Se,ve,ke,Ne=0,ze=new p.Buf8(4),we=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!x||!x.state||!x.output||!x.input&&x.avail_in!==0)return M;(S=x.state).mode===12&&(S.mode=13),H=x.next_out,z=x.output,J=x.avail_out,A=x.next_in,I=x.input,K=x.avail_in,V=S.hold,X=S.bits,D=K,O=J,Se=0;e:for(;;)switch(S.mode){case 1:if(S.wrap===0){S.mode=13;break}for(;X<16;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}if(2&S.wrap&&V===35615){ze[S.check=0]=255&V,ze[1]=V>>>8&255,S.check=b(S.check,ze,2,0),X=V=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&V)<<8)+(V>>8))%31){x.msg="incorrect header check",S.mode=30;break}if((15&V)!=8){x.msg="unknown compression method",S.mode=30;break}if(X-=4,ae=8+(15&(V>>>=4)),S.wbits===0)S.wbits=ae;else if(ae>S.wbits){x.msg="invalid window size",S.mode=30;break}S.dmax=1<<ae,x.adler=S.check=1,S.mode=512&V?10:12,X=V=0;break;case 2:for(;X<16;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}if(S.flags=V,(255&S.flags)!=8){x.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){x.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=V>>8&1),512&S.flags&&(ze[0]=255&V,ze[1]=V>>>8&255,S.check=b(S.check,ze,2,0)),X=V=0,S.mode=3;case 3:for(;X<32;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}S.head&&(S.head.time=V),512&S.flags&&(ze[0]=255&V,ze[1]=V>>>8&255,ze[2]=V>>>16&255,ze[3]=V>>>24&255,S.check=b(S.check,ze,4,0)),X=V=0,S.mode=4;case 4:for(;X<16;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}S.head&&(S.head.xflags=255&V,S.head.os=V>>8),512&S.flags&&(ze[0]=255&V,ze[1]=V>>>8&255,S.check=b(S.check,ze,2,0)),X=V=0,S.mode=5;case 5:if(1024&S.flags){for(;X<16;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}S.length=V,S.head&&(S.head.extra_len=V),512&S.flags&&(ze[0]=255&V,ze[1]=V>>>8&255,S.check=b(S.check,ze,2,0)),X=V=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(K<(G=S.length)&&(G=K),G&&(S.head&&(ae=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),p.arraySet(S.head.extra,I,A,G,ae)),512&S.flags&&(S.check=b(S.check,I,G,A)),K-=G,A+=G,S.length-=G),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(K===0)break e;for(G=0;ae=I[A+G++],S.head&&ae&&S.length<65536&&(S.head.name+=String.fromCharCode(ae)),ae&&G<K;);if(512&S.flags&&(S.check=b(S.check,I,G,A)),K-=G,A+=G,ae)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(K===0)break e;for(G=0;ae=I[A+G++],S.head&&ae&&S.length<65536&&(S.head.comment+=String.fromCharCode(ae)),ae&&G<K;);if(512&S.flags&&(S.check=b(S.check,I,G,A)),K-=G,A+=G,ae)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;X<16;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}if(V!==(65535&S.check)){x.msg="header crc mismatch",S.mode=30;break}X=V=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),x.adler=S.check=0,S.mode=12;break;case 10:for(;X<32;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}x.adler=S.check=W(V),X=V=0,S.mode=11;case 11:if(S.havedict===0)return x.next_out=H,x.avail_out=J,x.next_in=A,x.avail_in=K,S.hold=V,S.bits=X,2;x.adler=S.check=1,S.mode=12;case 12:if(w===5||w===6)break e;case 13:if(S.last){V>>>=7&X,X-=7&X,S.mode=27;break}for(;X<3;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}switch(S.last=1&V,X-=1,3&(V>>>=1)){case 0:S.mode=14;break;case 1:if(C(S),S.mode=20,w!==6)break;V>>>=2,X-=2;break e;case 2:S.mode=17;break;case 3:x.msg="invalid block type",S.mode=30}V>>>=2,X-=2;break;case 14:for(V>>>=7&X,X-=7&X;X<32;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}if((65535&V)!=(V>>>16^65535)){x.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&V,X=V=0,S.mode=15,w===6)break e;case 15:S.mode=16;case 16:if(G=S.length){if(K<G&&(G=K),J<G&&(G=J),G===0)break e;p.arraySet(z,I,A,G,H),K-=G,A+=G,J-=G,H+=G,S.length-=G;break}S.mode=12;break;case 17:for(;X<14;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}if(S.nlen=257+(31&V),V>>>=5,X-=5,S.ndist=1+(31&V),V>>>=5,X-=5,S.ncode=4+(15&V),V>>>=4,X-=4,286<S.nlen||30<S.ndist){x.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;X<3;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}S.lens[we[S.have++]]=7&V,V>>>=3,X-=3}for(;S.have<19;)S.lens[we[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,ve={bits:S.lenbits},Se=E(0,S.lens,0,19,S.lencode,0,S.work,ve),S.lenbits=ve.bits,Se){x.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;oe=(Ne=S.lencode[V&(1<<S.lenbits)-1])>>>16&255,re=65535&Ne,!((te=Ne>>>24)<=X);){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}if(re<16)V>>>=te,X-=te,S.lens[S.have++]=re;else{if(re===16){for(ke=te+2;X<ke;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}if(V>>>=te,X-=te,S.have===0){x.msg="invalid bit length repeat",S.mode=30;break}ae=S.lens[S.have-1],G=3+(3&V),V>>>=2,X-=2}else if(re===17){for(ke=te+3;X<ke;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}X-=te,ae=0,G=3+(7&(V>>>=te)),V>>>=3,X-=3}else{for(ke=te+7;X<ke;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}X-=te,ae=0,G=11+(127&(V>>>=te)),V>>>=7,X-=7}if(S.have+G>S.nlen+S.ndist){x.msg="invalid bit length repeat",S.mode=30;break}for(;G--;)S.lens[S.have++]=ae}}if(S.mode===30)break;if(S.lens[256]===0){x.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,ve={bits:S.lenbits},Se=E(1,S.lens,0,S.nlen,S.lencode,0,S.work,ve),S.lenbits=ve.bits,Se){x.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,ve={bits:S.distbits},Se=E(2,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,ve),S.distbits=ve.bits,Se){x.msg="invalid distances set",S.mode=30;break}if(S.mode=20,w===6)break e;case 20:S.mode=21;case 21:if(6<=K&&258<=J){x.next_out=H,x.avail_out=J,x.next_in=A,x.avail_in=K,S.hold=V,S.bits=X,v(x,O),H=x.next_out,z=x.output,J=x.avail_out,A=x.next_in,I=x.input,K=x.avail_in,V=S.hold,X=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;oe=(Ne=S.lencode[V&(1<<S.lenbits)-1])>>>16&255,re=65535&Ne,!((te=Ne>>>24)<=X);){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}if(oe&&!(240&oe)){for(be=te,ie=oe,le=re;oe=(Ne=S.lencode[le+((V&(1<<be+ie)-1)>>be)])>>>16&255,re=65535&Ne,!(be+(te=Ne>>>24)<=X);){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}V>>>=be,X-=be,S.back+=be}if(V>>>=te,X-=te,S.back+=te,S.length=re,oe===0){S.mode=26;break}if(32&oe){S.back=-1,S.mode=12;break}if(64&oe){x.msg="invalid literal/length code",S.mode=30;break}S.extra=15&oe,S.mode=22;case 22:if(S.extra){for(ke=S.extra;X<ke;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}S.length+=V&(1<<S.extra)-1,V>>>=S.extra,X-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;oe=(Ne=S.distcode[V&(1<<S.distbits)-1])>>>16&255,re=65535&Ne,!((te=Ne>>>24)<=X);){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}if(!(240&oe)){for(be=te,ie=oe,le=re;oe=(Ne=S.distcode[le+((V&(1<<be+ie)-1)>>be)])>>>16&255,re=65535&Ne,!(be+(te=Ne>>>24)<=X);){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}V>>>=be,X-=be,S.back+=be}if(V>>>=te,X-=te,S.back+=te,64&oe){x.msg="invalid distance code",S.mode=30;break}S.offset=re,S.extra=15&oe,S.mode=24;case 24:if(S.extra){for(ke=S.extra;X<ke;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}S.offset+=V&(1<<S.extra)-1,V>>>=S.extra,X-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){x.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(J===0)break e;if(G=O-J,S.offset>G){if((G=S.offset-G)>S.whave&&S.sane){x.msg="invalid distance too far back",S.mode=30;break}Z=G>S.wnext?(G-=S.wnext,S.wsize-G):S.wnext-G,G>S.length&&(G=S.length),ue=S.window}else ue=z,Z=H-S.offset,G=S.length;for(J<G&&(G=J),J-=G,S.length-=G;z[H++]=ue[Z++],--G;);S.length===0&&(S.mode=21);break;case 26:if(J===0)break e;z[H++]=S.length,J--,S.mode=21;break;case 27:if(S.wrap){for(;X<32;){if(K===0)break e;K--,V|=I[A++]<<X,X+=8}if(O-=J,x.total_out+=O,S.total+=O,O&&(x.adler=S.check=S.flags?b(S.check,z,O,H-O):y(S.check,z,O,H-O)),O=J,(S.flags?V:W(V))!==S.check){x.msg="incorrect data check",S.mode=30;break}X=V=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;X<32;){if(K===0)break e;K--,V+=I[A++]<<X,X+=8}if(V!==(4294967295&S.total)){x.msg="incorrect length check",S.mode=30;break}X=V=0}S.mode=29;case 29:Se=1;break e;case 30:Se=-3;break e;case 31:return-4;case 32:default:return M}return x.next_out=H,x.avail_out=J,x.next_in=A,x.avail_in=K,S.hold=V,S.bits=X,(S.wsize||O!==x.avail_out&&S.mode<30&&(S.mode<27||w!==4))&&_(x,x.output,x.next_out,O-x.avail_out)?(S.mode=31,-4):(D-=x.avail_in,O-=x.avail_out,x.total_in+=D,x.total_out+=O,S.total+=O,S.wrap&&O&&(x.adler=S.check=S.flags?b(S.check,z,O,x.next_out-O):y(S.check,z,O,x.next_out-O)),x.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(D==0&&O===0||w===4)&&Se===0&&(Se=-5),Se)},g.inflateEnd=function(x){if(!x||!x.state)return M;var w=x.state;return w.window&&(w.window=null),x.state=null,0},g.inflateGetHeader=function(x,w){var S;return x&&x.state&&2&(S=x.state).wrap?((S.head=w).done=!1,0):M},g.inflateSetDictionary=function(x,w){var S,I=w.length;return x&&x.state?(S=x.state).wrap!==0&&S.mode!==11?M:S.mode===11&&y(1,w,I,0)!==S.check?-3:_(x,w,I,I)?(S.mode=31,-4):(S.havedict=1,0):M},g.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(h,m,g){var p=h("../utils/common"),y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],b=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],v=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],E=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];m.exports=function(M,W,$,N,j,F,P,L){var k,R,C,_,x,w,S,I,z,A=L.bits,H=0,K=0,J=0,V=0,X=0,D=0,O=0,G=0,Z=0,ue=0,te=null,oe=0,re=new p.Buf16(16),be=new p.Buf16(16),ie=null,le=0;for(H=0;H<=15;H++)re[H]=0;for(K=0;K<N;K++)re[W[$+K]]++;for(X=A,V=15;1<=V&&re[V]===0;V--);if(V<X&&(X=V),V===0)return j[F++]=20971520,j[F++]=20971520,L.bits=1,0;for(J=1;J<V&&re[J]===0;J++);for(X<J&&(X=J),H=G=1;H<=15;H++)if(G<<=1,(G-=re[H])<0)return-1;if(0<G&&(M===0||V!==1))return-1;for(be[1]=0,H=1;H<15;H++)be[H+1]=be[H]+re[H];for(K=0;K<N;K++)W[$+K]!==0&&(P[be[W[$+K]]++]=K);if(w=M===0?(te=ie=P,19):M===1?(te=y,oe-=257,ie=b,le-=257,256):(te=v,ie=E,-1),H=J,x=F,O=K=ue=0,C=-1,_=(Z=1<<(D=X))-1,M===1&&852<Z||M===2&&592<Z)return 1;for(;;){for(S=H-O,z=P[K]<w?(I=0,P[K]):P[K]>w?(I=ie[le+P[K]],te[oe+P[K]]):(I=96,0),k=1<<H-O,J=R=1<<D;j[x+(ue>>O)+(R-=k)]=S<<24|I<<16|z|0,R!==0;);for(k=1<<H-1;ue&k;)k>>=1;if(k!==0?(ue&=k-1,ue+=k):ue=0,K++,--re[H]==0){if(H===V)break;H=W[$+P[K]]}if(X<H&&(ue&_)!==C){for(O===0&&(O=X),x+=J,G=1<<(D=H-O);D+O<V&&!((G-=re[D+O])<=0);)D++,G<<=1;if(Z+=1<<D,M===1&&852<Z||M===2&&592<Z)return 1;j[C=ue&_]=X<<24|D<<16|x-F|0}}return ue!==0&&(j[x+ue]=H-O<<24|64<<16|0),L.bits=X,0}},{"../utils/common":41}],51:[function(h,m,g){m.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(h,m,g){var p=h("../utils/common");function y(ie){for(var le=ie.length;0<=--le;)ie[le]=0}var b=256,v=286,E=30,M=15,W=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(576);y(F);var P=new Array(60);y(P);var L=new Array(512);y(L);var k=new Array(256);y(k);var R=new Array(29);y(R);var C,_,x,w=new Array(E);function S(ie,le,ae,Se,ve){this.static_tree=ie,this.extra_bits=le,this.extra_base=ae,this.elems=Se,this.max_length=ve,this.has_stree=ie&&ie.length}function I(ie,le){this.dyn_tree=ie,this.max_code=0,this.stat_desc=le}function z(ie){return ie<256?L[ie]:L[256+(ie>>>7)]}function A(ie,le){ie.pending_buf[ie.pending++]=255&le,ie.pending_buf[ie.pending++]=le>>>8&255}function H(ie,le,ae){ie.bi_valid>16-ae?(ie.bi_buf|=le<<ie.bi_valid&65535,A(ie,ie.bi_buf),ie.bi_buf=le>>16-ie.bi_valid,ie.bi_valid+=ae-16):(ie.bi_buf|=le<<ie.bi_valid&65535,ie.bi_valid+=ae)}function K(ie,le,ae){H(ie,ae[2*le],ae[2*le+1])}function J(ie,le){for(var ae=0;ae|=1&ie,ie>>>=1,ae<<=1,0<--le;);return ae>>>1}function V(ie,le,ae){var Se,ve,ke=new Array(16),Ne=0;for(Se=1;Se<=M;Se++)ke[Se]=Ne=Ne+ae[Se-1]<<1;for(ve=0;ve<=le;ve++){var ze=ie[2*ve+1];ze!==0&&(ie[2*ve]=J(ke[ze]++,ze))}}function X(ie){var le;for(le=0;le<v;le++)ie.dyn_ltree[2*le]=0;for(le=0;le<E;le++)ie.dyn_dtree[2*le]=0;for(le=0;le<19;le++)ie.bl_tree[2*le]=0;ie.dyn_ltree[512]=1,ie.opt_len=ie.static_len=0,ie.last_lit=ie.matches=0}function D(ie){8<ie.bi_valid?A(ie,ie.bi_buf):0<ie.bi_valid&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0}function O(ie,le,ae,Se){var ve=2*le,ke=2*ae;return ie[ve]<ie[ke]||ie[ve]===ie[ke]&&Se[le]<=Se[ae]}function G(ie,le,ae){for(var Se=ie.heap[ae],ve=ae<<1;ve<=ie.heap_len&&(ve<ie.heap_len&&O(le,ie.heap[ve+1],ie.heap[ve],ie.depth)&&ve++,!O(le,Se,ie.heap[ve],ie.depth));)ie.heap[ae]=ie.heap[ve],ae=ve,ve<<=1;ie.heap[ae]=Se}function Z(ie,le,ae){var Se,ve,ke,Ne,ze=0;if(ie.last_lit!==0)for(;Se=ie.pending_buf[ie.d_buf+2*ze]<<8|ie.pending_buf[ie.d_buf+2*ze+1],ve=ie.pending_buf[ie.l_buf+ze],ze++,Se===0?K(ie,ve,le):(K(ie,(ke=k[ve])+b+1,le),(Ne=W[ke])!==0&&H(ie,ve-=R[ke],Ne),K(ie,ke=z(--Se),ae),(Ne=$[ke])!==0&&H(ie,Se-=w[ke],Ne)),ze<ie.last_lit;);K(ie,256,le)}function ue(ie,le){var ae,Se,ve,ke=le.dyn_tree,Ne=le.stat_desc.static_tree,ze=le.stat_desc.has_stree,we=le.stat_desc.elems,De=-1;for(ie.heap_len=0,ie.heap_max=573,ae=0;ae<we;ae++)ke[2*ae]!==0?(ie.heap[++ie.heap_len]=De=ae,ie.depth[ae]=0):ke[2*ae+1]=0;for(;ie.heap_len<2;)ke[2*(ve=ie.heap[++ie.heap_len]=De<2?++De:0)]=1,ie.depth[ve]=0,ie.opt_len--,ze&&(ie.static_len-=Ne[2*ve+1]);for(le.max_code=De,ae=ie.heap_len>>1;1<=ae;ae--)G(ie,ke,ae);for(ve=we;ae=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],G(ie,ke,1),Se=ie.heap[1],ie.heap[--ie.heap_max]=ae,ie.heap[--ie.heap_max]=Se,ke[2*ve]=ke[2*ae]+ke[2*Se],ie.depth[ve]=(ie.depth[ae]>=ie.depth[Se]?ie.depth[ae]:ie.depth[Se])+1,ke[2*ae+1]=ke[2*Se+1]=ve,ie.heap[1]=ve++,G(ie,ke,1),2<=ie.heap_len;);ie.heap[--ie.heap_max]=ie.heap[1],function(He,We){var et,St,lt,At,ct,at,wt=We.dyn_tree,ot=We.max_code,nt=We.stat_desc.static_tree,zt=We.stat_desc.has_stree,Lt=We.stat_desc.extra_bits,Ct=We.stat_desc.extra_base,Ht=We.stat_desc.max_length,jt=0;for(At=0;At<=M;At++)He.bl_count[At]=0;for(wt[2*He.heap[He.heap_max]+1]=0,et=He.heap_max+1;et<573;et++)Ht<(At=wt[2*wt[2*(St=He.heap[et])+1]+1]+1)&&(At=Ht,jt++),wt[2*St+1]=At,ot<St||(He.bl_count[At]++,ct=0,Ct<=St&&(ct=Lt[St-Ct]),at=wt[2*St],He.opt_len+=at*(At+ct),zt&&(He.static_len+=at*(nt[2*St+1]+ct)));if(jt!==0){do{for(At=Ht-1;He.bl_count[At]===0;)At--;He.bl_count[At]--,He.bl_count[At+1]+=2,He.bl_count[Ht]--,jt-=2}while(0<jt);for(At=Ht;At!==0;At--)for(St=He.bl_count[At];St!==0;)ot<(lt=He.heap[--et])||(wt[2*lt+1]!==At&&(He.opt_len+=(At-wt[2*lt+1])*wt[2*lt],wt[2*lt+1]=At),St--)}}(ie,le),V(ke,De,ie.bl_count)}function te(ie,le,ae){var Se,ve,ke=-1,Ne=le[1],ze=0,we=7,De=4;for(Ne===0&&(we=138,De=3),le[2*(ae+1)+1]=65535,Se=0;Se<=ae;Se++)ve=Ne,Ne=le[2*(Se+1)+1],++ze<we&&ve===Ne||(ze<De?ie.bl_tree[2*ve]+=ze:ve!==0?(ve!==ke&&ie.bl_tree[2*ve]++,ie.bl_tree[32]++):ze<=10?ie.bl_tree[34]++:ie.bl_tree[36]++,ke=ve,De=(ze=0)===Ne?(we=138,3):ve===Ne?(we=6,3):(we=7,4))}function oe(ie,le,ae){var Se,ve,ke=-1,Ne=le[1],ze=0,we=7,De=4;for(Ne===0&&(we=138,De=3),Se=0;Se<=ae;Se++)if(ve=Ne,Ne=le[2*(Se+1)+1],!(++ze<we&&ve===Ne)){if(ze<De)for(;K(ie,ve,ie.bl_tree),--ze!=0;);else ve!==0?(ve!==ke&&(K(ie,ve,ie.bl_tree),ze--),K(ie,16,ie.bl_tree),H(ie,ze-3,2)):ze<=10?(K(ie,17,ie.bl_tree),H(ie,ze-3,3)):(K(ie,18,ie.bl_tree),H(ie,ze-11,7));ke=ve,De=(ze=0)===Ne?(we=138,3):ve===Ne?(we=6,3):(we=7,4)}}y(w);var re=!1;function be(ie,le,ae,Se){H(ie,0+(Se?1:0),3),function(ve,ke,Ne,ze){D(ve),A(ve,Ne),A(ve,~Ne),p.arraySet(ve.pending_buf,ve.window,ke,Ne,ve.pending),ve.pending+=Ne}(ie,le,ae)}g._tr_init=function(ie){re||(function(){var le,ae,Se,ve,ke,Ne=new Array(16);for(ve=Se=0;ve<28;ve++)for(R[ve]=Se,le=0;le<1<<W[ve];le++)k[Se++]=ve;for(k[Se-1]=ve,ve=ke=0;ve<16;ve++)for(w[ve]=ke,le=0;le<1<<$[ve];le++)L[ke++]=ve;for(ke>>=7;ve<E;ve++)for(w[ve]=ke<<7,le=0;le<1<<$[ve]-7;le++)L[256+ke++]=ve;for(ae=0;ae<=M;ae++)Ne[ae]=0;for(le=0;le<=143;)F[2*le+1]=8,le++,Ne[8]++;for(;le<=255;)F[2*le+1]=9,le++,Ne[9]++;for(;le<=279;)F[2*le+1]=7,le++,Ne[7]++;for(;le<=287;)F[2*le+1]=8,le++,Ne[8]++;for(V(F,287,Ne),le=0;le<E;le++)P[2*le+1]=5,P[2*le]=J(le,5);C=new S(F,W,257,v,M),_=new S(P,$,0,E,M),x=new S(new Array(0),N,0,19,7)}(),re=!0),ie.l_desc=new I(ie.dyn_ltree,C),ie.d_desc=new I(ie.dyn_dtree,_),ie.bl_desc=new I(ie.bl_tree,x),ie.bi_buf=0,ie.bi_valid=0,X(ie)},g._tr_stored_block=be,g._tr_flush_block=function(ie,le,ae,Se){var ve,ke,Ne=0;0<ie.level?(ie.strm.data_type===2&&(ie.strm.data_type=function(ze){var we,De=4093624447;for(we=0;we<=31;we++,De>>>=1)if(1&De&&ze.dyn_ltree[2*we]!==0)return 0;if(ze.dyn_ltree[18]!==0||ze.dyn_ltree[20]!==0||ze.dyn_ltree[26]!==0)return 1;for(we=32;we<b;we++)if(ze.dyn_ltree[2*we]!==0)return 1;return 0}(ie)),ue(ie,ie.l_desc),ue(ie,ie.d_desc),Ne=function(ze){var we;for(te(ze,ze.dyn_ltree,ze.l_desc.max_code),te(ze,ze.dyn_dtree,ze.d_desc.max_code),ue(ze,ze.bl_desc),we=18;3<=we&&ze.bl_tree[2*j[we]+1]===0;we--);return ze.opt_len+=3*(we+1)+5+5+4,we}(ie),ve=ie.opt_len+3+7>>>3,(ke=ie.static_len+3+7>>>3)<=ve&&(ve=ke)):ve=ke=ae+5,ae+4<=ve&&le!==-1?be(ie,le,ae,Se):ie.strategy===4||ke===ve?(H(ie,2+(Se?1:0),3),Z(ie,F,P)):(H(ie,4+(Se?1:0),3),function(ze,we,De,He){var We;for(H(ze,we-257,5),H(ze,De-1,5),H(ze,He-4,4),We=0;We<He;We++)H(ze,ze.bl_tree[2*j[We]+1],3);oe(ze,ze.dyn_ltree,we-1),oe(ze,ze.dyn_dtree,De-1)}(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,Ne+1),Z(ie,ie.dyn_ltree,ie.dyn_dtree)),X(ie),Se&&D(ie)},g._tr_tally=function(ie,le,ae){return ie.pending_buf[ie.d_buf+2*ie.last_lit]=le>>>8&255,ie.pending_buf[ie.d_buf+2*ie.last_lit+1]=255&le,ie.pending_buf[ie.l_buf+ie.last_lit]=255&ae,ie.last_lit++,le===0?ie.dyn_ltree[2*ae]++:(ie.matches++,le--,ie.dyn_ltree[2*(k[ae]+b+1)]++,ie.dyn_dtree[2*z(le)]++),ie.last_lit===ie.lit_bufsize-1},g._tr_align=function(ie){H(ie,2,3),K(ie,256,F),function(le){le.bi_valid===16?(A(le,le.bi_buf),le.bi_buf=0,le.bi_valid=0):8<=le.bi_valid&&(le.pending_buf[le.pending++]=255&le.bi_buf,le.bi_buf>>=8,le.bi_valid-=8)}(ie)}},{"../utils/common":41}],53:[function(h,m,g){m.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(h,m,g){(function(p){(function(y,b){if(!y.setImmediate){var v,E,M,W,$=1,N={},j=!1,F=y.document,P=Object.getPrototypeOf&&Object.getPrototypeOf(y);P=P&&P.setTimeout?P:y,v={}.toString.call(y.process)==="[object process]"?function(C){s.nextTick(function(){k(C)})}:function(){if(y.postMessage&&!y.importScripts){var C=!0,_=y.onmessage;return y.onmessage=function(){C=!1},y.postMessage("","*"),y.onmessage=_,C}}()?(W="setImmediate$"+Math.random()+"$",y.addEventListener?y.addEventListener("message",R,!1):y.attachEvent("onmessage",R),function(C){y.postMessage(W+C,"*")}):y.MessageChannel?((M=new MessageChannel).port1.onmessage=function(C){k(C.data)},function(C){M.port2.postMessage(C)}):F&&"onreadystatechange"in F.createElement("script")?(E=F.documentElement,function(C){var _=F.createElement("script");_.onreadystatechange=function(){k(C),_.onreadystatechange=null,E.removeChild(_),_=null},E.appendChild(_)}):function(C){setTimeout(k,0,C)},P.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var _=new Array(arguments.length-1),x=0;x<_.length;x++)_[x]=arguments[x+1];var w={callback:C,args:_};return N[$]=w,v($),$++},P.clearImmediate=L}function L(C){delete N[C]}function k(C){if(j)setTimeout(k,0,C);else{var _=N[C];if(_){j=!0;try{(function(x){var w=x.callback,S=x.args;switch(S.length){case 0:w();break;case 1:w(S[0]);break;case 2:w(S[0],S[1]);break;case 3:w(S[0],S[1],S[2]);break;default:w.apply(void 0,S)}})(_)}finally{L(C),j=!1}}}}function R(C){C.source===y&&typeof C.data=="string"&&C.data.indexOf(W)===0&&k(+C.data.slice(W.length))}})(typeof self>"u"?p===void 0?this:p:self)}).call(this,o!==void 0?o:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}).call(this)}).call(this,t("_process"),typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],t("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(t,n,i){(function(s){(function(){var o=/[\\^$.*+?()[\]{}|]/g,l=RegExp(o.source),c=typeof s=="object"&&s&&s.Object===Object&&s,a=typeof self=="object"&&self&&self.Object===Object&&self,u=c||a||Function("return this")(),d=Object.prototype.toString,f=u.Symbol,h=f?f.prototype:void 0,m=h?h.toString:void 0;function g(p){if(typeof p=="string")return p;if(function(b){return typeof b=="symbol"||function(v){return!!v&&typeof v=="object"}(b)&&d.call(b)=="[object Symbol]"}(p))return m?m.call(p):"";var y=p+"";return y=="0"&&1/p==-1/0?"-0":y}n.exports=function(p){var y;return(p=(y=p)==null?"":g(y))&&l.test(p)?p.replace(o,"\\$&"):p}}).call(this)}).call(this,typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(t,n,i){(function(s){(function(){var o="[object Arguments]",l="[object Map]",c="[object Object]",a="[object Set]",u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/,f=/^\./,h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,m=/\\(\\)?/g,g=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y[o]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y["[object Function]"]=y[l]=y["[object Number]"]=y[c]=y["[object RegExp]"]=y[a]=y["[object String]"]=y["[object WeakMap]"]=!1;var b=typeof s=="object"&&s&&s.Object===Object&&s,v=typeof self=="object"&&self&&self.Object===Object&&self,E=b||v||Function("return this")(),M=typeof i=="object"&&i&&!i.nodeType&&i,W=M&&typeof n=="object"&&n&&!n.nodeType&&n,$=W&&W.exports===M&&b.process,N=function(){try{return $&&$.binding("util")}catch{}}(),j=N&&N.isTypedArray;function F(de,Me,Oe,it){for(var vt=-1,It=de?de.length:0;++vt<It;){var kt=de[vt];Me(it,kt,Oe(kt),de)}return it}function P(de,Me){for(var Oe=-1,it=de?de.length:0;++Oe<it;)if(Me(de[Oe],Oe,de))return!0;return!1}function L(de){var Me=!1;if(de!=null&&typeof de.toString!="function")try{Me=!!(de+"")}catch{}return Me}function k(de){var Me=-1,Oe=Array(de.size);return de.forEach(function(it,vt){Oe[++Me]=[vt,it]}),Oe}function R(de){var Me=-1,Oe=Array(de.size);return de.forEach(function(it){Oe[++Me]=it}),Oe}var C,_,x,w=Array.prototype,S=Function.prototype,I=Object.prototype,z=E["__core-js_shared__"],A=(C=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",H=S.toString,K=I.hasOwnProperty,J=I.toString,V=RegExp("^"+H.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),X=E.Symbol,D=E.Uint8Array,O=I.propertyIsEnumerable,G=w.splice,Z=(_=Object.keys,x=Object,function(de){return _(x(de))}),ue=lr(E,"DataView"),te=lr(E,"Map"),oe=lr(E,"Promise"),re=lr(E,"Set"),be=lr(E,"WeakMap"),ie=lr(Object,"create"),le=Ye(ue),ae=Ye(te),Se=Ye(oe),ve=Ye(re),ke=Ye(be),Ne=X?X.prototype:void 0,ze=Ne?Ne.valueOf:void 0,we=Ne?Ne.toString:void 0;function De(de){var Me=-1,Oe=de?de.length:0;for(this.clear();++Me<Oe;){var it=de[Me];this.set(it[0],it[1])}}function He(de){var Me=-1,Oe=de?de.length:0;for(this.clear();++Me<Oe;){var it=de[Me];this.set(it[0],it[1])}}function We(de){var Me=-1,Oe=de?de.length:0;for(this.clear();++Me<Oe;){var it=de[Me];this.set(it[0],it[1])}}function et(de){var Me=-1,Oe=de?de.length:0;for(this.__data__=new We;++Me<Oe;)this.add(de[Me])}function St(de){this.__data__=new He(de)}function lt(de,Me){var Oe=Te(de)||pe(de)?function(kt,ir){for(var Zt=-1,qt=Array(kt);++Zt<kt;)qt[Zt]=ir(Zt);return qt}(de.length,String):[],it=Oe.length,vt=!!it;for(var It in de)!K.call(de,It)||vt&&(It=="length"||jr(It,it))||Oe.push(It);return Oe}function At(de,Me){for(var Oe=de.length;Oe--;)if(Ke(de[Oe][0],Me))return Oe;return-1}function ct(de,Me,Oe,it){return wt(de,function(vt,It,kt){Me(it,vt,Oe(vt),kt)}),it}De.prototype.clear=function(){this.__data__=ie?ie(null):{}},De.prototype.delete=function(de){return this.has(de)&&delete this.__data__[de]},De.prototype.get=function(de){var Me=this.__data__;if(ie){var Oe=Me[de];return Oe==="__lodash_hash_undefined__"?void 0:Oe}return K.call(Me,de)?Me[de]:void 0},De.prototype.has=function(de){var Me=this.__data__;return ie?Me[de]!==void 0:K.call(Me,de)},De.prototype.set=function(de,Me){return this.__data__[de]=ie&&Me===void 0?"__lodash_hash_undefined__":Me,this},He.prototype.clear=function(){this.__data__=[]},He.prototype.delete=function(de){var Me=this.__data__,Oe=At(Me,de);return!(Oe<0)&&(Oe==Me.length-1?Me.pop():G.call(Me,Oe,1),!0)},He.prototype.get=function(de){var Me=this.__data__,Oe=At(Me,de);return Oe<0?void 0:Me[Oe][1]},He.prototype.has=function(de){return At(this.__data__,de)>-1},He.prototype.set=function(de,Me){var Oe=this.__data__,it=At(Oe,de);return it<0?Oe.push([de,Me]):Oe[it][1]=Me,this},We.prototype.clear=function(){this.__data__={hash:new De,map:new(te||He),string:new De}},We.prototype.delete=function(de){return Sr(this,de).delete(de)},We.prototype.get=function(de){return Sr(this,de).get(de)},We.prototype.has=function(de){return Sr(this,de).has(de)},We.prototype.set=function(de,Me){return Sr(this,de).set(de,Me),this},et.prototype.add=et.prototype.push=function(de){return this.__data__.set(de,"__lodash_hash_undefined__"),this},et.prototype.has=function(de){return this.__data__.has(de)},St.prototype.clear=function(){this.__data__=new He},St.prototype.delete=function(de){return this.__data__.delete(de)},St.prototype.get=function(de){return this.__data__.get(de)},St.prototype.has=function(de){return this.__data__.has(de)},St.prototype.set=function(de,Me){var Oe=this.__data__;if(Oe instanceof He){var it=Oe.__data__;if(!te||it.length<199)return it.push([de,Me]),this;Oe=this.__data__=new We(it)}return Oe.set(de,Me),this};var at,wt=(at=function(de,Me){return de&&ot(de,Me,Ge)},function(de,Me){if(de==null)return de;if(!Ze(de))return at(de,Me);for(var Oe=de.length,it=-1,vt=Object(de);++it<Oe&&Me(vt[it],it,vt)!==!1;);return de}),ot=function(de){return function(Me,Oe,it){for(var vt=-1,It=Object(Me),kt=it(Me),ir=kt.length;ir--;){var Zt=kt[++vt];if(Oe(It[Zt],Zt,It)===!1)break}return Me}}();function nt(de,Me){for(var Oe=0,it=(Me=Ft(Me,de)?[Me]:Mt(Me)).length;de!=null&&Oe<it;)de=de[Ue(Me[Oe++])];return Oe&&Oe==it?de:void 0}function zt(de,Me){return de!=null&&Me in Object(de)}function Lt(de,Me,Oe,it,vt){return de===Me||(de==null||Me==null||!Ce(de)&&!Ve(Me)?de!=de&&Me!=Me:function(It,kt,ir,Zt,qt,Ut){var sr=Te(It),rr=Te(kt),ur="[object Array]",hr="[object Array]";sr||(ur=(ur=pr(It))==o?c:ur),rr||(hr=(hr=pr(kt))==o?c:hr);var Mr=ur==c&&!L(It),Yr=hr==c&&!L(kt),Br=ur==hr;if(Br&&!Mr)return Ut||(Ut=new St),sr||st(It)?Qt(It,kt,ir,Zt,qt,Ut):function(Wr,qr,ki,_t,Et,Qe,Ae){switch(ki){case"[object DataView]":if(Wr.byteLength!=qr.byteLength||Wr.byteOffset!=qr.byteOffset)return!1;Wr=Wr.buffer,qr=qr.buffer;case"[object ArrayBuffer]":return!(Wr.byteLength!=qr.byteLength||!_t(new D(Wr),new D(qr)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ke(+Wr,+qr);case"[object Error]":return Wr.name==qr.name&&Wr.message==qr.message;case"[object RegExp]":case"[object String]":return Wr==qr+"";case l:var Ee=k;case a:var gt=2&Qe;if(Ee||(Ee=R),Wr.size!=qr.size&&!gt)return!1;var $t=Ae.get(Wr);if($t)return $t==qr;Qe|=1,Ae.set(Wr,qr);var dt=Qt(Ee(Wr),Ee(qr),_t,Et,Qe,Ae);return Ae.delete(Wr),dt;case"[object Symbol]":if(ze)return ze.call(Wr)==ze.call(qr)}return!1}(It,kt,ur,ir,Zt,qt,Ut);if(!(2&qt)){var si=Mr&&K.call(It,"__wrapped__"),Zr=Yr&&K.call(kt,"__wrapped__");if(si||Zr){var an=si?It.value():It,Ln=Zr?kt.value():kt;return Ut||(Ut=new St),ir(an,Ln,Zt,qt,Ut)}}return Br?(Ut||(Ut=new St),function(Wr,qr,ki,_t,Et,Qe){var Ae=2&Et,Ee=Ge(Wr),gt=Ee.length,$t=Ge(qr).length;if(gt!=$t&&!Ae)return!1;for(var dt=gt;dt--;){var Tt=Ee[dt];if(!(Ae?Tt in qr:K.call(qr,Tt)))return!1}var er=Qe.get(Wr);if(er&&Qe.get(qr))return er==qr;var Ur=!0;Qe.set(Wr,qr),Qe.set(qr,Wr);for(var pn=Ae;++dt<gt;){Tt=Ee[dt];var Dt=Wr[Tt],kr=qr[Tt];if(_t)var fr=Ae?_t(kr,Dt,Tt,qr,Wr,Qe):_t(Dt,kr,Tt,Wr,qr,Qe);if(!(fr===void 0?Dt===kr||ki(Dt,kr,_t,Et,Qe):fr)){Ur=!1;break}pn||(pn=Tt=="constructor")}if(Ur&&!pn){var tr=Wr.constructor,Vr=qr.constructor;tr==Vr||!("constructor"in Wr)||!("constructor"in qr)||typeof tr=="function"&&tr instanceof tr&&typeof Vr=="function"&&Vr instanceof Vr||(Ur=!1)}return Qe.delete(Wr),Qe.delete(qr),Ur}(It,kt,ir,Zt,qt,Ut)):!1}(de,Me,Lt,Oe,it,vt))}function Ct(de){return!(!Ce(de)||function(Me){return!!A&&A in Me}(de))&&(ut(de)||L(de)?V:g).test(Ye(de))}function Ht(de){return typeof de=="function"?de:de==null?pt:typeof de=="object"?Te(de)?function(it,vt){return Ft(it)&&zr(vt)?Rr(Ue(it),vt):function(It){var kt=function(ir,Zt,qt){var Ut=ir==null?void 0:nt(ir,Zt);return Ut===void 0?qt:Ut}(It,it);return kt===void 0&&kt===vt?function(ir,Zt){return ir!=null&&function(qt,Ut,sr){Ut=Ft(Ut,qt)?[Ut]:Mt(Ut);for(var rr,ur=-1,hr=Ut.length;++ur<hr;){var Mr=Ue(Ut[ur]);if(!(rr=qt!=null&&sr(qt,Mr)))break;qt=qt[Mr]}return rr||!!(hr=qt?qt.length:0)&&he(hr)&&jr(Mr,hr)&&(Te(qt)||pe(qt))}(ir,Zt,zt)}(It,it):Lt(vt,kt,void 0,3)}}(de[0],de[1]):function(it){var vt=function(It){for(var kt=Ge(It),ir=kt.length;ir--;){var Zt=kt[ir],qt=It[Zt];kt[ir]=[Zt,qt,zr(qt)]}return kt}(it);return vt.length==1&&vt[0][2]?Rr(vt[0][0],vt[0][1]):function(It){return It===it||function(kt,ir,Zt,qt){var Ut=Zt.length,sr=Ut;if(kt==null)return!sr;for(kt=Object(kt);Ut--;){var rr=Zt[Ut];if(rr[2]?rr[1]!==kt[rr[0]]:!(rr[0]in kt))return!1}for(;++Ut<sr;){var ur=(rr=Zt[Ut])[0],hr=kt[ur],Mr=rr[1];if(rr[2]){if(hr===void 0&&!(ur in kt))return!1}else{var Yr=new St,Br;if(!(Br===void 0?Lt(Mr,hr,qt,3,Yr):Br))return!1}}return!0}(It,it,vt)}}(de):Ft(Me=de)?(Oe=Ue(Me),function(it){return it==null?void 0:it[Oe]}):function(it){return function(vt){return nt(vt,it)}}(Me);var Me,Oe}function jt(de){if(Oe=(Me=de)&&Me.constructor,it=typeof Oe=="function"&&Oe.prototype||I,Me!==it)return Z(de);var Me,Oe,it,vt=[];for(var It in Object(de))K.call(de,It)&&It!="constructor"&&vt.push(It);return vt}function Mt(de){return Te(de)?de:mr(de)}function Qt(de,Me,Oe,it,vt,It){var kt=2&vt,ir=de.length,Zt=Me.length;if(ir!=Zt&&!(kt&&Zt>ir))return!1;var qt=It.get(de);if(qt&&It.get(Me))return qt==Me;var Ut=-1,sr=!0,rr=1&vt?new et:void 0;for(It.set(de,Me),It.set(Me,de);++Ut<ir;){var ur=de[Ut],hr=Me[Ut];if(it)var Mr=kt?it(hr,ur,Ut,Me,de,It):it(ur,hr,Ut,de,Me,It);if(Mr!==void 0){if(Mr)continue;sr=!1;break}if(rr){if(!P(Me,function(Yr,Br){if(!rr.has(Br)&&(ur===Yr||Oe(ur,Yr,it,vt,It)))return rr.add(Br)})){sr=!1;break}}else if(ur!==hr&&!Oe(ur,hr,it,vt,It)){sr=!1;break}}return It.delete(de),It.delete(Me),sr}function Sr(de,Me){var Oe,it,vt=de.__data__;return((it=typeof(Oe=Me))=="string"||it=="number"||it=="symbol"||it=="boolean"?Oe!=="__proto__":Oe===null)?vt[typeof Me=="string"?"string":"hash"]:vt.map}function lr(de,Me){var Oe=function(it,vt){return it==null?void 0:it[vt]}(de,Me);return Ct(Oe)?Oe:void 0}var pr=function(de){return J.call(de)};function jr(de,Me){return!!(Me=Me??9007199254740991)&&(typeof de=="number"||p.test(de))&&de>-1&&de%1==0&&de<Me}function Ft(de,Me){if(Te(de))return!1;var Oe=typeof de;return!(Oe!="number"&&Oe!="symbol"&&Oe!="boolean"&&de!=null&&!Be(de))||d.test(de)||!u.test(de)||Me!=null&&de in Object(Me)}function zr(de){return de==de&&!Ce(de)}function Rr(de,Me){return function(Oe){return Oe!=null&&Oe[de]===Me&&(Me!==void 0||de in Object(Oe))}}(ue&&pr(new ue(new ArrayBuffer(1)))!="[object DataView]"||te&&pr(new te)!=l||oe&&pr(oe.resolve())!="[object Promise]"||re&&pr(new re)!=a||be&&pr(new be)!="[object WeakMap]")&&(pr=function(de){var Me=J.call(de),Oe=Me==c?de.constructor:void 0,it=Oe?Ye(Oe):void 0;if(it)switch(it){case le:return"[object DataView]";case ae:return l;case Se:return"[object Promise]";case ve:return a;case ke:return"[object WeakMap]"}return Me});var mr=Fe(function(de){var Me;de=(Me=de)==null?"":function(it){if(typeof it=="string")return it;if(Be(it))return we?we.call(it):"";var vt=it+"";return vt=="0"&&1/it==-1/0?"-0":vt}(Me);var Oe=[];return f.test(de)&&Oe.push(""),de.replace(h,function(it,vt,It,kt){Oe.push(It?kt.replace(m,"$1"):vt||it)}),Oe});function Ue(de){if(typeof de=="string"||Be(de))return de;var Me=de+"";return Me=="0"&&1/de==-1/0?"-0":Me}function Ye(de){if(de!=null){try{return H.call(de)}catch{}try{return de+""}catch{}}return""}var Xe,Le=(Xe=function(de,Me,Oe){K.call(de,Oe)?de[Oe].push(Me):de[Oe]=[Me]},function(de,Me){var Oe=Te(de)?F:ct,it={};return Oe(de,Xe,Ht(Me),it)});function Fe(de,Me){if(typeof de!="function"||Me&&typeof Me!="function")throw new TypeError("Expected a function");var Oe=function(){var it=arguments,vt=Me?Me.apply(this,it):it[0],It=Oe.cache;if(It.has(vt))return It.get(vt);var kt=de.apply(this,it);return Oe.cache=It.set(vt,kt),kt};return Oe.cache=new(Fe.Cache||We),Oe}function Ke(de,Me){return de===Me||de!=de&&Me!=Me}function pe(de){return function(Me){return Ve(Me)&&Ze(Me)}(de)&&K.call(de,"callee")&&(!O.call(de,"callee")||J.call(de)==o)}Fe.Cache=We;var Te=Array.isArray;function Ze(de){return de!=null&&he(de.length)&&!ut(de)}function ut(de){var Me=Ce(de)?J.call(de):"";return Me=="[object Function]"||Me=="[object GeneratorFunction]"}function he(de){return typeof de=="number"&&de>-1&&de%1==0&&de<=9007199254740991}function Ce(de){var Me=typeof de;return!!de&&(Me=="object"||Me=="function")}function Ve(de){return!!de&&typeof de=="object"}function Be(de){return typeof de=="symbol"||Ve(de)&&J.call(de)=="[object Symbol]"}var st=j?function(de){return function(Me){return de(Me)}}(j):function(de){return Ve(de)&&he(de.length)&&!!y[J.call(de)]};function Ge(de){return Ze(de)?lt(de):jt(de)}function pt(de){return de}n.exports=Le}).call(this)}).call(this,typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(t,n,i){var s=Object.prototype.toString;n.exports=function(o){return o===!0||o===!1||function(l){return!!l&&typeof l=="object"}(o)&&s.call(o)=="[object Boolean]"}},{}],445:[function(t,n,i){(function(s){(function(){var o="[object Arguments]",l="[object Map]",c="[object Object]",a="[object Set]",u=/^\[object .+?Constructor\]$/,d=/^(?:0|[1-9]\d*)$/,f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f[o]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object Boolean]"]=f["[object DataView]"]=f["[object Date]"]=f["[object Error]"]=f["[object Function]"]=f[l]=f["[object Number]"]=f[c]=f["[object RegExp]"]=f[a]=f["[object String]"]=f["[object WeakMap]"]=!1;var h=typeof s=="object"&&s&&s.Object===Object&&s,m=typeof self=="object"&&self&&self.Object===Object&&self,g=h||m||Function("return this")(),p=typeof i=="object"&&i&&!i.nodeType&&i,y=p&&typeof n=="object"&&n&&!n.nodeType&&n,b=y&&y.exports===p,v=b&&h.process,E=function(){try{return v&&v.binding&&v.binding("util")}catch{}}(),M=E&&E.isTypedArray;function W(Ue,Ye){for(var Xe=-1,Le=Ue==null?0:Ue.length;++Xe<Le;)if(Ye(Ue[Xe],Xe,Ue))return!0;return!1}function $(Ue){var Ye=-1,Xe=Array(Ue.size);return Ue.forEach(function(Le,Fe){Xe[++Ye]=[Fe,Le]}),Xe}function N(Ue){var Ye=-1,Xe=Array(Ue.size);return Ue.forEach(function(Le){Xe[++Ye]=Le}),Xe}var j,F,P,L=Array.prototype,k=Function.prototype,R=Object.prototype,C=g["__core-js_shared__"],_=k.toString,x=R.hasOwnProperty,w=(j=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",S=R.toString,I=RegExp("^"+_.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),z=b?g.Buffer:void 0,A=g.Symbol,H=g.Uint8Array,K=R.propertyIsEnumerable,J=L.splice,V=A?A.toStringTag:void 0,X=Object.getOwnPropertySymbols,D=z?z.isBuffer:void 0,O=(F=Object.keys,P=Object,function(Ue){return F(P(Ue))}),G=zt(g,"DataView"),Z=zt(g,"Map"),ue=zt(g,"Promise"),te=zt(g,"Set"),oe=zt(g,"WeakMap"),re=zt(Object,"create"),be=jt(G),ie=jt(Z),le=jt(ue),ae=jt(te),Se=jt(oe),ve=A?A.prototype:void 0,ke=ve?ve.valueOf:void 0;function Ne(Ue){var Ye=-1,Xe=Ue==null?0:Ue.length;for(this.clear();++Ye<Xe;){var Le=Ue[Ye];this.set(Le[0],Le[1])}}function ze(Ue){var Ye=-1,Xe=Ue==null?0:Ue.length;for(this.clear();++Ye<Xe;){var Le=Ue[Ye];this.set(Le[0],Le[1])}}function we(Ue){var Ye=-1,Xe=Ue==null?0:Ue.length;for(this.clear();++Ye<Xe;){var Le=Ue[Ye];this.set(Le[0],Le[1])}}function De(Ue){var Ye=-1,Xe=Ue==null?0:Ue.length;for(this.__data__=new we;++Ye<Xe;)this.add(Ue[Ye])}function He(Ue){var Ye=this.__data__=new ze(Ue);this.size=Ye.size}function We(Ue,Ye){var Xe=Sr(Ue),Le=!Xe&&Qt(Ue),Fe=!Xe&&!Le&&lr(Ue),Ke=!Xe&&!Le&&!Fe&&Rr(Ue),pe=Xe||Le||Fe||Ke,Te=pe?function(he,Ce){for(var Ve=-1,Be=Array(he);++Ve<he;)Be[Ve]=Ce(Ve);return Be}(Ue.length,String):[],Ze=Te.length;for(var ut in Ue)!x.call(Ue,ut)||pe&&(ut=="length"||Fe&&(ut=="offset"||ut=="parent")||Ke&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||Ht(ut,Ze))||Te.push(ut);return Te}function et(Ue,Ye){for(var Xe=Ue.length;Xe--;)if(Mt(Ue[Xe][0],Ye))return Xe;return-1}function St(Ue){return Ue==null?Ue===void 0?"[object Undefined]":"[object Null]":V&&V in Object(Ue)?function(Ye){var Xe=x.call(Ye,V),Le=Ye[V];try{Ye[V]=void 0;var Fe=!0}catch{}var Ke=S.call(Ye);return Fe&&(Xe?Ye[V]=Le:delete Ye[V]),Ke}(Ue):function(Ye){return S.call(Ye)}(Ue)}function lt(Ue){return zr(Ue)&&St(Ue)==o}function At(Ue,Ye,Xe,Le,Fe){return Ue===Ye||(Ue==null||Ye==null||!zr(Ue)&&!zr(Ye)?Ue!=Ue&&Ye!=Ye:function(Ke,pe,Te,Ze,ut,he){var Ce=Sr(Ke),Ve=Sr(pe),Be=Ce?"[object Array]":Ct(Ke),st=Ve?"[object Array]":Ct(pe),Ge=(Be=Be==o?c:Be)==c,pt=(st=st==o?c:st)==c,de=Be==st;if(de&&lr(Ke)){if(!lr(pe))return!1;Ce=!0,Ge=!1}if(de&&!Ge)return he||(he=new He),Ce||Rr(Ke)?wt(Ke,pe,Te,Ze,ut,he):function(It,kt,ir,Zt,qt,Ut,sr){switch(ir){case"[object DataView]":if(It.byteLength!=kt.byteLength||It.byteOffset!=kt.byteOffset)return!1;It=It.buffer,kt=kt.buffer;case"[object ArrayBuffer]":return!(It.byteLength!=kt.byteLength||!Ut(new H(It),new H(kt)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Mt(+It,+kt);case"[object Error]":return It.name==kt.name&&It.message==kt.message;case"[object RegExp]":case"[object String]":return It==kt+"";case l:var rr=$;case a:var ur=1&Zt;if(rr||(rr=N),It.size!=kt.size&&!ur)return!1;var hr=sr.get(It);if(hr)return hr==kt;Zt|=2,sr.set(It,kt);var Mr=wt(rr(It),rr(kt),Zt,qt,Ut,sr);return sr.delete(It),Mr;case"[object Symbol]":if(ke)return ke.call(It)==ke.call(kt)}return!1}(Ke,pe,Be,Te,Ze,ut,he);if(!(1&Te)){var Me=Ge&&x.call(Ke,"__wrapped__"),Oe=pt&&x.call(pe,"__wrapped__");if(Me||Oe){var it=Me?Ke.value():Ke,vt=Oe?pe.value():pe;return he||(he=new He),ut(it,vt,Te,Ze,he)}}return de?(he||(he=new He),function(It,kt,ir,Zt,qt,Ut){var sr=1&ir,rr=ot(It),ur=rr.length,hr=ot(kt).length;if(ur!=hr&&!sr)return!1;for(var Mr=ur;Mr--;){var Yr=rr[Mr];if(!(sr?Yr in kt:x.call(kt,Yr)))return!1}var Br=Ut.get(It);if(Br&&Ut.get(kt))return Br==kt;var si=!0;Ut.set(It,kt),Ut.set(kt,It);for(var Zr=sr;++Mr<ur;){Yr=rr[Mr];var an=It[Yr],Ln=kt[Yr];if(Zt)var Wr=sr?Zt(Ln,an,Yr,kt,It,Ut):Zt(an,Ln,Yr,It,kt,Ut);if(!(Wr===void 0?an===Ln||qt(an,Ln,ir,Zt,Ut):Wr)){si=!1;break}Zr||(Zr=Yr=="constructor")}if(si&&!Zr){var qr=It.constructor,ki=kt.constructor;qr==ki||!("constructor"in It)||!("constructor"in kt)||typeof qr=="function"&&qr instanceof qr&&typeof ki=="function"&&ki instanceof ki||(si=!1)}return Ut.delete(It),Ut.delete(kt),si}(Ke,pe,Te,Ze,ut,he)):!1}(Ue,Ye,Xe,Le,At,Fe))}function ct(Ue){return!(!Ft(Ue)||function(Ye){return!!w&&w in Ye}(Ue))&&(pr(Ue)?I:u).test(jt(Ue))}function at(Ue){if(Xe=(Ye=Ue)&&Ye.constructor,Le=typeof Xe=="function"&&Xe.prototype||R,Ye!==Le)return O(Ue);var Ye,Xe,Le,Fe=[];for(var Ke in Object(Ue))x.call(Ue,Ke)&&Ke!="constructor"&&Fe.push(Ke);return Fe}function wt(Ue,Ye,Xe,Le,Fe,Ke){var pe=1&Xe,Te=Ue.length,Ze=Ye.length;if(Te!=Ze&&!(pe&&Ze>Te))return!1;var ut=Ke.get(Ue);if(ut&&Ke.get(Ye))return ut==Ye;var he=-1,Ce=!0,Ve=2&Xe?new De:void 0;for(Ke.set(Ue,Ye),Ke.set(Ye,Ue);++he<Te;){var Be=Ue[he],st=Ye[he];if(Le)var Ge=pe?Le(st,Be,he,Ye,Ue,Ke):Le(Be,st,he,Ue,Ye,Ke);if(Ge!==void 0){if(Ge)continue;Ce=!1;break}if(Ve){if(!W(Ye,function(pt,de){if(Me=de,!Ve.has(Me)&&(Be===pt||Fe(Be,pt,Xe,Le,Ke)))return Ve.push(de);var Me})){Ce=!1;break}}else if(Be!==st&&!Fe(Be,st,Xe,Le,Ke)){Ce=!1;break}}return Ke.delete(Ue),Ke.delete(Ye),Ce}function ot(Ue){return function(Ye,Xe,Le){var Fe=Xe(Ye);return Sr(Ye)?Fe:function(Ke,pe){for(var Te=-1,Ze=pe.length,ut=Ke.length;++Te<Ze;)Ke[ut+Te]=pe[Te];return Ke}(Fe,Le(Ye))}(Ue,mr,Lt)}function nt(Ue,Ye){var Xe,Le,Fe=Ue.__data__;return((Le=typeof(Xe=Ye))=="string"||Le=="number"||Le=="symbol"||Le=="boolean"?Xe!=="__proto__":Xe===null)?Fe[typeof Ye=="string"?"string":"hash"]:Fe.map}function zt(Ue,Ye){var Xe=function(Le,Fe){return Le==null?void 0:Le[Fe]}(Ue,Ye);return ct(Xe)?Xe:void 0}Ne.prototype.clear=function(){this.__data__=re?re(null):{},this.size=0},Ne.prototype.delete=function(Ue){var Ye=this.has(Ue)&&delete this.__data__[Ue];return this.size-=Ye?1:0,Ye},Ne.prototype.get=function(Ue){var Ye=this.__data__;if(re){var Xe=Ye[Ue];return Xe==="__lodash_hash_undefined__"?void 0:Xe}return x.call(Ye,Ue)?Ye[Ue]:void 0},Ne.prototype.has=function(Ue){var Ye=this.__data__;return re?Ye[Ue]!==void 0:x.call(Ye,Ue)},Ne.prototype.set=function(Ue,Ye){var Xe=this.__data__;return this.size+=this.has(Ue)?0:1,Xe[Ue]=re&&Ye===void 0?"__lodash_hash_undefined__":Ye,this},ze.prototype.clear=function(){this.__data__=[],this.size=0},ze.prototype.delete=function(Ue){var Ye=this.__data__,Xe=et(Ye,Ue);return!(Xe<0)&&(Xe==Ye.length-1?Ye.pop():J.call(Ye,Xe,1),--this.size,!0)},ze.prototype.get=function(Ue){var Ye=this.__data__,Xe=et(Ye,Ue);return Xe<0?void 0:Ye[Xe][1]},ze.prototype.has=function(Ue){return et(this.__data__,Ue)>-1},ze.prototype.set=function(Ue,Ye){var Xe=this.__data__,Le=et(Xe,Ue);return Le<0?(++this.size,Xe.push([Ue,Ye])):Xe[Le][1]=Ye,this},we.prototype.clear=function(){this.size=0,this.__data__={hash:new Ne,map:new(Z||ze),string:new Ne}},we.prototype.delete=function(Ue){var Ye=nt(this,Ue).delete(Ue);return this.size-=Ye?1:0,Ye},we.prototype.get=function(Ue){return nt(this,Ue).get(Ue)},we.prototype.has=function(Ue){return nt(this,Ue).has(Ue)},we.prototype.set=function(Ue,Ye){var Xe=nt(this,Ue),Le=Xe.size;return Xe.set(Ue,Ye),this.size+=Xe.size==Le?0:1,this},De.prototype.add=De.prototype.push=function(Ue){return this.__data__.set(Ue,"__lodash_hash_undefined__"),this},De.prototype.has=function(Ue){return this.__data__.has(Ue)},He.prototype.clear=function(){this.__data__=new ze,this.size=0},He.prototype.delete=function(Ue){var Ye=this.__data__,Xe=Ye.delete(Ue);return this.size=Ye.size,Xe},He.prototype.get=function(Ue){return this.__data__.get(Ue)},He.prototype.has=function(Ue){return this.__data__.has(Ue)},He.prototype.set=function(Ue,Ye){var Xe=this.__data__;if(Xe instanceof ze){var Le=Xe.__data__;if(!Z||Le.length<199)return Le.push([Ue,Ye]),this.size=++Xe.size,this;Xe=this.__data__=new we(Le)}return Xe.set(Ue,Ye),this.size=Xe.size,this};var Lt=X?function(Ue){return Ue==null?[]:(Ue=Object(Ue),function(Ye,Xe){for(var Le=-1,Fe=Ye==null?0:Ye.length,Ke=0,pe=[];++Le<Fe;){var Te=Ye[Le];Xe(Te,Le,Ye)&&(pe[Ke++]=Te)}return pe}(X(Ue),function(Ye){return K.call(Ue,Ye)}))}:function(){return[]},Ct=St;function Ht(Ue,Ye){return!!(Ye=Ye??9007199254740991)&&(typeof Ue=="number"||d.test(Ue))&&Ue>-1&&Ue%1==0&&Ue<Ye}function jt(Ue){if(Ue!=null){try{return _.call(Ue)}catch{}try{return Ue+""}catch{}}return""}function Mt(Ue,Ye){return Ue===Ye||Ue!=Ue&&Ye!=Ye}(G&&Ct(new G(new ArrayBuffer(1)))!="[object DataView]"||Z&&Ct(new Z)!=l||ue&&Ct(ue.resolve())!="[object Promise]"||te&&Ct(new te)!=a||oe&&Ct(new oe)!="[object WeakMap]")&&(Ct=function(Ue){var Ye=St(Ue),Xe=Ye==c?Ue.constructor:void 0,Le=Xe?jt(Xe):"";if(Le)switch(Le){case be:return"[object DataView]";case ie:return l;case le:return"[object Promise]";case ae:return a;case Se:return"[object WeakMap]"}return Ye});var Qt=lt(function(){return arguments}())?lt:function(Ue){return zr(Ue)&&x.call(Ue,"callee")&&!K.call(Ue,"callee")},Sr=Array.isArray,lr=D||function(){return!1};function pr(Ue){if(!Ft(Ue))return!1;var Ye=St(Ue);return Ye=="[object Function]"||Ye=="[object GeneratorFunction]"||Ye=="[object AsyncFunction]"||Ye=="[object Proxy]"}function jr(Ue){return typeof Ue=="number"&&Ue>-1&&Ue%1==0&&Ue<=9007199254740991}function Ft(Ue){var Ye=typeof Ue;return Ue!=null&&(Ye=="object"||Ye=="function")}function zr(Ue){return Ue!=null&&typeof Ue=="object"}var Rr=M?function(Ue){return function(Ye){return Ue(Ye)}}(M):function(Ue){return zr(Ue)&&jr(Ue.length)&&!!f[St(Ue)]};function mr(Ue){return(Ye=Ue)!=null&&jr(Ye.length)&&!pr(Ye)?We(Ue):at(Ue);var Ye}n.exports=function(Ue,Ye){return At(Ue,Ye)}}).call(this)}).call(this,typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(t,n,i){(function(s){(function(){var o=typeof s=="object"&&s&&s.Object===Object&&s,l=typeof self=="object"&&self&&self.Object===Object&&self,c=o||l||Function("return this")(),a=Object.prototype,u=a.hasOwnProperty,d=a.toString,f=c.Symbol,h=f?f.toStringTag:void 0;function m(g){return g==null?g===void 0?"[object Undefined]":"[object Null]":h&&h in Object(g)?function(p){var y=u.call(p,h),b=p[h];try{p[h]=void 0;var v=!0}catch{}var E=d.call(p);return v&&(y?p[h]=b:delete p[h]),E}(g):function(p){return d.call(p)}(g)}n.exports=function(g){if(!function(y){var b=typeof y;return y!=null&&(b=="object"||b=="function")}(g))return!1;var p=m(g);return p=="[object Function]"||p=="[object GeneratorFunction]"||p=="[object AsyncFunction]"||p=="[object Proxy]"}}).call(this)}).call(this,typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(t,n,i){n.exports=function(s){return s==null}},{}],448:[function(t,n,i){n.exports=function(s){return s===void 0}},{}],449:[function(t,n,i){(function(s){(function(){var o=/^\[object .+?Constructor\]$/,l=typeof s=="object"&&s&&s.Object===Object&&s,c=typeof self=="object"&&self&&self.Object===Object&&self,a=l||c||Function("return this")();function u(A,H){return!!(A&&A.length)&&function(K,J,V){if(J!=J)return function(O,G,Z,ue){for(var te=O.length,oe=Z+-1;++oe<te;)if(G(O[oe],oe,O))return oe;return-1}(K,d,V);for(var X=V-1,D=K.length;++X<D;)if(K[X]===J)return X;return-1}(A,H,0)>-1}function d(A){return A!=A}function f(A,H){return A.has(H)}function h(A){var H=-1,K=Array(A.size);return A.forEach(function(J){K[++H]=J}),K}var m,g=Array.prototype,p=Function.prototype,y=Object.prototype,b=a["__core-js_shared__"],v=(m=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",E=p.toString,M=y.hasOwnProperty,W=y.toString,$=RegExp("^"+E.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=g.splice,j=I(a,"Map"),F=I(a,"Set"),P=I(Object,"create");function L(A){var H=-1,K=A?A.length:0;for(this.clear();++H<K;){var J=A[H];this.set(J[0],J[1])}}function k(A){var H=-1,K=A?A.length:0;for(this.clear();++H<K;){var J=A[H];this.set(J[0],J[1])}}function R(A){var H=-1,K=A?A.length:0;for(this.clear();++H<K;){var J=A[H];this.set(J[0],J[1])}}function C(A){var H=-1,K=A?A.length:0;for(this.__data__=new R;++H<K;)this.add(A[H])}function _(A,H){for(var K,J,V=A.length;V--;)if((K=A[V][0])===(J=H)||K!=K&&J!=J)return V;return-1}function x(A){return!(!z(A)||(H=A,v&&v in H))&&(function(K){var J=z(K)?W.call(K):"";return J=="[object Function]"||J=="[object GeneratorFunction]"}(A)||function(K){var J=!1;if(K!=null&&typeof K.toString!="function")try{J=!!(K+"")}catch{}return J}(A)?$:o).test(function(K){if(K!=null){try{return E.call(K)}catch{}try{return K+""}catch{}}return""}(A));var H}L.prototype.clear=function(){this.__data__=P?P(null):{}},L.prototype.delete=function(A){return this.has(A)&&delete this.__data__[A]},L.prototype.get=function(A){var H=this.__data__;if(P){var K=H[A];return K==="__lodash_hash_undefined__"?void 0:K}return M.call(H,A)?H[A]:void 0},L.prototype.has=function(A){var H=this.__data__;return P?H[A]!==void 0:M.call(H,A)},L.prototype.set=function(A,H){return this.__data__[A]=P&&H===void 0?"__lodash_hash_undefined__":H,this},k.prototype.clear=function(){this.__data__=[]},k.prototype.delete=function(A){var H=this.__data__,K=_(H,A);return!(K<0)&&(K==H.length-1?H.pop():N.call(H,K,1),!0)},k.prototype.get=function(A){var H=this.__data__,K=_(H,A);return K<0?void 0:H[K][1]},k.prototype.has=function(A){return _(this.__data__,A)>-1},k.prototype.set=function(A,H){var K=this.__data__,J=_(K,A);return J<0?K.push([A,H]):K[J][1]=H,this},R.prototype.clear=function(){this.__data__={hash:new L,map:new(j||k),string:new L}},R.prototype.delete=function(A){return S(this,A).delete(A)},R.prototype.get=function(A){return S(this,A).get(A)},R.prototype.has=function(A){return S(this,A).has(A)},R.prototype.set=function(A,H){return S(this,A).set(A,H),this},C.prototype.add=C.prototype.push=function(A){return this.__data__.set(A,"__lodash_hash_undefined__"),this},C.prototype.has=function(A){return this.__data__.has(A)};var w=F&&1/h(new F([,-0]))[1]==1/0?function(A){return new F(A)}:function(){};function S(A,H){var K,J,V=A.__data__;return((J=typeof(K=H))=="string"||J=="number"||J=="symbol"||J=="boolean"?K!=="__proto__":K===null)?V[typeof H=="string"?"string":"hash"]:V.map}function I(A,H){var K=function(J,V){return J==null?void 0:J[V]}(A,H);return x(K)?K:void 0}function z(A){var H=typeof A;return!!A&&(H=="object"||H=="function")}n.exports=function(A){return A&&A.length?function(H,K,J){var V=-1,X=u,D=H.length,O=!0,G=[],Z=G;if(D>=200){var ue=w(H);if(ue)return h(ue);O=!1,X=f,Z=new C}else Z=G;e:for(;++V<D;){var te=H[V],oe=te;if(te=te!==0?te:0,O&&oe==oe){for(var re=Z.length;re--;)if(Z[re]===oe)continue e;G.push(te)}else X(Z,oe,J)||(Z!==G&&Z.push(oe),G.push(te))}return G}(A):[]}}).call(this)}).call(this,typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(t,n,i){var s=t("inherits"),o=t("hash-base"),l=t("safe-buffer").Buffer,c=new Array(16);function a(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(g,p){return g<<p|g>>>32-p}function d(g,p,y,b,v,E,M){return u(g+(p&y|~p&b)+v+E|0,M)+p|0}function f(g,p,y,b,v,E,M){return u(g+(p&b|y&~b)+v+E|0,M)+p|0}function h(g,p,y,b,v,E,M){return u(g+(p^y^b)+v+E|0,M)+p|0}function m(g,p,y,b,v,E,M){return u(g+(y^(p|~b))+v+E|0,M)+p|0}s(a,o),a.prototype._update=function(){for(var g=c,p=0;p<16;++p)g[p]=this._block.readInt32LE(4*p);var y=this._a,b=this._b,v=this._c,E=this._d;y=d(y,b,v,E,g[0],3614090360,7),E=d(E,y,b,v,g[1],3905402710,12),v=d(v,E,y,b,g[2],606105819,17),b=d(b,v,E,y,g[3],3250441966,22),y=d(y,b,v,E,g[4],4118548399,7),E=d(E,y,b,v,g[5],1200080426,12),v=d(v,E,y,b,g[6],2821735955,17),b=d(b,v,E,y,g[7],4249261313,22),y=d(y,b,v,E,g[8],1770035416,7),E=d(E,y,b,v,g[9],2336552879,12),v=d(v,E,y,b,g[10],4294925233,17),b=d(b,v,E,y,g[11],2304563134,22),y=d(y,b,v,E,g[12],1804603682,7),E=d(E,y,b,v,g[13],4254626195,12),v=d(v,E,y,b,g[14],2792965006,17),y=f(y,b=d(b,v,E,y,g[15],1236535329,22),v,E,g[1],4129170786,5),E=f(E,y,b,v,g[6],3225465664,9),v=f(v,E,y,b,g[11],643717713,14),b=f(b,v,E,y,g[0],3921069994,20),y=f(y,b,v,E,g[5],3593408605,5),E=f(E,y,b,v,g[10],38016083,9),v=f(v,E,y,b,g[15],3634488961,14),b=f(b,v,E,y,g[4],3889429448,20),y=f(y,b,v,E,g[9],568446438,5),E=f(E,y,b,v,g[14],3275163606,9),v=f(v,E,y,b,g[3],4107603335,14),b=f(b,v,E,y,g[8],1163531501,20),y=f(y,b,v,E,g[13],2850285829,5),E=f(E,y,b,v,g[2],4243563512,9),v=f(v,E,y,b,g[7],1735328473,14),y=h(y,b=f(b,v,E,y,g[12],2368359562,20),v,E,g[5],4294588738,4),E=h(E,y,b,v,g[8],2272392833,11),v=h(v,E,y,b,g[11],1839030562,16),b=h(b,v,E,y,g[14],4259657740,23),y=h(y,b,v,E,g[1],2763975236,4),E=h(E,y,b,v,g[4],1272893353,11),v=h(v,E,y,b,g[7],4139469664,16),b=h(b,v,E,y,g[10],3200236656,23),y=h(y,b,v,E,g[13],681279174,4),E=h(E,y,b,v,g[0],3936430074,11),v=h(v,E,y,b,g[3],3572445317,16),b=h(b,v,E,y,g[6],76029189,23),y=h(y,b,v,E,g[9],3654602809,4),E=h(E,y,b,v,g[12],3873151461,11),v=h(v,E,y,b,g[15],530742520,16),y=m(y,b=h(b,v,E,y,g[2],3299628645,23),v,E,g[0],4096336452,6),E=m(E,y,b,v,g[7],1126891415,10),v=m(v,E,y,b,g[14],2878612391,15),b=m(b,v,E,y,g[5],4237533241,21),y=m(y,b,v,E,g[12],1700485571,6),E=m(E,y,b,v,g[3],2399980690,10),v=m(v,E,y,b,g[10],4293915773,15),b=m(b,v,E,y,g[1],2240044497,21),y=m(y,b,v,E,g[8],1873313359,6),E=m(E,y,b,v,g[15],4264355552,10),v=m(v,E,y,b,g[6],2734768916,15),b=m(b,v,E,y,g[13],1309151649,21),y=m(y,b,v,E,g[4],4149444226,6),E=m(E,y,b,v,g[11],3174756917,10),v=m(v,E,y,b,g[2],718787259,15),b=m(b,v,E,y,g[9],3951481745,21),this._a=this._a+y|0,this._b=this._b+b|0,this._c=this._c+v|0,this._d=this._d+E|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var g=l.allocUnsafe(16);return g.writeInt32LE(this._a,0),g.writeInt32LE(this._b,4),g.writeInt32LE(this._c,8),g.writeInt32LE(this._d,12),g},n.exports=a},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(t,n,i){var s=t("bn.js"),o=t("brorand");function l(c){this.rand=c||new o.Rand}n.exports=l,l.create=function(c){return new l(c)},l.prototype._randbelow=function(c){var a=c.bitLength(),u=Math.ceil(a/8);do var d=new s(this.rand.generate(u));while(d.cmp(c)>=0);return d},l.prototype._randrange=function(c,a){var u=a.sub(c);return c.add(this._randbelow(u))},l.prototype.test=function(c,a,u){var d=c.bitLength(),f=s.mont(c),h=new s(1).toRed(f);a||(a=Math.max(1,d/48|0));for(var m=c.subn(1),g=0;!m.testn(g);g++);for(var p=c.shrn(g),y=m.toRed(f);a>0;a--){var b=this._randrange(new s(2),m);u&&u(b);var v=b.toRed(f).redPow(p);if(v.cmp(h)!==0&&v.cmp(y)!==0){for(var E=1;E<g;E++){if((v=v.redSqr()).cmp(h)===0)return!1;if(v.cmp(y)===0)break}if(E===g)return!1}}return!0},l.prototype.getDivisor=function(c,a){var u=c.bitLength(),d=s.mont(c),f=new s(1).toRed(d);a||(a=Math.max(1,u/48|0));for(var h=c.subn(1),m=0;!h.testn(m);m++);for(var g=c.shrn(m),p=h.toRed(d);a>0;a--){var y=this._randrange(new s(2),h),b=c.gcd(y);if(b.cmpn(1)!==0)return b;var v=y.toRed(d).redPow(g);if(v.cmp(f)!==0&&v.cmp(p)!==0){for(var E=1;E<m;E++){if((v=v.redSqr()).cmp(f)===0)return v.fromRed().subn(1).gcd(c);if(v.cmp(p)===0)break}if(E===m)return(v=v.redSqr()).fromRed().subn(1).gcd(c)}}return!1}},{"bn.js":452,brorand:187}],452:[function(t,n,i){arguments[4][184][0].apply(i,arguments)},{buffer:188,dup:184}],453:[function(t,n,i){function s(o,l){if(!o)throw new Error(l||"Assertion failed")}n.exports=s,s.equal=function(o,l,c){if(o!=l)throw new Error(c||"Assertion failed: "+o+" != "+l)}},{}],454:[function(t,n,i){var s=i;function o(c){return c.length===1?"0"+c:c}function l(c){for(var a="",u=0;u<c.length;u++)a+=o(c[u].toString(16));return a}s.toArray=function(c,a){if(Array.isArray(c))return c.slice();if(!c)return[];var u=[];if(typeof c!="string"){for(var d=0;d<c.length;d++)u[d]=0|c[d];return u}if(a==="hex")for((c=c.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(c="0"+c),d=0;d<c.length;d+=2)u.push(parseInt(c[d]+c[d+1],16));else for(d=0;d<c.length;d++){var f=c.charCodeAt(d),h=f>>8,m=255&f;h?u.push(h,m):u.push(m)}return u},s.zero2=o,s.toHex=l,s.encode=function(c,a){return a==="hex"?l(c):c}},{}],455:[function(t,n,i){n.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(t,n,i){var s=t("asn1.js");i.certificate=t("./certificate");var o=s.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});i.RSAPrivateKey=o;var l=s.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});i.RSAPublicKey=l;var c=s.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())});i.PublicKey=c;var a=s.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),u=s.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(a),this.key("subjectPrivateKey").octstr())});i.PrivateKey=u;var d=s.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});i.EncryptedPrivateKey=d;var f=s.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});i.DSAPrivateKey=f,i.DSAparam=s.define("DSAparam",function(){this.int()});var h=s.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(m),this.key("publicKey").optional().explicit(1).bitstr())});i.ECPrivateKey=h;var m=s.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});i.signature=s.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":457,"asn1.js":170}],457:[function(t,n,i){var s=t("asn1.js"),o=s.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),l=s.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),c=s.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),a=s.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(c),this.key("subjectPublicKey").bitstr())}),u=s.define("RelativeDistinguishedName",function(){this.setof(l)}),d=s.define("RDNSequence",function(){this.seqof(u)}),f=s.define("Name",function(){this.choice({rdnSequence:this.use(d)})}),h=s.define("Validity",function(){this.seq().obj(this.key("notBefore").use(o),this.key("notAfter").use(o))}),m=s.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),g=s.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(c),this.key("issuer").use(f),this.key("validity").use(h),this.key("subject").use(f),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(m).optional())}),p=s.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(g),this.key("signatureAlgorithm").use(c),this.key("signatureValue").bitstr())});n.exports=p},{"asn1.js":170}],458:[function(t,n,i){var s=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,l=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,c=t("evp_bytestokey"),a=t("browserify-aes"),u=t("safe-buffer").Buffer;n.exports=function(d,f){var h,m=d.toString(),g=m.match(s);if(g){var p="aes"+g[1],y=u.from(g[2],"hex"),b=u.from(g[3].replace(/[\r\n]/g,""),"base64"),v=c(f,y.slice(0,8),parseInt(g[1],10)).key,E=[],M=a.createDecipheriv(p,v,y);E.push(M.update(b)),E.push(M.final()),h=u.concat(E)}else{var W=m.match(l);h=u.from(W[2].replace(/[\r\n]/g,""),"base64")}return{tag:m.match(o)[1],data:h}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(t,n,i){var s=t("./asn1"),o=t("./aesid.json"),l=t("./fixProc"),c=t("browserify-aes"),a=t("pbkdf2"),u=t("safe-buffer").Buffer;function d(f){var h;typeof f!="object"||u.isBuffer(f)||(h=f.passphrase,f=f.key),typeof f=="string"&&(f=u.from(f));var m,g,p=l(f,h),y=p.tag,b=p.data;switch(y){case"CERTIFICATE":g=s.certificate.decode(b,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(g||(g=s.PublicKey.decode(b,"der")),m=g.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return s.RSAPublicKey.decode(g.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return g.subjectPrivateKey=g.subjectPublicKey,{type:"ec",data:g};case"1.2.840.10040.4.1":return g.algorithm.params.pub_key=s.DSAparam.decode(g.subjectPublicKey.data,"der"),{type:"dsa",data:g.algorithm.params};default:throw new Error("unknown key id "+m)}case"ENCRYPTED PRIVATE KEY":b=function(v,E){var M=v.algorithm.decrypt.kde.kdeparams.salt,W=parseInt(v.algorithm.decrypt.kde.kdeparams.iters.toString(),10),$=o[v.algorithm.decrypt.cipher.algo.join(".")],N=v.algorithm.decrypt.cipher.iv,j=v.subjectPrivateKey,F=parseInt($.split("-")[1],10)/8,P=a.pbkdf2Sync(E,M,W,F,"sha1"),L=c.createDecipheriv($,P,N),k=[];return k.push(L.update(j)),k.push(L.final()),u.concat(k)}(b=s.EncryptedPrivateKey.decode(b,"der"),h);case"PRIVATE KEY":switch(m=(g=s.PrivateKey.decode(b,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return s.RSAPrivateKey.decode(g.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:g.algorithm.curve,privateKey:s.ECPrivateKey.decode(g.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return g.algorithm.params.priv_key=s.DSAparam.decode(g.subjectPrivateKey,"der"),{type:"dsa",params:g.algorithm.params};default:throw new Error("unknown key id "+m)}case"RSA PUBLIC KEY":return s.RSAPublicKey.decode(b,"der");case"RSA PRIVATE KEY":return s.RSAPrivateKey.decode(b,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:s.DSAPrivateKey.decode(b,"der")};case"EC PRIVATE KEY":return{curve:(b=s.ECPrivateKey.decode(b,"der")).parameters.value,privateKey:b.privateKey};default:throw new Error("unknown key type "+y)}}n.exports=d,d.signature=s.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(t,n,i){i.pbkdf2=t("./lib/async"),i.pbkdf2Sync=t("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(t,n,i){(function(s){(function(){var o,l,c=t("safe-buffer").Buffer,a=t("./precondition"),u=t("./default-encoding"),d=t("./sync"),f=t("./to-buffer"),h=s.crypto&&s.crypto.subtle,m={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},g=[];function p(){return l||(l=s.process&&s.process.nextTick?s.process.nextTick:s.queueMicrotask?s.queueMicrotask:s.setImmediate?s.setImmediate:s.setTimeout)}function y(b,v,E,M,W){return h.importKey("raw",b,{name:"PBKDF2"},!1,["deriveBits"]).then(function($){return h.deriveBits({name:"PBKDF2",salt:v,iterations:E,hash:{name:W}},$,M<<3)}).then(function($){return c.from($)})}n.exports=function(b,v,E,M,W,$){typeof W=="function"&&($=W,W=void 0);var N=m[(W=W||"sha1").toLowerCase()];if(N&&typeof s.Promise=="function"){if(a(E,M),b=f(b,u,"Password"),v=f(v,u,"Salt"),typeof $!="function")throw new Error("No callback provided to pbkdf2");(function(j,F){j.then(function(P){p()(function(){F(null,P)})},function(P){p()(function(){F(P)})})})(function(j){if(s.process&&!s.process.browser||!h||!h.importKey||!h.deriveBits)return Promise.resolve(!1);if(g[j]!==void 0)return g[j];var F=y(o=o||c.alloc(8),o,10,128,j).then(function(){return!0}).catch(function(){return!1});return g[j]=F,F}(N).then(function(j){return j?y(b,v,E,M,N):d(b,v,E,M,W)}),$)}else p()(function(){var j;try{j=d(b,v,E,M,W)}catch(F){return $(F)}$(null,j)})}}).call(this)}).call(this,typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(t,n,i){(function(s,o){(function(){var l;o.process&&o.process.browser?l="utf-8":o.process&&o.process.version?l=parseInt(s.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":l="utf-8",n.exports=l}).call(this)}).call(this,t("_process"),typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(t,n,i){var s=Math.pow(2,30)-1;n.exports=function(o,l){if(typeof o!="number")throw new TypeError("Iterations not a number");if(o<0)throw new TypeError("Bad iterations");if(typeof l!="number")throw new TypeError("Key length not a number");if(l<0||l>s||l!=l)throw new TypeError("Bad key length")}},{}],464:[function(t,n,i){var s=t("create-hash/md5"),o=t("ripemd160"),l=t("sha.js"),c=t("safe-buffer").Buffer,a=t("./precondition"),u=t("./default-encoding"),d=t("./to-buffer"),f=c.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function m(g,p,y){var b=function(N){function j(F){return l(N).update(F).digest()}return N==="rmd160"||N==="ripemd160"?function(F){return new o().update(F).digest()}:N==="md5"?s:j}(g),v=g==="sha512"||g==="sha384"?128:64;p.length>v?p=b(p):p.length<v&&(p=c.concat([p,f],v));for(var E=c.allocUnsafe(v+h[g]),M=c.allocUnsafe(v+h[g]),W=0;W<v;W++)E[W]=54^p[W],M[W]=92^p[W];var $=c.allocUnsafe(v+y+4);E.copy($,0,0,v),this.ipad1=$,this.ipad2=E,this.opad=M,this.alg=g,this.blocksize=v,this.hash=b,this.size=h[g]}m.prototype.run=function(g,p){return g.copy(p,this.blocksize),this.hash(p).copy(this.opad,this.blocksize),this.hash(this.opad)},n.exports=function(g,p,y,b,v){a(y,b);var E=new m(v=v||"sha1",g=d(g,u,"Password"),(p=d(p,u,"Salt")).length),M=c.allocUnsafe(b),W=c.allocUnsafe(p.length+4);p.copy(W,0,0,p.length);for(var $=0,N=h[v],j=Math.ceil(b/N),F=1;F<=j;F++){W.writeUInt32BE(F,p.length);for(var P=E.run(W,E.ipad1),L=P,k=1;k<y;k++){L=E.run(L,E.ipad2);for(var R=0;R<N;R++)P[R]^=L[R]}P.copy(M,$),$+=N}return M}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(t,n,i){var s=t("safe-buffer").Buffer;n.exports=function(o,l,c){if(s.isBuffer(o))return o;if(typeof o=="string")return s.from(o,l);if(ArrayBuffer.isView(o))return s.from(o.buffer);throw new TypeError(c+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(t,n,i){(function(s){(function(){s===void 0||!s.version||s.version.indexOf("v0.")===0||s.version.indexOf("v1.")===0&&s.version.indexOf("v1.8.")!==0?n.exports={nextTick:function(o,l,c,a){if(typeof o!="function")throw new TypeError('"callback" argument must be a function');var u,d,f=arguments.length;switch(f){case 0:case 1:return s.nextTick(o);case 2:return s.nextTick(function(){o.call(null,l)});case 3:return s.nextTick(function(){o.call(null,l,c)});case 4:return s.nextTick(function(){o.call(null,l,c,a)});default:for(u=new Array(f-1),d=0;d<u.length;)u[d++]=arguments[d];return s.nextTick(function(){o.apply(null,u)})}}}:n.exports=s}).call(this)}).call(this,t("_process"))},{_process:467}],467:[function(t,n,i){var s,o,l=n.exports={};function c(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(v){if(s===setTimeout)return setTimeout(v,0);if((s===c||!s)&&setTimeout)return s=setTimeout,setTimeout(v,0);try{return s(v,0)}catch{try{return s.call(null,v,0)}catch{return s.call(this,v,0)}}}(function(){try{s=typeof setTimeout=="function"?setTimeout:c}catch{s=c}try{o=typeof clearTimeout=="function"?clearTimeout:a}catch{o=a}})();var d,f=[],h=!1,m=-1;function g(){h&&d&&(h=!1,d.length?f=d.concat(f):m=-1,f.length&&p())}function p(){if(!h){var v=u(g);h=!0;for(var E=f.length;E;){for(d=f,f=[];++m<E;)d&&d[m].run();m=-1,E=f.length}d=null,h=!1,function(M){if(o===clearTimeout)return clearTimeout(M);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(M);try{o(M)}catch{try{return o.call(null,M)}catch{return o.call(this,M)}}}(v)}}function y(v,E){this.fun=v,this.array=E}function b(){}l.nextTick=function(v){var E=new Array(arguments.length-1);if(arguments.length>1)for(var M=1;M<arguments.length;M++)E[M-1]=arguments[M];f.push(new y(v,E)),f.length!==1||h||u(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=b,l.addListener=b,l.once=b,l.off=b,l.removeListener=b,l.removeAllListeners=b,l.emit=b,l.prependListener=b,l.prependOnceListener=b,l.listeners=function(v){return[]},l.binding=function(v){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(v){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],468:[function(t,n,i){i.publicEncrypt=t("./publicEncrypt"),i.privateDecrypt=t("./privateDecrypt"),i.privateEncrypt=function(s,o){return i.publicEncrypt(s,o,!0)},i.publicDecrypt=function(s,o){return i.privateDecrypt(s,o,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(t,n,i){var s=t("create-hash"),o=t("safe-buffer").Buffer;function l(c){var a=o.allocUnsafe(4);return a.writeUInt32BE(c,0),a}n.exports=function(c,a){for(var u,d=o.alloc(0),f=0;d.length<a;)u=l(f++),d=o.concat([d,s("sha1").update(c).update(u).digest()]);return d.slice(0,a)}},{"create-hash":386,"safe-buffer":494}],470:[function(t,n,i){arguments[4][184][0].apply(i,arguments)},{buffer:188,dup:184}],471:[function(t,n,i){var s=t("parse-asn1"),o=t("./mgf"),l=t("./xor"),c=t("bn.js"),a=t("browserify-rsa"),u=t("create-hash"),d=t("./withPublic"),f=t("safe-buffer").Buffer;n.exports=function(h,m,g){var p;p=h.padding?h.padding:g?1:4;var y,b=s(h),v=b.modulus.byteLength();if(m.length>v||new c(m).cmp(b.modulus)>=0)throw new Error("decryption error");y=g?d(new c(m),b):a(m,b);var E=f.alloc(v-y.length);if(y=f.concat([E,y],v),p===4)return function(M,W){var $=M.modulus.byteLength(),N=u("sha1").update(f.alloc(0)).digest(),j=N.length;if(W[0]!==0)throw new Error("decryption error");var F=W.slice(1,j+1),P=W.slice(j+1),L=l(F,o(P,j)),k=l(P,o(L,$-j-1));if(function(C,_){C=f.from(C),_=f.from(_);var x=0,w=C.length;C.length!==_.length&&(x++,w=Math.min(C.length,_.length));for(var S=-1;++S<w;)x+=C[S]^_[S];return x}(N,k.slice(0,j)))throw new Error("decryption error");for(var R=j;k[R]===0;)R++;if(k[R++]!==1)throw new Error("decryption error");return k.slice(R)}(b,y);if(p===1)return function(M,W,$){for(var N=W.slice(0,2),j=2,F=0;W[j++]!==0;)if(j>=W.length){F++;break}var P=W.slice(2,j-1);if((N.toString("hex")!=="0002"&&!$||N.toString("hex")!=="0001"&&$)&&F++,P.length<8&&F++,F)throw new Error("decryption error");return W.slice(j)}(0,y,g);if(p===3)return y;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(t,n,i){var s=t("parse-asn1"),o=t("randombytes"),l=t("create-hash"),c=t("./mgf"),a=t("./xor"),u=t("bn.js"),d=t("./withPublic"),f=t("browserify-rsa"),h=t("safe-buffer").Buffer;n.exports=function(m,g,p){var y;y=m.padding?m.padding:p?1:4;var b,v=s(m);if(y===4)b=function(E,M){var W=E.modulus.byteLength(),$=M.length,N=l("sha1").update(h.alloc(0)).digest(),j=N.length,F=2*j;if($>W-F-2)throw new Error("message too long");var P=h.alloc(W-$-F-2),L=W-j-1,k=o(j),R=a(h.concat([N,P,h.alloc(1,1),M],L),c(k,L)),C=a(k,c(R,j));return new u(h.concat([h.alloc(1),C,R],W))}(v,g);else if(y===1)b=function(E,M,W){var $,N=M.length,j=E.modulus.byteLength();if(N>j-11)throw new Error("message too long");return $=W?h.alloc(j-N-3,255):function(F){for(var P,L=h.allocUnsafe(F),k=0,R=o(2*F),C=0;k<F;)C===R.length&&(R=o(2*F),C=0),(P=R[C++])&&(L[k++]=P);return L}(j-N-3),new u(h.concat([h.from([0,W?1:2]),$,h.alloc(1),M],j))}(v,g,p);else{if(y!==3)throw new Error("unknown padding");if((b=new u(g)).cmp(v.modulus)>=0)throw new Error("data too long for modulus")}return p?f(b,v):d(b,v)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(t,n,i){var s=t("bn.js"),o=t("safe-buffer").Buffer;n.exports=function(l,c){return o.from(l.toRed(s.mont(c.modulus)).redPow(new s(c.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(t,n,i){n.exports=function(s,o){for(var l=s.length,c=-1;++c<l;)s[c]^=o[c];return s}},{}],475:[function(t,n,i){(function(s,o){(function(){var l=t("safe-buffer").Buffer,c=o.crypto||o.msCrypto;c&&c.getRandomValues?n.exports=function(a,u){if(a>4294967295)throw new RangeError("requested too many random bytes");var d=l.allocUnsafe(a);if(a>0)if(a>65536)for(var f=0;f<a;f+=65536)c.getRandomValues(d.slice(f,f+65536));else c.getRandomValues(d);return typeof u=="function"?s.nextTick(function(){u(null,d)}):d}:n.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,t("_process"),typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(t,n,i){(function(s,o){(function(){function l(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var c=t("safe-buffer"),a=t("randombytes"),u=c.Buffer,d=c.kMaxLength,f=o.crypto||o.msCrypto,h=Math.pow(2,32)-1;function m(y,b){if(typeof y!="number"||y!=y)throw new TypeError("offset must be a number");if(y>h||y<0)throw new TypeError("offset must be a uint32");if(y>d||y>b)throw new RangeError("offset out of range")}function g(y,b,v){if(typeof y!="number"||y!=y)throw new TypeError("size must be a number");if(y>h||y<0)throw new TypeError("size must be a uint32");if(y+b>v||y>d)throw new RangeError("buffer too small")}function p(y,b,v,E){if(s.browser){var M=y.buffer,W=new Uint8Array(M,b,v);return f.getRandomValues(W),E?void s.nextTick(function(){E(null,y)}):y}if(!E)return a(v).copy(y,b),y;a(v,function($,N){if($)return E($);N.copy(y,b),E(null,y)})}f&&f.getRandomValues||!s.browser?(i.randomFill=function(y,b,v,E){if(!(u.isBuffer(y)||y instanceof o.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof b=="function")E=b,b=0,v=y.length;else if(typeof v=="function")E=v,v=y.length-b;else if(typeof E!="function")throw new TypeError('"cb" argument must be a function');return m(b,y.length),g(v,b,y.length),p(y,b,v,E)},i.randomFillSync=function(y,b,v){if(b===void 0&&(b=0),!(u.isBuffer(y)||y instanceof o.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return m(b,y.length),v===void 0&&(v=y.length-b),g(v,b,y.length),p(y,b,v)}):(i.randomFill=l,i.randomFillSync=l)}).call(this)}).call(this,t("_process"),typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(t,n,i){var s={};function o(c,a,u){u||(u=Error);var d=function(f){var h,m;function g(p,y,b){return f.call(this,function(v,E,M){return typeof a=="string"?a:a(v,E,M)}(p,y,b))||this}return m=f,(h=g).prototype=Object.create(m.prototype),h.prototype.constructor=h,h.__proto__=m,g}(u);d.prototype.name=u.name,d.prototype.code=c,s[c]=d}function l(c,a){if(Array.isArray(c)){var u=c.length;return c=c.map(function(d){return String(d)}),u>2?"one of ".concat(a," ").concat(c.slice(0,u-1).join(", "),", or ")+c[u-1]:u===2?"one of ".concat(a," ").concat(c[0]," or ").concat(c[1]):"of ".concat(a," ").concat(c[0])}return"of ".concat(a," ").concat(String(c))}o("ERR_INVALID_OPT_VALUE",function(c,a){return'The value "'+a+'" is invalid for option "'+c+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(c,a,u){var d,f,h;if(typeof a=="string"&&(f="not ",a.substr(0,f.length)===f)?(d="must not be",a=a.replace(/^not /,"")):d="must be",function(g,p,y){return(y===void 0||y>g.length)&&(y=g.length),g.substring(y-p.length,y)===p}(c," argument"))h="The ".concat(c," ").concat(d," ").concat(l(a,"type"));else{var m=function(g,p,y){return typeof y!="number"&&(y=0),!(y+p.length>g.length)&&g.indexOf(p,y)!==-1}(c,".")?"property":"argument";h='The "'.concat(c,'" ').concat(m," ").concat(d," ").concat(l(a,"type"))}return h+=". Received type ".concat(typeof u)},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(c){return"The "+c+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(c){return"Cannot call "+c+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(c){return"Unknown encoding: "+c},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),n.exports.codes=s},{}],478:[function(t,n,i){(function(s){(function(){var o=Object.keys||function(g){var p=[];for(var y in g)p.push(y);return p};n.exports=f;var l=t("./_stream_readable"),c=t("./_stream_writable");t("inherits")(f,l);for(var a=o(c.prototype),u=0;u<a.length;u++){var d=a[u];f.prototype[d]||(f.prototype[d]=c.prototype[d])}function f(g){if(!(this instanceof f))return new f(g);l.call(this,g),c.call(this,g),this.allowHalfOpen=!0,g&&(g.readable===!1&&(this.readable=!1),g.writable===!1&&(this.writable=!1),g.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||s.nextTick(m,this)}function m(g){g.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(t,n,i){n.exports=o;var s=t("./_stream_transform");function o(l){if(!(this instanceof o))return new o(l);s.call(this,l)}t("inherits")(o,s),o.prototype._transform=function(l,c,a){a(null,l)}},{"./_stream_transform":481,inherits:440}],480:[function(t,n,i){(function(s,o){(function(){var l;n.exports=L,L.ReadableState=P,t("events").EventEmitter;var c=function(D,O){return D.listeners(O).length},a=t("./internal/streams/stream"),u=t("buffer").Buffer,d=(o!==void 0?o:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},f,h=t("util");f=h&&h.debuglog?h.debuglog("stream"):function(){};var m,g,p,y=t("./internal/streams/buffer_list"),b=t("./internal/streams/destroy"),v=t("./internal/streams/state").getHighWaterMark,E=t("../errors").codes,M=E.ERR_INVALID_ARG_TYPE,W=E.ERR_STREAM_PUSH_AFTER_EOF,$=E.ERR_METHOD_NOT_IMPLEMENTED,N=E.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t("inherits")(L,a);var j=b.errorOrDestroy,F=["error","close","destroy","pause","resume"];function P(D,O,G){l=l||t("./_stream_duplex"),D=D||{},typeof G!="boolean"&&(G=O instanceof l),this.objectMode=!!D.objectMode,G&&(this.objectMode=this.objectMode||!!D.readableObjectMode),this.highWaterMark=v(this,D,"readableHighWaterMark",G),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=D.emitClose!==!1,this.autoDestroy=!!D.autoDestroy,this.destroyed=!1,this.defaultEncoding=D.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,D.encoding&&(m||(m=t("string_decoder/").StringDecoder),this.decoder=new m(D.encoding),this.encoding=D.encoding)}function L(D){if(l=l||t("./_stream_duplex"),!(this instanceof L))return new L(D);var O=this instanceof l;this._readableState=new P(D,this,O),this.readable=!0,D&&(typeof D.read=="function"&&(this._read=D.read),typeof D.destroy=="function"&&(this._destroy=D.destroy)),a.call(this)}function k(D,O,G,Z,ue){f("readableAddChunk",O);var te,oe=D._readableState;if(O===null)oe.reading=!1,function(re,be){if(f("onEofChunk"),!be.ended){if(be.decoder){var ie=be.decoder.end();ie&&ie.length&&(be.buffer.push(ie),be.length+=be.objectMode?1:ie.length)}be.ended=!0,be.sync?_(re):(be.needReadable=!1,be.emittedReadable||(be.emittedReadable=!0,x(re)))}}(D,oe);else if(ue||(te=function(re,be){var ie;le=be,u.isBuffer(le)||le instanceof d||typeof be=="string"||be===void 0||re.objectMode||(ie=new M("chunk",["string","Buffer","Uint8Array"],be));var le;return ie}(oe,O)),te)j(D,te);else if(oe.objectMode||O&&O.length>0)if(typeof O=="string"||oe.objectMode||Object.getPrototypeOf(O)===u.prototype||(O=function(re){return u.from(re)}(O)),Z)oe.endEmitted?j(D,new N):R(D,oe,O,!0);else if(oe.ended)j(D,new W);else{if(oe.destroyed)return!1;oe.reading=!1,oe.decoder&&!G?(O=oe.decoder.write(O),oe.objectMode||O.length!==0?R(D,oe,O,!1):w(D,oe)):R(D,oe,O,!1)}else Z||(oe.reading=!1,w(D,oe));return!oe.ended&&(oe.length<oe.highWaterMark||oe.length===0)}function R(D,O,G,Z){O.flowing&&O.length===0&&!O.sync?(O.awaitDrain=0,D.emit("data",G)):(O.length+=O.objectMode?1:G.length,Z?O.buffer.unshift(G):O.buffer.push(G),O.needReadable&&_(D)),w(D,O)}Object.defineProperty(L.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(D){this._readableState&&(this._readableState.destroyed=D)}}),L.prototype.destroy=b.destroy,L.prototype._undestroy=b.undestroy,L.prototype._destroy=function(D,O){O(D)},L.prototype.push=function(D,O){var G,Z=this._readableState;return Z.objectMode?G=!0:typeof D=="string"&&((O=O||Z.defaultEncoding)!==Z.encoding&&(D=u.from(D,O),O=""),G=!0),k(this,D,O,!1,G)},L.prototype.unshift=function(D){return k(this,D,null,!0,!1)},L.prototype.isPaused=function(){return this._readableState.flowing===!1},L.prototype.setEncoding=function(D){m||(m=t("string_decoder/").StringDecoder);var O=new m(D);this._readableState.decoder=O,this._readableState.encoding=this._readableState.decoder.encoding;for(var G=this._readableState.buffer.head,Z="";G!==null;)Z+=O.write(G.data),G=G.next;return this._readableState.buffer.clear(),Z!==""&&this._readableState.buffer.push(Z),this._readableState.length=Z.length,this};function C(D,O){return D<=0||O.length===0&&O.ended?0:O.objectMode?1:D!=D?O.flowing&&O.length?O.buffer.head.data.length:O.length:(D>O.highWaterMark&&(O.highWaterMark=function(G){return G>=1073741824?G=1073741824:(G--,G|=G>>>1,G|=G>>>2,G|=G>>>4,G|=G>>>8,G|=G>>>16,G++),G}(D)),D<=O.length?D:O.ended?O.length:(O.needReadable=!0,0))}function _(D){var O=D._readableState;f("emitReadable",O.needReadable,O.emittedReadable),O.needReadable=!1,O.emittedReadable||(f("emitReadable",O.flowing),O.emittedReadable=!0,s.nextTick(x,D))}function x(D){var O=D._readableState;f("emitReadable_",O.destroyed,O.length,O.ended),O.destroyed||!O.length&&!O.ended||(D.emit("readable"),O.emittedReadable=!1),O.needReadable=!O.flowing&&!O.ended&&O.length<=O.highWaterMark,H(D)}function w(D,O){O.readingMore||(O.readingMore=!0,s.nextTick(S,D,O))}function S(D,O){for(;!O.reading&&!O.ended&&(O.length<O.highWaterMark||O.flowing&&O.length===0);){var G=O.length;if(f("maybeReadMore read 0"),D.read(0),G===O.length)break}O.readingMore=!1}function I(D){var O=D._readableState;O.readableListening=D.listenerCount("readable")>0,O.resumeScheduled&&!O.paused?O.flowing=!0:D.listenerCount("data")>0&&D.resume()}function z(D){f("readable nexttick read 0"),D.read(0)}function A(D,O){f("resume",O.reading),O.reading||D.read(0),O.resumeScheduled=!1,D.emit("resume"),H(D),O.flowing&&!O.reading&&D.read(0)}function H(D){var O=D._readableState;for(f("flow",O.flowing);O.flowing&&D.read()!==null;);}function K(D,O){return O.length===0?null:(O.objectMode?G=O.buffer.shift():!D||D>=O.length?(G=O.decoder?O.buffer.join(""):O.buffer.length===1?O.buffer.first():O.buffer.concat(O.length),O.buffer.clear()):G=O.buffer.consume(D,O.decoder),G);var G}function J(D){var O=D._readableState;f("endReadable",O.endEmitted),O.endEmitted||(O.ended=!0,s.nextTick(V,O,D))}function V(D,O){if(f("endReadableNT",D.endEmitted,D.length),!D.endEmitted&&D.length===0&&(D.endEmitted=!0,O.readable=!1,O.emit("end"),D.autoDestroy)){var G=O._writableState;(!G||G.autoDestroy&&G.finished)&&O.destroy()}}function X(D,O){for(var G=0,Z=D.length;G<Z;G++)if(D[G]===O)return G;return-1}L.prototype.read=function(D){f("read",D),D=parseInt(D,10);var O=this._readableState,G=D;if(D!==0&&(O.emittedReadable=!1),D===0&&O.needReadable&&((O.highWaterMark!==0?O.length>=O.highWaterMark:O.length>0)||O.ended))return f("read: emitReadable",O.length,O.ended),O.length===0&&O.ended?J(this):_(this),null;if((D=C(D,O))===0&&O.ended)return O.length===0&&J(this),null;var Z,ue=O.needReadable;return f("need readable",ue),(O.length===0||O.length-D<O.highWaterMark)&&f("length less than watermark",ue=!0),O.ended||O.reading?f("reading or ended",ue=!1):ue&&(f("do read"),O.reading=!0,O.sync=!0,O.length===0&&(O.needReadable=!0),this._read(O.highWaterMark),O.sync=!1,O.reading||(D=C(G,O))),(Z=D>0?K(D,O):null)===null?(O.needReadable=O.length<=O.highWaterMark,D=0):(O.length-=D,O.awaitDrain=0),O.length===0&&(O.ended||(O.needReadable=!0),G!==D&&O.ended&&J(this)),Z!==null&&this.emit("data",Z),Z},L.prototype._read=function(D){j(this,new $("_read()"))},L.prototype.pipe=function(D,O){var G=this,Z=this._readableState;switch(Z.pipesCount){case 0:Z.pipes=D;break;case 1:Z.pipes=[Z.pipes,D];break;default:Z.pipes.push(D)}Z.pipesCount+=1,f("pipe count=%d opts=%j",Z.pipesCount,O);var ue=(!O||O.end!==!1)&&D!==s.stdout&&D!==s.stderr?oe:ve;function te(ke,Ne){f("onunpipe"),ke===G&&Ne&&Ne.hasUnpiped===!1&&(Ne.hasUnpiped=!0,f("cleanup"),D.removeListener("close",ae),D.removeListener("finish",Se),D.removeListener("drain",re),D.removeListener("error",le),D.removeListener("unpipe",te),G.removeListener("end",oe),G.removeListener("end",ve),G.removeListener("data",ie),be=!0,!Z.awaitDrain||D._writableState&&!D._writableState.needDrain||re())}function oe(){f("onend"),D.end()}Z.endEmitted?s.nextTick(ue):G.once("end",ue),D.on("unpipe",te);var re=function(ke){return function(){var Ne=ke._readableState;f("pipeOnDrain",Ne.awaitDrain),Ne.awaitDrain&&Ne.awaitDrain--,Ne.awaitDrain===0&&c(ke,"data")&&(Ne.flowing=!0,H(ke))}}(G);D.on("drain",re);var be=!1;function ie(ke){f("ondata");var Ne=D.write(ke);f("dest.write",Ne),Ne===!1&&((Z.pipesCount===1&&Z.pipes===D||Z.pipesCount>1&&X(Z.pipes,D)!==-1)&&!be&&(f("false write response, pause",Z.awaitDrain),Z.awaitDrain++),G.pause())}function le(ke){f("onerror",ke),ve(),D.removeListener("error",le),c(D,"error")===0&&j(D,ke)}function ae(){D.removeListener("finish",Se),ve()}function Se(){f("onfinish"),D.removeListener("close",ae),ve()}function ve(){f("unpipe"),G.unpipe(D)}return G.on("data",ie),function(ke,Ne,ze){if(typeof ke.prependListener=="function")return ke.prependListener(Ne,ze);ke._events&&ke._events[Ne]?Array.isArray(ke._events[Ne])?ke._events[Ne].unshift(ze):ke._events[Ne]=[ze,ke._events[Ne]]:ke.on(Ne,ze)}(D,"error",le),D.once("close",ae),D.once("finish",Se),D.emit("pipe",G),Z.flowing||(f("pipe resume"),G.resume()),D},L.prototype.unpipe=function(D){var O=this._readableState,G={hasUnpiped:!1};if(O.pipesCount===0)return this;if(O.pipesCount===1)return D&&D!==O.pipes||(D||(D=O.pipes),O.pipes=null,O.pipesCount=0,O.flowing=!1,D&&D.emit("unpipe",this,G)),this;if(!D){var Z=O.pipes,ue=O.pipesCount;O.pipes=null,O.pipesCount=0,O.flowing=!1;for(var te=0;te<ue;te++)Z[te].emit("unpipe",this,{hasUnpiped:!1});return this}var oe=X(O.pipes,D);return oe===-1||(O.pipes.splice(oe,1),O.pipesCount-=1,O.pipesCount===1&&(O.pipes=O.pipes[0]),D.emit("unpipe",this,G)),this},L.prototype.on=function(D,O){var G=a.prototype.on.call(this,D,O),Z=this._readableState;return D==="data"?(Z.readableListening=this.listenerCount("readable")>0,Z.flowing!==!1&&this.resume()):D==="readable"&&(Z.endEmitted||Z.readableListening||(Z.readableListening=Z.needReadable=!0,Z.flowing=!1,Z.emittedReadable=!1,f("on readable",Z.length,Z.reading),Z.length?_(this):Z.reading||s.nextTick(z,this))),G},L.prototype.addListener=L.prototype.on,L.prototype.removeListener=function(D,O){var G=a.prototype.removeListener.call(this,D,O);return D==="readable"&&s.nextTick(I,this),G},L.prototype.removeAllListeners=function(D){var O=a.prototype.removeAllListeners.apply(this,arguments);return D!=="readable"&&D!==void 0||s.nextTick(I,this),O},L.prototype.resume=function(){var D=this._readableState;return D.flowing||(f("resume"),D.flowing=!D.readableListening,function(O,G){G.resumeScheduled||(G.resumeScheduled=!0,s.nextTick(A,O,G))}(this,D)),D.paused=!1,this},L.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},L.prototype.wrap=function(D){var O=this,G=this._readableState,Z=!1;for(var ue in D.on("end",function(){if(f("wrapped end"),G.decoder&&!G.ended){var oe=G.decoder.end();oe&&oe.length&&O.push(oe)}O.push(null)}),D.on("data",function(oe){f("wrapped data"),G.decoder&&(oe=G.decoder.write(oe)),G.objectMode&&oe==null||(G.objectMode||oe&&oe.length)&&(O.push(oe)||(Z=!0,D.pause()))}),D)this[ue]===void 0&&typeof D[ue]=="function"&&(this[ue]=function(oe){return function(){return D[oe].apply(D,arguments)}}(ue));for(var te=0;te<F.length;te++)D.on(F[te],this.emit.bind(this,F[te]));return this._read=function(oe){f("wrapped _read",oe),Z&&(Z=!1,D.resume())},this},typeof Symbol=="function"&&(L.prototype[Symbol.asyncIterator]=function(){return g===void 0&&(g=t("./internal/streams/async_iterator")),g(this)}),Object.defineProperty(L.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(L.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(L.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(D){this._readableState&&(this._readableState.flowing=D)}}),L._fromList=K,Object.defineProperty(L.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(L.from=function(D,O){return p===void 0&&(p=t("./internal/streams/from")),p(L,D,O)})}).call(this)}).call(this,t("_process"),typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(t,n,i){n.exports=f;var s=t("../errors").codes,o=s.ERR_METHOD_NOT_IMPLEMENTED,l=s.ERR_MULTIPLE_CALLBACK,c=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=s.ERR_TRANSFORM_WITH_LENGTH_0,u=t("./_stream_duplex");function d(g,p){var y=this._transformState;y.transforming=!1;var b=y.writecb;if(b===null)return this.emit("error",new l);y.writechunk=null,y.writecb=null,p!=null&&this.push(p),b(g);var v=this._readableState;v.reading=!1,(v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}function f(g){if(!(this instanceof f))return new f(g);u.call(this,g),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,g&&(typeof g.transform=="function"&&(this._transform=g.transform),typeof g.flush=="function"&&(this._flush=g.flush)),this.on("prefinish",h)}function h(){var g=this;typeof this._flush!="function"||this._readableState.destroyed?m(this,null,null):this._flush(function(p,y){m(g,p,y)})}function m(g,p,y){if(p)return g.emit("error",p);if(y!=null&&g.push(y),g._writableState.length)throw new a;if(g._transformState.transforming)throw new c;return g.push(null)}t("inherits")(f,u),f.prototype.push=function(g,p){return this._transformState.needTransform=!1,u.prototype.push.call(this,g,p)},f.prototype._transform=function(g,p,y){y(new o("_transform()"))},f.prototype._write=function(g,p,y){var b=this._transformState;if(b.writecb=y,b.writechunk=g,b.writeencoding=p,!b.transforming){var v=this._readableState;(b.needTransform||v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}},f.prototype._read=function(g){var p=this._transformState;p.writechunk===null||p.transforming?p.needTransform=!0:(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform))},f.prototype._destroy=function(g,p){u.prototype._destroy.call(this,g,function(y){p(y)})}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(t,n,i){(function(s,o){(function(){function l(S){var I=this;this.next=null,this.entry=null,this.finish=function(){(function(z,A,H){var K=z.entry;for(z.entry=null;K;){var J=K.callback;A.pendingcb--,J(H),K=K.next}A.corkedRequestsFree.next=z})(I,S)}}var c;n.exports=L,L.WritableState=P;var a={deprecate:t("util-deprecate")},u=t("./internal/streams/stream"),d=t("buffer").Buffer,f=(o!==void 0?o:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},h,m=t("./internal/streams/destroy"),g=t("./internal/streams/state").getHighWaterMark,p=t("../errors").codes,y=p.ERR_INVALID_ARG_TYPE,b=p.ERR_METHOD_NOT_IMPLEMENTED,v=p.ERR_MULTIPLE_CALLBACK,E=p.ERR_STREAM_CANNOT_PIPE,M=p.ERR_STREAM_DESTROYED,W=p.ERR_STREAM_NULL_VALUES,$=p.ERR_STREAM_WRITE_AFTER_END,N=p.ERR_UNKNOWN_ENCODING,j=m.errorOrDestroy;function F(){}function P(S,I,z){c=c||t("./_stream_duplex"),S=S||{},typeof z!="boolean"&&(z=I instanceof c),this.objectMode=!!S.objectMode,z&&(this.objectMode=this.objectMode||!!S.writableObjectMode),this.highWaterMark=g(this,S,"writableHighWaterMark",z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var A=S.decodeStrings===!1;this.decodeStrings=!A,this.defaultEncoding=S.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(H){(function(K,J){var V=K._writableState,X=V.sync,D=V.writecb;if(typeof D!="function")throw new v;if(function(G){G.writing=!1,G.writecb=null,G.length-=G.writelen,G.writelen=0}(V),J)(function(G,Z,ue,te,oe){--Z.pendingcb,ue?(s.nextTick(oe,te),s.nextTick(w,G,Z),G._writableState.errorEmitted=!0,j(G,te)):(oe(te),G._writableState.errorEmitted=!0,j(G,te),w(G,Z))})(K,V,X,J,D);else{var O=_(V)||K.destroyed;O||V.corked||V.bufferProcessing||!V.bufferedRequest||C(K,V),X?s.nextTick(R,K,V,O,D):R(K,V,O,D)}})(I,H)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=S.emitClose!==!1,this.autoDestroy=!!S.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}function L(S){var I=this instanceof(c=c||t("./_stream_duplex"));if(!I&&!h.call(L,this))return new L(S);this._writableState=new P(S,this,I),this.writable=!0,S&&(typeof S.write=="function"&&(this._write=S.write),typeof S.writev=="function"&&(this._writev=S.writev),typeof S.destroy=="function"&&(this._destroy=S.destroy),typeof S.final=="function"&&(this._final=S.final)),u.call(this)}function k(S,I,z,A,H,K,J){I.writelen=A,I.writecb=J,I.writing=!0,I.sync=!0,I.destroyed?I.onwrite(new M("write")):z?S._writev(H,I.onwrite):S._write(H,K,I.onwrite),I.sync=!1}function R(S,I,z,A){z||function(H,K){K.length===0&&K.needDrain&&(K.needDrain=!1,H.emit("drain"))}(S,I),I.pendingcb--,A(),w(S,I)}function C(S,I){I.bufferProcessing=!0;var z=I.bufferedRequest;if(S._writev&&z&&z.next){var A=I.bufferedRequestCount,H=new Array(A),K=I.corkedRequestsFree;K.entry=z;for(var J=0,V=!0;z;)H[J]=z,z.isBuf||(V=!1),z=z.next,J+=1;H.allBuffers=V,k(S,I,!0,I.length,H,"",K.finish),I.pendingcb++,I.lastBufferedRequest=null,K.next?(I.corkedRequestsFree=K.next,K.next=null):I.corkedRequestsFree=new l(I),I.bufferedRequestCount=0}else{for(;z;){var X=z.chunk,D=z.encoding,O=z.callback;if(k(S,I,!1,I.objectMode?1:X.length,X,D,O),z=z.next,I.bufferedRequestCount--,I.writing)break}z===null&&(I.lastBufferedRequest=null)}I.bufferedRequest=z,I.bufferProcessing=!1}function _(S){return S.ending&&S.length===0&&S.bufferedRequest===null&&!S.finished&&!S.writing}function x(S,I){S._final(function(z){I.pendingcb--,z&&j(S,z),I.prefinished=!0,S.emit("prefinish"),w(S,I)})}function w(S,I){var z=_(I);if(z&&(function(H,K){K.prefinished||K.finalCalled||(typeof H._final!="function"||K.destroyed?(K.prefinished=!0,H.emit("prefinish")):(K.pendingcb++,K.finalCalled=!0,s.nextTick(x,H,K)))}(S,I),I.pendingcb===0&&(I.finished=!0,S.emit("finish"),I.autoDestroy))){var A=S._readableState;(!A||A.autoDestroy&&A.endEmitted)&&S.destroy()}return z}t("inherits")(L,u),P.prototype.getBuffer=function(){for(var S=this.bufferedRequest,I=[];S;)I.push(S),S=S.next;return I},function(){try{Object.defineProperty(P.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(L,Symbol.hasInstance,{value:function(S){return!!h.call(this,S)||this===L&&S&&S._writableState instanceof P}})):h=function(S){return S instanceof this},L.prototype.pipe=function(){j(this,new E)},L.prototype.write=function(S,I,z){var A,H=this._writableState,K=!1,J=!H.objectMode&&(A=S,d.isBuffer(A)||A instanceof f);return J&&!d.isBuffer(S)&&(S=function(V){return d.from(V)}(S)),typeof I=="function"&&(z=I,I=null),J?I="buffer":I||(I=H.defaultEncoding),typeof z!="function"&&(z=F),H.ending?function(V,X){var D=new $;j(V,D),s.nextTick(X,D)}(this,z):(J||function(V,X,D,O){var G;return D===null?G=new W:typeof D=="string"||X.objectMode||(G=new y("chunk",["string","Buffer"],D)),!G||(j(V,G),s.nextTick(O,G),!1)}(this,H,S,z))&&(H.pendingcb++,K=function(V,X,D,O,G,Z){if(!D){var ue=function(be,ie,le){return be.objectMode||be.decodeStrings===!1||typeof ie!="string"||(ie=d.from(ie,le)),ie}(X,O,G);O!==ue&&(D=!0,G="buffer",O=ue)}var te=X.objectMode?1:O.length;X.length+=te;var oe=X.length<X.highWaterMark;if(oe||(X.needDrain=!0),X.writing||X.corked){var re=X.lastBufferedRequest;X.lastBufferedRequest={chunk:O,encoding:G,isBuf:D,callback:Z,next:null},re?re.next=X.lastBufferedRequest:X.bufferedRequest=X.lastBufferedRequest,X.bufferedRequestCount+=1}else k(V,X,!1,te,O,G,Z);return oe}(this,H,J,S,I,z)),K},L.prototype.cork=function(){this._writableState.corked++},L.prototype.uncork=function(){var S=this._writableState;S.corked&&(S.corked--,S.writing||S.corked||S.bufferProcessing||!S.bufferedRequest||C(this,S))},L.prototype.setDefaultEncoding=function(S){if(typeof S=="string"&&(S=S.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((S+"").toLowerCase())>-1))throw new N(S);return this._writableState.defaultEncoding=S,this},Object.defineProperty(L.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(L.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),L.prototype._write=function(S,I,z){z(new b("_write()"))},L.prototype._writev=null,L.prototype.end=function(S,I,z){var A=this._writableState;return typeof S=="function"?(z=S,S=null,I=null):typeof I=="function"&&(z=I,I=null),S!=null&&this.write(S,I),A.corked&&(A.corked=1,this.uncork()),A.ending||function(H,K,J){K.ending=!0,w(H,K),J&&(K.finished?s.nextTick(J):H.once("finish",J)),K.ended=!0,H.writable=!1}(this,A,z),this},Object.defineProperty(L.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(L.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(S){this._writableState&&(this._writableState.destroyed=S)}}),L.prototype.destroy=m.destroy,L.prototype._undestroy=m.undestroy,L.prototype._destroy=function(S,I){I(S)}}).call(this)}).call(this,t("_process"),typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(t,n,i){(function(s){(function(){var o;function l(M,W,$){return(W=function(N){var j=function(F,P){if(typeof F!="object"||F===null)return F;var L=F[Symbol.toPrimitive];if(L!==void 0){var k=L.call(F,P);if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(F)}(N,"string");return typeof j=="symbol"?j:String(j)}(W))in M?Object.defineProperty(M,W,{value:$,enumerable:!0,configurable:!0,writable:!0}):M[W]=$,M}var c=t("./end-of-stream"),a=Symbol("lastResolve"),u=Symbol("lastReject"),d=Symbol("error"),f=Symbol("ended"),h=Symbol("lastPromise"),m=Symbol("handlePromise"),g=Symbol("stream");function p(M,W){return{value:M,done:W}}function y(M){var W=M[a];if(W!==null){var $=M[g].read();$!==null&&(M[h]=null,M[a]=null,M[u]=null,W(p($,!1)))}}function b(M){s.nextTick(y,M)}var v=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((l(o={get stream(){return this[g]},next:function(){var M=this,W=this[d];if(W!==null)return Promise.reject(W);if(this[f])return Promise.resolve(p(void 0,!0));if(this[g].destroyed)return new Promise(function(F,P){s.nextTick(function(){M[d]?P(M[d]):F(p(void 0,!0))})});var $,N=this[h];if(N)$=new Promise(function(F,P){return function(L,k){F.then(function(){P[f]?L(p(void 0,!0)):P[m](L,k)},k)}}(N,this));else{var j=this[g].read();if(j!==null)return Promise.resolve(p(j,!1));$=new Promise(this[m])}return this[h]=$,$}},Symbol.asyncIterator,function(){return this}),l(o,"return",function(){var M=this;return new Promise(function(W,$){M[g].destroy(null,function(N){N?$(N):W(p(void 0,!0))})})}),o),v);n.exports=function(M){var W,$=Object.create(E,(l(W={},g,{value:M,writable:!0}),l(W,a,{value:null,writable:!0}),l(W,u,{value:null,writable:!0}),l(W,d,{value:null,writable:!0}),l(W,f,{value:M._readableState.endEmitted,writable:!0}),l(W,m,{value:function(N,j){var F=$[g].read();F?($[h]=null,$[a]=null,$[u]=null,N(p(F,!1))):($[a]=N,$[u]=j)},writable:!0}),W));return $[h]=null,c(M,function(N){if(N&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"){var j=$[u];return j!==null&&($[h]=null,$[a]=null,$[u]=null,j(N)),void($[d]=N)}var F=$[a];F!==null&&($[h]=null,$[a]=null,$[u]=null,F(p(void 0,!0))),$[f]=!0}),M.on("readable",b.bind(null,$)),$}}).call(this)}).call(this,t("_process"))},{"./end-of-stream":486,_process:467}],484:[function(t,n,i){function s(h,m){var g=Object.keys(h);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(h);m&&(p=p.filter(function(y){return Object.getOwnPropertyDescriptor(h,y).enumerable})),g.push.apply(g,p)}return g}function o(h){for(var m=1;m<arguments.length;m++){var g=arguments[m]!=null?arguments[m]:{};m%2?s(Object(g),!0).forEach(function(p){l(h,p,g[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(g)):s(Object(g)).forEach(function(p){Object.defineProperty(h,p,Object.getOwnPropertyDescriptor(g,p))})}return h}function l(h,m,g){return(m=a(m))in h?Object.defineProperty(h,m,{value:g,enumerable:!0,configurable:!0,writable:!0}):h[m]=g,h}function c(h,m){for(var g=0;g<m.length;g++){var p=m[g];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,a(p.key),p)}}function a(h){var m=function(g,p){if(typeof g!="object"||g===null)return g;var y=g[Symbol.toPrimitive];if(y!==void 0){var b=y.call(g,p);if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(g)}(h,"string");return typeof m=="symbol"?m:String(m)}var u=t("buffer").Buffer,d=t("util").inspect,f=d&&d.custom||"inspect";n.exports=function(){function h(){(function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")})(this,h),this.head=null,this.tail=null,this.length=0}var m,g;return m=h,(g=[{key:"push",value:function(p){var y={data:p,next:null};this.length>0?this.tail.next=y:this.head=y,this.tail=y,++this.length}},{key:"unshift",value:function(p){var y={data:p,next:this.head};this.length===0&&(this.tail=y),this.head=y,++this.length}},{key:"shift",value:function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(p){if(this.length===0)return"";for(var y=this.head,b=""+y.data;y=y.next;)b+=p+y.data;return b}},{key:"concat",value:function(p){if(this.length===0)return u.alloc(0);for(var y,b,v,E=u.allocUnsafe(p>>>0),M=this.head,W=0;M;)y=M.data,b=E,v=W,u.prototype.copy.call(y,b,v),W+=M.data.length,M=M.next;return E}},{key:"consume",value:function(p,y){var b;return p<this.head.data.length?(b=this.head.data.slice(0,p),this.head.data=this.head.data.slice(p)):b=p===this.head.data.length?this.shift():y?this._getString(p):this._getBuffer(p),b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(p){var y=this.head,b=1,v=y.data;for(p-=v.length;y=y.next;){var E=y.data,M=p>E.length?E.length:p;if(M===E.length?v+=E:v+=E.slice(0,p),(p-=M)==0){M===E.length?(++b,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=E.slice(M));break}++b}return this.length-=b,v}},{key:"_getBuffer",value:function(p){var y=u.allocUnsafe(p),b=this.head,v=1;for(b.data.copy(y),p-=b.data.length;b=b.next;){var E=b.data,M=p>E.length?E.length:p;if(E.copy(y,y.length-p,0,M),(p-=M)==0){M===E.length?(++v,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=E.slice(M));break}++v}return this.length-=v,y}},{key:f,value:function(p,y){return d(this,o(o({},y),{},{depth:0,customInspect:!1}))}}])&&c(m.prototype,g),Object.defineProperty(m,"prototype",{writable:!1}),h}()},{buffer:220,util:188}],485:[function(t,n,i){(function(s){(function(){function o(a,u){c(a,u),l(a)}function l(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function c(a,u){a.emit("error",u)}n.exports={destroy:function(a,u){var d=this,f=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return f||h?(u?u(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,s.nextTick(c,this,a)):s.nextTick(c,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(m){!u&&m?d._writableState?d._writableState.errorEmitted?s.nextTick(l,d):(d._writableState.errorEmitted=!0,s.nextTick(o,d,m)):s.nextTick(o,d,m):u?(s.nextTick(l,d),u(m)):s.nextTick(l,d)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(a,u){var d=a._readableState,f=a._writableState;d&&d.autoDestroy||f&&f.autoDestroy?a.destroy(u):a.emit("error",u)}}}).call(this)}).call(this,t("_process"))},{_process:467}],486:[function(t,n,i){var s=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function o(){}n.exports=function l(c,a,u){if(typeof a=="function")return l(c,null,a);a||(a={}),u=function(M){var W=!1;return function(){if(!W){W=!0;for(var $=arguments.length,N=new Array($),j=0;j<$;j++)N[j]=arguments[j];M.apply(this,N)}}}(u||o);var d=a.readable||a.readable!==!1&&c.readable,f=a.writable||a.writable!==!1&&c.writable,h=function(){c.writable||g()},m=c._writableState&&c._writableState.finished,g=function(){f=!1,m=!0,d||u.call(c)},p=c._readableState&&c._readableState.endEmitted,y=function(){d=!1,p=!0,f||u.call(c)},b=function(M){u.call(c,M)},v=function(){var M;return d&&!p?(c._readableState&&c._readableState.ended||(M=new s),u.call(c,M)):f&&!m?(c._writableState&&c._writableState.ended||(M=new s),u.call(c,M)):void 0},E=function(){c.req.on("finish",g)};return function(M){return M.setHeader&&typeof M.abort=="function"}(c)?(c.on("complete",g),c.on("abort",v),c.req?E():c.on("request",E)):f&&!c._writableState&&(c.on("end",h),c.on("close",h)),c.on("end",y),c.on("finish",g),a.error!==!1&&c.on("error",b),c.on("close",v),function(){c.removeListener("complete",g),c.removeListener("abort",v),c.removeListener("request",E),c.req&&c.req.removeListener("finish",g),c.removeListener("end",h),c.removeListener("close",h),c.removeListener("finish",g),c.removeListener("end",y),c.removeListener("error",b),c.removeListener("close",v)}}},{"../../../errors":477}],487:[function(t,n,i){n.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(t,n,i){var s,o=t("../../../errors").codes,l=o.ERR_MISSING_ARGS,c=o.ERR_STREAM_DESTROYED;function a(m){if(m)throw m}function u(m,g,p,y){y=function(E){var M=!1;return function(){M||(M=!0,E.apply(void 0,arguments))}}(y);var b=!1;m.on("close",function(){b=!0}),s===void 0&&(s=t("./end-of-stream")),s(m,{readable:g,writable:p},function(E){if(E)return y(E);b=!0,y()});var v=!1;return function(E){if(!b&&!v)return v=!0,function(M){return M.setHeader&&typeof M.abort=="function"}(m)?m.abort():typeof m.destroy=="function"?m.destroy():void y(E||new c("pipe"))}}function d(m){m()}function f(m,g){return m.pipe(g)}function h(m){return m.length?typeof m[m.length-1]!="function"?a:m.pop():a}n.exports=function(){for(var m=arguments.length,g=new Array(m),p=0;p<m;p++)g[p]=arguments[p];var y,b=h(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new l("streams");var v=g.map(function(E,M){var W=M<g.length-1;return u(E,W,M>0,function($){y||(y=$),$&&v.forEach(d),W||(v.forEach(d),b(y))})});return g.reduce(f)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(t,n,i){var s=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;n.exports={getHighWaterMark:function(o,l,c,a){var u=function(d,f,h){return d.highWaterMark!=null?d.highWaterMark:f?d[h]:null}(l,a,c);if(u!=null){if(!isFinite(u)||Math.floor(u)!==u||u<0)throw new s(a?c:"highWaterMark",u);return Math.floor(u)}return o.objectMode?16:16384}}},{"../../../errors":477}],490:[function(t,n,i){n.exports=t("events").EventEmitter},{events:422}],491:[function(t,n,i){(i=n.exports=t("./lib/_stream_readable.js")).Stream=i,i.Readable=i,i.Writable=t("./lib/_stream_writable.js"),i.Duplex=t("./lib/_stream_duplex.js"),i.Transform=t("./lib/_stream_transform.js"),i.PassThrough=t("./lib/_stream_passthrough.js"),i.finished=t("./lib/internal/streams/end-of-stream.js"),i.pipeline=t("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(t,n,i){var s=function(o){var l=Object.prototype,c=l.hasOwnProperty,a=Object.defineProperty||function(w,S,I){w[S]=I.value},u=typeof Symbol=="function"?Symbol:{},d=u.iterator||"@@iterator",f=u.asyncIterator||"@@asyncIterator",h=u.toStringTag||"@@toStringTag";function m(w,S,I){return Object.defineProperty(w,S,{value:I,enumerable:!0,configurable:!0,writable:!0}),w[S]}try{m({},"")}catch{m=function(S,I,z){return S[I]=z}}function g(w,S,I,z){var A=S&&S.prototype instanceof b?S:b,H=Object.create(A.prototype),K=new C(z||[]);return a(H,"_invoke",{value:P(w,I,K)}),H}function p(w,S,I){try{return{type:"normal",arg:w.call(S,I)}}catch(z){return{type:"throw",arg:z}}}o.wrap=g;var y={};function b(){}function v(){}function E(){}var M={};m(M,d,function(){return this});var W=Object.getPrototypeOf,$=W&&W(W(_([])));$&&$!==l&&c.call($,d)&&(M=$);var N=E.prototype=b.prototype=Object.create(M);function j(w){["next","throw","return"].forEach(function(S){m(w,S,function(I){return this._invoke(S,I)})})}function F(w,S){var I;a(this,"_invoke",{value:function(z,A){function H(){return new S(function(K,J){(function V(X,D,O,G){var Z=p(w[X],w,D);if(Z.type!=="throw"){var ue=Z.arg,te=ue.value;return te&&typeof te=="object"&&c.call(te,"__await")?S.resolve(te.__await).then(function(oe){V("next",oe,O,G)},function(oe){V("throw",oe,O,G)}):S.resolve(te).then(function(oe){ue.value=oe,O(ue)},function(oe){return V("throw",oe,O,G)})}G(Z.arg)})(z,A,K,J)})}return I=I?I.then(H,H):H()}})}function P(w,S,I){var z="suspendedStart";return function(A,H){if(z==="executing")throw new Error("Generator is already running");if(z==="completed"){if(A==="throw")throw H;return x()}for(I.method=A,I.arg=H;;){var K=I.delegate;if(K){var J=L(K,I);if(J){if(J===y)continue;return J}}if(I.method==="next")I.sent=I._sent=I.arg;else if(I.method==="throw"){if(z==="suspendedStart")throw z="completed",I.arg;I.dispatchException(I.arg)}else I.method==="return"&&I.abrupt("return",I.arg);z="executing";var V=p(w,S,I);if(V.type==="normal"){if(z=I.done?"completed":"suspendedYield",V.arg===y)continue;return{value:V.arg,done:I.done}}V.type==="throw"&&(z="completed",I.method="throw",I.arg=V.arg)}}}function L(w,S){var I=S.method,z=w.iterator[I];if(z===void 0)return S.delegate=null,I==="throw"&&w.iterator.return&&(S.method="return",S.arg=void 0,L(w,S),S.method==="throw")||I!=="return"&&(S.method="throw",S.arg=new TypeError("The iterator does not provide a '"+I+"' method")),y;var A=p(z,w.iterator,S.arg);if(A.type==="throw")return S.method="throw",S.arg=A.arg,S.delegate=null,y;var H=A.arg;return H?H.done?(S[w.resultName]=H.value,S.next=w.nextLoc,S.method!=="return"&&(S.method="next",S.arg=void 0),S.delegate=null,y):H:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,y)}function k(w){var S={tryLoc:w[0]};1 in w&&(S.catchLoc=w[1]),2 in w&&(S.finallyLoc=w[2],S.afterLoc=w[3]),this.tryEntries.push(S)}function R(w){var S=w.completion||{};S.type="normal",delete S.arg,w.completion=S}function C(w){this.tryEntries=[{tryLoc:"root"}],w.forEach(k,this),this.reset(!0)}function _(w){if(w){var S=w[d];if(S)return S.call(w);if(typeof w.next=="function")return w;if(!isNaN(w.length)){var I=-1,z=function A(){for(;++I<w.length;)if(c.call(w,I))return A.value=w[I],A.done=!1,A;return A.value=void 0,A.done=!0,A};return z.next=z}}return{next:x}}function x(){return{value:void 0,done:!0}}return v.prototype=E,a(N,"constructor",{value:E,configurable:!0}),a(E,"constructor",{value:v,configurable:!0}),v.displayName=m(E,h,"GeneratorFunction"),o.isGeneratorFunction=function(w){var S=typeof w=="function"&&w.constructor;return!!S&&(S===v||(S.displayName||S.name)==="GeneratorFunction")},o.mark=function(w){return Object.setPrototypeOf?Object.setPrototypeOf(w,E):(w.__proto__=E,m(w,h,"GeneratorFunction")),w.prototype=Object.create(N),w},o.awrap=function(w){return{__await:w}},j(F.prototype),m(F.prototype,f,function(){return this}),o.AsyncIterator=F,o.async=function(w,S,I,z,A){A===void 0&&(A=Promise);var H=new F(g(w,S,I,z),A);return o.isGeneratorFunction(S)?H:H.next().then(function(K){return K.done?K.value:H.next()})},j(N),m(N,h,"Generator"),m(N,d,function(){return this}),m(N,"toString",function(){return"[object Generator]"}),o.keys=function(w){var S=Object(w),I=[];for(var z in S)I.push(z);return I.reverse(),function A(){for(;I.length;){var H=I.pop();if(H in S)return A.value=H,A.done=!1,A}return A.done=!0,A}},o.values=_,C.prototype={constructor:C,reset:function(w){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!w)for(var S in this)S.charAt(0)==="t"&&c.call(this,S)&&!isNaN(+S.slice(1))&&(this[S]=void 0)},stop:function(){this.done=!0;var w=this.tryEntries[0].completion;if(w.type==="throw")throw w.arg;return this.rval},dispatchException:function(w){if(this.done)throw w;var S=this;function I(V,X){return H.type="throw",H.arg=w,S.next=V,X&&(S.method="next",S.arg=void 0),!!X}for(var z=this.tryEntries.length-1;z>=0;--z){var A=this.tryEntries[z],H=A.completion;if(A.tryLoc==="root")return I("end");if(A.tryLoc<=this.prev){var K=c.call(A,"catchLoc"),J=c.call(A,"finallyLoc");if(K&&J){if(this.prev<A.catchLoc)return I(A.catchLoc,!0);if(this.prev<A.finallyLoc)return I(A.finallyLoc)}else if(K){if(this.prev<A.catchLoc)return I(A.catchLoc,!0)}else{if(!J)throw new Error("try statement without catch or finally");if(this.prev<A.finallyLoc)return I(A.finallyLoc)}}}},abrupt:function(w,S){for(var I=this.tryEntries.length-1;I>=0;--I){var z=this.tryEntries[I];if(z.tryLoc<=this.prev&&c.call(z,"finallyLoc")&&this.prev<z.finallyLoc){var A=z;break}}A&&(w==="break"||w==="continue")&&A.tryLoc<=S&&S<=A.finallyLoc&&(A=null);var H=A?A.completion:{};return H.type=w,H.arg=S,A?(this.method="next",this.next=A.finallyLoc,y):this.complete(H)},complete:function(w,S){if(w.type==="throw")throw w.arg;return w.type==="break"||w.type==="continue"?this.next=w.arg:w.type==="return"?(this.rval=this.arg=w.arg,this.method="return",this.next="end"):w.type==="normal"&&S&&(this.next=S),y},finish:function(w){for(var S=this.tryEntries.length-1;S>=0;--S){var I=this.tryEntries[S];if(I.finallyLoc===w)return this.complete(I.completion,I.afterLoc),R(I),y}},catch:function(w){for(var S=this.tryEntries.length-1;S>=0;--S){var I=this.tryEntries[S];if(I.tryLoc===w){var z=I.completion;if(z.type==="throw"){var A=z.arg;R(I)}return A}}throw new Error("illegal catch attempt")},delegateYield:function(w,S,I){return this.delegate={iterator:_(w),resultName:S,nextLoc:I},this.method==="next"&&(this.arg=void 0),y}},o}(typeof n=="object"?n.exports:{});try{regeneratorRuntime=s}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}},{}],493:[function(t,n,i){var s=t("buffer").Buffer,o=t("inherits"),l=t("hash-base"),c=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],d=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],f=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],m=[1352829926,1548603684,1836072691,2053994217,0];function g(){l.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(W,$){return W<<$|W>>>32-$}function y(W,$,N,j,F,P,L,k){return p(W+($^N^j)+P+L|0,k)+F|0}function b(W,$,N,j,F,P,L,k){return p(W+($&N|~$&j)+P+L|0,k)+F|0}function v(W,$,N,j,F,P,L,k){return p(W+(($|~N)^j)+P+L|0,k)+F|0}function E(W,$,N,j,F,P,L,k){return p(W+($&j|N&~j)+P+L|0,k)+F|0}function M(W,$,N,j,F,P,L,k){return p(W+($^(N|~j))+P+L|0,k)+F|0}o(g,l),g.prototype._update=function(){for(var W=c,$=0;$<16;++$)W[$]=this._block.readInt32LE(4*$);for(var N=0|this._a,j=0|this._b,F=0|this._c,P=0|this._d,L=0|this._e,k=0|this._a,R=0|this._b,C=0|this._c,_=0|this._d,x=0|this._e,w=0;w<80;w+=1){var S,I;w<16?(S=y(N,j,F,P,L,W[a[w]],h[0],d[w]),I=M(k,R,C,_,x,W[u[w]],m[0],f[w])):w<32?(S=b(N,j,F,P,L,W[a[w]],h[1],d[w]),I=E(k,R,C,_,x,W[u[w]],m[1],f[w])):w<48?(S=v(N,j,F,P,L,W[a[w]],h[2],d[w]),I=v(k,R,C,_,x,W[u[w]],m[2],f[w])):w<64?(S=E(N,j,F,P,L,W[a[w]],h[3],d[w]),I=b(k,R,C,_,x,W[u[w]],m[3],f[w])):(S=M(N,j,F,P,L,W[a[w]],h[4],d[w]),I=y(k,R,C,_,x,W[u[w]],m[4],f[w])),N=L,L=P,P=p(F,10),F=j,j=S,k=x,x=_,_=p(C,10),C=R,R=I}var z=this._b+F+_|0;this._b=this._c+P+x|0,this._c=this._d+L+k|0,this._d=this._e+N+R|0,this._e=this._a+j+C|0,this._a=z},g.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var W=s.alloc?s.alloc(20):new s(20);return W.writeInt32LE(this._a,0),W.writeInt32LE(this._b,4),W.writeInt32LE(this._c,8),W.writeInt32LE(this._d,12),W.writeInt32LE(this._e,16),W},n.exports=g},{buffer:220,"hash-base":425,inherits:440}],494:[function(t,n,i){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var s=t("buffer"),o=s.Buffer;function l(a,u){for(var d in a)u[d]=a[d]}function c(a,u,d){return o(a,u,d)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?n.exports=s:(l(s,i),i.Buffer=c),c.prototype=Object.create(o.prototype),l(o,c),c.from=function(a,u,d){if(typeof a=="number")throw new TypeError("Argument must not be a number");return o(a,u,d)},c.alloc=function(a,u,d){if(typeof a!="number")throw new TypeError("Argument must be a number");var f=o(a);return u!==void 0?typeof d=="string"?f.fill(u,d):f.fill(u):f.fill(0),f},c.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return o(a)},c.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(a)}},{buffer:220}],495:[function(t,n,i){(function(s){(function(){var o,l=t("buffer"),c=l.Buffer,a={};for(o in l)l.hasOwnProperty(o)&&o!=="SlowBuffer"&&o!=="Buffer"&&(a[o]=l[o]);var u=a.Buffer={};for(o in c)c.hasOwnProperty(o)&&o!=="allocUnsafe"&&o!=="allocUnsafeSlow"&&(u[o]=c[o]);if(a.Buffer.prototype=c.prototype,u.from&&u.from!==Uint8Array.from||(u.from=function(d,f,h){if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof d);if(d&&d.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);return c(d,f,h)}),u.alloc||(u.alloc=function(d,f,h){if(typeof d!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof d);if(d<0||d>=2*(1<<30))throw new RangeError('The value "'+d+'" is invalid for option "size"');var m=c(d);return f&&f.length!==0?typeof h=="string"?m.fill(f,h):m.fill(f):m.fill(0),m}),!a.kStringMaxLength)try{a.kStringMaxLength=s.binding("buffer").kStringMaxLength}catch{}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),n.exports=a}).call(this)}).call(this,t("_process"))},{_process:467,buffer:220}],496:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0});const s=t("xmlchars/xml/1.0/ed5"),o=t("xmlchars/xml/1.1/ed2"),l=t("xmlchars/xmlns/1.0/ed3");var c=s.isS,a=s.isChar,u=s.isNameStartChar,d=s.isNameChar,f=s.S_LIST,h=s.NAME_RE,m=o.isChar,g=l.isNCNameStartChar,p=l.isNCNameChar,y=l.NC_NAME_RE;const b="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/2000/xmlns/",E={__proto__:null,xml:b,xmlns:v},M={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},W=_=>_===34||_===39,$=[34,39],N=[...$,91,62],j=[...$,60,93],F=[61,63,...f],P=[...f,62,38,60];function L(_,x,w){switch(x){case"xml":w!==b&&_.fail(`xml prefix must be bound to ${b}.`);break;case"xmlns":w!==v&&_.fail(`xmlns prefix must be bound to ${v}.`)}switch(w){case v:_.fail(x===""?`the default namespace may not be set to ${w}.`:`may not assign a prefix (even "xmlns") to the URI ${v}.`);break;case b:switch(x){case"xml":break;case"":_.fail(`the default namespace may not be set to ${w}.`);break;default:_.fail("may not assign the xml namespace to another prefix.")}}}const k=_=>y.test(_),R=_=>h.test(_);i.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const C={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};i.SaxesParser=class{constructor(_){this.opt=_??{},this.fragmentOpt=!!this.opt.fragment;const x=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,x){this.nameStartCheck=g,this.nameCheck=p,this.isName=k,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},E);const w=this.opt.additionalNamespaces;w!=null&&(function(S,I){for(const z of Object.keys(I))L(S,z,I[z])}(this,w),Object.assign(this.ns,w))}else this.nameStartCheck=u,this.nameCheck=d,this.isName=R,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var _;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:x}=this;this.state=x?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=x,this.xmlDeclPossible=!x,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:w}=this.opt;if(w===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");w="1.0"}this.setXMLVersion(w),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(M),(_=this.readyHandler)===null||_===void 0||_.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(_,x){this[C[_]]=x}off(_){this[C[_]]=void 0}makeError(_){var x;let w=(x=this.fileName)!==null&&x!==void 0?x:"";return this.trackPosition&&(w.length>0&&(w+=":"),w+=`${this.line}:${this.column}`),w.length>0&&(w+=": "),new Error(w+_)}fail(_){const x=this.makeError(_),w=this.errorHandler;if(w===void 0)throw x;return w(x),this}write(_){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let x=!1;_===null?(x=!0,_=""):typeof _=="object"&&(_=_.toString()),this.carriedFromPrevious!==void 0&&(_=`${this.carriedFromPrevious}${_}`,this.carriedFromPrevious=void 0);let w=_.length;const S=_.charCodeAt(w-1);!x&&(S===13||S>=55296&&S<=56319)&&(this.carriedFromPrevious=_[w-1],w--,_=_.slice(0,w));const{stateTable:I}=this;for(this.chunk=_,this.i=0;this.i<w;)I[this.state].call(this);return this.chunkPosition+=w,x?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:_,i:x}=this;if(this.prevI=x,this.i=x+1,x>=_.length)return-1;const w=_.charCodeAt(x);if(this.column++,w<55296){if(w>=32||w===9)return w;switch(w){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return _.charCodeAt(x+1)===10&&(this.i=x+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),w}}if(w>56319)return w>=57344&&w<=65533||this.fail("disallowed character."),w;const S=65536+1024*(w-55296)+(_.charCodeAt(x+1)-56320);return this.i=x+2,S>1114111&&this.fail("disallowed character."),S}getCode11(){const{chunk:_,i:x}=this;if(this.prevI=x,this.i=x+1,x>=_.length)return-1;const w=_.charCodeAt(x);if(this.column++,w<55296){if(w>31&&w<127||w>159&&w!==8232||w===9)return w;switch(w){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{const I=_.charCodeAt(x+1);I!==10&&I!==133||(this.i=x+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),w}}if(w>56319)return w>=57344&&w<=65533||this.fail("disallowed character."),w;const S=65536+1024*(w-55296)+(_.charCodeAt(x+1)-56320);return this.i=x+2,S>1114111&&this.fail("disallowed character."),S}getCodeNorm(){const _=this.getCode();return _===-2?10:_}unget(){this.i=this.prevI,this.column--}captureTo(_){let{i:x}=this;const{chunk:w}=this;for(;;){const S=this.getCode(),I=S===-2,z=I?10:S;if(z===-1||_.includes(z))return this.text+=w.slice(x,this.prevI),z;I&&(this.text+=w.slice(x,this.prevI)+`
`,x=this.i)}}captureToChar(_){let{i:x}=this;const{chunk:w}=this;for(;;){let S=this.getCode();switch(S){case-2:this.text+=w.slice(x,this.prevI)+`
`,x=this.i,S=10;break;case-1:return this.text+=w.slice(x),!1}if(S===_)return this.text+=w.slice(x,this.prevI),!0}}captureNameChars(){const{chunk:_,i:x}=this;for(;;){const w=this.getCode();if(w===-1)return this.name+=_.slice(x),-1;if(!d(w))return this.name+=_.slice(x,this.prevI),w===-2?10:w}}skipSpaces(){for(;;){const _=this.getCodeNorm();if(_===-1||!c(_))return _}}setXMLVersion(_){this.currentXMLVersion=_,_==="1.0"?(this.isChar=a,this.getCode=this.getCode10):(this.isChar=m,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const _=this.i,x=this.skipSpaces();switch(this.prevI!==_&&(this.xmlDeclPossible=!1),x){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var _;const x=this.captureTo(N);switch(x){case 62:(_=this.doctypeHandler)===null||_===void 0||_.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(x),x===91?this.state=4:W(x)&&(this.state=3,this.q=x)}}sDoctypeQuote(){const _=this.q;this.captureToChar(_)&&(this.text+=String.fromCodePoint(_),this.q=null,this.state=2)}sDTD(){const _=this.captureTo(j);_!==-1&&(this.text+=String.fromCodePoint(_),_===93?this.state=2:_===60?this.state=6:W(_)&&(this.state=5,this.q=_))}sDTDQuoted(){const _=this.q;this.captureToChar(_)&&(this.text+=String.fromCodePoint(_),this.state=4,this.q=null)}sDTDOpenWaka(){const _=this.getCodeNorm();switch(this.text+=String.fromCodePoint(_),_){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const _=String.fromCodePoint(this.getCodeNorm()),x=this.openWakaBang+=_;this.text+=_,x!=="-"&&(this.state=x==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const _=this.getCodeNorm();this.text+=String.fromCodePoint(_),this.state=_===45?10:8}sDTDCommentEnded(){const _=this.getCodeNorm();this.text+=String.fromCodePoint(_),_===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const _=this.getCodeNorm();this.text+=String.fromCodePoint(_),_===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:_}=this;const{chunk:x}=this;e:for(;;)switch(this.getCode()){case-2:this.entity+=x.slice(_,this.prevI)+`
`,_=this.i;break;case 59:{const{entityReturnState:w}=this,S=this.entity+x.slice(_,this.prevI);let I;this.state=w,S===""?(this.fail("empty entity name."),I="&;"):(I=this.parseEntity(S),this.entity=""),w===13&&this.textHandler===void 0||(this.text+=I);break e}case-1:this.entity+=x.slice(_);break e}}sOpenWaka(){const _=this.getCode();if(u(_))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(_){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var _;const x=this.getCodeNorm();x===45?(this.state=19,(_=this.commentHandler)===null||_===void 0||_.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(x),this.state=17)}sCommentEnded(){const _=this.getCodeNorm();_!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(_),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){const _=this.getCodeNorm();_===93?this.state=22:(this.text+="]"+String.fromCodePoint(_),this.state=20)}sCDataEnding2(){var _;const x=this.getCodeNorm();switch(x){case 62:(_=this.cdataHandler)===null||_===void 0||_.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(x),this.state=20}}sPIFirstChar(){const _=this.getCodeNorm();this.nameStartCheck(_)?(this.piTarget+=String.fromCodePoint(_),this.state=24):_===63||c(_)?(this.fail("processing instruction without a target."),this.state=_===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(_),this.state=24)}sPIRest(){const{chunk:_,i:x}=this;for(;;){const w=this.getCodeNorm();if(w===-1)return void(this.piTarget+=_.slice(x));if(!this.nameCheck(w)){this.piTarget+=_.slice(x,this.prevI);const S=w===63;S||c(w)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=S?33:27):this.state=S?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(w));break}}}sPIBody(){if(this.text.length===0){const _=this.getCodeNorm();_===63?this.state=26:c(_)||(this.text=String.fromCodePoint(_))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var _;const x=this.getCodeNorm();if(x===62){const{piTarget:w}=this;w.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(_=this.piHandler)===null||_===void 0||_.call(this,{target:w,body:this.text}),this.piTarget=this.text="",this.state=13}else x===63?this.text+="?":(this.text+="?"+String.fromCodePoint(x),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const _=this.skipSpaces();_!==63?_!==-1&&(this.state=28,this.name=String.fromCodePoint(_)):this.state=33}sXMLDeclName(){const _=this.captureTo(F);if(_===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(c(_)||_===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=_===61?30:29}}sXMLDeclEq(){const _=this.getCodeNorm();if(_===63)return this.state=33,void this.fail("XML declaration is incomplete.");c(_)||(_!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const _=this.getCodeNorm();if(_===63)return this.state=33,void this.fail("XML declaration is incomplete.");c(_)||(W(_)?this.q=_:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const _=this.captureTo([this.q,63]);if(_===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(_===-1)return;const x=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const w=x;this.xmlDecl.version=w,/^1\.[0-9]+$/.test(w)?this.opt.forceXMLVersion||this.setXMLVersion(w):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(x)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=x;break;case"standalone":x!=="yes"&&x!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=x}this.name="",this.state=32}sXMLDeclSeparator(){const _=this.getCodeNorm();_!==63?(c(_)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var _;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(_=this.xmldeclHandler)===null||_===void 0||_.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var _;const x=this.captureNameChars();if(x===-1)return;const w=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=w.ns=Object.create(null)),(_=this.openTagStartHandler)===null||_===void 0||_.call(this,w),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),x){case 62:this.openTag();break;case 47:this.state=35;break;default:c(x)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const _=this.skipSpaces();_!==-1&&(u(_)?(this.unget(),this.state=37):_===62?this.openTag():_===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const _=this.captureNameChars();_===61?this.state=39:c(_)?this.state=38:_===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):_!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const _=this.skipSpaces();switch(_){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",_===62?this.openTag():u(_)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const _=this.getCodeNorm();W(_)?(this.q=_,this.state=40):c(_)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:_,chunk:x}=this;let{i:w}=this;for(;;)switch(this.getCode()){case _:return this.pushAttrib(this.name,this.text+x.slice(w,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=x.slice(w,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=x.slice(w,this.prevI)+" ",w=this.i;break;case 60:return this.text+=x.slice(w,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=x.slice(w))}}sAttribValueClosed(){const _=this.getCodeNorm();c(_)?this.state=36:_===62?this.openTag():_===47?this.state=35:u(_)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const _=this.captureTo(P);switch(_){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",_===62?this.openTag():this.state=36}}sCloseTag(){const _=this.captureNameChars();_===62?this.closeTag():c(_)?this.state=44:_!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:_,forbiddenState:x}=this;const{chunk:w,textHandler:S}=this;e:for(;;)switch(this.getCode()){case 60:if(this.state=15,S!==void 0){const{text:I}=this,z=w.slice(_,this.prevI);I.length!==0?(S(I+z),this.text=""):z.length!==0&&S(z)}x=0;break e;case 38:this.state=14,this.entityReturnState=13,S!==void 0&&(this.text+=w.slice(_,this.prevI)),x=0;break e;case 93:switch(x){case 0:x=1;break;case 1:x=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:x===2&&this.fail('the string "]]>" is disallowed in char data.'),x=0;break;case-2:S!==void 0&&(this.text+=w.slice(_,this.prevI)+`
`),_=this.i,x=0;break;case-1:S!==void 0&&(this.text+=w.slice(_));break e;default:x=0}this.forbiddenState=x}handleTextOutsideRoot(){let{i:_}=this;const{chunk:x,textHandler:w}=this;let S=!1;e:for(;;){const I=this.getCode();switch(I){case 60:if(this.state=15,w!==void 0){const{text:z}=this,A=x.slice(_,this.prevI);z.length!==0?(w(z+A),this.text=""):A.length!==0&&w(A)}break e;case 38:this.state=14,this.entityReturnState=13,w!==void 0&&(this.text+=x.slice(_,this.prevI)),S=!0;break e;case-2:w!==void 0&&(this.text+=x.slice(_,this.prevI)+`
`),_=this.i;break;case-1:w!==void 0&&(this.text+=x.slice(_));break e;default:c(I)||(S=!0)}}S&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(_,x){var w;const{prefix:S,local:I}=this.qname(_),z={name:_,prefix:S,local:I,value:x};if(this.attribList.push(z),(w=this.attributeHandler)===null||w===void 0||w.call(this,z),S==="xmlns"){const A=x.trim();this.currentXMLVersion==="1.0"&&A===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[I]=A,L(this,I,A)}else if(_==="xmlns"){const A=x.trim();this.topNS[""]=A,L(this,"",A)}}pushAttribPlain(_,x){var w;const S={name:_,value:x};this.attribList.push(S),(w=this.attributeHandler)===null||w===void 0||w.call(this,S)}end(){var _,x;this.sawRoot||this.fail("document must contain a root element.");const{tags:w}=this;for(;w.length>0;){const I=w.pop();this.fail("unclosed tag: "+I.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");const{text:S}=this;return S.length!==0&&((_=this.textHandler)===null||_===void 0||_.call(this,S),this.text=""),this._closed=!0,(x=this.endHandler)===null||x===void 0||x.call(this),this._init(),this}resolve(_){var x,w;let S=this.topNS[_];if(S!==void 0)return S;const{tags:I}=this;for(let z=I.length-1;z>=0;z--)if(S=I[z].ns[_],S!==void 0)return S;return S=this.ns[_],S!==void 0?S:(w=(x=this.opt).resolvePrefix)===null||w===void 0?void 0:w.call(x,_)}qname(_){const x=_.indexOf(":");if(x===-1)return{prefix:"",local:_};const w=_.slice(x+1),S=_.slice(0,x);return(S===""||w===""||w.includes(":"))&&this.fail(`malformed name: ${_}.`),{prefix:S,local:w}}processAttribsNS(){var _;const{attribList:x}=this,w=this.tag;{const{prefix:z,local:A}=this.qname(w.name);w.prefix=z,w.local=A;const H=w.uri=(_=this.resolve(z))!==null&&_!==void 0?_:"";z!==""&&(z==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),H===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(z)}.`),w.uri=z))}if(x.length===0)return;const{attributes:S}=w,I=new Set;for(const z of x){const{name:A,prefix:H,local:K}=z;let J,V;H===""?(J=A==="xmlns"?v:"",V=A):(J=this.resolve(H),J===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(H)}.`),J=H),V=`{${J}}${K}`),I.has(V)&&this.fail(`duplicate attribute: ${V}.`),I.add(V),z.uri=J,S[A]=z}this.attribList=[]}processAttribsPlain(){const{attribList:_}=this,x=this.tag.attributes;for(const{name:w,value:S}of _)x[w]!==void 0&&this.fail(`duplicate attribute: ${w}.`),x[w]=S;this.attribList=[]}openTag(){var _;this.processAttribs();const{tags:x}=this,w=this.tag;w.isSelfClosing=!1,(_=this.openTagHandler)===null||_===void 0||_.call(this,w),x.push(w),this.state=13,this.name=""}openSelfClosingTag(){var _,x,w;this.processAttribs();const{tags:S}=this,I=this.tag;I.isSelfClosing=!0,(_=this.openTagHandler)===null||_===void 0||_.call(this,I),(x=this.closeTagHandler)===null||x===void 0||x.call(this,I),(this.tag=(w=S[S.length-1])!==null&&w!==void 0?w:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){const{tags:_,name:x}=this;if(this.state=13,this.name="",x==="")return this.fail("weird empty close tag."),void(this.text+="</>");const w=this.closeTagHandler;let S=_.length;for(;S-- >0;){const I=this.tag=_.pop();if(this.topNS=I.ns,w==null||w(I),I.name===x)break;this.fail("unexpected close tag.")}S===0?this.closedRoot=!0:S<0&&(this.fail(`unmatched closing tag: ${x}.`),this.text+=`</${x}>`)}parseEntity(_){if(_[0]!=="#"){const w=this.ENTITIES[_];return w!==void 0?w:(this.fail(this.isName(_)?"undefined entity.":"disallowed character in entity name."),`&${_};`)}let x=NaN;return _[1]==="x"&&/^#x[0-9a-f]+$/i.test(_)?x=parseInt(_.slice(2),16):/^#[0-9]+$/.test(_)&&(x=parseInt(_.slice(1),10)),this.isChar(x)?String.fromCodePoint(x):(this.fail("malformed character entity."),`&${_};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(t,n,i){var s=t("safe-buffer").Buffer;function o(l,c){this._block=s.alloc(l),this._finalSize=c,this._blockSize=l,this._len=0}o.prototype.update=function(l,c){typeof l=="string"&&(c=c||"utf8",l=s.from(l,c));for(var a=this._block,u=this._blockSize,d=l.length,f=this._len,h=0;h<d;){for(var m=f%u,g=Math.min(d-h,u-m),p=0;p<g;p++)a[m+p]=l[h+p];h+=g,(f+=g)%u==0&&this._update(a)}return this._len+=d,this},o.prototype.digest=function(l){var c=this._len%this._blockSize;this._block[c]=128,this._block.fill(0,c+1),c>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=8*this._len;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var u=(4294967295&a)>>>0,d=(a-u)/4294967296;this._block.writeUInt32BE(d,this._blockSize-8),this._block.writeUInt32BE(u,this._blockSize-4)}this._update(this._block);var f=this._hash();return l?f.toString(l):f},o.prototype._update=function(){throw new Error("_update must be implemented by subclass")},n.exports=o},{"safe-buffer":494}],498:[function(t,n,i){var s=n.exports=function(o){o=o.toLowerCase();var l=s[o];if(!l)throw new Error(o+" is not supported (we accept pull requests)");return new l};s.sha=t("./sha"),s.sha1=t("./sha1"),s.sha224=t("./sha224"),s.sha256=t("./sha256"),s.sha384=t("./sha384"),s.sha512=t("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(t,n,i){var s=t("inherits"),o=t("./hash"),l=t("safe-buffer").Buffer,c=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function u(){this.init(),this._w=a,o.call(this,64,56)}function d(h){return h<<30|h>>>2}function f(h,m,g,p){return h===0?m&g|~m&p:h===2?m&g|m&p|g&p:m^g^p}s(u,o),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(h){for(var m,g=this._w,p=0|this._a,y=0|this._b,b=0|this._c,v=0|this._d,E=0|this._e,M=0;M<16;++M)g[M]=h.readInt32BE(4*M);for(;M<80;++M)g[M]=g[M-3]^g[M-8]^g[M-14]^g[M-16];for(var W=0;W<80;++W){var $=~~(W/20),N=0|((m=p)<<5|m>>>27)+f($,y,b,v)+E+g[W]+c[$];E=v,v=b,b=d(y),y=p,p=N}this._a=p+this._a|0,this._b=y+this._b|0,this._c=b+this._c|0,this._d=v+this._d|0,this._e=E+this._e|0},u.prototype._hash=function(){var h=l.allocUnsafe(20);return h.writeInt32BE(0|this._a,0),h.writeInt32BE(0|this._b,4),h.writeInt32BE(0|this._c,8),h.writeInt32BE(0|this._d,12),h.writeInt32BE(0|this._e,16),h},n.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(t,n,i){var s=t("inherits"),o=t("./hash"),l=t("safe-buffer").Buffer,c=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function u(){this.init(),this._w=a,o.call(this,64,56)}function d(m){return m<<5|m>>>27}function f(m){return m<<30|m>>>2}function h(m,g,p,y){return m===0?g&p|~g&y:m===2?g&p|g&y|p&y:g^p^y}s(u,o),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(m){for(var g,p=this._w,y=0|this._a,b=0|this._b,v=0|this._c,E=0|this._d,M=0|this._e,W=0;W<16;++W)p[W]=m.readInt32BE(4*W);for(;W<80;++W)p[W]=(g=p[W-3]^p[W-8]^p[W-14]^p[W-16])<<1|g>>>31;for(var $=0;$<80;++$){var N=~~($/20),j=d(y)+h(N,b,v,E)+M+p[$]+c[N]|0;M=E,E=v,v=f(b),b=y,y=j}this._a=y+this._a|0,this._b=b+this._b|0,this._c=v+this._c|0,this._d=E+this._d|0,this._e=M+this._e|0},u.prototype._hash=function(){var m=l.allocUnsafe(20);return m.writeInt32BE(0|this._a,0),m.writeInt32BE(0|this._b,4),m.writeInt32BE(0|this._c,8),m.writeInt32BE(0|this._d,12),m.writeInt32BE(0|this._e,16),m},n.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(t,n,i){var s=t("inherits"),o=t("./sha256"),l=t("./hash"),c=t("safe-buffer").Buffer,a=new Array(64);function u(){this.init(),this._w=a,l.call(this,64,56)}s(u,o),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var d=c.allocUnsafe(28);return d.writeInt32BE(this._a,0),d.writeInt32BE(this._b,4),d.writeInt32BE(this._c,8),d.writeInt32BE(this._d,12),d.writeInt32BE(this._e,16),d.writeInt32BE(this._f,20),d.writeInt32BE(this._g,24),d},n.exports=u},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(t,n,i){var s=t("inherits"),o=t("./hash"),l=t("safe-buffer").Buffer,c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function u(){this.init(),this._w=a,o.call(this,64,56)}function d(p,y,b){return b^p&(y^b)}function f(p,y,b){return p&y|b&(p|y)}function h(p){return(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10)}function m(p){return(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7)}function g(p){return(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3}s(u,o),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(p){for(var y,b=this._w,v=0|this._a,E=0|this._b,M=0|this._c,W=0|this._d,$=0|this._e,N=0|this._f,j=0|this._g,F=0|this._h,P=0;P<16;++P)b[P]=p.readInt32BE(4*P);for(;P<64;++P)b[P]=0|(((y=b[P-2])>>>17|y<<15)^(y>>>19|y<<13)^y>>>10)+b[P-7]+g(b[P-15])+b[P-16];for(var L=0;L<64;++L){var k=F+m($)+d($,N,j)+c[L]+b[L]|0,R=h(v)+f(v,E,M)|0;F=j,j=N,N=$,$=W+k|0,W=M,M=E,E=v,v=k+R|0}this._a=v+this._a|0,this._b=E+this._b|0,this._c=M+this._c|0,this._d=W+this._d|0,this._e=$+this._e|0,this._f=N+this._f|0,this._g=j+this._g|0,this._h=F+this._h|0},u.prototype._hash=function(){var p=l.allocUnsafe(32);return p.writeInt32BE(this._a,0),p.writeInt32BE(this._b,4),p.writeInt32BE(this._c,8),p.writeInt32BE(this._d,12),p.writeInt32BE(this._e,16),p.writeInt32BE(this._f,20),p.writeInt32BE(this._g,24),p.writeInt32BE(this._h,28),p},n.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(t,n,i){var s=t("inherits"),o=t("./sha512"),l=t("./hash"),c=t("safe-buffer").Buffer,a=new Array(160);function u(){this.init(),this._w=a,l.call(this,128,112)}s(u,o),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var d=c.allocUnsafe(48);function f(h,m,g){d.writeInt32BE(h,g),d.writeInt32BE(m,g+4)}return f(this._ah,this._al,0),f(this._bh,this._bl,8),f(this._ch,this._cl,16),f(this._dh,this._dl,24),f(this._eh,this._el,32),f(this._fh,this._fl,40),d},n.exports=u},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(t,n,i){var s=t("inherits"),o=t("./hash"),l=t("safe-buffer").Buffer,c=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function u(){this.init(),this._w=a,o.call(this,128,112)}function d(E,M,W){return W^E&(M^W)}function f(E,M,W){return E&M|W&(E|M)}function h(E,M){return(E>>>28|M<<4)^(M>>>2|E<<30)^(M>>>7|E<<25)}function m(E,M){return(E>>>14|M<<18)^(E>>>18|M<<14)^(M>>>9|E<<23)}function g(E,M){return(E>>>1|M<<31)^(E>>>8|M<<24)^E>>>7}function p(E,M){return(E>>>1|M<<31)^(E>>>8|M<<24)^(E>>>7|M<<25)}function y(E,M){return(E>>>19|M<<13)^(M>>>29|E<<3)^E>>>6}function b(E,M){return(E>>>19|M<<13)^(M>>>29|E<<3)^(E>>>6|M<<26)}function v(E,M){return E>>>0<M>>>0?1:0}s(u,o),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(E){for(var M=this._w,W=0|this._ah,$=0|this._bh,N=0|this._ch,j=0|this._dh,F=0|this._eh,P=0|this._fh,L=0|this._gh,k=0|this._hh,R=0|this._al,C=0|this._bl,_=0|this._cl,x=0|this._dl,w=0|this._el,S=0|this._fl,I=0|this._gl,z=0|this._hl,A=0;A<32;A+=2)M[A]=E.readInt32BE(4*A),M[A+1]=E.readInt32BE(4*A+4);for(;A<160;A+=2){var H=M[A-30],K=M[A-30+1],J=g(H,K),V=p(K,H),X=y(H=M[A-4],K=M[A-4+1]),D=b(K,H),O=M[A-14],G=M[A-14+1],Z=M[A-32],ue=M[A-32+1],te=V+G|0,oe=J+O+v(te,V)|0;oe=(oe=oe+X+v(te=te+D|0,D)|0)+Z+v(te=te+ue|0,ue)|0,M[A]=oe,M[A+1]=te}for(var re=0;re<160;re+=2){oe=M[re],te=M[re+1];var be=f(W,$,N),ie=f(R,C,_),le=h(W,R),ae=h(R,W),Se=m(F,w),ve=m(w,F),ke=c[re],Ne=c[re+1],ze=d(F,P,L),we=d(w,S,I),De=z+ve|0,He=k+Se+v(De,z)|0;He=(He=(He=He+ze+v(De=De+we|0,we)|0)+ke+v(De=De+Ne|0,Ne)|0)+oe+v(De=De+te|0,te)|0;var We=ae+ie|0,et=le+be+v(We,ae)|0;k=L,z=I,L=P,I=S,P=F,S=w,F=j+He+v(w=x+De|0,x)|0,j=N,x=_,N=$,_=C,$=W,C=R,W=He+et+v(R=De+We|0,De)|0}this._al=this._al+R|0,this._bl=this._bl+C|0,this._cl=this._cl+_|0,this._dl=this._dl+x|0,this._el=this._el+w|0,this._fl=this._fl+S|0,this._gl=this._gl+I|0,this._hl=this._hl+z|0,this._ah=this._ah+W+v(this._al,R)|0,this._bh=this._bh+$+v(this._bl,C)|0,this._ch=this._ch+N+v(this._cl,_)|0,this._dh=this._dh+j+v(this._dl,x)|0,this._eh=this._eh+F+v(this._el,w)|0,this._fh=this._fh+P+v(this._fl,S)|0,this._gh=this._gh+L+v(this._gl,I)|0,this._hh=this._hh+k+v(this._hl,z)|0},u.prototype._hash=function(){var E=l.allocUnsafe(64);function M(W,$,N){E.writeInt32BE(W,N),E.writeInt32BE($,N+4)}return M(this._ah,this._al,0),M(this._bh,this._bl,8),M(this._ch,this._cl,16),M(this._dh,this._dl,24),M(this._eh,this._el,32),M(this._fh,this._fl,40),M(this._gh,this._gl,48),M(this._hh,this._hl,56),E},n.exports=u},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(t,n,i){n.exports=o;var s=t("events").EventEmitter;function o(){s.call(this)}t("inherits")(o,s),o.Readable=t("readable-stream/readable.js"),o.Writable=t("readable-stream/writable.js"),o.Duplex=t("readable-stream/duplex.js"),o.Transform=t("readable-stream/transform.js"),o.PassThrough=t("readable-stream/passthrough.js"),o.Stream=o,o.prototype.pipe=function(l,c){var a=this;function u(y){l.writable&&l.write(y)===!1&&a.pause&&a.pause()}function d(){a.readable&&a.resume&&a.resume()}a.on("data",u),l.on("drain",d),l._isStdio||c&&c.end===!1||(a.on("end",h),a.on("close",m));var f=!1;function h(){f||(f=!0,l.end())}function m(){f||(f=!0,typeof l.destroy=="function"&&l.destroy())}function g(y){if(p(),s.listenerCount(this,"error")===0)throw y}function p(){a.removeListener("data",u),l.removeListener("drain",d),a.removeListener("end",h),a.removeListener("close",m),a.removeListener("error",g),l.removeListener("error",g),a.removeListener("end",p),a.removeListener("close",p),l.removeListener("close",p)}return a.on("error",g),l.on("error",g),a.on("end",p),a.on("close",p),l.on("close",p),l.emit("pipe",a),l}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(t,n,i){var s={}.toString;n.exports=Array.isArray||function(o){return s.call(o)=="[object Array]"}},{}],507:[function(t,n,i){n.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(t,n,i){var s=t("process-nextick-args"),o=Object.keys||function(p){var y=[];for(var b in p)y.push(b);return y};n.exports=h;var l=Object.create(t("core-util-is"));l.inherits=t("inherits");var c=t("./_stream_readable"),a=t("./_stream_writable");l.inherits(h,c);for(var u=o(a.prototype),d=0;d<u.length;d++){var f=u[d];h.prototype[f]||(h.prototype[f]=a.prototype[f])}function h(p){if(!(this instanceof h))return new h(p);c.call(this,p),a.call(this,p),p&&p.readable===!1&&(this.readable=!1),p&&p.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,p&&p.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",m)}function m(){this.allowHalfOpen||this._writableState.ended||s.nextTick(g,this)}function g(p){p.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(p){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=p,this._writableState.destroyed=p)}}),h.prototype._destroy=function(p,y){this.push(null),this.end(),s.nextTick(y,p)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(t,n,i){n.exports=l;var s=t("./_stream_transform"),o=Object.create(t("core-util-is"));function l(c){if(!(this instanceof l))return new l(c);s.call(this,c)}o.inherits=t("inherits"),o.inherits(l,s),l.prototype._transform=function(c,a,u){u(null,c)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(t,n,i){(function(s,o){(function(){var l=t("process-nextick-args");n.exports=W;var c,a=t("isarray");W.ReadableState=M,t("events").EventEmitter;var u=function(z,A){return z.listeners(A).length},d=t("./internal/streams/stream"),f=t("safe-buffer").Buffer,h=(o!==void 0?o:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},m=Object.create(t("core-util-is"));m.inherits=t("inherits");var g=t("util"),p=void 0;p=g&&g.debuglog?g.debuglog("stream"):function(){};var y,b=t("./internal/streams/BufferList"),v=t("./internal/streams/destroy");m.inherits(W,d);var E=["error","close","destroy","pause","resume"];function M(z,A){z=z||{};var H=A instanceof(c=c||t("./_stream_duplex"));this.objectMode=!!z.objectMode,H&&(this.objectMode=this.objectMode||!!z.readableObjectMode);var K=z.highWaterMark,J=z.readableHighWaterMark,V=this.objectMode?16:16384;this.highWaterMark=K||K===0?K:H&&(J||J===0)?J:V,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=z.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,z.encoding&&(y||(y=t("string_decoder/").StringDecoder),this.decoder=new y(z.encoding),this.encoding=z.encoding)}function W(z){if(c=c||t("./_stream_duplex"),!(this instanceof W))return new W(z);this._readableState=new M(z,this),this.readable=!0,z&&(typeof z.read=="function"&&(this._read=z.read),typeof z.destroy=="function"&&(this._destroy=z.destroy)),d.call(this)}function $(z,A,H,K,J){var V,X=z._readableState;return A===null?(X.reading=!1,function(D,O){if(!O.ended){if(O.decoder){var G=O.decoder.end();G&&G.length&&(O.buffer.push(G),O.length+=O.objectMode?1:G.length)}O.ended=!0,F(D)}}(z,X)):(J||(V=function(D,O){var G;Z=O,f.isBuffer(Z)||Z instanceof h||typeof O=="string"||O===void 0||D.objectMode||(G=new TypeError("Invalid non-string/buffer chunk"));var Z;return G}(X,A)),V?z.emit("error",V):X.objectMode||A&&A.length>0?(typeof A=="string"||X.objectMode||Object.getPrototypeOf(A)===f.prototype||(A=function(D){return f.from(D)}(A)),K?X.endEmitted?z.emit("error",new Error("stream.unshift() after end event")):N(z,X,A,!0):X.ended?z.emit("error",new Error("stream.push() after EOF")):(X.reading=!1,X.decoder&&!H?(A=X.decoder.write(A),X.objectMode||A.length!==0?N(z,X,A,!1):L(z,X)):N(z,X,A,!1))):K||(X.reading=!1)),function(D){return!D.ended&&(D.needReadable||D.length<D.highWaterMark||D.length===0)}(X)}function N(z,A,H,K){A.flowing&&A.length===0&&!A.sync?(z.emit("data",H),z.read(0)):(A.length+=A.objectMode?1:H.length,K?A.buffer.unshift(H):A.buffer.push(H),A.needReadable&&F(z)),L(z,A)}Object.defineProperty(W.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(z){this._readableState&&(this._readableState.destroyed=z)}}),W.prototype.destroy=v.destroy,W.prototype._undestroy=v.undestroy,W.prototype._destroy=function(z,A){this.push(null),A(z)},W.prototype.push=function(z,A){var H,K=this._readableState;return K.objectMode?H=!0:typeof z=="string"&&((A=A||K.defaultEncoding)!==K.encoding&&(z=f.from(z,A),A=""),H=!0),$(this,z,A,!1,H)},W.prototype.unshift=function(z){return $(this,z,null,!0,!1)},W.prototype.isPaused=function(){return this._readableState.flowing===!1},W.prototype.setEncoding=function(z){return y||(y=t("string_decoder/").StringDecoder),this._readableState.decoder=new y(z),this._readableState.encoding=z,this};function j(z,A){return z<=0||A.length===0&&A.ended?0:A.objectMode?1:z!=z?A.flowing&&A.length?A.buffer.head.data.length:A.length:(z>A.highWaterMark&&(A.highWaterMark=function(H){return H>=8388608?H=8388608:(H--,H|=H>>>1,H|=H>>>2,H|=H>>>4,H|=H>>>8,H|=H>>>16,H++),H}(z)),z<=A.length?z:A.ended?A.length:(A.needReadable=!0,0))}function F(z){var A=z._readableState;A.needReadable=!1,A.emittedReadable||(p("emitReadable",A.flowing),A.emittedReadable=!0,A.sync?l.nextTick(P,z):P(z))}function P(z){p("emit readable"),z.emit("readable"),_(z)}function L(z,A){A.readingMore||(A.readingMore=!0,l.nextTick(k,z,A))}function k(z,A){for(var H=A.length;!A.reading&&!A.flowing&&!A.ended&&A.length<A.highWaterMark&&(p("maybeReadMore read 0"),z.read(0),H!==A.length);)H=A.length;A.readingMore=!1}function R(z){p("readable nexttick read 0"),z.read(0)}function C(z,A){A.reading||(p("resume read 0"),z.read(0)),A.resumeScheduled=!1,A.awaitDrain=0,z.emit("resume"),_(z),A.flowing&&!A.reading&&z.read(0)}function _(z){var A=z._readableState;for(p("flow",A.flowing);A.flowing&&z.read()!==null;);}function x(z,A){return A.length===0?null:(A.objectMode?H=A.buffer.shift():!z||z>=A.length?(H=A.decoder?A.buffer.join(""):A.buffer.length===1?A.buffer.head.data:A.buffer.concat(A.length),A.buffer.clear()):H=function(K,J,V){var X;return K<J.head.data.length?(X=J.head.data.slice(0,K),J.head.data=J.head.data.slice(K)):X=K===J.head.data.length?J.shift():V?function(D,O){var G=O.head,Z=1,ue=G.data;for(D-=ue.length;G=G.next;){var te=G.data,oe=D>te.length?te.length:D;if(oe===te.length?ue+=te:ue+=te.slice(0,D),(D-=oe)===0){oe===te.length?(++Z,G.next?O.head=G.next:O.head=O.tail=null):(O.head=G,G.data=te.slice(oe));break}++Z}return O.length-=Z,ue}(K,J):function(D,O){var G=f.allocUnsafe(D),Z=O.head,ue=1;for(Z.data.copy(G),D-=Z.data.length;Z=Z.next;){var te=Z.data,oe=D>te.length?te.length:D;if(te.copy(G,G.length-D,0,oe),(D-=oe)===0){oe===te.length?(++ue,Z.next?O.head=Z.next:O.head=O.tail=null):(O.head=Z,Z.data=te.slice(oe));break}++ue}return O.length-=ue,G}(K,J),X}(z,A.buffer,A.decoder),H);var H}function w(z){var A=z._readableState;if(A.length>0)throw new Error('"endReadable()" called on non-empty stream');A.endEmitted||(A.ended=!0,l.nextTick(S,A,z))}function S(z,A){z.endEmitted||z.length!==0||(z.endEmitted=!0,A.readable=!1,A.emit("end"))}function I(z,A){for(var H=0,K=z.length;H<K;H++)if(z[H]===A)return H;return-1}W.prototype.read=function(z){p("read",z),z=parseInt(z,10);var A=this._readableState,H=z;if(z!==0&&(A.emittedReadable=!1),z===0&&A.needReadable&&(A.length>=A.highWaterMark||A.ended))return p("read: emitReadable",A.length,A.ended),A.length===0&&A.ended?w(this):F(this),null;if((z=j(z,A))===0&&A.ended)return A.length===0&&w(this),null;var K,J=A.needReadable;return p("need readable",J),(A.length===0||A.length-z<A.highWaterMark)&&p("length less than watermark",J=!0),A.ended||A.reading?p("reading or ended",J=!1):J&&(p("do read"),A.reading=!0,A.sync=!0,A.length===0&&(A.needReadable=!0),this._read(A.highWaterMark),A.sync=!1,A.reading||(z=j(H,A))),(K=z>0?x(z,A):null)===null?(A.needReadable=!0,z=0):A.length-=z,A.length===0&&(A.ended||(A.needReadable=!0),H!==z&&A.ended&&w(this)),K!==null&&this.emit("data",K),K},W.prototype._read=function(z){this.emit("error",new Error("_read() is not implemented"))},W.prototype.pipe=function(z,A){var H=this,K=this._readableState;switch(K.pipesCount){case 0:K.pipes=z;break;case 1:K.pipes=[K.pipes,z];break;default:K.pipes.push(z)}K.pipesCount+=1,p("pipe count=%d opts=%j",K.pipesCount,A);var J=(!A||A.end!==!1)&&z!==s.stdout&&z!==s.stderr?X:re;function V(be,ie){p("onunpipe"),be===H&&ie&&ie.hasUnpiped===!1&&(ie.hasUnpiped=!0,p("cleanup"),z.removeListener("close",te),z.removeListener("finish",oe),z.removeListener("drain",D),z.removeListener("error",ue),z.removeListener("unpipe",V),H.removeListener("end",X),H.removeListener("end",re),H.removeListener("data",Z),O=!0,!K.awaitDrain||z._writableState&&!z._writableState.needDrain||D())}function X(){p("onend"),z.end()}K.endEmitted?l.nextTick(J):H.once("end",J),z.on("unpipe",V);var D=function(be){return function(){var ie=be._readableState;p("pipeOnDrain",ie.awaitDrain),ie.awaitDrain&&ie.awaitDrain--,ie.awaitDrain===0&&u(be,"data")&&(ie.flowing=!0,_(be))}}(H);z.on("drain",D);var O=!1,G=!1;function Z(be){p("ondata"),G=!1,z.write(be)!==!1||G||((K.pipesCount===1&&K.pipes===z||K.pipesCount>1&&I(K.pipes,z)!==-1)&&!O&&(p("false write response, pause",K.awaitDrain),K.awaitDrain++,G=!0),H.pause())}function ue(be){p("onerror",be),re(),z.removeListener("error",ue),u(z,"error")===0&&z.emit("error",be)}function te(){z.removeListener("finish",oe),re()}function oe(){p("onfinish"),z.removeListener("close",te),re()}function re(){p("unpipe"),H.unpipe(z)}return H.on("data",Z),function(be,ie,le){if(typeof be.prependListener=="function")return be.prependListener(ie,le);be._events&&be._events[ie]?a(be._events[ie])?be._events[ie].unshift(le):be._events[ie]=[le,be._events[ie]]:be.on(ie,le)}(z,"error",ue),z.once("close",te),z.once("finish",oe),z.emit("pipe",H),K.flowing||(p("pipe resume"),H.resume()),z},W.prototype.unpipe=function(z){var A=this._readableState,H={hasUnpiped:!1};if(A.pipesCount===0)return this;if(A.pipesCount===1)return z&&z!==A.pipes||(z||(z=A.pipes),A.pipes=null,A.pipesCount=0,A.flowing=!1,z&&z.emit("unpipe",this,H)),this;if(!z){var K=A.pipes,J=A.pipesCount;A.pipes=null,A.pipesCount=0,A.flowing=!1;for(var V=0;V<J;V++)K[V].emit("unpipe",this,{hasUnpiped:!1});return this}var X=I(A.pipes,z);return X===-1||(A.pipes.splice(X,1),A.pipesCount-=1,A.pipesCount===1&&(A.pipes=A.pipes[0]),z.emit("unpipe",this,H)),this},W.prototype.on=function(z,A){var H=d.prototype.on.call(this,z,A);if(z==="data")this._readableState.flowing!==!1&&this.resume();else if(z==="readable"){var K=this._readableState;K.endEmitted||K.readableListening||(K.readableListening=K.needReadable=!0,K.emittedReadable=!1,K.reading?K.length&&F(this):l.nextTick(R,this))}return H},W.prototype.addListener=W.prototype.on,W.prototype.resume=function(){var z=this._readableState;return z.flowing||(p("resume"),z.flowing=!0,function(A,H){H.resumeScheduled||(H.resumeScheduled=!0,l.nextTick(C,A,H))}(this,z)),this},W.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},W.prototype.wrap=function(z){var A=this,H=this._readableState,K=!1;for(var J in z.on("end",function(){if(p("wrapped end"),H.decoder&&!H.ended){var X=H.decoder.end();X&&X.length&&A.push(X)}A.push(null)}),z.on("data",function(X){p("wrapped data"),H.decoder&&(X=H.decoder.write(X)),H.objectMode&&X==null||(H.objectMode||X&&X.length)&&(A.push(X)||(K=!0,z.pause()))}),z)this[J]===void 0&&typeof z[J]=="function"&&(this[J]=function(X){return function(){return z[X].apply(z,arguments)}}(J));for(var V=0;V<E.length;V++)z.on(E[V],this.emit.bind(this,E[V]));return this._read=function(X){p("wrapped _read",X),K&&(K=!1,z.resume())},this},Object.defineProperty(W.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),W._fromList=x}).call(this)}).call(this,t("_process"),typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(t,n,i){n.exports=c;var s=t("./_stream_duplex"),o=Object.create(t("core-util-is"));function l(d,f){var h=this._transformState;h.transforming=!1;var m=h.writecb;if(!m)return this.emit("error",new Error("write callback called multiple times"));h.writechunk=null,h.writecb=null,f!=null&&this.push(f),m(d);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function c(d){if(!(this instanceof c))return new c(d);s.call(this,d),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",a)}function a(){var d=this;typeof this._flush=="function"?this._flush(function(f,h){u(d,f,h)}):u(this,null,null)}function u(d,f,h){if(f)return d.emit("error",f);if(h!=null&&d.push(h),d._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(d._transformState.transforming)throw new Error("Calling transform done when still transforming");return d.push(null)}o.inherits=t("inherits"),o.inherits(c,s),c.prototype.push=function(d,f){return this._transformState.needTransform=!1,s.prototype.push.call(this,d,f)},c.prototype._transform=function(d,f,h){throw new Error("_transform() is not implemented")},c.prototype._write=function(d,f,h){var m=this._transformState;if(m.writecb=h,m.writechunk=d,m.writeencoding=f,!m.transforming){var g=this._readableState;(m.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},c.prototype._read=function(d){var f=this._transformState;f.writechunk!==null&&f.writecb&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},c.prototype._destroy=function(d,f){var h=this;s.prototype._destroy.call(this,d,function(m){f(m),h.emit("close")})}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(t,n,i){(function(s,o,l){(function(){var c=t("process-nextick-args");function a(L){var k=this;this.next=null,this.entry=null,this.finish=function(){(function(R,C,_){var x=R.entry;for(R.entry=null;x;){var w=x.callback;C.pendingcb--,w(_),x=x.next}C.corkedRequestsFree.next=R})(k,L)}}n.exports=M;var u,d=!s.browser&&["v0.10","v0.9."].indexOf(s.version.slice(0,5))>-1?l:c.nextTick;M.WritableState=E;var f=Object.create(t("core-util-is"));f.inherits=t("inherits");var h={deprecate:t("util-deprecate")},m=t("./internal/streams/stream"),g=t("safe-buffer").Buffer,p=(o!==void 0?o:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},y,b=t("./internal/streams/destroy");function v(){}function E(L,k){u=u||t("./_stream_duplex"),L=L||{};var R=k instanceof u;this.objectMode=!!L.objectMode,R&&(this.objectMode=this.objectMode||!!L.writableObjectMode);var C=L.highWaterMark,_=L.writableHighWaterMark,x=this.objectMode?16:16384;this.highWaterMark=C||C===0?C:R&&(_||_===0)?_:x,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var w=L.decodeStrings===!1;this.decodeStrings=!w,this.defaultEncoding=L.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(S){(function(I,z){var A=I._writableState,H=A.sync,K=A.writecb;if(function(V){V.writing=!1,V.writecb=null,V.length-=V.writelen,V.writelen=0}(A),z)(function(V,X,D,O,G){--X.pendingcb,D?(c.nextTick(G,O),c.nextTick(P,V,X),V._writableState.errorEmitted=!0,V.emit("error",O)):(G(O),V._writableState.errorEmitted=!0,V.emit("error",O),P(V,X))})(I,A,H,z,K);else{var J=j(A);J||A.corked||A.bufferProcessing||!A.bufferedRequest||N(I,A),H?d($,I,A,J,K):$(I,A,J,K)}})(k,S)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function M(L){if(u=u||t("./_stream_duplex"),!(y.call(M,this)||this instanceof u))return new M(L);this._writableState=new E(L,this),this.writable=!0,L&&(typeof L.write=="function"&&(this._write=L.write),typeof L.writev=="function"&&(this._writev=L.writev),typeof L.destroy=="function"&&(this._destroy=L.destroy),typeof L.final=="function"&&(this._final=L.final)),m.call(this)}function W(L,k,R,C,_,x,w){k.writelen=C,k.writecb=w,k.writing=!0,k.sync=!0,R?L._writev(_,k.onwrite):L._write(_,x,k.onwrite),k.sync=!1}function $(L,k,R,C){R||function(_,x){x.length===0&&x.needDrain&&(x.needDrain=!1,_.emit("drain"))}(L,k),k.pendingcb--,C(),P(L,k)}function N(L,k){k.bufferProcessing=!0;var R=k.bufferedRequest;if(L._writev&&R&&R.next){var C=k.bufferedRequestCount,_=new Array(C),x=k.corkedRequestsFree;x.entry=R;for(var w=0,S=!0;R;)_[w]=R,R.isBuf||(S=!1),R=R.next,w+=1;_.allBuffers=S,W(L,k,!0,k.length,_,"",x.finish),k.pendingcb++,k.lastBufferedRequest=null,x.next?(k.corkedRequestsFree=x.next,x.next=null):k.corkedRequestsFree=new a(k),k.bufferedRequestCount=0}else{for(;R;){var I=R.chunk,z=R.encoding,A=R.callback;if(W(L,k,!1,k.objectMode?1:I.length,I,z,A),R=R.next,k.bufferedRequestCount--,k.writing)break}R===null&&(k.lastBufferedRequest=null)}k.bufferedRequest=R,k.bufferProcessing=!1}function j(L){return L.ending&&L.length===0&&L.bufferedRequest===null&&!L.finished&&!L.writing}function F(L,k){L._final(function(R){k.pendingcb--,R&&L.emit("error",R),k.prefinished=!0,L.emit("prefinish"),P(L,k)})}function P(L,k){var R=j(k);return R&&(function(C,_){_.prefinished||_.finalCalled||(typeof C._final=="function"?(_.pendingcb++,_.finalCalled=!0,c.nextTick(F,C,_)):(_.prefinished=!0,C.emit("prefinish")))}(L,k),k.pendingcb===0&&(k.finished=!0,L.emit("finish"))),R}f.inherits(M,m),E.prototype.getBuffer=function(){for(var L=this.bufferedRequest,k=[];L;)k.push(L),L=L.next;return k},function(){try{Object.defineProperty(E.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(L){return!!y.call(this,L)||this===M&&L&&L._writableState instanceof E}})):y=function(L){return L instanceof this},M.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},M.prototype.write=function(L,k,R){var C,_=this._writableState,x=!1,w=!_.objectMode&&(C=L,g.isBuffer(C)||C instanceof p);return w&&!g.isBuffer(L)&&(L=function(S){return g.from(S)}(L)),typeof k=="function"&&(R=k,k=null),w?k="buffer":k||(k=_.defaultEncoding),typeof R!="function"&&(R=v),_.ended?function(S,I){var z=new Error("write after end");S.emit("error",z),c.nextTick(I,z)}(this,R):(w||function(S,I,z,A){var H=!0,K=!1;return z===null?K=new TypeError("May not write null values to stream"):typeof z=="string"||z===void 0||I.objectMode||(K=new TypeError("Invalid non-string/buffer chunk")),K&&(S.emit("error",K),c.nextTick(A,K),H=!1),H}(this,_,L,R))&&(_.pendingcb++,x=function(S,I,z,A,H,K){if(!z){var J=function(O,G,Z){return O.objectMode||O.decodeStrings===!1||typeof G!="string"||(G=g.from(G,Z)),G}(I,A,H);A!==J&&(z=!0,H="buffer",A=J)}var V=I.objectMode?1:A.length;I.length+=V;var X=I.length<I.highWaterMark;if(X||(I.needDrain=!0),I.writing||I.corked){var D=I.lastBufferedRequest;I.lastBufferedRequest={chunk:A,encoding:H,isBuf:z,callback:K,next:null},D?D.next=I.lastBufferedRequest:I.bufferedRequest=I.lastBufferedRequest,I.bufferedRequestCount+=1}else W(S,I,!1,V,A,H,K);return X}(this,_,w,L,k,R)),x},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var L=this._writableState;L.corked&&(L.corked--,L.writing||L.corked||L.bufferProcessing||!L.bufferedRequest||N(this,L))},M.prototype.setDefaultEncoding=function(L){if(typeof L=="string"&&(L=L.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((L+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+L);return this._writableState.defaultEncoding=L,this},Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),M.prototype._write=function(L,k,R){R(new Error("_write() is not implemented"))},M.prototype._writev=null,M.prototype.end=function(L,k,R){var C=this._writableState;typeof L=="function"?(R=L,L=null,k=null):typeof k=="function"&&(R=k,k=null),L!=null&&this.write(L,k),C.corked&&(C.corked=1,this.uncork()),C.ending||function(_,x,w){x.ending=!0,P(_,x),w&&(x.finished?c.nextTick(w):_.once("finish",w)),x.ended=!0,_.writable=!1}(this,C,R)},Object.defineProperty(M.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(L){this._writableState&&(this._writableState.destroyed=L)}}),M.prototype.destroy=b.destroy,M.prototype._undestroy=b.undestroy,M.prototype._destroy=function(L,k){this.end(),k(L)}}).call(this)}).call(this,t("_process"),typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(t,n,i){var s=t("safe-buffer").Buffer,o=t("util");n.exports=function(){function l(){(function(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function")})(this,l),this.head=null,this.tail=null,this.length=0}return l.prototype.push=function(c){var a={data:c,next:null};this.length>0?this.tail.next=a:this.head=a,this.tail=a,++this.length},l.prototype.unshift=function(c){var a={data:c,next:this.head};this.length===0&&(this.tail=a),this.head=a,++this.length},l.prototype.shift=function(){if(this.length!==0){var c=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,c}},l.prototype.clear=function(){this.head=this.tail=null,this.length=0},l.prototype.join=function(c){if(this.length===0)return"";for(var a=this.head,u=""+a.data;a=a.next;)u+=c+a.data;return u},l.prototype.concat=function(c){if(this.length===0)return s.alloc(0);for(var a,u,d,f=s.allocUnsafe(c>>>0),h=this.head,m=0;h;)a=h.data,u=f,d=m,a.copy(u,d),m+=h.data.length,h=h.next;return f},l}(),o&&o.inspect&&o.inspect.custom&&(n.exports.prototype[o.inspect.custom]=function(){var l=o.inspect({length:this.length});return this.constructor.name+" "+l})},{"safe-buffer":520,util:188}],514:[function(t,n,i){var s=t("process-nextick-args");function o(l,c){l.emit("error",c)}n.exports={destroy:function(l,c){var a=this,u=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return u||d?(c?c(l):l&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,s.nextTick(o,this,l)):s.nextTick(o,this,l)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(l||null,function(f){!c&&f?a._writableState?a._writableState.errorEmitted||(a._writableState.errorEmitted=!0,s.nextTick(o,a,f)):s.nextTick(o,a,f):c&&c(f)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(t,n,i){arguments[4][490][0].apply(i,arguments)},{dup:490,events:422}],516:[function(t,n,i){n.exports=t("./readable").PassThrough},{"./readable":517}],517:[function(t,n,i){(i=n.exports=t("./lib/_stream_readable.js")).Stream=i,i.Readable=i,i.Writable=t("./lib/_stream_writable.js"),i.Duplex=t("./lib/_stream_duplex.js"),i.Transform=t("./lib/_stream_transform.js"),i.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(t,n,i){n.exports=t("./readable").Transform},{"./readable":517}],519:[function(t,n,i){n.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(t,n,i){arguments[4][217][0].apply(i,arguments)},{buffer:220,dup:217}],521:[function(t,n,i){arguments[4][218][0].apply(i,arguments)},{dup:218,"safe-buffer":520}],522:[function(t,n,i){arguments[4][218][0].apply(i,arguments)},{dup:218,"safe-buffer":494}],523:[function(t,n,i){(function(s,o){(function(){var l=t("process/browser.js").nextTick,c=Function.prototype.apply,a=Array.prototype.slice,u={},d=0;function f(h,m){this._id=h,this._clearFn=m}i.setTimeout=function(){return new f(c.call(setTimeout,window,arguments),clearTimeout)},i.setInterval=function(){return new f(c.call(setInterval,window,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(h){h.close()},f.prototype.unref=f.prototype.ref=function(){},f.prototype.close=function(){this._clearFn.call(window,this._id)},i.enroll=function(h,m){clearTimeout(h._idleTimeoutId),h._idleTimeout=m},i.unenroll=function(h){clearTimeout(h._idleTimeoutId),h._idleTimeout=-1},i._unrefActive=i.active=function(h){clearTimeout(h._idleTimeoutId);var m=h._idleTimeout;m>=0&&(h._idleTimeoutId=setTimeout(function(){h._onTimeout&&h._onTimeout()},m))},i.setImmediate=typeof s=="function"?s:function(h){var m=d++,g=!(arguments.length<2)&&a.call(arguments,1);return u[m]=!0,l(function(){u[m]&&(g?h.apply(null,g):h.call(null),i.clearImmediate(m))}),m},i.clearImmediate=typeof o=="function"?o:function(h){delete u[h]}}).call(this)}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(t,n,i){(function(s){(function(){function o(l){try{if(!s.localStorage)return!1}catch{return!1}var c=s.localStorage[l];return c!=null&&String(c).toLowerCase()==="true"}n.exports=function(l,c){if(o("noDeprecation"))return l;var a=!1;return function(){if(!a){if(o("throwDeprecation"))throw new Error(c);o("traceDeprecation")?console.trace(c):console.warn(c),a=!0}return l.apply(this,arguments)}}}).call(this)}).call(this,typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(t,n,i){typeof Object.create=="function"?n.exports=function(s,o){s.super_=o,s.prototype=Object.create(o.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}})}:n.exports=function(s,o){s.super_=o;var l=function(){};l.prototype=o.prototype,s.prototype=new l,s.prototype.constructor=s}},{}],526:[function(t,n,i){n.exports=function(s){return s&&typeof s=="object"&&typeof s.copy=="function"&&typeof s.fill=="function"&&typeof s.readUInt8=="function"}},{}],527:[function(t,n,i){(function(s,o){(function(){var l=/%[sdj%]/g;i.format=function(_){if(!E(_)){for(var x=[],w=0;w<arguments.length;w++)x.push(u(arguments[w]));return x.join(" ")}w=1;for(var S=arguments,I=S.length,z=String(_).replace(l,function(H){if(H==="%%")return"%";if(w>=I)return H;switch(H){case"%s":return String(S[w++]);case"%d":return Number(S[w++]);case"%j":try{return JSON.stringify(S[w++])}catch{return"[Circular]"}default:return H}}),A=S[w];w<I;A=S[++w])b(A)||!$(A)?z+=" "+A:z+=" "+u(A);return z},i.deprecate=function(_,x){if(M(o.process))return function(){return i.deprecate(_,x).apply(this,arguments)};if(s.noDeprecation===!0)return _;var w=!1;return function(){if(!w){if(s.throwDeprecation)throw new Error(x);s.traceDeprecation?console.trace(x):console.error(x),w=!0}return _.apply(this,arguments)}};var c,a={};function u(_,x){var w={seen:[],stylize:f};return arguments.length>=3&&(w.depth=arguments[2]),arguments.length>=4&&(w.colors=arguments[3]),y(x)?w.showHidden=x:x&&i._extend(w,x),M(w.showHidden)&&(w.showHidden=!1),M(w.depth)&&(w.depth=2),M(w.colors)&&(w.colors=!1),M(w.customInspect)&&(w.customInspect=!0),w.colors&&(w.stylize=d),h(w,_,w.depth)}function d(_,x){var w=u.styles[x];return w?"\x1B["+u.colors[w][0]+"m"+_+"\x1B["+u.colors[w][1]+"m":_}function f(_,x){return _}function h(_,x,w){if(_.customInspect&&x&&F(x.inspect)&&x.inspect!==i.inspect&&(!x.constructor||x.constructor.prototype!==x)){var S=x.inspect(w,_);return E(S)||(S=h(_,S,w)),S}var I=function(D,O){if(M(O))return D.stylize("undefined","undefined");if(E(O)){var G="'"+JSON.stringify(O).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return D.stylize(G,"string")}if(v(O))return D.stylize(""+O,"number");if(y(O))return D.stylize(""+O,"boolean");if(b(O))return D.stylize("null","null")}(_,x);if(I)return I;var z=Object.keys(x),A=function(D){var O={};return D.forEach(function(G,Z){O[G]=!0}),O}(z);if(_.showHidden&&(z=Object.getOwnPropertyNames(x)),j(x)&&(z.indexOf("message")>=0||z.indexOf("description")>=0))return m(x);if(z.length===0){if(F(x)){var H=x.name?": "+x.name:"";return _.stylize("[Function"+H+"]","special")}if(W(x))return _.stylize(RegExp.prototype.toString.call(x),"regexp");if(N(x))return _.stylize(Date.prototype.toString.call(x),"date");if(j(x))return m(x)}var K,J="",V=!1,X=["{","}"];return p(x)&&(V=!0,X=["[","]"]),F(x)&&(J=" [Function"+(x.name?": "+x.name:"")+"]"),W(x)&&(J=" "+RegExp.prototype.toString.call(x)),N(x)&&(J=" "+Date.prototype.toUTCString.call(x)),j(x)&&(J=" "+m(x)),z.length!==0||V&&x.length!=0?w<0?W(x)?_.stylize(RegExp.prototype.toString.call(x),"regexp"):_.stylize("[Object]","special"):(_.seen.push(x),K=V?function(D,O,G,Z,ue){for(var te=[],oe=0,re=O.length;oe<re;++oe)C(O,String(oe))?te.push(g(D,O,G,Z,String(oe),!0)):te.push("");return ue.forEach(function(be){be.match(/^\d+$/)||te.push(g(D,O,G,Z,be,!0))}),te}(_,x,w,A,z):z.map(function(D){return g(_,x,w,A,D,V)}),_.seen.pop(),function(D,O,G){return D.reduce(function(Z,ue){return ue.indexOf(`
`)>=0,Z+ue.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?G[0]+(O===""?"":O+`
 `)+" "+D.join(`,
  `)+" "+G[1]:G[0]+O+" "+D.join(", ")+" "+G[1]}(K,J,X)):X[0]+J+X[1]}function m(_){return"["+Error.prototype.toString.call(_)+"]"}function g(_,x,w,S,I,z){var A,H,K;if((K=Object.getOwnPropertyDescriptor(x,I)||{value:x[I]}).get?H=K.set?_.stylize("[Getter/Setter]","special"):_.stylize("[Getter]","special"):K.set&&(H=_.stylize("[Setter]","special")),C(S,I)||(A="["+I+"]"),H||(_.seen.indexOf(K.value)<0?(H=b(w)?h(_,K.value,null):h(_,K.value,w-1)).indexOf(`
`)>-1&&(H=z?H.split(`
`).map(function(J){return"  "+J}).join(`
`).substr(2):`
`+H.split(`
`).map(function(J){return"   "+J}).join(`
`)):H=_.stylize("[Circular]","special")),M(A)){if(z&&I.match(/^\d+$/))return H;(A=JSON.stringify(""+I)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(A=A.substr(1,A.length-2),A=_.stylize(A,"name")):(A=A.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),A=_.stylize(A,"string"))}return A+": "+H}function p(_){return Array.isArray(_)}function y(_){return typeof _=="boolean"}function b(_){return _===null}function v(_){return typeof _=="number"}function E(_){return typeof _=="string"}function M(_){return _===void 0}function W(_){return $(_)&&P(_)==="[object RegExp]"}function $(_){return typeof _=="object"&&_!==null}function N(_){return $(_)&&P(_)==="[object Date]"}function j(_){return $(_)&&(P(_)==="[object Error]"||_ instanceof Error)}function F(_){return typeof _=="function"}function P(_){return Object.prototype.toString.call(_)}function L(_){return _<10?"0"+_.toString(10):_.toString(10)}i.debuglog=function(_){if(M(c)&&(c=s.env.NODE_DEBUG||""),_=_.toUpperCase(),!a[_])if(new RegExp("\\b"+_+"\\b","i").test(c)){var x=s.pid;a[_]=function(){var w=i.format.apply(i,arguments);console.error("%s %d: %s",_,x,w)}}else a[_]=function(){};return a[_]},i.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},i.isArray=p,i.isBoolean=y,i.isNull=b,i.isNullOrUndefined=function(_){return _==null},i.isNumber=v,i.isString=E,i.isSymbol=function(_){return typeof _=="symbol"},i.isUndefined=M,i.isRegExp=W,i.isObject=$,i.isDate=N,i.isError=j,i.isFunction=F,i.isPrimitive=function(_){return _===null||typeof _=="boolean"||typeof _=="number"||typeof _=="string"||typeof _=="symbol"||_===void 0},i.isBuffer=t("./support/isBuffer");var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var _=new Date,x=[L(_.getHours()),L(_.getMinutes()),L(_.getSeconds())].join(":");return[_.getDate(),k[_.getMonth()],x].join(" ")}function C(_,x){return Object.prototype.hasOwnProperty.call(_,x)}i.log=function(){console.log("%s - %s",R(),i.format.apply(i,arguments))},i.inherits=t("inherits"),i._extend=function(_,x){if(!x||!$(x))return _;for(var w=Object.keys(x),S=w.length;S--;)_[w[S]]=x[w[S]];return _}}).call(this)}).call(this,t("_process"),typeof hn<"u"?hn:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"v1",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(i,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(i,"v4",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(i,"v5",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(i,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(i,"version",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(i,"validate",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(i,"stringify",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(i,"parse",{enumerable:!0,get:function(){return h.default}});var s=m(t("./v1.js")),o=m(t("./v3.js")),l=m(t("./v4.js")),c=m(t("./v5.js")),a=m(t("./nil.js")),u=m(t("./version.js")),d=m(t("./validate.js")),f=m(t("./stringify.js")),h=m(t("./parse.js"));function m(g){return g&&g.__esModule?g:{default:g}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(t,n,i){function s(h){return 14+(h+64>>>9<<4)+1}function o(h,m){const g=(65535&h)+(65535&m);return(h>>16)+(m>>16)+(g>>16)<<16|65535&g}function l(h,m,g,p,y,b){return o((v=o(o(m,h),o(p,b)))<<(E=y)|v>>>32-E,g);var v,E}function c(h,m,g,p,y,b,v){return l(m&g|~m&p,h,m,y,b,v)}function a(h,m,g,p,y,b,v){return l(m&p|g&~p,h,m,y,b,v)}function u(h,m,g,p,y,b,v){return l(m^g^p,h,m,y,b,v)}function d(h,m,g,p,y,b,v){return l(g^(m|~p),h,m,y,b,v)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var f=function(h){if(typeof h=="string"){const m=unescape(encodeURIComponent(h));h=new Uint8Array(m.length);for(let g=0;g<m.length;++g)h[g]=m.charCodeAt(g)}return function(m){const g=[],p=32*m.length;for(let y=0;y<p;y+=8){const b=m[y>>5]>>>y%32&255,v=parseInt("0123456789abcdef".charAt(b>>>4&15)+"0123456789abcdef".charAt(15&b),16);g.push(v)}return g}(function(m,g){m[g>>5]|=128<<g%32,m[s(g)-1]=g;let p=1732584193,y=-271733879,b=-1732584194,v=271733878;for(let E=0;E<m.length;E+=16){const M=p,W=y,$=b,N=v;p=c(p,y,b,v,m[E],7,-680876936),v=c(v,p,y,b,m[E+1],12,-389564586),b=c(b,v,p,y,m[E+2],17,606105819),y=c(y,b,v,p,m[E+3],22,-1044525330),p=c(p,y,b,v,m[E+4],7,-176418897),v=c(v,p,y,b,m[E+5],12,1200080426),b=c(b,v,p,y,m[E+6],17,-1473231341),y=c(y,b,v,p,m[E+7],22,-45705983),p=c(p,y,b,v,m[E+8],7,1770035416),v=c(v,p,y,b,m[E+9],12,-1958414417),b=c(b,v,p,y,m[E+10],17,-42063),y=c(y,b,v,p,m[E+11],22,-1990404162),p=c(p,y,b,v,m[E+12],7,1804603682),v=c(v,p,y,b,m[E+13],12,-40341101),b=c(b,v,p,y,m[E+14],17,-1502002290),y=c(y,b,v,p,m[E+15],22,1236535329),p=a(p,y,b,v,m[E+1],5,-165796510),v=a(v,p,y,b,m[E+6],9,-1069501632),b=a(b,v,p,y,m[E+11],14,643717713),y=a(y,b,v,p,m[E],20,-373897302),p=a(p,y,b,v,m[E+5],5,-701558691),v=a(v,p,y,b,m[E+10],9,38016083),b=a(b,v,p,y,m[E+15],14,-660478335),y=a(y,b,v,p,m[E+4],20,-405537848),p=a(p,y,b,v,m[E+9],5,568446438),v=a(v,p,y,b,m[E+14],9,-1019803690),b=a(b,v,p,y,m[E+3],14,-187363961),y=a(y,b,v,p,m[E+8],20,1163531501),p=a(p,y,b,v,m[E+13],5,-1444681467),v=a(v,p,y,b,m[E+2],9,-51403784),b=a(b,v,p,y,m[E+7],14,1735328473),y=a(y,b,v,p,m[E+12],20,-1926607734),p=u(p,y,b,v,m[E+5],4,-378558),v=u(v,p,y,b,m[E+8],11,-2022574463),b=u(b,v,p,y,m[E+11],16,1839030562),y=u(y,b,v,p,m[E+14],23,-35309556),p=u(p,y,b,v,m[E+1],4,-1530992060),v=u(v,p,y,b,m[E+4],11,1272893353),b=u(b,v,p,y,m[E+7],16,-155497632),y=u(y,b,v,p,m[E+10],23,-1094730640),p=u(p,y,b,v,m[E+13],4,681279174),v=u(v,p,y,b,m[E],11,-358537222),b=u(b,v,p,y,m[E+3],16,-722521979),y=u(y,b,v,p,m[E+6],23,76029189),p=u(p,y,b,v,m[E+9],4,-640364487),v=u(v,p,y,b,m[E+12],11,-421815835),b=u(b,v,p,y,m[E+15],16,530742520),y=u(y,b,v,p,m[E+2],23,-995338651),p=d(p,y,b,v,m[E],6,-198630844),v=d(v,p,y,b,m[E+7],10,1126891415),b=d(b,v,p,y,m[E+14],15,-1416354905),y=d(y,b,v,p,m[E+5],21,-57434055),p=d(p,y,b,v,m[E+12],6,1700485571),v=d(v,p,y,b,m[E+3],10,-1894986606),b=d(b,v,p,y,m[E+10],15,-1051523),y=d(y,b,v,p,m[E+1],21,-2054922799),p=d(p,y,b,v,m[E+8],6,1873313359),v=d(v,p,y,b,m[E+15],10,-30611744),b=d(b,v,p,y,m[E+6],15,-1560198380),y=d(y,b,v,p,m[E+13],21,1309151649),p=d(p,y,b,v,m[E+4],6,-145523070),v=d(v,p,y,b,m[E+11],10,-1120210379),b=d(b,v,p,y,m[E+2],15,718787259),y=d(y,b,v,p,m[E+9],21,-343485551),p=o(p,M),y=o(y,W),b=o(b,$),v=o(v,N)}return[p,y,b,v]}(function(m){if(m.length===0)return[];const g=8*m.length,p=new Uint32Array(s(g));for(let y=0;y<g;y+=8)p[y>>5]|=(255&m[y/8])<<y%32;return p}(h),8*h.length))};i.default=f},{}],530:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,o=(s=t("./validate.js"))&&s.__esModule?s:{default:s},l=function(c){if(!(0,o.default)(c))throw TypeError("Invalid UUID");let a;const u=new Uint8Array(16);return u[0]=(a=parseInt(c.slice(0,8),16))>>>24,u[1]=a>>>16&255,u[2]=a>>>8&255,u[3]=255&a,u[4]=(a=parseInt(c.slice(9,13),16))>>>8,u[5]=255&a,u[6]=(a=parseInt(c.slice(14,18),16))>>>8,u[7]=255&a,u[8]=(a=parseInt(c.slice(19,23),16))>>>8,u[9]=255&a,u[10]=(a=parseInt(c.slice(24,36),16))/1099511627776&255,u[11]=a/4294967296&255,u[12]=a>>>24&255,u[13]=a>>>16&255,u[14]=a>>>8&255,u[15]=255&a,u};i.default=l},{"./validate.js":541}],532:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(t,n,i){let s;Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){if(!s&&(s=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(o)};const o=new Uint8Array(16)},{}],534:[function(t,n,i){function s(c,a,u,d){switch(c){case 0:return a&u^~a&d;case 1:return a^u^d;case 2:return a&u^a&d^u&d;case 3:return a^u^d}}function o(c,a){return c<<a|c>>>32-a}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var l=function(c){const a=[1518500249,1859775393,2400959708,3395469782],u=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof c=="string"){const m=unescape(encodeURIComponent(c));c=[];for(let g=0;g<m.length;++g)c.push(m.charCodeAt(g))}else Array.isArray(c)||(c=Array.prototype.slice.call(c));c.push(128);const d=c.length/4+2,f=Math.ceil(d/16),h=new Array(f);for(let m=0;m<f;++m){const g=new Uint32Array(16);for(let p=0;p<16;++p)g[p]=c[64*m+4*p]<<24|c[64*m+4*p+1]<<16|c[64*m+4*p+2]<<8|c[64*m+4*p+3];h[m]=g}h[f-1][14]=8*(c.length-1)/Math.pow(2,32),h[f-1][14]=Math.floor(h[f-1][14]),h[f-1][15]=8*(c.length-1)&4294967295;for(let m=0;m<f;++m){const g=new Uint32Array(80);for(let M=0;M<16;++M)g[M]=h[m][M];for(let M=16;M<80;++M)g[M]=o(g[M-3]^g[M-8]^g[M-14]^g[M-16],1);let p=u[0],y=u[1],b=u[2],v=u[3],E=u[4];for(let M=0;M<80;++M){const W=Math.floor(M/20),$=o(p,5)+s(W,y,b,v)+E+a[W]+g[M]>>>0;E=v,v=b,b=o(y,30)>>>0,y=p,p=$}u[0]=u[0]+p>>>0,u[1]=u[1]+y>>>0,u[2]=u[2]+b>>>0,u[3]=u[3]+v>>>0,u[4]=u[4]+E>>>0}return[u[0]>>24&255,u[0]>>16&255,u[0]>>8&255,255&u[0],u[1]>>24&255,u[1]>>16&255,u[1]>>8&255,255&u[1],u[2]>>24&255,u[2]>>16&255,u[2]>>8&255,255&u[2],u[3]>>24&255,u[3]>>16&255,u[3]>>8&255,255&u[3],u[4]>>24&255,u[4]>>16&255,u[4]>>8&255,255&u[4]]};i.default=l},{}],535:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,o=(s=t("./validate.js"))&&s.__esModule?s:{default:s};const l=[];for(let a=0;a<256;++a)l.push((a+256).toString(16).substr(1));var c=function(a){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const d=(l[a[u+0]]+l[a[u+1]]+l[a[u+2]]+l[a[u+3]]+"-"+l[a[u+4]]+l[a[u+5]]+"-"+l[a[u+6]]+l[a[u+7]]+"-"+l[a[u+8]]+l[a[u+9]]+"-"+l[a[u+10]]+l[a[u+11]]+l[a[u+12]]+l[a[u+13]]+l[a[u+14]]+l[a[u+15]]).toLowerCase();if(!(0,o.default)(d))throw TypeError("Stringified UUID is invalid");return d};i.default=c},{"./validate.js":541}],536:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=l(t("./rng.js")),o=l(t("./stringify.js"));function l(h){return h&&h.__esModule?h:{default:h}}let c,a,u=0,d=0;var f=function(h,m,g){let p=m&&g||0;const y=m||new Array(16);let b=(h=h||{}).node||c,v=h.clockseq!==void 0?h.clockseq:a;if(b==null||v==null){const j=h.random||(h.rng||s.default)();b==null&&(b=c=[1|j[0],j[1],j[2],j[3],j[4],j[5]]),v==null&&(v=a=16383&(j[6]<<8|j[7]))}let E=h.msecs!==void 0?h.msecs:Date.now(),M=h.nsecs!==void 0?h.nsecs:d+1;const W=E-u+(M-d)/1e4;if(W<0&&h.clockseq===void 0&&(v=v+1&16383),(W<0||E>u)&&h.nsecs===void 0&&(M=0),M>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=E,d=M,a=v,E+=122192928e5;const $=(1e4*(268435455&E)+M)%4294967296;y[p++]=$>>>24&255,y[p++]=$>>>16&255,y[p++]=$>>>8&255,y[p++]=255&$;const N=E/4294967296*1e4&268435455;y[p++]=N>>>8&255,y[p++]=255&N,y[p++]=N>>>24&15|16,y[p++]=N>>>16&255,y[p++]=v>>>8|128,y[p++]=255&v;for(let j=0;j<6;++j)y[p+j]=b[j];return m||(0,o.default)(y)};i.default=f},{"./rng.js":533,"./stringify.js":535}],537:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=l(t("./v35.js")),o=l(t("./md5.js"));function l(a){return a&&a.__esModule?a:{default:a}}var c=(0,s.default)("v3",48,o.default);i.default=c},{"./md5.js":529,"./v35.js":538}],538:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(u,d,f){function h(m,g,p,y){if(typeof m=="string"&&(m=function(v){v=unescape(encodeURIComponent(v));const E=[];for(let M=0;M<v.length;++M)E.push(v.charCodeAt(M));return E}(m)),typeof g=="string"&&(g=(0,o.default)(g)),g.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let b=new Uint8Array(16+m.length);if(b.set(g),b.set(m,g.length),b=f(b),b[6]=15&b[6]|d,b[8]=63&b[8]|128,p){y=y||0;for(let v=0;v<16;++v)p[y+v]=b[v];return p}return(0,s.default)(b)}try{h.name=u}catch{}return h.DNS=c,h.URL=a,h},i.URL=i.DNS=void 0;var s=l(t("./stringify.js")),o=l(t("./parse.js"));function l(u){return u&&u.__esModule?u:{default:u}}const c="6ba7b810-9dad-11d1-80b4-00c04fd430c8";i.DNS=c;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";i.URL=a},{"./parse.js":531,"./stringify.js":535}],539:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=l(t("./rng.js")),o=l(t("./stringify.js"));function l(a){return a&&a.__esModule?a:{default:a}}var c=function(a,u,d){const f=(a=a||{}).random||(a.rng||s.default)();if(f[6]=15&f[6]|64,f[8]=63&f[8]|128,u){d=d||0;for(let h=0;h<16;++h)u[d+h]=f[h];return u}return(0,o.default)(f)};i.default=c},{"./rng.js":533,"./stringify.js":535}],540:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=l(t("./v35.js")),o=l(t("./sha1.js"));function l(a){return a&&a.__esModule?a:{default:a}}var c=(0,s.default)("v5",80,o.default);i.default=c},{"./sha1.js":534,"./v35.js":538}],541:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,o=(s=t("./regex.js"))&&s.__esModule?s:{default:s},l=function(c){return typeof c=="string"&&o.default.test(c)};i.default=l},{"./regex.js":532}],542:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,o=(s=t("./validate.js"))&&s.__esModule?s:{default:s},l=function(c){if(!(0,o.default)(c))throw TypeError("Invalid UUID");return parseInt(c.substr(14,1),16)};i.default=l},{"./validate.js":541}],543:[function(t,n,i){/**
* Character classes and associated utilities for the 5th edition of XML 1.0.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(i,"__esModule",{value:!0}),i.CHAR=`	
\r ---`,i.S=` 	\r
`,i.NAME_START_CHAR=":A-Z_a-z-----------",i.NAME_CHAR="-"+i.NAME_START_CHAR+".0-9--",i.CHAR_RE=new RegExp("^["+i.CHAR+"]$","u"),i.S_RE=new RegExp("^["+i.S+"]+$","u"),i.NAME_START_CHAR_RE=new RegExp("^["+i.NAME_START_CHAR+"]$","u"),i.NAME_CHAR_RE=new RegExp("^["+i.NAME_CHAR+"]$","u"),i.NAME_RE=new RegExp("^["+i.NAME_START_CHAR+"]["+i.NAME_CHAR+"]*$","u"),i.NMTOKEN_RE=new RegExp("^["+i.NAME_CHAR+"]+$","u");function s(o){return o>=65&&o<=90||o>=97&&o<=122||o===58||o===95||o===8204||o===8205||o>=192&&o<=214||o>=216&&o<=246||o>=248&&o<=767||o>=880&&o<=893||o>=895&&o<=8191||o>=8304&&o<=8591||o>=11264&&o<=12271||o>=12289&&o<=55295||o>=63744&&o<=64975||o>=65008&&o<=65533||o>=65536&&o<=983039}i.S_LIST=[32,10,13,9],i.isChar=function(o){return o>=32&&o<=55295||o===10||o===13||o===9||o>=57344&&o<=65533||o>=65536&&o<=1114111},i.isS=function(o){return o===32||o===10||o===13||o===9},i.isNameStartChar=s,i.isNameChar=function(o){return s(o)||o>=48&&o<=57||o===45||o===46||o===183||o>=768&&o<=879||o>=8255&&o<=8256}},{}],544:[function(t,n,i){/**
* Character classes and associated utilities for the 2nd edition of XML 1.1.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(i,"__esModule",{value:!0}),i.CHAR="---",i.RESTRICTED_CHAR="-\b\v\f---",i.S=` 	\r
`,i.NAME_START_CHAR=":A-Z_a-z-----------",i.NAME_CHAR="-"+i.NAME_START_CHAR+".0-9--",i.CHAR_RE=new RegExp("^["+i.CHAR+"]$","u"),i.RESTRICTED_CHAR_RE=new RegExp("^["+i.RESTRICTED_CHAR+"]$","u"),i.S_RE=new RegExp("^["+i.S+"]+$","u"),i.NAME_START_CHAR_RE=new RegExp("^["+i.NAME_START_CHAR+"]$","u"),i.NAME_CHAR_RE=new RegExp("^["+i.NAME_CHAR+"]$","u"),i.NAME_RE=new RegExp("^["+i.NAME_START_CHAR+"]["+i.NAME_CHAR+"]*$","u"),i.NMTOKEN_RE=new RegExp("^["+i.NAME_CHAR+"]+$","u");function s(o){return o>=65&&o<=90||o>=97&&o<=122||o===58||o===95||o===8204||o===8205||o>=192&&o<=214||o>=216&&o<=246||o>=248&&o<=767||o>=880&&o<=893||o>=895&&o<=8191||o>=8304&&o<=8591||o>=11264&&o<=12271||o>=12289&&o<=55295||o>=63744&&o<=64975||o>=65008&&o<=65533||o>=65536&&o<=983039}i.S_LIST=[32,10,13,9],i.isChar=function(o){return o>=1&&o<=55295||o>=57344&&o<=65533||o>=65536&&o<=1114111},i.isRestrictedChar=function(o){return o>=1&&o<=8||o===11||o===12||o>=14&&o<=31||o>=127&&o<=132||o>=134&&o<=159},i.isCharAndNotRestricted=function(o){return o===9||o===10||o===13||o>31&&o<127||o===133||o>159&&o<=55295||o>=57344&&o<=65533||o>=65536&&o<=1114111},i.isS=function(o){return o===32||o===10||o===13||o===9},i.isNameStartChar=s,i.isNameChar=function(o){return s(o)||o>=48&&o<=57||o===45||o===46||o===183||o>=768&&o<=879||o>=8255&&o<=8256}},{}],545:[function(t,n,i){/**
* Character class utilities for XML NS 1.0 edition 3.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/function s(o){return o>=65&&o<=90||o===95||o>=97&&o<=122||o>=192&&o<=214||o>=216&&o<=246||o>=248&&o<=767||o>=880&&o<=893||o>=895&&o<=8191||o>=8204&&o<=8205||o>=8304&&o<=8591||o>=11264&&o<=12271||o>=12289&&o<=55295||o>=63744&&o<=64975||o>=65008&&o<=65533||o>=65536&&o<=983039}Object.defineProperty(i,"__esModule",{value:!0}),i.NC_NAME_START_CHAR="A-Z_a-z------------",i.NC_NAME_CHAR="-"+i.NC_NAME_START_CHAR+".0-9--",i.NC_NAME_START_CHAR_RE=new RegExp("^["+i.NC_NAME_START_CHAR+"]$","u"),i.NC_NAME_CHAR_RE=new RegExp("^["+i.NC_NAME_CHAR+"]$","u"),i.NC_NAME_RE=new RegExp("^["+i.NC_NAME_START_CHAR+"]["+i.NC_NAME_CHAR+"]*$","u"),i.isNCNameStartChar=s,i.isNCNameChar=function(o){return s(o)||o===45||o===46||o>=48&&o<=57||o===183||o>=768&&o<=879||o>=8255&&o<=8256}},{}]},{},[15])(15)})})(wC);var $W=wC.exports;const WW=N6($W);var _C={exports:{}};(function(r,e){(function(t,n){n()})(hn,function(){function t(a,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function n(a,u,d){var f=new XMLHttpRequest;f.open("GET",a),f.responseType="blob",f.onload=function(){c(f.response,u,d)},f.onerror=function(){console.error("could not download file")},f.send()}function i(a){var u=new XMLHttpRequest;u.open("HEAD",a,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function s(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof hn=="object"&&hn.global===hn?hn:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(a,u,d){var f=o.URL||o.webkitURL,h=document.createElement("a");u=u||a.name||"download",h.download=u,h.rel="noopener",typeof a=="string"?(h.href=a,h.origin===location.origin?s(h):i(h.href)?n(a,u,d):s(h,h.target="_blank")):(h.href=f.createObjectURL(a),setTimeout(function(){f.revokeObjectURL(h.href)},4e4),setTimeout(function(){s(h)},0))}:"msSaveOrOpenBlob"in navigator?function(a,u,d){if(u=u||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(t(a,d),u);else if(i(a))n(a,u,d);else{var f=document.createElement("a");f.href=a,f.target="_blank",setTimeout(function(){s(f)})}}:function(a,u,d,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof a=="string")return n(a,u,d);var h=a.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||h&&m||l)&&typeof FileReader<"u"){var p=new FileReader;p.onloadend=function(){var v=p.result;v=g?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=v:location=v,f=null},p.readAsDataURL(a)}else{var y=o.URL||o.webkitURL,b=y.createObjectURL(a);f?f.location=b:location.href=b,f=null,setTimeout(function(){y.revokeObjectURL(b)},4e4)}});o.saveAs=c.saveAs=c,r.exports=c})})(_C);var qW=_C.exports;const en=["Monday","Tuesday","Wednesday","Thursday","Friday"],$i=["P1 (2:303:15)","P2 (3:154:00)","P3 (4:004:45)","Break","P4 (5:105:55)","P5 (5:556:40)","LUNCH","P6 (7:358:20)","P7 (8:209:05)"],ma="__FREE__",Wa="Free Period",G0=r=>{if(r===void 0||r===null)return null;if(typeof r!="object")return r;if(Array.isArray(r))return r.map(G0);const e={};return Object.entries(r).forEach(([t,n])=>{e[t]=G0(n)}),e};function HW(){const r=JSON.parse(localStorage.getItem("admin"))||{},e=`${Io}/api`,[t,n]=me.useState([]),[i,s]=me.useState({}),[o,l]=me.useState({}),[c,a]=me.useState({}),[u,d]=me.useState({}),f=me.useRef({}),[h,m]=me.useState({}),[g,p]=me.useState({}),[y,b]=me.useState([]),[v,E]=me.useState(!1),[M,W]=me.useState(!1),[$,N]=me.useState({}),[j,F]=me.useState(""),[P,L]=me.useState(""),[k,R]=me.useState(!0),[C,_]=me.useState([]),[x,w]=me.useState(null),[S,I]=me.useState(null),[z,A]=me.useState(null),[H,K]=me.useState(null),[J,V]=me.useState(null),[X,D]=me.useState({}),[O,G]=me.useState([]),[Z,ue]=me.useState({}),[te,oe]=me.useState([]),[re,be]=me.useState(!1),[ie,le]=me.useState(null),[ae,Se]=me.useState(!1),ve=Bs(),[ke,Ne]=me.useState([]),[ze,we]=me.useState(!1),[De,He]=me.useState(null),We=r.userId,et=r.userId,St=async()=>{if(We)try{const Le=await qe.get(`${e}/get_post_notifications/${We}`);let Fe=Array.isArray(Le.data)?Le.data:Object.values(Le.data||{});if(Fe.length===0){Ne([]);return}const[Ke,pe]=await Promise.all([qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json"),qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/School_Admins.json")]),Te=Ke.data||{},Ze=pe.data||{},ut=Ce=>{const Ve=Ze[Ce];return Ve?Object.values(Te).find(Be=>Be.userId===Ve.userId):null},he=Fe.map(Ce=>{const Ve=ut(Ce.adminId);return{...Ce,notificationId:Ce.notificationId||Ce.id||`${Ce.postId}_${Ce.adminId}`,adminName:(Ve==null?void 0:Ve.name)||"Unknown Admin",adminProfile:(Ve==null?void 0:Ve.profileImage)||"/default-profile.png"}});Ne(he)}catch(Le){console.error("Post notification fetch failed",Le),Ne([])}};me.useEffect(()=>{if(!We)return;St();const Le=setInterval(St,5e3);return()=>clearInterval(Le)},[We]);const lt=async Le=>{try{await qe.post(`${e}/mark_post_notification_read`,{notificationId:Le.notificationId,adminId:r.userId})}catch(Fe){console.warn("Failed to delete notification:",Fe)}Ne(Fe=>Fe.filter(Ke=>Ke.notificationId!==Le.notificationId)),we(!1),ve("/dashboard",{state:{postId:Le.postId}})};me.useEffect(()=>{var Le;(Le=location.state)!=null&&Le.postId&&Ne([])},[]),me.useEffect(()=>{const Le=Fe=>{!Fe.target.closest(".icon-circle")&&!Fe.target.closest(".notification-dropdown")&&we(!1)};return document.addEventListener("click",Le),()=>document.removeEventListener("click",Le)},[]);const At=async()=>{try{const Le=await Ps(dn(Mn,"Users")),Fe=Le.exists()?Le.val():{},Ke=await Ps(dn(Mn,"Teachers")),pe=Ke.exists()?Ke.val():{},Te={};Object.entries(pe).forEach(([pt,de])=>{Fe[de.userId]&&(Te[pt]=Fe[de.userId].name)});const Ze=await Ps(dn(Mn,"Courses")),ut=Ze.exists()?Ze.val():{},he=Object.entries(ut).map(([pt,de])=>({id:pt,...de})),Ce={};he.forEach(pt=>{Ce[pt.grade]||(Ce[pt.grade]=new Set),Ce[pt.grade].add(pt.section)});const Ve=await Ps(dn(Mn,"TeacherAssignments")),Be=Ve.exists()?Ve.val():{},st={};Be&&typeof Be=="object"&&Object.values(Be).forEach(pt=>{st[pt.courseId]=pt.teacherId});const Ge=await Ps(dn(Mn,"Schedules"));Ge.exists()&&d(Ge.val()),n(he),s(Ce),l(Te),a(st),R(!1)}catch(Le){console.error("Fetch error:",Le),R(!1)}};me.useEffect(()=>{const Le=dn(Mn,"Schedules"),Fe=el(Le,Ke=>{const pe=Ke.exists()?Ke.val():{};f.current=pe,d(pe)});return()=>Fe()},[]),me.useEffect(()=>{(async()=>{const Ke=await(await fetch("/api/unreadSenders")).json();D(Ke)})()},[]),me.useEffect(()=>{(async()=>{try{const[Fe,Ke]=await Promise.all([qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json"),qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json")]),pe=Fe.data||{},Te=Ke.data||{},Ze=Object.keys(pe).map(Ce=>{const Ve=pe[Ce],Be=Te[Ve.userId]||{};return{teacherId:Ce,userId:Ve.userId,name:Be.name||"No Name",profileImage:Be.profileImage||"/default-profile.png"}});G(Ze);const ut={},he=[];for(const Ce of Ze){const Ve=`${et}_${Ce.userId}`,Be=await qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ve}/messages.json`),st=Object.values(Be.data||{}).map(pt=>({...pt,sender:pt.senderId===et?"admin":"teacher"}));he.push(...st);const Ge=st.filter(pt=>pt.receiverId===et&&!pt.seen).length;Ge>0&&(ut[Ce.userId]=Ge)}oe(he),ue(ut)}catch(Fe){console.error(Fe)}})()},[et]),me.useEffect(()=>{At()},[]),me.useEffect(()=>{f.current=u||{}},[u]);const ct=j&&P?`Grade ${j}${P}`:null,at=Le=>(Le||"").toString().trim().toLowerCase().replace(/\s+/g," "),wt=Le=>{const Fe=new Set,Ke=[];for(const pe of Le||[]){const Te=at(pe==null?void 0:pe.classKey);!Te||Fe.has(Te)||(Fe.add(Te),Ke.push(pe))}return Ke},ot=wt(y),nt=Le=>{b(Fe=>wt((Fe||[]).filter(Ke=>(Ke==null?void 0:Ke.classKey)!==Le))),N(Fe=>{if(!Fe)return{};const Ke={...Fe};return delete Ke[Le],Ke})},zt=()=>{if(!j||!P){alert("Select grade & section first");return}const Le=String(j).trim(),Fe=String(P).trim().toUpperCase(),Ke=`Grade ${Le}${Fe}`;b(pe=>{const Te=[...pe||[],{grade:Le,section:Fe,classKey:Ke}];return wt(Te)}),N(pe=>({...pe,[Ke]:!0}))},Lt=t.filter(Le=>Le.grade===j&&Le.section===P),Ct=Le=>(Le||"").toString().trim().toLowerCase().replace(/\s+/g," ");(()=>{const Le={};return(t||[]).forEach(Fe=>{if(!(Fe!=null&&Fe.grade)||!(Fe!=null&&Fe.subject))return;const Ke=String(Fe.grade);Le[Ke]??(Le[Ke]=new Set),Le[Ke].add(Ct(Fe.subject))}),Le})();const jt=async()=>{if(!r.userId)return;const Le={};try{const Ke=(await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json")).data||{},pe=ut=>Object.values(Ke).find(he=>he.userId===ut),Te=async ut=>{const he=`${r.userId}_${ut}`,Ce=`${ut}_${r.userId}`,[Ve,Be]=await Promise.all([qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${he}/messages.json`),qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ce}/messages.json`)]);return[...Object.values(Ve.data||{}),...Object.values(Be.data||{})].filter(Ge=>Ge.receiverId===r.userId&&!Ge.seen).length},Ze=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json");for(const ut in Ze.data||{}){const he=Ze.data[ut];if(!(he!=null&&he.userId))continue;const Ce=await Te(he.userId);if(Ce<=0)continue;const Ve=pe(he.userId);Le[he.userId]={type:"teacher",name:(Ve==null?void 0:Ve.name)||he.name||"Teacher",profileImage:(Ve==null?void 0:Ve.profileImage)||he.profileImage||"/default-profile.png",count:Ce}}D(Le)}catch(Fe){console.error("Unread fetch failed:",Fe)}};me.useEffect(()=>{const Le=Fe=>{!Fe.target.closest(".icon-circle")&&!Fe.target.closest(".messenger-dropdown")&&be(!1)};return document.addEventListener("click",Le),()=>document.removeEventListener("click",Le)},[]),me.useEffect(()=>{if(!r.userId)return;jt();const Le=setInterval(jt,5e3);return()=>clearInterval(Le)},[r.userId]);const Mt=(Le={})=>{var sr,rr,ur,hr,Mr,Yr,Br,si,Zr,an,Ln,Wr,qr,ki,_t,Et;const Fe=Le.classKey??ct,Ke=Le.interactive??!0,pe=!!Le.returnData,Te=Le.classCourses??Lt,Ze=Le.rawFreq??((h==null?void 0:h[Fe])||{}),ut=Le.baseSchedule??(f.current||u||{});if(!Fe){alert("Select grade & section first");return}const he=$i.filter(Qe=>Qe!=="LUNCH"&&Qe!=="Break"),Ce=en.length*he.length,Ve=200,Be={},st={},Ge={};Te.forEach(Qe=>{const Ae=Number((Ze==null?void 0:Ze[Qe.id])??0);Ge[Qe.id]=Number.isFinite(Ae)?Math.max(0,Ae):0,st[(Qe.subject||"").trim().toLowerCase()]=Qe.id,Be[Qe.id]=1});const pt=Object.values(Ge).reduce((Qe,Ae)=>Qe+(Number(Ae)||0),0);if(pt<=0){Ke&&alert(`Set weekly subject counts first. Total must be ${Ce} periods/week for ${Fe}.`);return}let de=0;if(pt!==Ce){const Qe=pt-Ce,Ae=Qe>0?`Weekly subject total is ${pt}, but this timetable has ${Ce} teachable periods/week.

Click OK to auto-reduce counts by ${Qe} (you can still edit later), or Cancel to adjust manually.`:`Weekly subject total is ${pt}, but this timetable has ${Ce} teachable periods/week.

Click OK to auto-fill the remaining ${Math.abs(Qe)} periods as "${Wa}", or Cancel to adjust manually.`;if(Ke&&!window.confirm(Ae))return;if(Qe>0){let Ee=Qe;const gt=Object.keys(Ge).sort(($t,dt)=>(Ge[dt]||0)-(Ge[$t]||0));for(;Ee>0;){let $t=!1;for(const dt of gt){if(Ee<=0)break;(Ge[dt]||0)>0&&(Ge[dt]--,Ee--,$t=!0)}if(!$t)break}Ke&&m($t=>({...$t,[Fe]:{...Ge}}))}else de=Math.abs(Qe)}const Me=[];if(Te.forEach(Qe=>{const Ae=Ge[Qe.id]||0;if(Ae<=0)return;const Ee=en.length;Ae>Ee&&Me.push({id:Qe.id,subject:Qe.subject,weekly:Ae,maxWeekly:Ee})}),Me.length){const Qe=Me.map(Ee=>`- ${Ee.subject}: ${Ee.weekly} (max ${Ee.maxWeekly} with current per-day rule)`).join(`
`);if(Ke&&!window.confirm(`Some weekly subject counts are impossible with the rule of max 1 per day.

${Qe}

Click OK to auto-reduce them to the maximum allowed and fill the removed periods with "${Wa}".
Cancel to adjust counts manually.`))return;let Ae=0;Me.forEach(Ee=>{Ae+=Math.max(0,(Ge[Ee.id]||0)-Ee.maxWeekly),Ge[Ee.id]=Ee.maxWeekly}),Ae>0&&(de+=Ae,Ke&&m(Ee=>({...Ee,[Fe]:{...Ge}})))}const Oe=Qe=>(Qe||"").trim().toLowerCase(),it=Qe=>{const Ae=Number((Be==null?void 0:Be[Qe])??1);return Number.isFinite(Ae)&&Ae>0?Ae:1},vt=Qe=>{const Ae=Oe(Qe);if(!Ae)return 1;if(Ae===Oe(Wa))return Number.POSITIVE_INFINITY;const Ee=st==null?void 0:st[Ae];return it(Ee)},It=(Qe,Ae,Ee,gt)=>{var Tt,er;const $t=Oe(gt);let dt=0;for(const Ur of he){const pn=(er=(Tt=Qe==null?void 0:Qe[Ae])==null?void 0:Tt[Ee])==null?void 0:er[Ur];Oe(pn==null?void 0:pn.subject)===$t&&dt++}return dt},kt=(Qe,Ae,Ee)=>It(Qe,Ae,Fe,Ee),ir=(Qe,Ae,Ee,gt)=>{var dt;if(!gt)return null;const $t=(Qe==null?void 0:Qe[Ae])||{};for(const Tt of Object.keys($t)){const er=(dt=$t==null?void 0:$t[Tt])==null?void 0:dt[Ee];if((er==null?void 0:er.teacherId)===gt)return Tt}return null},Zt=(Qe,Ae,Ee,gt,$t)=>{var er,Ur,pn,Dt,kr,fr,tr,Vr,Cr,or;const dt=ir(Qe,Ee,gt,$t);if(!dt)return!1;const Tt=(Ur=(er=Qe==null?void 0:Qe[Ee])==null?void 0:er[dt])==null?void 0:Ur[gt];if(!(Tt!=null&&Tt.teacherId))return!1;for(const Xr of he){if(Xr===gt)continue;const _r=(Dt=(pn=Qe==null?void 0:Qe[Ee])==null?void 0:pn[dt])==null?void 0:Dt[Xr];if(!(_r!=null&&_r.subject)||(fr=(kr=Ae==null?void 0:Ae[Ee])==null?void 0:kr[Xr])!=null&&fr[$t])continue;const _n=_r==null?void 0:_r.teacherId;if(!(_n&&((Vr=(tr=Ae==null?void 0:Ae[Ee])==null?void 0:tr[gt])!=null&&Vr[_n])))return Qe[Ee][dt][gt]=_r,Qe[Ee][dt][Xr]=Tt,Ae[Ee]??(Ae[Ee]={}),(Cr=Ae[Ee])[gt]??(Cr[gt]={}),(or=Ae[Ee])[Xr]??(or[Xr]={}),$t&&delete Ae[Ee][gt][$t],_n&&delete Ae[Ee][Xr][_n],_n&&(Ae[Ee][gt][_n]=!0),$t&&(Ae[Ee][Xr][$t]=!0),!0}return!1},qt=(Qe,Ae,Ee,gt,$t)=>{var er,Ur,pn,Dt,kr,fr,tr,Vr;const dt=ir(Qe,Ee,gt,$t);if(!dt)return!1;const Tt=(Ur=(er=Qe==null?void 0:Qe[Ee])==null?void 0:er[dt])==null?void 0:Ur[gt];if(!(Tt!=null&&Tt.teacherId))return!1;for(const Cr of en){if(Cr===Ee||(Dt=(pn=Ae==null?void 0:Ae[Cr])==null?void 0:pn[gt])!=null&&Dt[$t])continue;const or=(fr=(kr=Qe==null?void 0:Qe[Cr])==null?void 0:kr[dt])==null?void 0:fr[gt];if(!(!(or!=null&&or.subject)||!(Oe(or.subject)===Oe(Wa)))&&!(It(Qe,Cr,dt,Tt.subject)>=1))return Qe[Cr][dt][gt]=Tt,Qe[Ee][dt][gt]=or,Ae[Ee]??(Ae[Ee]={}),(tr=Ae[Ee])[gt]??(tr[gt]={}),Ae[Cr]??(Ae[Cr]={}),(Vr=Ae[Cr])[gt]??(Vr[gt]={}),delete Ae[Ee][gt][$t],Ae[Cr][gt][$t]=!0,!0}return!1},Ut=(Qe,Ae,Ee)=>{Te.forEach(gt=>{const $t=Ee[gt.id];if(!$t)return;const dt=kt(Qe,Ae,gt.subject);$t.usedByDay[Ae]=dt,$t.extraUsedByDay[Ae]=dt>0})};for(let Qe=1;Qe<=Ve;Qe++)try{const Ae=structuredClone(ut||{});en.forEach(Dt=>{Ae[Dt]??(Ae[Dt]={}),Ae[Dt][Fe]={}});const Ee={},gt={};if(en.forEach(Dt=>{Ae[Dt]||(Ae[Dt]={}),Ee[Dt]??(Ee[Dt]={}),Object.keys(i).forEach(kr=>{[...i[kr]].forEach(fr=>{const tr=`Grade ${kr}${fr}`;Ae[Dt][tr]||(Ae[Dt][tr]={})})})}),en.forEach(Dt=>{$i.forEach(kr=>{kr!=="LUNCH"&&Object.keys(i).forEach(fr=>{[...i[fr]].forEach(tr=>{var or,Xr;const Vr=`Grade ${fr}${tr}`,Cr=(or=Ae[Dt][Vr])==null?void 0:or[kr];Cr!=null&&Cr.teacherId&&((Xr=Ee[Dt])[kr]??(Xr[kr]={}),Ee[Dt][kr][Cr.teacherId]=!0)})})})}),Qe===1){const Dt={},kr={};Object.keys(o||{}).forEach(Vr=>{let Cr=0;en.forEach(or=>{he.some(_r=>{var _n,Gt;return!((Gt=(_n=Ee==null?void 0:Ee[or])==null?void 0:_n[_r])!=null&&Gt[Vr])})&&(Cr+=1)}),kr[Vr]=Cr}),en.forEach(Vr=>{he.forEach(Cr=>{var Xr;const or=(Xr=Ee==null?void 0:Ee[Vr])==null?void 0:Xr[Cr];or&&Object.keys(or).forEach(_r=>{Dt[_r]=(Dt[_r]||0)+1})})});const fr=[],tr=[];if(Te.forEach(Vr=>{const Cr=c[Vr.id],or=Ge[Vr.id]||0;if(!Cr||or<=0)return;const Xr=Ce-(Dt[Cr]||0);or>Xr&&fr.push({subject:Vr.subject,teacher:o[Cr]||Cr,need:or,free:Xr});const _r=Number((kr==null?void 0:kr[Cr])||0);or>_r&&tr.push({subject:Vr.subject,teacher:o[Cr]||Cr,need:or,daysFree:_r})}),fr.length){const Vr=fr.slice(0,8).map(Cr=>`- ${Cr.subject} (${Cr.teacher}): needs ${Cr.need}, but only ${Cr.free} free slots`).join(`
`);alert(`Warning: some teacher assignments appear impossible with other classes already scheduled.

${Vr}

Fix by changing teacher assignments, clearing other classes' schedules, or reducing weekly counts for those subjects.`)}if(tr.length){const Vr=tr.slice(0,8).map(Cr=>`- ${Cr.subject} (${Cr.teacher}): needs ${Cr.need} days, but teacher is only free on ${Cr.daysFree} days`).join(`
`);alert(`Note: the strict rule "max 1 per subject per day" cannot fit some weekly counts due to teacher weekday availability.

${Vr}

To keep max-1/day strictly, change teacher assignments, clear other classes' schedules, or lower weekly counts.`)}}const $t=[...Te];de>0&&$t.push({id:ma,subject:Wa});const dt=[...$t].sort(()=>Math.random()-.5),Tt={...Ge};de>0&&(Tt[ma]=de);const er={};Te.forEach(Dt=>{const kr=Number((Ge==null?void 0:Ge[Dt.id])||0);if(!kr)return;const fr=!0;let tr=0,Vr=kr;er[Dt.id]={basePerDay:tr,extraRemaining:Vr,extraUsedByDay:Object.fromEntries(en.map(Cr=>[Cr,!1])),usedByDay:Object.fromEntries(en.map(Cr=>[Cr,0])),strictOnePerDay:fr}});const Ur=Number((Tt==null?void 0:Tt[ma])||0);if(Ur>0){const Dt=Object.fromEntries(en.map(fr=>[fr,0]));for(let fr=0;fr<Ur;fr++){const tr=en[fr%en.length];Dt[tr]+=1}let kr=0;en.forEach(fr=>{const tr=Math.min(he.length,Number(Dt[fr]||0));if(tr<=0)return;const Vr=he.map((Gt,Tn)=>Tn),Cr=Vr.filter(Gt=>Gt%2===0).sort(()=>Math.random()-.5),or=Vr.filter(Gt=>Gt%2===1).sort(()=>Math.random()-.5);(Math.random()<.5?[...Cr,...or]:[...or,...Cr]).slice(0,tr).map(Gt=>he[Gt]).forEach(Gt=>{Ae[fr][Fe][Gt]={subject:Wa,teacherId:null,teacherName:"Unassigned"},kr++})}),Tt[ma]=Math.max(0,Ur-kr)}for(let Dt of en){let kr=null;for(let fr of he){const tr=(rr=(sr=Ae==null?void 0:Ae[Dt])==null?void 0:sr[Fe])==null?void 0:rr[fr];if(tr!=null&&tr.subject){kr=Oe(tr.subject);continue}let Vr=!1;const Cr=[...dt].sort((_n,Gt)=>{var Hr,Yt;const Tn=Tt[_n.id]||0,di=Tt[Gt.id]||0;if(di!==Tn)return di-Tn;const $n=er[_n.id],oi=er[Gt.id],ai=$n?Math.max(0,$n.basePerDay+($n.extraUsedByDay[Dt]||$n.extraRemaining>0?1:0)-($n.usedByDay[Dt]||0)):0,ss=oi?Math.max(0,oi.basePerDay+(oi.extraUsedByDay[Dt]||oi.extraRemaining>0?1:0)-(oi.usedByDay[Dt]||0)):0;if(ss!==ai)return ss-ai;const li=$n&&((Hr=$n.usedByDay)==null?void 0:Hr[Dt])||0,Nr=oi&&((Yt=oi.usedByDay)==null?void 0:Yt[Dt])||0;return li!==Nr?li-Nr:Math.random()-.5}),or={noRemainingCount:0,sameAsLastSubject:0,teacherConflict:0,consecutiveTeacher:0,subjectMaxPerDay:0,other:0},Xr=new Set,_r=(_n,Gt,Tn)=>{var di,$n,oi,ai,ss,li,Nr,Hr,Yt;for(let dr of Cr){const Or=c[dr.id],fn=dr.id===ma;if((Tt[dr.id]||0)<=0){or.noRemainingCount++;continue}if(Oe(dr.subject)===kr&&(!fn||!_n)){or.sameAsLastSubject++;continue}if(!fn){const Dr=it(dr.id);if(kt(Ae,Dt,dr.subject)>=Dr){or.subjectMaxPerDay++;continue}const ln=er[dr.id];if(ln){if(Number(((di=ln.usedByDay)==null?void 0:di[Dt])||0)>=1){or.subjectMaxPerDay++;continue}const pi=Number((($n=ln.usedByDay)==null?void 0:$n[Dt])||0),ji=Number(ln.basePerDay||0),qn=!!((oi=ln.extraUsedByDay)!=null&&oi[Dt]),mi=ji<=0?!0:en.every(Ri=>{var Hn;return Number(((Hn=ln.usedByDay)==null?void 0:Hn[Ri])||0)>=ji});if(!(pi<ji))if(pi===ji){if(qn||(ln.extraRemaining||0)<=0){or.subjectMaxPerDay++;continue}if(!Gt&&!mi){or.subjectMaxPerDay++;continue}}else{or.subjectMaxPerDay++;continue}}}if(dr.id!==ma&&!Or&&Xr.add(dr.subject),Or&&((ai=Ee[Dt][fr])!=null&&ai[Or])&&!(Zt(Ae,Ee,Dt,fr,Or)||qt(Ae,Ee,Dt,fr,Or))){or.teacherConflict++;continue}if(Or){const Dr=(li=(ss=gt==null?void 0:gt[Dt])==null?void 0:ss[Fe])==null?void 0:li[Or];if(!Tn&&Dr===he.indexOf(fr)-1){or.consecutiveTeacher++;continue}}if(Ae[Dt][Fe][fr]={subject:dr.subject,teacherId:Or||null,teacherName:o[Or]||"Unassigned"},(Nr=Ee[Dt])[fr]??(Nr[fr]={}),Or&&(Ee[Dt][fr][Or]=!0,gt[Dt]??(gt[Dt]={}),(Hr=gt[Dt])[Fe]??(Hr[Fe]={}),gt[Dt][Fe][Or]=he.indexOf(fr)),Tt[dr.id]--,!fn){const Dr=er[dr.id];if(Dr){const ln=Number(((Yt=Dr.usedByDay)==null?void 0:Yt[Dt])||0),pi=Number(Dr.basePerDay||0);ln===pi&&!Dr.extraUsedByDay[Dt]&&(Dr.extraUsedByDay[Dt]=!0,Dr.extraRemaining=Math.max(0,Number(Dr.extraRemaining||0)-1)),Dr.usedByDay[Dt]=ln+1}}kr=Oe(dr.subject),Vr=!0;break}};if(_r(!1,!1,!1),Vr||_r(!1,!0,!1),Vr||_r(!1,!0,!0),!Vr){const _n=Object.keys(Tt).filter(Nr=>(Number(Tt[Nr])||0)>0),Gt=[];for(const Nr of en)for(const Hr of he){const Yt=(hr=(ur=Ae==null?void 0:Ae[Nr])==null?void 0:ur[Fe])==null?void 0:hr[Hr];Yt&&Yt.subject&&Gt.push({day:Nr,period:Hr})}let Tn=!1;const di=400,$n=Nr=>Math.floor(Math.random()*Nr),oi=(Nr,Hr,Yt)=>{if(!Oe(Yt))return!0;const Or=vt(Yt);return Number.isFinite(Or)?kt(Nr,Hr,Yt)<Or:!0},ai=(Nr,Hr,Yt)=>{var dr,Or,fn,Dr;Yt!=null&&Yt.teacherId&&(dr=Ee==null?void 0:Ee[Nr.day])!=null&&dr[Nr.period]&&delete Ee[Nr.day][Nr.period][Yt.teacherId],Ee[Or=Hr.day]??(Ee[Or]={}),(fn=Ee[Hr.day])[Dr=Hr.period]??(fn[Dr]={}),Yt!=null&&Yt.teacherId&&(Ee[Hr.day][Hr.period][Yt.teacherId]=!0)},ss=Nr=>{var Hr;en.forEach(Yt=>{Ee[Yt]={},$i.forEach(dr=>{Ee[Yt][dr]={}})});for(const Yt of en){const dr=(Nr==null?void 0:Nr[Yt])||{};for(const Or of Object.keys(dr)){const fn=dr==null?void 0:dr[Or];if(!(!fn||typeof fn!="object"))for(const Dr of $i){if(Dr==="LUNCH"||Dr==="Break")continue;const ln=fn==null?void 0:fn[Dr];ln!=null&&ln.teacherId&&((Hr=Ee[Yt])[Dr]??(Hr[Dr]={}),Ee[Yt][Dr][ln.teacherId]=!0)}}}},li=(Nr,Hr)=>{gt[Hr]??(gt[Hr]={}),gt[Hr][Fe]={},he.forEach((Yt,dr)=>{var fn,Dr;const Or=(Dr=(fn=Nr==null?void 0:Nr[Hr])==null?void 0:fn[Fe])==null?void 0:Dr[Yt];Or!=null&&Or.teacherId&&(gt[Hr][Fe][Or.teacherId]=dr)})};for(const Nr of _n){if(Tn)break;const Hr=c[Nr],Yt=Nr===ma?Wa:((Mr=t.find(dr=>dr.id===Nr))==null?void 0:Mr.subject)||"";if(!(Nr!==ma&&!oi(Ae,Dt,Yt))&&!(Hr&&((Br=(Yr=Ee==null?void 0:Ee[Dt])==null?void 0:Yr[fr])!=null&&Br[Hr])))for(const dr of Gt){if(Tn)break;if(dr.day===Dt&&dr.period===fr)continue;const Or=(Zr=(si=Ae==null?void 0:Ae[dr.day])==null?void 0:si[Fe])==null?void 0:Zr[dr.period];if(!(Or!=null&&Or.subject)||!oi(Ae,Dt,Or.subject)||Or.teacherId&&((Ln=(an=Ee==null?void 0:Ee[Dt])==null?void 0:an[fr])!=null&&Ln[Or.teacherId])||Nr!==ma&&!oi(Ae,dr.day,Yt)||Hr&&((qr=(Wr=Ee==null?void 0:Ee[dr.day])==null?void 0:Wr[dr.period])!=null&&qr[Hr]))continue;Ae[Dt][Fe][fr]=Or,ai({day:dr.day,period:dr.period},{day:Dt,period:fr},Or),Ae[dr.day][Fe][dr.period]={subject:Yt,teacherId:Hr||null,teacherName:o[Hr]||"Unassigned"},ai({day:Dt,period:fr},{day:dr.day,period:dr.period},{teacherId:Hr||null}),Tt[Nr]=Math.max(0,Number(Tt[Nr]||0)-1),new Set([Dt,dr.day]).forEach(Dr=>Ut(Ae,Dr,er)),ss(Ae),li(Ae,Dt),li(Ae,dr.day),Tn=!0}}for(const Nr of _n){if(Tn)break;const Hr=c[Nr],Yt=((ki=t.find(dr=>dr.id===Nr))==null?void 0:ki.subject)||"";if(!Hr){if(Yt&&kt(Ae,Dt,Yt)>=vt(Yt))continue;Ae[Dt][Fe][fr]={subject:Yt,teacherId:null,teacherName:"Unassigned"},Tt[Nr]--,er[Nr]&&(er[Nr].usedByDay[Dt]=1,er[Nr].extraUsedByDay[Dt]=!0),Tn=!0;break}for(let dr=0;dr<di&&!Tn&&!(Gt.length<2);dr++){const Or=$n(Gt.length),fn=$n(Gt.length-1),Dr=Gt[Or],ln=Gt[fn>=Or?fn+1:fn];if(Dr.day===Dt&&Dr.period===fr||ln.day===Dt&&ln.period===fr)continue;const pi=structuredClone(Ae),ji=pi[Dr.day][Fe][Dr.period],qn=pi[ln.day][Fe][ln.period];if(pi[Dr.day][Fe][Dr.period]=qn,pi[ln.day][Fe][ln.period]=ji,qn!=null&&qn.subject&&kt(pi,Dr.day,qn.subject)>vt(qn.subject)||ji!=null&&ji.subject&&kt(pi,ln.day,ji.subject)>vt(ji.subject)||Yt&&kt(pi,Dt,Yt)>=vt(Yt))continue;const mi={};for(const Ri of en){mi[Ri]={};for(const Hn of $i)mi[Ri][Hn]={}}for(const Ri of en){const Hn=(pi==null?void 0:pi[Ri])||{};for(const Qs of Object.keys(Hn)){const Y=Hn==null?void 0:Hn[Qs];if(!(!Y||typeof Y!="object"))for(const ce of $i){if(ce==="LUNCH"||ce==="Break")continue;const je=Y==null?void 0:Y[ce];je!=null&&je.teacherId&&((_t=mi[Ri])[ce]??(_t[ce]={}),mi[Ri][ce][je.teacherId]=!0)}}}if(!mi[Dt][fr]||!mi[Dt][fr][Hr]){const Ri=Ae[Dr.day][Fe][Dr.period],Hn=Ae[ln.day][Fe][ln.period];Ae[Dr.day][Fe][Dr.period]=Hn,Ae[ln.day][Fe][ln.period]=Ri,en.forEach(Y=>{Ee[Y]={},$i.forEach(ce=>{Ee[Y][ce]={}})});for(const Y of en){const ce=(Ae==null?void 0:Ae[Y])||{};for(const je of Object.keys(ce)){const $e=ce==null?void 0:ce[je];if(!(!$e||typeof $e!="object"))for(const tt of $i){if(tt==="LUNCH"||tt==="Break")continue;const Nt=$e==null?void 0:$e[tt];Nt!=null&&Nt.teacherId&&((Et=Ee[Y])[tt]??(Et[tt]={}),Ee[Y][tt][Nt.teacherId]=!0)}}}Ae[Dt][Fe][fr]={subject:Yt,teacherId:Hr||null,teacherName:o[Hr]||"Unassigned"},Tt[Nr]=Math.max(0,Number(Tt[Nr]||0)-1),new Set([Dr.day,ln.day,Dt]).forEach(Y=>Ut(Ae,Y,er)),Tn=!0}}}if(!Tn){const Nr=new Error("Deadlock: unable to place subjects without violating constraints"),Yt=Object.keys(Tt).filter(dr=>(Number(Tt[dr])||0)>0).slice(0,8).map(dr=>{var qn,mi,Ri;const Or=dr===ma?Wa:((qn=t.find(Hn=>Hn.id===dr))==null?void 0:qn.subject)||dr,fn=c==null?void 0:c[dr],Dr=fn?(o==null?void 0:o[fn])||fn:"Unassigned",ln=fn?!!((Ri=(mi=Ee==null?void 0:Ee[Dt])==null?void 0:mi[fr])!=null&&Ri[fn]):!1,pi=Or?kt(Ae,Dt,Or):0,ji=fn?Object.keys((Ae==null?void 0:Ae[Dt])||{}).find(Hn=>{var Qs,Y,ce;return((ce=(Y=(Qs=Ae==null?void 0:Ae[Dt])==null?void 0:Qs[Hn])==null?void 0:Y[fr])==null?void 0:ce.teacherId)===fn}):null;return{id:dr,subject:Or,teacher:Dr,busy:ln,busyWhere:ji,usedToday:pi}});throw Nr.meta={selectedClassKey:Fe,attempt:Qe,day:Dt,period:fr,lastSubject:kr,remainingTotal:Object.values(Tt).reduce((dr,Or)=>dr+(Number(Or)||0),0),reasonCounts:or,unassignedSubjects:Array.from(Xr),remainingDetails:Yt},Nr}}}}const pn=Rr(Ae);if(pn.length){const Dt=new Error("Teacher overlap detected across classes");throw Dt.meta={selectedClassKey:Fe,attempt:Qe,clashCount:pn.length,firstClash:pn[0]},Dt}if(f.current=Ae,pe)return Ae;d(Ae),calculateTeacherWorkload(Ae),console.log(` Timetable for ${Fe} generated successfully`);return}catch(Ae){if(Qe===Ve){const Ee=Ae==null?void 0:Ae.meta;if(!Ke){console.error(Ae);return}if(Ee){const gt=Object.entries(Ee.reasonCounts||{}).sort((Tt,er)=>(er[1]||0)-(Tt[1]||0)).filter(([,Tt])=>(Tt||0)>0).slice(0,4).map(([Tt,er])=>`${Tt}: ${er}`).join(`
`),$t=(Ee.unassignedSubjects||[]).length?`

Courses missing teacher assignment (these often cause conflicts):
- ${Ee.unassignedSubjects.join(`
- `)}`:"",dt=(Ee.remainingDetails||[]).length?`

Top remaining subjects (first 8):
`+Ee.remainingDetails.map(Tt=>{const er=Tt.busyWhere?` (busy in ${Tt.busyWhere})`:"",Ur=Tt.usedToday?`, used today: ${Tt.usedToday}`:"",pn=Tt.busy?"BUSY":"free";return`- ${Tt.subject}  ${Tt.teacher} (${pn}${er}${Ur})`}).join(`
`):"";alert(`Unable to generate timetable after multiple attempts.

Stopped at: ${Ee.day} / ${Ee.period}
Remaining periods to place: ${Ee.remainingTotal}

Most common blockers at that slot:
${gt||"(no details)"}${$t}${dt}

Rules enforced: max 1 subject per day, no consecutive Free periods.

Try: (1) ensure weekly subject total = ${Ce}, (2) reduce high-frequency subjects, (3) change teacher assignments so the same teacher isn't needed in two classes at the same time.`)}else alert("Unable to generate timetable after multiple attempts. Rules enforced: max 1 subject per day, no consecutive Free periods. Try adjusting weekly subject counts or teacher assignments.");console.error(Ae)}}},Qt=async()=>{if(v)return;const Le=(()=>{const Fe=y&&y.length?[...y]:[],Ke=new Set,pe=[];for(const Te of Fe){const Ze=at(Te==null?void 0:Te.classKey);!Ze||Ke.has(Ze)||(Ke.add(Ze),pe.push(Te))}return pe})();if(!Le.length){alert("Add class(es) first using + Add Class");return}try{E(!0);const Fe={};en.forEach(Ze=>{Fe[Ze]={}});const Ke={};let pe=Fe;const Te=[];for(const{grade:Ze,section:ut,classKey:he}of Le){const Ce=(t||[]).filter(Ge=>String(Ge==null?void 0:Ge.grade)===String(Ze)&&String(Ge==null?void 0:Ge.section)===String(ut)),Ve=(h==null?void 0:h[he])||{},Be={};Ce.forEach(Ge=>{const pt=Number((Ve==null?void 0:Ve[Ge.id])??0);Be[Ge.id]=Number.isFinite(pt)?Math.max(0,pt):0}),Ke[he]={...Be};const st=Mt({classKey:he,classCourses:Ce,rawFreq:Be,interactive:!1,returnData:!0,baseSchedule:pe});if(!st){Te.push(he);continue}pe=st}if(f.current=pe,d(pe),m(Ze=>({...Ze,...Ke})),ct&&calculateTeacherWorkload(pe),Te.length){alert(`Generated timetables, but some classes failed:

- ${Te.slice(0,12).join(`
- `)}`+(Te.length>12?`

(and ${Te.length-12} more...)`:""));return}alert("All added class timetables generated. Click 'Save All' to save to the database.")}finally{E(!1)}},Sr=async()=>{if(M)return;if(!(()=>{const Fe=y&&y.length?[...y]:[],Ke=new Set,pe=[];for(const Te of Fe){const Ze=at(Te==null?void 0:Te.classKey);!Ze||Ke.has(Ze)||(Ke.add(Ze),pe.push(Ze))}return pe})().length){alert("Add class(es) first using + Add Class");return}try{W(!0);const Fe=f.current||u||{},Ke=G0(Fe);await eh(dn(Mn,"Schedules"),Ke),alert("Saved all added class timetables to the database.")}catch(Fe){console.error("Save all failed:",Fe),alert("Failed to save. Please try again.")}finally{W(!1)}},lr=async Le=>{try{const Fe=f.current||u||{};if(!Fe||Object.keys(Fe).length===0){alert("No schedule to save yet.");return}const Ke=Le||ct;if(!Ke){alert("Select grade & section first");return}const pe=en.map(Te=>{var he;const Ze=((he=Fe==null?void 0:Fe[Te])==null?void 0:he[Ke])||{},ut=G0(Ze);return eh(dn(Mn,`Schedules/${Te}/${Ke}`),ut)});await Promise.all(pe),alert("Class timetable saved successfully")}catch(Fe){console.error("Schedule save failed:",Fe),alert(`Failed to save schedule.

${(Fe==null?void 0:Fe.message)||Fe}

Common causes: Firebase rules deny write, or the schedule contains invalid values (e.g., undefined).`)}},pr=async(Le,Fe,Ke)=>{try{const pe=Le||ct,Te=Fe||j,Ze=Ke||P;if(!pe){alert("Select grade & section first");return}if(!en.some(qt=>$i.some(Ut=>{var sr,rr,ur,hr;return Ut==="LUNCH"||Ut==="Break"?!1:!!((hr=(ur=(rr=(sr=f.current||u)==null?void 0:sr[qt])==null?void 0:rr[pe])==null?void 0:ur[Ut])!=null&&hr.subject)}))){alert("No timetable found for this class yet. Generate or fill it first.");return}const he=new WW.Workbook;he.creator="Gojo Admin",he.created=new Date;const Ce=(r==null?void 0:r.schoolName)||(r==null?void 0:r.school)||"School Name",Ve=pe.length>31?pe.slice(0,31):pe,Be=he.addWorksheet(Ve),st=5,Ge=en.length+1;Be.addRow([`School: ${Ce}`]),Be.mergeCells(1,1,1,Ge),Be.addRow([`Grade: ${Te||""}`]),Be.mergeCells(2,1,2,Ge),Be.addRow([`Section: ${Ze||""}`]),Be.mergeCells(3,1,3,Ge),Be.addRow([]);const pt=["Period",...en];Be.addRow(pt),Be.views=[{state:"frozen",ySplit:st,xSplit:1}],$i.forEach(qt=>{const Ut=[qt];if(qt==="Break"){en.forEach(()=>Ut.push("Break")),Be.addRow(Ut);return}if(qt==="LUNCH"){en.forEach(()=>Ut.push("Lunch")),Be.addRow(Ut);return}en.forEach(sr=>{var Mr,Yr,Br;const rr=(Br=(Yr=(Mr=f.current||u)==null?void 0:Mr[sr])==null?void 0:Yr[pe])==null?void 0:Br[qt],ur=(rr==null?void 0:rr.subject)||"",hr=rr!=null&&rr.teacherName?`(${rr.teacherName})`:"";Ut.push(ur?`${ur}${hr?`
${hr}`:""}`:"")}),Be.addRow(Ut)}),Be.getColumn(1).width=20;for(let qt=2;qt<=en.length+1;qt++)Be.getColumn(qt).width=28;const de=Be.getRow(1);de.height=28,de.getCell(1).font={bold:!0,size:18,color:{argb:"FF0F172A"}},de.getCell(1).alignment={vertical:"middle",horizontal:"center"};const Me=Be.getRow(2);Me.height=18,Me.getCell(1).font={bold:!0,size:12,color:{argb:"FF334155"}},Me.getCell(1).alignment={vertical:"middle",horizontal:"center"};const Oe=Be.getRow(3);Oe.height=18,Oe.getCell(1).font={bold:!0,size:12,color:{argb:"FF334155"}},Oe.getCell(1).alignment={vertical:"middle",horizontal:"center"},Be.getRow(4).height=10;const it=Be.getRow(st);it.height=22,it.eachCell(qt=>{qt.font={bold:!0,color:{argb:"FFFFFFFF"}},qt.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF1D4ED8"}},qt.alignment={vertical:"middle",horizontal:"center"}});const vt={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}};Be.eachRow({includeEmpty:!0},(qt,Ut)=>{Ut>st&&(qt.height=44),qt.eachCell({includeEmpty:!0},sr=>{Ut>=st&&(sr.border=vt),Ut>st&&(sr.alignment={vertical:"middle",horizontal:"center",wrapText:!0})})});const It=$i.findIndex(qt=>qt==="Break");It>=0&&Be.getRow(st+1+It).eachCell({includeEmpty:!0},Ut=>{Ut.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFD1FAE5"}},Ut.font={bold:!0}});const kt=$i.findIndex(qt=>qt==="LUNCH");kt>=0&&Be.getRow(st+1+kt).eachCell({includeEmpty:!0},Ut=>{Ut.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFEF3C7"}},Ut.font={bold:!0}});const ir=pe.replace(/[\\/:*?"<>|]/g,"-"),Zt=await he.xlsx.writeBuffer();qW.saveAs(new Blob([Zt],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),`${ir}-timetable.xlsx`)}catch(pe){console.error("Excel download failed:",pe),alert(`Failed to download Excel file.

${(pe==null?void 0:pe.message)||pe}`)}},jr=(Le,Fe,Ke)=>{try{const pe=Le||ct,Te=Fe||j,Ze=Ke||P;if(!pe){alert("Select grade & section first");return}if(!en.some(Oe=>$i.some(it=>{var vt,It,kt,ir;return it==="LUNCH"||it==="Break"?!1:!!((ir=(kt=(It=(vt=f.current||u)==null?void 0:vt[Oe])==null?void 0:It[pe])==null?void 0:kt[it])!=null&&ir.subject)}))){alert("No timetable found for this class yet. Generate or fill it first.");return}const he=(r==null?void 0:r.schoolName)||(r==null?void 0:r.school)||"School Name",Ve=`${pe.replace(/[\\/:*?"<>|]/g,"-")}-timetable.pdf`,Be=new Tr({orientation:"landscape",unit:"pt",format:"a4"}),st=40,Ge=32,pt=56;Be.setFillColor(29,78,216),Be.rect(st,Ge,Be.internal.pageSize.getWidth()-st*2,pt,"F"),Be.setFont("helvetica","bold"),Be.setFontSize(18),Be.setTextColor(255,255,255),Be.text("Class Timetable",st+16,Ge+24),Be.setFont("helvetica","normal"),Be.setFontSize(10),Be.setTextColor(255,255,255),Be.text(`School: ${he}`,st+16,Ge+42),Be.text(`Grade: ${Te||""}   Section: ${Ze||""}`,st+250,Ge+42),Be.text(`Class: ${pe}`,st+520,Ge+42),Be.setFont("helvetica","normal"),Be.setFontSize(9),Be.setTextColor(71,85,105),Be.text(`Generated: ${new Date().toLocaleString()}`,st,Ge+pt+18);const de=[["Period",...en]],Me=$i.map(Oe=>Oe==="Break"?["Break",...en.map(()=>"Break")]:Oe==="LUNCH"?["Lunch",...en.map(()=>"Lunch")]:[Oe,...en.map(it=>{var ir,Zt,qt;const vt=(qt=(Zt=(ir=f.current||u)==null?void 0:ir[it])==null?void 0:Zt[pe])==null?void 0:qt[Oe],It=(vt==null?void 0:vt.subject)||"",kt=vt!=null&&vt.teacherName?`(${vt.teacherName})`:"";return It?`${It}${kt?`
${kt}`:""}`:""})]);Ab(Be,{startY:Ge+pt+28,head:de,body:Me,theme:"grid",styles:{font:"helvetica",fontSize:9.5,cellPadding:6,valign:"middle",lineColor:[226,232,240],lineWidth:.7},headStyles:{fillColor:[29,78,216],textColor:255,fontStyle:"bold",halign:"center"},bodyStyles:{textColor:[15,23,42]},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:90,fontStyle:"bold"}},didParseCell:Oe=>{var It;if(Oe.section!=="body")return;const it=String(((It=Oe.row.raw)==null?void 0:It[0])||"");it.toLowerCase()==="break"&&(Oe.cell.styles.fillColor=[209,250,229],Oe.cell.styles.fontStyle="bold"),it.toLowerCase()==="lunch"&&(Oe.cell.styles.fillColor=[254,243,199],Oe.cell.styles.fontStyle="bold"),String(Oe.cell.raw||"").toLowerCase().includes("free period")&&(Oe.cell.styles.fillColor=[224,242,254],Oe.cell.styles.textColor=[3,105,161],Oe.cell.styles.fontStyle="bold")}}),Be.save(Ve)}catch(pe){console.error("PDF download failed:",pe),alert(`Failed to download PDF file.

${(pe==null?void 0:pe.message)||pe}`)}},Ft=()=>{try{const Le=(ot||[]).filter(Ge=>Ge==null?void 0:Ge.classKey);if(!Le.length){alert("Add class(es) first using + Add Class");return}const Fe=f.current||u||{},Ke=$i.filter(Ge=>Ge!=="LUNCH"&&Ge!=="Break");if(!Le.some(({classKey:Ge})=>en.some(pt=>Ke.some(de=>{var Me,Oe,it;return!!((it=(Oe=(Me=Fe==null?void 0:Fe[pt])==null?void 0:Me[Ge])==null?void 0:Oe[de])!=null&&it.subject)})))){alert("No timetables found yet. Generate first.");return}const Te=(r==null?void 0:r.schoolName)||(r==null?void 0:r.school)||"School Name",Ze="All-Classes-Timetable.pdf",ut=new Tr({orientation:"landscape",unit:"pt",format:"a4"}),he=32,Ce=24,Ve=52;ut.setFillColor(29,78,216),ut.rect(he,Ce,ut.internal.pageSize.getWidth()-he*2,Ve,"F"),ut.setFont("helvetica","bold"),ut.setFontSize(16),ut.setTextColor(255,255,255),ut.text("All Classes Timetable",he+14,Ce+22),ut.setFont("helvetica","normal"),ut.setFontSize(10),ut.setTextColor(255,255,255),ut.text(`School: ${Te}`,he+14,Ce+40),ut.text(`Classes: ${Le.length}`,he+320,Ce+40),ut.setFont("helvetica","normal"),ut.setFontSize(9),ut.setTextColor(71,85,105),ut.text(`Generated: ${new Date().toLocaleString()}`,he,Ce+Ve+16);const Be=[["Class","Day",...Ke]],st=[];Le.forEach(({classKey:Ge})=>{en.forEach(pt=>{const de=[Ge,pt,...Ke.map(Me=>{var It,kt;const Oe=(kt=(It=Fe==null?void 0:Fe[pt])==null?void 0:It[Ge])==null?void 0:kt[Me],it=(Oe==null?void 0:Oe.subject)||"",vt=Oe!=null&&Oe.teacherName?`(${Oe.teacherName})`:"";return it?`${it}${vt?`
${vt}`:""}`:""})];st.push(de)})}),Ab(ut,{startY:Ce+Ve+24,head:Be,body:st,theme:"grid",styles:{font:"helvetica",fontSize:8.5,cellPadding:4,valign:"middle",lineColor:[226,232,240],lineWidth:.6},headStyles:{fillColor:[29,78,216],textColor:255,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:[248,250,252]},columnStyles:{0:{cellWidth:110,fontStyle:"bold"},1:{cellWidth:70,fontStyle:"bold"}},didParseCell:Ge=>{var Me;if(Ge.section!=="body")return;String(((Me=Ge.row.raw)==null?void 0:Me[1])||"")==="Monday"&&(Ge.cell.styles.fillColor=[224,242,254]),String(Ge.cell.raw||"").toLowerCase().includes("free period")&&(Ge.cell.styles.fillColor=[224,242,254],Ge.cell.styles.textColor=[3,105,161],Ge.cell.styles.fontStyle="bold")}}),ut.save(Ze)}catch(Le){console.error("Download all PDF failed:",Le),alert(`Failed to download PDF file.

${(Le==null?void 0:Le.message)||Le}`)}},zr=(Le,Fe,Ke)=>{const pe=Le||ct,Te=Fe||j,Ze=Ke||P;if(!pe){alert("Select grade & section first");return}const ut=$i.filter(Oe=>Oe!=="LUNCH"&&Oe!=="Break"),he=en.length*ut.length,Ce=(h==null?void 0:h[pe])||{},Ve={},Be=(t||[]).filter(Oe=>String(Oe==null?void 0:Oe.grade)===String(Te)&&String(Oe==null?void 0:Oe.section)===String(Ze));Be.forEach(Oe=>{Ve[Oe.subject]=Number((Ce==null?void 0:Ce[Oe.id])||0)});const st=Object.values(Ve).reduce((Oe,it)=>Oe+(Number(it)||0),0),Ge=Be.filter(Oe=>!c[Oe.id]).map(Oe=>Oe.subject),pt={};Object.entries(c).forEach(([Oe,it])=>{const vt=t.find(It=>It.id===Oe);vt&&(pt[it]??(pt[it]=[]),pt[it].push(`${vt.grade}-${vt.section}: ${vt.subject}`))});const de=Object.entries(pt).map(([Oe,it])=>({teacherId:Oe,count:it.length,list:it})).sort((Oe,it)=>it.count-Oe.count).slice(0,10);let Me=`Class: ${pe}
Weekly slots: ${he}
Sum of weekly frequencies: ${st}

`;st!==he&&(Me+=`WARNING: weekly total mismatch (must equal ${he})

`),Ge.length&&(Me+=`Subjects without assigned teacher:
- ${Ge.join(`
- `)}

`),Me+=`Top subjects by requested frequency:
`,Object.entries(Ve).sort((Oe,it)=>Number(it[1])-Number(Oe[1])).slice(0,8).forEach(([Oe,it])=>{Me+=`- ${Oe}: ${it}
`}),Me+=`
Top teachers by number of assigned courses:
`,de.forEach(Oe=>{Me+=`- ${Oe.teacherId}: ${Oe.count}
  ${Oe.list.slice(0,4).join(`
  `)}
`}),alert(Me)},Rr=Le=>{const Fe=[],Ke=Le||{};return en.forEach(pe=>{$i.forEach(Te=>{if(Te==="LUNCH"||Te==="Break")return;const Ze={},ut=(Ke==null?void 0:Ke[pe])||{};Object.keys(ut).forEach(he=>{var Be;const Ce=(Be=ut==null?void 0:ut[he])==null?void 0:Be[Te];if(!(Ce!=null&&Ce.teacherId))return;const Ve=Ce.teacherId;Ze[Ve]??(Ze[Ve]=[]),Ze[Ve].push({classKey:he,subject:Ce.subject||""})}),Object.entries(Ze).forEach(([he,Ce])=>{Ce.length<=1||Fe.push({day:pe,period:Te,teacherId:he,teacherName:(o==null?void 0:o[he])||he,items:Ce})})})}),Fe},mr=()=>{const Le=f.current||u||{},Fe=Rr(Le);if(!Fe.length){alert(" No teacher overlaps found across grades/sections.");return}const Ke=Fe.slice(0,40).map(pe=>{const Te=pe.items.map(Ze=>`${Ze.classKey} (${Ze.subject})`).join(" | ");return`- ${pe.day} / ${pe.period}  ${pe.teacherName}: ${Te}`}).join(`
`);alert(` Teacher overlaps found (${Fe.length}).

${Ke}`+(Fe.length>40?`

(Showing first 40)`:""))},Ue=Le=>{if(!Le){alert("Select grade & section first");return}const Fe=f.current||u||{},Ke=[];if(en.forEach(pe=>{const Te={};$i.forEach(Ze=>{var he,Ce,Ve;if(Ze==="LUNCH"||Ze==="Break")return;const ut=(((Ve=(Ce=(he=Fe==null?void 0:Fe[pe])==null?void 0:he[Le])==null?void 0:Ce[Ze])==null?void 0:Ve.subject)||"").toString().trim();ut&&ut!==Wa&&(Te[ut]=(Te[ut]||0)+1)}),Object.entries(Te).forEach(([Ze,ut])=>{ut>1&&Ke.push(`${pe}: ${Ze} (${ut})`)})}),!Ke.length){alert(" No subject appears more than once per day for this class.");return}alert(` Subjects appearing more than once per day:

${Ke.slice(0,40).join(`
`)}`+(Ke.length>40?`

(Showing first 40)`:""))},Ye=async Le=>{const Fe=`${r.userId}_${Le}`,Ke=`${Le}_${r.userId}`,[pe,Te]=await Promise.all([qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Fe}/messages.json`),qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${Ke}/messages.json`)]),Ze={},ut=(he,Ce)=>{Object.entries(he||{}).forEach(([Ve,Be])=>{Be.receiverId===r.userId&&!Be.seen&&(Ze[`${Ce}/${Ve}/seen`]=!0)})};ut(pe.data,`Chats/${Fe}/messages`),ut(Te.data,`Chats/${Ke}/messages`),Object.keys(Ze).length>0&&await qe.patch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/.json",Ze)},Xe={main:{marginTop:70,marginLeft:240,flex:1,padding:24,overflowY:"auto",minHeight:"calc(100vh - 70px)"},selectorCard:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:16,padding:20,borderRadius:16,background:"#ffffff",border:"1px solid #e5e7eb",boxShadow:"0 8px 22px rgba(15, 23, 42, 0.06)",color:"#0f172a"},selectorLeft:{display:"flex",flexDirection:"column",gap:2,minWidth:180},selectorTitle:{fontSize:16,fontWeight:800,color:"#0f172a"},selectorHint:{fontSize:12,fontWeight:600,color:"#64748b"},selectorRight:{display:"flex",flexWrap:"wrap",gap:12,justifyContent:"flex-end",flex:1},select:{padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",minWidth:200,fontSize:14,fontWeight:700,outline:"none",cursor:"pointer",background:"#ffffff",color:"#0f172a"},selectSmall:{padding:"8px 10px",borderRadius:10,border:"1px solid #e5e7eb",fontSize:13,fontWeight:700,background:"#ffffff",color:"#0f172a",outline:"none",cursor:"pointer"},card:{background:"#fff",padding:22,borderRadius:20,marginTop:22,border:"1px solid #e5e7eb",boxShadow:"0 10px 22px rgba(15, 23, 42, 0.06)",transition:"0.3s"},freqGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))",gap:16},freqItem:{background:"#f8fafc",padding:14,borderRadius:14,border:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",fontWeight:500,boxShadow:"0 4px 12px rgba(15, 23, 42, 0.06)",transition:"0.3s"},freqSubject:{display:"flex",flexDirection:"column",gap:2,minWidth:0},freqSubjectName:{fontWeight:800,color:"#0f172a",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:220},freqSubjectSub:{fontSize:12,fontWeight:700,color:"#64748b"},globalGradeBlock:{marginTop:16,paddingTop:12,borderTop:"1px solid #e5e7eb"},weeklySubjectsPanel:{marginTop:8},timetableTableWrap:{overflowX:"auto",borderRadius:14,border:"1px solid #e5e7eb",background:"#ffffff",boxShadow:"0 6px 16px rgba(15, 23, 42, 0.06)"},timetableTable:{width:"100%",minWidth:800,borderCollapse:"separate",borderSpacing:0},timetableHeadCell:{textAlign:"left",padding:"12px 12px",borderBottom:"1px solid #e5e7eb",color:"#0f172a",fontWeight:800,background:"#f8fafc"},timetableRow:{background:"#ffffff"},timetableRowAlt:{background:"#f8fafc"},timetableDayCell:{verticalAlign:"top",padding:"12px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:800,color:"#1e293b",whiteSpace:"nowrap"},timetableCell:{verticalAlign:"top",padding:"12px 12px",borderBottom:"1px solid #e5e7eb",whiteSpace:"pre-line",color:"#0f172a",lineHeight:1.35},globalGradeTitle:{fontSize:14,fontWeight:900,color:"#0f172a",marginBottom:12},btnRow:{display:"flex",gap:12,margin:"20px 0"},greenBtn:{background:"linear-gradient(135deg,#22c55e,#16a34a)",color:"#fff",padding:"12px 22px",borderRadius:14,border:"none",fontWeight:600,cursor:"pointer",transition:"0.3s"},blueBtn:{background:"linear-gradient(135deg,#2563eb,#1d4ed8)",color:"#fff",padding:"12px 22px",borderRadius:14,border:"none",fontWeight:600,cursor:"pointer",transition:"0.3s"},timetableTitle:{marginTop:14,fontSize:28,fontWeight:800,color:"#0f172a",letterSpacing:.2},timetableSubtitle:{marginTop:2,fontSize:15,fontWeight:700,color:"#475569"},purpleBtn:{background:"linear-gradient(135deg,#7c3aed,#6d28d9)",color:"#fff",padding:"12px 22px",borderRadius:14,border:"none",fontWeight:600,cursor:"pointer",transition:"0.3s"}};return ct&&en.some(Le=>$i.some(Fe=>{var Ke,pe,Te;return Fe!=="LUNCH"&&Fe!=="Break"&&!!((Te=(pe=(Ke=u==null?void 0:u[Le])==null?void 0:Ke[ct])==null?void 0:pe[Fe])!=null&&Te.subject)})),T.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[T.jsxs("div",{className:"top-navbar",children:[T.jsx("h2",{children:"Gojo Dashboard"}),T.jsxs("div",{className:"nav-right",children:[T.jsxs("div",{className:"icon-circle",style:{position:"relative",cursor:"pointer"},onClick:Le=>{Le.stopPropagation(),we(Fe=>!Fe)},children:[T.jsx(wc,{}),(()=>{const Le=Object.values(X||{}).reduce((Ke,pe)=>Ke+(pe.count||0),0),Fe=((ke==null?void 0:ke.length)||0)+Le;return Fe>0?T.jsx("span",{style:{position:"absolute",top:"-5px",right:"-5px",background:"red",color:"#fff",borderRadius:"50%",padding:"2px 6px",fontSize:"10px",fontWeight:"bold"},children:Fe}):null})(),ze&&T.jsx("div",{className:"notification-dropdown",style:{position:"absolute",top:40,right:0,width:360,maxHeight:420,overflowY:"auto",background:"#fff",borderRadius:10,boxShadow:"0 6px 20px rgba(0,0,0,0.12)",zIndex:1e3,padding:6},onClick:Le=>Le.stopPropagation(),children:((ke==null?void 0:ke.length)||0)+Object.values(X||{}).reduce((Le,Fe)=>Le+(Fe.count||0),0)===0?T.jsx("p",{style:{padding:12,textAlign:"center",color:"#777"},children:"No new notifications"}):T.jsxs("div",{children:[ke.length>0&&T.jsxs("div",{children:[T.jsx("div",{style:{padding:"8px 12px",borderBottom:"1px solid #eee",fontWeight:700},children:"Posts"}),ke.map(Le=>T.jsxs("div",{style:{padding:10,display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:"1px solid #f0f0f0",transition:"background 120ms ease"},onMouseEnter:Fe=>Fe.currentTarget.style.background="#f6f8fa",onMouseLeave:Fe=>Fe.currentTarget.style.background="",onClick:()=>lt(Le),children:[T.jsx("img",{src:Le.adminProfile||"/default-profile.png",alt:Le.adminName,style:{width:46,height:46,borderRadius:8,objectFit:"cover"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("strong",{style:{display:"block",marginBottom:4},children:Le.adminName}),T.jsx("p",{style:{margin:0,fontSize:13,color:"#555",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:Le.message})]}),T.jsx("div",{style:{fontSize:12,color:"#888",marginLeft:8},children:new Date(Le.time||Le.createdAt||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},Le.notificationId))]}),Object.values(X||{}).reduce((Le,Fe)=>Le+(Fe.count||0),0)>0&&T.jsxs("div",{children:[T.jsx("div",{style:{padding:"8px 10px",color:"#333",fontWeight:700,background:"#fafafa",borderRadius:6,margin:"8px 6px"},children:"Messages"}),Object.entries(X||{}).map(([Le,Fe])=>T.jsxs("div",{style:{padding:10,display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:"1px solid #f0f0f0",transition:"background 120ms ease"},onMouseEnter:Ke=>Ke.currentTarget.style.background="#f6f8fa",onMouseLeave:Ke=>Ke.currentTarget.style.background="",onClick:async()=>{await Ye(Le),D(Ke=>{const pe={...Ke};return delete pe[Le],pe}),we(!1),ve("/all-chat",{state:{user:{userId:Le,name:Fe.name,profileImage:Fe.profileImage,type:Fe.type}}})},children:[T.jsx("img",{src:Fe.profileImage||"/default-profile.png",alt:Fe.name,style:{width:46,height:46,borderRadius:8,objectFit:"cover"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("strong",{style:{display:"block",marginBottom:4},children:Fe.name}),T.jsxs("p",{style:{margin:0,fontSize:13,color:"#555",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:[Fe.count," new message",Fe.count>1&&"s"]})]})]},Le))]})]})})]}),T.jsxs("div",{className:"icon-circle",style:{position:"relative",cursor:"pointer"},onClick:()=>ve("/all-chat"),children:[T.jsx(vc,{}),Object.values(X||{}).reduce((Le,Fe)=>Le+(Fe.count||0),0)>0&&T.jsx("span",{style:{position:"absolute",top:"-5px",right:"-5px",background:"red",color:"#fff",borderRadius:"50%",padding:"2px 6px",fontSize:"10px",fontWeight:"bold"},children:Object.values(X||{}).reduce((Le,Fe)=>Le+(Fe.count||0),0)})]}),T.jsx(gr,{className:"icon-circle",to:"/settings",children:T.jsx(_c,{})}),T.jsx("img",{src:r.profileImage||"/default-profile.png",alt:"admin",className:"profile-img"})]})]}),T.jsxs("div",{className:"google-sidebar",style:{width:"220px",padding:"10px"},children:[T.jsxs("div",{className:"sidebar-profile",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6,paddingBottom:6},children:[T.jsx("div",{className:"sidebar-img-circle",style:{width:48,height:48,borderRadius:"50%",overflow:"hidden",border:"2px solid #e6eefc"},children:T.jsx("img",{src:(r==null?void 0:r.profileImage)||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover"}})}),T.jsx("h3",{style:{margin:0,fontSize:14,fontWeight:700},children:(r==null?void 0:r.name)||"Admin Name"}),T.jsx("p",{style:{margin:0,fontSize:12,color:"#6b7280"},children:(r==null?void 0:r.adminId)||"username"})]}),T.jsxs("div",{className:"sidebar-menu",style:{display:"flex",flexDirection:"column",gap:6,marginTop:8},children:[T.jsxs(gr,{className:"sidebar-btn",to:"/dashboard",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(xc,{style:{width:18,height:18}})," Home"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/my-posts",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Ca,{style:{width:18,height:18}})," My Posts"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/teachers",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Teachers"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/students",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Students"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/schedule",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13,backgroundColor:"#4b6cb7",color:"#fff",borderRadius:8},children:[T.jsx(sl,{style:{width:18,height:18}})," Schedule"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/parents",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Parents"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/registration-form",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Registration Form"]}),T.jsxs("button",{className:"sidebar-btn logout-btn",onClick:()=>{localStorage.removeItem("admin"),window.location.href="/login"},style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Sc,{style:{width:18,height:18}})," Logout"]})]})]}),T.jsxs("div",{style:Xe.main,children:[T.jsxs("div",{style:Xe.selectorCard,children:[T.jsxs("div",{style:Xe.selectorLeft,children:[T.jsx("div",{style:Xe.selectorTitle,children:"Class timetable"}),T.jsx("div",{style:Xe.selectorHint,children:"Pick a grade and section to view/edit."})]}),T.jsxs("div",{style:Xe.selectorRight,children:[T.jsxs("select",{style:Xe.select,value:j,onChange:Le=>{F(Le.target.value),L("")},children:[T.jsx("option",{value:"",children:" Select Grade"}),Object.keys(i).map(Le=>T.jsx("option",{children:Le},Le))]}),T.jsxs("select",{style:Xe.select,value:P,onChange:Le=>L(Le.target.value),disabled:!j,children:[T.jsx("option",{value:"",children:" Select Section"}),[...i[j]||[]].map(Le=>T.jsx("option",{children:Le},Le))]}),T.jsx("button",{style:{...Xe.blueBtn,padding:"10px 16px",borderRadius:12},onClick:zt,disabled:!j||!P,children:"+ Add Class"})]})]}),T.jsxs("div",{children:[T.jsx("div",{style:Xe.timetableTitle,children:"Timetable"}),ct&&T.jsx("div",{style:Xe.timetableSubtitle,children:ct})]}),T.jsxs("div",{style:Xe.card,children:[T.jsx("h3",{children:" Generate Multiple Classes"}),T.jsx("div",{style:Xe.selectorHint,children:"Step 1: Select a Grade & Section. Step 2: Fill the Weekly Subjects for that class. Step 3: Click Add Class. Repeat for other classes. Finally click Generate All Classes."}),ot&&ot.length?T.jsxs("div",{style:{...Xe.selectorHint,marginTop:8},children:["Classes to generate: ",ot.map(Le=>Le.classKey).join(", ")]}):T.jsx("div",{style:{...Xe.selectorHint,marginTop:8},children:"Add class(es) to see multiple Weekly Subjects at once."}),ot&&ot.length?T.jsxs("div",{style:{...Xe.selectorHint,marginTop:6},children:["Timetables listed below for: ",ot.map(Le=>Le.classKey).join(", ")]}):null,T.jsxs("div",{style:{...Xe.btnRow,flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[T.jsxs("button",{style:{...Xe.greenBtn,opacity:v?.7:1},onClick:Qt,disabled:v||!(ot&&ot.length),children:[T.jsx(AR,{})," ",v?"Generating":"Generate All"]}),T.jsxs("button",{style:{...Xe.blueBtn,opacity:M?.7:1},onClick:Sr,disabled:M||v||!(ot&&ot.length),children:[T.jsx(m0,{})," ",M?"Saving":"Save All"]}),T.jsxs("button",{style:{...Xe.purpleBtn,background:"#0ea5e9"},onClick:Ft,disabled:v||!(ot&&ot.length),children:[T.jsx(m3,{})," Download All PDF"]})]}),(ot||[]).map(({grade:Le,section:Fe,classKey:Ke})=>{const pe=(t||[]).filter(he=>String(he==null?void 0:he.grade)===String(Le)&&String(he==null?void 0:he.section)===String(Fe)),Te=($==null?void 0:$[Ke])??!0,Ze=`weekly-subjects-${String(Ke).replace(/[^a-z0-9]+/gi,"-")}`,ut=()=>N(he=>({...he||{},[Ke]:!((he==null?void 0:he[Ke])??!0)}));return T.jsxs("div",{style:Xe.globalGradeBlock,children:[T.jsxs("div",{style:{...Xe.globalGradeTitle,display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,marginBottom:Te?12:0,cursor:"pointer",userSelect:"none"},role:"button",tabIndex:0,"aria-expanded":Te,"aria-controls":Ze,onClick:ut,onKeyDown:he=>{(he.key==="Enter"||he.key===" ")&&(he.preventDefault(),ut())},children:[T.jsxs("div",{style:{minWidth:0},children:[" ",Ke,"  Weekly Subjects"]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[T.jsx("button",{type:"button","aria-label":`Remove ${Ke}`,style:{background:"transparent",border:"none",color:"#ef4444",fontSize:16,lineHeight:1,cursor:"pointer",padding:"2px 6px"},onClick:he=>{he.stopPropagation(),nt(Ke)},children:T.jsx(TR,{})}),T.jsx("div",{style:{...Xe.blueBtn,padding:"6px 10px",borderRadius:10,fontSize:12,whiteSpace:"nowrap",pointerEvents:"none"},children:Te?"Hide":"Show"})]})]}),Te?T.jsxs("div",{style:Xe.weeklySubjectsPanel,children:[T.jsxs("div",{style:{...Xe.btnRow,gap:8,justifyContent:"flex-start",marginBottom:12},children:[T.jsxs("button",{style:Xe.blueBtn,onClick:()=>lr(Ke),children:[T.jsx(m0,{})," Save"]}),T.jsxs("button",{style:Xe.purpleBtn,onClick:()=>pr(Ke,Le,Fe),children:[T.jsx(Ca,{})," Download Excel"]}),T.jsxs("button",{style:{...Xe.purpleBtn,background:"#0ea5e9"},onClick:()=>jr(Ke,Le,Fe),children:[T.jsx(Ca,{})," Download PDF"]}),T.jsx("button",{style:{...Xe.purpleBtn,background:"#10b981"},onClick:()=>zr(Ke,Le,Fe),children:" Analyze Problems"}),T.jsx("button",{style:{...Xe.purpleBtn,background:"#0f766e"},onClick:()=>Ue(Ke),children:"Check 1/day"}),T.jsx("button",{style:{...Xe.purpleBtn,background:"#ef4444"},onClick:mr,children:" Detect Teacher Clashes"})]}),T.jsx("div",{id:Ze,style:Xe.freqGrid,children:pe.map(he=>{var Ce;return T.jsxs("div",{style:Xe.freqItem,children:[T.jsxs("div",{style:Xe.freqSubject,children:[T.jsx("div",{style:Xe.freqSubjectName,children:he.subject}),T.jsx("div",{style:Xe.freqSubjectSub,children:"Periods per week"})]}),T.jsx("select",{style:Xe.selectSmall,value:((Ce=h==null?void 0:h[Ke])==null?void 0:Ce[he.id])||0,onChange:Ve=>m(Be=>({...Be,[Ke]:{...(Be==null?void 0:Be[Ke])||{},[he.id]:Number(Ve.target.value)}})),children:[...Array(9)].map((Ve,Be)=>T.jsx("option",{children:Be},Be))})]},he.id)})})]}):null]},Ke)}),ot&&ot.length?T.jsxs("div",{style:{...Xe.card,marginTop:16},children:[T.jsx("h3",{children:" Timetables (Added Classes)"}),T.jsx("div",{style:Xe.selectorHint,children:"All added class timetables listed below."}),(ot||[]).map(({classKey:Le,grade:Fe,section:Ke})=>{const pe=$i.filter(Te=>Te!=="LUNCH"&&Te!=="Break");return T.jsxs("div",{style:Xe.globalGradeBlock,children:[T.jsxs("div",{style:{...Xe.globalGradeTitle,display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[T.jsxs("span",{children:[Le,"  Timetable"]}),T.jsx("button",{type:"button","aria-label":`Download ${Le} timetable`,style:{background:"transparent",border:"none",color:"#2563eb",cursor:"pointer",fontSize:16},onClick:()=>jr(Le,Fe,Ke),children:T.jsx(m3,{})})]}),T.jsx("div",{style:Xe.timetableTableWrap,children:T.jsxs("table",{style:Xe.timetableTable,children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{style:Xe.timetableHeadCell,children:"Day"}),pe.map(Te=>T.jsx("th",{style:Xe.timetableHeadCell,children:Te},Te))]})}),T.jsx("tbody",{children:en.map((Te,Ze)=>T.jsxs("tr",{style:Ze%2===0?Xe.timetableRow:Xe.timetableRowAlt,children:[T.jsx("td",{style:Xe.timetableDayCell,children:Te}),pe.map(ut=>{var st,Ge;const he=(Ge=(st=u==null?void 0:u[Te])==null?void 0:st[Le])==null?void 0:Ge[ut],Ce=((he==null?void 0:he.subject)||"").toString().trim(),Ve=((he==null?void 0:he.teacherName)||"").toString().trim(),Be=Ce?Ve?`${Ce}
${Ve}`:Ce:"";return T.jsx("td",{style:Xe.timetableCell,children:Be},ut)})]},`${Le}-${Te}-row`))})]})})]},`${Le}-table`)})]}):null]})]})]})}function GW(){const r=`${Io}/api`,[e,t]=me.useState(JSON.parse(localStorage.getItem("admin"))||{}),[n,i]=me.useState(null),[s,o]=me.useState(e.profileImage||"/default-profile.png"),[l,c]=me.useState(e.name||""),[a,u]=me.useState(e.username||""),[d,f]=me.useState(""),[h,m]=me.useState(""),g=Bs(),[p,y]=me.useState([]),[b,v]=me.useState(!1),[E,M]=me.useState([]),[W,$]=me.useState(!1),[N,j]=me.useState({teacher:!1,parent:!1,student:!1}),F=e.userId,P=async()=>{if(F)try{const x=await qe.get(`${r}/get_post_notifications/${F}`);let w=Array.isArray(x.data)?x.data:Object.values(x.data||{});if(w.length===0){M([]);return}const[S,I]=await Promise.all([qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json"),qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/School_Admins.json")]),z=S.data||{},A=I.data||{},H=J=>{const V=A[J];return V?Object.values(z).find(X=>X.userId===V.userId):null},K=w.map(J=>{const V=H(J.adminId);return{...J,notificationId:J.notificationId||J.id||`${J.postId}_${J.adminId}`,adminName:(V==null?void 0:V.name)||"Unknown Admin",adminProfile:(V==null?void 0:V.profileImage)||"/default-profile.png"}});M(K)}catch(x){console.error("Post notification fetch failed",x),M([])}};me.useEffect(()=>{if(!F)return;P();const x=setInterval(P,5e3);return()=>clearInterval(x)},[F]),me.useEffect(()=>{var x;(x=location.state)!=null&&x.postId&&M([])},[]),me.useEffect(()=>{const x=w=>{!w.target.closest(".icon-circle")&&!w.target.closest(".notification-dropdown")&&$(!1)};return document.addEventListener("click",x),()=>document.removeEventListener("click",x)},[]),me.useEffect(()=>{const x=w=>{v(!1)};return document.addEventListener("click",x),()=>document.removeEventListener("click",x)},[]),me.useEffect(()=>{(async()=>{try{const S=await(await fetch("/api/unreadSenders")).json();y(S)}catch{}})()},[]);const L=async()=>{if(!e.userId)return;const x={};try{const S=(await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Users.json")).data||{},I=J=>Object.values(S).find(V=>V.userId===J),z=async J=>{const V=`${e.userId}_${J}`,X=`${J}_${e.userId}`,[D,O]=await Promise.all([qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${V}/messages.json`),qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${X}/messages.json`)]);return[...Object.values(D.data||{}),...Object.values(O.data||{})].filter(Z=>Z.receiverId===e.userId&&!Z.seen).length},A=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Teachers.json");for(const J in A.data||{}){const V=A.data[J],X=await z(V.userId);if(X>0){const D=I(V.userId);x[V.userId]={type:"teacher",name:(D==null?void 0:D.name)||"Teacher",profileImage:(D==null?void 0:D.profileImage)||"/default-profile.png",count:X}}}const H=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Students.json");for(const J in H.data||{}){const V=H.data[J],X=await z(V.userId);if(X>0){const D=I(V.userId);x[V.userId]={type:"student",name:(D==null?void 0:D.name)||V.name||"Student",profileImage:(D==null?void 0:D.profileImage)||V.profileImage||"/default-profile.png",count:X}}}const K=await qe.get("https://ethiostore-17d9f-default-rtdb.firebaseio.com/Parents.json");for(const J in K.data||{}){const V=K.data[J],X=await z(V.userId);if(X>0){const D=I(V.userId);x[V.userId]={type:"parent",name:(D==null?void 0:D.name)||V.name||"Parent",profileImage:(D==null?void 0:D.profileImage)||V.profileImage||"/default-profile.png",count:X}}}y(x)}catch(w){console.error("Unread fetch failed:",w)}};me.useEffect(()=>{const x=w=>{!w.target.closest(".icon-circle")&&!w.target.closest(".messenger-dropdown")&&v(!1)};return document.addEventListener("click",x),()=>document.removeEventListener("click",x)},[]),me.useEffect(()=>{if(!e.userId)return;L();const x=setInterval(L,5e3);return()=>clearInterval(x)},[e.userId]);const k=async x=>{const w=`${e.userId}_${x}`,S=`${x}_${e.userId}`,[I,z]=await Promise.all([qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${w}/messages.json`),qe.get(`https://ethiostore-17d9f-default-rtdb.firebaseio.com/Chats/${S}/messages.json`)]),A={},H=(K,J)=>{Object.entries(K||{}).forEach(([V,X])=>{X.receiverId===e.userId&&!X.seen&&(A[`${J}/${V}/seen`]=!0)})};H(I.data,`Chats/${w}/messages`),H(z.data,`Chats/${S}/messages`),Object.keys(A).length>0&&await qe.patch("https://ethiostore-17d9f-default-rtdb.firebaseio.com/.json",A)},R=Object.values(p||{}).reduce((x,w)=>x+(w.count||0),0),C=((E==null?void 0:E.length)||0)+R,_={minHeight:"80vh",display:"flex",alignItems:"center",justifyContent:"flex-start",padding:24,width:"100%",boxSizing:"border-box",background:"linear-gradient(180deg,#f6f8ff 0%, #ffffff 60%)"};return N.teacher,N.teacher,N.teacher,N.parent,N.parent,N.parent,T.jsxs("div",{className:"dashboard-page",children:[T.jsxs("nav",{className:"top-navbar",children:[T.jsx("h2",{children:"Gojo Dashboard"}),T.jsxs("div",{className:"nav-right",children:[T.jsxs("div",{className:"icon-circle",style:{position:"relative",cursor:"pointer"},onClick:x=>{x.stopPropagation(),$(w=>!w)},children:[T.jsx(wc,{}),C>0&&T.jsx("span",{className:"badge",children:C}),W&&T.jsx("div",{className:"notification-dropdown",onClick:x=>x.stopPropagation(),style:{position:"absolute",top:"45px",right:"0",width:"360px",maxHeight:"420px",overflowY:"auto",background:"#fff",borderRadius:10,boxShadow:"0 6px 20px rgba(0,0,0,0.12)",zIndex:1e3,padding:6},children:C===0?T.jsx("p",{className:"muted",children:"No new notifications"}):T.jsxs("div",{children:[E.length>0&&T.jsxs("div",{children:[T.jsx("div",{className:"notification-section-title",children:"Posts"}),E.map(x=>T.jsxs("div",{className:"notification-row",onClick:async()=>{try{await qe.post(`${r}/mark_post_notification_read`,{notificationId:x.notificationId})}catch(w){console.warn("Failed to mark notification:",w)}M(w=>w.filter(S=>S.notificationId!==x.notificationId)),$(!1),g("/dashboard",{state:{postId:x.postId,posterName:x.adminName,posterProfile:x.adminProfile}})},style:{padding:10,display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:"1px solid #f0f0f0",transition:"background 120ms ease"},onMouseEnter:w=>w.currentTarget.style.background="#f6f8fa",onMouseLeave:w=>w.currentTarget.style.background="",children:[T.jsx("img",{src:x.adminProfile||"/default-profile.png",alt:x.adminName,style:{width:46,height:46,borderRadius:8,objectFit:"cover"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("strong",{style:{display:"block",marginBottom:4},children:x.adminName}),T.jsx("p",{style:{margin:0,fontSize:13,color:"#555",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:x.message})]}),T.jsx("div",{style:{fontSize:12,color:"#888",marginLeft:8},children:new Date(x.time||x.createdAt||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},x.notificationId))]}),R>0&&T.jsxs("div",{children:[T.jsx("div",{className:"notification-section-title",style:{padding:"8px 10px",color:"#333",fontWeight:700,background:"#fafafa",borderRadius:6,margin:"8px 6px"},children:"Messages"}),Object.entries(p||{}).map(([x,w])=>T.jsxs("div",{className:"notification-row",onClick:async()=>{await k(x),y(S=>{const I={...S};return delete I[x],I}),$(!1),g("/all-chat",{state:{user:{userId:x,name:w.name,profileImage:w.profileImage,type:w.type}}})},style:{padding:10,display:"flex",alignItems:"center",gap:12,cursor:"pointer",borderBottom:"1px solid #f0f0f0",transition:"background 120ms ease"},onMouseEnter:S=>S.currentTarget.style.background="#f6f8fa",onMouseLeave:S=>S.currentTarget.style.background="",children:[T.jsx("img",{src:w.profileImage||"/default-profile.png",alt:w.name,style:{width:46,height:46,borderRadius:8,objectFit:"cover"}}),T.jsxs("div",{style:{flex:1,minWidth:0},children:[T.jsx("strong",{style:{display:"block",marginBottom:4},children:w.name}),T.jsxs("p",{style:{margin:0,fontSize:13,color:"#555",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:[w.count," new message",w.count>1&&"s"]})]})]},x))]})]})})]}),T.jsxs("div",{className:"icon-circle",style:{position:"relative",cursor:"pointer"},onClick:()=>g("/all-chat"),children:[T.jsx(vc,{}),R>0&&T.jsx("span",{className:"badge",children:R})]}),T.jsx(gr,{className:"icon-circle",to:"/settings",children:T.jsx(_c,{})}),T.jsx("img",{src:e.profileImage||"/default-profile.png",alt:"admin",className:"profile-img"})]})]}),T.jsxs("div",{className:"google-dashboard",children:[T.jsxs("div",{className:"google-sidebar",style:{width:"220px",padding:"10px"},children:[T.jsxs("div",{className:"sidebar-profile",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:6,paddingBottom:6},children:[T.jsx("div",{className:"sidebar-img-circle",style:{width:48,height:48,borderRadius:"50%",overflow:"hidden",border:"2px solid #e6eefc"},children:T.jsx("img",{src:(e==null?void 0:e.profileImage)||"/default-profile.png",alt:"profile",style:{width:"100%",height:"100%",objectFit:"cover"}})}),T.jsx("h3",{style:{margin:0,fontSize:14,fontWeight:700},children:(e==null?void 0:e.name)||"Admin Name"}),T.jsx("p",{style:{margin:0,fontSize:12,color:"#6b7280"},children:(e==null?void 0:e.adminId)||"username"})]}),T.jsxs("div",{className:"sidebar-menu",style:{display:"flex",flexDirection:"column",gap:6,marginTop:8},children:[T.jsxs(gr,{className:"sidebar-btn",to:"/dashboard",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(xc,{style:{width:18,height:18}})," Home"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/my-posts",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Ca,{style:{width:18,height:18}})," My Posts"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/teachers",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Teachers"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/students",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Students"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/schedule",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(sl,{style:{width:18,height:18}})," Schedule"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/parents",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Pn,{style:{width:18,height:18}})," Parents"]}),T.jsxs(gr,{className:"sidebar-btn",to:"/registration-form",style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13,backgroundColor:"#4b6cb7",color:"#fff",borderRadius:8},children:[T.jsx(Pn,{style:{width:18,height:18}})," Registration Form"]}),T.jsxs("button",{className:"sidebar-btn logout-btn",onClick:()=>{localStorage.removeItem("admin"),window.location.href="/login"},style:{display:"flex",alignItems:"center",gap:8,padding:"8px 10px",fontSize:13},children:[T.jsx(Sc,{style:{width:18,height:18}})," Logout"]})]})]}),T.jsx("div",{style:_,children:T.jsx("div",{style:{marginLeft:260,width:"100%"},children:T.jsxs("div",{style:{marginLeft:0,marginTop:-240,maxWidth:900},children:[T.jsx("h1",{style:{margin:0,fontSize:28,fontWeight:900,letterSpacing:-.5,textAlign:"left"},children:"Registration Form"}),T.jsx("p",{style:{margin:0,opacity:.92,fontSize:14,textAlign:"left"},children:"Select the registration path that fits you. Teacher accounts collect course assignments; Parent accounts allow linking children to your profile."}),T.jsxs("div",{className:"reg-links",style:{marginTop:20},children:[T.jsxs(gr,{to:"/teacher-register",className:`reg-card ${N.teacher?"is-hover":""}`,onMouseEnter:()=>j(x=>({...x,teacher:!0})),onMouseLeave:()=>j(x=>({...x,teacher:!1})),children:[T.jsx("div",{className:"reg-icon",children:T.jsx(Pn,{})}),T.jsxs("div",{className:"reg-content",children:[T.jsx("div",{className:"reg-title",children:"Teacher Registration"}),T.jsx("div",{className:"reg-sub",children:"Create teacher account and assign courses"})]}),T.jsx("div",{className:"reg-arrow",children:""})]}),T.jsxs(gr,{to:"/parent-register",className:`reg-card ${N.parent?"is-hover":""}`,onMouseEnter:()=>j(x=>({...x,parent:!0})),onMouseLeave:()=>j(x=>({...x,parent:!1})),children:[T.jsx("div",{className:"reg-icon",children:T.jsx(F1,{})}),T.jsxs("div",{className:"reg-content",children:[T.jsx("div",{className:"reg-title",children:"Parent Registration"}),T.jsx("div",{className:"reg-sub",children:"Link your children to your profile"})]}),T.jsx("div",{className:"reg-arrow",children:""})]}),T.jsxs(gr,{to:"/student-register",className:`reg-card ${N.student?"is-hover":""}`,onMouseEnter:()=>j(x=>({...x,student:!0})),onMouseLeave:()=>j(x=>({...x,student:!1})),children:[T.jsx("div",{className:"reg-icon",children:T.jsx(F1,{})}),T.jsxs("div",{className:"reg-content",children:[T.jsx("div",{className:"reg-title",children:"Student Registration"}),T.jsx("div",{className:"reg-sub",children:"Create a student profile and ID"})]}),T.jsx("div",{className:"reg-arrow",children:""})]}),T.jsxs(gr,{to:"/register",className:`reg-card ${N.parent?"is-hover":""}`,onMouseEnter:()=>j(x=>({...x,parent:!0})),onMouseLeave:()=>j(x=>({...x,parent:!1})),children:[T.jsx("div",{className:"reg-icon",children:T.jsx(F1,{})}),T.jsxs("div",{className:"reg-content",children:[T.jsx("div",{className:"reg-title",children:"Management Registration"}),T.jsx("div",{className:"reg-sub",children:"Create an account for administrators to manage the school and users."})]}),T.jsx("div",{className:"reg-arrow",children:""})]})]})]})})})]})]})}function KW(){const r=Bs(),e=["1","1AO","2","3","4","4AO","5","6","7","8"],t=["A","B","C"],n={1:["Mathematics","Amharic","English","Safuu","Environmental Science","ART","HPE","Afaan Oromoo"],"1AO":["Mathematics","Gadaaa","English","Safuu","Environmental Science","ART","HPE","Afaan Oromoo"],2:["Mathematics","Amharic","English","Safuu","Environmental Science","ART","HPE","Afaan Oromoo"],3:["Mathematics","Amharic","English","Safuu","Environmental Science","ART","HPE","Afaan Oromoo"],4:["Mathematics","Amharic","English","Safuu","Environmental Science","ART","HPE","Afaan Oromoo"],"4AO":["Mathematics","Gadaaa","English","Safuu","Environmental Science","ART","HPE","Afaan Oromoo"],5:["Afaan Oromoo","Mathematics","Amharic","English","Safuu","Environmental Science","ART","HPE"],6:["Afaan Oromoo","Mathematics","Amharic","English","Safuu","Environmental Science","ART","HPE"],7:["Mathematics","Amharic","English","General Science","ART","OT","HPE","Social Studies","Civics","ICT","Afaan Oromoo"],8:["Mathematics","Amharic","English","General Science","ART","OT","HPE","Social Studies","Civics","ICT","Afaan Oromoo"]},[i,s]=me.useState({name:"",password:"",email:"",phone:"",gender:"",courses:[{grade:"",section:"",subject:""}]}),[o,l]=me.useState(null),[c,a]=me.useState(""),[u,d]=me.useState(""),[f,h]=me.useState(""),[m,g]=me.useState({grade:"",section:"",subject:""}),[p,y]=me.useState(""),b=(F,P=null)=>{const{name:L,value:k}=F.target;if(P!==null){const R=[...i.courses];R[P][L]=k,L==="grade"&&(R[P].subject=""),s({...i,courses:R})}else s({...i,[L]:k})},v=()=>{s({...i,courses:[...i.courses,{grade:"",section:"",subject:""}]})},E=async F=>{F.preventDefault(),y("");const{grade:P,section:L,subject:k}=m;if(!f){y("Enter teacher key");return}if(!P||!L||!k){y("Select grade, section and subject");return}try{if(!(await Ps(dn(Mn,`Teachers/${f}`))).exists()){y("Teacher not found by that key.");return}const C=await Ps(dn(Mn,"Courses")),_=C.exists()?C.val():{};let x=null;for(const[w,S]of Object.entries(_))if(S.grade==P&&String(S.section)==String(L)&&S.subject==k){x=w;break}x||(x=(await Gy(dn(Mn,"Courses"),{grade:P,section:L,subject:k})).key,y("Course did not exist  created new course and assigning...")),await Gy(dn(Mn,"TeacherAssignments"),{teacherId:f,courseId:x}),y("Subject added to teacher successfully."),g({grade:"",section:"",subject:""}),h("")}catch(R){console.error("Add to existing teacher failed:",R),y("Failed to add subject. See console.")}},M=F=>{const P=i.courses.filter((L,k)=>k!==F);s({...i,courses:P})},W=()=>{const F=new Set;for(let P of i.courses){if(!P.grade||!P.section||!P.subject)continue;const L=`${P.grade}${P.section}-${P.subject}`;if(F.has(L))return!0;F.add(L)}return!1},$=F=>F===""||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(F).toLowerCase()),N=F=>/^[0-9+()\-\s]{6,20}$/.test(String(F).trim()),j=async F=>{if(F.preventDefault(),a(""),d(""),!$(i.email)){a("Please enter a valid email address or leave it empty.");return}if(!N(i.phone)){a("Please enter a valid phone number.");return}if(!i.gender){a("Please select gender.");return}if(!i.name||!i.password){a("Name and password are required.");return}if(W()){a("Duplicate subject detected! A subject can only be taught once per grade and section.");return}try{const P=new FormData;P.append("name",i.name),P.append("password",i.password),P.append("email",i.email),P.append("phone",i.phone),P.append("gender",i.gender),P.append("courses",JSON.stringify(i.courses)),o&&P.append("profile",o);const k=await(await fetch(`${Io}/register/teacher`,{method:"POST",body:P})).json();if(k.success){const R=k.teacherKey||k.teacherId||k.teacherKey||k.teacherId||"";d(R),s({name:"",password:"",email:"",phone:"",gender:"",courses:[{grade:"",section:"",subject:""}]}),l(null),a("Registration successful. Your teacherId (username) is shown below.")}else a(k.message||"Registration failed.")}catch(P){console.error("Registration error:",P),a("Server error. Check console.")}};return T.jsx("div",{className:"auth-container",children:T.jsxs("div",{className:"auth-box",style:{maxWidth:"600px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[T.jsx("button",{type:"button",onClick:()=>r(-1),"aria-label":"Go back",style:{background:"none",width:"30px",border:"none",cursor:"pointer",fontSize:20,color:"black",borderRadius:4},children:""}),T.jsx("h2",{style:{margin:0},children:"Teacher Registration"})]}),T.jsxs("div",{style:{marginBottom:12,padding:12,border:"1px solid #eee",borderRadius:8,background:"#fafafa"},children:[T.jsx("h3",{style:{marginTop:0},children:"Add Subject To Existing Teacher"}),T.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[T.jsx("input",{placeholder:"Teacher key (e.g. TCHR123)",value:f,onChange:F=>h(F.target.value)}),T.jsxs("select",{value:m.grade,onChange:F=>g({...m,grade:F.target.value}),children:[T.jsx("option",{value:"",children:"Grade"}),e.map(F=>T.jsx("option",{value:F,children:F},F))]}),T.jsxs("select",{value:m.section,onChange:F=>g({...m,section:F.target.value}),children:[T.jsx("option",{value:"",children:"Section"}),t.map(F=>T.jsx("option",{value:F,children:F},F))]}),T.jsxs("select",{value:m.subject,onChange:F=>g({...m,subject:F.target.value}),disabled:!m.grade,children:[T.jsx("option",{value:"",children:"Subject"}),m.grade&&n[m.grade].map(F=>T.jsx("option",{value:F,children:F},F))]}),T.jsx("button",{className:"add-btn",onClick:E,style:{whiteSpace:"nowrap"},children:"Add Subject"})]}),p&&T.jsx("div",{style:{marginTop:8,color:p.startsWith("Failed")||p.includes("not found")?"#b91c1c":"#064e3b"},children:p})]}),c&&T.jsx("p",{className:"auth-error",children:c}),T.jsxs("form",{onSubmit:j,children:[T.jsx("input",{type:"text",name:"name",placeholder:"Full Name",value:i.name,onChange:b,required:!0}),T.jsx("input",{type:"email",name:"email",placeholder:"Email (optional)",value:i.email,onChange:b}),T.jsx("input",{type:"tel",name:"phone",placeholder:"Phone number",value:i.phone,onChange:b,required:!0}),T.jsxs("select",{name:"gender",value:i.gender,onChange:b,required:!0,children:[T.jsx("option",{value:"",children:"Select Gender"}),T.jsx("option",{value:"Male",children:"Male"}),T.jsx("option",{value:"Female",children:"Female"})]}),T.jsx("input",{type:"password",name:"password",placeholder:"Password",value:i.password,onChange:b,required:!0}),T.jsxs("div",{className:"profile-upload",children:[o&&T.jsx("img",{src:URL.createObjectURL(o),alt:"Profile Preview",className:"profile-preview"}),T.jsx("input",{type:"file",accept:"image/*",onChange:F=>l(F.target.files[0])})]}),T.jsx("h3",{children:"Courses"}),i.courses.map((F,P)=>T.jsxs("div",{className:"course-group",children:[T.jsxs("select",{name:"grade",value:F.grade,onChange:L=>b(L,P),required:!0,children:[T.jsx("option",{value:"",children:"Select Grade"}),e.map(L=>T.jsx("option",{value:L,children:L},L))]}),T.jsxs("select",{name:"section",value:F.section,onChange:L=>b(L,P),required:!0,children:[T.jsx("option",{value:"",children:"Select Section"}),t.map(L=>T.jsx("option",{value:L,children:L},L))]}),T.jsxs("select",{name:"subject",value:F.subject,onChange:L=>b(L,P),required:!0,disabled:!F.grade,children:[T.jsx("option",{value:"",children:"Select Subject"}),F.grade&&n[F.grade].map(L=>T.jsx("option",{value:L,children:L},L))]}),i.courses.length>1&&T.jsx("button",{type:"button",className:"remove-btn",onClick:()=>M(P),children:"Remove"})]},P)),T.jsx("button",{type:"button",className:"add-btn",onClick:v,style:{marginTop:10},children:"Add Course"}),T.jsx("button",{type:"submit",className:"submit-btn",style:{marginTop:10},children:"Register"})]}),u&&T.jsx("div",{className:"auth-success",style:{marginTop:12},children:T.jsxs("p",{children:["Registration complete. Your teacherId (username) is:"," ",T.jsx("strong",{children:u})]})})]})})}function YW(){const r=Bs(),[e,t]=me.useState({name:"",password:"",email:"",phone:"",dob:"",gender:"",grade:"",section:""}),[n,i]=me.useState(null),[s,o]=me.useState(""),[l,c]=me.useState(!1),a=["7","8","9","10","11 Social","11 Natural","12 Social","12 Natural"],u=["A","B","C"],d=g=>t(p=>({...p,[g.target.name]:g.target.value})),f=()=>!e.name.trim()||!e.password||!e.grade||!e.section?(o("Name, password, grade and section are required."),!1):!0,h=async g=>{if(g.preventDefault(),o(""),!!f()){c(!0);try{const p=new FormData;p.append("name",e.name),p.append("password",e.password),p.append("grade",e.grade),p.append("section",e.section),e.email&&p.append("email",e.email),e.phone&&p.append("phone",e.phone),e.dob&&p.append("dob",e.dob),e.gender&&p.append("gender",e.gender),n&&p.append("profile",n);const b=await(await fetch(`${Io}/register/student`,{method:"POST",body:p})).json();b.success?(o("Student registered: "+(b.studentId||"")),setTimeout(()=>r("/students"),1300)):o(b.message||"Registration failed.")}catch(p){console.error(p),o("Server error. Check console.")}finally{c(!1)}}},m={fontSize:13,color:"#334155",marginBottom:6,display:"block",fontWeight:700};return T.jsx("div",{className:"auth-container",children:T.jsxs("div",{className:"auth-box",style:{maxWidth:760},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[T.jsx("button",{type:"button",onClick:()=>r(-1),"aria-label":"Go back",style:{background:"none",border:"none",cursor:"pointer",fontSize:20,width:10,color:"black"},children:""}),T.jsx("h2",{style:{margin:0},children:"Student Registration"})]}),s&&T.jsx("div",{style:{marginBottom:12,color:s.startsWith("Student registered")?"green":"#b91c1c"},children:s}),T.jsxs("form",{onSubmit:h,className:"vertical-form",children:[T.jsx("label",{style:m,children:"Full name"}),T.jsx("input",{name:"name",value:e.name,onChange:d,placeholder:"John Doe"}),T.jsx("label",{style:m,children:"Grade"}),T.jsxs("select",{name:"grade",value:e.grade,onChange:d,children:[T.jsx("option",{value:"",children:"Select grade"}),a.map(g=>T.jsx("option",{value:g,children:g},g))]}),T.jsx("label",{style:m,children:"Section"}),T.jsxs("select",{name:"section",value:e.section,onChange:d,children:[T.jsx("option",{value:"",children:"Select section"}),u.map(g=>T.jsx("option",{value:g,children:g},g))]}),T.jsx("label",{style:m,children:"Password"}),T.jsx("input",{name:"password",type:"password",value:e.password,onChange:d,placeholder:"Choose a secure password"}),T.jsx("label",{style:m,children:"Email (optional)"}),T.jsx("input",{name:"email",value:e.email,onChange:d,placeholder:"student@example.com"}),T.jsx("label",{style:m,children:"Phone (optional)"}),T.jsx("input",{name:"phone",value:e.phone,onChange:d,placeholder:"+251xxxxxxxx"}),T.jsx("label",{style:m,children:"Date of birth (optional)"}),T.jsx("input",{name:"dob",type:"date",value:e.dob,onChange:d}),T.jsx("label",{style:m,children:"Gender"}),T.jsxs("select",{name:"gender",value:e.gender,onChange:d,children:[T.jsx("option",{value:"",children:"Select gender"}),T.jsx("option",{value:"Male",children:"Male"}),T.jsx("option",{value:"Female",children:"Female"})]}),T.jsx("label",{style:{marginTop:6,display:"block",fontWeight:700},children:"Profile photo (optional)"}),T.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",marginBottom:12},children:[T.jsxs("label",{className:"file-label",children:[T.jsx(I7,{}),T.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:g=>i(g.target.files[0])}),T.jsx("span",{style:{marginLeft:8},children:n?n.name:"Choose a photo"})]}),n&&T.jsx("img",{src:URL.createObjectURL(n),alt:"preview",className:"profile-preview"})]}),T.jsx("div",{style:{display:"flex",gap:12,alignItems:"center"},children:T.jsx("button",{type:"submit",disabled:l,children:l?"Saving...":T.jsxs(T.Fragment,{children:[T.jsx(m0,{style:{marginRight:8}})," Register"]})})})]})]})})}function XW(){const r=Bs(),[e,t]=me.useState({name:"",username:"",phone:"",password:""}),[n,i]=me.useState(null),[s,o]=me.useState([{studentId:"",relationship:""}]),[l,c]=me.useState(""),[a,u]=me.useState(!1),d=["Mother","Father","Guardian","Other"],f=b=>t(v=>({...v,[b.target.name]:b.target.value})),h=(b,v)=>{const{name:E,value:M}=v.target,W=[...s];W[b][E]=M,o(W)},m=()=>o(b=>[...b,{studentId:"",relationship:""}]),g=b=>o(v=>v.filter((E,M)=>M!==b)),p=()=>{if(!e.name.trim()||!e.username.trim()||!e.phone.trim()||!e.password)return c("Name, username, phone and password are required."),!1;if(s.length===0)return c("Add at least one child."),!1;for(let b of s)if(!b.studentId.trim()||!b.relationship)return c("Each child must have studentId and relationship."),!1;return!0},y=async b=>{if(b.preventDefault(),c(""),!!p()){u(!0);try{const v=new FormData;v.append("name",e.name),v.append("username",e.username),v.append("phone",e.phone),v.append("password",e.password),n&&v.append("profile",n);for(const W of s)v.append("studentId",W.studentId),v.append("relationship",W.relationship);const E=await fetch(`${Io}/register/parent`,{method:"POST",body:v}),M=await E.json();E.ok&&M.success?(c(`Parent registered. parentId: ${M.parentId||""}`),t({name:"",username:"",phone:"",password:""}),o([{studentId:"",relationship:""}]),i(null),setTimeout(()=>r("/"),1400)):c(M.message||"Registration failed.")}catch(v){console.error(v),c("Server error. Check console.")}finally{u(!1)}}};return T.jsx("div",{className:"auth-container",children:T.jsxs("div",{className:"auth-box",style:{maxWidth:760},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[T.jsx("button",{type:"button",onClick:()=>r(-1),"aria-label":"Go back",style:{background:"none",border:"none",color:"black",cursor:"pointer",fontSize:20,width:10},children:""}),T.jsx("h2",{style:{margin:0},children:"Parent Registration"})]}),l&&T.jsx("div",{style:{marginBottom:12,color:l.startsWith("Parent registered")?"green":"#b91c1c"},children:l}),T.jsxs("form",{onSubmit:y,children:[T.jsx("label",{style:{textAlign:"left",marginBottom:10,display:"block",fontWeight:700,color:"#334155",fontSize:13},children:"Full name"}),T.jsx("input",{name:"name",className:"",value:e.name,onChange:f,placeholder:"Full name"}),T.jsx("label",{style:{textAlign:"left",marginBottom:10,display:"block",fontWeight:700,color:"#334155",fontSize:13},children:"Username"}),T.jsx("input",{name:"username",value:e.username,onChange:f,placeholder:"Unique username"}),T.jsx("label",{style:{textAlign:"left",marginBottom:10,display:"block",fontWeight:700,color:"#334155",fontSize:13},children:"Phone"}),T.jsx("input",{name:"phone",value:e.phone,onChange:f,placeholder:"+251xxxxxxxx"}),T.jsx("label",{style:{textAlign:"left",marginBottom:10,display:"block",fontWeight:700,color:"#334155",fontSize:13},children:"Password"}),T.jsx("input",{name:"password",type:"password",value:e.password,onChange:f,placeholder:"Choose a password"}),T.jsx("label",{style:{textAlign:"left",marginBottom:10,display:"block",fontWeight:700,color:"#334155",fontSize:13},children:"Profile photo (optional)"}),T.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",marginBottom:12},children:[T.jsxs("label",{className:"file-label",children:[T.jsx(I7,{}),T.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:b=>i(b.target.files[0])}),T.jsx("span",{style:{marginLeft:8},children:n?n.name:"Choose a photo"})]}),n&&T.jsx("img",{src:URL.createObjectURL(n),alt:"preview",className:"profile-preview"})]}),T.jsx("h3",{style:{textAlign:"left",marginBottom:10,display:"block",fontWeight:700,color:"#334155",fontSize:18},children:"Children"}),s.map((b,v)=>T.jsxs("div",{className:"children-row",children:[T.jsx("input",{name:"studentId",value:b.studentId,onChange:E=>h(v,E),placeholder:"StudentId (e.g. GES_0001_26)"}),T.jsxs("select",{name:"relationship",value:b.relationship,onChange:E=>h(v,E),children:[T.jsx("option",{value:"",children:"Select relationship"}),d.map(E=>T.jsx("option",{value:E,children:E},E))]}),T.jsxs("div",{children:[s.length>1&&T.jsx("button",{type:"button",className:"muted-btn",onClick:()=>g(v),style:{marginRight:8},children:"Remove"}),v===s.length-1&&T.jsx("button",{type:"button",className:"muted-btn",onClick:m,children:"Add"})]})]},v)),T.jsx("div",{style:{display:"flex",gap:12,alignItems:"center"},children:T.jsx("button",{type:"submit",className:"",disabled:a,children:a?"Saving...":T.jsxs(T.Fragment,{children:[T.jsx(m0,{style:{marginRight:8}})," Register"]})})})]})]})})}function QW(){const[r,e]=me.useState(""),[t,n]=me.useState(""),[i,s]=me.useState(""),[o,l]=me.useState(""),[c,a]=me.useState(""),[u,d]=me.useState(""),[f,h]=me.useState(null),[m,g]=me.useState(""),[p,y]=me.useState(""),b=Bs(),v=async E=>{E.preventDefault(),y(""),g("");try{const M=new FormData;M.append("name",r),M.append("password",t),M.append("email",i),M.append("gender",o),M.append("phone",c),M.append("title",u),f&&M.append("profile",f);const $=await(await fetch(`${Io}/api/register`,{method:"POST",body:M})).json();$.success?(g($.adminId),y("Registration successful."),setTimeout(()=>b("/login"),4e3)):y($.message||"Registration failed")}catch{y("Server error, try again.")}};return T.jsx("div",{className:"auth-container",children:T.jsxs("div",{className:"auth-box",children:[T.jsx("button",{type:"button",onClick:()=>b(-1),"aria-label":"Go back",style:{background:"none",width:"30px",border:"none",cursor:"pointer",fontSize:20,color:"black",borderRadius:4,marginLeft:"-300px",marginBottom:"10px"},children:""}),T.jsx("h2",{style:{textAlign:"center",marginTop:"-50px"},children:"Register"}),p&&T.jsx("div",{className:"auth-message",children:p}),T.jsxs("form",{onSubmit:v,style:{display:"flex",flexDirection:"column"},children:[T.jsx("input",{type:"text",placeholder:"Full Name",value:r,onChange:E=>e(E.target.value),required:!0}),T.jsx("input",{type:"email",placeholder:"Email",value:i,onChange:E=>s(E.target.value),required:!0}),T.jsxs("select",{value:o,onChange:E=>l(E.target.value),required:!0,style:{marginBottom:"12px"},children:[T.jsx("option",{value:"",children:"Select gender"}),T.jsx("option",{value:"Male",children:"Male"}),T.jsx("option",{value:"Female",children:"Female"})]}),T.jsx("input",{type:"tel",placeholder:"Phone number",value:c,onChange:E=>a(E.target.value),required:!0}),T.jsx("input",{type:"text",placeholder:"Title (e.g., Principal, ...)",value:u,onChange:E=>d(E.target.value)}),T.jsx("input",{type:"password",placeholder:"Password",value:t,onChange:E=>n(E.target.value),required:!0}),T.jsxs("div",{style:{marginBottom:"15px",textAlign:"center"},children:[f&&T.jsx("img",{src:URL.createObjectURL(f),alt:"Profile Preview",style:{maxWidth:"120px",maxHeight:"120px",objectFit:"cover"}}),T.jsx("input",{type:"file",accept:"image/*",onChange:E=>h(E.target.files[0])})]}),T.jsx("button",{type:"submit",children:"Register"})]}),m&&T.jsxs("div",{className:"auth-success",style:{marginTop:12},children:[T.jsx("b",{children:"Your adminId (username):"})," ",T.jsx("span",{style:{color:"green"},children:m})]})]})})}function JW(){return T.jsx(PN,{children:T.jsxs(CN,{children:[T.jsx(ms,{path:"/",element:T.jsx(f3,{})}),T.jsx(ms,{path:"/login",element:T.jsx(f3,{})}),T.jsx(ms,{path:"/dashboard",element:T.jsx(jR,{})}),T.jsx(ms,{path:"/my-posts",element:T.jsx(RR,{})}),T.jsx(ms,{path:"/teachers",element:T.jsx(LW,{})}),T.jsx(ms,{path:"/students",element:T.jsx(DW,{})}),T.jsx(ms,{path:"/parents",element:T.jsx(FW,{})}),T.jsx(ms,{path:"/settings",element:T.jsx(zW,{})}),T.jsx(ms,{path:"/schedule",element:T.jsx(HW,{})})," ",T.jsx(ms,{path:"/all-chat",element:T.jsx(UW,{})}),T.jsx(ms,{path:"/student-chat",element:T.jsx(VW,{})}),T.jsx(ms,{path:"/registration-form",element:T.jsx(GW,{})})," ",T.jsx(ms,{path:"/teacher-register",element:T.jsx(KW,{})})," ",T.jsx(ms,{path:"/student-register",element:T.jsx(YW,{})})," ",T.jsx(ms,{path:"/parent-register",element:T.jsx(XW,{})})," ",T.jsx(ms,{path:"/register",element:T.jsx(QW,{})})," "]})})}me.createContext();function ZW(){return T.jsx(JW,{})}T2.createRoot(document.getElementById("root")).render(T.jsx(ea.StrictMode,{children:T.jsx(ZW,{})}));export{Un as _,hn as c,N6 as g};
